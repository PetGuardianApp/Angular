"use strict";(self.webpackChunkpetguardian_web=self.webpackChunkpetguardian_web||[]).push([[179],{6304:(Ct,Ne,F)=>{F.d(Ne,{Dh:()=>He,GT:()=>ve,cc:()=>Ve,hO:()=>Ze,on:()=>$,pX:()=>he,xv:()=>we});var l=F(5879),ne=F(120),B=F(2793);Ct=F.hmd(Ct);const ie=["ngOnDestroy"],he=(ze,Rt,Nt,pe={})=>new Proxy(ze,{get:(xe,fe)=>Nt.runOutsideAngular(()=>{var Pe;if(ze[fe])return!(null===(Pe=pe?.spy)||void 0===Pe)&&Pe.get&&pe.spy.get(fe,ze[fe]),ze[fe];if(ie.indexOf(fe)>-1)return()=>{};const We=Rt.toPromise().then(ge=>{const X=ge&&ge[fe];return"function"==typeof X?X.bind(ge):X&&X.then?X.then(Je=>Nt.run(()=>Je)):Nt.run(()=>X)});return new Proxy(()=>{},{get:(ge,X)=>We[X],apply:(ge,X,Je)=>We.then(kt=>{var Nn;const Zn=kt&&kt(...Je);return!(null===(Nn=pe?.spy)||void 0===Nn)&&Nn.apply&&pe.spy.apply(fe,Je,Zn),Zn})})})}),ve=(ze,Rt)=>{Rt.forEach(Nt=>{Object.getOwnPropertyNames(Nt.prototype||Nt).forEach(pe=>{Object.defineProperty(ze.prototype,pe,Object.getOwnPropertyDescriptor(Nt.prototype||Nt,pe))})})};class Ae{constructor(Rt){return Rt}}const He=new l.OlP("angularfire2.app.options"),we=new l.OlP("angularfire2.app.name");function $(ze,Rt,Nt){const xe="object"==typeof Nt&&Nt||{};xe.name=xe.name||"string"==typeof Nt&&Nt||"[DEFAULT]";const Pe=ne.Z.apps.filter(We=>We&&We.name===xe.name)[0]||Rt.runOutsideAngular(()=>ne.Z.initializeApp(ze,xe));try{JSON.stringify(ze)!==JSON.stringify(Pe.options)&&Z("error",`${Pe.name} Firebase App already initialized with different options${Ct.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ae(Pe)}const Z=(ze,...Rt)=>{(0,l.X6Q)()&&typeof console<"u"&&console[ze](...Rt)},ae={provide:Ae,useFactory:$,deps:[He,l.R0b,[new l.FiY,we]]};let Ze=(()=>{class ze{constructor(Nt){ne.Z.registerVersion("angularfire",B.q4.full,"core"),ne.Z.registerVersion("angularfire",B.q4.full,"app-compat"),ne.Z.registerVersion("angular",l.q4F.full,Nt.toString())}static initializeApp(Nt,pe){return{ngModule:ze,providers:[{provide:He,useValue:Nt},{provide:we,useValue:pe}]}}}return ze.\u0275fac=function(Nt){return new(Nt||ze)(l.LFG(l.Lbi))},ze.\u0275mod=l.oAB({type:ze}),ze.\u0275inj=l.cJS({providers:[ae]}),ze})();function Ve(ze,Rt,Nt,pe,xe){const[,fe,Pe]=globalThis.\u0275AngularfireInstanceCache.find(We=>We[0]===ze)||[];if(fe)return function st(ze,Rt){try{return ze.toString()===Rt.toString()}catch{return ze===Rt}}(xe,Pe)||(ot("error",`${Rt} was already initialized on the ${Nt} Firebase App with different settings.${$e?" You may need to reload as Firebase is not HMR aware.":""}`),ot("warn",{is:xe,was:Pe})),fe;{const We=pe();return globalThis.\u0275AngularfireInstanceCache.push([ze,We,xe]),We}}const $e=!!Ct.hot,ot=(ze,...Rt)=>{(0,l.X6Q)()&&typeof console<"u"&&console[ze](...Rt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2793:(Ct,Ne,F)=>{F.d(Ne,{q4:()=>L,iC:()=>jl,fc:()=>Lc,HU:()=>Mp,vb:()=>Ap,JM:()=>Xa});var l=F(5879),ne=F(4097),B=F(5861),ie=F(4303),he=F(9058),ve=F(4537),Ae=F(7879);const He=(C,S)=>S.some(R=>C instanceof R);let we,$;const Ze=new WeakMap,Ve=new WeakMap,st=new WeakMap,$e=new WeakMap,ot=new WeakMap;let Nt={get(C,S,R){if(C instanceof IDBTransaction){if("done"===S)return Ve.get(C);if("objectStoreNames"===S)return C.objectStoreNames||st.get(C);if("store"===S)return R.objectStoreNames[1]?void 0:R.objectStore(R.objectStoreNames[0])}return Pe(C[S])},set:(C,S,R)=>(C[S]=R,!0),has:(C,S)=>C instanceof IDBTransaction&&("done"===S||"store"===S)||S in C};function fe(C){return"function"==typeof C?function xe(C){return C!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ae(){return $||($=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(C)?function(...S){return C.apply(We(this),S),Pe(Ze.get(this))}:function(...S){return Pe(C.apply(We(this),S))}:function(S,...R){const U=C.call(We(this),S,...R);return st.set(U,S.sort?S.sort():[S]),Pe(U)}}(C):(C instanceof IDBTransaction&&function Rt(C){if(Ve.has(C))return;const S=new Promise((R,U)=>{const J=()=>{C.removeEventListener("complete",re),C.removeEventListener("error",Te),C.removeEventListener("abort",Te)},re=()=>{R(),J()},Te=()=>{U(C.error||new DOMException("AbortError","AbortError")),J()};C.addEventListener("complete",re),C.addEventListener("error",Te),C.addEventListener("abort",Te)});Ve.set(C,S)}(C),He(C,function Z(){return we||(we=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(C,Nt):C)}function Pe(C){if(C instanceof IDBRequest)return function ze(C){const S=new Promise((R,U)=>{const J=()=>{C.removeEventListener("success",re),C.removeEventListener("error",Te)},re=()=>{R(Pe(C.result)),J()},Te=()=>{U(C.error),J()};C.addEventListener("success",re),C.addEventListener("error",Te)});return S.then(R=>{R instanceof IDBCursor&&Ze.set(R,C)}).catch(()=>{}),ot.set(S,C),S}(C);if($e.has(C))return $e.get(C);const S=fe(C);return S!==C&&($e.set(C,S),ot.set(S,C)),S}const We=C=>ot.get(C),Je=["get","getKey","getAll","getAllKeys","count"],kt=["put","add","delete","clear"],Nn=new Map;function Zn(C,S){if(!(C instanceof IDBDatabase)||S in C||"string"!=typeof S)return;if(Nn.get(S))return Nn.get(S);const R=S.replace(/FromIndex$/,""),U=S!==R,J=kt.includes(R);if(!(R in(U?IDBIndex:IDBObjectStore).prototype)||!J&&!Je.includes(R))return;const re=function(){var Te=(0,B.Z)(function*(ht,...lt){const Ot=this.transaction(ht,J?"readwrite":"readonly");let en=Ot.store;return U&&(en=en.index(lt.shift())),(yield Promise.all([en[R](...lt),J&&Ot.done]))[0]});return function(lt){return Te.apply(this,arguments)}}();return Nn.set(S,re),re}!function pe(C){Nt=C(Nt)}(C=>({...C,get:(S,R,U)=>Zn(S,R)||C.get(S,R,U),has:(S,R)=>!!Zn(S,R)||C.has(S,R)}));const Wn="@firebase/installations",ci="0.6.4",ui=1e4,or=`w:${ci}`,me="FIS_v2",De="https://firebaseinstallations.googleapis.com/v1",Ce=36e5,ut=new he.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function it(C){return C instanceof he.ZR&&C.code.includes("request-failed")}function di({projectId:C}){return`${De}/projects/${C}/installations`}function Pt(C){return{token:C.token,requestStatus:2,expiresIn:ar(C.expiresIn),creationTime:Date.now()}}function Dn(C,S){return xt.apply(this,arguments)}function xt(){return(xt=(0,B.Z)(function*(C,S){const U=(yield S.json()).error;return ut.create("request-failed",{requestName:C,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function Kn({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function Ei(C){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,B.Z)(function*(C){const S=yield C();return S.status>=500&&S.status<600?C():S})).apply(this,arguments)}function ar(C){return Number(C.replace("s","000"))}function Ai(){return(Ai=(0,B.Z)(function*({appConfig:C,heartbeatServiceProvider:S},{fid:R}){const U=di(C),J=Kn(C),re=S.getImmediate({optional:!0});if(re){const Ot=yield re.getHeartbeatsHeader();Ot&&J.append("x-firebase-client",Ot)}const ht={method:"POST",headers:J,body:JSON.stringify({fid:R,authVersion:me,appId:C.appId,sdkVersion:or})},lt=yield Ei(()=>fetch(U,ht));if(lt.ok){const Ot=yield lt.json();return{fid:Ot.fid||R,registrationStatus:2,refreshToken:Ot.refreshToken,authToken:Pt(Ot.authToken)}}throw yield Dn("Create Installation",lt)})).apply(this,arguments)}function zr(C){return new Promise(S=>{setTimeout(S,C)})}const Ra=/^[cdef][\w-]{21}$/,Gt="";function Yt(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const R=function Xt(C){return function _o(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return Ra.test(R)?R:Gt}catch{return Gt}}function Jt(C){return`${C.appName}!${C.appId}`}const hi=new Map;function Hi(C,S){const R=Jt(C);vo(R,S),function En(C,S){const R=function Tn(){return!Fr&&"BroadcastChannel"in self&&(Fr=new BroadcastChannel("[Firebase] FID Change"),Fr.onmessage=C=>{vo(C.data.key,C.data.fid)}),Fr}();R&&R.postMessage({key:C,fid:S}),function os(){0===hi.size&&Fr&&(Fr.close(),Fr=null)}()}(R,S)}function vo(C,S){const R=hi.get(C);if(R)for(const U of R)U(S)}let Fr=null;const yo="firebase-installations-database",Bo=1,Lr="firebase-installations-store";let wo=null;function Me(){return wo||(wo=function ge(C,S,{blocked:R,upgrade:U,blocking:J,terminated:re}={}){const Te=indexedDB.open(C,S),ht=Pe(Te);return U&&Te.addEventListener("upgradeneeded",lt=>{U(Pe(Te.result),lt.oldVersion,lt.newVersion,Pe(Te.transaction))}),R&&Te.addEventListener("blocked",()=>R()),ht.then(lt=>{re&&lt.addEventListener("close",()=>re()),J&&lt.addEventListener("versionchange",()=>J())}).catch(()=>{}),ht}(yo,Bo,{upgrade:(C,S)=>{0===S&&C.createObjectStore(Lr)}})),wo}function Q(C,S){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,B.Z)(function*(C,S){const R=Jt(C),J=(yield Me()).transaction(Lr,"readwrite"),re=J.objectStore(Lr),Te=yield re.get(R);return yield re.put(S,R),yield J.done,(!Te||Te.fid!==S.fid)&&Hi(C,S.fid),S})).apply(this,arguments)}function et(C){return dt.apply(this,arguments)}function dt(){return(dt=(0,B.Z)(function*(C){const S=Jt(C),U=(yield Me()).transaction(Lr,"readwrite");yield U.objectStore(Lr).delete(S),yield U.done})).apply(this,arguments)}function Ft(C,S){return xn.apply(this,arguments)}function xn(){return(xn=(0,B.Z)(function*(C,S){const R=Jt(C),J=(yield Me()).transaction(Lr,"readwrite"),re=J.objectStore(Lr),Te=yield re.get(R),ht=S(Te);return void 0===ht?yield re.delete(R):yield re.put(ht,R),yield J.done,ht&&(!Te||Te.fid!==ht.fid)&&Hi(C,ht.fid),ht})).apply(this,arguments)}function q(C){return W.apply(this,arguments)}function W(){return W=(0,B.Z)(function*(C){let S;const R=yield Ft(C.appConfig,U=>{const J=function ee(C){return sn(C||{fid:Yt(),registrationStatus:0})}(U),re=function Le(C,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(ut.create("app-offline"))};const R={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},U=function ye(C,S){return wt.apply(this,arguments)}(C,R);return{installationEntry:R,registrationPromise:U}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:nn(C)}:{installationEntry:S}}(C,J);return S=re.registrationPromise,re.installationEntry});return R.fid===Gt?{installationEntry:yield S}:{installationEntry:R,registrationPromise:S}}),W.apply(this,arguments)}function wt(){return wt=(0,B.Z)(function*(C,S){try{const R=yield function ss(C,S){return Ai.apply(this,arguments)}(C,S);return Q(C.appConfig,R)}catch(R){throw it(R)&&409===R.customData.serverCode?yield et(C.appConfig):yield Q(C.appConfig,{fid:S.fid,registrationStatus:0}),R}}),wt.apply(this,arguments)}function nn(C){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,B.Z)(function*(C){let S=yield Br(C.appConfig);for(;1===S.registrationStatus;)yield zr(100),S=yield Br(C.appConfig);if(0===S.registrationStatus){const{installationEntry:R,registrationPromise:U}=yield q(C);return U||R}return S})).apply(this,arguments)}function Br(C){return Ft(C,S=>{if(!S)throw ut.create("installation-not-found");return sn(S)})}function sn(C){return function ji(C){return 1===C.registrationStatus&&C.registrationTime+ui<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function br(){return(br=(0,B.Z)(function*({appConfig:C,heartbeatServiceProvider:S},R){const U=function sa(C,{fid:S}){return`${di(C)}/${S}/authTokens:generate`}(C,R),J=function Qn(C,{refreshToken:S}){const R=Kn(C);return R.append("Authorization",function $r(C){return`${me} ${C}`}(S)),R}(C,R),re=S.getImmediate({optional:!0});if(re){const Ot=yield re.getHeartbeatsHeader();Ot&&J.append("x-firebase-client",Ot)}const ht={method:"POST",headers:J,body:JSON.stringify({installation:{sdkVersion:or,appId:C.appId}})},lt=yield Ei(()=>fetch(U,ht));if(lt.ok)return Pt(yield lt.json());throw yield Dn("Generate Auth Token",lt)})).apply(this,arguments)}function El(C){return rh.apply(this,arguments)}function rh(){return rh=(0,B.Z)(function*(C,S=!1){let R;const U=yield Ft(C.appConfig,re=>{if(!aa(re))throw ut.create("not-registered");const Te=re.authToken;if(!S&&function Cl(C){return 2===C.requestStatus&&!function mc(C){const S=Date.now();return S<C.creationTime||C.creationTime+C.expiresIn<S+Ce}(C)}(Te))return re;if(1===Te.requestStatus)return R=function bo(C,S){return oa.apply(this,arguments)}(C,S),re;{if(!navigator.onLine)throw ut.create("app-offline");const ht=function Qf(C){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:S})}(re);return R=function Ks(C,S){return vn.apply(this,arguments)}(C,ht),ht}});return R?yield R:U.authToken}),rh.apply(this,arguments)}function oa(){return(oa=(0,B.Z)(function*(C,S){let R=yield Zs(C.appConfig);for(;1===R.authToken.requestStatus;)yield zr(100),R=yield Zs(C.appConfig);const U=R.authToken;return 0===U.requestStatus?El(C,S):U})).apply(this,arguments)}function Zs(C){return Ft(C,S=>{if(!aa(S))throw ut.create("not-registered");return function Ls(C){return 1===C.requestStatus&&C.requestTime+ui<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function vn(){return vn=(0,B.Z)(function*(C,S){try{const R=yield function In(C,S){return br.apply(this,arguments)}(C,S),U=Object.assign(Object.assign({},S),{authToken:R});return yield Q(C.appConfig,U),R}catch(R){if(!it(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const U=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield Q(C.appConfig,U)}else yield et(C.appConfig);throw R}}),vn.apply(this,arguments)}function aa(C){return void 0!==C&&2===C.registrationStatus}function Il(){return(Il=(0,B.Z)(function*(C){const S=C,{installationEntry:R,registrationPromise:U}=yield q(S);return U?U.catch(console.error):El(S).catch(console.error),R.fid})).apply(this,arguments)}function as(){return as=(0,B.Z)(function*(C,S=!1){const R=C;return yield function oh(C){return Bs.apply(this,arguments)}(R),(yield El(R,S)).token}),as.apply(this,arguments)}function Bs(){return(Bs=(0,B.Z)(function*(C){const{registrationPromise:S}=yield q(C);S&&(yield S)})).apply(this,arguments)}function ka(C){return ut.create("missing-app-config-values",{valueName:C})}const Su="installations",Cy=C=>{const S=C.getProvider("app").getImmediate(),R=function ls(C){if(!C||!C.options)throw ka("App Configuration");if(!C.name)throw ka("App Name");const S=["projectId","apiKey","appId"];for(const R of S)if(!C.options[R])throw ka(R);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(S);return{app:S,appConfig:R,heartbeatServiceProvider:(0,ie._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},Pa=C=>{const S=C.getProvider("app").getImmediate(),R=(0,ie._getProvider)(S,Su).getImmediate();return{getId:()=>function Tl(C){return Il.apply(this,arguments)}(R),getToken:J=>function sh(C){return as.apply(this,arguments)}(R,J)}};(function Xf(){(0,ie._registerComponent)(new ve.wA(Su,Cy,"PUBLIC")),(0,ie._registerComponent)(new ve.wA("installations-internal",Pa,"PRIVATE"))})(),(0,ie.registerVersion)(Wn,ci),(0,ie.registerVersion)(Wn,ci,"esm2017");const Do="@firebase/remote-config",Vr=new he.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class zt{constructor(S,R,U,J){this.client=S,this.storage=R,this.storageCache=U,this.logger=J}isCachedDataFresh(S,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-R,J=U<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${J}.`),J}fetch(S){var R=this;return(0,B.Z)(function*(){const[U,J]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(J&&R.isCachedDataFresh(S.cacheMaxAgeMillis,U))return J;S.eTag=J&&J.eTag;const re=yield R.client.fetch(S),Te=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===re.status&&Te.push(R.storage.setLastSuccessfulFetchResponse(re)),yield Promise.all(Te),re})()}}function pi(C=navigator){return C.languages&&C.languages[0]||C.language}class Yr{constructor(S,R,U,J,re,Te){this.firebaseInstallations=S,this.sdkVersion=R,this.namespace=U,this.projectId=J,this.apiKey=re,this.appId=Te}fetch(S){var R=this;return(0,B.Z)(function*(){const[U,J]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),Te=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,ht={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},lt={sdk_version:R.sdkVersion,app_instance_id:U,app_instance_id_token:J,app_id:R.appId,language_code:pi()},Ot={method:"POST",headers:ht,body:JSON.stringify(lt)},en=fetch(Te,Ot),tn=new Promise((Kr,eo)=>{S.signal.addEventListener(()=>{const Qr=new Error("The operation was aborted.");Qr.name="AbortError",eo(Qr)})});let tr;try{yield Promise.race([en,tn]),tr=yield en}catch(Kr){let eo="fetch-client-network";throw"AbortError"===Kr?.name&&(eo="fetch-timeout"),Vr.create(eo,{originalErrorMessage:Kr?.message})}let zi=tr.status;const _a=tr.headers.get("ETag")||void 0;let Ii,Xs;if(200===tr.status){let Kr;try{Kr=yield tr.json()}catch(eo){throw Vr.create("fetch-client-parse",{originalErrorMessage:eo?.message})}Ii=Kr.entries,Xs=Kr.state}if("INSTANCE_STATE_UNSPECIFIED"===Xs?zi=500:"NO_CHANGE"===Xs?zi=304:("NO_TEMPLATE"===Xs||"EMPTY_CONFIG"===Xs)&&(Ii={}),304!==zi&&200!==zi)throw Vr.create("fetch-status",{httpStatus:zi});return{status:zi,eTag:_a,config:Ii}})()}}class yc{constructor(S,R){this.client=S,this.storage=R}fetch(S){var R=this;return(0,B.Z)(function*(){const U=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(S,U)})()}attemptFetch(S,{throttleEndTimeMillis:R,backoffCount:U}){var J=this;return(0,B.Z)(function*(){yield function La(C,S){return new Promise((R,U)=>{const J=Math.max(S-Date.now(),0),re=setTimeout(R,J);C.addEventListener(()=>{clearTimeout(re),U(Vr.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,R);try{const re=yield J.client.fetch(S);return yield J.storage.deleteThrottleMetadata(),re}catch(re){if(!function Ji(C){if(!(C instanceof he.ZR&&C.customData))return!1;const S=Number(C.customData.httpStatus);return 429===S||500===S||503===S||504===S}(re))throw re;const Te={throttleEndTimeMillis:Date.now()+(0,he.$s)(U),backoffCount:U+1};return yield J.storage.setThrottleMetadata(Te),J.attemptFetch(S,Te)}})()}}class Al{constructor(S,R,U,J,re){this.app=S,this._client=R,this._storageCache=U,this._storage=J,this._logger=re,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Wt(C,S){const R=C.target.error||void 0;return Vr.create(S,{originalErrorMessage:R&&R?.message})}const Dr="app_namespace_store";class uh{constructor(S,R,U,J=function gi(){return new Promise((C,S)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=U=>{S(Wt(U,"storage-open"))},R.onsuccess=U=>{C(U.target.result)},R.onupgradeneeded=U=>{0===U.oldVersion&&U.target.result.createObjectStore(Dr,{keyPath:"compositeKey"})}}catch(R){S(Vr.create("storage-open",{originalErrorMessage:R?.message}))}})}()){this.appId=S,this.appName=R,this.namespace=U,this.openDbPromise=J}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var R=this;return(0,B.Z)(function*(){const U=yield R.openDbPromise;return new Promise((J,re)=>{const ht=U.transaction([Dr],"readonly").objectStore(Dr),lt=R.createCompositeKey(S);try{const Ot=ht.get(lt);Ot.onerror=en=>{re(Wt(en,"storage-get"))},Ot.onsuccess=en=>{const tn=en.target.result;J(tn?tn.value:void 0)}}catch(Ot){re(Vr.create("storage-get",{originalErrorMessage:Ot?.message}))}})})()}set(S,R){var U=this;return(0,B.Z)(function*(){const J=yield U.openDbPromise;return new Promise((re,Te)=>{const lt=J.transaction([Dr],"readwrite").objectStore(Dr),Ot=U.createCompositeKey(S);try{const en=lt.put({compositeKey:Ot,value:R});en.onerror=tn=>{Te(Wt(tn,"storage-set"))},en.onsuccess=()=>{re()}}catch(en){Te(Vr.create("storage-set",{originalErrorMessage:en?.message}))}})})()}delete(S){var R=this;return(0,B.Z)(function*(){const U=yield R.openDbPromise;return new Promise((J,re)=>{const ht=U.transaction([Dr],"readwrite").objectStore(Dr),lt=R.createCompositeKey(S);try{const Ot=ht.delete(lt);Ot.onerror=en=>{re(Wt(en,"storage-delete"))},Ot.onsuccess=()=>{J()}}catch(Ot){re(Vr.create("storage-delete",{originalErrorMessage:Ot?.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class Ba{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,B.Z)(function*(){const R=S.storage.getLastFetchStatus(),U=S.storage.getLastSuccessfulFetchTimestampMillis(),J=S.storage.getActiveConfig(),re=yield R;re&&(S.lastFetchStatus=re);const Te=yield U;Te&&(S.lastSuccessfulFetchTimestampMillis=Te);const ht=yield J;ht&&(S.activeConfig=ht)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function ca(){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,B.Z)(function*(){if(!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch{return!1}})).apply(this,arguments)}!function cr(){(0,ie._registerComponent)(new ve.wA("remote-config",function C(S,{instanceIdentifier:R}){const U=S.getProvider("app").getImmediate(),J=S.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Vr.create("registration-window");if(!(0,he.hl)())throw Vr.create("indexed-db-unavailable");const{projectId:re,apiKey:Te,appId:ht}=U.options;if(!re)throw Vr.create("registration-project-id");if(!Te)throw Vr.create("registration-api-key");if(!ht)throw Vr.create("registration-app-id");const lt=new uh(ht,U.name,R=R||"firebase"),Ot=new Ba(lt),en=new Ae.Yd(Do);en.logLevel=Ae.in.ERROR;const tn=new Yr(J,ie.SDK_VERSION,R,re,Te,ht),tr=new yc(tn,lt),zi=new zt(tr,lt,Ot,en),_a=new Al(U,zi,Ot,lt,en);return function Wr(C){const S=(0,he.m9)(C);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(_a),_a},"PUBLIC").setMultipleInstances(!0)),(0,ie.registerVersion)(Do,"0.4.4"),(0,ie.registerVersion)(Do,"0.4.4","esm2017")}();const wc=(C,S)=>S.some(R=>C instanceof R);let ua,ln;const Ru=new WeakMap,ur=new WeakMap,Va=new WeakMap,dr=new WeakMap,da=new WeakMap;let hr={get(C,S,R){if(C instanceof IDBTransaction){if("done"===S)return ur.get(C);if("objectStoreNames"===S)return C.objectStoreNames||Va.get(C);if("store"===S)return R.objectStoreNames[1]?void 0:R.objectStore(R.objectStoreNames[0])}return Ts(C[S])},set:(C,S,R)=>(C[S]=R,!0),has:(C,S)=>C instanceof IDBTransaction&&("done"===S||"store"===S)||S in C};function Ua(C){return"function"==typeof C?function Ou(C){return C!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ml(){return ln||(ln=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(C)?function(...S){return C.apply(cs(this),S),Ts(Ru.get(this))}:function(...S){return Ts(C.apply(cs(this),S))}:function(S,...R){const U=C.call(cs(this),S,...R);return Va.set(U,S.sort?S.sort():[S]),Ts(U)}}(C):(C instanceof IDBTransaction&&function Am(C){if(ur.has(C))return;const S=new Promise((R,U)=>{const J=()=>{C.removeEventListener("complete",re),C.removeEventListener("error",Te),C.removeEventListener("abort",Te)},re=()=>{R(),J()},Te=()=>{U(C.error||new DOMException("AbortError","AbortError")),J()};C.addEventListener("complete",re),C.addEventListener("error",Te),C.addEventListener("abort",Te)});ur.set(C,S)}(C),wc(C,function Ty(){return ua||(ua=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(C,hr):C)}function Ts(C){if(C instanceof IDBRequest)return function Er(C){const S=new Promise((R,U)=>{const J=()=>{C.removeEventListener("success",re),C.removeEventListener("error",Te)},re=()=>{R(Ts(C.result)),J()},Te=()=>{U(C.error),J()};C.addEventListener("success",re),C.addEventListener("error",Te)});return S.then(R=>{R instanceof IDBCursor&&Ru.set(R,C)}).catch(()=>{}),da.set(S,C),S}(C);if(dr.has(C))return dr.get(C);const S=Ua(C);return S!==C&&(dr.set(C,S),da.set(S,C)),S}const cs=C=>da.get(C);function Nl(C,S,{blocked:R,upgrade:U,blocking:J,terminated:re}={}){const Te=indexedDB.open(C,S),ht=Ts(Te);return U&&Te.addEventListener("upgradeneeded",lt=>{U(Ts(Te.result),lt.oldVersion,lt.newVersion,Ts(Te.transaction))}),R&&Te.addEventListener("blocked",()=>R()),ht.then(lt=>{re&&lt.addEventListener("close",()=>re()),J&&lt.addEventListener("versionchange",()=>J())}).catch(()=>{}),ht}function xl(C,{blocked:S}={}){const R=indexedDB.deleteDatabase(C);return S&&R.addEventListener("blocked",()=>S()),Ts(R).then(()=>{})}const dh=["get","getKey","getAll","getAllKeys","count"],Iy=["put","add","delete","clear"],ku=new Map;function hh(C,S){if(!(C instanceof IDBDatabase)||S in C||"string"!=typeof S)return;if(ku.get(S))return ku.get(S);const R=S.replace(/FromIndex$/,""),U=S!==R,J=Iy.includes(R);if(!(R in(U?IDBIndex:IDBObjectStore).prototype)||!J&&!dh.includes(R))return;const re=function(){var Te=(0,B.Z)(function*(ht,...lt){const Ot=this.transaction(ht,J?"readwrite":"readonly");let en=Ot.store;return U&&(en=en.index(lt.shift())),(yield Promise.all([en[R](...lt),J&&Ot.done]))[0]});return function(lt){return Te.apply(this,arguments)}}();return ku.set(S,re),re}!function Ur(C){hr=C(hr)}(C=>({...C,get:(S,R,U)=>hh(S,R)||C.get(S,R,U),has:(S,R)=>!!hh(S,R)||C.has(S,R)}));const ip="/firebase-messaging-sw.js",fh="/firebase-cloud-messaging-push-scope",rp="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Sy="https://fcmregistrations.googleapis.com/v1",mi="google.c.a.c_id",Ay="google.c.a.c_l",Mm="google.c.a.ts";var sp=function(C){return C.PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",C}(sp||{});function Go(C){const S=new Uint8Array(C);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ph(C){const R=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(R),J=new Uint8Array(U.length);for(let re=0;re<U.length;++re)J[re]=U.charCodeAt(re);return J}const Rl="fcm_token_details_db",gh=5,bc="fcm_token_object_Store";function Dc(){return Dc=(0,B.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(re=>re.name).includes(Rl))return null;let S=null;return(yield Nl(Rl,gh,{upgrade:(U=(0,B.Z)(function*(J,re,Te,ht){var lt;if(re<2||!J.objectStoreNames.contains(bc))return;const Ot=ht.objectStore(bc),en=yield Ot.index("fcmSenderId").get(C);if(yield Ot.clear(),en)if(2===re){const tn=en;if(!tn.auth||!tn.p256dh||!tn.endpoint)return;S={token:tn.fcmToken,createTime:null!==(lt=tn.createTime)&&void 0!==lt?lt:Date.now(),subscriptionOptions:{auth:tn.auth,p256dh:tn.p256dh,endpoint:tn.endpoint,swScope:tn.swScope,vapidKey:"string"==typeof tn.vapidKey?tn.vapidKey:Go(tn.vapidKey)}}}else if(3===re){const tn=en;S={token:tn.fcmToken,createTime:tn.createTime,subscriptionOptions:{auth:Go(tn.auth),p256dh:Go(tn.p256dh),endpoint:tn.endpoint,swScope:tn.swScope,vapidKey:Go(tn.vapidKey)}}}else if(4===re){const tn=en;S={token:tn.fcmToken,createTime:tn.createTime,subscriptionOptions:{auth:Go(tn.auth),p256dh:Go(tn.p256dh),endpoint:tn.endpoint,swScope:tn.swScope,vapidKey:Go(tn.vapidKey)}}}}),function(re,Te,ht,lt){return U.apply(this,arguments)})})).close(),yield xl(Rl),yield xl("fcm_vapid_details_db"),yield xl("undefined"),function Ha(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:S}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}(S)?S:null;var U}),Dc.apply(this,arguments)}const Eo="firebase-messaging-database",op=1,js="firebase-messaging-store";let Xi=null;function ja(){return Xi||(Xi=Nl(Eo,op,{upgrade:(C,S)=>{0===S&&C.createObjectStore(js)}})),Xi}function us(C){return Ga.apply(this,arguments)}function Ga(){return Ga=(0,B.Z)(function*(C){const S=Cc(C),U=yield(yield ja()).transaction(js).objectStore(js).get(S);if(U)return U;{const J=yield function gD(C){return Dc.apply(this,arguments)}(C.appConfig.senderId);if(J)return yield mh(C,J),J}}),Ga.apply(this,arguments)}function mh(C,S){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,B.Z)(function*(C,S){const R=Cc(C),J=(yield ja()).transaction(js,"readwrite");return yield J.objectStore(js).put(S,R),yield J.done,S})).apply(this,arguments)}function Ol(){return(Ol=(0,B.Z)(function*(C){const S=Cc(C),U=(yield ja()).transaction(js,"readwrite");yield U.objectStore(js).delete(S),yield U.done})).apply(this,arguments)}function Cc({appConfig:C}){return C.appId}const fr=new he.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function _h(C,S){return vh.apply(this,arguments)}function vh(){return(vh=(0,B.Z)(function*(C,S){const R=yield cp(C),U=My(S),J={method:"POST",headers:R,body:JSON.stringify(U)};let re;try{re=yield(yield fetch(Ic(C.appConfig),J)).json()}catch(Te){throw fr.create("token-subscribe-failed",{errorInfo:Te?.toString()})}if(re.error)throw fr.create("token-subscribe-failed",{errorInfo:re.error.message});if(!re.token)throw fr.create("token-subscribe-no-token");return re.token})).apply(this,arguments)}function Tc(){return(Tc=(0,B.Z)(function*(C,S){const R=yield cp(C),U=My(S.subscriptionOptions),J={method:"PATCH",headers:R,body:JSON.stringify(U)};let re;try{re=yield(yield fetch(`${Ic(C.appConfig)}/${S.token}`,J)).json()}catch(Te){throw fr.create("token-update-failed",{errorInfo:Te?.toString()})}if(re.error)throw fr.create("token-update-failed",{errorInfo:re.error.message});if(!re.token)throw fr.create("token-update-no-token");return re.token})).apply(this,arguments)}function $a(C,S){return ha.apply(this,arguments)}function ha(){return(ha=(0,B.Z)(function*(C,S){const U={method:"DELETE",headers:yield cp(C)};try{const re=yield(yield fetch(`${Ic(C.appConfig)}/${S}`,U)).json();if(re.error)throw fr.create("token-unsubscribe-failed",{errorInfo:re.error.message})}catch(J){throw fr.create("token-unsubscribe-failed",{errorInfo:J?.toString()})}})).apply(this,arguments)}function Ic({projectId:C}){return`${Sy}/projects/${C}/registrations`}function cp(C){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,B.Z)(function*({appConfig:C,installations:S}){const R=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function My({p256dh:C,auth:S,endpoint:R,vapidKey:U}){const J={web:{endpoint:R,auth:S,p256dh:C}};return U!==rp&&(J.web.applicationPubKey=U),J}const up=6048e5;function wh(){return wh=(0,B.Z)(function*(C){const S=yield function Sc(C,S){return bh.apply(this,arguments)}(C.swRegistration,C.vapidKey),R={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:S.endpoint,auth:Go(S.getKey("auth")),p256dh:Go(S.getKey("p256dh"))},U=yield us(C.firebaseDependencies);if(U){if(function hp(C,S){return S.vapidKey===C.vapidKey&&S.endpoint===C.endpoint&&S.auth===C.auth&&S.p256dh===C.p256dh}(U.subscriptionOptions,R))return Date.now()>=U.createTime+up?function xm(C,S){return kl.apply(this,arguments)}(C,{token:U.token,createTime:Date.now(),subscriptionOptions:R}):U.token;try{yield $a(C.firebaseDependencies,U.token)}catch(J){console.warn(J)}return xy(C.firebaseDependencies,R)}return xy(C.firebaseDependencies,R)}),wh.apply(this,arguments)}function Fu(){return Fu=(0,B.Z)(function*(C){const S=yield us(C.firebaseDependencies);S&&(yield $a(C.firebaseDependencies,S.token),yield function ap(C){return Ol.apply(this,arguments)}(C.firebaseDependencies));const R=yield C.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()}),Fu.apply(this,arguments)}function kl(){return kl=(0,B.Z)(function*(C,S){try{const R=yield function yh(C,S){return Tc.apply(this,arguments)}(C.firebaseDependencies,S),U=Object.assign(Object.assign({},S),{token:R,createTime:Date.now()});return yield mh(C.firebaseDependencies,U),R}catch(R){throw yield function dp(C){return Fu.apply(this,arguments)}(C),R}}),kl.apply(this,arguments)}function xy(C,S){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,B.Z)(function*(C,S){const U={token:yield _h(C,S),createTime:Date.now(),subscriptionOptions:S};return yield mh(C,U),U.token})).apply(this,arguments)}function bh(){return(bh=(0,B.Z)(function*(C,S){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ph(S)})})).apply(this,arguments)}function Lu(C){const S={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function Ac(C,S){if(!S.notification)return;C.notification={};const R=S.notification.title;R&&(C.notification.title=R);const U=S.notification.body;U&&(C.notification.body=U);const J=S.notification.image;J&&(C.notification.image=J);const re=S.notification.icon;re&&(C.notification.icon=re)}(S,C),function Rm(C,S){S.data&&(C.data=S.data)}(S,C),function Dh(C,S){var R,U,J,re,Te;if(!(S.fcmOptions||null!==(R=S.notification)&&void 0!==R&&R.click_action))return;C.fcmOptions={};const ht=null!==(J=null===(U=S.fcmOptions)||void 0===U?void 0:U.link)&&void 0!==J?J:null===(re=S.notification)||void 0===re?void 0:re.click_action;ht&&(C.fcmOptions.link=ht);const lt=null===(Te=S.fcmOptions)||void 0===Te?void 0:Te.analytics_label;lt&&(C.fcmOptions.analyticsLabel=lt)}(S,C),S}function Eh(C,S){const R=[];for(let U=0;U<C.length;U++)R.push(C.charAt(U)),U<S.length&&R.push(S.charAt(U));return R.join("")}function Ch(C){return fr.create("missing-app-config-values",{valueName:C})}Eh("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Eh("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class km{constructor(S,R,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const J=function Om(C){if(!C||!C.options)throw Ch("App Configuration Object");if(!C.name)throw Ch("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:R}=C;for(const U of S)if(!R[U])throw Ch(U);return{appName:C.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:J,installations:R,analyticsProvider:U}}_delete(){return Promise.resolve()}}function Mc(){return(Mc=(0,B.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(ip,{scope:fh}),C.swRegistration.update().catch(()=>{})}catch(S){throw fr.create("failed-service-worker-registration",{browserErrorMessage:S?.message})}})).apply(this,arguments)}function za(){return(za=(0,B.Z)(function*(C,S){if(!S&&!C.swRegistration&&(yield function Bu(C){return Mc.apply(this,arguments)}(C)),S||!C.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw fr.create("invalid-sw-registration");C.swRegistration=S}})).apply(this,arguments)}function Wa(){return(Wa=(0,B.Z)(function*(C,S){S?C.vapidKey=S:C.vapidKey||(C.vapidKey=rp)})).apply(this,arguments)}function Nc(){return Nc=(0,B.Z)(function*(C,S){if(!navigator)throw fr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw fr.create("permission-blocked");return yield function Co(C,S){return Wa.apply(this,arguments)}(C,S?.vapidKey),yield function Pm(C,S){return za.apply(this,arguments)}(C,S?.serviceWorkerRegistration),function Ny(C){return wh.apply(this,arguments)}(C)}),Nc.apply(this,arguments)}function Qs(){return(Qs=(0,B.Z)(function*(C,S,R){const U=function pp(C){switch(C){case sp.NOTIFICATION_CLICKED:return"notification_open";case sp.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(S);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:R[mi],message_name:R[Ay],message_time:R[Mm],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Un(){return Un=(0,B.Z)(function*(C,S){const R=S.data;if(!R.isFirebaseMessaging)return;C.onMessageHandler&&R.messageType===sp.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(Lu(R)):C.onMessageHandler.next(Lu(R)));const U=R.data;(function Ry(C){return"object"==typeof C&&!!C&&mi in C})(U)&&"1"===U["google.c.a.e"]&&(yield function Fm(C,S,R){return Qs.apply(this,arguments)}(C,R.messageType,U))}),Un.apply(this,arguments)}const fa="@firebase/messaging",Cr=C=>{const S=new km(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function gp(C,S){return Un.apply(this,arguments)}(S,R)),S},Lm=C=>{const S=C.getProvider("messaging").getImmediate();return{getToken:U=>function fp(C,S){return Nc.apply(this,arguments)}(S,U)}};function Ya(){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,B.Z)(function*(){try{yield(0,he.eu)()}catch{return!1}return typeof window<"u"&&(0,he.hl)()&&(0,he.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Th(){(0,ie._registerComponent)(new ve.wA("messaging",Cr,"PUBLIC")),(0,ie._registerComponent)(new ve.wA("messaging-internal",Lm,"PRIVATE")),(0,ie.registerVersion)(fa,"0.12.4"),(0,ie.registerVersion)(fa,"0.12.4","esm2017")}();const ri="analytics",ky="firebase_id",qt="origin",mp=6e4,_p="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Uu="https://www.googletagmanager.com/gtag/js",pr=new Ae.Yd("@firebase/analytics"),Ir=new he.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function To(C){if(!C.startsWith(Uu)){const S=Ir.create("invalid-gtag-resource",{gtagURL:C});return pr.warn(S.message),""}return C}function Hu(C){return Promise.all(C.map(S=>S.catch(R=>R)))}function Ue(){return(Ue=(0,B.Z)(function*(C,S,R,U,J,re){const Te=U[J];try{if(Te)yield S[Te];else{const lt=(yield Hu(R)).find(Ot=>Ot.measurementId===J);lt&&(yield S[lt.appId])}}catch(ht){pr.error(ht)}C("config",J,re)})).apply(this,arguments)}function Js(){return(Js=(0,B.Z)(function*(C,S,R,U,J){try{let re=[];if(J&&J.send_to){let Te=J.send_to;Array.isArray(Te)||(Te=[Te]);const ht=yield Hu(R);for(const lt of Te){const Ot=ht.find(tn=>tn.measurementId===lt),en=Ot&&S[Ot.appId];if(!en){re=[];break}re.push(en)}}0===re.length&&(re=Object.values(S)),yield Promise.all(re),C("event",U,J||{})}catch(re){pr.error(re)}})).apply(this,arguments)}const Ll=30,Ah=new class Za{constructor(S={},R=1e3){this.throttleMetadata=S,this.intervalMillis=R}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,R){this.throttleMetadata[S]=R}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function Hm(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function Mh(){return(Mh=(0,B.Z)(function*(C){var S;const{appId:R,apiKey:U}=C,J={method:"GET",headers:Hm(U)},re=_p.replace("{app-id}",R),Te=yield fetch(re,J);if(200!==Te.status&&304!==Te.status){let ht="";try{const lt=yield Te.json();null!==(S=lt.error)&&void 0!==S&&S.message&&(ht=lt.error.message)}catch{}throw Ir.create("config-fetch-failed",{httpStatus:Te.status,responseMessage:ht})}return Te.json()})).apply(this,arguments)}function Is(){return(Is=(0,B.Z)(function*(C,S=Ah,R){const{appId:U,apiKey:J,measurementId:re}=C.options;if(!U)throw Ir.create("no-app-id");if(!J){if(re)return{measurementId:re,appId:U};throw Ir.create("no-api-key")}const Te=S.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ht=new xh;return setTimeout((0,B.Z)(function*(){ht.abort()}),void 0!==R?R:mp),yp({appId:U,apiKey:J,measurementId:re},Te,ht,S)})).apply(this,arguments)}function yp(C,S,R){return Ka.apply(this,arguments)}function Ka(){return Ka=(0,B.Z)(function*(C,{throttleEndTimeMillis:S,backoffCount:R},U,J=Ah){var re;const{appId:Te,measurementId:ht}=C;try{yield function Io(C,S){return new Promise((R,U)=>{const J=Math.max(S-Date.now(),0),re=setTimeout(R,J);C.addEventListener(()=>{clearTimeout(re),U(Ir.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(U,S)}catch(lt){if(ht)return pr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ht} provided in the "measurementId" field in the local Firebase config. [${lt?.message}]`),{appId:Te,measurementId:ht};throw lt}try{const lt=yield function mD(C){return Mh.apply(this,arguments)}(C);return J.deleteThrottleMetadata(Te),lt}catch(lt){const Ot=lt;if(!function Nh(C){if(!(C instanceof he.ZR&&C.customData))return!1;const S=Number(C.customData.httpStatus);return 429===S||500===S||503===S||504===S}(Ot)){if(J.deleteThrottleMetadata(Te),ht)return pr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ht} provided in the "measurementId" field in the local Firebase config. [${Ot?.message}]`),{appId:Te,measurementId:ht};throw lt}const en=503===Number(null===(re=Ot?.customData)||void 0===re?void 0:re.httpStatus)?(0,he.$s)(R,J.intervalMillis,Ll):(0,he.$s)(R,J.intervalMillis),tn={throttleEndTimeMillis:Date.now()+en,backoffCount:R+1};return J.setThrottleMetadata(Te,tn),pr.debug(`Calling attemptFetch again in ${en} millis`),yp(C,tn,U,J)}}),Ka.apply(this,arguments)}class xh{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}let Wu,Sr;function qu(){return(qu=(0,B.Z)(function*(C,S,R,U,J){if(J&&J.global)C("event",R,U);else{const re=yield S;C("event",R,Object.assign(Object.assign({},U),{send_to:re}))}})).apply(this,arguments)}function $o(){return($o=(0,B.Z)(function*(){if(!(0,he.hl)())return pr.warn(Ir.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,he.eu)()}catch(C){return pr.warn(Ir.create("indexeddb-unavailable",{errorInfo:C?.toString()}).message),!1}return!0})).apply(this,arguments)}function Ar(){return Ar=(0,B.Z)(function*(C,S,R,U,J,re,Te){var ht;const lt=function hs(C){return Is.apply(this,arguments)}(C);lt.then(zi=>{R[zi.measurementId]=zi.appId,C.options.measurementId&&zi.measurementId!==C.options.measurementId&&pr.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${zi.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(zi=>pr.error(zi)),S.push(lt);const Ot=function at(){return $o.apply(this,arguments)}().then(zi=>{if(zi)return U.getId()}),[en,tn]=yield Promise.all([lt,Ot]);(function zu(C){const S=window.document.getElementsByTagName("script");for(const R of Object.values(S))if(R.src&&R.src.includes(Uu)&&R.src.includes(C))return R;return null})(re)||function Gu(C,S){const R=function ju(C,S){let R;return window.trustedTypes&&(R=window.trustedTypes.createPolicy(C,S)),R}("firebase-js-sdk-policy",{createScriptURL:To}),U=document.createElement("script"),J=`${Uu}?l=${C}&id=${S}`;U.src=R?R?.createScriptURL(J):J,U.async=!0,document.head.appendChild(U)}(re,en.measurementId),Sr&&(J("consent","default",Sr),function Qa(C){Sr=C}(void 0)),J("js",new Date);const tr=null!==(ht=Te?.config)&&void 0!==ht?ht:{};return tr[qt]="firebase",tr.update=!0,null!=tn&&(tr[ky]=tn),J("config",en.measurementId,tr),Wu&&(J("set",Wu),function Jn(C){Wu=C}(void 0)),en.measurementId}),Ar.apply(this,arguments)}class ga{constructor(S){this.app=S}_delete(){return delete Gs[this.app.options.appId],Promise.resolve()}}let Gs={},xc=[];const $i={};let er,jn,_i="dataLayer",zo=!1;function Wo(C,S,R){!function Zu(){const C=[];if((0,he.ru)()&&C.push("This is a browser extension environment."),(0,he.zI)()||C.push("Cookies are not available."),C.length>0){const S=C.map((U,J)=>`(${J+1}) ${U}`).join(" "),R=Ir.create("invalid-analytics-context",{errorInfo:S});pr.warn(R.message)}}();const U=C.options.appId;if(!U)throw Ir.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw Ir.create("no-api-key");pr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Gs[U])throw Ir.create("already-exists",{id:U});if(!zo){!function Py(C){let S=[];Array.isArray(window[C])?S=window[C]:window[C]=S}(_i);const{wrappedGtag:re,gtagCore:Te}=function gr(C,S,R,U,J){let re=function(...Te){window[U].push(arguments)};return window[J]&&"function"==typeof window[J]&&(re=window[J]),window[J]=function $u(C,S,R,U){function re(){return re=(0,B.Z)(function*(Te,...ht){try{if("event"===Te){const[lt,Ot]=ht;yield function gn(C,S,R,U,J){return Js.apply(this,arguments)}(C,S,R,lt,Ot)}else if("config"===Te){const[lt,Ot]=ht;yield function Sh(C,S,R,U,J,re){return Ue.apply(this,arguments)}(C,S,R,U,lt,Ot)}else if("consent"===Te){const[lt]=ht;C("consent","update",lt)}else if("get"===Te){const[lt,Ot,en]=ht;C("get",lt,Ot,en)}else if("set"===Te){const[lt]=ht;C("set",lt)}else C(Te,...ht)}catch(lt){pr.error(lt)}}),re.apply(this,arguments)}return function J(Te){return re.apply(this,arguments)}}(re,C,S,R),{gtagCore:re,wrappedGtag:window[J]}}(Gs,xc,$i,_i,"gtag");jn=re,er=Te,zo=!0}return Gs[U]=function Xn(C,S,R,U,J,re,Te){return Ar.apply(this,arguments)}(C,xc,$i,S,er,_i,R),new ga(C)}function Rc(){return So.apply(this,arguments)}function So(){return(So=(0,B.Z)(function*(){if((0,he.ru)()||!(0,he.zI)()||!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch{return!1}})).apply(this,arguments)}const kc="@firebase/analytics";!function By(){(0,ie._registerComponent)(new ve.wA(ri,(S,{options:R})=>Wo(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,ie._registerComponent)(new ve.wA("analytics-internal",function C(S){try{const R=S.getProvider(ri).getImmediate();return{logEvent:(U,J,re)=>function $m(C,S,R,U){C=(0,he.m9)(C),function Fy(C,S,R,U,J){return qu.apply(this,arguments)}(jn,Gs[C.app.options.appId],S,R,U).catch(J=>pr.error(J))}(R,U,J,re)}}catch(R){throw Ir.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,ie.registerVersion)(kc,"0.10.0"),(0,ie.registerVersion)(kc,"0.10.0","esm2017")}();var Ul=F(1954),Rh=F(2631);const Wm=new class zm extends Rh.v{}(class Tp extends Ul.o{constructor(S,R){super(S,R),this.scheduler=S,this.work=R}schedule(S,R=0){return R>0?super.schedule(S,R):(this.delay=R,this.state=S,this.scheduler.flush(this),this)}execute(S,R){return R>0||this.closed?super.execute(S,R):this._execute(S,R)}requestAsyncId(S,R,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(S,R,U):(S.flush(this),0)}});var Ip=F(6321),Ee=F(9397),oi=F(3093),mr=F(5137);const L=new l.GfV("7.6.1"),Hr="__angularfire_symbol__analyticsIsSupportedValue",Ao="__angularfire_symbol__analyticsIsSupported",Hl="__angularfire_symbol__remoteConfigIsSupportedValue",Qu="__angularfire_symbol__remoteConfigIsSupported",ei="__angularfire_symbol__messagingIsSupportedValue",Pc="__angularfire_symbol__messagingIsSupported";function Xa(C,S,R){if(S){if(1===S.length)return S[0];const re=S.filter(Te=>Te.app===R);if(1===re.length)return re[0]}return R.container.getProvider(C).getImmediate({optional:!0})}globalThis[Ao]||(globalThis[Ao]=Rc().then(C=>globalThis[Hr]=C).catch(()=>globalThis[Hr]=!1)),globalThis[Pc]||(globalThis[Pc]=Ya().then(C=>globalThis[ei]=C).catch(()=>globalThis[ei]=!1)),globalThis[Qu]||(globalThis[Qu]=ca().then(C=>globalThis[Hl]=C).catch(()=>globalThis[Hl]=!1));const Ap=(C,S)=>{const R=S?[S]:(0,ne.C6)(),U=[];return R.forEach(J=>{J.container.getProvider(C).instances.forEach(Te=>{U.includes(Te)||U.push(Te)})}),U};function qo(){}class kh{constructor(S,R=Wm){this.zone=S,this.delegate=R}now(){return this.delegate.now()}schedule(S,R,U){const J=this.zone;return this.delegate.schedule(function(Te){J.runGuarded(()=>{S.apply(this,[Te])})},R,U)}}class Fc{constructor(S){this.zone=S,this.task=null}call(S,R){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",qo,{},qo,qo)),R.pipe((0,Ee.b)({next:U,complete:U,error:U})).subscribe(S).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Mp=(()=>{class C{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new kh(Zone.current)),this.insideAngular=R.run(()=>new kh(Zone.current,Ip.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(R){return new(R||C)(l.LFG(l.R0b))},C.\u0275prov=l.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function mn(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function Lc(C){return C.pipe((0,oi.Q)(mn().outsideAngular))}function jl(C){return mn(),function Bc(C){return function(R){return(R=R.lift(new Fc(C.ngZone))).pipe((0,mr.R)(C.outsideAngular),(0,oi.Q)(C.insideAngular))}}(mn())(C)}},9058:(Ct,Ne,F)=>{F.d(Ne,{$s:()=>et,BH:()=>fe,DV:()=>ar,Dv:()=>vo,G6:()=>or,GJ:()=>Ei,L:()=>we,LL:()=>Be,Pz:()=>xe,Sg:()=>Pe,UG:()=>X,UI:()=>ss,US:()=>ve,Wj:()=>Tn,Wl:()=>Pt,Yr:()=>ui,ZB:()=>ae,ZR:()=>Fe,aH:()=>pe,b$:()=>Nn,cI:()=>di,dS:()=>yo,eu:()=>De,g5:()=>B,gK:()=>En,gQ:()=>Xt,h$:()=>He,hl:()=>me,hu:()=>ne,jU:()=>Je,lb:()=>os,m9:()=>xn,ne:()=>Jt,p$:()=>Z,pd:()=>Yt,r3:()=>Bn,ru:()=>kt,tV:()=>$,uI:()=>ge,ug:()=>Bo,vZ:()=>Ai,w1:()=>Wn,w9:()=>Qn,xO:()=>Ra,xb:()=>$r,z$:()=>We,zI:()=>Ce,zd:()=>Gt});const l={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},ne=function(q,W){if(!q)throw B(W)},B=function(q){return new Error("Firebase Database ("+l.SDK_VERSION+") INTERNAL ASSERT FAILED: "+q)},ie=function(q){const W=[];let ee=0;for(let Le=0;Le<q.length;Le++){let ye=q.charCodeAt(Le);ye<128?W[ee++]=ye:ye<2048?(W[ee++]=ye>>6|192,W[ee++]=63&ye|128):55296==(64512&ye)&&Le+1<q.length&&56320==(64512&q.charCodeAt(Le+1))?(ye=65536+((1023&ye)<<10)+(1023&q.charCodeAt(++Le)),W[ee++]=ye>>18|240,W[ee++]=ye>>12&63|128,W[ee++]=ye>>6&63|128,W[ee++]=63&ye|128):(W[ee++]=ye>>12|224,W[ee++]=ye>>6&63|128,W[ee++]=63&ye|128)}return W},ve={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(q,W){if(!Array.isArray(q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ee=W?this.byteToCharMapWebSafe_:this.byteToCharMap_,Le=[];for(let ye=0;ye<q.length;ye+=3){const wt=q[ye],nn=ye+1<q.length,Kt=nn?q[ye+1]:0,Br=ye+2<q.length,sn=Br?q[ye+2]:0;let br=(15&Kt)<<2|sn>>6,sa=63&sn;Br||(sa=64,nn||(br=64)),Le.push(ee[wt>>2],ee[(3&wt)<<4|Kt>>4],ee[br],ee[sa])}return Le.join("")},encodeString(q,W){return this.HAS_NATIVE_SUPPORT&&!W?btoa(q):this.encodeByteArray(ie(q),W)},decodeString(q,W){return this.HAS_NATIVE_SUPPORT&&!W?atob(q):function(q){const W=[];let ee=0,Le=0;for(;ee<q.length;){const ye=q[ee++];if(ye<128)W[Le++]=String.fromCharCode(ye);else if(ye>191&&ye<224){const wt=q[ee++];W[Le++]=String.fromCharCode((31&ye)<<6|63&wt)}else if(ye>239&&ye<365){const Br=((7&ye)<<18|(63&q[ee++])<<12|(63&q[ee++])<<6|63&q[ee++])-65536;W[Le++]=String.fromCharCode(55296+(Br>>10)),W[Le++]=String.fromCharCode(56320+(1023&Br))}else{const wt=q[ee++],nn=q[ee++];W[Le++]=String.fromCharCode((15&ye)<<12|(63&wt)<<6|63&nn)}}return W.join("")}(this.decodeStringToByteArray(q,W))},decodeStringToByteArray(q,W){this.init_();const ee=W?this.charToByteMapWebSafe_:this.charToByteMap_,Le=[];for(let ye=0;ye<q.length;){const wt=ee[q.charAt(ye++)],Kt=ye<q.length?ee[q.charAt(ye)]:0;++ye;const sn=ye<q.length?ee[q.charAt(ye)]:64;++ye;const In=ye<q.length?ee[q.charAt(ye)]:64;if(++ye,null==wt||null==Kt||null==sn||null==In)throw new Ae;Le.push(wt<<2|Kt>>4),64!==sn&&(Le.push(Kt<<4&240|sn>>2),64!==In&&Le.push(sn<<6&192|In))}return Le},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let q=0;q<this.ENCODED_VALS.length;q++)this.byteToCharMap_[q]=this.ENCODED_VALS.charAt(q),this.charToByteMap_[this.byteToCharMap_[q]]=q,this.byteToCharMapWebSafe_[q]=this.ENCODED_VALS_WEBSAFE.charAt(q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[q]]=q,q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(q)]=q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(q)]=q)}}};class Ae extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const He=function(q){const W=ie(q);return ve.encodeByteArray(W,!0)},we=function(q){return He(q).replace(/\./g,"")},$=function(q){try{return ve.decodeString(q,!0)}catch(W){console.error("base64Decode failed: ",W)}return null};function Z(q){return ae(void 0,q)}function ae(q,W){if(!(W instanceof Object))return W;switch(W.constructor){case Date:return new Date(W.getTime());case Object:void 0===q&&(q={});break;case Array:q=[];break;default:return W}for(const ee in W)!W.hasOwnProperty(ee)||!Ze(ee)||(q[ee]=ae(q[ee],W[ee]));return q}function Ze(q){return"__proto__"!==q}const ze=()=>{try{return function Ve(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const q=process.env.__FIREBASE_DEFAULTS__;return q?JSON.parse(q):void 0})()||(()=>{if(typeof document>"u")return;let q;try{q=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const W=q&&$(q[1]);return W&&JSON.parse(W)})()}catch(q){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${q}`)}},pe=()=>{var q;return null===(q=ze())||void 0===q?void 0:q.config},xe=q=>{var W;return null===(W=ze())||void 0===W?void 0:W[`_${q}`]};class fe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((W,ee)=>{this.resolve=W,this.reject=ee})}wrapCallback(W){return(ee,Le)=>{ee?this.reject(ee):this.resolve(Le),"function"==typeof W&&(this.promise.catch(()=>{}),1===W.length?W(ee):W(ee,Le))}}}function Pe(q,W){if(q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Le=W||"demo-project",ye=q.iat||0,wt=q.sub||q.user_id;if(!wt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const nn=Object.assign({iss:`https://securetoken.google.com/${Le}`,aud:Le,iat:ye,exp:ye+3600,auth_time:ye,sub:wt,user_id:wt,firebase:{sign_in_provider:"custom",identities:{}}},q);return[we(JSON.stringify({alg:"none",type:"JWT"})),we(JSON.stringify(nn)),""].join(".")}function We(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ge(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function X(){var q;const W=null===(q=ze())||void 0===q?void 0:q.forceEnvironment;if("node"===W)return!0;if("browser"===W)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Je(){return"object"==typeof self&&self.self===self}function kt(){const q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof q&&void 0!==q.id}function Nn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Wn(){const q=We();return q.indexOf("MSIE ")>=0||q.indexOf("Trident/")>=0}function ui(){return!0===l.NODE_CLIENT||!0===l.NODE_ADMIN}function or(){return!X()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function me(){try{return"object"==typeof indexedDB}catch{return!1}}function De(){return new Promise((q,W)=>{try{let ee=!0;const Le="validate-browser-context-for-indexeddb-analytics-module",ye=self.indexedDB.open(Le);ye.onsuccess=()=>{ye.result.close(),ee||self.indexedDB.deleteDatabase(Le),q(!0)},ye.onupgradeneeded=()=>{ee=!1},ye.onerror=()=>{var wt;W((null===(wt=ye.error)||void 0===wt?void 0:wt.message)||"")}}catch(ee){W(ee)}})}function Ce(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Fe extends Error{constructor(W,ee,Le){super(ee),this.code=W,this.customData=Le,this.name="FirebaseError",Object.setPrototypeOf(this,Fe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Be.prototype.create)}}class Be{constructor(W,ee,Le){this.service=W,this.serviceName=ee,this.errors=Le}create(W,...ee){const Le=ee[0]||{},ye=`${this.service}/${W}`,wt=this.errors[W],nn=wt?function ut(q,W){return q.replace(it,(ee,Le)=>{const ye=W[Le];return null!=ye?String(ye):`<${Le}?>`})}(wt,Le):"Error";return new Fe(ye,`${this.serviceName}: ${nn} (${ye}).`,Le)}}const it=/\{\$([^}]+)}/g;function di(q){return JSON.parse(q)}function Pt(q){return JSON.stringify(q)}const Dn=function(q){let W={},ee={},Le={},ye="";try{const wt=q.split(".");W=di($(wt[0])||""),ee=di($(wt[1])||""),ye=wt[2],Le=ee.d||{},delete ee.d}catch{}return{header:W,claims:ee,data:Le,signature:ye}},Qn=function(q){const ee=Dn(q).claims;return!!ee&&"object"==typeof ee&&ee.hasOwnProperty("iat")},Ei=function(q){const W=Dn(q).claims;return"object"==typeof W&&!0===W.admin};function Bn(q,W){return Object.prototype.hasOwnProperty.call(q,W)}function ar(q,W){if(Object.prototype.hasOwnProperty.call(q,W))return q[W]}function $r(q){for(const W in q)if(Object.prototype.hasOwnProperty.call(q,W))return!1;return!0}function ss(q,W,ee){const Le={};for(const ye in q)Object.prototype.hasOwnProperty.call(q,ye)&&(Le[ye]=W.call(ee,q[ye],ye,q));return Le}function Ai(q,W){if(q===W)return!0;const ee=Object.keys(q),Le=Object.keys(W);for(const ye of ee){if(!Le.includes(ye))return!1;const wt=q[ye],nn=W[ye];if(zr(wt)&&zr(nn)){if(!Ai(wt,nn))return!1}else if(wt!==nn)return!1}for(const ye of Le)if(!ee.includes(ye))return!1;return!0}function zr(q){return null!==q&&"object"==typeof q}function Ra(q){const W=[];for(const[ee,Le]of Object.entries(q))Array.isArray(Le)?Le.forEach(ye=>{W.push(encodeURIComponent(ee)+"="+encodeURIComponent(ye))}):W.push(encodeURIComponent(ee)+"="+encodeURIComponent(Le));return W.length?"&"+W.join("&"):""}function Gt(q){const W={};return q.replace(/^\?/,"").split("&").forEach(Le=>{if(Le){const[ye,wt]=Le.split("=");W[decodeURIComponent(ye)]=decodeURIComponent(wt)}}),W}function Yt(q){const W=q.indexOf("?");if(!W)return"";const ee=q.indexOf("#",W);return q.substring(W,ee>0?ee:void 0)}class Xt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let W=1;W<this.blockSize;++W)this.pad_[W]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(W,ee){ee||(ee=0);const Le=this.W_;if("string"==typeof W)for(let In=0;In<16;In++)Le[In]=W.charCodeAt(ee)<<24|W.charCodeAt(ee+1)<<16|W.charCodeAt(ee+2)<<8|W.charCodeAt(ee+3),ee+=4;else for(let In=0;In<16;In++)Le[In]=W[ee]<<24|W[ee+1]<<16|W[ee+2]<<8|W[ee+3],ee+=4;for(let In=16;In<80;In++){const br=Le[In-3]^Le[In-8]^Le[In-14]^Le[In-16];Le[In]=4294967295&(br<<1|br>>>31)}let sn,ji,ye=this.chain_[0],wt=this.chain_[1],nn=this.chain_[2],Kt=this.chain_[3],Br=this.chain_[4];for(let In=0;In<80;In++){In<40?In<20?(sn=Kt^wt&(nn^Kt),ji=1518500249):(sn=wt^nn^Kt,ji=1859775393):In<60?(sn=wt&nn|Kt&(wt|nn),ji=2400959708):(sn=wt^nn^Kt,ji=3395469782);const br=(ye<<5|ye>>>27)+sn+Br+ji+Le[In]&4294967295;Br=Kt,Kt=nn,nn=4294967295&(wt<<30|wt>>>2),wt=ye,ye=br}this.chain_[0]=this.chain_[0]+ye&4294967295,this.chain_[1]=this.chain_[1]+wt&4294967295,this.chain_[2]=this.chain_[2]+nn&4294967295,this.chain_[3]=this.chain_[3]+Kt&4294967295,this.chain_[4]=this.chain_[4]+Br&4294967295}update(W,ee){if(null==W)return;void 0===ee&&(ee=W.length);const Le=ee-this.blockSize;let ye=0;const wt=this.buf_;let nn=this.inbuf_;for(;ye<ee;){if(0===nn)for(;ye<=Le;)this.compress_(W,ye),ye+=this.blockSize;if("string"==typeof W){for(;ye<ee;)if(wt[nn]=W.charCodeAt(ye),++nn,++ye,nn===this.blockSize){this.compress_(wt),nn=0;break}}else for(;ye<ee;)if(wt[nn]=W[ye],++nn,++ye,nn===this.blockSize){this.compress_(wt),nn=0;break}}this.inbuf_=nn,this.total_+=ee}digest(){const W=[];let ee=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ye=this.blockSize-1;ye>=56;ye--)this.buf_[ye]=255&ee,ee/=256;this.compress_(this.buf_);let Le=0;for(let ye=0;ye<5;ye++)for(let wt=24;wt>=0;wt-=8)W[Le]=this.chain_[ye]>>wt&255,++Le;return W}}function Jt(q,W){const ee=new hi(q,W);return ee.subscribe.bind(ee)}class hi{constructor(W,ee){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ee,this.task.then(()=>{W(this)}).catch(Le=>{this.error(Le)})}next(W){this.forEachObserver(ee=>{ee.next(W)})}error(W){this.forEachObserver(ee=>{ee.error(W)}),this.close(W)}complete(){this.forEachObserver(W=>{W.complete()}),this.close()}subscribe(W,ee,Le){let ye;if(void 0===W&&void 0===ee&&void 0===Le)throw new Error("Missing Observer.");ye=function Vn(q,W){if("object"!=typeof q||null===q)return!1;for(const ee of W)if(ee in q&&"function"==typeof q[ee])return!0;return!1}(W,["next","error","complete"])?W:{next:W,error:ee,complete:Le},void 0===ye.next&&(ye.next=Ci),void 0===ye.error&&(ye.error=Ci),void 0===ye.complete&&(ye.complete=Ci);const wt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ye.error(this.finalError):ye.complete()}catch{}}),this.observers.push(ye),wt}unsubscribeOne(W){void 0===this.observers||void 0===this.observers[W]||(delete this.observers[W],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(W){if(!this.finalized)for(let ee=0;ee<this.observers.length;ee++)this.sendOne(ee,W)}sendOne(W,ee){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[W])try{ee(this.observers[W])}catch(Le){typeof console<"u"&&console.error&&console.error(Le)}})}close(W){this.finalized||(this.finalized=!0,void 0!==W&&(this.finalError=W),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ci(){}const vo=function(q,W,ee,Le){let ye;if(Le<W?ye="at least "+W:Le>ee&&(ye=0===ee?"none":"no more than "+ee),ye)throw new Error(q+" failed: Was called with "+Le+(1===Le?" argument.":" arguments.")+" Expects "+ye+".")};function En(q,W){return`${q} failed: ${W} argument `}function Tn(q,W,ee,Le){if((!Le||ee)&&"function"!=typeof ee)throw new Error(En(q,W)+"must be a valid function.")}function os(q,W,ee,Le){if((!Le||ee)&&("object"!=typeof ee||null===ee))throw new Error(En(q,W)+"must be a valid context object.")}const yo=function(q){const W=[];let ee=0;for(let Le=0;Le<q.length;Le++){let ye=q.charCodeAt(Le);if(ye>=55296&&ye<=56319){const wt=ye-55296;Le++,ne(Le<q.length,"Surrogate pair missing trail surrogate."),ye=65536+(wt<<10)+(q.charCodeAt(Le)-56320)}ye<128?W[ee++]=ye:ye<2048?(W[ee++]=ye>>6|192,W[ee++]=63&ye|128):ye<65536?(W[ee++]=ye>>12|224,W[ee++]=ye>>6&63|128,W[ee++]=63&ye|128):(W[ee++]=ye>>18|240,W[ee++]=ye>>12&63|128,W[ee++]=ye>>6&63|128,W[ee++]=63&ye|128)}return W},Bo=function(q){let W=0;for(let ee=0;ee<q.length;ee++){const Le=q.charCodeAt(ee);Le<128?W++:Le<2048?W+=2:Le>=55296&&Le<=56319?(W+=4,ee++):W+=3}return W},wo=1e3,Me=2,Q=144e5,Ie=.5;function et(q,W=wo,ee=Me){const Le=W*Math.pow(ee,q),ye=Math.round(Ie*Le*(Math.random()-.5)*2);return Math.min(Q,Le+ye)}function xn(q){return q&&q._delegate?q._delegate:q}},5121:(Ct,Ne,F)=>{var l=F(5879);let ne=null;function B(){return ne}class he{}const ve=new l.OlP("DocumentToken");let Ae=(()=>{class n{historyGo(e){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(we)},providedIn:"platform"})}return n})();const He=new l.OlP("Location Initialized");let we=(()=>{class n extends Ae{constructor(){super(),this._doc=(0,l.f3M)(ve),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return B().getBaseHref(this._doc)}onPopState(e){const i=B().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=B().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){this._history.pushState(e,i,r)}replaceState(e,i,r){this._history.replaceState(e,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=l.Yz7({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function $(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function Z(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function ae(n){return n&&"?"!==n[0]?"?"+n:n}let Ze=(()=>{class n{historyGo(e){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(st)},providedIn:"root"})}return n})();const Ve=new l.OlP("appBaseHref");let st=(()=>{class n extends Ze{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,l.f3M)(ve).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return $(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+ae(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){const c=this.prepareExternalUrl(r+ae(s));this._platformLocation.pushState(e,i,c)}replaceState(e,i,r,s){const c=this.prepareExternalUrl(r+ae(s));this._platformLocation.replaceState(e,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static#e=this.\u0275fac=function(i){return new(i||n)(l.LFG(Ae),l.LFG(Ve,8))};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$e=(()=>{class n extends Ze{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=$(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,s){let c=this.prepareExternalUrl(r+ae(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(e,i,c)}replaceState(e,i,r,s){let c=this.prepareExternalUrl(r+ae(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static#e=this.\u0275fac=function(i){return new(i||n)(l.LFG(Ae),l.LFG(Ve,8))};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac})}return n})(),ot=(()=>{class n{constructor(e){this._subject=new l.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._basePath=function pe(n){if(new RegExp("^(https?:)?//").test(n)){const[,e]=n.split(/\/\/[^\/]+/);return e}return n}(Z(Nt(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+ae(i))}normalize(e){return n.stripTrailingSlash(function Rt(n,t){if(!n||!t.startsWith(n))return t;const e=t.substring(n.length);return""===e||["/",";","?","#"].includes(e[0])?e:t}(this._basePath,Nt(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ae(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ae(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}static#e=this.normalizeQueryParams=ae;static#t=this.joinWithSlash=$;static#n=this.stripTrailingSlash=Z;static#i=this.\u0275fac=function(i){return new(i||n)(l.LFG(Ze))};static#r=this.\u0275prov=l.Yz7({token:n,factory:function(){return function ze(){return new ot((0,l.LFG)(Ze))}()},providedIn:"root"})}return n})();function Nt(n){return n.replace(/\/index.html$/,"")}var Pe=function(n){return n[n.Zero=0]="Zero",n[n.One=1]="One",n[n.Two=2]="Two",n[n.Few=3]="Few",n[n.Many=4]="Many",n[n.Other=5]="Other",n}(Pe||{}),We=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(We||{}),ge=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(ge||{}),X=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(X||{}),Je=function(n){return n[n.Decimal=0]="Decimal",n[n.Group=1]="Group",n[n.List=2]="List",n[n.PercentSign=3]="PercentSign",n[n.PlusSign=4]="PlusSign",n[n.MinusSign=5]="MinusSign",n[n.Exponential=6]="Exponential",n[n.SuperscriptingExponent=7]="SuperscriptingExponent",n[n.PerMille=8]="PerMille",n[n.Infinity=9]="Infinity",n[n.NaN=10]="NaN",n[n.TimeSeparator=11]="TimeSeparator",n[n.CurrencyDecimal=12]="CurrencyDecimal",n[n.CurrencyGroup=13]="CurrencyGroup",n}(Je||{});function De(n,t){return Bn((0,l.cg1)(n)[l.wAp.DateFormat],t)}function Ce(n,t){return Bn((0,l.cg1)(n)[l.wAp.TimeFormat],t)}function Se(n,t){return Bn((0,l.cg1)(n)[l.wAp.DateTimeFormat],t)}function Fe(n,t){const e=(0,l.cg1)(n),i=e[l.wAp.NumberSymbols][t];if(typeof i>"u"){if(t===Je.CurrencyDecimal)return e[l.wAp.NumberSymbols][Je.Decimal];if(t===Je.CurrencyGroup)return e[l.wAp.NumberSymbols][Je.Group]}return i}const Dn=l.kL8;function xt(n){if(!n[l.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[l.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Bn(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new Error("Locale data API: locale data undefined")}function ar(n){const[t,e]=n.split(":");return{hours:+t,minutes:+e}}const zr=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,_o={},Ra=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Gt=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(Gt||{}),Yt=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(Yt||{}),Xt=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(Xt||{});function Jt(n,t,e,i){let r=function W(n){if(Le(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[r,s=1,c=1]=n.split("-").map(d=>+d);return hi(r,s-1,c)}const e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let i;if(i=n.match(zr))return function ee(n){const t=new Date(0);let e=0,i=0;const r=n[8]?t.setUTCFullYear:t.setFullYear,s=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));const c=Number(n[4]||0)-e,d=Number(n[5]||0)-i,p=Number(n[6]||0),m=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(t,c,d,p,m),t}(i)}const t=new Date(n);if(!Le(t))throw new Error(`Unable to convert "${n}" into a date`);return t}(n);t=Hi(e,t)||t;let d,c=[];for(;t;){if(d=Ra.exec(t),!d){c.push(t);break}{c=c.concat(d.slice(1));const y=c.pop();if(!y)break;t=y}}let p=r.getTimezoneOffset();i&&(p=Ft(i,p),r=function q(n,t,e){const i=e?-1:1,r=n.getTimezoneOffset();return function xn(n,t){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+t),n}(n,i*(Ft(t,r)-r))}(r,i,!0));let m="";return c.forEach(y=>{const T=function dt(n){if(et[n])return et[n];let t;switch(n){case"G":case"GG":case"GGG":t=Tn(Xt.Eras,ge.Abbreviated);break;case"GGGG":t=Tn(Xt.Eras,ge.Wide);break;case"GGGGG":t=Tn(Xt.Eras,ge.Narrow);break;case"y":t=En(Yt.FullYear,1,0,!1,!0);break;case"yy":t=En(Yt.FullYear,2,0,!0,!0);break;case"yyy":t=En(Yt.FullYear,3,0,!1,!0);break;case"yyyy":t=En(Yt.FullYear,4,0,!1,!0);break;case"Y":t=Ie(1);break;case"YY":t=Ie(2,!0);break;case"YYY":t=Ie(3);break;case"YYYY":t=Ie(4);break;case"M":case"L":t=En(Yt.Month,1,1);break;case"MM":case"LL":t=En(Yt.Month,2,1);break;case"MMM":t=Tn(Xt.Months,ge.Abbreviated);break;case"MMMM":t=Tn(Xt.Months,ge.Wide);break;case"MMMMM":t=Tn(Xt.Months,ge.Narrow);break;case"LLL":t=Tn(Xt.Months,ge.Abbreviated,We.Standalone);break;case"LLLL":t=Tn(Xt.Months,ge.Wide,We.Standalone);break;case"LLLLL":t=Tn(Xt.Months,ge.Narrow,We.Standalone);break;case"w":t=Q(1);break;case"ww":t=Q(2);break;case"W":t=Q(1,!0);break;case"d":t=En(Yt.Date,1);break;case"dd":t=En(Yt.Date,2);break;case"c":case"cc":t=En(Yt.Day,1);break;case"ccc":t=Tn(Xt.Days,ge.Abbreviated,We.Standalone);break;case"cccc":t=Tn(Xt.Days,ge.Wide,We.Standalone);break;case"ccccc":t=Tn(Xt.Days,ge.Narrow,We.Standalone);break;case"cccccc":t=Tn(Xt.Days,ge.Short,We.Standalone);break;case"E":case"EE":case"EEE":t=Tn(Xt.Days,ge.Abbreviated);break;case"EEEE":t=Tn(Xt.Days,ge.Wide);break;case"EEEEE":t=Tn(Xt.Days,ge.Narrow);break;case"EEEEEE":t=Tn(Xt.Days,ge.Short);break;case"a":case"aa":case"aaa":t=Tn(Xt.DayPeriods,ge.Abbreviated);break;case"aaaa":t=Tn(Xt.DayPeriods,ge.Wide);break;case"aaaaa":t=Tn(Xt.DayPeriods,ge.Narrow);break;case"b":case"bb":case"bbb":t=Tn(Xt.DayPeriods,ge.Abbreviated,We.Standalone,!0);break;case"bbbb":t=Tn(Xt.DayPeriods,ge.Wide,We.Standalone,!0);break;case"bbbbb":t=Tn(Xt.DayPeriods,ge.Narrow,We.Standalone,!0);break;case"B":case"BB":case"BBB":t=Tn(Xt.DayPeriods,ge.Abbreviated,We.Format,!0);break;case"BBBB":t=Tn(Xt.DayPeriods,ge.Wide,We.Format,!0);break;case"BBBBB":t=Tn(Xt.DayPeriods,ge.Narrow,We.Format,!0);break;case"h":t=En(Yt.Hours,1,-12);break;case"hh":t=En(Yt.Hours,2,-12);break;case"H":t=En(Yt.Hours,1);break;case"HH":t=En(Yt.Hours,2);break;case"m":t=En(Yt.Minutes,1);break;case"mm":t=En(Yt.Minutes,2);break;case"s":t=En(Yt.Seconds,1);break;case"ss":t=En(Yt.Seconds,2);break;case"S":t=En(Yt.FractionalSeconds,1);break;case"SS":t=En(Yt.FractionalSeconds,2);break;case"SSS":t=En(Yt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=yo(Gt.Short);break;case"ZZZZZ":t=yo(Gt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=yo(Gt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=yo(Gt.Long);break;default:return null}return et[n]=t,t}(y);m+=T?T(r,e,p):"''"===y?"'":y.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),m}function hi(n,t,e){const i=new Date(0);return i.setFullYear(n,t,e),i.setHours(0,0,0),i}function Hi(n,t){const e=function Nn(n){return(0,l.cg1)(n)[l.wAp.LocaleId]}(n);if(_o[e]=_o[e]||{},_o[e][t])return _o[e][t];let i="";switch(t){case"shortDate":i=De(n,X.Short);break;case"mediumDate":i=De(n,X.Medium);break;case"longDate":i=De(n,X.Long);break;case"fullDate":i=De(n,X.Full);break;case"shortTime":i=Ce(n,X.Short);break;case"mediumTime":i=Ce(n,X.Medium);break;case"longTime":i=Ce(n,X.Long);break;case"fullTime":i=Ce(n,X.Full);break;case"short":const r=Hi(n,"shortTime"),s=Hi(n,"shortDate");i=Vn(Se(n,X.Short),[r,s]);break;case"medium":const c=Hi(n,"mediumTime"),d=Hi(n,"mediumDate");i=Vn(Se(n,X.Medium),[c,d]);break;case"long":const p=Hi(n,"longTime"),m=Hi(n,"longDate");i=Vn(Se(n,X.Long),[p,m]);break;case"full":const y=Hi(n,"fullTime"),T=Hi(n,"fullDate");i=Vn(Se(n,X.Full),[y,T])}return i&&(_o[e][t]=i),i}function Vn(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,i){return null!=t&&i in t?t[i]:e})),n}function Ci(n,t,e="-",i,r){let s="";(n<0||r&&n<=0)&&(r?n=1-n:(n=-n,s=e));let c=String(n);for(;c.length<t;)c="0"+c;return i&&(c=c.slice(c.length-t)),s+c}function En(n,t,e=0,i=!1,r=!1){return function(s,c){let d=function Fr(n,t){switch(n){case Yt.FullYear:return t.getFullYear();case Yt.Month:return t.getMonth();case Yt.Date:return t.getDate();case Yt.Hours:return t.getHours();case Yt.Minutes:return t.getMinutes();case Yt.Seconds:return t.getSeconds();case Yt.FractionalSeconds:return t.getMilliseconds();case Yt.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((e>0||d>-e)&&(d+=e),n===Yt.Hours)0===d&&-12===e&&(d=12);else if(n===Yt.FractionalSeconds)return function vo(n,t){return Ci(n,3).substring(0,t)}(d,t);const p=Fe(c,Je.MinusSign);return Ci(d,t,p,i,r)}}function Tn(n,t,e=We.Format,i=!1){return function(r,s){return function os(n,t,e,i,r,s){switch(e){case Xt.Months:return function ci(n,t,e){const i=(0,l.cg1)(n),s=Bn([i[l.wAp.MonthsFormat],i[l.wAp.MonthsStandalone]],t);return Bn(s,e)}(t,r,i)[n.getMonth()];case Xt.Days:return function Wn(n,t,e){const i=(0,l.cg1)(n),s=Bn([i[l.wAp.DaysFormat],i[l.wAp.DaysStandalone]],t);return Bn(s,e)}(t,r,i)[n.getDay()];case Xt.DayPeriods:const c=n.getHours(),d=n.getMinutes();if(s){const m=function Kn(n){const t=(0,l.cg1)(n);return xt(t),(t[l.wAp.ExtraData][2]||[]).map(i=>"string"==typeof i?ar(i):[ar(i[0]),ar(i[1])])}(t),y=function Qn(n,t,e){const i=(0,l.cg1)(n);xt(i);const s=Bn([i[l.wAp.ExtraData][0],i[l.wAp.ExtraData][1]],t)||[];return Bn(s,e)||[]}(t,r,i),T=m.findIndex(A=>{if(Array.isArray(A)){const[x,P]=A,V=c>=x.hours&&d>=x.minutes,G=c<P.hours||c===P.hours&&d<P.minutes;if(x.hours<P.hours){if(V&&G)return!0}else if(V||G)return!0}else if(A.hours===c&&A.minutes===d)return!0;return!1});if(-1!==T)return y[T]}return function Zn(n,t,e){const i=(0,l.cg1)(n),s=Bn([i[l.wAp.DayPeriodsFormat],i[l.wAp.DayPeriodsStandalone]],t);return Bn(s,e)}(t,r,i)[c<12?0:1];case Xt.Eras:return function ui(n,t){return Bn((0,l.cg1)(n)[l.wAp.Eras],t)}(t,i)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${e}`)}}(r,s,n,t,e,i)}}function yo(n){return function(t,e,i){const r=-1*i,s=Fe(e,Je.MinusSign),c=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case Gt.Short:return(r>=0?"+":"")+Ci(c,2,s)+Ci(Math.abs(r%60),2,s);case Gt.ShortGMT:return"GMT"+(r>=0?"+":"")+Ci(c,1,s);case Gt.Long:return"GMT"+(r>=0?"+":"")+Ci(c,2,s)+":"+Ci(Math.abs(r%60),2,s);case Gt.Extended:return 0===i?"Z":(r>=0?"+":"")+Ci(c,2,s)+":"+Ci(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}const Bo=0,Lr=4;function Me(n){return hi(n.getFullYear(),n.getMonth(),n.getDate()+(Lr-n.getDay()))}function Q(n,t=!1){return function(e,i){let r;if(t){const s=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,c=e.getDate();r=1+Math.floor((c+s)/7)}else{const s=Me(e),c=function wo(n){const t=hi(n,Bo,1).getDay();return hi(n,0,1+(t<=Lr?Lr:Lr+7)-t)}(s.getFullYear()),d=s.getTime()-c.getTime();r=1+Math.round(d/6048e5)}return Ci(r,n,Fe(i,Je.MinusSign))}}function Ie(n,t=!1){return function(e,i){return Ci(Me(e).getFullYear(),n,Fe(i,Je.MinusSign),t)}}const et={};function Ft(n,t){n=n.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function Le(n){return n instanceof Date&&!isNaN(n.valueOf())}let Cl=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=l.Yz7({token:n,factory:function(i){let r=null;return i?r=new i:(s=l.LFG(l.soG),r=new Qf(s)),r;var s},providedIn:"root"})}return n})();let Qf=(()=>{class n extends Cl{constructor(e){super(),this.locale=e}getPluralCategory(e,i){switch(Dn(i||this.locale)(e)){case Pe.Zero:return"zero";case Pe.One:return"one";case Pe.Two:return"two";case Pe.Few:return"few";case Pe.Many:return"many";default:return"other"}}static#e=this.\u0275fac=function(i){return new(i||n)(l.LFG(l.soG))};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac})}return n})();function Ls(n,t,e){return(0,l.dwT)(n,t,e)}const Il=/\s+/,sh=[];let as=(()=>{class n{constructor(e,i,r,s){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this.initialClasses=sh,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(Il):sh}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(Il):e}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const i of e)this._updateState(i,!0);else if(null!=e)for(const i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){const r=this.stateMap.get(e);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const i=e[0],r=e[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(e,i){(e=e.trim()).length>0&&e.split(Il).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static#e=this.\u0275fac=function(i){return new(i||n)(l.Y36(l.ZZ4),l.Y36(l.aQg),l.Y36(l.SBq),l.Y36(l.Qsj))};static#t=this.\u0275dir=l.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class Oa{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let lr=(()=>{class n{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,s,c)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new Oa(r.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)i.remove(null===s?void 0:s);else if(null!==s){const d=i.get(s);i.move(d,c),ah(d,r)}});for(let r=0,s=i.length;r<s;r++){const d=i.get(r).context;d.index=r,d.count=s,d.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{ah(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(l.ZZ4))};static#t=this.\u0275dir=l.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function ah(n,t){n.context.$implicit=t.item}let Mi=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new Ey,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Im("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Im("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(l.Y36(l.s_b),l.Y36(l.Rgc))};static#t=this.\u0275dir=l.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class Ey{constructor(){this.$implicit=null,this.ngIf=null}}function Im(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,l.AaK)(t)}'.`)}class ls{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let ka=(()=>{class n{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews.push(e)}_matchCase(e){const i=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(e){if(this._defaultViews.length>0&&e!==this._defaultUsed){this._defaultUsed=e;for(const i of this._defaultViews)i.enforceState(e)}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=l.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0})}return n})(),Su=(()=>{class n{constructor(e,i,r){this.ngSwitch=r,r._addCase(),this._view=new ls(e,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static#e=this.\u0275fac=function(i){return new(i||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(ka,9))};static#t=this.\u0275dir=l.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0})}return n})(),Do=(()=>{class n{constructor(e,i,r){this._ngEl=e,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,i){const[r,s]=e.split("."),c=-1===r.indexOf("-")?void 0:l.JOm.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,c):this._renderer.removeStyle(this._ngEl.nativeElement,r,c)}_applyChanges(e){e.forEachRemovedItem(i=>this._setStyle(i.key,null)),e.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),e.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}static#e=this.\u0275fac=function(i){return new(i||n)(l.Y36(l.SBq),l.Y36(l.aQg),l.Y36(l.Qsj))};static#t=this.\u0275dir=l.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}return n})(),Qi=(()=>{class n{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:c}=this;this._viewRef=i.createEmbeddedView(r,s,c?{injector:c}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}static#e=this.\u0275fac=function(i){return new(i||n)(l.Y36(l.s_b))};static#t=this.\u0275dir=l.lG2({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[l.TTD]})}return n})();function Vs(n,t){return new l.vHH(2100,!1)}class Au{createSubscription(t,e){return(0,l.rg0)(()=>t.subscribe({next:e,error:i=>{throw i}}))}dispose(t){(0,l.rg0)(()=>t.unsubscribe())}}class Vr{createSubscription(t,e){return t.then(e,i=>{throw i})}dispose(t){}}const lh=new Vr,Mu=new Au;let Fa=(()=>{class n{constructor(e){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,i=>this._updateLatestValue(e,i))}_selectStrategy(e){if((0,l.QGY)(e))return lh;if((0,l.F4k)(e))return Mu;throw Vs()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,i){e===this._obj&&(this._latestValue=i,this._ref.markForCheck())}static#e=this.\u0275fac=function(i){return new(i||n)(l.Y36(l.sBO,16))};static#t=this.\u0275pipe=l.Yjl({name:"async",type:n,pure:!1,standalone:!0})}return n})();const qr=/#/g;let _c=(()=>{class n{constructor(e){this._localization=e}transform(e,i,r){if(null==e)return"";if("object"!=typeof i||null===i)throw Vs();return i[function mc(n,t,e,i){let r=`=${n}`;if(t.indexOf(r)>-1||(r=e.getPluralCategory(n,i),t.indexOf(r)>-1))return r;if(t.indexOf("other")>-1)return"other";throw new Error(`No plural message found for value "${n}"`)}(e,Object.keys(i),this._localization,r)].replace(qr,e.toString())}static#e=this.\u0275fac=function(i){return new(i||n)(l.Y36(Cl,16))};static#t=this.\u0275pipe=l.Yjl({name:"i18nPlural",type:n,pure:!0,standalone:!0})}return n})(),Ji=(()=>{class n{transform(e,i,r){if(null==e)return null;if(!this.supports(e))throw Vs();return e.slice(i,r)}supports(e){return"string"==typeof e||Array.isArray(e)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275pipe=l.Yjl({name:"slice",type:n,pure:!1,standalone:!0})}return n})(),zn=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=l.oAB({type:n});static#n=this.\u0275inj=l.cJS({})}return n})();const Vo="browser";function Uo(n){return"server"===n}let cr=(()=>{class n{static#e=this.\u0275prov=(0,l.Yz7)({token:n,providedIn:"root",factory:()=>new Ho((0,l.LFG)(ve),window)})}return n})();class Ho{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function jo(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const c=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(c)return c}r=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){this.supportsScrolling()&&(this.window.history.scrollRestoration=t)}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class hp extends he{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Lu extends hp{static makeCurrent(){!function ie(n){ne||(ne=n)}(new Lu)}onAndCancel(t,e,i){return t.addEventListener(e,i),()=>{t.removeEventListener(e,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function Rm(){return Ac=Ac||document.querySelector("base"),Ac?Ac.getAttribute("href"):null}();return null==e?null:function Ry(n){Dh=Dh||document.createElement("a"),Dh.setAttribute("href",n);const t=Dh.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Ac=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function Tl(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[r,s]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}(document.cookie,t)}}let Dh,Ac=null,Om=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac})}return n})();const Ch=new l.OlP("EventManagerPlugins");let km=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(s=>s.supports(e)),!i)throw new l.vHH(5101,!1);return this._eventNameToPlugin.set(e,i),i}static#e=this.\u0275fac=function(i){return new(i||n)(l.LFG(Ch),l.LFG(l.R0b))};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac})}return n})();class Bu{constructor(t){this._doc=t}}const Mc="ng-app-id";let Pm=(()=>{class n{constructor(e,i,r,s={}){this.doc=e,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Uo(s),this.resetHostNodes()}addStyles(e){for(const i of e)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(e){for(const i of e)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const e=this.styleNodesInDOM;e&&(e.forEach(i=>i.remove()),e.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(const i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){const i=this.styleRef;i.get(e)?.elements?.forEach(r=>r.remove()),i.delete(e)}collectServerRenderedStyles(){const e=this.doc.head?.querySelectorAll(`style[${Mc}="${this.appId}"]`);if(e?.length){const i=new Map;return e.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(e,i){const r=this.styleRef;if(r.has(e)){const s=r.get(e);return s.usage+=i,s.usage}return r.set(e,{usage:i,elements:[]}),i}getStyleElement(e,i){const r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===e)return r.delete(i),s.removeAttribute(Mc),s;{const c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=i,this.platformIsServer&&c.setAttribute(Mc,this.appId),c}}addStyleToHost(e,i){const r=this.getStyleElement(e,i);e.appendChild(r);const s=this.styleRef,c=s.get(i)?.elements;c?c.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||n)(l.LFG(ve),l.LFG(l.AFp),l.LFG(l.Ojb,8),l.LFG(l.Lbi))};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac})}return n})();const za={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Co=/%COMP%/g,Qs=new l.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Un(n,t){return t.map(e=>e.replace(Co,n))}let fa=(()=>{class n{constructor(e,i,r,s,c,d,p,m=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=c,this.platformId=d,this.ngZone=p,this.nonce=m,this.rendererByCompId=new Map,this.platformIsServer=Uo(d),this.defaultRenderer=new qa(e,c,p,this.platformIsServer)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===l.ifc.ShadowDom&&(i={...i,encapsulation:l.ifc.Emulated});const r=this.getOrCreateRenderer(e,i);return r instanceof Bm?r.applyToHost(e):r instanceof Tr&&r.applyStyles(),r}getOrCreateRenderer(e,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const c=this.doc,d=this.ngZone,p=this.eventManager,m=this.sharedStylesHost,y=this.removeStylesOnCompDestroy,T=this.platformIsServer;switch(i.encapsulation){case l.ifc.Emulated:s=new Bm(p,m,i,this.appId,y,c,d,T);break;case l.ifc.ShadowDom:return new Ya(p,m,e,i,c,d,this.nonce,T);default:s=new Tr(p,m,i,y,c,d,T)}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||n)(l.LFG(km),l.LFG(Pm),l.LFG(l.AFp),l.LFG(Qs),l.LFG(ve),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(l.Ojb))};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac})}return n})();class qa{constructor(t,e,i,r){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(za[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(Th(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(Th(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?this.doc.querySelector(t):t;if(!i)throw new l.vHH(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;const s=za[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const r=za[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(l.JOm.DashCase|l.JOm.Important)?t.style.setProperty(e,i,r&l.JOm.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&l.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){if("string"==typeof t&&!(t=B().getGlobalEventTarget(this.doc,t)))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(i))}decoratePreventDefault(t){return e=>{if("__ngUnwrap__"===e)return t;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))&&e.preventDefault()}}}function Th(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Ya extends qa{constructor(t,e,i,r,s,c,d,p){super(t,s,c,p),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const m=Un(r.id,r.styles);for(const y of m){const T=document.createElement("style");d&&T.setAttribute("nonce",d),T.textContent=y,this.shadowRoot.appendChild(T)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Tr extends qa{constructor(t,e,i,r,s,c,d,p){super(t,s,c,d),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=p?Un(p,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Bm extends Tr{constructor(t,e,i,r,s,c,d,p){const m=r+"-"+i.id;super(t,e,i,s,c,d,p,m),this.contentAttr=function pp(n){return"_ngcontent-%COMP%".replace(Co,n)}(m),this.hostAttr=function gp(n){return"_nghost-%COMP%".replace(Co,n)}(m)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}let Fl=(()=>{class n extends Bu{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}static#e=this.\u0275fac=function(i){return new(i||n)(l.LFG(ve))};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac})}return n})();const Vm=["alt","control","meta","shift"],ds={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Um={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ih=(()=>{class n extends Bu{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,r){const s=n.parseEventName(i),c=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>B().onAndCancel(e,s.domEventName,c))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let c="",d=i.indexOf("code");if(d>-1&&(i.splice(d,1),c="code."),Vm.forEach(m=>{const y=i.indexOf(m);y>-1&&(i.splice(y,1),c+=m+".")}),c+=s,0!=i.length||0===s.length)return null;const p={};return p.domEventName=r,p.fullKey=c,p}static matchEventFullKeyCode(e,i){let r=ds[e.key]||e.key,s="";return i.indexOf("code.")>-1&&(r=e.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),Vm.forEach(c=>{c!==r&&(0,Um[c])(e)&&(s+=c+".")}),s+=r,s===i)}static eventCallback(e,i,r){return s=>{n.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}static#e=this.\u0275fac=function(i){return new(i||n)(l.LFG(ve))};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac})}return n})();const pr=(0,l.eFA)(l._c5,"browser",[{provide:l.Lbi,useValue:Vo},{provide:l.g9A,useValue:function qt(){Lu.makeCurrent()},multi:!0},{provide:ve,useFactory:function _p(){return(0,l.RDi)(document),document},deps:[]}]),vp=new l.OlP(""),Ir=[{provide:l.rWj,useClass:class Eh{addToWindow(t){l.dqk.getAngularTestability=(i,r=!0)=>{const s=t.findTestabilityInTree(i,r);if(null==s)throw new l.vHH(5103,!1);return s},l.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),l.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),l.dqk.frameworkStabilizers||(l.dqk.frameworkStabilizers=[]),l.dqk.frameworkStabilizers.push(i=>{const r=l.dqk.getAllAngularTestabilities();let s=r.length,c=!1;const d=function(p){c=c||p,s--,0==s&&i(c)};r.forEach(p=>{p.whenStable(d)})})}findTestabilityInTree(t,e,i){return null==e?null:t.getTestability(e)??(i?B().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:l.lri,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]},{provide:l.dDg,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]}],To=[{provide:l.zSh,useValue:"root"},{provide:l.qLn,useFactory:function mp(){return new l.qLn},deps:[]},{provide:Ch,useClass:Fl,multi:!0,deps:[ve,l.R0b,l.Lbi]},{provide:Ch,useClass:Ih,multi:!0,deps:[ve]},fa,Pm,km,{provide:l.FYo,useExisting:fa},{provide:class Hs{},useClass:Om,deps:[]},[]];let Hu=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:l.AFp,useValue:e.appId}]}}static#e=this.\u0275fac=function(i){return new(i||n)(l.LFG(vp,12))};static#t=this.\u0275mod=l.oAB({type:n});static#n=this.\u0275inj=l.cJS({providers:[...To,...Ir],imports:[zn,l.hGG]})}return n})(),Ue=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static#e=this.\u0275fac=function(i){return new(i||n)(l.LFG(ve))};static#t=this.\u0275prov=l.Yz7({token:n,factory:function(i){let r=null;return r=i?new i:function Sh(){return new Ue((0,l.LFG)(ve))}(),r},providedIn:"root"})}return n})();typeof window<"u"&&window;let Io=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=l.Yz7({token:n,factory:function(i){let r=null;return r=i?new(i||n):l.LFG(xh),r},providedIn:"root"})}return n})(),xh=(()=>{class n extends Io{constructor(e){super(),this._doc=e}sanitize(e,i){if(null==i)return null;switch(e){case l.q3G.NONE:return i;case l.q3G.HTML:return(0,l.qzn)(i,"HTML")?(0,l.z3N)(i):(0,l.EiD)(this._doc,String(i)).toString();case l.q3G.STYLE:return(0,l.qzn)(i,"Style")?(0,l.z3N)(i):i;case l.q3G.SCRIPT:if((0,l.qzn)(i,"Script"))return(0,l.z3N)(i);throw new l.vHH(5200,!1);case l.q3G.URL:return(0,l.qzn)(i,"URL")?(0,l.z3N)(i):(0,l.mCW)(String(i));case l.q3G.RESOURCE_URL:if((0,l.qzn)(i,"ResourceURL"))return(0,l.z3N)(i);throw new l.vHH(5201,!1);default:throw new l.vHH(5202,!1)}}bypassSecurityTrustHtml(e){return(0,l.JVY)(e)}bypassSecurityTrustStyle(e){return(0,l.L6k)(e)}bypassSecurityTrustScript(e){return(0,l.eBb)(e)}bypassSecurityTrustUrl(e){return(0,l.LAX)(e)}bypassSecurityTrustResourceUrl(e){return(0,l.pB0)(e)}static#e=this.\u0275fac=function(i){return new(i||n)(l.LFG(ve))};static#t=this.\u0275prov=l.Yz7({token:n,factory:function(i){let r=null;return r=i?new i:function Nh(n){return new xh(n.get(ve))}(l.LFG(l.zs3)),r},providedIn:"root"})}return n})();var si=F(6304),Qt=F(8645),Mt=F(2096),Ti=F(5592),Hn=F(2459),Sr=F(3019),Qa=F(3093),Jn=F(4664),at=F(7398),$o=F(4552);class Xn extends Qt.x{constructor(t=1/0,e=1/0,i=$o.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:c}=this;e||(i.push(t),!r&&i.push(s.now()+c)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let c=0;c<s.length&&!t.closed;c+=i?1:2)t.next(s[c]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*t;if(t<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const c=e.now();let d=0;for(let p=1;p<i.length&&i[p]<=c;p+=2)d=p;d&&i.splice(0,d+1)}}}var Ar=F(3020);function ga(n,t,e){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=n):i=n??1/0,(0,Ar.B)({connector:()=>new Xn(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}const xc=(0,F(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var $i=F(9360),_i=F(8251);function fn(n,t){return(0,$i.e)((e,i)=>{let r=0;e.subscribe((0,_i.x)(i,s=>n.call(t,s,r++)&&i.next(s)))})}var er=F(6232);function jn(n){return n<=0?()=>er.E:(0,$i.e)((t,e)=>{let i=0;t.subscribe((0,_i.x)(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function zo(n){return(0,$i.e)((t,e)=>{let i=!1;t.subscribe((0,_i.x)(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function Bl(n=Zu){return(0,$i.e)((t,e)=>{let i=!1;t.subscribe((0,_i.x)(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function Zu(){return new xc}var Wo=F(2737);function ma(n,t){const e=arguments.length>=2;return i=>i.pipe(n?fn((r,s)=>n(r,s,i)):Wo.y,jn(1),e?zo(t):Bl(()=>new xc))}var Zr=F(4674);function Rc(n,t){return(0,Zr.m)(t)?(0,Jn.w)(()=>n,t):(0,Jn.w)(()=>n)}var So=F(5137),dn=F(2793);F(4097);var Ee=F(5861),oi=F(4303),mr=F(4537),L=F(9058),Hr=F(7879);const Ao=new Map,Hl={activated:!1,tokenObservers:[]},Qu={initialized:!1,enabled:!1};function ei(n){return Ao.get(n)||Object.assign({},Hl)}function Ja(){return Qu}const Ju="https://content-firebaseappcheck.googleapis.com/v1",Xa="exchangeDebugToken",Ap={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class kh{constructor(t,e,i,r,s){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,Ee.Z)(function*(){e.stop();try{e.pending=new L.BH,yield function Fc(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new L.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(i){e.retryPolicy(i)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const mn=new L.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Mo(n){if(!ei(n).activated)throw mn.create("use-before-activation",{appName:n.name})}function jl(n,t){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,Ee.Z)(function*({url:n,body:t},e){const i={"Content-Type":"application/json"},r=e.getImmediate({optional:!0});if(r){const T=yield r.getHeartbeatsHeader();T&&(i["X-Firebase-Client"]=T)}const s={method:"POST",body:JSON.stringify(t),headers:i};let c,d;try{c=yield fetch(n,s)}catch(T){throw mn.create("fetch-network-error",{originalErrorMessage:T?.message})}if(200!==c.status)throw mn.create("fetch-status-error",{httpStatus:c.status});try{d=yield c.json()}catch(T){throw mn.create("fetch-parse-error",{originalErrorMessage:T?.message})}const p=d.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw mn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});const m=1e3*Number(p[1]),y=Date.now();return{token:d.token,expireTimeMillis:y+m,issuedAtTimeMillis:y}})).apply(this,arguments)}function C(n,t){const{projectId:e,appId:i,apiKey:r}=n.options;return{url:`${Ju}/projects/${e}/apps/${i}:${Xa}?key=${r}`,body:{debug_token:t}}}const S="firebase-app-check-database",R=1,U="firebase-app-check-store";let re=null;function tr(){return(tr=(0,Ee.Z)(function*(n,t){const i=(yield function Te(){return re||(re=new Promise((n,t)=>{try{const e=indexedDB.open(S,R);e.onsuccess=i=>{n(i.target.result)},e.onerror=i=>{var r;t(mn.create("storage-open",{originalErrorMessage:null===(r=i.target.error)||void 0===r?void 0:r.message}))},e.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(U,{keyPath:"compositeKey"})}}catch(e){t(mn.create("storage-open",{originalErrorMessage:e?.message}))}}),re)}()).transaction(U,"readwrite"),s=i.objectStore(U).put({compositeKey:n,value:t});return new Promise((c,d)=>{s.onsuccess=p=>{c()},i.onerror=p=>{var m;d(mn.create("storage-set",{originalErrorMessage:null===(m=p.target.error)||void 0===m?void 0:m.message}))}})})).apply(this,arguments)}const Xs=new Hr.Yd("@firebase/app-check");function Qr(n,t){return(0,L.hl)()?function lt(n,t){return function tn(n,t){return tr.apply(this,arguments)}(function Ii(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{Xs.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function Fh(){return Ja().enabled}function tl(){return xp.apply(this,arguments)}function xp(){return(xp=(0,Ee.Z)(function*(){const n=Ja();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Uy={error:"UNKNOWN_ERROR"};function vD(n){return L.US.encodeString(JSON.stringify(n),!1)}function fs(n){return Lh.apply(this,arguments)}function Lh(){return(Lh=(0,Ee.Z)(function*(n,t=!1){const e=n.app;Mo(e);const i=ei(e);let s,r=i.token;if(r&&!Xu(r)&&(i.token=void 0,r=void 0),!r){const p=yield i.cachedTokenPromise;p&&(Xu(p)?r=p:yield Qr(e,void 0))}if(!t&&r&&Xu(r))return{token:r.token};let d,c=!1;if(Fh()){i.exchangeTokenPromise||(i.exchangeTokenPromise=jl(C(e,yield tl()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),c=!0);const p=yield i.exchangeTokenPromise;return yield Qr(e,p),i.token=p,{token:p.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),c=!0),r=yield ei(e).exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?Xs.warn(p.message):Xs.error(p),s=p}return r?s?d=Xu(r)?{token:r.token,internalError:s}:Gy(s):(d={token:r.token},i.token=r,yield Qr(e,r)):d=Gy(s),c&&function zl(n,t){const e=ei(n).tokenObservers;for(const i of e)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch{}}(e,d),d})).apply(this,arguments)}function Uc(n){return Hy.apply(this,arguments)}function Hy(){return(Hy=(0,Ee.Z)(function*(n){const t=n.app;Mo(t);const{provider:e}=ei(t);if(Fh()){const i=yield tl(),{token:r}=yield jl(C(t,i),n.heartbeatServiceProvider);return{token:r}}{const{token:i}=yield e.getToken();return{token:i}}})).apply(this,arguments)}function Op(n,t){const e=ei(n),i=e.tokenObservers.filter(r=>r.next!==t);0===i.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),e.tokenObservers=i}function jy(n){const{app:t}=n,e=ei(t);let i=e.tokenRefresher;i||(i=function QS(n){const{app:t}=n;return new kh((0,Ee.Z)(function*(){let i;if(i=ei(t).token?yield fs(n,!0):yield fs(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const e=ei(t);if(e.token){let i=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,e.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},Ap.RETRIAL_MIN_WAIT,Ap.RETRIAL_MAX_WAIT)}(n),e.tokenRefresher=i),!i.isRunning()&&e.isTokenAutoRefreshEnabled&&i.start()}function Xu(n){return n.expireTimeMillis-Date.now()>0}function Gy(n){return{token:vD(Uy),error:n}}class Bh{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=ei(this.app);for(const e of t)Op(this.app,e.next);return Promise.resolve()}}const ED="app-check-internal";!function CD(){(0,oi._registerComponent)(new mr.wA("app-check",n=>function kp(n,t){return new Bh(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(ED).initialize()})),(0,oi._registerComponent)(new mr.wA(ED,n=>function Ym(n){return{getToken:t=>fs(n,t),getLimitedUseToken:()=>Uc(n),addTokenListener:t=>function Rp(n,t,e,i){const{app:r}=n,s=ei(r);if(s.tokenObservers=[...s.tokenObservers,{next:e,error:i,type:t}],s.token&&Xu(s.token)){const d=s.token;Promise.resolve().then(()=>{e({token:d.token}),jy(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>jy(n))}(n,"INTERNAL",t),removeTokenListener:t=>Op(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,oi.registerVersion)("@firebase/app-check","0.8.0")}();class Hh{constructor(){return(0,dn.vb)("app-check")}}typeof window<"u"&&window;var jc=F(120);const ad=new l.OlP("angularfire2.auth.use-emulator"),Gc=new l.OlP("angularfire2.auth.settings"),i_=new l.OlP("angularfire2.auth.tenant-id"),va=new l.OlP("angularfire2.auth.langugage-code"),Bp=new l.OlP("angularfire2.auth.use-device-language"),Vp=new l.OlP("angularfire.auth.persistence"),$h=(n,t,e,i,r,s,c,d)=>(0,si.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=t.runOutsideAngular(()=>n.auth());if(e&&p.useEmulator(...e),i&&(p.tenantId=i),p.languageCode=r,s&&p.useDeviceLanguage(),c)for(const[m,y]of Object.entries(c))p.settings[m]=y;return d&&p.setPersistence(d),p},[e,i,r,s,c,d]);let ld=(()=>{class n{constructor(e,i,r,s,c,d,p,m,y,T,A,x){const P=new Qt.x,V=(0,Mt.of)(void 0).pipe((0,Qa.Q)(c.outsideAngular),(0,Jn.w)(()=>s.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,8977)))),(0,at.U)(()=>(0,si.on)(e,s,i)),(0,at.U)(G=>$h(G,s,d,m,y,T,p,A)),ga({bufferSize:1,refCount:!1}));if(Uo(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Mt.of)(null);else{V.pipe(ma()).subscribe();const te=V.pipe((0,Jn.w)(de=>de.getRedirectResult().then(Oe=>Oe,()=>null)),dn.iC,ga({bufferSize:1,refCount:!1})),se=V.pipe((0,Jn.w)(de=>new Ti.y(Oe=>({unsubscribe:s.runOutsideAngular(()=>de.onAuthStateChanged(je=>Oe.next(je),je=>Oe.error(je),()=>Oe.complete()))})))),le=V.pipe((0,Jn.w)(de=>new Ti.y(Oe=>({unsubscribe:s.runOutsideAngular(()=>de.onIdTokenChanged(je=>Oe.next(je),je=>Oe.error(je),()=>Oe.complete()))}))));this.authState=te.pipe(Rc(se),(0,So.R)(c.outsideAngular),(0,Qa.Q)(c.insideAngular)),this.user=te.pipe(Rc(le),(0,So.R)(c.outsideAngular),(0,Qa.Q)(c.insideAngular)),this.idToken=this.user.pipe((0,Jn.w)(de=>de?(0,Hn.D)(de.getIdToken()):(0,Mt.of)(null))),this.idTokenResult=this.user.pipe((0,Jn.w)(de=>de?(0,Hn.D)(de.getIdTokenResult()):(0,Mt.of)(null))),this.credential=(0,Sr.T)(te,P,this.authState.pipe(fn(de=>!de))).pipe((0,at.U)(de=>de?.user?de:null),(0,So.R)(c.outsideAngular),(0,Qa.Q)(c.insideAngular))}return(0,si.pX)(this,V,s,{spy:{apply:(G,te,se)=>{(G.startsWith("signIn")||G.startsWith("createUser"))&&se.then(le=>P.next(le))}}})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(si.Dh),l.LFG(si.xv,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(dn.HU),l.LFG(ad,8),l.LFG(Gc,8),l.LFG(i_,8),l.LFG(va,8),l.LFG(Bp,8),l.LFG(Vp,8),l.LFG(Hh,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Qy=(()=>{class n{constructor(){jc.Z.registerVersion("angularfire",dn.q4.full,"auth-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[ld]}),n})();var Mr=F(6321);class r_{constructor(t,e){this._delegate=t,this.firebase=e,(0,oi._addComponent)(t,new mr.wA("app-compat",()=>this,"PUBLIC")),this.container=t.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this._delegate.automaticDataCollectionEnabled=t}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(t=>{this._delegate.checkDestroyed(),t()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,oi.deleteApp)(this._delegate)))}_getService(t,e=oi._DEFAULT_ENTRY_NAME){var i;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(t);return!r.isInitialized()&&"EXPLICIT"===(null===(i=r.getComponent())||void 0===i?void 0:i.instantiationMode)&&r.initialize(),r.getImmediate({identifier:e})}_removeServiceInstance(t,e=oi._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(t).clearInstance(e)}_addComponent(t){(0,oi._addComponent)(this._delegate,t)}_addOrOverwriteComponent(t){(0,oi._addOrOverwriteComponent)(this._delegate,t)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const xi=new L.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),jp=function Hp(){const n=function $c(n){const t={},e={__esModule:!0,initializeApp:function s(m,y={}){const T=oi.initializeApp(m,y);if((0,L.r3)(t,T.name))return t[T.name];const A=new n(T,e);return t[T.name]=A,A},app:r,registerVersion:oi.registerVersion,setLogLevel:oi.setLogLevel,onLog:oi.onLog,apps:null,SDK_VERSION:oi.SDK_VERSION,INTERNAL:{registerComponent:function d(m){const y=m.name,T=y.replace("-compat","");if(oi._registerComponent(m)&&"PUBLIC"===m.type){const A=(x=r())=>{if("function"!=typeof x[T])throw xi.create("invalid-app-argument",{appName:y});return x[T]()};void 0!==m.serviceProps&&(0,L.ZB)(A,m.serviceProps),e[T]=A,n.prototype[T]=function(...x){return this._getService.bind(this,y).apply(this,m.multipleInstances?x:[])}}return"PUBLIC"===m.type?e[T]:null},removeApp:function i(m){delete t[m]},useAsService:function p(m,y){return"serverAuth"===y?null:y},modularAPIs:oi}};function r(m){if(!(0,L.r3)(t,m=m||oi._DEFAULT_ENTRY_NAME))throw xi.create("no-app",{appName:m});return t[m]}return e.default=e,Object.defineProperty(e,"apps",{get:function c(){return Object.keys(t).map(m=>t[m])}}),r.App=n,e}(r_);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:Hp,extendNamespace:function t(e){(0,L.ZB)(n,e)},createSubscribe:L.ne,ErrorFactory:L.LL,deepExtend:L.ZB}),n}(),Jr=new Hr.Yd("@firebase/app-compat");if((0,L.jU)()&&void 0!==self.firebase){Jr.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const n=self.firebase.SDK_VERSION;n&&n.indexOf("LITE")>=0&&Jr.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const MD=jp;!function Xy(n){(0,oi.registerVersion)("@firebase/app-compat","0.2.19",n)}();const s_="firebasestorage.googleapis.com",b="storageBucket";class M extends L.ZR{constructor(t,e,i=0){super(Y(t),`Firebase Storage: ${e} (${Y(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,M.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Y(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var O=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(O||{});function Y(n){return"storage/"+n}function ce(){return new M(O.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function no(){return new M(O.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function cd(){return new M(O.CANCELED,"User canceled the upload/download.")}function zh(){return new M(O.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Wl(n){return new M(O.INVALID_ARGUMENT,n)}function a_(){return new M(O.APP_DELETED,"The Firebase app was deleted.")}function n0(n){return new M(O.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function qc(n,t){return new M(O.INVALID_FORMAT,"String does not match format '"+n+"': "+t)}function hd(n){throw new M(O.INTERNAL_ERROR,"Internal error: "+n)}class Xr{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let i;try{i=Xr.makeFromUrl(t,e)}catch{return new Xr(t,"")}if(""===i.path)return i;throw function ud(n){return new M(O.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(t)}static makeFromUrl(t,e){let i=null;const r="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+r+"(/(.*))?$","i");function m(de){de.path_=decodeURIComponent(de.path)}const T=e.replace(/[.]/g,"\\."),le=[{regex:d,indices:{bucket:1,path:3},postModify:function s(de){"/"===de.path.charAt(de.path.length-1)&&(de.path_=de.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${T}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:m},{regex:new RegExp(`^https?://${e===s_?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:m}];for(let de=0;de<le.length;de++){const Oe=le[de],je=Oe.regex.exec(t);if(je){let nt=je[Oe.indices.path];nt||(nt=""),i=new Xr(je[Oe.indices.bucket],nt),Oe.postModify(i);break}}if(null==i)throw function Wc(n){return new M(O.INVALID_URL,"Invalid URL '"+n+"'.")}(t);return i}}class ND{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function ql(n){return"string"==typeof n||n instanceof String}function OD(n){return r0()&&n instanceof Blob}function r0(){return typeof Blob<"u"&&!(0,L.UG)()}function kD(n,t,e,i){if(i<t)throw Wl(`Invalid value for '${n}'. Expected ${t} or greater.`);if(i>e)throw Wl(`Invalid value for '${n}'. Expected ${e} or less.`)}function fd(n,t,e){let i=t;return null==e&&(i=`https://${t}`),`${e}://${i}/v0${n}`}function l_(n){const t=encodeURIComponent;let e="?";for(const i in n)n.hasOwnProperty(i)&&(e=e+(t(i)+"=")+t(n[i])+"&");return e=e.slice(0,-1),e}var Gp=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Gp||{});function PD(n,t){const e=n>=500&&n<600,r=-1!==[408,429].indexOf(n),s=-1!==t.indexOf(n);return e||r||s}class n1{constructor(t,e,i,r,s,c,d,p,m,y,T,A=!0){this.url_=t,this.method_=e,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=p,this.timeout_=m,this.progressCallback_=y,this.connectionFactory_=T,this.retry=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,P)=>{this.resolve_=x,this.reject_=P,this.start_()})}start_(){const e=(i,r)=>{const s=this.resolve_,c=this.reject_,d=r.connection;if(r.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());!function kO(n){return void 0!==n}(p)?s():s(p)}catch(p){c(p)}else if(null!==d){const p=ce();p.serverResponse=d.getErrorText(),c(this.errorCallback_?this.errorCallback_(d,p):p)}else c(r.canceled?this.appDelete_?a_():cd():no())};this.canceled_?e(0,new c_(!1,null,!0)):this.backoffId_=function xD(n,t,e){let i=1,r=null,s=null,c=!1,d=0;function p(){return 2===d}let m=!1;function y(...G){m||(m=!0,t.apply(null,G))}function T(G){r=setTimeout(()=>{r=null,n(x,p())},G)}function A(){s&&clearTimeout(s)}function x(G,...te){if(m)return void A();if(G)return A(),void y.call(null,G,...te);if(p()||c)return A(),void y.call(null,G,...te);let le;i<64&&(i*=2),1===d?(d=2,le=0):le=1e3*(i+Math.random()),T(le)}let P=!1;function V(G){P||(P=!0,A(),!m&&(null!==r?(G||(d=2),clearTimeout(r),T(0)):G||(d=1)))}return T(0),s=setTimeout(()=>{c=!0,V(!0)},e),V}((i,r)=>{if(r)return void i(!1,new c_(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const c=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(c),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(c),this.pendingConnection_=null;const d=s.getErrorCode()===Gp.NO_ERROR,p=s.getStatus();if(!d||PD(p,this.additionalRetryCodes_)&&this.retry){const y=s.getErrorCode()===Gp.ABORT;return void i(!1,new c_(!1,null,y))}const m=-1!==this.successCodes_.indexOf(p);i(!0,new c_(m,s))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function OO(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class c_{constructor(t,e,i){this.wasSuccessCode=t,this.connection=e,this.canceled=!!i}}function o0(...n){const t=function LD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==t){const e=new t;for(let i=0;i<n.length;i++)e.append(n[i]);return e.getBlob()}if(r0())return new Blob(n);throw new M(O.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Ss={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class VD{constructor(t,e){this.data=t,this.contentType=e||null}}function a0(n,t){switch(n){case Ss.RAW:return new VD(o1(t));case Ss.BASE64:case Ss.BASE64URL:return new VD(a1(n,t));case Ss.DATA_URL:return new VD(function l1(n){const t=new UD(n);return t.base64?a1(Ss.BASE64,t.rest):function PO(n){let t;try{t=decodeURIComponent(n)}catch{throw qc(Ss.DATA_URL,"Malformed data URL.")}return o1(t)}(t.rest)}(t),function l0(n){return new UD(n).contentType}(t))}throw ce()}function o1(n){const t=[];for(let e=0;e<n.length;e++){let i=n.charCodeAt(e);i<=127?t.push(i):i<=2047?t.push(192|i>>6,128|63&i):55296==(64512&i)?e<n.length-1&&56320==(64512&n.charCodeAt(e+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++e),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):t.push(239,191,189):56320==(64512&i)?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(t)}function a1(n,t){switch(n){case Ss.BASE64:{const r=-1!==t.indexOf("-"),s=-1!==t.indexOf("_");if(r||s)throw qc(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Ss.BASE64URL:{const r=-1!==t.indexOf("+"),s=-1!==t.indexOf("/");if(r||s)throw qc(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=function BD(n){if(typeof atob>"u")throw function t0(n){return new M(O.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(t)}catch(r){throw r.message.includes("polyfill")?r:qc(n,"Invalid character found")}const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}class UD{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw qc(Ss.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=e[1]||null;null!=i&&(this.base64=function HD(n,t){return n.length>=t.length&&n.substring(n.length-t.length)===t}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}class io{constructor(t,e){let i=0,r="";OD(t)?(this.data_=t,i=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(t,e){if(OD(this.data_)){const r=function s1(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}(this.data_,t,e);return null===r?null:new io(r)}{const i=new Uint8Array(this.data_.buffer,t,e-t);return new io(i,!0)}}static getBlob(...t){if(r0()){const e=t.map(i=>i instanceof io?i.data_:i);return new io(o0.apply(null,e))}{const e=t.map(c=>ql(c)?a0(Ss.RAW,c).data:c.data_);let i=0;e.forEach(c=>{i+=c.byteLength});const r=new Uint8Array(i);let s=0;return e.forEach(c=>{for(let d=0;d<c.length;d++)r[s++]=c[d]}),new io(r,!0)}}uploadData(){return this.data_}}function jD(n){let t;try{t=JSON.parse(n)}catch{return null}return function t1(n){return"object"==typeof n&&!Array.isArray(n)}(t)?t:null}function c1(n){const t=n.lastIndexOf("/",n.length-2);return-1===t?n:n.slice(t+1)}function GD(n,t){return t}class ro{constructor(t,e,i,r){this.server=t,this.local=e||t,this.writable=!!i,this.xform=r||GD}}let Yc=null;function Wh(){if(Yc)return Yc;const n=[];n.push(new ro("bucket")),n.push(new ro("generation")),n.push(new ro("metageneration")),n.push(new ro("name","fullPath",!0));const e=new ro("name");e.xform=function t(s,c){return function c0(n){return!ql(n)||n.length<2?n:c1(n)}(c)},n.push(e);const r=new ro("size");return r.xform=function i(s,c){return void 0!==c?Number(c):c},n.push(r),n.push(new ro("timeCreated")),n.push(new ro("updated")),n.push(new ro("md5Hash",null,!0)),n.push(new ro("cacheControl",null,!0)),n.push(new ro("contentDisposition",null,!0)),n.push(new ro("contentEncoding",null,!0)),n.push(new ro("contentLanguage",null,!0)),n.push(new ro("contentType",null,!0)),n.push(new ro("metadata","customMetadata",!0)),Yc=n,Yc}function $D(n,t,e){const i=jD(t);return null===i?null:function d1(n,t,e){const i={type:"file"},r=e.length;for(let s=0;s<r;s++){const c=e[s];i[c.local]=c.xform(i,t[c.server])}return function u1(n,t){Object.defineProperty(n,"ref",{get:function e(){const s=new Xr(n.bucket,n.fullPath);return t._makeStorageReference(s)}})}(i,n),i}(n,i,e)}function zD(n,t){const e={},i=t.length;for(let r=0;r<i;r++){const s=t[r];s.writable&&(e[s.server]=n[s.local])}return JSON.stringify(e)}const h1="prefixes",f1="items";class ps{constructor(t,e,i,r){this.url=t,this.method=e,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function so(n){if(!n)throw ce()}function u0(n,t){return function e(i,r){const s=$D(n,r,t);return so(null!==s),s}}function $p(n){return function t(e,i){let r;return r=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?function It(){return new M(O.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function Et(){return new M(O.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===e.getStatus()?function Xe(n){return new M(O.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===e.getStatus()?function Si(n){return new M(O.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):i,r.status=e.getStatus(),r.serverResponse=i.serverResponse,r}}function d_(n){const t=$p(n);return function e(i,r){let s=t(i,r);return 404===i.getStatus()&&(s=function Ye(n){return new M(O.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=r.serverResponse,s}}function p1(n,t,e){const r=fd(t.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,d=new ps(r,"GET",u0(n,e),c);return d.errorHandler=d_(t),d}function g1(n,t,e,i,r){const s={};s.prefix=t.isRoot?"":t.path+"/",e&&e.length>0&&(s.delimiter=e),i&&(s.pageToken=i),r&&(s.maxResults=r);const d=fd(t.bucketOnlyServerUrl(),n.host,n._protocol),m=n.maxOperationRetryTime,y=new ps(d,"GET",function VO(n,t){return function e(i,r){const s=function BO(n,t,e){const i=jD(e);return null===i?null:function LO(n,t,e){const i={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[h1])for(const r of e[h1]){const s=r.replace(/\/$/,""),c=n._makeStorageReference(new Xr(t,s));i.prefixes.push(c)}if(e[f1])for(const r of e[f1]){const s=n._makeStorageReference(new Xr(t,r.name));i.items.push(s)}return i}(n,t,i)}(n,t,r);return so(null!==s),s}}(n,t.bucket),m);return y.urlParams=s,y.errorHandler=$p(t),y}function Yl(n,t,e){const i=Object.assign({},e);return i.fullPath=n.path,i.size=t.size(),i.contentType||(i.contentType=function d0(n,t){return n&&n.contentType||t&&t.type()||"application/octet-stream"}(null,t)),i}class h_{constructor(t,e,i,r){this.current=t,this.total=e,this.finalized=!!i,this.metadata=r||null}}function h0(n,t){let e=null;try{e=n.getResponseHeader("X-Goog-Upload-Status")}catch{so(!1)}return so(!!e&&-1!==(t||["active"]).indexOf(e)),e}const WD={STATE_CHANGED:"state_changed"},As={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function v1(n){switch(n){case"running":case"pausing":case"canceling":return As.RUNNING;case"paused":return As.PAUSED;case"success":return As.SUCCESS;case"canceled":return As.CANCELED;default:return As.ERROR}}class ZB{constructor(t,e,i){if(function RD(n){return"function"==typeof n}(t)||null!=e||null!=i)this.next=t,this.error=e??void 0,this.complete=i??void 0;else{const s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Yh(n){return(...t)=>{Promise.resolve().then(()=>n(...t))}}let y1=null;class zO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Gp.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Gp.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Gp.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,i,r){if(this.sent_)throw hd("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw hd("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw hd("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw hd("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw hd("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}class WO extends zO{initXhr(){this.xhr_.responseType="text"}}function nl(){return y1?y1():new WO}class D1{constructor(t,e,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=i,this._mappings=Wh(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(O.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(PD(r.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();r=no()}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(O.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,i])=>{switch(this._state){case"running":t(e,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((t,e)=>{const i=function _1(n,t,e,i,r){const s=t.bucketOnlyServerUrl(),c=Yl(t,i,r),d={name:c.fullPath},p=fd(s,n.host,n._protocol),y={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},T=zD(c,e),P=new ps(p,"POST",function x(V){let G;h0(V);try{G=V.getResponseHeader("X-Goog-Upload-URL")}catch{so(!1)}return so(ql(G)),G},n.maxUploadRetryTime);return P.urlParams=d,P.headers=y,P.body=T,P.errorHandler=$p(t),P}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,nl,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,i)=>{const r=function qB(n,t,e,i){const p=new ps(e,"POST",function s(m){const y=h0(m,["active","final"]);let T=null;try{T=m.getResponseHeader("X-Goog-Upload-Size-Received")}catch{so(!1)}T||so(!1);const A=Number(T);return so(!isNaN(A)),new h_(A,i.size(),"final"===y)},n.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=$p(t),p}(this._ref.storage,this._ref._location,t,this._blob),s=this._ref.storage._makeRequest(r,nl,e,i);this._request=s,s.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=262144*this._chunkMultiplier,e=new h_(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let c;try{c=function YB(n,t,e,i,r,s,c,d){const p=new h_(0,0);if(c?(p.current=c.current,p.total=c.total):(p.current=0,p.total=i.size()),i.size()!==p.total)throw function dd(){return new M(O.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const m=p.total-p.current;let y=m;r>0&&(y=Math.min(y,r));const T=p.current;let x="";x=0===y?"finalize":m===y?"upload, finalize":"upload";const P={"X-Goog-Upload-Command":x,"X-Goog-Upload-Offset":`${p.current}`},V=i.slice(T,T+y);if(null===V)throw zh();const le=new ps(e,"POST",function G(de,Oe){const je=h0(de,["active","final"]),ct=p.current+y,nt=i.size();let _t;return _t="final"===je?u0(t,s)(de,Oe):null,new h_(ct,nt,"final"===je,_t)},t.maxUploadRetryTime);return le.headers=P,le.body=V.uploadData(),le.progressCallback=d||null,le.errorHandler=$p(n),le}(this._ref._location,this._ref.storage,i,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const d=this._ref.storage._makeRequest(c,nl,r,s,!1);this._request=d,d.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const i=p1(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,nl,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const i=function zp(n,t,e,i,r){const s=t.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},p=function d(){let le="";for(let de=0;de<2;de++)le+=Math.random().toString().slice(2);return le}();c["Content-Type"]="multipart/related; boundary="+p;const m=Yl(t,i,r),y=zD(m,e),x=io.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+y+"\r\n--"+p+"\r\nContent-Type: "+m.contentType+"\r\n\r\n",i,"\r\n--"+p+"--");if(null===x)throw zh();const P={name:m.fullPath},V=fd(s,n.host,n._protocol),te=n.maxUploadRetryTime,se=new ps(V,"POST",u0(n,e),te);return se.urlParams=P,se.headers=c,se.body=x.uploadData(),se.errorHandler=$p(t),se}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,nl,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=cd(),this._state=t,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const t=v1(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,i,r){const s=new ZB(e||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch(v1(this._state)){case As.SUCCESS:Yh(this._resolve.bind(null,this.snapshot))();break;case As.CANCELED:case As.ERROR:Yh(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(v1(this._state)){case As.RUNNING:case As.PAUSED:t.next&&Yh(t.next.bind(t,this.snapshot))();break;case As.SUCCESS:t.complete&&Yh(t.complete.bind(t))();break;default:t.error&&Yh(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}class Yo{constructor(t,e){this._service=t,this._location=e instanceof Xr?e:Xr.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new Yo(t,e)}get root(){const t=new Xr(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return c1(this._location.path)}get storage(){return this._service}get parent(){const t=function FO(n){if(0===n.length)return null;const t=n.lastIndexOf("/");return-1===t?"":n.slice(0,t)}(this._location.path);if(null===t)return null;const e=new Xr(this._location.bucket,t);return new Yo(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw n0(t)}}function T1(n,t,e){return ZD.apply(this,arguments)}function ZD(){return(ZD=(0,Ee.Z)(function*(n,t,e){const r=yield KD(n,{pageToken:e});t.prefixes.push(...r.prefixes),t.items.push(...r.items),null!=r.nextPageToken&&(yield T1(n,t,r.nextPageToken))})).apply(this,arguments)}function KD(n,t){null!=t&&"number"==typeof t.maxResults&&kD("options.maxResults",1,1e3,t.maxResults);const e=t||{},i=g1(n.storage,n._location,"/",e.pageToken,e.maxResults);return n.storage.makeRequestWithTokens(i,nl)}function f_(n){n._throwIfRoot("getDownloadURL");const t=function HO(n,t,e){const r=fd(t.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,d=new ps(r,"GET",function UO(n,t){return function e(i,r){const s=$D(n,r,t);return so(null!==s),function qh(n,t,e,i){const r=jD(t);if(null===r||!ql(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const c=encodeURIComponent;return s.split(",").map(m=>{const T=n.fullPath;return fd("/b/"+c(n.bucket)+"/o/"+c(T),e,i)+l_({alt:"media",token:m})})[0]}(s,r,n.host,n._protocol)}}(n,e),c);return d.errorHandler=d_(t),d}(n.storage,n._location,Wh());return n.storage.makeRequestWithTokens(t,nl).then(e=>{if(null===e)throw function e0(){return new M(O.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return e})}function Wp(n,t){const e=function WB(n,t){const e=t.split("/").filter(i=>i.length>0).join("/");return 0===n.length?e:n+"/"+e}(n._location.path,t),i=new Xr(n._location.bucket,e);return new Yo(n.storage,i)}function p0(n,t){if(n instanceof g0){const e=n;if(null==e._bucket)throw function o_(){return new M(O.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+b+"' property when initializing the app?")}();const i=new Yo(e,e._bucket);return null!=t?p0(i,t):i}return void 0!==t?Wp(n,t):n}function QD(n,t){if(t&&function I1(n){return/^[A-Za-z]+:\/\//.test(n)}(t)){if(n instanceof g0)return function S1(n,t){return new Yo(n,t)}(n,t);throw Wl("To use ref(service, url), the first argument must be a Storage instance.")}return p0(n,t)}function A1(n,t){const e=t?.[b];return null==e?null:Xr.makeFromBucketSpec(e,n)}class g0{constructor(t,e,i,r,s){this.app=t,this._authProvider=e,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=s_,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Xr.makeFromBucketSpec(r,this._host):A1(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?Xr.makeFromBucketSpec(this._url,t):A1(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){kD("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){kD("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return(0,Ee.Z)(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const e=t._authProvider.getImmediate({optional:!0});if(e){const i=yield e.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var t=this;return(0,Ee.Z)(function*(){const e=t._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Yo(this,t)}_makeRequest(t,e,i,r,s=!0){if(this._deleted)return new ND(a_());{const c=function r1(n,t,e,i,r,s,c=!0){const d=l_(n.urlParams),p=n.url+d,m=Object.assign({},n.headers);return function s0(n,t){t&&(n["X-Firebase-GMPID"]=t)}(m,t),function FD(n,t){null!==t&&t.length>0&&(n.Authorization="Firebase "+t)}(m,e),function i1(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}(m,s),function u_(n,t){null!==t&&(n["X-Firebase-AppCheck"]=t)}(m,i),new n1(p,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,c)}(t,this._appId,i,r,e,this._firebaseVersion,s);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(t,e){var i=this;return(0,Ee.Z)(function*(){const[r,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(t,e,r,s).getPromise()})()}}const p_="@firebase/storage";function g_(n,t){return QD(n=(0,L.m9)(n),t)}function R1(n,{instanceIdentifier:t}){const e=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new g0(e,i,r,t,oi.SDK_VERSION)}!function qp(){(0,oi._registerComponent)(new mr.wA("storage",R1,"PUBLIC").setMultipleInstances(!0)),(0,oi.registerVersion)(p_,"0.11.2",""),(0,oi.registerVersion)(p_,"0.11.2","esm2017")}();class y0{constructor(t,e,i){this._delegate=t,this.task=e,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class O1{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new y0(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(i=>{if(t)return t(new y0(i,this,this._ref))},e)}on(t,e,i,r){let s;return e&&(s="function"==typeof e?c=>e(new y0(c,this,this._ref)):{next:e.next?c=>e.next(new y0(c,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,s,i||void 0,r||void 0)}}class k1{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new il(t,this._service))}get items(){return this._delegate.items.map(t=>new il(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class il{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=function Zl(n,t){return Wp(n,t)}(this._delegate,t);return new il(e,this.storage)}get root(){return new il(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new il(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new O1(function x1(n,t,e){return function C1(n,t,e){return n._throwIfRoot("uploadBytesResumable"),new D1(n,new io(t),e)}(n=(0,L.m9)(n),t,e)}(this._delegate,t,e),this)}putString(t,e=Ss.RAW,i){this._throwIfRoot("putString");const r=a0(e,t),s=Object.assign({},i);return null==s.contentType&&null!=r.contentType&&(s.contentType=r.contentType),new O1(new D1(this._delegate,new io(r.data,!0),s),this)}listAll(){return function _0(n){return function ZO(n){const t={prefixes:[],items:[]};return T1(n,t).then(()=>t)}(n=(0,L.m9)(n))}(this._delegate).then(t=>new k1(t,this.storage))}list(t){return function JD(n,t){return KD(n=(0,L.m9)(n),t)}(this._delegate,t||void 0).then(e=>new k1(e,this.storage))}getMetadata(){return function Zh(n){return function KB(n){n._throwIfRoot("getMetadata");const t=p1(n.storage,n._location,Wh());return n.storage.makeRequestWithTokens(t,nl)}(n=(0,L.m9)(n))}(this._delegate)}updateMetadata(t){return function JO(n,t){return function QB(n,t){n._throwIfRoot("updateMetadata");const e=function jO(n,t,e,i){const s=fd(t.fullServerUrl(),n.host,n._protocol),d=zD(e,i),m=n.maxOperationRetryTime,y=new ps(s,"PATCH",u0(n,i),m);return y.headers={"Content-Type":"application/json; charset=utf-8"},y.body=d,y.errorHandler=d_(t),y}(n.storage,n._location,t,Wh());return n.storage.makeRequestWithTokens(e,nl)}(n=(0,L.m9)(n),t)}(this._delegate,t)}getDownloadURL(){return function XO(n){return f_(n=(0,L.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function XD(n){return function qn(n){n._throwIfRoot("deleteObject");const t=function GO(n,t){const i=fd(t.fullServerUrl(),n.host,n._protocol),d=new ps(i,"DELETE",function c(p,m){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=d_(t),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(t,nl)}(n=(0,L.m9)(n))}(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw n0(t)}}class tE{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(P1(t))throw Wl("ref() expected a child path but got a URL, use refFromURL instead.");return new il(g_(this._delegate,t),this)}refFromURL(t){if(!P1(t))throw Wl("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Xr.makeFromUrl(t,this._delegate.host)}catch{throw Wl("refFromUrl() expected a valid full URL but got an invalid one.")}return new il(g_(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,i={}){!function v0(n,t,e,i={}){!function M1(n,t,e,i={}){n.host=`${t}:${e}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:(0,L.Sg)(r,n.app.options.projectId))}(n,t,e,i)}(this._delegate,t,e,i)}}function P1(n){return/^[A-Za-z]+:\/\//.test(n)}function ek(n,{instanceIdentifier:t}){const e=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:t});return new tE(e,i)}function ik(n){const t=function nk(n){return new Ti.y(t=>{const e=c=>t.next(c);e(n.snapshot);const s=n.on("state_changed",e);return n.then(c=>{e(c),t.complete()},c=>{e(n.snapshot),(c=>{t.error(c)})(c)}),function(){s()}}).pipe(function Up(n,t=Mr.z){return(0,$i.e)((e,i)=>{let r=null,s=null,c=null;const d=()=>{if(r){r.unsubscribe(),r=null;const m=s;s=null,i.next(m)}};function p(){const m=c+n,y=t.now();if(y<m)return r=this.schedule(void 0,m-y),void i.add(r);d()}e.subscribe((0,_i.x)(i,m=>{s=m,c=t.now(),r||(r=t.schedule(p,n),i.add(r))},()=>{d(),i.complete()},void 0,()=>{s=r=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,at.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function iE(n){return{getDownloadURL:()=>(0,Mt.of)(void 0).pipe(dn.fc,(0,Jn.w)(()=>n.getDownloadURL()),dn.iC),getMetadata:()=>(0,Mt.of)(void 0).pipe(dn.fc,(0,Jn.w)(()=>n.getMetadata()),dn.iC),delete:()=>(0,Hn.D)(n.delete()),child:t=>iE(n.child(t)),updateMetadata:t=>(0,Hn.D)(n.updateMetadata(t)),put:(t,e)=>ik(n.put(t,e)),putString:(t,e,i)=>ik(n.putString(t,e,i)),list:t=>(0,Hn.D)(n.list(t)),listAll:()=>(0,Hn.D)(n.listAll())}}!function tk(n){const t={TaskState:As,TaskEvent:WD,StringFormat:Ss,Storage:tE,Reference:il};n.INTERNAL.registerComponent(new mr.wA("storage-compat",ek,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(MD);const w0=new l.OlP("angularfire2.storageBucket"),rk=new l.OlP("angularfire2.storage.maxUploadRetryTime"),rE=new l.OlP("angularfire2.storage.maxOperationRetryTime"),sE=new l.OlP("angularfire2.storage.use-emulator");let Yp=(()=>{class n{constructor(e,i,r,s,c,d,p,m,y,T){const A=(0,si.on)(e,c,i);this.storage=(0,si.cc)(`${A.name}.storage.${r}`,"AngularFireStorage",A.name,()=>{const x=c.runOutsideAngular(()=>A.storage(r||void 0)),P=y;return P&&x.useEmulator(...P),p&&x.setMaxUploadRetryTime(p),m&&x.setMaxOperationRetryTime(m),x},[p,m])}ref(e){return iE(this.storage.ref(e))}refFromURL(e){return iE(this.storage.refFromURL(e))}upload(e,i,r){return iE(this.storage.ref(e)).put(i,r)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(si.Dh),l.LFG(si.xv,8),l.LFG(w0,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(dn.HU),l.LFG(rk,8),l.LFG(rE,8),l.LFG(sE,8),l.LFG(Hh,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),oE=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),m_=(()=>{class n{constructor(){jc.Z.registerVersion("angularfire",dn.q4.full,"gcs-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Yp],imports:[oE]}),n})();var pd=F(7537),Zc=F(9940);function Kh(...n){return function Zp(){return(0,pd.J)(1)}()((0,Hn.D)(n,(0,Zc.yG)(n)))}function Kl(...n){const t=(0,Zc.yG)(n);return(0,$i.e)((e,i)=>{(t?Kh(n,e,t):Kh(n,e)).subscribe(i)})}function __(){return(0,$i.e)((n,t)=>{let e,i=!1;n.subscribe((0,_i.x)(t,r=>{const s=e;e=r,i&&t.next([s,r]),i=!0}))})}function b0(n,t,e,i,r){return(s,c)=>{let d=e,p=t,m=0;s.subscribe((0,_i.x)(c,y=>{const T=m++;p=d?n(p,y,T):(d=!0,y),i&&c.next(p)},r&&(()=>{d&&c.next(p),c.complete()})))}}function Ql(n,t){return(0,$i.e)(b0(n,t,arguments.length>=2,!0))}var bt,D0=F(3997),B1=(F(8977),F(3399)),gd=F(7592),aE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ya={},lE=lE||{},un=aE||self;function E0(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function md(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var uE="closure_uid_"+(1e9*Math.random()>>>0),V1=0;function dE(n,t,e){return n.call.apply(n.bind,arguments)}function C0(n,t,e){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(t,r)}}return function(){return n.apply(t,arguments)}}function $s(n,t,e){return($s=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?dE:C0).apply(null,arguments)}function v_(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var i=e.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function gs(n,t){function e(){}e.prototype=t.prototype,n.$=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.ac=function(i,r,s){for(var c=Array(arguments.length-2),d=2;d<arguments.length;d++)c[d-2]=arguments[d];return t.prototype[r].apply(i,c)}}function Kc(){this.s=this.s,this.o=this.o}Kc.prototype.s=!1,Kc.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function cE(n){Object.prototype.hasOwnProperty.call(n,uE)&&n[uE]||(n[uE]=++V1)}(this)},Kc.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const U1=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1};function Qh(n){const t=n.length;if(0<t){const e=Array(t);for(let i=0;i<t;i++)e[i]=n[i];return e}return[]}function H1(n,t){for(let e=1;e<arguments.length;e++){const i=arguments[e];if(E0(i)){const r=n.length||0,s=i.length||0;n.length=r+s;for(let c=0;c<s;c++)n[r+c]=i[c]}else n.push(i)}}function Nr(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}Nr.prototype.h=function(){this.defaultPrevented=!0};var y_=function(){if(!un.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{un.addEventListener("test",()=>{},t),un.removeEventListener("test",()=>{},t)}catch{}return n}();function w_(n){return/^[\s\xa0]*$/.test(n)}function b_(){var n=un.navigator;return n&&(n=n.userAgent)?n:""}function Jl(n){return-1!=b_().indexOf(n)}function hE(n){return hE[" "](n),n}hE[" "]=function(){};var fE,n,j1=Jl("Opera"),Jh=Jl("Trident")||Jl("MSIE"),T0=Jl("Edge"),G1=T0||Jh,I0=Jl("Gecko")&&!(-1!=b_().toLowerCase().indexOf("webkit")&&!Jl("Edge"))&&!(Jl("Trident")||Jl("MSIE"))&&!Jl("Edge"),$1=-1!=b_().toLowerCase().indexOf("webkit")&&!Jl("Edge");function z1(){var n=un.document;return n?n.documentMode:void 0}e:{var S0="",pE=(n=b_(),I0?/rv:([^\);]+)(\)|;)/.exec(n):T0?/Edge\/([\d\.]+)/.exec(n):Jh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):$1?/WebKit\/(\S+)/.exec(n):j1?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(pE&&(S0=pE?pE[1]:""),Jh){var A0=z1();if(null!=A0&&A0>parseFloat(S0)){fE=String(A0);break e}}fE=S0}var iV=un.document&&Jh&&(z1()||parseInt(fE,10))||void 0;function Kp(n,t){if(Nr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(I0){e:{try{hE(t.nodeName);var r=!0;break e}catch{}r=!1}r||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:q1[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Kp.$.h.call(this)}}gs(Kp,Nr);var q1={2:"touch",3:"pen",4:"mouse"};Kp.prototype.h=function(){Kp.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var oo="closure_listenable_"+(1e6*Math.random()|0),Y1=0;function rV(n,t,e,i,r){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!i,this.la=r,this.key=++Y1,this.fa=this.ia=!1}function Qp(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Xl(n,t,e){for(const i in n)t.call(e,n[i],i,n)}function Z1(n){const t={};for(const e in n)t[e]=n[e];return t}const ak="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function K1(n,t){let e,i;for(let r=1;r<arguments.length;r++){for(e in i=arguments[r],i)n[e]=i[e];for(let s=0;s<ak.length;s++)e=ak[s],Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])}}function Jp(n){this.src=n,this.g={},this.h=0}function wa(n,t){var e=t.type;if(e in n.g){var s,i=n.g[e],r=U1(i,t);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(Qp(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function M0(n,t,e,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.fa&&s.listener==t&&s.capture==!!e&&s.la==i)return r}return-1}Jp.prototype.add=function(n,t,e,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var c=M0(n,t,i,r);return-1<c?(t=n[c],e||(t.ia=!1)):((t=new rV(t,this.src,s,!!i,r)).ia=e,n.push(t)),t};var _E="closure_lm_"+(1e6*Math.random()|0),Q1={};function es(n,t,e,i,r){if(i&&i.once)return X1(n,t,e,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)es(n,t[s],e,i,r);return null}return e=x0(e),n&&n[oo]?n.O(t,e,md(i)?!!i.capture:!!i,r):J1(n,t,e,!1,i,r)}function J1(n,t,e,i,r,s){if(!t)throw Error("Invalid event type");var c=md(r)?!!r.capture:!!r,d=wE(n);if(d||(n[_E]=d=new Jp(n)),(e=d.add(t,e,i,c,s)).proxy)return e;if(i=function vE(){const t=tA;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=i,i.src=n,i.listener=e,n.addEventListener)y_||(r=c),void 0===r&&(r=!1),n.addEventListener(t.toString(),i,r);else if(n.attachEvent)n.attachEvent(yE(t.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return e}function X1(n,t,e,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)X1(n,t[s],e,i,r);return null}return e=x0(e),n&&n[oo]?n.P(t,e,md(i)?!!i.capture:!!i,r):J1(n,t,e,!0,i,r)}function eA(n,t,e,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)eA(n,t[s],e,i,r);else i=md(i)?!!i.capture:!!i,e=x0(e),n&&n[oo]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=M0(s=n.g[t],e,i,r))&&(Qp(s[e]),Array.prototype.splice.call(s,e,1),0==s.length&&(delete n.g[t],n.h--))):n&&(n=wE(n))&&(t=n.g[t.toString()],n=-1,t&&(n=M0(t,e,i,r)),(e=-1<n?t[n]:null)&&D_(e))}function D_(n){if("number"!=typeof n&&n&&!n.fa){var t=n.src;if(t&&t[oo])wa(t.i,n);else{var e=n.type,i=n.proxy;t.removeEventListener?t.removeEventListener(e,i,n.capture):t.detachEvent?t.detachEvent(yE(e),i):t.addListener&&t.removeListener&&t.removeListener(i),(e=wE(t))?(wa(e,n),0==e.h&&(e.src=null,t[_E]=null)):Qp(n)}}}function yE(n){return n in Q1?Q1[n]:Q1[n]="on"+n}function tA(n,t){if(n.fa)n=!0;else{t=new Kp(t,this);var e=n.listener,i=n.la||n.src;n.ia&&D_(n),n=e.call(i,t)}return n}function wE(n){return(n=n[_E])instanceof Jp?n:null}var N0="__closure_events_fn_"+(1e9*Math.random()>>>0);function x0(n){return"function"==typeof n?n:(n[N0]||(n[N0]=function(t){return n.handleEvent(t)}),n[N0])}function ms(){Kc.call(this),this.i=new Jp(this),this.S=this,this.J=null}function Ms(n,t){var e,i=n.J;if(i)for(e=[];i;i=i.J)e.push(i);if(n=n.S,i=t.type||t,"string"==typeof t)t=new Nr(t,n);else if(t instanceof Nr)t.target=t.target||n;else{var r=t;K1(t=new Nr(i,n),r)}if(r=!0,e)for(var s=e.length-1;0<=s;s--){var c=t.g=e[s];r=R0(c,i,!0,t)&&r}if(r=R0(c=t.g=n,i,!0,t)&&r,r=R0(c,i,!1,t)&&r,e)for(s=0;s<e.length;s++)r=R0(c=t.g=e[s],i,!1,t)&&r}function R0(n,t,e,i){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var c=t[s];if(c&&!c.fa&&c.capture==e){var d=c.listener,p=c.la||c.src;c.ia&&wa(n.i,c),r=!1!==d.call(p,i)&&r}}return r&&!i.defaultPrevented}gs(ms,Kc),ms.prototype[oo]=!0,ms.prototype.removeEventListener=function(n,t,e,i){eA(this,n,t,e,i)},ms.prototype.N=function(){if(ms.$.N.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],i=0;i<e.length;i++)Qp(e[i]);delete n.g[t],n.h--}}this.J=null},ms.prototype.O=function(n,t,e,i){return this.i.add(String(n),t,!1,e,i)},ms.prototype.P=function(n,t,e,i){return this.i.add(String(n),t,!0,e,i)};var O0=un.JSON.stringify;function Qc(){var n=tg;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var nA=new class Xp{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new lk,n=>n.reset());class lk{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function iA(n){var t=1;n=n.split(":");const e=[];for(;0<t&&n.length;)e.push(n.shift()),t--;return n.length&&e.push(n.join(":")),e}function rA(n){un.setTimeout(()=>{throw n},0)}let Xh,Jc=!1,tg=new class eg{constructor(){this.h=this.g=null}add(t,e){const i=nA.get();i.set(t,e),this.h?this.h.next=i:this.g=i,this.h=i}},bE=()=>{const n=un.Promise.resolve(void 0);Xh=()=>{n.then(sA)}};var sA=()=>{for(var n;n=Qc();){try{n.h.call(n.g)}catch(e){rA(e)}var t=nA;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}Jc=!1};function k0(n,t){ms.call(this),this.h=n||1,this.g=t||un,this.j=$s(this.qb,this),this.l=Date.now()}function DE(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function EE(n,t,e){if("function"==typeof n)e&&(n=$s(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=$s(n.handleEvent,n)}return 2147483647<Number(t)?-1:un.setTimeout(n,t||0)}function oA(n){n.g=EE(()=>{n.g=null,n.i&&(n.i=!1,oA(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}gs(k0,ms),(bt=k0.prototype).ga=!1,bt.T=null,bt.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ms(this,"tick"),this.ga&&(DE(this),this.start()))}},bt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},bt.N=function(){k0.$.N.call(this),DE(this),delete this.g};class aA extends Kc{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:oA(this)}N(){super.N(),this.g&&(un.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function P0(n){Kc.call(this),this.h=n,this.g={}}gs(P0,Kc);var lA=[];function ck(n,t,e,i){Array.isArray(e)||(e&&(lA[0]=e.toString()),e=lA);for(var r=0;r<e.length;r++){var s=es(t,e[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function uk(n){Xl(n.g,function(t,e){this.g.hasOwnProperty(e)&&D_(t)},n),n.g={}}function E_(){this.g=!0}function Xc(n,t,e,i){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function uA(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var i=e[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var c=1;c<r.length;c++)r[c]=""}}}return O0(e)}catch{return t}}(n,e)+(i?" "+i:"")})}P0.prototype.N=function(){P0.$.N.call(this),uk(this)},P0.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},E_.prototype.Ea=function(){this.g=!1},E_.prototype.info=function(){};var _d={},dA=null;function C_(){return dA=dA||new ms}function CE(n){Nr.call(this,_d.Ta,n)}function rn(n){const t=C_();Ms(t,new CE(t))}function TE(n,t){Nr.call(this,_d.STAT_EVENT,n),this.stat=t}function zs(n){const t=C_();Ms(t,new TE(t,n))}function ef(n,t){Nr.call(this,_d.Ua,n),this.size=t}function ng(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return un.setTimeout(function(){n()},t)}_d.Ta="serverreachability",gs(CE,Nr),_d.STAT_EVENT="statevent",gs(TE,Nr),_d.Ua="timingevent",gs(ef,Nr);var F0={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},T_={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function vd(){}function ig(){}vd.prototype.h=null;var A_,rg={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function I_(){Nr.call(this,"d")}function S_(){Nr.call(this,"c")}function M_(){}function tf(n,t,e,i){this.l=n,this.j=t,this.m=e,this.W=i||1,this.U=new P0(this),this.P=dk,this.V=new k0(n=G1?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new hA}function hA(){this.i=null,this.g="",this.h=!1}gs(I_,Nr),gs(S_,Nr),gs(M_,vd),M_.prototype.g=function(){return new XMLHttpRequest},M_.prototype.i=function(){return{}},A_=new M_;var dk=45e3,IE={},N_={};function SE(n,t,e){n.L=1,n.v=j0(ec(t)),n.s=e,n.S=!0,fA(n,null)}function fA(n,t){n.G=Date.now(),sg(n),n.A=ec(n.v);var e=n.A,i=n.W;Array.isArray(i)||(i=[String(i)]),mk(e.i,"t",i),n.C=0,e=n.l.J,n.h=new hA,n.g=FA(n.l,e?t:null,!n.s),0<n.O&&(n.M=new aA($s(n.Pa,n,n.g),n.O)),ck(n.U,n.g,"readystatechange",n.nb),t=n.I?Z1(n.I):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,t)):(n.u="GET",n.g.ha(n.A,n.u,null,t)),rn(),function cA(n,t,e,i,r,s){n.info(function(){if(n.g)if(s)for(var c="",d=s.split("&"),p=0;p<d.length;p++){var m=d[p].split("=");if(1<m.length){var y=m[0];m=m[1];var T=y.split("_");c=2<=T.length&&"type"==T[1]?c+(y+"=")+m+"&":c+(y+"=redacted&")}}else c=null;else c=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+e+"\n"+c})}(n.j,n.u,n.A,n.m,n.W,n.s)}function pA(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function gA(n,t,e){let r,i=!0;for(;!n.J&&n.C<e.length;){if(r=mA(n,e),r==N_){4==t&&(n.o=4,zs(14),i=!1),Xc(n.j,n.m,null,"[Incomplete Response]");break}if(r==IE){n.o=4,zs(15),Xc(n.j,n.m,e,"[Invalid Chunk]"),i=!1;break}Xc(n.j,n.m,r,null),AE(n,r)}pA(n)&&r!=N_&&r!=IE&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,zs(16),i=!1),n.i=n.i&&i,i?0<e.length&&!n.ba&&(n.ba=!0,(t=n.l).g==n&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+e.length),J0(t),t.M=!0,zs(11))):(Xc(n.j,n.m,e,"[Invalid Chunked Response]"),nf(n),Ns(n))}function mA(n,t){var e=n.C,i=t.indexOf("\n",e);return-1==i?N_:(e=Number(t.substring(e,i)),isNaN(e)?IE:(i+=1)+e>t.length?N_:(t=t.slice(i,i+e),n.C=i+e,t))}function sg(n){n.Y=Date.now()+n.P,_A(n,n.P)}function _A(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=ng($s(n.lb,n),t)}function B0(n){n.B&&(un.clearTimeout(n.B),n.B=null)}function Ns(n){0==n.l.H||n.J||bk(n.l,n)}function nf(n){B0(n);var t=n.M;t&&"function"==typeof t.sa&&t.sa(),n.M=null,DE(n.V),uk(n.U),n.g&&(t=n.g,n.g=null,t.abort(),t.sa())}function AE(n,t){try{var e=n.l;if(0!=e.H&&(e.g==n||kE(e.i,n)))if(!n.K&&kE(e.i,n)&&3==e.H){try{var i=e.Ja.g.parse(t)}catch{i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!e.u){if(e.g){if(!(e.g.G+3e3<n.G))break e;X0(e),Z0(e)}Q0(e),zs(18)}}else e.Fa=r[1],0<e.Fa-e.V&&37500>r[2]&&e.G&&0==e.A&&!e.v&&(e.v=ng($s(e.ib,e),6e3));if(1>=DA(e.i)&&e.oa){try{e.oa()}catch{}e.oa=void 0}}else yd(e,11)}else if((n.K||e.g==n)&&X0(e),!w_(t))for(r=e.Ja.g.parse(t),t=0;t<r.length;t++){let m=r[t];if(e.V=m[0],m=m[1],2==e.H)if("c"==m[0]){e.K=m[1],e.pa=m[2];const y=m[3];null!=y&&(e.ra=y,e.l.info("VER="+e.ra));const T=m[4];null!=T&&(e.Ga=T,e.l.info("SVER="+e.Ga));const A=m[5];null!=A&&"number"==typeof A&&0<A&&(e.L=i=1.5*A,e.l.info("backChannelRequestTimeoutMs_="+i)),i=e;const x=n.g;if(x){const P=x.g?x.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(P){var s=i.i;s.g||-1==P.indexOf("spdy")&&-1==P.indexOf("quic")&&-1==P.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(k_(s,s.h),s.h=null))}if(i.F){const V=x.g?x.g.getResponseHeader("X-HTTP-Session-Id"):null;V&&(i.Da=V,Ri(i.I,i.F,V))}}e.H=3,e.h&&e.h.Ba(),e.ca&&(e.S=Date.now()-n.G,e.l.info("Handshake RTT: "+e.S+"ms"));var c=n;if((i=e).wa=j_(i,i.J?i.pa:null,i.Y),c.K){EA(i.i,c);var d=c,p=i.L;p&&d.setTimeout(p),d.B&&(B0(d),sg(d)),i.g=c}else PA(i);0<e.j.length&&K0(e)}else"stop"!=m[0]&&"close"!=m[0]||yd(e,7);else 3==e.H&&("stop"==m[0]||"close"==m[0]?"stop"==m[0]?yd(e,7):V_(e):"noop"!=m[0]&&e.h&&e.h.Aa(m),e.A=0)}rn()}catch{}}function NE(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if(E0(n)||"string"==typeof n)Array.prototype.forEach.call(n,t,void 0);else for(var e=function ME(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(E0(n)||"string"==typeof n){var t=[];n=n.length;for(var e=0;e<n;e++)t.push(e);return t}t=[],e=0;for(const i in n)t[e++]=i;return t}}}(n),i=function aV(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(E0(n)){for(var t=[],e=n.length,i=0;i<e;i++)t.push(n[i]);return t}for(i in t=[],e=0,n)t[e++]=n[i];return t}(n),r=i.length,s=0;s<r;s++)t.call(void 0,i[s],e&&e[s],n)}(bt=tf.prototype).setTimeout=function(n){this.P=n},bt.nb=function(n){n=n.target;const t=this.M;t&&3==nc(n)?t.l():this.Pa(n)},bt.Pa=function(n){try{if(n==this.g)e:{const y=nc(this.g);var t=this.g.Ia();if(this.g.da(),!(3>y)&&(3!=y||G1||this.g&&(this.h.h||this.g.ja()||xA(this.g)))){this.J||4!=y||7==t||rn(),B0(this);var e=this.g.da();this.ca=e;t:if(pA(this)){var i=xA(this.g);n="";var r=i.length,s=4==nc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){nf(this),Ns(this);var c="";break t}this.h.i=new un.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,n+=this.h.i.decode(i[t],{stream:s&&t==r-1});i.splice(0,r),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ja();if(this.i=200==e,function sV(n,t,e,i,r,s,c){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+e+"\n"+s+" "+c})}(this.j,this.u,this.A,this.m,this.W,y,e),this.i){if(this.aa&&!this.K){t:{if(this.g){var d,p=this.g;if((d=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w_(d)){var m=d;break t}}m=null}if(!(e=m)){this.i=!1,this.o=3,zs(12),nf(this),Ns(this);break e}Xc(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,AE(this,e)}this.S?(gA(this,y,c),G1&&this.i&&3==y&&(ck(this.U,this.V,"tick",this.mb),this.V.start())):(Xc(this.j,this.m,c,null),AE(this,c)),4==y&&nf(this),this.i&&!this.J&&(4==y?bk(this.l,this):(this.i=!1,sg(this)))}else(function yk(n){const t={};n=(n.g&&2<=nc(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<n.length;i++){if(w_(n[i]))continue;var e=iA(n[i]);const r=e[0];if("string"!=typeof(e=e[1]))continue;e=e.trim();const s=t[r]||[];t[r]=s,s.push(e)}!function mE(n,t){for(const e in n)t.call(void 0,n[e],e,n)}(t,function(i){return i.join(", ")})})(this.g),400==e&&0<c.indexOf("Unknown SID")?(this.o=3,zs(12)):(this.o=0,zs(13)),nf(this),Ns(this)}}}catch{}},bt.mb=function(){if(this.g){var n=nc(this.g),t=this.g.ja();this.C<t.length&&(B0(this),gA(this,n,t),this.i&&4!=n&&sg(this))}},bt.cancel=function(){this.J=!0,nf(this)},bt.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function oV(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.L&&(rn(),zs(17)),nf(this),this.o=2,Ns(this)):_A(this,this.Y-n)};var vA=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rf(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof rf){this.h=n.h,V0(this,n.j),this.s=n.s,this.g=n.g,U0(this,n.m),this.l=n.l;var t=n.i,e=new og;e.i=t.i,t.g&&(e.g=new Map(t.g),e.h=t.h),H0(this,e),this.o=n.o}else n&&(t=String(n).match(vA))?(this.h=!1,V0(this,t[1]||"",!0),this.s=x_(t[2]||""),this.g=x_(t[3]||"",!0),U0(this,t[4]),this.l=x_(t[5]||"",!0),H0(this,t[6]||"",!0),this.o=x_(t[7]||"")):(this.h=!1,this.i=new og(null,this.h))}function ec(n){return new rf(n)}function V0(n,t,e){n.j=e?x_(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function U0(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function H0(n,t,e){t instanceof og?(n.i=t,function wA(n,t){t&&!n.j&&(eu(n),n.i=null,n.g.forEach(function(e,i){var r=i.toLowerCase();i!=r&&(O_(this,i),mk(this,r,e))},n)),n.j=t}(n.i,n.h)):(e||(t=R_(t,yA)),n.i=new og(t,n.h))}function Ri(n,t,e){n.i.set(t,e)}function j0(n){return Ri(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function x_(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function R_(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,fk),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function fk(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}rf.prototype.toString=function(){var n=[],t=this.j;t&&n.push(R_(t,rl,!0),":");var e=this.g;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(R_(t,rl,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.g&&"/"!=e.charAt(0)&&n.push("/"),n.push(R_(e,"/"==e.charAt(0)?pk:xE,!0))),(e=this.i.toString())&&n.push("?",e),(e=this.o)&&n.push("#",R_(e,gk)),n.join("")};var rl=/[#\/\?@]/g,xE=/[#\?:]/g,pk=/[#\?]/g,yA=/[#\?@]/g,gk=/#/g;function og(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function eu(n){n.g||(n.g=new Map,n.h=0,n.i&&function hk(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var i=n[e].indexOf("="),r=null;if(0<=i){var s=n[e].substring(0,i);r=n[e].substring(i+1)}else s=n[e];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function O_(n,t){eu(n),t=sf(n,t),n.g.has(t)&&(n.i=null,n.h-=n.g.get(t).length,n.g.delete(t))}function G0(n,t){return eu(n),t=sf(n,t),n.g.has(t)}function mk(n,t,e){O_(n,t),0<e.length&&(n.i=null,n.g.set(sf(n,t),Qh(e)),n.h+=e.length)}function sf(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function RE(n){this.l=n||OE,n=un.PerformanceNavigationTiming?0<(n=un.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(un.g&&un.g.Ka&&un.g.Ka()&&un.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(bt=og.prototype).add=function(n,t){eu(this),this.i=null,n=sf(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},bt.forEach=function(n,t){eu(this),this.g.forEach(function(e,i){e.forEach(function(r){n.call(t,r,i,this)},this)},this)},bt.ta=function(){eu(this);const n=Array.from(this.g.values()),t=Array.from(this.g.keys()),e=[];for(let i=0;i<t.length;i++){const r=n[i];for(let s=0;s<r.length;s++)e.push(t[i])}return e},bt.Z=function(n){eu(this);let t=[];if("string"==typeof n)G0(this,n)&&(t=t.concat(this.g.get(sf(this,n))));else{n=Array.from(this.g.values());for(let e=0;e<n.length;e++)t=t.concat(n[e])}return t},bt.set=function(n,t){return eu(this),this.i=null,G0(this,n=sf(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},bt.get=function(n,t){return n&&0<(n=this.Z(n)).length?String(n[0]):t},bt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],t=Array.from(this.g.keys());for(var e=0;e<t.length;e++){var i=t[e];const s=encodeURIComponent(String(i)),c=this.Z(i);for(i=0;i<c.length;i++){var r=s;""!==c[i]&&(r+="="+encodeURIComponent(String(c[i]))),n.push(r)}}return this.i=n.join("&")};var OE=10;function tc(n){return!!n.h||!!n.g&&n.g.size>=n.j}function DA(n){return n.h?1:n.g?n.g.size:0}function kE(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function k_(n,t){n.g?n.g.add(t):n.h=t}function EA(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function PE(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.F);return t}return Qh(n.i)}RE.prototype.cancel=function(){if(this.i=PE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var _k=class{stringify(n){return un.JSON.stringify(n,void 0)}parse(n){return un.JSON.parse(n,void 0)}};function $0(){this.g=new _k}function P_(n,t,e){const i=e||"";try{NE(n,function(r,s){let c=r;md(r)&&(c=O0(r)),t.push(i+s+"="+encodeURIComponent(c))})}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function af(n,t,e,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch{}}function z0(n){this.l=n.fc||null,this.j=n.ob||!1}function W0(n,t){ms.call(this),this.F=n,this.u=t,this.m=void 0,this.readyState=q0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}gs(z0,vd),z0.prototype.g=function(){return new W0(this.l,this.j)},z0.prototype.i=function(n){return function(){return n}}({}),gs(W0,ms);var q0=0;function FE(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function F_(n){n.readyState=4,n.l=null,n.j=null,n.A=null,L_(n)}function L_(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(bt=W0.prototype).open=function(n,t){if(this.readyState!=q0)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,L_(this)},bt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.F||un).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},bt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,F_(this)),this.readyState=q0},bt.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,L_(this)),this.g&&(this.readyState=3,L_(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof un.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;FE(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},bt.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?F_(this):L_(this),3==this.readyState&&FE(this)}},bt.Za=function(n){this.g&&(this.response=this.responseText=n,F_(this))},bt.Ya=function(n){this.g&&(this.response=n,F_(this))},bt.ka=function(){this.g&&F_(this)},bt.setRequestHeader=function(n,t){this.v.append(n,t)},bt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},bt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(W0.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var TA=un.JSON.parse;function nr(n){ms.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ag,this.L=this.M=!1}gs(nr,ms);var ag="",vk=/^https?$/i,IA=["POST","PUT"];function AA(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,MA(n),Y0(n)}function MA(n){n.F||(n.F=!0,Ms(n,"complete"),Ms(n,"error"))}function lg(n){if(n.h&&typeof lE<"u"&&(!n.C[1]||4!=nc(n)||2!=n.da()))if(n.v&&4==nc(n))EE(n.La,0,n);else if(Ms(n,"readystatechange"),4==nc(n)){n.h=!1;try{const c=n.da();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var i;if(i=0===c){var r=String(n.I).match(vA)[1]||null;!r&&un.self&&un.self.location&&(r=un.self.location.protocol.slice(0,-1)),i=!vk.test(r?r.toLowerCase():"")}e=i}if(e)Ms(n,"complete"),Ms(n,"success");else{n.m=6;try{var s=2<nc(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",MA(n)}}finally{Y0(n)}}}function Y0(n,t){if(n.g){NA(n);const e=n.g,i=n.C[0]?()=>{}:null;n.g=null,n.C=null,t||Ms(n,"ready");try{e.onreadystatechange=i}catch{}}}function NA(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(un.clearTimeout(n.A),n.A=null)}function nc(n){return n.g?n.g.readyState:0}function xA(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case ag:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function RA(n){let t="";return Xl(n,function(e,i){t+=i,t+=":",t+=e,t+="\r\n"}),t}function LE(n,t,e){e:{for(i in e){var i=!1;break e}i=!0}i||(e=RA(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):Ri(n,t,e))}function B_(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function BE(n){this.Ga=0,this.j=[],this.l=new E_,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=B_("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=B_("baseRetryDelayMs",5e3,n),this.hb=B_("retryDelaySeedMs",1e4,n),this.eb=B_("forwardChannelMaxRetries",2,n),this.xa=B_("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new RE(n&&n.concurrentRequestLimit),this.Ja=new $0,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function V_(n){if(U_(n),3==n.H){var t=n.W++,e=ec(n.I);if(Ri(e,"SID",n.K),Ri(e,"RID",t),Ri(e,"TYPE","terminate"),H_(n,e),(t=new tf(n,n.l,t)).L=2,t.v=j0(ec(e)),e=!1,un.navigator&&un.navigator.sendBeacon)try{e=un.navigator.sendBeacon(t.v.toString(),"")}catch{}!e&&un.Image&&((new Image).src=t.v,e=!0),e||(t.g=FA(t.l,null),t.g.ha(t.v)),t.G=Date.now(),sg(t)}Dk(n)}function Z0(n){n.g&&(J0(n),n.g.cancel(),n.g=null)}function U_(n){Z0(n),n.u&&(un.clearTimeout(n.u),n.u=null),X0(n),n.i.cancel(),n.m&&("number"==typeof n.m&&un.clearTimeout(n.m),n.m=null)}function K0(n){if(!tc(n.i)&&!n.m){n.m=!0;var t=n.Na;Xh||bE(),Jc||(Xh(),Jc=!0),tg.add(t,n),n.C=0}}function OA(n,t){var e;e=t?t.m:n.W++;const i=ec(n.I);Ri(i,"SID",n.K),Ri(i,"RID",e),Ri(i,"AID",n.V),H_(n,i),n.o&&n.s&&LE(i,n.o,n.s),e=new tf(n,n.l,e,n.C+1),null===n.o&&(e.I=n.s),t&&(n.j=t.F.concat(n.j)),t=kA(n,e,1e3),e.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),k_(n.i,e),SE(e,i,t)}function H_(n,t){n.na&&Xl(n.na,function(e,i){Ri(t,i,e)}),n.h&&NE({},function(e,i){Ri(t,i,e)})}function kA(n,t,e){e=Math.min(n.j.length,e);var i=n.h?$s(n.h.Va,n.h,n):null;e:{var r=n.j;let s=-1;for(;;){const c=["count="+e];-1==s?0<e?(s=r[0].g,c.push("ofs="+s)):s=0:c.push("ofs="+s);let d=!0;for(let p=0;p<e;p++){let m=r[p].g;const y=r[p].map;if(m-=s,0>m)s=Math.max(0,r[p].g-100),d=!1;else try{P_(y,c,"req"+m+"_")}catch{i&&i(y)}}if(d){i=c.join("&");break e}}}return n=n.j.splice(0,e),t.F=n,i}function PA(n){if(!n.g&&!n.u){n.ba=1;var t=n.Ma;Xh||bE(),Jc||(Xh(),Jc=!0),tg.add(t,n),n.A=0}}function Q0(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=ng($s(n.Ma,n),UE(n,n.A)),n.A++,0))}function J0(n){null!=n.B&&(un.clearTimeout(n.B),n.B=null)}function VE(n){n.g=new tf(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var t=ec(n.wa);Ri(t,"RID","rpc"),Ri(t,"SID",n.K),Ri(t,"AID",n.V),Ri(t,"CI",n.G?"0":"1"),!n.G&&n.qa&&Ri(t,"TO",n.qa),Ri(t,"TYPE","xmlhttp"),H_(n,t),n.o&&n.s&&LE(t,n.o,n.s),n.L&&n.g.setTimeout(n.L);var e=n.g;n=n.pa,e.L=1,e.v=j0(ec(t)),e.s=null,e.S=!0,fA(e,n)}function X0(n){null!=n.v&&(un.clearTimeout(n.v),n.v=null)}function bk(n,t){var e=null;if(n.g==t){X0(n),J0(n),n.g=null;var i=2}else{if(!kE(n.i,t))return;e=t.F,EA(n.i,t),i=1}if(0!=n.H)if(t.i)if(1==i){e=t.s?t.s.length:0,t=Date.now()-t.G;var r=n.C;Ms(i=C_(),new ef(i,e)),K0(n)}else PA(n);else if(3==(r=t.o)||0==r&&0<t.ca||!(1==i&&function wk(n,t){return!(DA(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=t.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=ng($s(n.Na,n,t),UE(n,n.C)),n.C++,0)))}(n,t)||2==i&&Q0(n)))switch(e&&0<e.length&&(t=n.i,t.i=t.i.concat(e)),r){case 1:yd(n,5);break;case 4:yd(n,10);break;case 3:yd(n,6);break;default:yd(n,2)}}function UE(n,t){let e=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(e*=2),e*t}function yd(n,t){if(n.l.info("Error code "+t),2==t){var e=null;n.h&&(e=null);var i=$s(n.pb,n);e||(e=new rf("//www.google.com/images/cleardot.gif"),un.location&&"http"==un.location.protocol||V0(e,"https"),j0(e)),function CA(n,t){const e=new E_;if(un.Image){const i=new Image;i.onload=v_(af,e,i,"TestLoadImage: loaded",!0,t),i.onerror=v_(af,e,i,"TestLoadImage: error",!1,t),i.onabort=v_(af,e,i,"TestLoadImage: abort",!1,t),i.ontimeout=v_(af,e,i,"TestLoadImage: timeout",!1,t),un.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else t(!1)}(e.toString(),i)}else zs(2);n.H=0,n.h&&n.h.za(t),Dk(n),U_(n)}function Dk(n){if(n.H=0,n.ma=[],n.h){const t=PE(n.i);(0!=t.length||0!=n.j.length)&&(H1(n.ma,t),H1(n.ma,n.j),n.i.i.length=0,Qh(n.j),n.j.length=0),n.h.ya()}}function j_(n,t,e){var i=e instanceof rf?ec(e):new rf(e);if(""!=i.g)t&&(i.g=t+"."+i.g),U0(i,i.m);else{var r=un.location;i=r.protocol,t=t?t+"."+r.hostname:r.hostname,r=+r.port;var s=new rf(null);i&&V0(s,i),t&&(s.g=t),r&&U0(s,r),e&&(s.l=e),i=s}return t=n.Da,(e=n.F)&&t&&Ri(i,e,t),Ri(i,"VER",n.ra),H_(n,i),i}function FA(n,t,e){if(t&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new nr(e&&n.Ha&&!n.va?new z0({ob:!0}):n.va)).Oa(n.J),t}function LA(){}function cg(){if(Jh&&!(10<=Number(iV)))throw Error("Environmental error: no available transport.")}function Zo(n,t){ms.call(this),this.g=new BE(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(n?n["X-WebChannel-Client-Profile"]=t.Ca:n={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=n,(n=t&&t.cc)&&!w_(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!w_(t)&&(this.g.F=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new xr(this)}function sl(n){I_.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function ug(){S_.call(this),this.status=1}function xr(n){this.g=n}function No(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function xo(n,t,e){e||(e=0);var i=Array(16);if("string"==typeof t)for(var r=0;16>r;++r)i[r]=t.charCodeAt(e++)|t.charCodeAt(e++)<<8|t.charCodeAt(e++)<<16|t.charCodeAt(e++)<<24;else for(r=0;16>r;++r)i[r]=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24;var s=n.g[3],c=(t=n.g[0])+(s^(e=n.g[1])&((r=n.g[2])^s))+i[0]+3614090360&4294967295;c=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=e+(c<<7&4294967295|c>>>25))+((c=s+(r^t&(e^r))+i[1]+3905402710&4294967295)<<12&4294967295|c>>>20))+((c=r+(e^s&(t^e))+i[2]+606105819&4294967295)<<17&4294967295|c>>>15))+((c=e+(t^r&(s^t))+i[3]+3250441966&4294967295)<<22&4294967295|c>>>10))+((c=t+(s^e&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|c>>>25))+((c=s+(r^t&(e^r))+i[5]+1200080426&4294967295)<<12&4294967295|c>>>20))+((c=r+(e^s&(t^e))+i[6]+2821735955&4294967295)<<17&4294967295|c>>>15))+((c=e+(t^r&(s^t))+i[7]+4249261313&4294967295)<<22&4294967295|c>>>10))+((c=t+(s^e&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|c>>>25))+((c=s+(r^t&(e^r))+i[9]+2336552879&4294967295)<<12&4294967295|c>>>20))+((c=r+(e^s&(t^e))+i[10]+4294925233&4294967295)<<17&4294967295|c>>>15))+((c=e+(t^r&(s^t))+i[11]+2304563134&4294967295)<<22&4294967295|c>>>10))+((c=t+(s^e&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|c>>>25))+((c=s+(r^t&(e^r))+i[13]+4254626195&4294967295)<<12&4294967295|c>>>20))+((c=r+(e^s&(t^e))+i[14]+2792965006&4294967295)<<17&4294967295|c>>>15))+((c=e+(t^r&(s^t))+i[15]+1236535329&4294967295)<<22&4294967295|c>>>10))+((c=t+(r^s&(e^r))+i[1]+4129170786&4294967295)<<5&4294967295|c>>>27))+((c=s+(e^r&(t^e))+i[6]+3225465664&4294967295)<<9&4294967295|c>>>23))+((c=r+(t^e&(s^t))+i[11]+643717713&4294967295)<<14&4294967295|c>>>18))+((c=e+(s^t&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|c>>>12))+((c=t+(r^s&(e^r))+i[5]+3593408605&4294967295)<<5&4294967295|c>>>27))+((c=s+(e^r&(t^e))+i[10]+38016083&4294967295)<<9&4294967295|c>>>23))+((c=r+(t^e&(s^t))+i[15]+3634488961&4294967295)<<14&4294967295|c>>>18))+((c=e+(s^t&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|c>>>12))+((c=t+(r^s&(e^r))+i[9]+568446438&4294967295)<<5&4294967295|c>>>27))+((c=s+(e^r&(t^e))+i[14]+3275163606&4294967295)<<9&4294967295|c>>>23))+((c=r+(t^e&(s^t))+i[3]+4107603335&4294967295)<<14&4294967295|c>>>18))+((c=e+(s^t&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|c>>>12))+((c=t+(r^s&(e^r))+i[13]+2850285829&4294967295)<<5&4294967295|c>>>27))+((c=s+(e^r&(t^e))+i[2]+4243563512&4294967295)<<9&4294967295|c>>>23))+((c=r+(t^e&(s^t))+i[7]+1735328473&4294967295)<<14&4294967295|c>>>18))+((c=e+(s^t&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|c>>>12))+((c=t+(e^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|c>>>28))+((c=s+(t^e^r)+i[8]+2272392833&4294967295)<<11&4294967295|c>>>21))+((c=r+(s^t^e)+i[11]+1839030562&4294967295)<<16&4294967295|c>>>16))+((c=e+(r^s^t)+i[14]+4259657740&4294967295)<<23&4294967295|c>>>9))+((c=t+(e^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|c>>>28))+((c=s+(t^e^r)+i[4]+1272893353&4294967295)<<11&4294967295|c>>>21))+((c=r+(s^t^e)+i[7]+4139469664&4294967295)<<16&4294967295|c>>>16))+((c=e+(r^s^t)+i[10]+3200236656&4294967295)<<23&4294967295|c>>>9))+((c=t+(e^r^s)+i[13]+681279174&4294967295)<<4&4294967295|c>>>28))+((c=s+(t^e^r)+i[0]+3936430074&4294967295)<<11&4294967295|c>>>21))+((c=r+(s^t^e)+i[3]+3572445317&4294967295)<<16&4294967295|c>>>16))+((c=e+(r^s^t)+i[6]+76029189&4294967295)<<23&4294967295|c>>>9))+((c=t+(e^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|c>>>28))+((c=s+(t^e^r)+i[12]+3873151461&4294967295)<<11&4294967295|c>>>21))+((c=r+(s^t^e)+i[15]+530742520&4294967295)<<16&4294967295|c>>>16))+((c=e+(r^s^t)+i[2]+3299628645&4294967295)<<23&4294967295|c>>>9))+((c=t+(r^(e|~s))+i[0]+4096336452&4294967295)<<6&4294967295|c>>>26))+((c=s+(e^(t|~r))+i[7]+1126891415&4294967295)<<10&4294967295|c>>>22))+((c=r+(t^(s|~e))+i[14]+2878612391&4294967295)<<15&4294967295|c>>>17))+((c=e+(s^(r|~t))+i[5]+4237533241&4294967295)<<21&4294967295|c>>>11))+((c=t+(r^(e|~s))+i[12]+1700485571&4294967295)<<6&4294967295|c>>>26))+((c=s+(e^(t|~r))+i[3]+2399980690&4294967295)<<10&4294967295|c>>>22))+((c=r+(t^(s|~e))+i[10]+4293915773&4294967295)<<15&4294967295|c>>>17))+((c=e+(s^(r|~t))+i[1]+2240044497&4294967295)<<21&4294967295|c>>>11))+((c=t+(r^(e|~s))+i[8]+1873313359&4294967295)<<6&4294967295|c>>>26))+((c=s+(e^(t|~r))+i[15]+4264355552&4294967295)<<10&4294967295|c>>>22))+((c=r+(t^(s|~e))+i[6]+2734768916&4294967295)<<15&4294967295|c>>>17))+((c=e+(s^(r|~t))+i[13]+1309151649&4294967295)<<21&4294967295|c>>>11))+((s=(t=e+((c=t+(r^(e|~s))+i[4]+4149444226&4294967295)<<6&4294967295|c>>>26))+((c=s+(e^(t|~r))+i[11]+3174756917&4294967295)<<10&4294967295|c>>>22))^((r=s+((c=r+(t^(s|~e))+i[2]+718787259&4294967295)<<15&4294967295|c>>>17))|~t))+i[9]+3951481745&4294967295,n.g[0]=n.g[0]+t&4294967295,n.g[1]=n.g[1]+(r+(c<<21&4294967295|c>>>11))&4294967295,n.g[2]=n.g[2]+r&4294967295,n.g[3]=n.g[3]+s&4294967295}function Yn(n,t){this.h=t;for(var e=[],i=!0,r=n.length-1;0<=r;r--){var s=0|n[r];i&&s==t||(e[r]=s,i=!1)}this.g=e}(bt=nr.prototype).Oa=function(n){this.M=n},bt.ha=function(n,t,e,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);t=t?t.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():A_.g(),this.C=function L0(n){return n.h||(n.h=n.i())}(this.u?this.u:A_),this.g.onreadystatechange=$s(this.La,this);try{this.G=!0,this.g.open(t,String(n),!0),this.G=!1}catch(s){return void AA(this,s)}if(n=e||"",e=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)e.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const s of i.keys())e.set(s,i.get(s))}i=Array.from(e.keys()).find(s=>"content-type"==s.toLowerCase()),r=un.FormData&&n instanceof un.FormData,!(0<=U1(IA,t))||i||r||e.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,c]of e)this.g.setRequestHeader(s,c);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{NA(this),0<this.B&&((this.L=function SA(n){return Jh&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$s(this.ua,this)):this.A=EE(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){AA(this,s)}},bt.ua=function(){typeof lE<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ms(this,"timeout"),this.abort(8))},bt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ms(this,"complete"),Ms(this,"abort"),Y0(this))},bt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Y0(this,!0)),nr.$.N.call(this)},bt.La=function(){this.s||(this.G||this.v||this.l?lg(this):this.kb())},bt.kb=function(){lg(this)},bt.isActive=function(){return!!this.g},bt.da=function(){try{return 2<nc(this)?this.g.status:-1}catch{return-1}},bt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},bt.Wa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),TA(t)}},bt.Ia=function(){return this.m},bt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(bt=BE.prototype).ra=8,bt.H=1,bt.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const r=new tf(this,this.l,n);let s=this.s;if(this.U&&(s?(s=Z1(s),K1(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)e:{for(var t=0,e=0;e<this.j.length;e++){var i=this.j[e];if(void 0===(i="__data__"in i.map&&"string"==typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=e;break e}if(4096===t||e===this.j.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=kA(this,r,t),Ri(e=ec(this.I),"RID",n),Ri(e,"CVER",22),this.F&&Ri(e,"X-HTTP-Session-Id",this.F),H_(this,e),s&&(this.O?t="headers="+encodeURIComponent(String(RA(s)))+"&"+t:this.o&&LE(e,this.o,s)),k_(this.i,r),this.bb&&Ri(e,"TYPE","init"),this.P?(Ri(e,"$req",t),Ri(e,"SID","null"),r.aa=!0,SE(r,e,null)):SE(r,e,t),this.H=2}}else 3==this.H&&(n?OA(this,n):0==this.j.length||tc(this.i)||OA(this))},bt.Ma=function(){if(this.u=null,VE(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=ng($s(this.jb,this),n)}},bt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,zs(10),Z0(this),VE(this))},bt.ib=function(){null!=this.v&&(this.v=null,Z0(this),Q0(this),zs(19))},bt.pb=function(n){n?(this.l.info("Successfully pinged google.com"),zs(2)):(this.l.info("Failed to ping google.com"),zs(1))},bt.isActive=function(){return!!this.h&&this.h.isActive(this)},(bt=LA.prototype).Ba=function(){},bt.Aa=function(){},bt.za=function(){},bt.ya=function(){},bt.isActive=function(){return!0},bt.Va=function(){},cg.prototype.g=function(n,t){return new Zo(n,t)},gs(Zo,ms),Zo.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,t=this.l,e=this.h||void 0;zs(0),n.Y=t,n.na=e||{},n.G=n.aa,n.I=j_(n,null,n.Y),K0(n)},Zo.prototype.close=function(){V_(this.g)},Zo.prototype.u=function(n){var t=this.g;if("string"==typeof n){var e={};e.__data__=n,n=e}else this.v&&((e={}).__data__=O0(n),n=e);t.j.push(new class{constructor(n,t){this.g=n,this.map=t}}(t.fb++,n)),3==t.H&&K0(t)},Zo.prototype.N=function(){this.g.h=null,delete this.j,V_(this.g),delete this.g,Zo.$.N.call(this)},gs(sl,I_),gs(ug,S_),gs(xr,LA),xr.prototype.Ba=function(){Ms(this.g,"a")},xr.prototype.Aa=function(n){Ms(this.g,new sl(n))},xr.prototype.za=function(n){Ms(this.g,new ug)},xr.prototype.ya=function(){Ms(this.g,"b")},gs(No,function lf(){this.blockSize=-1}),No.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},No.prototype.j=function(n,t){void 0===t&&(t=n.length);for(var e=t-this.blockSize,i=this.m,r=this.h,s=0;s<t;){if(0==r)for(;s<=e;)xo(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<t;)if(i[r++]=n.charCodeAt(s++),r==this.blockSize){xo(this,i),r=0;break}}else for(;s<t;)if(i[r++]=n[s++],r==this.blockSize){xo(this,i),r=0;break}}this.h=r,this.i+=t},No.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var t=1;t<n.length-8;++t)n[t]=0;var e=8*this.i;for(t=n.length-8;t<n.length;++t)n[t]=255&e,e/=256;for(this.j(n),n=Array(16),t=e=0;4>t;++t)for(var i=0;32>i;i+=8)n[e++]=this.g[t]>>>i&255;return n};var dg={};function wd(n){return-128<=n&&128>n?function ok(n,t){var e=dg;return Object.prototype.hasOwnProperty.call(e,n)?e[n]:e[n]=t(n)}(n,function(t){return new Yn([0|t],0>t?-1:0)}):new Yn([0|n],0>n?-1:0)}function ao(n){if(isNaN(n)||!isFinite(n))return ol;if(0>n)return _s(ao(-n));for(var t=[],e=1,i=0;n>=e;i++)t[i]=n/e|0,e*=bd;return new Yn(t,0)}var bd=4294967296,ol=wd(0),Dd=wd(1),uf=wd(16777216);function Ro(n){if(0!=n.h)return!1;for(var t=0;t<n.g.length;t++)if(0!=n.g[t])return!1;return!0}function Ko(n){return-1==n.h}function _s(n){for(var t=n.g.length,e=[],i=0;i<t;i++)e[i]=~n.g[i];return new Yn(e,~n.h).add(Dd)}function G_(n,t){return n.add(_s(t))}function $_(n,t){for(;(65535&n[t])!=n[t];)n[t+1]+=n[t]>>>16,n[t]&=65535,t++}function hg(n,t){this.g=n,this.h=t}function z_(n,t){if(Ro(t))throw Error("division by zero");if(Ro(n))return new hg(ol,ol);if(Ko(n))return t=z_(_s(n),t),new hg(_s(t.g),_s(t.h));if(Ko(t))return t=z_(n,_s(t)),new hg(_s(t.g),t.h);if(30<n.g.length){if(Ko(n)||Ko(t))throw Error("slowDivide_ only works with positive integers.");for(var e=Dd,i=t;0>=i.X(n);)e=HE(e),i=HE(i);var r=df(e,1),s=df(i,1);for(i=df(i,2),e=df(e,2);!Ro(i);){var c=s.add(i);0>=c.X(n)&&(r=r.add(e),s=c),i=df(i,1),e=df(e,1)}return t=G_(n,r.R(t)),new hg(r,t)}for(r=ol;0<=n.X(t);){for(e=Math.max(1,Math.floor(n.ea()/t.ea())),i=48>=(i=Math.ceil(Math.log(e)/Math.LN2))?1:Math.pow(2,i-48),c=(s=ao(e)).R(t);Ko(c)||0<c.X(n);)c=(s=ao(e-=i)).R(t);Ro(s)&&(s=Dd),r=r.add(s),n=G_(n,c)}return new hg(r,n)}function HE(n){for(var t=n.g.length+1,e=[],i=0;i<t;i++)e[i]=n.D(i)<<1|n.D(i-1)>>>31;return new Yn(e,n.h)}function df(n,t){var e=t>>5;t%=32;for(var i=n.g.length-e,r=[],s=0;s<i;s++)r[s]=0<t?n.D(s+e)>>>t|n.D(s+e+1)<<32-t:n.D(s+e);return new Yn(r,n.h)}(bt=Yn.prototype).ea=function(){if(Ko(this))return-_s(this).ea();for(var n=0,t=1,e=0;e<this.g.length;e++){var i=this.D(e);n+=(0<=i?i:bd+i)*t,t*=bd}return n},bt.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Ro(this))return"0";if(Ko(this))return"-"+_s(this).toString(n);for(var t=ao(Math.pow(n,6)),e=this,i="";;){var r=z_(e,t).g,s=((0<(e=G_(e,r.R(t))).g.length?e.g[0]:e.h)>>>0).toString(n);if(Ro(e=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},bt.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},bt.X=function(n){return Ko(n=G_(this,n))?-1:Ro(n)?0:1},bt.abs=function(){return Ko(this)?_s(this):this},bt.add=function(n){for(var t=Math.max(this.g.length,n.g.length),e=[],i=0,r=0;r<=t;r++){var s=i+(65535&this.D(r))+(65535&n.D(r)),c=(s>>>16)+(this.D(r)>>>16)+(n.D(r)>>>16);i=c>>>16,e[r]=(c&=65535)<<16|(s&=65535)}return new Yn(e,-2147483648&e[e.length-1]?-1:0)},bt.R=function(n){if(Ro(this)||Ro(n))return ol;if(Ko(this))return Ko(n)?_s(this).R(_s(n)):_s(_s(this).R(n));if(Ko(n))return _s(this.R(_s(n)));if(0>this.X(uf)&&0>n.X(uf))return ao(this.ea()*n.ea());for(var t=this.g.length+n.g.length,e=[],i=0;i<2*t;i++)e[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<n.g.length;r++){var s=this.D(i)>>>16,c=65535&this.D(i),d=n.D(r)>>>16,p=65535&n.D(r);e[2*i+2*r]+=c*p,$_(e,2*i+2*r),e[2*i+2*r+1]+=s*p,$_(e,2*i+2*r+1),e[2*i+2*r+1]+=c*d,$_(e,2*i+2*r+1),e[2*i+2*r+2]+=s*d,$_(e,2*i+2*r+2)}for(i=0;i<t;i++)e[i]=e[2*i+1]<<16|e[2*i];for(i=t;i<2*t;i++)e[i]=0;return new Yn(e,0)},bt.gb=function(n){return z_(this,n).h},bt.and=function(n){for(var t=Math.max(this.g.length,n.g.length),e=[],i=0;i<t;i++)e[i]=this.D(i)&n.D(i);return new Yn(e,this.h&n.h)},bt.or=function(n){for(var t=Math.max(this.g.length,n.g.length),e=[],i=0;i<t;i++)e[i]=this.D(i)|n.D(i);return new Yn(e,this.h|n.h)},bt.xor=function(n){for(var t=Math.max(this.g.length,n.g.length),e=[],i=0;i<t;i++)e[i]=this.D(i)^n.D(i);return new Yn(e,this.h^n.h)},cg.prototype.createWebChannel=cg.prototype.g,Zo.prototype.send=Zo.prototype.u,Zo.prototype.open=Zo.prototype.m,Zo.prototype.close=Zo.prototype.close,F0.NO_ERROR=0,F0.TIMEOUT=8,F0.HTTP_ERROR=6,T_.COMPLETE="complete",ig.EventType=rg,rg.OPEN="a",rg.CLOSE="b",rg.ERROR="c",rg.MESSAGE="d",ms.prototype.listen=ms.prototype.O,nr.prototype.listenOnce=nr.prototype.P,nr.prototype.getLastError=nr.prototype.Sa,nr.prototype.getLastErrorCode=nr.prototype.Ia,nr.prototype.getStatus=nr.prototype.da,nr.prototype.getResponseJson=nr.prototype.Wa,nr.prototype.getResponseText=nr.prototype.ja,nr.prototype.send=nr.prototype.ha,nr.prototype.setWithCredentials=nr.prototype.Oa,No.prototype.digest=No.prototype.l,No.prototype.reset=No.prototype.reset,No.prototype.update=No.prototype.j,Yn.prototype.add=Yn.prototype.add,Yn.prototype.multiply=Yn.prototype.R,Yn.prototype.modulo=Yn.prototype.gb,Yn.prototype.compare=Yn.prototype.X,Yn.prototype.toNumber=Yn.prototype.ea,Yn.prototype.toString=Yn.prototype.toString,Yn.prototype.getBits=Yn.prototype.D,Yn.fromNumber=ao,Yn.fromString=function cf(n,t){if(0==n.length)throw Error("number format error: empty string");if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if("-"==n.charAt(0))return _s(cf(n.substring(1),t));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var e=ao(Math.pow(t,8)),i=ol,r=0;r<n.length;r+=8){var s=Math.min(8,n.length-r),c=parseInt(n.substring(r,r+s),t);8>s?(s=ao(Math.pow(t,s)),i=i.R(s).add(ao(c))):i=(i=i.R(e)).add(ao(c))}return i};var BA=ya.createWebChannelTransport=function(){return new cg},jE=ya.getStatEventTarget=function(){return C_()},GE=ya.ErrorCode=F0,lV=ya.EventType=T_,cV=ya.Event=_d,VA=ya.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Ek=ya.FetchXmlHttpFactory=z0,$E=ya.WebChannel=ig,Ck=ya.XhrIo=nr,uV=ya.Md5=No,fg=ya.Integer=Yn;const UA="@firebase/firestore";class vs{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}vs.UNAUTHENTICATED=new vs(null),vs.GOOGLE_CREDENTIALS=new vs("google-credentials-uid"),vs.FIRST_PARTY=new vs("first-party-uid"),vs.MOCK_USER=new vs("mock-user");let Ed="9.23.0";const ba=new Hr.Yd("@firebase/firestore");function W_(){return ba.logLevel}function Ke(n,...t){if(ba.logLevel<=Hr.in.DEBUG){const e=t.map(zE);ba.debug(`Firestore (${Ed}): ${n}`,...e)}}function Oi(n,...t){if(ba.logLevel<=Hr.in.ERROR){const e=t.map(zE);ba.error(`Firestore (${Ed}): ${n}`,...e)}}function Qo(n,...t){if(ba.logLevel<=Hr.in.WARN){const e=t.map(zE);ba.warn(`Firestore (${Ed}): ${n}`,...e)}}function zE(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Dt(n="Unexpected state"){const t=`FIRESTORE (${Ed}) INTERNAL ASSERTION FAILED: `+n;throw Oi(t),new Error(t)}function Lt(n,t){n||Dt()}function yt(n,t){return n}const be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ge extends L.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class _r{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class q_{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class dV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(vs.UNAUTHENTICATED))}shutdown(){}}class Ik{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class Sk{constructor(t){this.t=t,this.currentUser=vs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var i=this;let r=this.i;const s=m=>this.i!==r?(r=this.i,e(m)):Promise.resolve();let c=new _r;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new _r,t.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const m=c;t.enqueueRetryable((0,Ee.Z)(function*(){yield m.promise,yield s(i.currentUser)}))},p=m=>{Ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(m=>p(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?p(m):(Ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new _r)}},0),d()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(Ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Lt("string"==typeof i.accessToken),new q_(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Lt(null===t||"string"==typeof t),new vs(t)}}class WE{constructor(t,e,i){this.h=t,this.l=e,this.m=i,this.type="FirstParty",this.user=vs.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const t=this.p();return t&&this.g.set("Authorization",t),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Ak{constructor(t,e,i){this.h=t,this.l=e,this.m=i}getToken(){return Promise.resolve(new WE(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable(()=>e(vs.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qE{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Mk{constructor(t){this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(t,e){const i=s=>{null!=s.error&&Ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const c=s.token!==this.T;return this.T=s.token,Ke("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{Ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?r(s):Ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Lt("string"==typeof e.token),this.T=e.token,new qE(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function HA(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}class YE{static A(){const e=62*Math.floor(256/62);let i="";for(;i.length<20;){const r=HA(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<e&&(i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(r[s]%62))}return i}}function on(n,t){return n<t?-1:n>t?1:0}function pg(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}function jA(n){return n+"\0"}class Wi{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ge(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ge(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ge(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ge(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Wi.fromMillis(Date.now())}static fromDate(t){return Wi.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new Wi(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?on(this.nanoseconds,t.nanoseconds):on(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Bt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Bt(t)}static min(){return new Bt(new Wi(0,0))}static max(){return new Bt(new Wi(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class hf{constructor(t,e,i){void 0===e?e=0:e>t.length&&Dt(),void 0===i?i=t.length-e:i>t.length-e&&Dt(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return 0===hf.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof hf?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const s=t.get(r),c=e.get(r);if(s<c)return-1;if(s>c)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Rn extends hf{construct(t,e,i){return new Rn(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Ge(be.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new Rn(e)}static emptyPath(){return new Rn([])}}const Nk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ki extends hf{construct(t,e,i){return new ki(t,e,i)}static isValidIdentifier(t){return Nk.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ki.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ki(["__name__"])}static fromServerFormat(t){const e=[];let i="",r=0;const s=()=>{if(0===i.length)throw new Ge(be.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;r<t.length;){const d=t[r];if("\\"===d){if(r+1===t.length)throw new Ge(be.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[r+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Ge(be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=p,r+=2}else"`"===d?(c=!c,r++):"."!==d||c?(i+=d,r++):(s(),r++)}if(s(),c)throw new Ge(be.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ki(e)}static emptyPath(){return new ki([])}}class ft{constructor(t){this.path=t}static fromPath(t){return new ft(Rn.fromString(t))}static fromName(t){return new ft(Rn.fromString(t).popFirst(5))}static empty(){return new ft(Rn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Rn.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Rn.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ft(new Rn(t.slice()))}}class gg{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}}function tw(n){return n.fields.find(t=>2===t.kind)}function ff(n){return n.fields.filter(t=>2!==t.kind)}gg.UNKNOWN_ID=-1;class nw{constructor(t,e){this.fieldPath=t,this.kind=e}}class Cd{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new Cd(0,Jo.min())}}function ZE(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Bt.fromTimestamp(1e9===i?new Wi(e+1,0):new Wi(e,i));return new Jo(r,ft.empty(),t)}function KE(n){return new Jo(n.readTime,n.key,-1)}class Jo{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new Jo(Bt.min(),ft.empty(),-1)}static max(){return new Jo(Bt.max(),ft.empty(),-1)}}function QE(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=ft.comparator(n.documentKey,t.documentKey),0!==e?e:on(n.largestBatchId,t.largestBatchId))}const JE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function tu(n){return Y_.apply(this,arguments)}function Y_(){return Y_=(0,Ee.Z)(function*(n){if(n.code!==be.FAILED_PRECONDITION||n.message!==JE)throw n;Ke("LocalStore","Unexpectedly lost primary lease")}),Y_.apply(this,arguments)}class _e{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Dt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new _e((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof _e?e:_e.resolve(e)}catch(e){return _e.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):_e.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):_e.reject(e)}static resolve(t){return new _e((e,i)=>{e(t)})}static reject(t){return new _e((e,i)=>{i(t)})}static waitFor(t){return new _e((e,i)=>{let r=0,s=0,c=!1;t.forEach(d=>{++r,d.next(()=>{++s,c&&s===r&&e()},p=>i(p))}),c=!0,s===r&&e()})}static or(t){let e=_e.resolve(!1);for(const i of t)e=e.next(r=>r?_e.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,s)=>{i.push(e.call(this,r,s))}),this.waitFor(i)}static mapArray(t,e){return new _e((i,r)=>{const s=t.length,c=new Array(s);let d=0;for(let p=0;p<s;p++){const m=p;e(t[m]).next(y=>{c[m]=y,++d,d===s&&i(c)},y=>r(y))}})}static doWhile(t,e){return new _e((i,r)=>{const s=()=>{!0===t()?e().next(()=>{s()},r):i()};s()})}}class sw{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.v=new _r,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{e.error?this.v.reject(new mg(t,e.error)):this.v.resolve()},this.transaction.onerror=i=>{const r=Z_(i.target.error);this.v.reject(new mg(t,r))}}static open(t,e,i,r){try{return new sw(e,t.transaction(r,i))}catch(s){throw new mg(e,s)}}get R(){return this.v.promise}abort(t){t&&this.v.reject(t),this.aborted||(Ke("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new Rk(e)}}class Da{constructor(t,e,i){this.name=t,this.version=e,this.V=i,12.2===Da.S((0,L.z$)())&&Oi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return Ke("SimpleDb","Removing database:",t),Td(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!(0,L.hl)())return!1;if(Da.C())return!0;const t=(0,L.z$)(),e=Da.S(t),i=0<e&&e<10,r=Da.N(t),s=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||s)}static C(){var t;return typeof process<"u"&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.k)}static M(t,e){return t.store(e)}static S(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static N(t){const e=t.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}$(t){var e=this;return(0,Ee.Z)(function*(){return e.db||(Ke("SimpleDb","Opening database:",e.name),e.db=yield new Promise((i,r)=>{const s=indexedDB.open(e.name,e.version);s.onsuccess=c=>{i(c.target.result)},s.onblocked=()=>{r(new mg(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=c=>{const d=c.target.error;r("VersionError"===d.name?new Ge(be.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Ge(be.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new mg(t,d))},s.onupgradeneeded=c=>{Ke("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',c.oldVersion),e.V.O(c.target.result,s.transaction,c.oldVersion,e.version).next(()=>{Ke("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.F&&(e.db.onversionchange=i=>e.F(i)),e.db})()}B(t){this.F=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,i,r){var s=this;return(0,Ee.Z)(function*(){const c="readonly"===e;let d=0;for(;;){++d;try{s.db=yield s.$(t);const p=sw.open(s.db,t,c?"readonly":"readwrite",i),m=r(p).next(y=>(p.P(),y)).catch(y=>(p.abort(y),_e.reject(y))).toPromise();return m.catch(()=>{}),yield p.R,m}catch(p){const m=p,y="FirebaseError"!==m.name&&d<3;if(Ke("SimpleDb","Transaction failed with error:",m.message,"Retrying:",y),s.close(),!y)return Promise.reject(m)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class GA{constructor(t){this.L=t,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(t){this.L=t}done(){this.q=!0}G(t){this.U=t}delete(){return Td(this.L.delete())}}class mg extends Ge{constructor(t,e){super(be.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function nu(n){return"IndexedDbTransactionError"===n.name}class Rk{constructor(t){this.store=t}put(t,e){let i;return void 0!==e?(Ke("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):(Ke("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),Td(i)}add(t){return Ke("SimpleDb","ADD",this.store.name,t,t),Td(this.store.add(t))}get(t){return Td(this.store.get(t)).next(e=>(void 0===e&&(e=null),Ke("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return Ke("SimpleDb","DELETE",this.store.name,t),Td(this.store.delete(t))}count(){return Ke("SimpleDb","COUNT",this.store.name),Td(this.store.count())}j(t,e){const i=this.options(t,e);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.W(r,(c,d)=>{s.push(d)}).next(()=>s)}{const r=this.store.getAll(i.range);return new _e((s,c)=>{r.onerror=d=>{c(d.target.error)},r.onsuccess=d=>{s(d.target.result)}})}}H(t,e){const i=this.store.getAll(t,null===e?void 0:e);return new _e((r,s)=>{i.onerror=c=>{s(c.target.error)},i.onsuccess=c=>{r(c.target.result)}})}J(t,e){Ke("SimpleDb","DELETE ALL",this.store.name);const i=this.options(t,e);i.Y=!1;const r=this.cursor(i);return this.W(r,(s,c,d)=>d.delete())}X(t,e){let i;e?i=t:(i={},e=t);const r=this.cursor(i);return this.W(r,e)}Z(t){const e=this.cursor({});return new _e((i,r)=>{e.onerror=s=>{const c=Z_(s.target.error);r(c)},e.onsuccess=s=>{const c=s.target.result;c?t(c.primaryKey,c.value).next(d=>{d?c.continue():i()}):i()}})}W(t,e){const i=[];return new _e((r,s)=>{t.onerror=c=>{s(c.target.error)},t.onsuccess=c=>{const d=c.target.result;if(!d)return void r();const p=new GA(d),m=e(d.primaryKey,d.value,p);if(m instanceof _e){const y=m.catch(T=>(p.done(),_e.reject(T)));i.push(y)}p.isDone?r():null===p.K?d.continue():d.continue(p.K)}}).next(()=>_e.waitFor(i))}options(t,e){let i;return void 0!==t&&("string"==typeof t?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.Y?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Td(n){return new _e((t,e)=>{n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{const r=Z_(i.target.error);e(r)}})}let XE=!1;function Z_(n){const t=Da.S((0,L.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const i=new Ge("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return XE||(XE=!0,setTimeout(()=>{throw i},0)),i}}return n}class ow{constructor(t,e){this.asyncQueue=t,this.tt=e,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(t){var e=this;Ke("IndexBackiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,Ee.Z)(function*(){e.task=null;try{Ke("IndexBackiller",`Documents written: ${yield e.tt.nt()}`)}catch(i){nu(i)?Ke("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield tu(i)}yield e.et(6e4)}))}}class $A{constructor(t,e){this.localStore=t,this.persistence=e}nt(t=50){var e=this;return(0,Ee.Z)(function*(){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>e.st(i,t))})()}st(t,e){const i=new Set;let r=e,s=!0;return _e.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(c=>{if(null!==c&&!i.has(c))return Ke("IndexBackiller",`Processing collection: ${c}`),this.it(t,c,r).next(d=>{r-=d,i.add(c)});s=!1})).next(()=>e-r)}it(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(r=>this.localStore.localDocuments.getNextDocuments(t,e,r,i).next(s=>{const c=s.changes;return this.localStore.indexManager.updateIndexEntries(t,c).next(()=>this.rt(r,s)).next(d=>(Ke("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(t,e,d))).next(()=>c.size)}))}rt(t,e){let i=t;return e.changes.forEach((r,s)=>{const c=KE(s);QE(c,i)>0&&(i=c)}),new Jo(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}let Oo=(()=>{class n{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=r=>this.ot(r),this.ut=r=>i.writeSequenceNumber(r))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}return n.ct=-1,n})();function _g(n){return null==n}function vg(n){return 0===n&&1/n==-1/0}function eC(n){return"number"==typeof n&&Number.isInteger(n)&&!vg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function xs(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=tC(t)),t=zA(n.get(e),t);return tC(t)}function zA(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=s}}return e}function tC(n){return n+"\x01\x01"}function Xo(n){const t=n.length;if(Lt(t>=2),2===t)return Lt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Rn.emptyPath();const e=t-2,i=[];let r="";for(let s=0;s<t;){const c=n.indexOf("\x01",s);switch((c<0||c>e)&&Dt(),n.charAt(c+1)){case"\x01":const d=n.substring(s,c);let p;0===r.length?p=d:(r+=d,p=r,r=""),i.push(p);break;case"\x10":r+=n.substring(s,c),r+="\0";break;case"\x11":r+=n.substring(s,c+1);break;default:Dt()}s=c+2}return new Rn(i)}const iu=["userId","batchId"];function aw(n,t){return[n,xs(t)]}function WA(n,t,e){return[n,xs(t),e]}const nC={},pf=["prefixPath","collectionGroup","readTime","documentId"],iC=["prefixPath","collectionGroup","documentId"],Ok=["collectionGroup","readTime","prefixPath","documentId"],rC=["canonicalId","targetId"],fV=["targetId","path"],pV=["path","targetId"],kk=["collectionId","parent"],Pk=["indexId","uid"],qA=["uid","sequenceNumber"],Fk=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ts=["indexId","uid","orderedDocumentKey"],YA=["userId","collectionPath","documentId"],Lk=["userId","collectionPath","largestBatchId"],Bk=["userId","collectionGroup","largestBatchId"],sC=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Vk=[...sC,"documentOverlays"],oC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],aC=oC,yg=[...aC,"indexConfiguration","indexState","indexEntries"];class lC extends rw{constructor(t,e){super(),this.ht=t,this.currentSequenceNumber=e}}function ys(n,t){const e=yt(n);return Da.M(e.ht,t)}function cC(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Id(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function uC(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}class Pi{constructor(t,e){this.comparator=t,this.root=e||ns.EMPTY}insert(t,e){return new Pi(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,ns.BLACK,null,null))}remove(t){return new Pi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ns.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(0===i)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(0===r)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new wg(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new wg(this.root,t,this.comparator,!1)}getReverseIterator(){return new wg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new wg(this.root,t,this.comparator,!0)}}class wg{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(0===s){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ns{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=i??ns.RED,this.left=r??ns.EMPTY,this.right=s??ns.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new ns(t??this.key,e??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):0===s?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ns.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return ns.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ns.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ns.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Dt();const t=this.left.check();if(t!==this.right.check())throw Dt();return t+(this.isRed()?0:1)}}ns.EMPTY=null,ns.RED=!0,ns.BLACK=!1,ns.EMPTY=new class{constructor(){this.size=0}get key(){throw Dt()}get value(){throw Dt()}get color(){throw Dt()}get left(){throw Dt()}get right(){throw Dt()}copy(n,t,e,i,r){return this}insert(n,t,e){return new ns(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Gn{constructor(t){this.comparator=t,this.data=new Pi(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new ZA(this.data.getIterator())}getIteratorFrom(t){return new ZA(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof Gn)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Gn(this.comparator);return e.data=t,e}}class ZA{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function gf(n){return n.hasNext()?n.getNext():void 0}class ir{constructor(t){this.fields=t,t.sort(ki.comparator)}static empty(){return new ir([])}unionWith(t){let e=new Gn(ki.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new ir(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return pg(this.fields,t.fields,(e,i)=>e.isEqual(i))}}class Ea extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class jr{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new Ea("Invalid base64 string: "+r):r}}(t);return new jr(e)}static fromUint8Array(t){const e=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(t);return new jr(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return on(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}jr.EMPTY_BYTE_STRING=new jr("");const KA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sd(n){if(Lt(!!n),"string"==typeof n){let t=0;const e=KA.exec(n);if(Lt(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:vr(n.seconds),nanos:vr(n.nanos)}}function vr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ru(n){return"string"==typeof n?jr.fromBase64String(n):jr.fromUint8Array(n)}function lw(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=n?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function bg(n){const t=n.mapValue.fields.__previous_value__;return lw(t)?bg(t):t}function su(n){const t=Sd(n.mapValue.fields.__local_write_time__.timestampValue);return new Wi(t.seconds,t.nanos)}class Uk{constructor(t,e,i,r,s,c,d,p,m){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=m}}class ou{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new ou("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof ou&&t.projectId===this.projectId&&t.database===this.database}}const Ad={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},cw={nullValue:"NULL_VALUE"};function au(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?lw(n)?4:pC(n)?9007199254740991:10:Dt()}function ll(n,t){if(n===t)return!0;const e=au(n);if(e!==au(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return su(n).isEqual(su(t));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=Sd(i.timestampValue),c=Sd(r.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return r=t,ru(n.bytesValue).isEqual(ru(r.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,r){return vr(i.geoPointValue.latitude)===vr(r.geoPointValue.latitude)&&vr(i.geoPointValue.longitude)===vr(r.geoPointValue.longitude)}(n,t);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return vr(i.integerValue)===vr(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=vr(i.doubleValue),c=vr(r.doubleValue);return s===c?vg(s)===vg(c):isNaN(s)&&isNaN(c)}return!1}(n,t);case 9:return pg(n.arrayValue.values||[],t.arrayValue.values||[],ll);case 10:return function(i,r){const s=i.mapValue.fields||{},c=r.mapValue.fields||{};if(cC(s)!==cC(c))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(void 0===c[d]||!ll(s[d],c[d])))return!1;return!0}(n,t);default:return Dt()}var r}function Md(n,t){return void 0!==(n.values||[]).find(e=>ll(e,t))}function Nd(n,t){if(n===t)return 0;const e=au(n),i=au(t);if(e!==i)return on(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return on(n.booleanValue,t.booleanValue);case 2:return function(r,s){const c=vr(r.integerValue||r.doubleValue),d=vr(s.integerValue||s.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(n,t);case 3:return dC(n.timestampValue,t.timestampValue);case 4:return dC(su(n),su(t));case 5:return on(n.stringValue,t.stringValue);case 6:return function(r,s){const c=ru(r),d=ru(s);return c.compareTo(d)}(n.bytesValue,t.bytesValue);case 7:return function(r,s){const c=r.split("/"),d=s.split("/");for(let p=0;p<c.length&&p<d.length;p++){const m=on(c[p],d[p]);if(0!==m)return m}return on(c.length,d.length)}(n.referenceValue,t.referenceValue);case 8:return function(r,s){const c=on(vr(r.latitude),vr(s.latitude));return 0!==c?c:on(vr(r.longitude),vr(s.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(r,s){const c=r.values||[],d=s.values||[];for(let p=0;p<c.length&&p<d.length;++p){const m=Nd(c[p],d[p]);if(m)return m}return on(c.length,d.length)}(n.arrayValue,t.arrayValue);case 10:return function(r,s){if(r===Ad.mapValue&&s===Ad.mapValue)return 0;if(r===Ad.mapValue)return 1;if(s===Ad.mapValue)return-1;const c=r.fields||{},d=Object.keys(c),p=s.fields||{},m=Object.keys(p);d.sort(),m.sort();for(let y=0;y<d.length&&y<m.length;++y){const T=on(d[y],m[y]);if(0!==T)return T;const A=Nd(c[d[y]],p[m[y]]);if(0!==A)return A}return on(d.length,m.length)}(n.mapValue,t.mapValue);default:throw Dt()}}function dC(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return on(n,t);const e=Sd(n),i=Sd(t),r=on(e.seconds,i.seconds);return 0!==r?r:on(e.nanos,i.nanos)}function mf(n){return uw(n)}function uw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=Sd(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ru(n.bytesValue).toBase64():"referenceValue"in n?ft.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const c of i.values||[])s?s=!1:r+=",",r+=uw(c);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",c=!0;for(const d of r)c?c=!1:s+=",",s+=`${d}:${uw(i.fields[d])}`;return s+"}"}(n.mapValue):Dt();var t}function _f(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function K_(n){return!!n&&"integerValue"in n}function xd(n){return!!n&&"arrayValue"in n}function hC(n){return!!n&&"nullValue"in n}function fC(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Q_(n){return!!n&&"mapValue"in n}function Dg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return Id(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=Dg(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Dg(n.arrayValue.values[e]);return t}return Object.assign({},n)}function pC(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function QA(n){return"nullValue"in n?cw:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?_f(ou.empty(),ft.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Dt()}function JA(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?_f(ou.empty(),ft.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ad:Dt()}function gC(n,t){const e=Nd(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function XA(n,t){const e=Nd(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}class Rs{constructor(t){this.value=t}static empty(){return new Rs({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!Q_(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Dg(e)}setAll(t){let e=ki.emptyPath(),i={},r=[];t.forEach((c,d)=>{if(!e.isImmediateParentOf(d)){const p=this.getFieldsMap(e);this.applyChanges(p,i,r),i={},r=[],e=d.popLast()}c?i[d.lastSegment()]=Dg(c):r.push(d.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,i,r)}delete(t){const e=this.field(t.popLast());Q_(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return ll(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];Q_(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){Id(e,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new Rs(Dg(this.value))}}function eM(n){const t=[];return Id(n.fields,(e,i)=>{const r=new ki([e]);if(Q_(i)){const s=eM(i.mapValue).fields;if(0===s.length)t.push(r);else for(const c of s)t.push(r.child(c))}else t.push(r)}),new ir(t)}class Fi{constructor(t,e,i,r,s,c,d){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=s,this.data=c,this.documentState=d}static newInvalidDocument(t){return new Fi(t,0,Bt.min(),Bt.min(),Bt.min(),Rs.empty(),0)}static newFoundDocument(t,e,i,r){return new Fi(t,1,e,Bt.min(),i,r,0)}static newNoDocument(t,e){return new Fi(t,2,e,Bt.min(),Bt.min(),Rs.empty(),0)}static newUnknownDocument(t,e){return new Fi(t,3,e,Bt.min(),Bt.min(),Rs.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Bt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Rs.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Rs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Bt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Fi&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Fi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Rd{constructor(t,e){this.position=t,this.inclusive=e}}function tM(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const s=t[r],c=n.position[r];if(i=s.field.isKeyField()?ft.comparator(ft.fromName(c.referenceValue),e.key):Nd(c,e.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function nM(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!ll(n.position[e],t.position[e]))return!1;return!0}class Eg{constructor(t,e="asc"){this.field=t,this.dir=e}}function Hk(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}class iM{}class On extends iM{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,i):new oM(t,e,i):"array-contains"===e?new cM(t,i):"in"===e?new DC(t,i):"not-in"===e?new uM(t,i):"array-contains-any"===e?new EC(t,i):new On(t,e,i)}static createKeyFieldInFilter(t,e,i){return"in"===e?new aM(t,i):new lM(t,i)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(Nd(e,this.value)):null!==e&&au(this.value)===au(e)&&this.matchesComparison(Nd(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Dt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ai extends iM{constructor(t,e){super(),this.filters=t,this.op=e,this.lt=null}static create(t,e){return new ai(t,e)}matches(t){return Cg(this)?void 0===this.filters.find(e=>!e.matches(t)):void 0!==this.filters.find(e=>e.matches(t))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const t=this.ft(e=>e.isInequality());return null!==t?t.field:null}ft(t){for(const e of this.getFlattenedFilters())if(t(e))return e;return null}}function Cg(n){return"and"===n.op}function mC(n){return"or"===n.op}function _C(n){return rM(n)&&Cg(n)}function rM(n){for(const t of n.filters)if(t instanceof ai)return!1;return!0}function vC(n){if(n instanceof On)return n.field.canonicalString()+n.op.toString()+mf(n.value);if(_C(n))return n.filters.map(t=>vC(t)).join(",");{const t=n.filters.map(e=>vC(e)).join(",");return`${n.op}(${t})`}}function sM(n,t){return n instanceof On?(e=n,(i=t)instanceof On&&e.op===i.op&&e.field.isEqual(i.field)&&ll(e.value,i.value)):n instanceof ai?function(e,i){return i instanceof ai&&e.op===i.op&&e.filters.length===i.filters.length&&e.filters.reduce((r,s,c)=>r&&sM(s,i.filters[c]),!0)}(n,t):void Dt();var e,i}function yC(n,t){const e=n.filters.concat(t);return ai.create(e,n.op)}function wC(n){return n instanceof On?`${(t=n).field.canonicalString()} ${t.op} ${mf(t.value)}`:n instanceof ai?function(t){return t.op.toString()+" {"+t.getFilters().map(wC).join(" ,")+"}"}(n):"Filter";var t}class oM extends On{constructor(t,e,i){super(t,e,i),this.key=ft.fromName(i.referenceValue)}matches(t){const e=ft.comparator(t.key,this.key);return this.matchesComparison(e)}}class aM extends On{constructor(t,e){super(t,"in",e),this.keys=bC(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class lM extends On{constructor(t,e){super(t,"not-in",e),this.keys=bC(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function bC(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(i=>ft.fromName(i.referenceValue))}class cM extends On{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return xd(e)&&Md(e.arrayValue,this.value)}}class DC extends On{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Md(this.value.arrayValue,e)}}class uM extends On{constructor(t,e){super(t,"not-in",e)}matches(t){if(Md(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Md(this.value.arrayValue,e)}}class EC extends On{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!xd(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>Md(this.value.arrayValue,i))}}class CC{constructor(t,e=null,i=[],r=[],s=null,c=null,d=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=c,this.endAt=d,this.dt=null}}function lu(n,t=null,e=[],i=[],r=null,s=null,c=null){return new CC(n,t,e,i,r,s,c)}function vf(n){const t=yt(n);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>vC(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),_g(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>mf(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>mf(i)).join(",")),t.dt=e}return t.dt}function J_(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!Hk(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!sM(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!nM(n.startAt,t.startAt)&&nM(n.endAt,t.endAt)}function cu(n){return ft.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function hw(n,t){return n.filters.filter(e=>e instanceof On&&e.field.isEqual(t))}function fw(n,t,e){let i=cw,r=!0;for(const s of hw(n,t)){let c=cw,d=!0;switch(s.op){case"<":case"<=":c=QA(s.value);break;case"==":case"in":case">=":c=s.value;break;case">":c=s.value,d=!1;break;case"!=":case"not-in":c=cw}gC({value:i,inclusive:r},{value:c,inclusive:d})<0&&(i=c,r=d)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const c=e.position[s];gC({value:i,inclusive:r},{value:c,inclusive:e.inclusive})<0&&(i=c,r=e.inclusive);break}return{value:i,inclusive:r}}function jk(n,t,e){let i=Ad,r=!0;for(const s of hw(n,t)){let c=Ad,d=!0;switch(s.op){case">=":case">":c=JA(s.value),d=!1;break;case"==":case"in":case"<=":c=s.value;break;case"<":c=s.value,d=!1;break;case"!=":case"not-in":c=Ad}XA({value:i,inclusive:r},{value:c,inclusive:d})>0&&(i=c,r=d)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const c=e.position[s];XA({value:i,inclusive:r},{value:c,inclusive:e.inclusive})>0&&(i=c,r=e.inclusive);break}return{value:i,inclusive:r}}class ic{constructor(t,e=null,i=[],r=[],s=null,c="F",d=null,p=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=c,this.startAt=d,this.endAt=p,this.wt=null,this._t=null}}function TC(n,t,e,i,r,s,c,d){return new ic(n,t,e,i,r,s,c,d)}function X_(n){return new ic(n)}function yf(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function IC(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function pw(n){for(const t of n.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function SC(n){return null!==n.collectionGroup}function Ca(n){const t=yt(n);if(null===t.wt){t.wt=[];const e=pw(t),i=IC(t);if(null!==e&&null===i)e.isKeyField()||t.wt.push(new Eg(e)),t.wt.push(new Eg(ki.keyField(),"asc"));else{let r=!1;for(const s of t.explicitOrderBy)t.wt.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new Eg(ki.keyField(),s))}}}return t.wt}function lo(n){const t=yt(n);if(!t._t)if("F"===t.limitType)t._t=lu(t.path,t.collectionGroup,Ca(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const s of Ca(t))e.push(new Eg(s.field,"desc"===s.dir?"asc":"desc"));const i=t.endAt?new Rd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Rd(t.startAt.position,t.startAt.inclusive):null;t._t=lu(t.path,t.collectionGroup,e,t.filters,t.limit,i,r)}return t._t}function Tg(n,t){t.getFirstInequalityField(),pw(n);const e=n.filters.concat([t]);return new ic(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function wf(n,t,e){return new ic(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function ws(n,t){return J_(lo(n),lo(t))&&n.limitType===t.limitType}function Gk(n){return`${vf(lo(n))}|lt:${n.limitType}`}function gw(n){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(i=>wC(i)).join(", ")}]`),_g(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(i=>{return`${(r=i).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>mf(i)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>mf(i)).join(",")),`Target(${e})`}(lo(n))}; limitType=${n.limitType})`}function Ig(n,t){return t.isFoundDocument()&&function(e,i){const r=i.key.path;return null!==e.collectionGroup?i.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):ft.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}(n,t)&&function(e,i){for(const r of Ca(e))if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,t)&&function(e,i){for(const r of e.filters)if(!r.matches(i))return!1;return!0}(n,t)&&(i=t,!((e=n).startAt&&!function(r,s,c){const d=tM(r,s,c);return r.inclusive?d<=0:d<0}(e.startAt,Ca(e),i)||e.endAt&&!function(r,s,c){const d=tM(r,s,c);return r.inclusive?d>=0:d>0}(e.endAt,Ca(e),i)));var e,i}function dM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function AC(n){return(t,e)=>{let i=!1;for(const r of Ca(n)){const s=hM(r,t,e);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function hM(n,t,e){const i=n.field.isKeyField()?ft.comparator(t.key,e.key):function(r,s,c){const d=s.data.field(r),p=c.data.field(r);return null!==d&&null!==p?Nd(d,p):Dt()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Dt()}}class rc{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,t))return s}has(t){return void 0!==this.get(t)}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(void 0===r)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return 1===i.length?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Id(this.inner,(e,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return uC(this.inner)}size(){return this.innerSize}}const fM=new Pi(ft.comparator);function ko(){return fM}const pM=new Pi(ft.comparator);function ev(...n){let t=pM;for(const e of n)t=t.insert(e.key,e);return t}function Sg(n){let t=pM;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function sc(){return tv()}function gM(){return tv()}function tv(){return new rc(n=>n.toString(),(n,t)=>n.isEqual(t))}const mw=new Pi(ft.comparator),mM=new Gn(ft.comparator);function hn(...n){let t=mM;for(const e of n)t=t.add(e);return t}const _M=new Gn(on);function MC(){return _M}function Ag(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vg(t)?"-0":t}}function Mg(n){return{integerValue:""+n}}function vM(n,t){return eC(t)?Mg(t):Ag(n,t)}class _w{constructor(){this._=void 0}}function $k(n,t,e){return n instanceof bf?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&lw(r)&&(r=bg(r)),r&&(s.fields.__previous_value__=r),{mapValue:s}}(e,t):n instanceof Df?xC(n,t):n instanceof Ef?wM(n,t):function(i,r){const s=NC(i,r),c=zk(s)+zk(i.gt);return K_(s)&&K_(i.gt)?Mg(c):Ag(i.serializer,c)}(n,t)}function yM(n,t,e){return n instanceof Df?xC(n,t):n instanceof Ef?wM(n,t):e}function NC(n,t){return n instanceof nv?K_(e=t)||(i=e)&&"doubleValue"in i?t:{integerValue:0}:null;var i,e}class bf extends _w{}class Df extends _w{constructor(t){super(),this.elements=t}}function xC(n,t){const e=Wk(t);for(const i of n.elements)e.some(r=>ll(r,i))||e.push(i);return{arrayValue:{values:e}}}class Ef extends _w{constructor(t){super(),this.elements=t}}function wM(n,t){let e=Wk(t);for(const i of n.elements)e=e.filter(r=>!ll(r,i));return{arrayValue:{values:e}}}class nv extends _w{constructor(t,e){super(),this.serializer=t,this.gt=e}}function zk(n){return vr(n.integerValue||n.doubleValue)}function Wk(n){return xd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class vw{constructor(t,e){this.field=t,this.transform=e}}class yw{constructor(t,e){this.version=t,this.transformResults=e}}class qi{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new qi}static exists(t){return new qi(void 0,t)}static updateTime(t){return new qi(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function ww(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class iv{}function Ng(n,t){if(!n.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return n.isNoDocument()?new oc(n.key,qi.none()):new sv(n.key,n.data,qi.none());{const e=n.data,i=Rs.empty();let r=new Gn(ki.comparator);for(let s of t.fields)if(!r.has(s)){let c=e.field(s);null===c&&s.length>1&&(s=s.popLast(),c=e.field(s)),null===c?i.delete(s):i.set(s,c),r=r.add(s)}return new uu(n.key,i,new ir(r.toArray()),qi.none())}}function qk(n,t,e){n instanceof sv?function(i,r,s){const c=i.value.clone(),d=EM(i.fieldTransforms,r,s.transformResults);c.setAll(d),r.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,t,e):n instanceof uu?function(i,r,s){if(!ww(i.precondition,r))return void r.convertToUnknownDocument(s.version);const c=EM(i.fieldTransforms,r,s.transformResults),d=r.data;d.setAll(RC(i)),d.setAll(c),r.convertToFoundDocument(s.version,d).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function rv(n,t,e,i){return n instanceof sv?function(r,s,c,d){if(!ww(r.precondition,s))return c;const p=r.value.clone(),m=CM(r.fieldTransforms,d,s);return p.setAll(m),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),null}(n,t,e,i):n instanceof uu?function(r,s,c,d){if(!ww(r.precondition,s))return c;const p=CM(r.fieldTransforms,d,s),m=s.data;return m.setAll(RC(r)),m.setAll(p),s.convertToFoundDocument(s.version,m).setHasLocalMutations(),null===c?null:c.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(y=>y.field))}(n,t,e,i):(c=e,ww(n.precondition,s=t)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c);var s,c}function Yk(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),s=NC(i.transform,r||null);null!=s&&(null===e&&(e=Rs.empty()),e.set(i.field,s))}return e||null}function DM(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(i=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===i||e&&i&&pg(e,i,(r,s)=>function bM(n,t){return n.field.isEqual(t.field)&&(i=t.transform,(e=n.transform)instanceof Df&&i instanceof Df||e instanceof Ef&&i instanceof Ef?pg(e.elements,i.elements,ll):e instanceof nv&&i instanceof nv?ll(e.gt,i.gt):e instanceof bf&&i instanceof bf);var e,i}(r,s))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,i}class sv extends iv{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class uu extends iv{constructor(t,e,i,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function RC(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function EM(n,t,e){const i=new Map;Lt(n.length===e.length);for(let r=0;r<e.length;r++){const s=n[r],c=s.transform,d=t.data.field(s.field);i.set(s.field,yM(c,d,e[r]))}return i}function CM(n,t,e){const i=new Map;for(const r of n){const s=r.transform,c=e.data.field(r.field);i.set(r.field,$k(s,c,t))}return i}class oc extends iv{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class OC extends iv{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class bw{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&qk(s,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=rv(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=rv(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=gM();return this.mutations.forEach(r=>{const s=t.get(r.key),c=s.overlayedDocument;let d=this.applyToLocalView(c,s.mutatedFields);d=e.has(r.key)?null:d;const p=Ng(c,d);null!==p&&i.set(r.key,p),c.isValidDocument()||c.convertToNoDocument(Bt.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),hn())}isEqual(t){return this.batchId===t.batchId&&pg(this.mutations,t.mutations,(e,i)=>DM(e,i))&&pg(this.baseMutations,t.baseMutations,(e,i)=>DM(e,i))}}class kC{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){Lt(t.mutations.length===i.length);let r=mw;const s=t.mutations;for(let c=0;c<s.length;c++)r=r.insert(s[c].key,i[c].version);return new kC(t,e,i,r)}}class Dw{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class TM{constructor(t,e){this.count=t,this.unchangedNames=e}}var Gr,kn;function IM(n){switch(n){default:return Dt();case be.CANCELLED:case be.UNKNOWN:case be.DEADLINE_EXCEEDED:case be.RESOURCE_EXHAUSTED:case be.INTERNAL:case be.UNAVAILABLE:case be.UNAUTHENTICATED:return!1;case be.INVALID_ARGUMENT:case be.NOT_FOUND:case be.ALREADY_EXISTS:case be.PERMISSION_DENIED:case be.FAILED_PRECONDITION:case be.ABORTED:case be.OUT_OF_RANGE:case be.UNIMPLEMENTED:case be.DATA_LOSS:return!0}}function PC(n){if(void 0===n)return Oi("GRPC error has no .code"),be.UNKNOWN;switch(n){case Gr.OK:return be.OK;case Gr.CANCELLED:return be.CANCELLED;case Gr.UNKNOWN:return be.UNKNOWN;case Gr.DEADLINE_EXCEEDED:return be.DEADLINE_EXCEEDED;case Gr.RESOURCE_EXHAUSTED:return be.RESOURCE_EXHAUSTED;case Gr.INTERNAL:return be.INTERNAL;case Gr.UNAVAILABLE:return be.UNAVAILABLE;case Gr.UNAUTHENTICATED:return be.UNAUTHENTICATED;case Gr.INVALID_ARGUMENT:return be.INVALID_ARGUMENT;case Gr.NOT_FOUND:return be.NOT_FOUND;case Gr.ALREADY_EXISTS:return be.ALREADY_EXISTS;case Gr.PERMISSION_DENIED:return be.PERMISSION_DENIED;case Gr.FAILED_PRECONDITION:return be.FAILED_PRECONDITION;case Gr.ABORTED:return be.ABORTED;case Gr.OUT_OF_RANGE:return be.OUT_OF_RANGE;case Gr.UNIMPLEMENTED:return be.UNIMPLEMENTED;case Gr.DATA_LOSS:return be.DATA_LOSS;default:return Dt()}}(kn=Gr||(Gr={}))[kn.OK=0]="OK",kn[kn.CANCELLED=1]="CANCELLED",kn[kn.UNKNOWN=2]="UNKNOWN",kn[kn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kn[kn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kn[kn.NOT_FOUND=5]="NOT_FOUND",kn[kn.ALREADY_EXISTS=6]="ALREADY_EXISTS",kn[kn.PERMISSION_DENIED=7]="PERMISSION_DENIED",kn[kn.UNAUTHENTICATED=16]="UNAUTHENTICATED",kn[kn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kn[kn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kn[kn.ABORTED=10]="ABORTED",kn[kn.OUT_OF_RANGE=11]="OUT_OF_RANGE",kn[kn.UNIMPLEMENTED=12]="UNIMPLEMENTED",kn[kn.INTERNAL=13]="INTERNAL",kn[kn.UNAVAILABLE=14]="UNAVAILABLE",kn[kn.DATA_LOSS=15]="DATA_LOSS";class Ew{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Cw}static getOrCreateInstance(){return null===Cw&&(Cw=new Ew),Cw}onExistenceFilterMismatch(t){const e=Symbol();return this.onExistenceFilterMismatchCallbacks.set(e,t),()=>this.onExistenceFilterMismatchCallbacks.delete(e)}notifyOnExistenceFilterMismatch(t){this.onExistenceFilterMismatchCallbacks.forEach(e=>e(t))}}let Cw=null;function SM(){return new TextEncoder}const Kk=new fg([4294967295,4294967295],0);function Tw(n){const t=SM().encode(n),e=new uV;return e.update(t),new Uint8Array(e.digest())}function AM(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new fg([e,i],0),new fg([r,s],0)]}class Iw{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new ov(`Invalid padding: ${e}`);if(i<0)throw new ov(`Invalid hash count: ${i}`);if(t.length>0&&0===this.hashCount)throw new ov(`Invalid hash count: ${i}`);if(0===t.length&&0!==e)throw new ov(`Invalid padding when bitmap length is 0: ${e}`);this.It=8*t.length-e,this.Tt=fg.fromNumber(this.It)}Et(t,e,i){let r=t.add(e.multiply(fg.fromNumber(i)));return 1===r.compare(Kk)&&(r=new fg([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(t){return 0!=(this.bitmap[Math.floor(t/8)]&1<<t%8)}vt(t){if(0===this.It)return!1;const e=Tw(t),[i,r]=AM(e);for(let s=0;s<this.hashCount;s++){const c=this.Et(i,r,s);if(!this.At(c))return!1}return!0}static create(t,e,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),c=new Iw(s,r,e);return i.forEach(d=>c.insert(d)),c}insert(t){if(0===this.It)return;const e=Tw(t),[i,r]=AM(e);for(let s=0;s<this.hashCount;s++){const c=this.Et(i,r,s);this.Rt(c)}}Rt(t){const e=Math.floor(t/8);this.bitmap[e]|=1<<t%8}}class ov extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class av{constructor(t,e,i,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const r=new Map;return r.set(t,lv.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new av(Bt.min(),r,new Pi(on),ko(),hn())}}class lv{constructor(t,e,i,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new lv(i,e,hn(),hn(),hn())}}class Sw{constructor(t,e,i,r){this.Pt=t,this.removedTargetIds=e,this.key=i,this.bt=r}}class MM{constructor(t,e){this.targetId=t,this.Vt=e}}class NM{constructor(t,e,i=jr.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class xM{constructor(){this.St=0,this.Dt=LC(),this.Ct=jr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(t){t.approximateByteSize()>0&&(this.Nt=!0,this.Ct=t)}Ot(){let t=hn(),e=hn(),i=hn();return this.Dt.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:Dt()}}),new lv(this.Ct,this.xt,t,e,i)}Ft(){this.Nt=!1,this.Dt=LC()}Bt(t,e){this.Nt=!0,this.Dt=this.Dt.insert(t,e)}Lt(t){this.Nt=!0,this.Dt=this.Dt.remove(t)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Qk{constructor(t){this.Gt=t,this.Qt=new Map,this.jt=ko(),this.zt=FC(),this.Wt=new Pi(on)}Ht(t){for(const e of t.Pt)t.bt&&t.bt.isFoundDocument()?this.Jt(e,t.bt):this.Yt(e,t.key,t.bt);for(const e of t.removedTargetIds)this.Yt(e,t.key,t.bt)}Xt(t){this.forEachTarget(t,e=>{const i=this.Zt(e);switch(t.state){case 0:this.te(e)&&i.$t(t.resumeToken);break;case 1:i.Ut(),i.kt||i.Ft(),i.$t(t.resumeToken);break;case 2:i.Ut(),i.kt||this.removeTarget(e);break;case 3:this.te(e)&&(i.Kt(),i.$t(t.resumeToken));break;case 4:this.te(e)&&(this.ee(e),i.$t(t.resumeToken));break;default:Dt()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Qt.forEach((i,r)=>{this.te(r)&&e(r)})}ne(t){var e;const i=t.targetId,r=t.Vt.count,s=this.se(i);if(s){const c=s.target;if(cu(c))if(0===r){const d=new ft(c.path);this.Yt(i,d,Fi.newNoDocument(d,Bt.min()))}else Lt(1===r);else{const d=this.ie(i);if(d!==r){const p=this.re(t,d);0!==p&&(this.ee(i),this.Wt=this.Wt.insert(i,2===p?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(e=Ew.instance)||void 0===e||e.notifyOnExistenceFilterMismatch(function(m,y,T){var A,x,P,V,G,te;const se={localCacheCount:y,existenceFilterCount:T.count},le=T.unchangedNames;return le&&(se.bloomFilter={applied:0===m,hashCount:null!==(A=le?.hashCount)&&void 0!==A?A:0,bitmapLength:null!==(V=null===(P=null===(x=le?.bits)||void 0===x?void 0:x.bitmap)||void 0===P?void 0:P.length)&&void 0!==V?V:0,padding:null!==(te=null===(G=le?.bits)||void 0===G?void 0:G.padding)&&void 0!==te?te:0}),se}(p,d,t.Vt))}}}}re(t,e){const{unchangedNames:i,count:r}=t.Vt;if(!i||!i.bits)return 1;const{bits:{bitmap:s="",padding:c=0},hashCount:d=0}=i;let p,m;try{p=ru(s).toUint8Array()}catch(y){if(y instanceof Ea)return Qo("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw y}try{m=new Iw(p,c,d)}catch(y){return Qo(y instanceof ov?"BloomFilter error: ":"Applying bloom filter failed: ",y),1}return 0===m.It?1:r!==e-this.oe(t.targetId,m)?2:0}oe(t,e){const i=this.Gt.getRemoteKeysForTarget(t);let r=0;return i.forEach(s=>{const c=this.Gt.ue(),d=`projects/${c.projectId}/databases/${c.database}/documents/${s.path.canonicalString()}`;e.vt(d)||(this.Yt(t,s,null),r++)}),r}ce(t){const e=new Map;this.Qt.forEach((s,c)=>{const d=this.se(c);if(d){if(s.current&&cu(d.target)){const p=new ft(d.target.path);null!==this.jt.get(p)||this.ae(c,p)||this.Yt(c,p,Fi.newNoDocument(p,t))}s.Mt&&(e.set(c,s.Ot()),s.Ft())}});let i=hn();this.zt.forEach((s,c)=>{let d=!0;c.forEachWhile(p=>{const m=this.se(p);return!m||"TargetPurposeLimboResolution"===m.purpose||(d=!1,!1)}),d&&(i=i.add(s))}),this.jt.forEach((s,c)=>c.setReadTime(t));const r=new av(t,e,this.Wt,this.jt,i);return this.jt=ko(),this.zt=FC(),this.Wt=new Pi(on),r}Jt(t,e){if(!this.te(t))return;const i=this.ae(t,e.key)?2:0;this.Zt(t).Bt(e.key,i),this.jt=this.jt.insert(e.key,e),this.zt=this.zt.insert(e.key,this.he(e.key).add(t))}Yt(t,e,i){if(!this.te(t))return;const r=this.Zt(t);this.ae(t,e)?r.Bt(e,1):r.Lt(e),this.zt=this.zt.insert(e,this.he(e).delete(t)),i&&(this.jt=this.jt.insert(e,i))}removeTarget(t){this.Qt.delete(t)}ie(t){const e=this.Zt(t).Ot();return this.Gt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}qt(t){this.Zt(t).qt()}Zt(t){let e=this.Qt.get(t);return e||(e=new xM,this.Qt.set(t,e)),e}he(t){let e=this.zt.get(t);return e||(e=new Gn(on),this.zt=this.zt.insert(t,e)),e}te(t){const e=null!==this.se(t);return e||Ke("WatchChangeAggregator","Detected inactive target",t),e}se(t){const e=this.Qt.get(t);return e&&e.kt?null:this.Gt.le(t)}ee(t){this.Qt.set(t,new xM),this.Gt.getRemoteKeysForTarget(t).forEach(e=>{this.Yt(t,e,null)})}ae(t,e){return this.Gt.getRemoteKeysForTarget(t).has(e)}}function FC(){return new Pi(ft.comparator)}function LC(){return new Pi(ft.comparator)}const RM={asc:"ASCENDING",desc:"DESCENDING"},Jk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OM={and:"AND",or:"OR"};class Xk{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function BC(n,t){return n.useProto3Json||_g(t)?t:{value:t}}function xg(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function kM(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function VC(n,t){return xg(n,t.toTimestamp())}function rr(n){return Lt(!!n),Bt.fromTimestamp(function(t){const e=Sd(t);return new Wi(e.seconds,e.nanos)}(n))}function Aw(n,t){return(e=n,new Rn(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function Mw(n){const t=Rn.fromString(n);return Lt(YC(t)),t}function cv(n,t){return Aw(n.databaseId,t.path)}function ac(n,t){const e=Mw(t);if(e.get(1)!==n.databaseId.projectId)throw new Ge(be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Ge(be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new ft(Od(e))}function uv(n,t){return Aw(n.databaseId,t)}function PM(n){const t=Mw(n);return 4===t.length?Rn.emptyPath():Od(t)}function Rg(n){return new Rn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Od(n){return Lt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function UC(n,t,e){return{name:cv(n,t),fields:e.value.mapValue.fields}}function FM(n,t,e){const i=ac(n,t.name),r=rr(t.updateTime),s=t.createTime?rr(t.createTime):Bt.min(),c=new Rs({mapValue:{fields:t.fields}}),d=Fi.newFoundDocument(i,r,s,c);return e&&d.setHasCommittedMutations(),e?d.setHasCommittedMutations():d}function Cf(n,t){let e;if(t instanceof sv)e={update:UC(n,t.key,t.value)};else if(t instanceof oc)e={delete:cv(n,t.key)};else if(t instanceof uu)e={update:UC(n,t.key,t.data),updateMask:eP(t.fieldMask)};else{if(!(t instanceof OC))return Dt();e={verify:cv(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(r,s){const c=s.transform;if(c instanceof bf)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Df)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ef)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof nv)return{fieldPath:s.field.canonicalString(),increment:c.gt};throw Dt()}(0,i))),t.precondition.isNone||(e.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:VC(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:Dt()),e;var r}function jC(n,t){const e=t.currentDocument?void 0!==(r=t.currentDocument).updateTime?qi.updateTime(rr(r.updateTime)):void 0!==r.exists?qi.exists(r.exists):qi.none():qi.none(),i=t.updateTransforms?t.updateTransforms.map(r=>function(s,c){let d=null;"setToServerValue"in c?(Lt("REQUEST_TIME"===c.setToServerValue),d=new bf):"appendMissingElements"in c?d=new Df(c.appendMissingElements.values||[]):"removeAllFromArray"in c?d=new Ef(c.removeAllFromArray.values||[]):"increment"in c?d=new nv(s,c.increment):Dt();const p=ki.fromServerFormat(c.fieldPath);return new vw(p,d)}(n,r)):[];var r;if(t.update){const r=ac(n,t.update.name),s=new Rs({mapValue:{fields:t.update.fields}});if(t.updateMask){const c=new ir((t.updateMask.fieldPaths||[]).map(m=>ki.fromServerFormat(m)));return new uu(r,s,c,e,i)}return new sv(r,s,e,i)}if(t.delete){const r=ac(n,t.delete);return new oc(r,e)}if(t.verify){const r=ac(n,t.verify);return new OC(r,e)}return Dt()}function GC(n,t){return{documents:[uv(n,t.path)]}}function $C(n,t){const e={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(e.parent=uv(n,i),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=uv(n,i.popLast()),e.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(p){if(0!==p.length)return HM(ai.create(p,"and"))}(t.filters);r&&(e.structuredQuery.where=r);const s=function(p){if(0!==p.length)return p.map(m=>{return{field:kd((y=m).field),direction:BM(y.dir)};var y})}(t.orderBy);s&&(e.structuredQuery.orderBy=s);const c=BC(n,t.limit);var d,p;return null!==c&&(e.structuredQuery.limit=c),t.startAt&&(e.structuredQuery.startAt={before:(d=t.startAt).inclusive,values:d.position}),t.endAt&&(e.structuredQuery.endAt={before:!(p=t.endAt).inclusive,values:p.position}),e}function zC(n){let t=PM(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){Lt(1===i);const y=e.from[0];y.allDescendants?r=y.collectionId:t=t.child(y.collectionId)}let s=[];e.where&&(s=function(y){const T=qC(y);return T instanceof ai&&_C(T)?T.getFilters():[T]}(e.where));let c=[];e.orderBy&&(c=e.orderBy.map(y=>{return new Eg(Og((T=y).field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let d=null;e.limit&&(d=function(y){let T;return T="object"==typeof y?y.value:y,_g(T)?null:T}(e.limit));let p=null;var y;e.startAt&&(p=new Rd((y=e.startAt).values||[],!!y.before));let m=null;return e.endAt&&(m=function(y){return new Rd(y.values||[],!y.before)}(e.endAt)),TC(t,r,c,s,d,"F",p,m)}function qC(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Og(t.unaryFilter.field);return On.create(e,"==",{doubleValue:NaN});case"IS_NULL":const i=Og(t.unaryFilter.field);return On.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Og(t.unaryFilter.field);return On.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Og(t.unaryFilter.field);return On.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Dt()}}(n):void 0!==n.fieldFilter?On.create(Og((t=n).fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Dt()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return ai.create(t.compositeFilter.filters.map(e=>qC(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Dt()}}(t.compositeFilter.op))}(n):Dt();var t}function BM(n){return RM[n]}function VM(n){return Jk[n]}function UM(n){return OM[n]}function kd(n){return{fieldPath:n.canonicalString()}}function Og(n){return ki.fromServerFormat(n.fieldPath)}function HM(n){return n instanceof On?function(t){if("=="===t.op){if(fC(t.value))return{unaryFilter:{field:kd(t.field),op:"IS_NAN"}};if(hC(t.value))return{unaryFilter:{field:kd(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(fC(t.value))return{unaryFilter:{field:kd(t.field),op:"IS_NOT_NAN"}};if(hC(t.value))return{unaryFilter:{field:kd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kd(t.field),op:VM(t.op),value:t.value}}}(n):n instanceof ai?function(t){const e=t.getFilters().map(i=>HM(i));return 1===e.length?e[0]:{compositeFilter:{op:UM(t.op),filters:e}}}(n):Dt()}function eP(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function YC(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Pd{constructor(t,e,i,r,s=Bt.min(),c=Bt.min(),d=jr.EMPTY_BYTE_STRING,p=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(t){return new Pd(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Pd(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Pd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Pd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class ZC{constructor(t){this.fe=t}}function jM(n,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:KC(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document={name:cv(r=n.fe,(s=t).key),fields:s.data.value.mapValue.fields,updateTime:xg(r,s.version.toTimestamp()),createTime:xg(r,s.createTime.toTimestamp())};else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:Tf(t.version)};else{if(!t.isUnknownDocument())return Dt();i.unknownDocument={path:e.path.toArray(),version:Tf(t.version)}}var r,s;return i}function KC(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function Tf(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function If(n){const t=new Wi(n.seconds,n.nanoseconds);return Bt.fromTimestamp(t)}function Fd(n,t){const e=(t.baseMutations||[]).map(s=>jC(n.fe,s));for(let s=0;s<t.mutations.length-1;++s)s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(t.mutations[s].updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s);const i=t.mutations.map(s=>jC(n.fe,s)),r=Wi.fromMillis(t.localWriteTimeMs);return new bw(t.batchId,r,e,i)}function kg(n){const t=If(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?If(n.lastLimboFreeSnapshotVersion):Bt.min();let i;var r;return void 0!==n.query.documents?(Lt(1===(r=n.query).documents.length),i=lo(X_(PM(r.documents[0])))):i=lo(zC(n.query)),new Pd(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,t,e,jr.fromBase64String(n.resumeToken))}function QC(n,t){const e=Tf(t.snapshotVersion),i=Tf(t.lastLimboFreeSnapshotVersion);let r;r=cu(t.target)?GC(n.fe,t.target):$C(n.fe,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:vf(t.target),readTime:e,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function Nw(n){const t=zC({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?wf(t,t.limit,"L"):t}function xw(n,t){return new Dw(t.largestBatchId,jC(n.fe,t.overlayMutation))}function JC(n,t){const e=t.path.lastSegment();return[n,xs(t.path.popLast()),e]}function XC(n,t,e,i){return{indexId:n,uid:t.uid||"",sequenceNumber:e,readTime:Tf(i.readTime),documentKey:xs(i.documentKey.path),largestBatchId:i.largestBatchId}}class GM{getBundleMetadata(t,e){return $M(t).get(e).next(i=>{if(i)return{id:(r=i).bundleId,createTime:If(r.createTime),version:r.version};var r})}saveBundleMetadata(t,e){return $M(t).put({bundleId:(i=e).id,createTime:Tf(rr(i.createTime)),version:i.version});var i}getNamedQuery(t,e){return eT(t).get(e).next(i=>{if(i)return{name:(r=i).name,query:Nw(r.bundledQuery),readTime:If(r.readTime)};var r})}saveNamedQuery(t,e){return eT(t).put({name:(i=e).name,readTime:Tf(rr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function $M(n){return ys(n,"bundles")}function eT(n){return ys(n,"namedQueries")}class Ld{constructor(t,e){this.serializer=t,this.userId=e}static de(t,e){return new Ld(t,e.uid||"")}getOverlay(t,e){return Pg(t).get(JC(this.userId,e)).next(i=>i?xw(this.serializer,i):null)}getOverlays(t,e){const i=sc();return _e.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){const r=[];return i.forEach((s,c)=>{const d=new Dw(e,c);r.push(this.we(t,d))}),_e.waitFor(r)}removeOverlaysForBatchId(t,e,i){const r=new Set;e.forEach(c=>r.add(xs(c.getCollectionPath())));const s=[];return r.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);s.push(Pg(t).J("collectionPathOverlayIndex",d))}),_e.waitFor(s)}getOverlaysForCollection(t,e,i){const r=sc(),s=xs(e),c=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Pg(t).j("collectionPathOverlayIndex",c).next(d=>{for(const p of d){const m=xw(this.serializer,p);r.set(m.getKey(),m)}return r})}getOverlaysForCollectionGroup(t,e,i,r){const s=sc();let c;const d=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return Pg(t).X({index:"collectionGroupOverlayIndex",range:d},(p,m,y)=>{const T=xw(this.serializer,m);s.size()<r||T.largestBatchId===c?(s.set(T.getKey(),T),c=T.largestBatchId):y.done()}).next(()=>s)}we(t,e){return Pg(t).put(function(i,r,s){const[c,d,p]=JC(r,s.mutation.key);return{userId:r,collectionPath:d,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Cf(i.fe,s.mutation)}}(this.serializer,this.userId,e))}}function Pg(n){return ys(n,"documentOverlays")}class Bd{constructor(){}_e(t,e){this.me(t,e),e.ge()}me(t,e){if("nullValue"in t)this.ye(e,5);else if("booleanValue"in t)this.ye(e,10),e.pe(t.booleanValue?1:0);else if("integerValue"in t)this.ye(e,15),e.pe(vr(t.integerValue));else if("doubleValue"in t){const i=vr(t.doubleValue);isNaN(i)?this.ye(e,13):(this.ye(e,15),vg(i)?e.pe(0):e.pe(i))}else if("timestampValue"in t){const i=t.timestampValue;this.ye(e,20),"string"==typeof i?e.Ie(i):(e.Ie(`${i.seconds||""}`),e.pe(i.nanos||0))}else if("stringValue"in t)this.Te(t.stringValue,e),this.Ee(e);else if("bytesValue"in t)this.ye(e,30),e.Ae(ru(t.bytesValue)),this.Ee(e);else if("referenceValue"in t)this.ve(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.ye(e,45),e.pe(i.latitude||0),e.pe(i.longitude||0)}else"mapValue"in t?pC(t)?this.ye(e,Number.MAX_SAFE_INTEGER):(this.Re(t.mapValue,e),this.Ee(e)):"arrayValue"in t?(this.Pe(t.arrayValue,e),this.Ee(e)):Dt()}Te(t,e){this.ye(e,25),this.be(t,e)}be(t,e){e.Ie(t)}Re(t,e){const i=t.fields||{};this.ye(e,55);for(const r of Object.keys(i))this.Te(r,e),this.me(i[r],e)}Pe(t,e){const i=t.values||[];this.ye(e,50);for(const r of i)this.me(r,e)}ve(t,e){this.ye(e,37),ft.fromName(t).path.forEach(i=>{this.ye(e,60),this.be(i,e)})}ye(t,e){t.pe(e)}Ee(t){t.pe(2)}}function zM(n){if(0===n)return 8;let t=0;return!(n>>4)&&(t+=4,n<<=4),!(n>>6)&&(t+=2,n<<=2),!(n>>7)&&(t+=1),t}function tT(n){const t=64-function(e){let i=0;for(let r=0;r<8;++r){const s=zM(255&e[r]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(t/8)}Bd.Ve=new Bd;class WM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.De(i.value),i=e.next();this.Ce()}xe(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ne(i.value),i=e.next();this.ke()}Me(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.De(i);else if(i<2048)this.De(960|i>>>6),this.De(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.De(480|i>>>12),this.De(128|63&i>>>6),this.De(128|63&i);else{const r=e.codePointAt(0);this.De(240|r>>>18),this.De(128|63&r>>>12),this.De(128|63&r>>>6),this.De(128|63&r)}}this.Ce()}$e(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ne(i);else if(i<2048)this.Ne(960|i>>>6),this.Ne(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Ne(480|i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i);else{const r=e.codePointAt(0);this.Ne(240|r>>>18),this.Ne(128|63&r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r)}}this.ke()}Oe(t){const e=this.Fe(t),i=tT(e);this.Be(1+i),this.buffer[this.position++]=255&i;for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=255&e[r]}Le(t){const e=this.Fe(t),i=tT(e);this.Be(1+i),this.buffer[this.position++]=~(255&i);for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=~(255&e[r])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(t){this.Be(t.length),this.buffer.set(t,this.position),this.position+=t.length}Qe(){return this.buffer.slice(0,this.position)}Fe(t){const e=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(t),i=0!=(128&e[0]);e[0]^=i?255:128;for(let r=1;r<e.length;++r)e[r]^=i?255:0;return e}De(t){const e=255&t;0===e?(this.Ue(0),this.Ue(255)):255===e?(this.Ue(255),this.Ue(0)):this.Ue(e)}Ne(t){const e=255&t;0===e?(this.Ge(0),this.Ge(255)):255===e?(this.Ge(255),this.Ge(0)):this.Ge(t)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(t){this.Be(1),this.buffer[this.position++]=t}Ge(t){this.Be(1),this.buffer[this.position++]=~t}Be(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class qM{constructor(t){this.je=t}Ae(t){this.je.Se(t)}Ie(t){this.je.Me(t)}pe(t){this.je.Oe(t)}ge(){this.je.qe()}}class nP{constructor(t){this.je=t}Ae(t){this.je.xe(t)}Ie(t){this.je.$e(t)}pe(t){this.je.Le(t)}ge(){this.je.Ke()}}class Rw{constructor(){this.je=new WM,this.ze=new qM(this.je),this.We=new nP(this.je)}seed(t){this.je.seed(t)}He(t){return 0===t?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Fg{constructor(t,e,i,r){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=r}Je(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new Fg(this.indexId,this.documentKey,this.arrayValue,i)}}function du(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=nT(n.arrayValue,t.arrayValue),0!==e?e:(e=nT(n.directionalValue,t.directionalValue),0!==e?e:ft.comparator(n.documentKey,t.documentKey)))}function nT(n,t){for(let e=0;e<n.length&&e<t.length;++e){const i=n[e]-t[e];if(0!==i)return i}return n.length-t.length}class YM{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ye=t.orderBy,this.Xe=[];for(const e of t.filters){const i=e;i.isInequality()?this.Ze=i:this.Xe.push(i)}}tn(t){Lt(t.collectionGroup===this.collectionId);const e=tw(t);if(void 0!==e&&!this.en(e))return!1;const i=ff(t);let r=new Set,s=0,c=0;for(;s<i.length&&this.en(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(void 0!==this.Ze){if(!r.has(this.Ze.field.canonicalString())){const d=i[s];if(!this.nn(this.Ze,d)||!this.sn(this.Ye[c++],d))return!1}++s}for(;s<i.length;++s)if(c>=this.Ye.length||!this.sn(this.Ye[c++],i[s]))return!1;return!0}en(t){for(const e of this.Xe)if(this.nn(e,t))return!0;return!1}nn(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}sn(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}function ZM(n){var t,e;if(Lt(n instanceof On||n instanceof ai),n instanceof On){if(n instanceof DC){const r=(null===(e=null===(t=n.value.arrayValue)||void 0===t?void 0:t.values)||void 0===e?void 0:e.map(s=>On.create(n.field,"==",s)))||[];return ai.create(r,"or")}return n}const i=n.filters.map(r=>ZM(r));return ai.create(i,n.op)}function iP(n){if(0===n.getFilters().length)return[];const t=rT(ZM(n));return Lt(Ow(t)),Sf(t)||iT(t)?[t]:t.getFilters()}function Sf(n){return n instanceof On}function iT(n){return n instanceof ai&&_C(n)}function Ow(n){return Sf(n)||iT(n)||function(t){if(t instanceof ai&&mC(t)){for(const e of t.getFilters())if(!Sf(e)&&!iT(e))return!1;return!0}return!1}(n)}function rT(n){if(Lt(n instanceof On||n instanceof ai),n instanceof On)return n;if(1===n.filters.length)return rT(n.filters[0]);const t=n.filters.map(i=>rT(i));let e=ai.create(t,n.op);return e=sT(e),Ow(e)?e:(Lt(e instanceof ai),Lt(Cg(e)),Lt(e.filters.length>1),e.filters.reduce((i,r)=>KM(i,r)))}function KM(n,t){let e;return Lt(n instanceof On||n instanceof ai),Lt(t instanceof On||t instanceof ai),e=n instanceof On?t instanceof On?ai.create([n,t],"and"):QM(n,t):t instanceof On?QM(t,n):function(i,r){if(Lt(i.filters.length>0&&r.filters.length>0),Cg(i)&&Cg(r))return yC(i,r.getFilters());const s=mC(i)?i:r,c=mC(i)?r:i,d=s.filters.map(p=>KM(p,c));return ai.create(d,"or")}(n,t),sT(e)}function QM(n,t){if(Cg(t))return yC(t,n.getFilters());{const e=t.filters.map(i=>KM(n,i));return ai.create(e,"or")}}function sT(n){if(Lt(n instanceof On||n instanceof ai),n instanceof On)return n;const t=n.getFilters();if(1===t.length)return sT(t[0]);if(rM(n))return n;const e=t.map(r=>sT(r)),i=[];return e.forEach(r=>{r instanceof On?i.push(r):r instanceof ai&&(r.op===n.op?i.push(...r.filters):i.push(r))}),1===i.length?i[0]:ai.create(i,n.op)}class dv{constructor(){this.rn=new oT}addToCollectionParentIndex(t,e){return this.rn.add(e),_e.resolve()}getCollectionParents(t,e){return _e.resolve(this.rn.getEntries(e))}addFieldIndex(t,e){return _e.resolve()}deleteFieldIndex(t,e){return _e.resolve()}getDocumentsMatchingTarget(t,e){return _e.resolve(null)}getIndexType(t,e){return _e.resolve(0)}getFieldIndexes(t,e){return _e.resolve([])}getNextCollectionGroupToUpdate(t){return _e.resolve(null)}getMinOffset(t,e){return _e.resolve(Jo.min())}getMinOffsetFromCollectionGroup(t,e){return _e.resolve(Jo.min())}updateCollectionGroup(t,e,i){return _e.resolve()}updateIndexEntries(t,e){return _e.resolve()}}class oT{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new Gn(Rn.comparator),s=!r.has(i);return this.index[e]=r.add(i),s}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Gn(Rn.comparator)).toArray()}}const kw=new Uint8Array(0);class rP{constructor(t,e){this.user=t,this.databaseId=e,this.on=new oT,this.un=new rc(i=>vf(i),(i,r)=>J_(i,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.on.has(e)){const i=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this.on.add(e)});const s={collectionId:i,parent:xs(r)};return hv(t).put(s)}return _e.resolve()}getCollectionParents(t,e){const i=[],r=IDBKeyRange.bound([e,""],[jA(e),""],!1,!0);return hv(t).j(r).next(s=>{for(const c of s){if(c.collectionId!==e)break;i.push(Xo(c.parent))}return i})}addFieldIndex(t,e){const i=Pw(t),r={indexId:(c=e).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var c;delete r.indexId;const s=i.add(r);if(e.indexState){const c=Bg(t);return s.next(d=>{c.put(XC(d,this.user,e.indexState.sequenceNumber,e.indexState.offset))})}return s.next()}deleteFieldIndex(t,e){const i=Pw(t),r=Bg(t),s=Lg(t);return i.delete(e.indexId).next(()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const i=Lg(t);let r=!0;const s=new Map;return _e.forEach(this.cn(e),c=>this.an(t,c).next(d=>{r&&(r=!!d),s.set(c,d)})).next(()=>{if(r){let c=hn();const d=[];return _e.forEach(s,(p,m)=>{var y;Ke("IndexedDbIndexManager",`Using index ${y=p,`id=${y.indexId}|cg=${y.collectionGroup}|f=${y.fields.map(le=>`${le.fieldPath}:${le.kind}`).join(",")}`} to execute ${vf(e)}`);const T=function(le,de){const Oe=tw(de);if(void 0===Oe)return null;for(const je of hw(le,Oe.fieldPath))switch(je.op){case"array-contains-any":return je.value.arrayValue.values||[];case"array-contains":return[je.value]}return null}(m,p),A=function(le,de){const Oe=new Map;for(const je of ff(de))for(const ct of hw(le,je.fieldPath))switch(ct.op){case"==":case"in":Oe.set(je.fieldPath.canonicalString(),ct.value);break;case"not-in":case"!=":return Oe.set(je.fieldPath.canonicalString(),ct.value),Array.from(Oe.values())}return null}(m,p),x=function(le,de){const Oe=[];let je=!0;for(const ct of ff(de)){const nt=0===ct.kind?fw(le,ct.fieldPath,le.startAt):jk(le,ct.fieldPath,le.startAt);Oe.push(nt.value),je&&(je=nt.inclusive)}return new Rd(Oe,je)}(m,p),P=function(le,de){const Oe=[];let je=!0;for(const ct of ff(de)){const nt=0===ct.kind?jk(le,ct.fieldPath,le.endAt):fw(le,ct.fieldPath,le.endAt);Oe.push(nt.value),je&&(je=nt.inclusive)}return new Rd(Oe,je)}(m,p),V=this.hn(p,m,x),G=this.hn(p,m,P),te=this.ln(p,m,A),se=this.fn(p.indexId,T,V,x.inclusive,G,P.inclusive,te);return _e.forEach(se,le=>i.H(le,e.limit).next(de=>{de.forEach(Oe=>{const je=ft.fromSegments(Oe.documentKey);c.has(je)||(c=c.add(je),d.push(je))})}))}).next(()=>d)}return _e.resolve(null)})}cn(t){let e=this.un.get(t);return e||(e=0===t.filters.length?[t]:iP(ai.create(t.filters,"and")).map(i=>lu(t.path,t.collectionGroup,t.orderBy,i.getFilters(),t.limit,t.startAt,t.endAt)),this.un.set(t,e),e)}fn(t,e,i,r,s,c,d){const p=(null!=e?e.length:1)*Math.max(i.length,s.length),m=p/(null!=e?e.length:1),y=[];for(let T=0;T<p;++T){const A=e?this.dn(e[T/m]):kw,x=this.wn(t,A,i[T%m],r),P=this._n(t,A,s[T%m],c),V=d.map(G=>this.wn(t,A,G,!0));y.push(...this.createRange(x,P,V))}return y}wn(t,e,i,r){const s=new Fg(t,ft.empty(),e,i);return r?s:s.Je()}_n(t,e,i,r){const s=new Fg(t,ft.empty(),e,i);return r?s.Je():s}an(t,e){const i=new YM(e),r=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next(s=>{let c=null;for(const d of s)i.tn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(t,e){let i=2;const r=this.cn(e);return _e.forEach(r,s=>this.an(t,s).next(c=>{c?0!==i&&c.fields.length<function(d){let p=new Gn(ki.comparator),m=!1;for(const y of d.filters)for(const T of y.getFlattenedFilters())T.field.isKeyField()||("array-contains"===T.op||"array-contains-any"===T.op?m=!0:p=p.add(T.field));for(const y of d.orderBy)y.field.isKeyField()||(p=p.add(y.field));return p.size+(m?1:0)}(s)&&(i=1):i=0})).next(()=>null!==e.limit&&r.length>1&&2===i?1:i)}mn(t,e){const i=new Rw;for(const r of ff(t)){const s=e.data.field(r.fieldPath);if(null==s)return null;const c=i.He(r.kind);Bd.Ve._e(s,c)}return i.Qe()}dn(t){const e=new Rw;return Bd.Ve._e(t,e.He(0)),e.Qe()}gn(t,e){const i=new Rw;return Bd.Ve._e(_f(this.databaseId,e),i.He(function(r){const s=ff(r);return 0===s.length?0:s[s.length-1].kind}(t))),i.Qe()}ln(t,e,i){if(null===i)return[];let r=[];r.push(new Rw);let s=0;for(const c of ff(t)){const d=i[s++];for(const p of r)if(this.yn(e,c.fieldPath)&&xd(d))r=this.pn(r,c,d);else{const m=p.He(c.kind);Bd.Ve._e(d,m)}}return this.In(r)}hn(t,e,i){return this.ln(t,e,i.position)}In(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].Qe();return e}pn(t,e,i){const r=[...t],s=[];for(const c of i.arrayValue.values||[])for(const d of r){const p=new Rw;p.seed(d.Qe()),Bd.Ve._e(c,p.He(e.kind)),s.push(p)}return s}yn(t,e){return!!t.filters.find(i=>i instanceof On&&i.field.isEqual(e)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(t,e){const i=Pw(t),r=Bg(t);return(e?i.j("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.j()).next(s=>{const c=[];return _e.forEach(s,d=>r.get([d.indexId,this.uid]).next(p=>{c.push(function(m,y){const T=y?new Cd(y.sequenceNumber,new Jo(If(y.readTime),new ft(Xo(y.documentKey)),y.largestBatchId)):Cd.empty(),A=m.fields.map(([x,P])=>new nw(ki.fromServerFormat(x),P));return new gg(m.indexId,m.collectionGroup,A,T)}(d,p))})).next(()=>c)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:on(i.collectionGroup,r.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){const r=Pw(t),s=Bg(t);return this.Tn(t).next(c=>r.j("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(d=>_e.forEach(d,p=>s.put(XC(p.indexId,this.user,c,i)))))}updateIndexEntries(t,e){const i=new Map;return _e.forEach(e,(r,s)=>{const c=i.get(r.collectionGroup);return(c?_e.resolve(c):this.getFieldIndexes(t,r.collectionGroup)).next(d=>(i.set(r.collectionGroup,d),_e.forEach(d,p=>this.En(t,r,p).next(m=>{const y=this.An(s,p);return m.isEqual(y)?_e.resolve():this.vn(t,s,p,m,y)}))))})}Rn(t,e,i,r){return Lg(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(i,e.key),documentKey:e.key.path.toArray()})}Pn(t,e,i,r){return Lg(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(i,e.key),e.key.path.toArray()])}En(t,e,i){const r=Lg(t);let s=new Gn(du);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.gn(i,e)])},(c,d)=>{s=s.add(new Fg(i.indexId,e,d.arrayValue,d.directionalValue))}).next(()=>s)}An(t,e){let i=new Gn(du);const r=this.mn(e,t);if(null==r)return i;const s=tw(e);if(null!=s){const c=t.data.field(s.fieldPath);if(xd(c))for(const d of c.arrayValue.values||[])i=i.add(new Fg(e.indexId,t.key,this.dn(d),r))}else i=i.add(new Fg(e.indexId,t.key,kw,r));return i}vn(t,e,i,r,s){Ke("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const c=[];return function(d,p,m,y,T){const A=d.getIterator(),x=p.getIterator();let P=gf(A),V=gf(x);for(;P||V;){let G=!1,te=!1;if(P&&V){const se=m(P,V);se<0?te=!0:se>0&&(G=!0)}else null!=P?te=!0:G=!0;G?(y(V),V=gf(x)):te?(T(P),P=gf(A)):(P=gf(A),V=gf(x))}}(r,s,du,d=>{c.push(this.Rn(t,e,i,d))},d=>{c.push(this.Pn(t,e,i,d))}),_e.waitFor(c)}Tn(t){let e=1;return Bg(t).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),e=r.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((c,d)=>du(c,d)).filter((c,d,p)=>!d||0!==du(c,p[d-1]));const r=[];r.push(t);for(const c of i){const d=du(c,t),p=du(c,e);if(0===d)r[0]=t.Je();else if(d>0&&p<0)r.push(c),r.push(c.Je());else if(p>0)break}r.push(e);const s=[];for(let c=0;c<r.length;c+=2){if(this.bn(r[c],r[c+1]))return[];s.push(IDBKeyRange.bound([r[c].indexId,this.uid,r[c].arrayValue,r[c].directionalValue,kw,[]],[r[c+1].indexId,this.uid,r[c+1].arrayValue,r[c+1].directionalValue,kw,[]]))}return s}bn(t,e){return du(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(fv)}getMinOffset(t,e){return _e.mapArray(this.cn(e),i=>this.an(t,i).next(r=>r||Dt())).next(fv)}}function hv(n){return ys(n,"collectionParents")}function Lg(n){return ys(n,"indexEntries")}function Pw(n){return ys(n,"indexConfiguration")}function Bg(n){return ys(n,"indexState")}function fv(n){Lt(0!==n.length);let t=n[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;QE(r,t)<0&&(t=r),e<r.largestBatchId&&(e=r.largestBatchId)}return new Jo(t.readTime,t.documentKey,e)}const JM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ws{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new Ws(t,Ws.DEFAULT_COLLECTION_PERCENTILE,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function aT(n,t,e){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],c=IDBKeyRange.only(e.batchId);let d=0;const p=i.X({range:c},(y,T,A)=>(d++,A.delete()));s.push(p.next(()=>{Lt(1===d)}));const m=[];for(const y of e.mutations){const T=WA(t,y.key.path,e.batchId);s.push(r.delete(T)),m.push(y.key)}return _e.waitFor(s).next(()=>m)}function Fw(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw Dt();t=n.noDocument}return JSON.stringify(t).length}Ws.DEFAULT_COLLECTION_PERCENTILE=10,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ws.DEFAULT=new Ws(41943040,Ws.DEFAULT_COLLECTION_PERCENTILE,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ws.DISABLED=new Ws(-1,0,0);class Lw{constructor(t,e,i,r){this.userId=t,this.serializer=e,this.indexManager=i,this.referenceDelegate=r,this.Vn={}}static de(t,e,i,r){Lt(""!==t.uid);const s=t.isAuthenticated()?t.uid:"";return new Lw(s,e,i,r)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return cl(t).X({index:"userMutationsIndex",range:i},(r,s,c)=>{e=!1,c.done()}).next(()=>e)}addMutationBatch(t,e,i,r){const s=Vg(t),c=cl(t);return c.add({}).next(d=>{Lt("number"==typeof d);const p=new bw(d,e,i,r),m=function(A,x,P){const V=P.baseMutations.map(te=>Cf(A.fe,te)),G=P.mutations.map(te=>Cf(A.fe,te));return{userId:x,batchId:P.batchId,localWriteTimeMs:P.localWriteTime.toMillis(),baseMutations:V,mutations:G}}(this.serializer,this.userId,p),y=[];let T=new Gn((A,x)=>on(A.canonicalString(),x.canonicalString()));for(const A of r){const x=WA(this.userId,A.key.path,d);T=T.add(A.key.path.popLast()),y.push(c.put(m)),y.push(s.put(x,nC))}return T.forEach(A=>{y.push(this.indexManager.addToCollectionParentIndex(t,A))}),t.addOnCommittedListener(()=>{this.Vn[d]=p.keys()}),_e.waitFor(y).next(()=>p)})}lookupMutationBatch(t,e){return cl(t).get(e).next(i=>i?(Lt(i.userId===this.userId),Fd(this.serializer,i)):null)}Sn(t,e){return this.Vn[e]?_e.resolve(this.Vn[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const r=i.keys();return this.Vn[e]=r,r}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return cl(t).X({index:"userMutationsIndex",range:r},(c,d,p)=>{d.userId===this.userId&&(Lt(d.batchId>=i),s=Fd(this.serializer,d)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return cl(t).X({index:"userMutationsIndex",range:e,reverse:!0},(r,s,c)=>{i=s.batchId,c.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return cl(t).j("userMutationsIndex",e).next(i=>i.map(r=>Fd(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=aw(this.userId,e.path),r=IDBKeyRange.lowerBound(i),s=[];return Vg(t).X({range:r},(c,d,p)=>{const[m,y,T]=c,A=Xo(y);if(m===this.userId&&e.path.isEqual(A))return cl(t).get(T).next(x=>{if(!x)throw Dt();Lt(x.userId===this.userId),s.push(Fd(this.serializer,x))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Gn(on);const r=[];return e.forEach(s=>{const c=aw(this.userId,s.path),d=IDBKeyRange.lowerBound(c),p=Vg(t).X({range:d},(m,y,T)=>{const[A,x,P]=m,V=Xo(x);A===this.userId&&s.path.isEqual(V)?i=i.add(P):T.done()});r.push(p)}),_e.waitFor(r).next(()=>this.Dn(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1,s=aw(this.userId,i),c=IDBKeyRange.lowerBound(s);let d=new Gn(on);return Vg(t).X({range:c},(p,m,y)=>{const[T,A,x]=p,P=Xo(A);T===this.userId&&i.isPrefixOf(P)?P.length===r&&(d=d.add(x)):y.done()}).next(()=>this.Dn(t,d))}Dn(t,e){const i=[],r=[];return e.forEach(s=>{r.push(cl(t).get(s).next(c=>{if(null===c)throw Dt();Lt(c.userId===this.userId),i.push(Fd(this.serializer,c))}))}),_e.waitFor(r).next(()=>i)}removeMutationBatch(t,e){return aT(t.ht,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this.Cn(e.batchId)}),_e.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}Cn(t){delete this.Vn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return _e.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return Vg(t).X({range:i},(s,c,d)=>{if(s[0]===this.userId){const p=Xo(s[1]);r.push(p)}else d.done()}).next(()=>{Lt(0===r.length)})})}containsKey(t,e){return lT(t,this.userId,e)}xn(t){return XM(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function lT(n,t,e){const i=aw(t,e.path),r=i[1],s=IDBKeyRange.lowerBound(i);let c=!1;return Vg(n).X({range:s,Y:!0},(d,p,m)=>{const[y,T,A]=d;y===t&&T===r&&(c=!0),m.done()}).next(()=>c)}function cl(n){return ys(n,"mutations")}function Vg(n){return ys(n,"documentMutations")}function XM(n){return ys(n,"mutationQueues")}class Vd{constructor(t){this.Nn=t}next(){return this.Nn+=2,this.Nn}static kn(){return new Vd(0)}static Mn(){return new Vd(-1)}}class eN{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.$n(t).next(e=>{const i=new Vd(e.highestTargetId);return e.highestTargetId=i.next(),this.On(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.$n(t).next(e=>Bt.fromTimestamp(new Wi(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.$n(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.$n(t).next(r=>(r.highestListenSequenceNumber=e,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.On(t,r)))}addTargetData(t,e){return this.Fn(t,e).next(()=>this.$n(t).next(i=>(i.targetCount+=1,this.Bn(e,i),this.On(t,i))))}updateTargetData(t,e){return this.Fn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>Ud(t).delete(e.targetId)).next(()=>this.$n(t)).next(i=>(Lt(i.targetCount>0),i.targetCount-=1,this.On(t,i)))}removeTargets(t,e,i){let r=0;const s=[];return Ud(t).X((c,d)=>{const p=kg(d);p.sequenceNumber<=e&&null===i.get(p.targetId)&&(r++,s.push(this.removeTargetData(t,p)))}).next(()=>_e.waitFor(s)).next(()=>r)}forEachTarget(t,e){return Ud(t).X((i,r)=>{const s=kg(r);e(s)})}$n(t){return cT(t).get("targetGlobalKey").next(e=>(Lt(null!==e),e))}On(t,e){return cT(t).put("targetGlobalKey",e)}Fn(t,e){return Ud(t).put(QC(this.serializer,e))}Bn(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.$n(t).next(e=>e.targetCount)}getTargetData(t,e){const i=vf(e),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return Ud(t).X({range:r,index:"queryTargetsIndex"},(c,d,p)=>{const m=kg(d);J_(e,m.target)&&(s=m,p.done())}).next(()=>s)}addMatchingKeys(t,e,i){const r=[],s=Hd(t);return e.forEach(c=>{const d=xs(c.path);r.push(s.put({targetId:i,path:d})),r.push(this.referenceDelegate.addReference(t,i,c))}),_e.waitFor(r)}removeMatchingKeys(t,e,i){const r=Hd(t);return _e.forEach(e,s=>{const c=xs(s.path);return _e.waitFor([r.delete([i,c]),this.referenceDelegate.removeReference(t,i,s)])})}removeMatchingKeysForTargetId(t,e){const i=Hd(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),r=Hd(t);let s=hn();return r.X({range:i,Y:!0},(c,d,p)=>{const m=Xo(c[1]),y=new ft(m);s=s.add(y)}).next(()=>s)}containsKey(t,e){const i=xs(e.path),r=IDBKeyRange.bound([i],[jA(i)],!1,!0);let s=0;return Hd(t).X({index:"documentTargetsIndex",Y:!0,range:r},([c,d],p,m)=>{0!==c&&(s++,m.done())}).next(()=>s>0)}le(t,e){return Ud(t).get(e).next(i=>i?kg(i):null)}}function Ud(n){return ys(n,"targets")}function cT(n){return ys(n,"targetGlobal")}function Hd(n){return ys(n,"targetDocuments")}function uT([n,t],[e,i]){const r=on(n,e);return 0===r?on(t,i):r}class tN{constructor(t){this.Ln=t,this.buffer=new Gn(uT),this.qn=0}Un(){return++this.qn}Kn(t){const e=[t,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();uT(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class nN{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(t){var e=this;Ke("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,Ee.Z)(function*(){e.Gn=null;try{yield e.localStore.collectGarbage(e.garbageCollector)}catch(i){nu(i)?Ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield tu(i)}yield e.Qn(3e5)}))}}class sP{constructor(t,e){this.jn=t,this.params=e}calculateTargetCount(t,e){return this.jn.zn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(0===e)return _e.resolve(Oo.ct);const i=new tN(e);return this.jn.forEachTarget(t,r=>i.Kn(r.sequenceNumber)).next(()=>this.jn.Wn(t,r=>i.Kn(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.jn.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.jn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(Ke("LruGarbageCollector","Garbage collection skipped; disabled"),_e.resolve(JM)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(Ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),JM):this.Hn(t,e))}getCacheSize(t){return this.jn.getCacheSize(t)}Hn(t,e){let i,r,s,c,d,p,m;const y=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(Ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),r=this.params.maximumSequenceNumbersToCollect):r=T,c=Date.now(),this.nthSequenceNumber(t,r))).next(T=>(i=T,d=Date.now(),this.removeTargets(t,i,e))).next(T=>(s=T,p=Date.now(),this.removeOrphanedDocuments(t,i))).next(T=>(m=Date.now(),W_()<=Hr.in.DEBUG&&Ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-y}ms\n\tDetermined least recently used ${r} in `+(d-c)+`ms\n\tRemoved ${s} targets in `+(p-d)+`ms\n\tRemoved ${T} documents in `+(m-p)+`ms\nTotal Duration: ${m-y}ms`),_e.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:T})))}}class dT{constructor(t,e){this.db=t,this.garbageCollector=function Bw(n,t){return new sP(n,t)}(this,e)}zn(t){const e=this.Jn(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}Jn(t){let e=0;return this.Wn(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Wn(t,e){return this.Yn(t,(i,r)=>e(r))}addReference(t,e,i){return pv(t,i)}removeReference(t,e,i){return pv(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return pv(t,e)}Xn(t,e){return function(i,r){let s=!1;return XM(i).Z(c=>lT(i,c,r).next(d=>(d&&(s=!0),_e.resolve(!d)))).next(()=>s)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Yn(t,(c,d)=>{if(d<=e){const p=this.Xn(t,c).next(m=>{if(!m)return s++,i.getEntry(t,c).next(()=>(i.removeEntry(c,Bt.min()),Hd(t).delete([0,xs(c.path)])))});r.push(p)}}).next(()=>_e.waitFor(r)).next(()=>i.apply(t)).next(()=>s)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return pv(t,e)}Yn(t,e){const i=Hd(t);let r,s=Oo.ct;return i.X({index:"documentTargetsIndex"},([c,d],{path:p,sequenceNumber:m})=>{0===c?(s!==Oo.ct&&e(new ft(Xo(r)),s),s=m,r=p):s=Oo.ct}).next(()=>{s!==Oo.ct&&e(new ft(Xo(r)),s)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function pv(n,t){return Hd(n).put((i=n.currentSequenceNumber,{targetId:0,path:xs(t.path),sequenceNumber:i}));var i}class Vw{constructor(){this.changes=new rc(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Fi.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return void 0!==i?_e.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class hT{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return Af(t).put(i)}removeEntry(t,e,i){return Af(t).delete(function(r,s){const c=r.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],KC(s),c[c.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.Zn(t,i)))}getEntry(t,e){let i=Fi.newInvalidDocument(e);return Af(t).X({index:"documentKeyIndex",range:IDBKeyRange.only(Ug(e))},(r,s)=>{i=this.ts(e,s)}).next(()=>i)}es(t,e){let i={size:0,document:Fi.newInvalidDocument(e)};return Af(t).X({index:"documentKeyIndex",range:IDBKeyRange.only(Ug(e))},(r,s)=>{i={document:this.ts(e,s),size:Fw(s)}}).next(()=>i)}getEntries(t,e){let i=ko();return this.ns(t,e,(r,s)=>{const c=this.ts(r,s);i=i.insert(r,c)}).next(()=>i)}ss(t,e){let i=ko(),r=new Pi(ft.comparator);return this.ns(t,e,(s,c)=>{const d=this.ts(s,c);i=i.insert(s,d),r=r.insert(s,Fw(c))}).next(()=>({documents:i,rs:r}))}ns(t,e,i){if(e.isEmpty())return _e.resolve();let r=new Gn(fT);e.forEach(p=>r=r.add(p));const s=IDBKeyRange.bound(Ug(r.first()),Ug(r.last())),c=r.getIterator();let d=c.getNext();return Af(t).X({index:"documentKeyIndex",range:s},(p,m,y)=>{const T=ft.fromSegments([...m.prefixPath,m.collectionGroup,m.documentId]);for(;d&&fT(d,T)<0;)i(d,null),d=c.getNext();d&&d.isEqual(T)&&(i(d,m),d=c.hasNext()?c.getNext():null),d?y.G(Ug(d)):y.done()}).next(()=>{for(;d;)i(d,null),d=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(t,e,i,r){const s=e.path,c=[s.popLast().toArray(),s.lastSegment(),KC(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],d=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Af(t).j(IDBKeyRange.bound(c,d,!0)).next(p=>{let m=ko();for(const y of p){const T=this.ts(ft.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);T.isFoundDocument()&&(Ig(e,T)||r.has(T.key))&&(m=m.insert(T.key,T))}return m})}getAllFromCollectionGroup(t,e,i,r){let s=ko();const c=Uw(e,i),d=Uw(e,Jo.max());return Af(t).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,d,!0)},(p,m,y)=>{const T=this.ts(ft.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);s=s.insert(T.key,T),s.size===r&&y.done()}).next(()=>s)}newChangeBuffer(t){return new oP(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return rN(t).get("remoteDocumentGlobalKey").next(e=>(Lt(!!e),e))}Zn(t,e){return rN(t).put("remoteDocumentGlobalKey",e)}ts(t,e){if(e){const i=function tP(n,t){let e;if(t.document)e=FM(n.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=ft.fromSegments(t.noDocument.path),r=If(t.noDocument.readTime);e=Fi.newNoDocument(i,r),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return Dt();{const i=ft.fromSegments(t.unknownDocument.path),r=If(t.unknownDocument.version);e=Fi.newUnknownDocument(i,r)}}return t.readTime&&e.setReadTime(function(i){const r=new Wi(i[0],i[1]);return Bt.fromTimestamp(r)}(t.readTime)),e}(this.serializer,e);if(!i.isNoDocument()||!i.version.isEqual(Bt.min()))return i}return Fi.newInvalidDocument(t)}}function iN(n){return new hT(n)}class oP extends Vw{constructor(t,e){super(),this.os=t,this.trackRemovals=e,this.us=new rc(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(t){const e=[];let i=0,r=new Gn((s,c)=>on(s.canonicalString(),c.canonicalString()));return this.changes.forEach((s,c)=>{const d=this.us.get(s);if(e.push(this.os.removeEntry(t,s,d.readTime)),c.isValidDocument()){const p=jM(this.os.serializer,c);r=r.add(s.path.popLast());const m=Fw(p);i+=m-d.size,e.push(this.os.addEntry(t,s,p))}else if(i-=d.size,this.trackRemovals){const p=jM(this.os.serializer,c.convertToNoDocument(Bt.min()));e.push(this.os.addEntry(t,s,p))}}),r.forEach(s=>{e.push(this.os.indexManager.addToCollectionParentIndex(t,s))}),e.push(this.os.updateMetadata(t,i)),_e.waitFor(e)}getFromCache(t,e){return this.os.es(t,e).next(i=>(this.us.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.os.ss(t,e).next(({documents:i,rs:r})=>(r.forEach((s,c)=>{this.us.set(s,{size:c,readTime:i.get(s).readTime})}),i))}}function rN(n){return ys(n,"remoteDocumentGlobal")}function Af(n){return ys(n,"remoteDocumentsV14")}function Ug(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Uw(n,t){const e=t.documentKey.path.toArray();return[n,KC(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function fT(n,t){const e=n.path.toArray(),i=t.path.toArray();let r=0;for(let s=0;s<e.length-2&&s<i.length-2;++s)if(r=on(e[s],i[s]),r)return r;return r=on(e.length,i.length),r||(r=on(e[e.length-2],i[i.length-2]),r||on(e[e.length-1],i[i.length-1]))}class sN{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class pT{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(null!==i&&rv(i.mutation,r,ir.empty(),Wi.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,hn()).next(()=>i))}getLocalViewOfDocuments(t,e,i=hn()){const r=sc();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(s=>{let c=ev();return s.forEach((d,p)=>{c=c.insert(d,p.overlayedDocument)}),c}))}getOverlayedDocuments(t,e){const i=sc();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,hn()))}populateOverlays(t,e,i){const r=[];return i.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((c,d)=>{e.set(c,d)})})}computeViews(t,e,i,r){let s=ko();const c=tv(),d=tv();return e.forEach((p,m)=>{const y=i.get(m.key);r.has(m.key)&&(void 0===y||y.mutation instanceof uu)?s=s.insert(m.key,m):void 0!==y?(c.set(m.key,y.mutation.getFieldMask()),rv(y.mutation,m,y.mutation.getFieldMask(),Wi.now())):c.set(m.key,ir.empty())}),this.recalculateAndSaveOverlays(t,s).next(p=>(p.forEach((m,y)=>c.set(m,y)),e.forEach((m,y)=>{var T;return d.set(m,new sN(y,null!==(T=c.get(m))&&void 0!==T?T:null))}),d))}recalculateAndSaveOverlays(t,e){const i=tv();let r=new Pi((c,d)=>c-d),s=hn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(c=>{for(const d of c)d.keys().forEach(p=>{const m=e.get(p);if(null===m)return;let y=i.get(p)||ir.empty();y=d.applyToLocalView(m,y),i.set(p,y);const T=(r.get(d.batchId)||hn()).add(p);r=r.insert(d.batchId,T)})}).next(()=>{const c=[],d=r.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),m=p.key,y=p.value,T=gM();y.forEach(A=>{if(!s.has(A)){const x=Ng(e.get(A),i.get(A));null!==x&&T.set(A,x),s=s.add(A)}}),c.push(this.documentOverlayCache.saveOverlays(t,m,T))}return _e.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i){return ft.isDocumentKey((r=e).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):SC(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i):this.getDocumentsMatchingCollectionQuery(t,e,i);var r}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(s=>{const c=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-s.size):_e.resolve(sc());let d=-1,p=s;return c.next(m=>_e.forEach(m,(y,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),s.get(y)?_e.resolve():this.remoteDocumentCache.getEntry(t,y).next(A=>{p=p.insert(y,A)}))).next(()=>this.populateOverlays(t,m,s)).next(()=>this.computeViews(t,p,m,hn())).next(y=>({batchId:d,changes:Sg(y)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new ft(e)).next(i=>{let r=ev();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i){const r=e.collectionGroup;let s=ev();return this.indexManager.getCollectionParents(t,r).next(c=>_e.forEach(c,d=>{const p=(m=e,y=d.child(r),new ic(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,y;return this.getDocumentsMatchingCollectionQuery(t,p,i).next(m=>{m.forEach((y,T)=>{s=s.insert(y,T)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,e,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,r))).next(s=>{r.forEach((d,p)=>{const m=p.getKey();null===s.get(m)&&(s=s.insert(m,Fi.newInvalidDocument(m)))});let c=ev();return s.forEach((d,p)=>{const m=r.get(d);void 0!==m&&rv(m.mutation,p,ir.empty(),Wi.now()),Ig(e,p)&&(c=c.insert(d,p))}),c})}}class oN{constructor(t){this.serializer=t,this.cs=new Map,this.hs=new Map}getBundleMetadata(t,e){return _e.resolve(this.cs.get(e))}saveBundleMetadata(t,e){var i;return this.cs.set(e.id,{id:(i=e).id,version:i.version,createTime:rr(i.createTime)}),_e.resolve()}getNamedQuery(t,e){return _e.resolve(this.hs.get(e))}saveNamedQuery(t,e){return this.hs.set(e.name,{name:(i=e).name,query:Nw(i.bundledQuery),readTime:rr(i.readTime)}),_e.resolve();var i}}class aP{constructor(){this.overlays=new Pi(ft.comparator),this.ls=new Map}getOverlay(t,e){return _e.resolve(this.overlays.get(e))}getOverlays(t,e){const i=sc();return _e.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,s)=>{this.we(t,e,s)}),_e.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.ls.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(i)),_e.resolve()}getOverlaysForCollection(t,e,i){const r=sc(),s=e.length+1,c=new ft(e.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,m=p.getKey();if(!e.isPrefixOf(m.path))break;m.path.length===s&&p.largestBatchId>i&&r.set(p.getKey(),p)}return _e.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let s=new Pi((m,y)=>m-y);const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===e&&m.largestBatchId>i){let y=s.get(m.largestBatchId);null===y&&(y=sc(),s=s.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}const d=sc(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((m,y)=>d.set(m,y)),!(d.size()>=r)););return _e.resolve(d)}we(t,e,i){const r=this.overlays.get(i.key);if(null!==r){const c=this.ls.get(r.largestBatchId).delete(i.key);this.ls.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new Dw(e,i));let s=this.ls.get(e);void 0===s&&(s=hn(),this.ls.set(e,s)),this.ls.set(e,s.add(i.key))}}class Hw{constructor(){this.fs=new Gn(is.ds),this.ws=new Gn(is._s)}isEmpty(){return this.fs.isEmpty()}addReference(t,e){const i=new is(t,e);this.fs=this.fs.add(i),this.ws=this.ws.add(i)}gs(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.ys(new is(t,e))}ps(t,e){t.forEach(i=>this.removeReference(i,e))}Is(t){const e=new ft(new Rn([])),i=new is(e,t),r=new is(e,t+1),s=[];return this.ws.forEachInRange([i,r],c=>{this.ys(c),s.push(c.key)}),s}Ts(){this.fs.forEach(t=>this.ys(t))}ys(t){this.fs=this.fs.delete(t),this.ws=this.ws.delete(t)}Es(t){const e=new ft(new Rn([])),i=new is(e,t),r=new is(e,t+1);let s=hn();return this.ws.forEachInRange([i,r],c=>{s=s.add(c.key)}),s}containsKey(t){const e=new is(t,0),i=this.fs.firstAfterOrEqual(e);return null!==i&&t.isEqual(i.key)}}class is{constructor(t,e){this.key=t,this.As=e}static ds(t,e){return ft.comparator(t.key,e.key)||on(t.As,e.As)}static _s(t,e){return on(t.As,e.As)||ft.comparator(t.key,e.key)}}class lP{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.vs=1,this.Rs=new Gn(is.ds)}checkEmpty(t){return _e.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,i,r){const s=this.vs;this.vs++;const c=new bw(s,e,i,r);this.mutationQueue.push(c);for(const d of r)this.Rs=this.Rs.add(new is(d.key,s)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return _e.resolve(c)}lookupMutationBatch(t,e){return _e.resolve(this.Ps(e))}getNextMutationBatchAfterBatchId(t,e){const r=this.bs(e+1),s=r<0?0:r;return _e.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return _e.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(t){return _e.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new is(e,0),r=new is(e,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([i,r],c=>{const d=this.Ps(c.As);s.push(d)}),_e.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Gn(on);return e.forEach(r=>{const s=new is(r,0),c=new is(r,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,c],d=>{i=i.add(d.As)})}),_e.resolve(this.Vs(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let s=i;ft.isDocumentKey(s)||(s=s.child(""));const c=new is(new ft(s),0);let d=new Gn(on);return this.Rs.forEachWhile(p=>{const m=p.key.path;return!!i.isPrefixOf(m)&&(m.length===r&&(d=d.add(p.As)),!0)},c),_e.resolve(this.Vs(d))}Vs(t){const e=[];return t.forEach(i=>{const r=this.Ps(i);null!==r&&e.push(r)}),e}removeMutationBatch(t,e){Lt(0===this.Ss(e.batchId,"removed")),this.mutationQueue.shift();let i=this.Rs;return _e.forEach(e.mutations,r=>{const s=new is(r.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Rs=i})}Cn(t){}containsKey(t,e){const i=new is(e,0),r=this.Rs.firstAfterOrEqual(i);return _e.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return _e.resolve()}Ss(t,e){return this.bs(t)}bs(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Ps(t){const e=this.bs(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class aN{constructor(t){this.Ds=t,this.docs=new Pi(ft.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),s=r?r.size:0,c=this.Ds(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return _e.resolve(i?i.document.mutableCopy():Fi.newInvalidDocument(e))}getEntries(t,e){let i=ko();return e.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Fi.newInvalidDocument(r))}),_e.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let s=ko();const c=e.path,d=new ft(c.child("")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:m,value:{document:y}}=p.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||QE(KE(y),i)<=0||(r.has(y.key)||Ig(e,y))&&(s=s.insert(y.key,y.mutableCopy()))}return _e.resolve(s)}getAllFromCollectionGroup(t,e,i,r){Dt()}Cs(t,e){return _e.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new lN(this)}getSize(t){return _e.resolve(this.size)}}class lN extends Vw{constructor(t){super(),this.os=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.os.addEntry(t,r)):this.os.removeEntry(i)}),_e.waitFor(e)}getFromCache(t,e){return this.os.getEntry(t,e)}getAllFromCache(t,e){return this.os.getEntries(t,e)}}class co{constructor(t){this.persistence=t,this.xs=new rc(e=>vf(e),J_),this.lastRemoteSnapshotVersion=Bt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Hw,this.targetCount=0,this.Ms=Vd.kn()}forEachTarget(t,e){return this.xs.forEach((i,r)=>e(r)),_e.resolve()}getLastRemoteSnapshotVersion(t){return _e.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return _e.resolve(this.Ns)}allocateTargetId(t){return this.highestTargetId=this.Ms.next(),_e.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.Ns&&(this.Ns=e),_e.resolve()}Fn(t){this.xs.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Ms=new Vd(e),this.highestTargetId=e),t.sequenceNumber>this.Ns&&(this.Ns=t.sequenceNumber)}addTargetData(t,e){return this.Fn(e),this.targetCount+=1,_e.resolve()}updateTargetData(t,e){return this.Fn(e),_e.resolve()}removeTargetData(t,e){return this.xs.delete(e.target),this.ks.Is(e.targetId),this.targetCount-=1,_e.resolve()}removeTargets(t,e,i){let r=0;const s=[];return this.xs.forEach((c,d)=>{d.sequenceNumber<=e&&null===i.get(d.targetId)&&(this.xs.delete(c),s.push(this.removeMatchingKeysForTargetId(t,d.targetId)),r++)}),_e.waitFor(s).next(()=>r)}getTargetCount(t){return _e.resolve(this.targetCount)}getTargetData(t,e){const i=this.xs.get(e)||null;return _e.resolve(i)}addMatchingKeys(t,e,i){return this.ks.gs(e,i),_e.resolve()}removeMatchingKeys(t,e,i){this.ks.ps(e,i);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(c=>{s.push(r.markPotentiallyOrphaned(t,c))}),_e.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.ks.Is(e),_e.resolve()}getMatchingKeysForTargetId(t,e){const i=this.ks.Es(e);return _e.resolve(i)}containsKey(t,e){return _e.resolve(this.ks.containsKey(e))}}class jd{constructor(t,e){this.$s={},this.overlays={},this.Os=new Oo(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=t(this),this.Bs=new co(this),this.indexManager=new dv,this.remoteDocumentCache=new aN(i=>this.referenceDelegate.Ls(i)),this.serializer=new ZC(e),this.qs=new oN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new aP,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.$s[t.toKey()];return i||(i=new lP(e,this.referenceDelegate),this.$s[t.toKey()]=i),i}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(t,e,i){Ke("MemoryPersistence","Starting transaction:",t);const r=new cP(this.Os.next());return this.referenceDelegate.Us(),i(r).next(s=>this.referenceDelegate.Ks(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gs(t,e){return _e.or(Object.values(this.$s).map(i=>()=>i.containsKey(t,e)))}}class cP extends rw{constructor(t){super(),this.currentSequenceNumber=t}}class jw{constructor(t){this.persistence=t,this.Qs=new Hw,this.js=null}static zs(t){return new jw(t)}get Ws(){if(this.js)return this.js;throw Dt()}addReference(t,e,i){return this.Qs.addReference(i,e),this.Ws.delete(i.toString()),_e.resolve()}removeReference(t,e,i){return this.Qs.removeReference(i,e),this.Ws.add(i.toString()),_e.resolve()}markPotentiallyOrphaned(t,e){return this.Ws.add(e.toString()),_e.resolve()}removeTarget(t,e){this.Qs.Is(e.targetId).forEach(r=>this.Ws.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Ws.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}Us(){this.js=new Set}Ks(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _e.forEach(this.Ws,i=>{const r=ft.fromPath(i);return this.Hs(t,r).next(s=>{s||e.removeEntry(r,Bt.min())})}).next(()=>(this.js=null,e.apply(t)))}updateLimboDocument(t,e){return this.Hs(t,e).next(i=>{i?this.Ws.delete(e.toString()):this.Ws.add(e.toString())})}Ls(t){return 0}Hs(t,e){return _e.or([()=>_e.resolve(this.Qs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gs(t,e)])}}class mV{constructor(t){this.serializer=t}O(t,e,i,r){const s=new sw("createOrUpgrade",e);var d;i<1&&r>=1&&(t.createObjectStore("owner"),(d=t).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",iu,{unique:!0}),d.createObjectStore("documentMutations"),mT(t),function(d){d.createObjectStore("remoteDocuments")}(t));let c=_e.resolve();return i<3&&r>=3&&(0!==i&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(t),mT(t)),c=c.next(()=>function(d){const p=d.store("targetGlobal"),m={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Bt.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",m)}(s))),i<4&&r>=4&&(0!==i&&(c=c.next(()=>function(d,p){return p.store("mutations").j().next(m=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",iu,{unique:!0});const y=p.store("mutations"),T=m.map(A=>y.put(A));return _e.waitFor(T)})}(t,s))),c=c.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),i<5&&r>=5&&(c=c.next(()=>this.Ys(s))),i<6&&r>=6&&(c=c.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(t),this.Xs(s)))),i<7&&r>=7&&(c=c.next(()=>this.Zs(s))),i<8&&r>=8&&(c=c.next(()=>this.ti(t,s))),i<9&&r>=9&&(c=c.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(t)})),i<10&&r>=10&&(c=c.next(()=>this.ei(s))),i<11&&r>=11&&(c=c.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&r>=12&&(c=c.next(()=>{!function(d){const p=d.createObjectStore("documentOverlays",{keyPath:YA});p.createIndex("collectionPathOverlayIndex",Lk,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",Bk,{unique:!1})}(t)})),i<13&&r>=13&&(c=c.next(()=>function(d){const p=d.createObjectStore("remoteDocumentsV14",{keyPath:pf});p.createIndex("documentKeyIndex",iC),p.createIndex("collectionGroupIndex",Ok)}(t)).next(()=>this.ni(t,s)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(c=c.next(()=>this.si(t,s))),i<15&&r>=15&&(c=c.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:Pk}).createIndex("sequenceNumberIndex",qA,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:Fk}).createIndex("documentKeyIndex",ts,{unique:!1})}(t))),c}Xs(t){let e=0;return t.store("remoteDocuments").X((i,r)=>{e+=Fw(r)}).next(()=>{const i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Ys(t){const e=t.store("mutationQueues"),i=t.store("mutations");return e.j().next(r=>_e.forEach(r,s=>{const c=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.j("userMutationsIndex",c).next(d=>_e.forEach(d,p=>{Lt(p.userId===s.userId);const m=Fd(this.serializer,p);return aT(t,s.userId,m).next(()=>{})}))}))}Zs(t){const e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.X((c,d)=>{const p=new Rn(c),m=[0,xs(p)];s.push(e.get(m).next(y=>y?_e.resolve():e.put({targetId:0,path:xs(p),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>_e.waitFor(s))})}ti(t,e){t.createObjectStore("collectionParents",{keyPath:kk});const i=e.store("collectionParents"),r=new oT,s=c=>{if(r.add(c)){const d=c.lastSegment(),p=c.popLast();return i.put({collectionId:d,parent:xs(p)})}};return e.store("remoteDocuments").X({Y:!0},(c,d)=>{const p=new Rn(c);return s(p.popLast())}).next(()=>e.store("documentMutations").X({Y:!0},([c,d,p],m)=>{const y=Xo(d);return s(y.popLast())}))}ei(t){const e=t.store("targets");return e.X((i,r)=>{const s=kg(r),c=QC(this.serializer,s);return e.put(c)})}ni(t,e){const i=e.store("remoteDocuments"),r=[];return i.X((s,c)=>{const d=e.store("remoteDocumentsV14"),p=(m=c,m.document?new ft(Rn.fromString(m.document.name).popFirst(5)):m.noDocument?ft.fromSegments(m.noDocument.path):m.unknownDocument?ft.fromSegments(m.unknownDocument.path):Dt()).path.toArray();var m;const y={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};r.push(d.put(y))}).next(()=>_e.waitFor(r))}si(t,e){const i=e.store("mutations"),r=iN(this.serializer),s=new jd(jw.zs,this.serializer.fe);return i.j().next(c=>{const d=new Map;return c.forEach(p=>{var m;let y=null!==(m=d.get(p.userId))&&void 0!==m?m:hn();Fd(this.serializer,p).keys().forEach(T=>y=y.add(T)),d.set(p.userId,y)}),_e.forEach(d,(p,m)=>{const y=new vs(m),T=Ld.de(this.serializer,y),A=s.getIndexManager(y),x=Lw.de(y,this.serializer,A,s.referenceDelegate);return new pT(r,x,T,A).recalculateAndSaveOverlaysForDocumentKeys(new lC(e,Oo.ct),p).next()})})}}function mT(n){n.createObjectStore("targetDocuments",{keyPath:fV}).createIndex("documentTargetsIndex",pV,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",rC,{unique:!0}),n.createObjectStore("targetGlobal")}const gv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class cN{constructor(t,e,i,r,s,c,d,p,m,y,T=15){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.ii=s,this.window=c,this.document=d,this.ri=m,this.oi=y,this.ui=T,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=A=>Promise.resolve(),!cN.D())throw new Ge(be.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new dT(this,r),this.di=e+"main",this.serializer=new ZC(p),this.wi=new Da(this.di,this.ui,new mV(this.serializer)),this.Bs=new eN(this.referenceDelegate,this.serializer),this.remoteDocumentCache=iN(this.serializer),this.qs=new GM,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===y&&Oi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ge(be.FAILED_PRECONDITION,gv);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Bs.getHighestSequenceNumber(t))}).then(t=>{this.Os=new Oo(t,this.ri)}).then(()=>{this.Fs=!0}).catch(t=>(this.wi&&this.wi.close(),Promise.reject(t)))}Ii(t){var e=this;return this.fi=function(){var i=(0,Ee.Z)(function*(r){if(e.started)return t(r)});return function(r){return i.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.wi.B(function(){var e=(0,Ee.Z)(function*(i){null===i.newVersion&&(yield t())});return function(i){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.ii.enqueueAndForget((0,Ee.Z)(function*(){e.started&&(yield e.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>_T(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(t).next(e=>{e||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(t)).next(e=>this.isPrimary&&!e?this.Ai(t).next(()=>!1):!!e&&this.vi(t).next(()=>!0))).catch(t=>{if(nu(t))return Ke("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return Ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.ii.enqueueRetryable(()=>this.fi(t)),this.isPrimary=t})}Ti(t){return Gw(t).get("owner").next(e=>_e.resolve(this.Ri(e)))}Pi(t){return _T(t).delete(this.clientId)}bi(){var t=this;return(0,Ee.Z)(function*(){if(t.isPrimary&&!t.Vi(t.li,18e5)){t.li=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=ys(i,"clientMetadata");return r.j().next(s=>{const c=t.Si(s,18e5),d=s.filter(p=>-1===c.indexOf(p));return _e.forEach(d,p=>r.delete(p.clientId)).next(()=>d)})}).catch(()=>[]);if(t._i)for(const i of e)t._i.removeItem(t.Di(i.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(t){return!!t&&t.ownerId===this.clientId}Ei(t){return this.oi?_e.resolve(!0):Gw(t).get("owner").next(e=>{if(null!==e&&this.Vi(e.leaseTimestampMs,5e3)&&!this.Ci(e.ownerId)){if(this.Ri(e)&&this.networkEnabled)return!0;if(!this.Ri(e)){if(!e.allowTabSynchronization)throw new Ge(be.FAILED_PRECONDITION,gv);return!1}}return!(!this.networkEnabled||!this.inForeground)||_T(t).j().next(i=>void 0===this.Si(i,5e3).find(r=>!(this.clientId===r.clientId||!(!this.networkEnabled&&r.networkEnabled||!this.inForeground&&r.inForeground&&this.networkEnabled===r.networkEnabled))))}).next(e=>(this.isPrimary!==e&&Ke("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,Ee.Z)(function*(){t.Fs=!1,t.xi(),t.hi&&(t.hi.cancel(),t.hi=null),t.Ni(),t.ki(),yield t.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const i=new lC(e,Oo.ct);return t.Ai(i).next(()=>t.Pi(i))}),t.wi.close(),t.Mi()})()}Si(t,e){return t.filter(i=>this.Vi(i.updateTimeMs,e)&&!this.Ci(i.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",t=>_T(t).j().next(e=>this.Si(e,18e5).map(i=>i.clientId)))}get started(){return this.Fs}getMutationQueue(t,e){return Lw.de(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new rP(t,this.serializer.fe.databaseId)}getDocumentOverlayCache(t){return Ld.de(this.serializer,t)}getBundleCache(){return this.qs}runTransaction(t,e,i){Ke("IndexedDbPersistence","Starting transaction:",t);const r="readonly"===e?"readonly":"readwrite",s=15===(c=this.ui)?yg:14===c?aC:13===c?oC:12===c?Vk:11===c?sC:void Dt();var c;let d;return this.wi.runTransaction(t,r,s,p=>(d=new lC(p,this.Os?this.Os.next():Oo.ct),"readwrite-primary"===e?this.Ti(d).next(m=>!!m||this.Ei(d)).next(m=>{if(!m)throw Oi(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Ge(be.FAILED_PRECONDITION,JE);return i(d)}).next(m=>this.vi(d).next(()=>m)):this.Oi(d).next(()=>i(d)))).then(p=>(d.raiseOnCommittedEvent(),p))}Oi(t){return Gw(t).get("owner").next(e=>{if(null!==e&&this.Vi(e.leaseTimestampMs,5e3)&&!this.Ci(e.ownerId)&&!this.Ri(e)&&!(this.oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Ge(be.FAILED_PRECONDITION,gv)})}vi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Gw(t).put("owner",e)}static D(){return Da.D()}Ai(t){const e=Gw(t);return e.get("owner").next(i=>this.Ri(i)?(Ke("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):_e.resolve())}Vi(t,e){const i=Date.now();return!(t<i-e||t>i&&(Oi(`Detected an update time that is in the future: ${t} > ${i}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;(0,L.G6)()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(t){var e;try{const i=null!==(null===(e=this._i)||void 0===e?void 0:e.getItem(this.Di(t)));return Ke("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Oi("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(t){Oi("Failed to set zombie client id.",t)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function Gw(n){return ys(n,"owner")}function _T(n){return ys(n,"clientMetadata")}function Mf(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class vT{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Fi=i,this.Bi=r}static Li(t,e){let i=hn(),r=hn();for(const s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new vT(t,e.fromCache,i,r)}}class $w{constructor(){this.qi=!1}initialize(t,e){this.Ui=t,this.indexManager=e,this.qi=!0}getDocumentsMatchingQuery(t,e,i,r){return this.Ki(t,e).next(s=>s||this.Gi(t,e,r,i)).next(s=>s||this.Qi(t,e))}Ki(t,e){if(yf(e))return _e.resolve(null);let i=lo(e);return this.indexManager.getIndexType(t,i).next(r=>0===r?null:(null!==e.limit&&1===r&&(e=wf(e,null,"F"),i=lo(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const c=hn(...s);return this.Ui.getDocuments(t,c).next(d=>this.indexManager.getMinOffset(t,i).next(p=>{const m=this.ji(e,d);return this.zi(e,m,c,p.readTime)?this.Ki(t,wf(e,null,"F")):this.Wi(t,m,e,p)}))})))}Gi(t,e,i,r){return yf(e)||r.isEqual(Bt.min())?this.Qi(t,e):this.Ui.getDocuments(t,i).next(s=>{const c=this.ji(e,s);return this.zi(e,c,i,r)?this.Qi(t,e):(W_()<=Hr.in.DEBUG&&Ke("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),gw(e)),this.Wi(t,c,e,ZE(r,-1)))})}ji(t,e){let i=new Gn(AC(t));return e.forEach((r,s)=>{Ig(t,s)&&(i=i.add(s))}),i}zi(t,e,i,r){if(null===t.limit)return!1;if(i.size!==e.size)return!0;const s="F"===t.limitType?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Qi(t,e){return W_()<=Hr.in.DEBUG&&Ke("QueryEngine","Using full collection scan to execute query:",gw(e)),this.Ui.getDocumentsMatchingQuery(t,e,Jo.min())}Wi(t,e,i,r){return this.Ui.getDocumentsMatchingQuery(t,i,r).next(s=>(e.forEach(c=>{s=s.insert(c.key,c)}),s))}}class uP{constructor(t,e,i,r){this.persistence=t,this.Hi=e,this.serializer=r,this.Ji=new Pi(on),this.Yi=new rc(s=>vf(s),J_),this.Xi=new Map,this.Zi=t.getRemoteDocumentCache(),this.Bs=t.getTargetCache(),this.qs=t.getBundleCache(),this.tr(i)}tr(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new pT(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ji))}}function yT(n,t,e,i){return new uP(n,t,e,i)}function uN(n,t){return wT.apply(this,arguments)}function wT(){return wT=(0,Ee.Z)(function*(n,t){const e=yt(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,e.tr(t),e.mutationQueue.getAllMutationBatches(i))).next(s=>{const c=[],d=[];let p=hn();for(const m of r){c.push(m.batchId);for(const y of m.mutations)p=p.add(y.key)}for(const m of s){d.push(m.batchId);for(const y of m.mutations)p=p.add(y.key)}return e.localDocuments.getDocuments(i,p).next(m=>({er:m,removedBatchIds:c,addedBatchIds:d}))})})}),wT.apply(this,arguments)}function zw(n){const t=yt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Bs.getLastRemoteSnapshotVersion(e))}function hN(n,t,e){let i=hn(),r=hn();return e.forEach(s=>i=i.add(s)),t.getEntries(n,i).next(s=>{let c=ko();return e.forEach((d,p)=>{const m=s.get(d);p.isFoundDocument()!==m.isFoundDocument()&&(r=r.add(d)),p.isNoDocument()&&p.version.isEqual(Bt.min())?(t.removeEntry(d,p.readTime),c=c.insert(d,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||0===p.version.compareTo(m.version)&&m.hasPendingWrites?(t.addEntry(p),c=c.insert(d,p)):Ke("LocalStore","Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",p.version)}),{nr:c,sr:r}})}function Ww(n,t){const e=yt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function Gd(n,t){const e=yt(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Bs.getTargetData(i,t).next(s=>s?(r=s,_e.resolve(r)):e.Bs.allocateTargetId(i).next(c=>(r=new Pd(t,c,"TargetPurposeListen",i.currentSequenceNumber),e.Bs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.Ji.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.Ji=e.Ji.insert(i.targetId,i),e.Yi.set(t,i.targetId)),i})}function mv(n,t,e){return qw.apply(this,arguments)}function qw(){return qw=(0,Ee.Z)(function*(n,t,e){const i=yt(n),r=i.Ji.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",s,c=>i.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!nu(c))throw c;Ke("LocalStore",`Failed to update sequence numbers for target ${t}: ${c}`)}i.Ji=i.Ji.remove(t),i.Yi.delete(r.target)}),qw.apply(this,arguments)}function Yw(n,t,e){const i=yt(n);let r=Bt.min(),s=hn();return i.persistence.runTransaction("Execute query","readonly",c=>function(d,p,m){const y=yt(d),T=y.Yi.get(m);return void 0!==T?_e.resolve(y.Ji.get(T)):y.Bs.getTargetData(p,m)}(i,c,lo(t)).next(d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,i.Bs.getMatchingKeysForTargetId(c,d.targetId).next(p=>{s=p})}).next(()=>i.Hi.getDocumentsMatchingQuery(c,t,e?r:Bt.min(),e?s:hn())).next(d=>(fN(i,dM(t),d),{documents:d,ir:s})))}function bT(n,t){const e=yt(n),i=yt(e.Bs),r=e.Ji.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",s=>i.le(s,t).next(c=>c?c.target:null))}function Nf(n,t){const e=yt(n),i=e.Xi.get(t)||Bt.min();return e.persistence.runTransaction("Get new document changes","readonly",r=>e.Zi.getAllFromCollectionGroup(r,t,ZE(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(fN(e,t,r),r))}function fN(n,t,e){let i=n.Xi.get(t)||Bt.min();e.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Xi.set(t,i)}function _v(){return _v=(0,Ee.Z)(function*(n,t,e,i){const r=yt(n);let s=hn(),c=ko();for(const m of e){const y=t.rr(m.metadata.name);m.document&&(s=s.add(y));const T=t.ur(m);T.setReadTime(t.cr(m.metadata.readTime)),c=c.insert(y,T)}const d=r.Zi.newChangeBuffer({trackRemovals:!0}),p=yield Gd(r,(m=i,lo(X_(Rn.fromString(`__bundle__/docs/${m}`)))));var m;return r.persistence.runTransaction("Apply bundle documents","readwrite",m=>hN(m,d,c).next(y=>(d.apply(m),y)).next(y=>r.Bs.removeMatchingKeysForTargetId(m,p.targetId).next(()=>r.Bs.addMatchingKeys(m,s,p.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(m,y.nr,y.sr)).next(()=>y.nr)))}),_v.apply(this,arguments)}function _V(n,t){return DT.apply(this,arguments)}function DT(){return DT=(0,Ee.Z)(function*(n,t,e=hn()){const i=yield Gd(n,lo(Nw(t.bundledQuery))),r=yt(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const c=rr(t.readTime);if(i.snapshotVersion.compareTo(c)>=0)return r.qs.saveNamedQuery(s,t);const d=i.withResumeToken(jr.EMPTY_BYTE_STRING,c);return r.Ji=r.Ji.insert(d.targetId,d),r.Bs.updateTargetData(s,d).next(()=>r.Bs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Bs.addMatchingKeys(s,e,i.targetId)).next(()=>r.qs.saveNamedQuery(s,t))})}),DT.apply(this,arguments)}function hP(n,t){return`firestore_clients_${n}_${t}`}function gN(n,t,e){let i=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function ET(n,t){return`firestore_targets_${n}_${t}`}class Zw{constructor(t,e,i,r){this.user=t,this.batchId=e,this.state=i,this.error=r}static ar(t,e,i){const r=JSON.parse(i);let s,c="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(s=new Ge(r.error.code,r.error.message))),c?new Zw(t,e,r.state,s):(Oi("SharedClientState",`Failed to parse mutation state for ID '${e}': ${i}`),null)}hr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Hg{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static ar(t,e){const i=JSON.parse(e);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new Ge(i.error.code,i.error.message))),s?new Hg(t,i.state,r):(Oi("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}hr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class vv{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static ar(t,e){const i=JSON.parse(e);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=MC();for(let c=0;r&&c<i.activeTargetIds.length;++c)r=eC(i.activeTargetIds[c]),s=s.add(i.activeTargetIds[c]);return r?new vv(t,s):(Oi("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class CT{constructor(t,e){this.clientId=t,this.onlineState=e}static ar(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new CT(e.clientId,e.onlineState):(Oi("SharedClientState",`Failed to parse online state: ${t}`),null)}}class Kw{constructor(){this.activeTargetIds=MC()}lr(t){this.activeTargetIds=this.activeTargetIds.add(t)}dr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}hr(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Qw{constructor(t,e,i,r,s){this.window=t,this.ii=e,this.persistenceKey=i,this.wr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Pi(on),this.started=!1,this.yr=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.pr=hP(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new Kw),this.Tr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,Ee.Z)(function*(){const e=yield t.syncEngine.$i();for(const r of e){if(r===t.wr)continue;const s=t.getItem(hP(t.persistenceKey,r));if(s){const c=vv.ar(r,s);c&&(t.gr=t.gr.insert(c.clientId,c))}}t.Pr();const i=t.storage.getItem(t.vr);if(i){const r=t.br(i);r&&t.Vr(r)}for(const r of t.yr)t.mr(r);t.yr=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.Ir,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(t){let e=!1;return this.gr.forEach((i,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.Dr(t,"pending")}updateMutationState(t,e,i){this.Dr(t,e,i),this.Cr(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(ET(this.persistenceKey,t));if(i){const r=Hg.ar(t,i);r&&(e=r.state)}}return this.Nr.lr(t),this.Pr(),e}removeLocalQueryTarget(t){this.Nr.dr(t),this.Pr()}isLocalQueryTarget(t){return this.Nr.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(ET(this.persistenceKey,t))}updateQueryState(t,e,i){this.kr(t,e,i)}handleUserChange(t,e,i){e.forEach(r=>{this.Cr(r)}),this.currentUser=t,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.Mr(t)}notifyBundleLoaded(t){this.$r(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return Ke("SharedClientState","READ",t,e),e}setItem(t,e){Ke("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){Ke("SharedClientState","REMOVE",t),this.storage.removeItem(t)}mr(t){var e=this;const i=t;if(i.storageArea===this.storage){if(Ke("SharedClientState","EVENT",i.key,i.newValue),i.key===this.pr)return void Oi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,Ee.Z)(function*(){if(e.started){if(null!==i.key)if(e.Tr.test(i.key)){if(null==i.newValue){const r=e.Or(i.key);return e.Fr(r,null)}{const r=e.Br(i.key,i.newValue);if(r)return e.Fr(r.clientId,r)}}else if(e.Er.test(i.key)){if(null!==i.newValue){const r=e.Lr(i.key,i.newValue);if(r)return e.qr(r)}}else if(e.Ar.test(i.key)){if(null!==i.newValue){const r=e.Ur(i.key,i.newValue);if(r)return e.Kr(r)}}else if(i.key===e.vr){if(null!==i.newValue){const r=e.br(i.newValue);if(r)return e.Vr(r)}}else if(i.key===e.Ir){const r=function(s){let c=Oo.ct;if(null!=s)try{const d=JSON.parse(s);Lt("number"==typeof d),c=d}catch(d){Oi("SharedClientState","Failed to read sequence number from WebStorage",d)}return c}(i.newValue);r!==Oo.ct&&e.sequenceNumberHandler(r)}else if(i.key===e.Rr){const r=e.Gr(i.newValue);yield Promise.all(r.map(s=>e.syncEngine.Qr(s)))}}else e.yr.push(i)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(t,e,i){const r=new Zw(this.currentUser,t,e,i),s=gN(this.persistenceKey,this.currentUser,t);this.setItem(s,r.hr())}Cr(t){const e=gN(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Mr(t){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:t}))}kr(t,e,i){const r=ET(this.persistenceKey,t),s=new Hg(t,e,i);this.setItem(r,s.hr())}$r(t){const e=JSON.stringify(Array.from(t));this.setItem(this.Rr,e)}Or(t){const e=this.Tr.exec(t);return e?e[1]:null}Br(t,e){const i=this.Or(t);return vv.ar(i,e)}Lr(t,e){const i=this.Er.exec(t),r=Number(i[1]);return Zw.ar(new vs(void 0!==i[2]?i[2]:null),r,e)}Ur(t,e){const i=this.Ar.exec(t),r=Number(i[1]);return Hg.ar(r,e)}br(t){return CT.ar(t)}Gr(t){return JSON.parse(t)}qr(t){var e=this;return(0,Ee.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.jr(t.batchId,t.state,t.error);Ke("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Kr(t){return this.syncEngine.zr(t.targetId,t.state,t.error)}Fr(t,e){const i=e?this.gr.insert(t,e):this.gr.remove(t),r=this.Sr(this.gr),s=this.Sr(i),c=[],d=[];return s.forEach(p=>{r.has(p)||c.push(p)}),r.forEach(p=>{s.has(p)||d.push(p)}),this.syncEngine.Wr(c,d).then(()=>{this.gr=i})}Vr(t){this.gr.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Sr(t){let e=MC();return t.forEach((i,r)=>{e=e.unionWith(r.activeTargetIds)}),e}}class mN{constructor(){this.Hr=new Kw,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.Hr.lr(t),this.Jr[t]||"not-current"}updateQueryState(t,e,i){this.Jr[t]=e}removeLocalQueryTarget(t){this.Hr.dr(t)}isLocalQueryTarget(t){return this.Hr.activeTargetIds.has(t)}clearQueryState(t){delete this.Jr[t]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(t){return this.Hr.activeTargetIds.has(t)}start(){return this.Hr=new Kw,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class fP{Yr(t){}shutdown(){}}class TT{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(t){this.so.push(t)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.so)t(0)}no(){Ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.so)t(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Jw=null;function Xw(){return null===Jw?Jw=268435456+Math.round(2147483648*Math.random()):Jw++,"0x"+Jw.toString(16)}const _N={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vN{constructor(t){this.ro=t.ro,this.oo=t.oo}uo(t){this.co=t}ao(t){this.ho=t}onMessage(t){this.lo=t}close(){this.oo()}send(t){this.ro(t)}fo(){this.co()}wo(t){this.ho(t)}_o(t){this.lo(t)}}const Os="WebChannelConnection";class pP extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.mo=(t.ssl?"https":"http")+"://"+t.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(t,e,i,r,s){const c=Xw(),d=this.To(t,e);Ke("RestConnection",`Sending RPC '${t}' ${c}:`,d,i);const p={};return this.Eo(p,r,s),this.Ao(t,d,p,i).then(m=>(Ke("RestConnection",`Received RPC '${t}' ${c}: `,m),m),m=>{throw Qo("RestConnection",`RPC '${t}' ${c} failed with error: `,m,"url: ",d,"request:",i),m})}vo(t,e,i,r,s,c){return this.Io(t,e,i,r,s)}Eo(t,e,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+Ed,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}To(t,e){return`${this.mo}/v1/${e}:${_N[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Ao(t,e,i,r){const s=Xw();return new Promise((c,d)=>{const p=new Ck;p.setWithCredentials(!0),p.listenOnce(lV.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case GE.NO_ERROR:const y=p.getResponseJson();Ke(Os,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(y)),c(y);break;case GE.TIMEOUT:Ke(Os,`RPC '${t}' ${s} timed out`),d(new Ge(be.DEADLINE_EXCEEDED,"Request time out"));break;case GE.HTTP_ERROR:const T=p.getStatus();if(Ke(Os,`RPC '${t}' ${s} failed with status:`,T,"response text:",p.getResponseText()),T>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);const x=A?.error;if(x&&x.status&&x.message){const P=function(V){const G=V.toLowerCase().replace(/_/g,"-");return Object.values(be).indexOf(G)>=0?G:be.UNKNOWN}(x.status);d(new Ge(P,x.message))}else d(new Ge(be.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new Ge(be.UNAVAILABLE,"Connection failed."));break;default:Dt()}}finally{Ke(Os,`RPC '${t}' ${s} completed.`)}});const m=JSON.stringify(r);Ke(Os,`RPC '${t}' ${s} sending request:`,r),p.send(e,"POST",m,i,15)})}Ro(t,e,i){const r=Xw(),s=[this.mo,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=BA(),d=jE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;void 0!==m&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.xmlHttpFactory=new Ek({})),this.Eo(p.initMessageHeaders,e,i),p.encodeInitMessageHeaders=!0;const y=s.join("");Ke(Os,`Creating RPC '${t}' stream ${r}: ${y}`,p);const T=c.createWebChannel(y,p);let A=!1,x=!1;const P=new vN({ro:G=>{x?Ke(Os,`Not sending because RPC '${t}' stream ${r} is closed:`,G):(A||(Ke(Os,`Opening RPC '${t}' stream ${r} transport.`),T.open(),A=!0),Ke(Os,`RPC '${t}' stream ${r} sending:`,G),T.send(G))},oo:()=>T.close()}),V=(G,te,se)=>{G.listen(te,le=>{try{se(le)}catch(de){setTimeout(()=>{throw de},0)}})};return V(T,$E.EventType.OPEN,()=>{x||Ke(Os,`RPC '${t}' stream ${r} transport opened.`)}),V(T,$E.EventType.CLOSE,()=>{x||(x=!0,Ke(Os,`RPC '${t}' stream ${r} transport closed`),P.wo())}),V(T,$E.EventType.ERROR,G=>{x||(x=!0,Qo(Os,`RPC '${t}' stream ${r} transport errored:`,G),P.wo(new Ge(be.UNAVAILABLE,"The operation could not be completed")))}),V(T,$E.EventType.MESSAGE,G=>{var te;if(!x){const se=G.data[0];Lt(!!se);const de=se.error||(null===(te=se[0])||void 0===te?void 0:te.error);if(de){Ke(Os,`RPC '${t}' stream ${r} received error:`,de);const Oe=de.status;let je=function(nt){const _t=Gr[nt];if(void 0!==_t)return PC(_t)}(Oe),ct=de.message;void 0===je&&(je=be.INTERNAL,ct="Unknown error status: "+Oe+" with message "+de.message),x=!0,P.wo(new Ge(je,ct)),T.close()}else Ke(Os,`RPC '${t}' stream ${r} received:`,se),P._o(se)}}),V(d,cV.STAT_EVENT,G=>{G.stat===VA.PROXY?Ke(Os,`RPC '${t}' stream ${r} detected buffering proxy`):G.stat===VA.NOPROXY&&Ke(Os,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{P.fo()},0),P}}function yN(){return typeof window<"u"?window:null}function IT(){return typeof document<"u"?document:null}function jg(n){return new Xk(n,!0)}class wN{constructor(t,e,i=1e3,r=1.5,s=6e4){this.ii=t,this.timerId=e,this.Po=i,this.bo=r,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(t){this.cancel();const e=Math.floor(this.So+this.ko()),i=Math.max(0,Date.now()-this.Co),r=Math.max(0,e-i);r>0&&Ke("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.So} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,()=>(this.Co=Date.now(),t())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class gP{constructor(t,e,i,r,s,c,d,p){this.ii=t,this.$o=i,this.Oo=r,this.connection=s,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new wN(t,e)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var t=this;return(0,Ee.Z)(function*(){t.Uo()&&(yield t.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(t){this.Ho(),this.stream.send(t)}zo(){var t=this;return(0,Ee.Z)(function*(){if(t.Ko())return t.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(t,e){var i=this;return(0,Ee.Z)(function*(){i.Ho(),i.Jo(),i.qo.cancel(),i.Fo++,4!==t?i.qo.reset():e&&e.code===be.RESOURCE_EXHAUSTED?(Oi(e.toString()),Oi("Using maximum backoff delay to prevent overloading the backend."),i.qo.xo()):e&&e.code===be.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Yo(),i.stream.close(),i.stream=null),i.state=t,yield i.listener.ao(e)})()}Yo(){}auth(){this.state=1;const t=this.Xo(this.Fo),e=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Fo===e&&this.Zo(i,r)},i=>{t(()=>{const r=new Ge(be.UNKNOWN,"Fetching auth token failed: "+i.message);return this.tu(r)})})}Zo(t,e){const i=this.Xo(this.Fo);this.stream=this.eu(t,e),this.stream.uo(()=>{i(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(r=>{i(()=>this.tu(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Go(){var t=this;this.state=5,this.qo.No((0,Ee.Z)(function*(){t.state=0,t.start()}))}tu(t){return Ke("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Xo(t){return e=>{this.ii.enqueueAndForget(()=>this.Fo===t?e():(Ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vV extends gP{constructor(t,e,i,r,s,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,c),this.serializer=s}eu(t,e){return this.connection.Ro("Listen",t,e)}onMessage(t){this.qo.reset();const e=function HC(n,t){let e;if("targetChange"in t){const i="NO_CHANGE"===(p=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:Dt(),r=t.targetChange.targetIds||[],s=function(p,m){return p.useProto3Json?(Lt(void 0===m||"string"==typeof m),jr.fromBase64String(m||"")):(Lt(void 0===m||m instanceof Uint8Array),jr.fromUint8Array(m||new Uint8Array))}(n,t.targetChange.resumeToken),c=t.targetChange.cause,d=c&&function(p){const m=void 0===p.code?be.UNKNOWN:PC(p.code);return new Ge(m,p.message||"")}(c);e=new NM(i,r,s,d||null)}else if("documentChange"in t){const i=t.documentChange,r=ac(n,i.document.name),s=rr(i.document.updateTime),c=i.document.createTime?rr(i.document.createTime):Bt.min(),d=new Rs({mapValue:{fields:i.document.fields}}),p=Fi.newFoundDocument(r,s,c,d);e=new Sw(i.targetIds||[],i.removedTargetIds||[],p.key,p)}else if("documentDelete"in t){const i=t.documentDelete,r=ac(n,i.document),s=i.readTime?rr(i.readTime):Bt.min(),c=Fi.newNoDocument(r,s);e=new Sw([],i.removedTargetIds||[],c.key,c)}else if("documentRemove"in t){const i=t.documentRemove,r=ac(n,i.document);e=new Sw([],i.removedTargetIds||[],r,null)}else{if(!("filter"in t))return Dt();{const i=t.filter,{count:r=0,unchangedNames:s}=i,c=new TM(r,s);e=new MM(i.targetId,c)}}var p;return e}(this.serializer,t),i=function(r){if(!("targetChange"in r))return Bt.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?Bt.min():s.readTime?rr(s.readTime):Bt.min()}(t);return this.listener.nu(e,i)}su(t){const e={};e.database=Rg(this.serializer),e.addTarget=function(r,s){let c;const d=s.target;if(c=cu(d)?{documents:GC(r,d)}:{query:$C(r,d)},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=kM(r,s.resumeToken);const p=BC(r,s.expectedCount);null!==p&&(c.expectedCount=p)}else if(s.snapshotVersion.compareTo(Bt.min())>0){c.readTime=xg(r,s.snapshotVersion.toTimestamp());const p=BC(r,s.expectedCount);null!==p&&(c.expectedCount=p)}return c}(this.serializer,t);const i=function WC(n,t){const e=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Dt()}}(t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);i&&(e.labels=i),this.Wo(e)}iu(t){const e={};e.database=Rg(this.serializer),e.removeTarget=t,this.Wo(e)}}class yV extends gP{constructor(t,e,i,r,s,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,c),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(t,e){return this.connection.Ro("Write",t,e)}onMessage(t){if(Lt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.ru){this.qo.reset();const e=function LM(n,t){return n&&n.length>0?(Lt(void 0!==t),n.map(e=>function(i,r){let s=rr(i.updateTime?i.updateTime:r);return s.isEqual(Bt.min())&&(s=rr(r)),new yw(s,i.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),i=rr(t.commitTime);return this.listener.cu(i,e)}return Lt(!t.writeResults||0===t.writeResults.length),this.ru=!0,this.listener.au()}hu(){const t={};t.database=Rg(this.serializer),this.Wo(t)}uu(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>Cf(this.serializer,i))};this.Wo(e)}}class wV extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new Ge(be.FAILED_PRECONDITION,"The client has already been terminated.")}Io(t,e,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.Io(t,e,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Ge(be.UNKNOWN,r.toString())})}vo(t,e,i,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.vo(t,e,i,s,c,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ge(be.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class DV{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(t){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.yu("Offline")))}set(t){this.Tu(),this.wu=0,"Online"===t&&(this.mu=!1),this.yu(t)}yu(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}pu(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Oi(e),this.mu=!1):Ke("OnlineStateTracker",e)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class EV{constructor(t,e,i,r,s){var c=this;this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(d=>{i.enqueueAndForget((0,Ee.Z)(function*(){var p;$d(c)&&(Ke("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,Ee.Z)(function*(m){const y=yt(m);y.vu.add(4),yield xf(y),y.bu.set("Unknown"),y.vu.delete(4),yield Gg(y)}),function(m){return p.apply(this,arguments)})(c))}))}),this.bu=new DV(i,r)}}function Gg(n){return yv.apply(this,arguments)}function yv(){return yv=(0,Ee.Z)(function*(n){if($d(n))for(const t of n.Ru)yield t(!0)}),yv.apply(this,arguments)}function xf(n){return ST.apply(this,arguments)}function ST(){return ST=(0,Ee.Z)(function*(n){for(const t of n.Ru)yield t(!1)}),ST.apply(this,arguments)}function Rf(n,t){const e=yt(n);e.Au.has(t.targetId)||(e.Au.set(t.targetId,t),eb(e)?AT(e):Dv(e).Ko()&&DN(e,t))}function wv(n,t){const e=yt(n),i=Dv(e);e.Au.delete(t),i.Ko()&&mP(e,t),0===e.Au.size&&(i.Ko()?i.jo():$d(e)&&e.bu.set("Unknown"))}function DN(n,t){if(n.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Bt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Dv(n).su(t)}function mP(n,t){n.Vu.qt(t),Dv(n).iu(t)}function AT(n){n.Vu=new Qk({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),le:t=>n.Au.get(t)||null,ue:()=>n.datastore.serializer.databaseId}),Dv(n).start(),n.bu.gu()}function eb(n){return $d(n)&&!Dv(n).Uo()&&n.Au.size>0}function $d(n){return 0===yt(n).vu.size}function EN(n){n.Vu=void 0}function _P(n){return CN.apply(this,arguments)}function CN(){return CN=(0,Ee.Z)(function*(n){n.Au.forEach((t,e)=>{DN(n,t)})}),CN.apply(this,arguments)}function vP(n,t){return Of.apply(this,arguments)}function Of(){return Of=(0,Ee.Z)(function*(n,t){EN(n),eb(n)?(n.bu.Iu(t),AT(n)):n.bu.set("Unknown")}),Of.apply(this,arguments)}function tb(n,t,e){return MT.apply(this,arguments)}function MT(){return MT=(0,Ee.Z)(function*(n,t,e){if(n.bu.set("Online"),t instanceof NM&&2===t.state&&t.cause)try{yield(i=(0,Ee.Z)(function*(r,s){const c=s.cause;for(const d of s.targetIds)r.Au.has(d)&&(yield r.remoteSyncer.rejectListen(d,c),r.Au.delete(d),r.Vu.removeTarget(d))}),function(r,s){return i.apply(this,arguments)})(n,t)}catch(i){Ke("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield nb(n,i)}else if(t instanceof Sw?n.Vu.Ht(t):t instanceof MM?n.Vu.ne(t):n.Vu.Xt(t),!e.isEqual(Bt.min()))try{const i=yield zw(n.localStore);e.compareTo(i)>=0&&(yield function(r,s){const c=r.Vu.ce(s);return c.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const m=r.Au.get(p);m&&r.Au.set(p,m.withResumeToken(d.resumeToken,s))}}),c.targetMismatches.forEach((d,p)=>{const m=r.Au.get(d);if(!m)return;r.Au.set(d,m.withResumeToken(jr.EMPTY_BYTE_STRING,m.snapshotVersion)),mP(r,d);const y=new Pd(m.target,d,p,m.sequenceNumber);DN(r,y)}),r.remoteSyncer.applyRemoteEvent(c)}(n,e))}catch(i){Ke("RemoteStore","Failed to raise snapshot:",i),yield nb(n,i)}var i}),MT.apply(this,arguments)}function nb(n,t,e){return NT.apply(this,arguments)}function NT(){return NT=(0,Ee.Z)(function*(n,t,e){if(!nu(t))throw t;n.vu.add(1),yield xf(n),n.bu.set("Offline"),e||(e=()=>zw(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){Ke("RemoteStore","Retrying IndexedDB access"),yield e(),n.vu.delete(1),yield Gg(n)}))}),NT.apply(this,arguments)}function TN(n,t){return t().catch(e=>nb(n,e,t))}function $g(n){return xT.apply(this,arguments)}function xT(){return xT=(0,Ee.Z)(function*(n){const t=yt(n),e=Rr(t);let i=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;RT(t);)try{const r=yield Ww(t.localStore,i);if(null===r){0===t.Eu.length&&e.jo();break}i=r.batchId,yP(t,r)}catch(r){yield nb(t,r)}IN(t)&&SN(t)}),xT.apply(this,arguments)}function RT(n){return $d(n)&&n.Eu.length<10}function yP(n,t){n.Eu.push(t);const e=Rr(n);e.Ko()&&e.ou&&e.uu(t.mutations)}function IN(n){return $d(n)&&!Rr(n).Uo()&&n.Eu.length>0}function SN(n){Rr(n).start()}function wP(n){return OT.apply(this,arguments)}function OT(){return OT=(0,Ee.Z)(function*(n){Rr(n).hu()}),OT.apply(this,arguments)}function bP(n){return kT.apply(this,arguments)}function kT(){return kT=(0,Ee.Z)(function*(n){const t=Rr(n);for(const e of n.Eu)t.uu(e.mutations)}),kT.apply(this,arguments)}function DP(n,t,e){return PT.apply(this,arguments)}function PT(){return PT=(0,Ee.Z)(function*(n,t,e){const i=n.Eu.shift(),r=kC.from(i,t,e);yield TN(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield $g(n)}),PT.apply(this,arguments)}function AN(n,t){return bv.apply(this,arguments)}function bv(){return bv=(0,Ee.Z)(function*(n,t){var e;t&&Rr(n).ou&&(yield(e=(0,Ee.Z)(function*(i,r){if(IM(s=r.code)&&s!==be.ABORTED){const c=i.Eu.shift();Rr(i).Qo(),yield TN(i,()=>i.remoteSyncer.rejectFailedWrite(c.batchId,r)),yield $g(i)}var s}),function(i,r){return e.apply(this,arguments)})(n,t)),IN(n)&&SN(n)}),bv.apply(this,arguments)}function MN(n,t){return FT.apply(this,arguments)}function FT(){return FT=(0,Ee.Z)(function*(n,t){const e=yt(n);e.asyncQueue.verifyOperationInProgress(),Ke("RemoteStore","RemoteStore received new credentials");const i=$d(e);e.vu.add(3),yield xf(e),i&&e.bu.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.vu.delete(3),yield Gg(e)}),FT.apply(this,arguments)}function ib(n,t){return rb.apply(this,arguments)}function rb(){return rb=(0,Ee.Z)(function*(n,t){const e=yt(n);t?(e.vu.delete(2),yield Gg(e)):t||(e.vu.add(2),yield xf(e),e.bu.set("Unknown"))}),rb.apply(this,arguments)}function Dv(n){return n.Su||(n.Su=function(t,e,i){const r=yt(t);return r.fu(),new vV(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(n.datastore,n.asyncQueue,{uo:_P.bind(null,n),ao:vP.bind(null,n),nu:tb.bind(null,n)}),n.Ru.push(function(){var t=(0,Ee.Z)(function*(e){e?(n.Su.Qo(),eb(n)?AT(n):n.bu.set("Unknown")):(yield n.Su.stop(),EN(n))});return function(e){return t.apply(this,arguments)}}())),n.Su}function Rr(n){return n.Du||(n.Du=function(t,e,i){const r=yt(t);return r.fu(),new yV(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(n.datastore,n.asyncQueue,{uo:wP.bind(null,n),ao:AN.bind(null,n),au:bP.bind(null,n),cu:DP.bind(null,n)}),n.Ru.push(function(){var t=(0,Ee.Z)(function*(e){e?(n.Du.Qo(),yield $g(n)):(yield n.Du.stop(),n.Eu.length>0&&(Ke("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(e){return t.apply(this,arguments)}}())),n.Du}class sb{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new _r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(t,e,i,r,s){const c=Date.now()+i,d=new sb(t,e,c,r,s);return d.start(i),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ge(be.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kf(n,t){if(Oi("AsyncQueue",`${t}: ${n}`),nu(n))return new Ge(be.UNAVAILABLE,`${t}: ${n}`);throw n}class zg{constructor(t){this.comparator=t?(e,i)=>t(e,i)||ft.comparator(e.key,i.key):(e,i)=>ft.comparator(e.key,i.key),this.keyedMap=ev(),this.sortedSet=new Pi(this.comparator)}static emptySet(t){return new zg(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof zg)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const i=new zg;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class LT{constructor(){this.Cu=new Pi(ft.comparator)}track(t){const e=t.doc.key,i=this.Cu.get(e);i?0!==t.type&&3===i.type?this.Cu=this.Cu.insert(e,t):3===t.type&&1!==i.type?this.Cu=this.Cu.insert(e,{type:i.type,doc:t.doc}):2===t.type&&2===i.type?this.Cu=this.Cu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===i.type?this.Cu=this.Cu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===i.type?this.Cu=this.Cu.remove(e):1===t.type&&2===i.type?this.Cu=this.Cu.insert(e,{type:1,doc:i.doc}):0===t.type&&1===i.type?this.Cu=this.Cu.insert(e,{type:2,doc:t.doc}):Dt():this.Cu=this.Cu.insert(e,t)}xu(){const t=[];return this.Cu.inorderTraversal((e,i)=>{t.push(i)}),t}}class Wg{constructor(t,e,i,r,s,c,d,p,m){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(t,e,i,r,s){const c=[];return e.forEach(d=>{c.push({type:0,doc:d})}),new Wg(t,e,zg.emptySet(e),c,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ws(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}class BT{constructor(){this.Nu=void 0,this.listeners=[]}}class zd{constructor(){this.queries=new rc(t=>Gk(t),ws),this.onlineState="Unknown",this.ku=new Set}}function ob(n,t){return Ev.apply(this,arguments)}function Ev(){return Ev=(0,Ee.Z)(function*(n,t){const e=yt(n),i=t.query;let r=!1,s=e.queries.get(i);if(s||(r=!0,s=new BT),r)try{s.Nu=yield e.onListen(i)}catch(c){const d=kf(c,`Initialization of query '${gw(t.query)}' failed`);return void t.onError(d)}e.queries.set(i,s),s.listeners.push(t),t.Mu(e.onlineState),s.Nu&&t.$u(s.Nu)&&UT(e)}),Ev.apply(this,arguments)}function Cv(n,t){return VT.apply(this,arguments)}function VT(){return VT=(0,Ee.Z)(function*(n,t){const e=yt(n),i=t.query;let r=!1;const s=e.queries.get(i);if(s){const c=s.listeners.indexOf(t);c>=0&&(s.listeners.splice(c,1),r=0===s.listeners.length)}if(r)return e.queries.delete(i),e.onUnlisten(i)}),VT.apply(this,arguments)}function CV(n,t){const e=yt(n);let i=!1;for(const r of t){const c=e.queries.get(r.query);if(c){for(const d of c.listeners)d.$u(r)&&(i=!0);c.Nu=r}}i&&UT(e)}function NN(n,t,e){const i=yt(n),r=i.queries.get(t);if(r)for(const s of r.listeners)s.onError(e);i.queries.delete(t)}function UT(n){n.ku.forEach(t=>{t.next()})}class HT{constructor(t,e,i){this.query=t,this.Ou=e,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=i||{}}$u(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)3!==r.type&&i.push(r);t=new Wg(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Fu?this.Lu(t)&&(this.Ou.next(t),e=!0):this.qu(t,this.onlineState)&&(this.Uu(t),e=!0),this.Bu=t,e}onError(t){this.Ou.error(t)}Mu(t){this.onlineState=t;let e=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,t)&&(this.Uu(this.Bu),e=!0),e}qu(t,e){return!t.fromCache||(!this.options.Ku||!("Offline"!==e))&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}Lu(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(t){t=Wg.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Fu=!0,this.Ou.next(t)}}class EP{constructor(t,e){this.Gu=t,this.byteLength=e}Qu(){return"metadata"in this.Gu}}class xN{constructor(t){this.serializer=t}rr(t){return ac(this.serializer,t)}ur(t){return t.metadata.exists?FM(this.serializer,t.document,!1):Fi.newNoDocument(this.rr(t.metadata.name),this.cr(t.metadata.readTime))}cr(t){return rr(t)}}class RN{constructor(t,e,i){this.ju=t,this.localStore=e,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=CP(t)}zu(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.Gu.namedQuery)this.queries.push(t.Gu.namedQuery);else if(t.Gu.documentMetadata){this.documents.push({metadata:t.Gu.documentMetadata}),t.Gu.documentMetadata.exists||++e;const i=Rn.fromString(t.Gu.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.Gu.document&&(this.documents[this.documents.length-1].document=t.Gu.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}Wu(t){const e=new Map,i=new xN(this.serializer);for(const r of t)if(r.metadata.queries){const s=i.rr(r.metadata.name);for(const c of r.metadata.queries){const d=(e.get(c)||hn()).add(s);e.set(c,d)}}return e}complete(){var t=this;return(0,Ee.Z)(function*(){const e=yield function pN(n,t,e,i){return _v.apply(this,arguments)}(t.localStore,new xN(t.serializer),t.documents,t.ju.id),i=t.Wu(t.documents);for(const r of t.queries)yield _V(t.localStore,r,i.get(r.name));return t.progress.taskState="Success",{progress:t.progress,Hu:t.collectionGroups,Ju:e}})()}}function CP(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class jT{constructor(t){this.key=t}}class ON{constructor(t){this.key=t}}class GT{constructor(t,e){this.query=t,this.Yu=e,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=hn(),this.mutatedKeys=hn(),this.tc=AC(t),this.ec=new zg(this.tc)}get nc(){return this.Yu}sc(t,e){const i=e?e.ic:new LT,r=e?e.ec:this.ec;let s=e?e.mutatedKeys:this.mutatedKeys,c=r,d=!1;const p="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,m="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((y,T)=>{const A=r.get(y),x=Ig(this.query,T)?T:null,P=!!A&&this.mutatedKeys.has(A.key),V=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let G=!1;A&&x?A.data.isEqual(x.data)?P!==V&&(i.track({type:3,doc:x}),G=!0):this.rc(A,x)||(i.track({type:2,doc:x}),G=!0,(p&&this.tc(x,p)>0||m&&this.tc(x,m)<0)&&(d=!0)):!A&&x?(i.track({type:0,doc:x}),G=!0):A&&!x&&(i.track({type:1,doc:A}),G=!0,(p||m)&&(d=!0)),G&&(x?(c=c.add(x),s=V?s.add(y):s.delete(y)):(c=c.delete(y),s=s.delete(y)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const y="F"===this.query.limitType?c.last():c.first();c=c.delete(y.key),s=s.delete(y.key),i.track({type:1,doc:y})}return{ec:c,ic:i,zi:d,mutatedKeys:s}}rc(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i){const r=this.ec;this.ec=t.ec,this.mutatedKeys=t.mutatedKeys;const s=t.ic.xu();s.sort((m,y)=>function(T,A){const x=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Dt()}};return x(T)-x(A)}(m.type,y.type)||this.tc(m.doc,y.doc)),this.oc(i);const c=e?this.uc():[],d=0===this.Zu.size&&this.current?1:0,p=d!==this.Xu;return this.Xu=d,0!==s.length||p?{snapshot:new Wg(this.query,t.ec,r,s,t.mutatedKeys,0===d,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),cc:c}:{cc:c}}Mu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({ec:this.ec,ic:new LT,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(t){return!this.Yu.has(t)&&!!this.ec.has(t)&&!this.ec.get(t).hasLocalMutations}oc(t){t&&(t.addedDocuments.forEach(e=>this.Yu=this.Yu.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Yu=this.Yu.delete(e)),this.current=t.current)}uc(){if(!this.current)return[];const t=this.Zu;this.Zu=hn(),this.ec.forEach(i=>{this.ac(i.key)&&(this.Zu=this.Zu.add(i.key))});const e=[];return t.forEach(i=>{this.Zu.has(i)||e.push(new ON(i))}),this.Zu.forEach(i=>{t.has(i)||e.push(new jT(i))}),e}hc(t){this.Yu=t.ir,this.Zu=hn();const e=this.sc(t.documents);return this.applyChanges(e,!0)}lc(){return Wg.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class TV{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class $T{constructor(t){this.key=t,this.fc=!1}}class kN{constructor(t,e,i,r,s,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=c,this.dc={},this.wc=new rc(d=>Gk(d),ws),this._c=new Map,this.mc=new Set,this.gc=new Pi(ft.comparator),this.yc=new Map,this.Ic=new Hw,this.Tc={},this.Ec=new Map,this.Ac=Vd.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function PN(n,t){return zT.apply(this,arguments)}function zT(){return zT=(0,Ee.Z)(function*(n,t){const e=db(n);let i,r;const s=e.wc.get(t);if(s)i=s.targetId,e.sharedClientState.addLocalQueryTarget(i),r=s.view.lc();else{const c=yield Gd(e.localStore,lo(t)),d=e.sharedClientState.addLocalQueryTarget(c.targetId);i=c.targetId,r=yield ab(e,t,i,"current"===d,c.resumeToken),e.isPrimaryClient&&Rf(e.remoteStore,c)}return r}),zT.apply(this,arguments)}function ab(n,t,e,i,r){return lb.apply(this,arguments)}function lb(){return lb=(0,Ee.Z)(function*(n,t,e,i,r){n.Rc=(T,A,x)=>{return(P=(0,Ee.Z)(function*(V,G,te,se){let le=G.view.sc(te);le.zi&&(le=yield Yw(V.localStore,G.query,!1).then(({documents:je})=>G.view.sc(je,le)));const de=se&&se.targetChanges.get(G.targetId),Oe=G.view.applyChanges(le,V.isPrimaryClient,de);return jN(V,G.targetId,Oe.cc),Oe.snapshot}),function(V,G,te,se){return P.apply(this,arguments)})(n,T,A,x);var P};const s=yield Yw(n.localStore,t,!0),c=new GT(t,s.ir),d=c.sc(s.documents),p=lv.createSynthesizedTargetChangeForCurrentChange(e,i&&"Offline"!==n.onlineState,r),m=c.applyChanges(d,n.isPrimaryClient,p);jN(n,e,m.cc);const y=new TV(t,e,c);return n.wc.set(t,y),n._c.has(e)?n._c.get(e).push(t):n._c.set(e,[t]),m.snapshot}),lb.apply(this,arguments)}function qg(n,t){return Yg.apply(this,arguments)}function Yg(){return Yg=(0,Ee.Z)(function*(n,t){const e=yt(n),i=e.wc.get(t),r=e._c.get(i.targetId);if(r.length>1)return e._c.set(i.targetId,r.filter(s=>!ws(s,t))),void e.wc.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(i.targetId),e.sharedClientState.isActiveQueryTarget(i.targetId)||(yield mv(e.localStore,i.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(i.targetId),wv(e.remoteStore,i.targetId),Tv(e,i.targetId)}).catch(tu))):(Tv(e,i.targetId),yield mv(e.localStore,i.targetId,!0))}),Yg.apply(this,arguments)}function cb(){return cb=(0,Ee.Z)(function*(n,t,e){const i=hb(n);try{const r=yield function(s,c){const d=yt(s),p=Wi.now(),m=c.reduce((A,x)=>A.add(x.key),hn());let y,T;return d.persistence.runTransaction("Locally write mutations","readwrite",A=>{let x=ko(),P=hn();return d.Zi.getEntries(A,m).next(V=>{x=V,x.forEach((G,te)=>{te.isValidDocument()||(P=P.add(G))})}).next(()=>d.localDocuments.getOverlayedDocuments(A,x)).next(V=>{y=V;const G=[];for(const te of c){const se=Yk(te,y.get(te.key).overlayedDocument);null!=se&&G.push(new uu(te.key,se,eM(se.value.mapValue),qi.exists(!0)))}return d.mutationQueue.addMutationBatch(A,p,G,c)}).next(V=>{T=V;const G=V.applyToLocalDocumentSet(y,P);return d.documentOverlayCache.saveOverlays(A,V.batchId,G)})}).then(()=>({batchId:T.batchId,changes:Sg(y)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(s,c,d){let p=s.Tc[s.currentUser.toKey()];p||(p=new Pi(on)),p=p.insert(c,d),s.Tc[s.currentUser.toKey()]=p}(i,r.batchId,e),yield hu(i,r.changes),yield $g(i.remoteStore)}catch(r){const s=kf(r,"Failed to persist write");e.reject(s)}}),cb.apply(this,arguments)}function LN(n,t){return WT.apply(this,arguments)}function WT(){return WT=(0,Ee.Z)(function*(n,t){const e=yt(n);try{const i=yield function dN(n,t){const e=yt(n),i=t.snapshotVersion;let r=e.Ji;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const c=e.Zi.newChangeBuffer({trackRemovals:!0});r=e.Ji;const d=[];t.targetChanges.forEach((y,T)=>{const A=r.get(T);if(!A)return;d.push(e.Bs.removeMatchingKeys(s,y.removedDocuments,T).next(()=>e.Bs.addMatchingKeys(s,y.addedDocuments,T)));let x=A.withSequenceNumber(s.currentSequenceNumber);var P,V,G;null!==t.targetMismatches.get(T)?x=x.withResumeToken(jr.EMPTY_BYTE_STRING,Bt.min()).withLastLimboFreeSnapshotVersion(Bt.min()):y.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(y.resumeToken,i)),r=r.insert(T,x),V=x,G=y,(0===(P=A).resumeToken.approximateByteSize()||V.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8||G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0)&&d.push(e.Bs.updateTargetData(s,x))});let p=ko(),m=hn();if(t.documentUpdates.forEach(y=>{t.resolvedLimboDocuments.has(y)&&d.push(e.persistence.referenceDelegate.updateLimboDocument(s,y))}),d.push(hN(s,c,t.documentUpdates).next(y=>{p=y.nr,m=y.sr})),!i.isEqual(Bt.min())){const y=e.Bs.getLastRemoteSnapshotVersion(s).next(T=>e.Bs.setTargetsMetadata(s,s.currentSequenceNumber,i));d.push(y)}return _e.waitFor(d).next(()=>c.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,p,m)).next(()=>p)}).then(s=>(e.Ji=r,s))}(e.localStore,t);t.targetChanges.forEach((r,s)=>{const c=e.yc.get(s);c&&(Lt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?c.fc=!0:r.modifiedDocuments.size>0?Lt(c.fc):r.removedDocuments.size>0&&(Lt(c.fc),c.fc=!1))}),yield hu(e,i,t)}catch(i){yield tu(i)}}),WT.apply(this,arguments)}function TP(n,t,e){const i=yt(n);if(i.isPrimaryClient&&0===e||!i.isPrimaryClient&&1===e){const r=[];i.wc.forEach((s,c)=>{const d=c.view.Mu(t);d.snapshot&&r.push(d.snapshot)}),function(s,c){const d=yt(s);d.onlineState=c;let p=!1;d.queries.forEach((m,y)=>{for(const T of y.listeners)T.Mu(c)&&(p=!0)}),p&&UT(d)}(i.eventManager,t),r.length&&i.dc.nu(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function BN(n,t,e){return qT.apply(this,arguments)}function qT(){return qT=(0,Ee.Z)(function*(n,t,e){const i=yt(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.yc.get(t),s=r&&r.key;if(s){let c=new Pi(ft.comparator);c=c.insert(s,Fi.newNoDocument(s,Bt.min()));const d=hn().add(s),p=new av(Bt.min(),new Map,new Pi(on),c,d);yield LN(i,p),i.gc=i.gc.remove(s),i.yc.delete(t),GN(i)}else yield mv(i.localStore,t,!1).then(()=>Tv(i,t,e)).catch(tu)}),qT.apply(this,arguments)}function IP(n,t){return VN.apply(this,arguments)}function VN(){return VN=(0,Ee.Z)(function*(n,t){const e=yt(n),i=t.batch.batchId;try{const r=yield function dP(n,t){const e=yt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=e.Zi.newChangeBuffer({trackRemovals:!0});return function(c,d,p,m){const y=p.batch,T=y.keys();let A=_e.resolve();return T.forEach(x=>{A=A.next(()=>m.getEntry(d,x)).next(P=>{const V=p.docVersions.get(x);Lt(null!==V),P.version.compareTo(V)<0&&(y.applyToRemoteDocument(P,p),P.isValidDocument()&&(P.setReadTime(p.commitVersion),m.addEntry(P)))})}),A.next(()=>c.mutationQueue.removeMutationBatch(d,y))}(e,i,t,s).next(()=>s.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let d=hn();for(let p=0;p<c.mutationResults.length;++p)c.mutationResults[p].transformResults.length>0&&(d=d.add(c.batch.mutations[p].key));return d}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}(e.localStore,t);KT(e,i,null),ZT(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield hu(e,r)}catch(r){yield tu(r)}}),VN.apply(this,arguments)}function IV(n,t,e){return UN.apply(this,arguments)}function UN(){return UN=(0,Ee.Z)(function*(n,t,e){const i=yt(n);try{const r=yield function(s,c){const d=yt(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let m;return d.mutationQueue.lookupMutationBatch(p,c).next(y=>(Lt(null!==y),m=y.keys(),d.mutationQueue.removeMutationBatch(p,y))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,m,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,m)).next(()=>d.localDocuments.getDocuments(p,m))})}(i.localStore,t);KT(i,t,e),ZT(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield hu(i,r)}catch(r){yield tu(r)}}),UN.apply(this,arguments)}function YT(){return YT=(0,Ee.Z)(function*(n,t){const e=yt(n);$d(e.remoteStore)||Ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const c=yt(s);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>c.mutationQueue.getHighestUnacknowledgedBatchId(d))}(e.localStore);if(-1===i)return void t.resolve();const r=e.Ec.get(i)||[];r.push(t),e.Ec.set(i,r)}catch(i){const r=kf(i,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}}),YT.apply(this,arguments)}function ZT(n,t){(n.Ec.get(t)||[]).forEach(e=>{e.resolve()}),n.Ec.delete(t)}function KT(n,t,e){const i=yt(n);let r=i.Tc[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),i.Tc[i.currentUser.toKey()]=r}}function Tv(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n._c.get(t))n.wc.delete(i),e&&n.dc.Pc(i,e);n._c.delete(t),n.isPrimaryClient&&n.Ic.Is(t).forEach(i=>{n.Ic.containsKey(i)||SP(n,i)})}function SP(n,t){n.mc.delete(t.path.canonicalString());const e=n.gc.get(t);null!==e&&(wv(n.remoteStore,e),n.gc=n.gc.remove(t),n.yc.delete(e),GN(n))}function jN(n,t,e){for(const i of e)i instanceof jT?(n.Ic.addReference(i.key,t),SV(n,i)):i instanceof ON?(Ke("SyncEngine","Document no longer in limbo: "+i.key),n.Ic.removeReference(i.key,t),n.Ic.containsKey(i.key)||SP(n,i.key)):Dt()}function SV(n,t){const e=t.key,i=e.path.canonicalString();n.gc.get(e)||n.mc.has(i)||(Ke("SyncEngine","New document in limbo: "+e),n.mc.add(i),GN(n))}function GN(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const t=n.mc.values().next().value;n.mc.delete(t);const e=new ft(Rn.fromString(t)),i=n.Ac.next();n.yc.set(i,new $T(e)),n.gc=n.gc.insert(e,i),Rf(n.remoteStore,new Pd(lo(X_(e.path)),i,"TargetPurposeLimboResolution",Oo.ct))}}function hu(n,t,e){return Zg.apply(this,arguments)}function Zg(){return Zg=(0,Ee.Z)(function*(n,t,e){const i=yt(n),r=[],s=[],c=[];var d;i.wc.isEmpty()||(i.wc.forEach((d,p)=>{c.push(i.Rc(p,t,e).then(m=>{if((m||e)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(p.targetId,m?.fromCache?"not-current":"current"),m){r.push(m);const y=vT.Li(p.targetId,m);s.push(y)}}))}),yield Promise.all(c),i.dc.nu(r),yield(d=(0,Ee.Z)(function*(p,m){const y=yt(p);try{yield y.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>_e.forEach(m,A=>_e.forEach(A.Fi,x=>y.persistence.referenceDelegate.addReference(T,A.targetId,x)).next(()=>_e.forEach(A.Bi,x=>y.persistence.referenceDelegate.removeReference(T,A.targetId,x)))))}catch(T){if(!nu(T))throw T;Ke("LocalStore","Failed to update sequence numbers: "+T)}for(const T of m){const A=T.targetId;if(!T.fromCache){const x=y.Ji.get(A),V=x.withLastLimboFreeSnapshotVersion(x.snapshotVersion);y.Ji=y.Ji.insert(A,V)}}}),function(p,m){return d.apply(this,arguments)})(i.localStore,s))}),Zg.apply(this,arguments)}function AP(n,t){return QT.apply(this,arguments)}function QT(){return QT=(0,Ee.Z)(function*(n,t){const e=yt(n);if(!e.currentUser.isEqual(t)){Ke("SyncEngine","User change. New user:",t.toKey());const i=yield uN(e.localStore,t);e.currentUser=t,(r=e).Ec.forEach(c=>{c.forEach(d=>{d.reject(new Ge(be.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.Ec.clear(),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield hu(e,i.er)}var r}),QT.apply(this,arguments)}function $N(n,t){const e=yt(n),i=e.yc.get(t);if(i&&i.fc)return hn().add(i.key);{let r=hn();const s=e._c.get(t);if(!s)return r;for(const c of s){const d=e.wc.get(c);r=r.unionWith(d.view.nc)}return r}}function Pf(n,t){return ub.apply(this,arguments)}function ub(){return ub=(0,Ee.Z)(function*(n,t){const e=yt(n),i=yield Yw(e.localStore,t.query,!0),r=t.view.hc(i);return e.isPrimaryClient&&jN(e,t.targetId,r.cc),r}),ub.apply(this,arguments)}function JT(n,t){return Iv.apply(this,arguments)}function Iv(){return Iv=(0,Ee.Z)(function*(n,t){const e=yt(n);return Nf(e.localStore,t).then(i=>hu(e,i))}),Iv.apply(this,arguments)}function MP(n,t,e,i){return Sv.apply(this,arguments)}function Sv(){return Sv=(0,Ee.Z)(function*(n,t,e,i){const r=yt(n),s=yield function(c,d){const p=yt(c),m=yt(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",y=>m.Sn(y,d).next(T=>T?p.localDocuments.getDocuments(y,T):_e.resolve(null)))}(r.localStore,t);var d;null!==s?("pending"===e?yield $g(r.remoteStore):"acknowledged"===e||"rejected"===e?(KT(r,t,i||null),ZT(r,t),d=t,yt(yt(r.localStore).mutationQueue).Cn(d)):Dt(),yield hu(r,s)):Ke("SyncEngine","Cannot apply mutation batch with id: "+t)}),Sv.apply(this,arguments)}function Kg(){return Kg=(0,Ee.Z)(function*(n,t){const e=yt(n);if(db(e),hb(e),!0===t&&!0!==e.vc){const i=e.sharedClientState.getAllActiveQueryTargets(),r=yield NP(e,i.toArray());e.vc=!0,yield ib(e.remoteStore,!0);for(const s of r)Rf(e.remoteStore,s)}else if(!1===t&&!1!==e.vc){const i=[];let r=Promise.resolve();e._c.forEach((s,c)=>{e.sharedClientState.isLocalQueryTarget(c)?i.push(c):r=r.then(()=>(Tv(e,c),mv(e.localStore,c,!0))),wv(e.remoteStore,c)}),yield r,yield NP(e,i),function(s){const c=yt(s);c.yc.forEach((d,p)=>{wv(c.remoteStore,p)}),c.Ic.Ts(),c.yc=new Map,c.gc=new Pi(ft.comparator)}(e),e.vc=!1,yield ib(e.remoteStore,!1)}}),Kg.apply(this,arguments)}function NP(n,t,e){return zN.apply(this,arguments)}function zN(){return zN=(0,Ee.Z)(function*(n,t,e){const i=yt(n),r=[],s=[];for(const c of t){let d;const p=i._c.get(c);if(p&&0!==p.length){d=yield Gd(i.localStore,lo(p[0]));for(const m of p){const y=i.wc.get(m),T=yield Pf(i,y);T.snapshot&&s.push(T.snapshot)}}else{const m=yield bT(i.localStore,c);d=yield Gd(i.localStore,m),yield ab(i,xP(m),c,!1,d.resumeToken)}r.push(d)}return i.dc.nu(s),r}),zN.apply(this,arguments)}function xP(n){return TC(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function WN(n){const t=yt(n);return yt(yt(t.localStore).persistence).$i()}function RP(n,t,e,i){return eI.apply(this,arguments)}function eI(){return eI=(0,Ee.Z)(function*(n,t,e,i){const r=yt(n);if(r.vc)return void Ke("SyncEngine","Ignoring unexpected query state notification.");const s=r._c.get(t);if(s&&s.length>0)switch(e){case"current":case"not-current":{const c=yield Nf(r.localStore,dM(s[0])),d=av.createSynthesizedRemoteEventForCurrentChange(t,"current"===e,jr.EMPTY_BYTE_STRING);yield hu(r,c,d);break}case"rejected":yield mv(r.localStore,t,!0),Tv(r,t,i);break;default:Dt()}}),eI.apply(this,arguments)}function OP(n,t,e){return tI.apply(this,arguments)}function tI(){return tI=(0,Ee.Z)(function*(n,t,e){const i=db(n);if(i.vc){for(const r of t){if(i._c.has(r)){Ke("SyncEngine","Adding an already active target "+r);continue}const s=yield bT(i.localStore,r),c=yield Gd(i.localStore,s);yield ab(i,xP(s),c.targetId,!1,c.resumeToken),Rf(i.remoteStore,c)}for(const r of e)i._c.has(r)&&(yield mv(i.localStore,r,!1).then(()=>{wv(i.remoteStore,r),Tv(i,r)}).catch(tu))}}),tI.apply(this,arguments)}function db(n){const t=yt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=LN.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=$N.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=BN.bind(null,t),t.dc.nu=CV.bind(null,t.eventManager),t.dc.Pc=NN.bind(null,t.eventManager),t}function hb(n){const t=yt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=IP.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=IV.bind(null,t),t}class Av{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,Ee.Z)(function*(){e.serializer=jg(t.databaseInfo.databaseId),e.sharedClientState=e.createSharedClientState(t),e.persistence=e.createPersistence(t),yield e.persistence.start(),e.localStore=e.createLocalStore(t),e.gcScheduler=e.createGarbageCollectionScheduler(t,e.localStore),e.indexBackfillerScheduler=e.createIndexBackfillerScheduler(t,e.localStore)})()}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return yT(this.persistence,new $w,t.initialUser,this.serializer)}createPersistence(t){return new jd(jw.zs,this.serializer)}createSharedClientState(t){return new mN}terminate(){var t=this;return(0,Ee.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class fb extends Av{constructor(t,e,i){super(),this.Vc=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,i=this;return(0,Ee.Z)(function*(){yield e().call(i,t),yield i.Vc.initialize(i,t),yield hb(i.Vc.syncEngine),yield $g(i.Vc.remoteStore),yield i.persistence.Ii(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(t){return yT(this.persistence,new $w,t.initialUser,this.serializer)}createGarbageCollectionScheduler(t,e){return new nN(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,e)}createIndexBackfillerScheduler(t,e){const i=new $A(e,this.persistence);return new ow(t.asyncQueue,i)}createPersistence(t){const e=Mf(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?Ws.withCacheSize(this.cacheSizeBytes):Ws.DEFAULT;return new cN(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,yN(),IT(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(t){return new mN}}class pb extends fb{constructor(t,e){super(t,e,!1),this.Vc=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,i=this;return(0,Ee.Z)(function*(){yield e().call(i,t);const r=i.Vc.syncEngine;i.sharedClientState instanceof Qw&&(i.sharedClientState.syncEngine={jr:MP.bind(null,r),zr:RP.bind(null,r),Wr:OP.bind(null,r),$i:WN.bind(null,r),Qr:JT.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.Ii(function(){var s=(0,Ee.Z)(function*(c){yield function XT(n,t){return Kg.apply(this,arguments)}(i.Vc.syncEngine,c),i.gcScheduler&&(c&&!i.gcScheduler.started?i.gcScheduler.start():c||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(c&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():c||i.indexBackfillerScheduler.stop())});return function(c){return s.apply(this,arguments)}}())})()}createSharedClientState(t){const e=yN();if(!Qw.D(e))throw new Ge(be.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=Mf(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Qw(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class Mv{initialize(t,e){var i=this;return(0,Ee.Z)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(e),i.remoteStore=i.createRemoteStore(e),i.eventManager=i.createEventManager(e),i.syncEngine=i.createSyncEngine(e,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>TP(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=AP.bind(null,i.syncEngine),yield ib(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new zd}createDatastore(t){const e=jg(t.databaseInfo.databaseId),i=new pP(t.databaseInfo);return new wV(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return e=this.localStore,i=this.datastore,r=t.asyncQueue,s=d=>TP(this.syncEngine,d,0),c=TT.D()?new TT:new fP,new EV(e,i,r,s,c);var e,i,r,s,c}createSyncEngine(t,e){return function(i,r,s,c,d,p,m){const y=new kN(i,r,s,c,d,p);return m&&(y.vc=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,Ee.Z)(function*(e){const i=yt(e);Ke("RemoteStore","RemoteStore shutting down."),i.vu.add(5),yield xf(i),i.Pu.shutdown(),i.bu.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function nI(n,t=10240){let e=0;return{read:()=>(0,Ee.Z)(function*(){if(e<n.byteLength){const i={value:n.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Qg{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Sc(this.observer.next,t)}error(t){this.observer.error?this.Sc(this.observer.error,t):Oi("Uncaught Error in snapshot listener:",t.toString())}Dc(){this.muted=!0}Sc(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class PP{constructor(t,e){this.Cc=t,this.serializer=e,this.metadata=new _r,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(i=>{i&&i.Qu()?this.metadata.resolve(i.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.Gu)}`))},i=>this.metadata.reject(i))}close(){return this.Cc.cancel()}getMetadata(){var t=this;return(0,Ee.Z)(function*(){return t.metadata.promise})()}bc(){var t=this;return(0,Ee.Z)(function*(){return yield t.getMetadata(),t.Nc()})()}Nc(){var t=this;return(0,Ee.Z)(function*(){const e=yield t.kc();if(null===e)return null;const i=t.xc.decode(e),r=Number(i);isNaN(r)&&t.Mc(`length string (${i}) is not valid number`);const s=yield t.$c(r);return new EP(JSON.parse(s),e.length+r)})()}Oc(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}kc(){var t=this;return(0,Ee.Z)(function*(){for(;t.Oc()<0&&!(yield t.Fc()););if(0===t.buffer.length)return null;const e=t.Oc();e<0&&t.Mc("Reached the end of bundle when a length string is expected.");const i=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),i})()}$c(t){var e=this;return(0,Ee.Z)(function*(){for(;e.buffer.length<t;)(yield e.Fc())&&e.Mc("Reached the end of bundle when more is expected.");const i=e.xc.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),i})()}Mc(t){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${t}`)}Fc(){var t=this;return(0,Ee.Z)(function*(){const e=yield t.Cc.read();if(!e.done){const i=new Uint8Array(t.buffer.length+e.value.length);i.set(t.buffer),i.set(e.value,t.buffer.length),t.buffer=i}return e.done})()}}class FP{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new Ge(be.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,Ee.Z)(function*(s,c){const d=yt(s),p=Rg(d.serializer)+"/documents",m={documents:c.map(x=>cv(d.serializer,x))},y=yield d.vo("BatchGetDocuments",p,m,c.length),T=new Map;y.forEach(x=>{const P=function gV(n,t){return"found"in t?function(e,i){Lt(!!i.found);const r=ac(e,i.found.name),s=rr(i.found.updateTime),c=i.found.createTime?rr(i.found.createTime):Bt.min(),d=new Rs({mapValue:{fields:i.found.fields}});return Fi.newFoundDocument(r,s,c,d)}(n,t):"missing"in t?function(e,i){Lt(!!i.missing),Lt(!!i.readTime);const r=ac(e,i.missing),s=rr(i.readTime);return Fi.newNoDocument(r,s)}(n,t):Dt()}(d.serializer,x);T.set(P.key.toString(),P)});const A=[];return c.forEach(x=>{const P=T.get(x.toString());Lt(!!P),A.push(P)}),A}),function(s,c){return r.apply(this,arguments)})(e.datastore,t);var r;return i.forEach(r=>e.recordVersion(r)),i})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new oc(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,Ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var i;t.mutations.forEach(i=>{e.delete(i.key.toString())}),e.forEach((i,r)=>{const s=ft.fromPath(r);t.mutations.push(new OC(s,t.precondition(s)))}),yield(i=(0,Ee.Z)(function*(r,s){const c=yt(r),d=Rg(c.serializer)+"/documents",p={writes:s.map(m=>Cf(c.serializer,m))};yield c.Io("Commit",d,p)}),function(r,s){return i.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Dt();e=Bt.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new Ge(be.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(Bt.min())?qi.exists(!1):qi.updateTime(e):qi.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Bt.min()))throw new Ge(be.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return qi.updateTime(e)}return qi.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class AV{constructor(t,e,i,r,s){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=r,this.deferred=s,this.Bc=i.maxAttempts,this.qo=new wN(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var t=this;this.qo.No((0,Ee.Z)(function*(){const e=new FP(t.datastore),i=t.qc(e);i&&i.then(r=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(r)}).catch(s=>{t.Uc(s)}))}).catch(r=>{t.Uc(r)})}))}qc(t){try{const e=this.updateFunction(t);return!_g(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Uc(t){this.Bc>0&&this.Kc(t)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(t)}Kc(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||"already-exists"===e||!IM(e)}return!1}}class MV{constructor(t,e,i,r){var s=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=vs.UNAUTHENTICATED,this.clientId=YE.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var c=(0,Ee.Z)(function*(d){Ke("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(i,c=>(Ke("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var t=this;return(0,Ee.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ge(be.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new _r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{t._onlineComponents&&(yield t._onlineComponents.terminate()),t._offlineComponents&&(yield t._offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(i){const r=kf(i,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}function gb(n,t){return iI.apply(this,arguments)}function iI(){return iI=(0,Ee.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),Ke("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(function(){var r=(0,Ee.Z)(function*(s){i.isEqual(s)||(yield uN(t.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}),iI.apply(this,arguments)}function rI(n,t){return sI.apply(this,arguments)}function sI(){return sI=(0,Ee.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield mb(n);Ke("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield t.initialize(e,i),n.setCredentialChangeListener(r=>MN(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>MN(t.remoteStore,s)),n._onlineComponents=t}),sI.apply(this,arguments)}function oI(n){return"FirebaseError"===n.name?n.code===be.FAILED_PRECONDITION||n.code===be.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function mb(n){return aI.apply(this,arguments)}function aI(){return aI=(0,Ee.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ke("FirestoreClient","Using user provided OfflineComponentProvider");try{yield gb(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!oI(e))throw e;Qo("Error using user provided cache. Falling back to memory cache: "+e),yield gb(n,new Av)}}else Ke("FirestoreClient","Using default OfflineComponentProvider"),yield gb(n,new Av);return n._offlineComponents}),aI.apply(this,arguments)}function Nv(n){return _b.apply(this,arguments)}function _b(){return _b=(0,Ee.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ke("FirestoreClient","Using user provided OnlineComponentProvider"),yield rI(n,n._uninitializedComponentsProvider._online)):(Ke("FirestoreClient","Using default OnlineComponentProvider"),yield rI(n,new Mv))),n._onlineComponents}),_b.apply(this,arguments)}function LP(n){return mb(n).then(t=>t.persistence)}function vb(n){return mb(n).then(t=>t.localStore)}function yb(n){return Nv(n).then(t=>t.remoteStore)}function wb(n){return Nv(n).then(t=>t.syncEngine)}function Jg(n){return Xg.apply(this,arguments)}function Xg(){return Xg=(0,Ee.Z)(function*(n){const t=yield Nv(n),e=t.eventManager;return e.onListen=PN.bind(null,t.syncEngine),e.onUnlisten=qg.bind(null,t.syncEngine),e}),Xg.apply(this,arguments)}function cI(n,t,e={}){const i=new _r;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(r,s,c,d,p){const m=new Qg({next:T=>{s.enqueueAndForget(()=>Cv(r,y));const A=T.docs.has(c);!A&&T.fromCache?p.reject(new Ge(be.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&T.fromCache&&d&&"server"===d.source?p.reject(new Ge(be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(T)},error:T=>p.reject(T)}),y=new HT(X_(c.path),m,{includeMetadataChanges:!0,Ku:!0});return ob(r,y)}(yield Jg(n),n.asyncQueue,t,e,i)})),i.promise}function ZN(n,t,e={}){const i=new _r;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(r,s,c,d,p){const m=new Qg({next:T=>{s.enqueueAndForget(()=>Cv(r,y)),T.fromCache&&"server"===d.source?p.reject(new Ge(be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(T)},error:T=>p.reject(T)}),y=new HT(c,m,{includeMetadataChanges:!0,Ku:!0});return ob(r,y)}(yield Jg(n),n.asyncQueue,t,e,i)})),i.promise}function KN(n){const t={};return void 0!==n.timeoutSeconds&&(t.timeoutSeconds=n.timeoutSeconds),t}const QN=new Map;function JN(n,t,e){if(!e)throw new Ge(be.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function HP(n,t,e,i){if(!0===t&&!0===i)throw new Ge(be.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function jP(n){if(!ft.isDocumentKey(n))throw new Ge(be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function GP(n){if(ft.isDocumentKey(n))throw new Ge(be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function uI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":Dt()}function Pn(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Ge(be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=uI(n);throw new Ge(be.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function $P(n,t){if(t<=0)throw new Ge(be.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}class zP{constructor(t){var e,i;if(void 0===t.host){if(void 0!==t.ssl)throw new Ge(be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ge(be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}HP("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==t.experimentalAutoDetectLongPolling&&!t.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=KN(null!==(i=t.experimentalLongPollingOptions)&&void 0!==i?i:{}),function(r){if(void 0!==r.timeoutSeconds){if(isNaN(r.timeoutSeconds))throw new Ge(be.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ge(be.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ge(be.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===t.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class bb{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zP({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ge(be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Ge(be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zP(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new dV;switch(e.type){case"firstParty":return new Ak(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Ge(be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=QN.get(t);e&&(Ke("ComponentProvider","Removing Datastore"),QN.delete(t),e.terminate())}(this),Promise.resolve()}}class Li{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fu(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Li(this.firestore,t,this._key)}}class ks{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new ks(this.firestore,t,this._query)}}class fu extends ks{constructor(t,e,i){super(t,e,X_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Li(this.firestore,null,new ft(t))}withConverter(t){return new fu(this.firestore,t,this._path)}}function o(n,t,...e){if(n=(0,L.m9)(n),JN("collection","path",t),n instanceof bb){const i=Rn.fromString(t,...e);return GP(i),new fu(n,null,i)}{if(!(n instanceof Li||n instanceof fu))throw new Ge(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Rn.fromString(t,...e));return GP(i),new fu(n.firestore,null,i)}}function u(n,t,...e){if(n=(0,L.m9)(n),1===arguments.length&&(t=YE.A()),JN("doc","path",t),n instanceof bb){const i=Rn.fromString(t,...e);return jP(i),new Li(n,null,new ft(i))}{if(!(n instanceof Li||n instanceof fu))throw new Ge(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Rn.fromString(t,...e));return jP(i),new Li(n.firestore,n instanceof fu?n.converter:null,new ft(i))}}function h(n,t){return n=(0,L.m9)(n),t=(0,L.m9)(t),(n instanceof Li||n instanceof fu)&&(t instanceof Li||t instanceof fu)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function f(n,t){return n=(0,L.m9)(n),t=(0,L.m9)(t),n instanceof ks&&t instanceof ks&&n.firestore===t.firestore&&ws(n._query,t._query)&&n.converter===t.converter}class _{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new wN(this,"async_queue_retry"),this.Xc=()=>{const e=IT();e&&Ke("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const t=IT();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Zc(),this.ta(t)}enterRestrictedMode(t){if(!this.jc){this.jc=!0,this.Jc=t||!1;const e=IT();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Xc)}}enqueue(t){if(this.Zc(),this.jc)return new Promise(()=>{});const e=new _r;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Qc.push(t),this.ea()))}ea(){var t=this;return(0,Ee.Z)(function*(){if(0!==t.Qc.length){try{yield t.Qc[0](),t.Qc.shift(),t.qo.reset()}catch(e){if(!nu(e))throw e;Ke("AsyncQueue","Operation failed with retryable error: "+e)}t.Qc.length>0&&t.qo.No(()=>t.ea())}})()}ta(t){const e=this.Gc.then(()=>(this.Hc=!0,t().catch(i=>{throw this.Wc=i,this.Hc=!1,Oi("INTERNAL UNHANDLED ERROR: ",function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),c}(i)),i}).then(i=>(this.Hc=!1,i))));return this.Gc=e,e}enqueueAfterDelay(t,e,i){this.Zc(),this.Yc.indexOf(t)>-1&&(e=0);const r=sb.createAndSchedule(this,t,e,i,s=>this.na(s));return this.zc.push(r),r}Zc(){this.Wc&&Dt()}verifyOperationInProgress(){}sa(){var t=this;return(0,Ee.Z)(function*(){let e;do{e=t.Gc,yield e}while(e!==t.Gc)})()}ia(t){for(const e of this.zc)if(e.timerId===t)return!0;return!1}ra(t){return this.sa().then(()=>{this.zc.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.zc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.sa()})}oa(t){this.Yc.push(t)}na(t){const e=this.zc.indexOf(t);this.zc.splice(e,1)}}function w(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const i=t;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class E{constructor(){this._progressObserver={},this._taskCompletionResolver=new _r,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class N extends bb{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new _,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||oe(this),this._firestoreClient.terminate()}}function K(n){return n._firestoreClient||oe(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function oe(n){var t,e,i;const r=n._freezeSettings(),s=(d=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new Uk(n._databaseId,d,n._persistenceKey,(m=r).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,KN(m.experimentalLongPollingOptions),m.useFetchStreams));var d,m;n._firestoreClient=new MV(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(e=r.cache)&&void 0!==e&&e._offlineComponentProvider&&null!==(i=r.cache)&&void 0!==i&&i._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}function mt(n,t,e){const i=new _r;return n.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield gb(n,e),yield rI(n,t),i.resolve()}catch(r){const s=r;if(!oI(s))throw s;Qo("Error enabling indexeddb cache. Falling back to memory cache: "+s),i.reject(s)}})).then(()=>i.promise)}function Ff(n){if(n._initialized||n._terminated)throw new Ge(be.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class lc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new lc(jr.fromBase64String(t))}catch(e){throw new Ge(be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new lc(jr.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Bf{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Ge(be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ki(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class xv{constructor(t){this._methodName=t}}class XN{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ge(be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ge(be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return on(this._lat,t._lat)||on(this._long,t._long)}}const Xz=/^__.*__$/;class eW{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return null!==this.fieldMask?new uu(t,this.data,this.fieldMask,e,this.fieldTransforms):new sv(t,this.data,e,this.fieldTransforms)}}class kV{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new uu(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function PV(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Dt()}}class ex{constructor(t,e,i,r,s,c){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(t){return new ex(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.aa({path:i,la:!1});return r.fa(t),r}da(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.aa({path:i,la:!1});return r.ua(),r}wa(t){return this.aa({path:void 0,la:!0})}_a(t){return ix(t,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}ua(){if(this.path)for(let t=0;t<this.path.length;t++)this.fa(this.path.get(t))}fa(t){if(0===t.length)throw this._a("Document fields must not be empty");if(PV(this.ca)&&Xz.test(t))throw this._a('Document fields cannot begin and end with "__"')}}class tW{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||jg(t)}ya(t,e,i,r=!1){return new ex({ca:t,methodName:e,ga:i,path:ki.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rv(n){const t=n._freezeSettings(),e=jg(n._databaseId);return new tW(n._databaseId,!!t.ignoreUndefinedProperties,e)}function tx(n,t,e,i,r,s={}){const c=n.ya(s.merge||s.mergeFields?2:0,t,e,r);QP("Data must be an object, but it was:",c,i);const d=BV(i,c);let p,m;if(s.merge)p=new ir(c.fieldMask),m=c.fieldTransforms;else if(s.mergeFields){const y=[];for(const T of s.mergeFields){const A=hI(t,T,e);if(!c.contains(A))throw new Ge(be.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);UV(y,A)||y.push(A)}p=new ir(y),m=c.fieldTransforms.filter(T=>p.covers(T.field))}else p=null,m=c.fieldTransforms;return new eW(new Rs(d),p,m)}class dI extends xv{_toFieldTransform(t){if(2!==t.ca)throw t._a(1===t.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof dI}}function FV(n,t,e){return new ex({ca:3,ga:t.settings.ga,methodName:n._methodName,la:e},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class YP extends xv{_toFieldTransform(t){return new vw(t.path,new bf)}isEqual(t){return t instanceof YP}}class nW extends xv{constructor(t,e){super(t),this.pa=e}_toFieldTransform(t){const e=FV(this,t,!0),i=this.pa.map(s=>Ov(s,e)),r=new Df(i);return new vw(t.path,r)}isEqual(t){return this===t}}class iW extends xv{constructor(t,e){super(t),this.pa=e}_toFieldTransform(t){const e=FV(this,t,!0),i=this.pa.map(s=>Ov(s,e)),r=new Ef(i);return new vw(t.path,r)}isEqual(t){return this===t}}class rW extends xv{constructor(t,e){super(t),this.Ia=e}_toFieldTransform(t){const e=new nv(t.serializer,vM(t.serializer,this.Ia));return new vw(t.path,e)}isEqual(t){return this===t}}function ZP(n,t,e,i){const r=n.ya(1,t,e);QP("Data must be an object, but it was:",r,i);const s=[],c=Rs.empty();Id(i,(p,m)=>{const y=nx(t,p,e);m=(0,L.m9)(m);const T=r.da(y);if(m instanceof dI)s.push(y);else{const A=Ov(m,T);null!=A&&(s.push(y),c.set(y,A))}});const d=new ir(s);return new kV(c,d,r.fieldTransforms)}function KP(n,t,e,i,r,s){const c=n.ya(1,t,e),d=[hI(t,i,e)],p=[r];if(s.length%2!=0)throw new Ge(be.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<s.length;A+=2)d.push(hI(t,s[A])),p.push(s[A+1]);const m=[],y=Rs.empty();for(let A=d.length-1;A>=0;--A)if(!UV(m,d[A])){const x=d[A];let P=p[A];P=(0,L.m9)(P);const V=c.da(x);if(P instanceof dI)m.push(x);else{const G=Ov(P,V);null!=G&&(m.push(x),y.set(x,G))}}const T=new ir(m);return new kV(y,T,c.fieldTransforms)}function LV(n,t,e,i=!1){return Ov(e,n.ya(i?4:3,t))}function Ov(n,t){if(VV(n=(0,L.m9)(n)))return QP("Unsupported field value:",t,n),BV(n,t);if(n instanceof xv)return function(e,i){if(!PV(i.ca))throw i._a(`${e._methodName}() can only be used with update() and set()`);if(!i.path)throw i._a(`${e._methodName}() is not currently supported inside arrays`);const r=e._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,i){const r=[];let s=0;for(const c of e){let d=Ov(c,i.wa(s));null==d&&(d={nullValue:"NULL_VALUE"}),r.push(d),s++}return{arrayValue:{values:r}}}(n,t)}return function(e,i){if(null===(e=(0,L.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return vM(i.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const r=Wi.fromDate(e);return{timestampValue:xg(i.serializer,r)}}if(e instanceof Wi){const r=new Wi(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:xg(i.serializer,r)}}if(e instanceof XN)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof lc)return{bytesValue:kM(i.serializer,e._byteString)};if(e instanceof Li){const r=i.databaseId,s=e.firestore._databaseId;if(!s.isEqual(r))throw i._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Aw(e.firestore._databaseId||i.databaseId,e._key.path)}}throw i._a(`Unsupported field value: ${uI(e)}`)}(n,t)}function BV(n,t){const e={};return uC(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Id(n,(i,r)=>{const s=Ov(r,t.ha(i));null!=s&&(e[i]=s)}),{mapValue:{fields:e}}}function VV(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Wi||n instanceof XN||n instanceof lc||n instanceof Li||n instanceof xv)}function QP(n,t,e){if(!VV(e)||"object"!=typeof(i=e)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=uI(e);throw t._a("an object"===i?n+" a custom object":n+" "+i)}var i}function hI(n,t,e){if((t=(0,L.m9)(t))instanceof Bf)return t._internalPath;if("string"==typeof t)return nx(n,t);throw ix("Field path arguments must be of type string or ",n,!1,void 0,e)}const sW=new RegExp("[~\\*/\\[\\]]");function nx(n,t,e){if(t.search(sW)>=0)throw ix(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new Bf(...t.split("."))._internalPath}catch{throw ix(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function ix(n,t,e,i,r){const s=i&&!i.isEmpty(),c=void 0!==r;let d=`Function ${t}() called with invalid data`;e&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(s||c)&&(p+=" (found",s&&(p+=` in field ${i}`),c&&(p+=` in document ${r}`),p+=")"),new Ge(be.INVALID_ARGUMENT,d+n+p)}function UV(n,t){return n.some(e=>e.isEqual(t))}class fI{constructor(t,e,i,r,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Li(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new oW(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(rx("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class oW extends fI{data(){return super.data()}}function rx(n,t){return"string"==typeof t?nx(n,t):t instanceof Bf?t._internalPath:t._delegate._internalPath}function HV(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ge(be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class JP{}class pI extends JP{}function em(n,t,...e){let i=[];t instanceof JP&&i.push(t),i=i.concat(e),function(r){const s=r.filter(d=>d instanceof Db).length,c=r.filter(d=>d instanceof gI).length;if(s>1||s>0&&c>0)throw new Ge(be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class gI extends pI{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new gI(t,e,i)}_apply(t){const e=this._parse(t);return zV(t._query,e),new ks(t.firestore,t.converter,Tg(t._query,e))}_parse(t){const e=Rv(t.firestore);return function(r,s,c,d,p,m,y){let T;if(p.isKeyField()){if("array-contains"===m||"array-contains-any"===m)throw new Ge(be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if("in"===m||"not-in"===m){$V(y,m);const A=[];for(const x of y)A.push(GV(d,r,x));T={arrayValue:{values:A}}}else T=GV(d,r,y)}else"in"!==m&&"not-in"!==m&&"array-contains-any"!==m||$V(y,m),T=LV(c,"where",y,"in"===m||"not-in"===m);return On.create(p,m,T)}(t._query,0,e,t.firestore._databaseId,this._field,this._op,this._value)}}class Db extends JP{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new Db(t,e)}_parse(t){const e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return 1===e.length?e[0]:ai.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(i,r){let s=i;const c=r.getFlattenedFilters();for(const d of c)zV(s,d),s=Tg(s,d)}(t._query,e),new ks(t.firestore,t.converter,Tg(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class XP extends pI{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new XP(t,e)}_apply(t){const e=function(i,r,s){if(null!==i.startAt)throw new Ge(be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Ge(be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Eg(r,s);return function(d,p){if(null===IC(d)){const m=pw(d);null!==m&&WV(0,m,p.field)}}(i,c),c}(t._query,this._field,this._direction);return new ks(t.firestore,t.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new ic(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,e))}}class sx extends pI{constructor(t,e,i){super(),this.type=t,this._limit=e,this._limitType=i}static _create(t,e,i){return new sx(t,e,i)}_apply(t){return new ks(t.firestore,t.converter,wf(t._query,this._limit,this._limitType))}}class ox extends pI{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new ox(t,e,i)}_apply(t){const e=jV(t,this.type,this._docOrFields,this._inclusive);return new ks(t.firestore,t.converter,(r=e,new ic((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class ax extends pI{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new ax(t,e,i)}_apply(t){const e=jV(t,this.type,this._docOrFields,this._inclusive);return new ks(t.firestore,t.converter,(r=e,new ic((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function jV(n,t,e,i){if(e[0]=(0,L.m9)(e[0]),e[0]instanceof fI)return function(r,s,c,d,p){if(!d)throw new Ge(be.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const m=[];for(const y of Ca(r))if(y.field.isKeyField())m.push(_f(s,d.key));else{const T=d.data.field(y.field);if(lw(T))throw new Ge(be.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+y.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===T){const A=y.field.canonicalString();throw new Ge(be.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${A}' (used as the orderBy) does not exist.`)}m.push(T)}return new Rd(m,p)}(n._query,n.firestore._databaseId,t,e[0]._document,i);{const r=Rv(n.firestore);return function(s,c,d,p,m,y){const T=s.explicitOrderBy;if(m.length>T.length)throw new Ge(be.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const A=[];for(let x=0;x<m.length;x++){const P=m[x];if(T[x].field.isKeyField()){if("string"!=typeof P)throw new Ge(be.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof P}`);if(!SC(s)&&-1!==P.indexOf("/"))throw new Ge(be.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${P}' contains a slash.`);const V=s.path.child(Rn.fromString(P));if(!ft.isDocumentKey(V))throw new Ge(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${V}' is not because it contains an odd number of segments.`);const G=new ft(V);A.push(_f(c,G))}else{const V=LV(d,p,P);A.push(V)}}return new Rd(A,y)}(n._query,n.firestore._databaseId,r,t,e,i)}}function GV(n,t,e){if("string"==typeof(e=(0,L.m9)(e))){if(""===e)throw new Ge(be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!SC(t)&&-1!==e.indexOf("/"))throw new Ge(be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(Rn.fromString(e));if(!ft.isDocumentKey(i))throw new Ge(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return _f(n,new ft(i))}if(e instanceof Li)return _f(n,e._key);throw new Ge(be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${uI(e)}.`)}function $V(n,t){if(!Array.isArray(n)||0===n.length)throw new Ge(be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function zV(n,t){if(t.isInequality()){const i=pw(n),r=t.field;if(null!==i&&!i.isEqual(r))throw new Ge(be.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${r.toString()}'`);const s=IC(n);null!==s&&WV(0,r,s)}const e=function(i,r){for(const s of i)for(const c of s.getFlattenedFilters())if(r.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==e)throw new Ge(be.INVALID_ARGUMENT,e===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}function WV(n,t,e){if(!e.isEqual(t))throw new Ge(be.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}class eF{convertValue(t,e="none"){switch(au(t)){case 0:return null;case 1:return t.booleanValue;case 2:return vr(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(ru(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Dt()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return Id(t,(r,s)=>{i[r]=this.convertValue(s,e)}),i}convertGeoPoint(t){return new XN(vr(t.latitude),vr(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=bg(t);return null==i?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(su(t));default:return null}}convertTimestamp(t){const e=Sd(t);return new Wi(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=Rn.fromString(t);Lt(YC(i));const r=new ou(i.get(1),i.get(3)),s=new ft(i.popFirst(5));return r.isEqual(e)||Oi(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}function lx(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class gW extends eF{constructor(t){super(),this.firestore=t}convertBytes(t){return new lc(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Li(this.firestore,null,e)}}class kv{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Vf extends fI{constructor(t,e,i,r,s,c){super(t,e,i,r,c),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new mI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(rx("DocumentSnapshot.get",t));if(null!==i)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class mI extends Vf{data(t={}){return super.data(t)}}class tm{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new kv(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new mI(this._firestore,this._userDataWriter,i.key,i,new kv(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ge(be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>({type:"added",doc:new mI(i._firestore,i._userDataWriter,c.doc.key,c.doc,new kv(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>r||3!==c.type).map(c=>{const d=new mI(i._firestore,i._userDataWriter,c.doc.key,c.doc,new kv(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,m=-1;return 0!==c.type&&(p=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),1!==c.type&&(s=s.add(c.doc),m=s.indexOf(c.doc.key)),{type:_W(c.type),doc:d,oldIndex:p,newIndex:m}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function _W(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Dt()}}function YV(n,t){return n instanceof Vf&&t instanceof Vf?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof tm&&t instanceof tm&&n._firestore===t._firestore&&f(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}class nm extends eF{constructor(t){super(),this.firestore=t}convertBytes(t){return new lc(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Li(this.firestore,null,e)}}function ZV(n,t,e){n=Pn(n,Li);const i=Pn(n.firestore,N),r=lx(n.converter,t,e);return Eb(i,[tx(Rv(i),"setDoc",n._key,r,null!==n.converter,e).toMutation(n._key,qi.none())])}function KV(n,t,e,...i){n=Pn(n,Li);const r=Pn(n.firestore,N),s=Rv(r);let c;return c="string"==typeof(t=(0,L.m9)(t))||t instanceof Bf?KP(s,"updateDoc",n._key,t,e,i):ZP(s,"updateDoc",n._key,t),Eb(r,[c.toMutation(n._key,qi.exists(!0))])}function QV(n,...t){var e,i,r;n=(0,L.m9)(n);let s={includeMetadataChanges:!1},c=0;"object"!=typeof t[c]||w(t[c])||(s=t[c],c++);const d={includeMetadataChanges:s.includeMetadataChanges};if(w(t[c])){const T=t[c];t[c]=null===(e=T.next)||void 0===e?void 0:e.bind(T),t[c+1]=null===(i=T.error)||void 0===i?void 0:i.bind(T),t[c+2]=null===(r=T.complete)||void 0===r?void 0:r.bind(T)}let p,m,y;if(n instanceof Li)m=Pn(n.firestore,N),y=X_(n._key.path),p={next:T=>{t[c]&&t[c](tF(m,n,T))},error:t[c+1],complete:t[c+2]};else{const T=Pn(n,ks);m=Pn(T.firestore,N),y=T._query;const A=new nm(m);p={next:x=>{t[c]&&t[c](new tm(m,A,T,x))},error:t[c+1],complete:t[c+2]},HV(n._query)}return function(T,A,x,P){const V=new Qg(P),G=new HT(A,V,x);return T.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return ob(yield Jg(T),G)})),()=>{V.Dc(),T.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return Cv(yield Jg(T),G)}))}}(K(m),y,d,p)}function Eb(n,t){return function(e,i){const r=new _r;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function FN(n,t,e){return cb.apply(this,arguments)}(yield wb(e),i,r)})),r.promise}(K(n),t)}function tF(n,t,e){const i=e.docs.get(t._key),r=new nm(n);return new Vf(n,r,t._key,i,new kv(e.hasPendingWrites,e.fromCache),t.converter)}const PW={maxAttempts:5};class JV{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Rv(t)}set(t,e,i){this._verifyNotCommitted();const r=im(t,this._firestore),s=lx(r.converter,e,i),c=tx(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(c.toMutation(r._key,qi.none())),this}update(t,e,i,...r){this._verifyNotCommitted();const s=im(t,this._firestore);let c;return c="string"==typeof(e=(0,L.m9)(e))||e instanceof Bf?KP(this._dataReader,"WriteBatch.update",s._key,e,i,r):ZP(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(c.toMutation(s._key,qi.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=im(t,this._firestore);return this._mutations=this._mutations.concat(new oc(e._key,qi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ge(be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function im(n,t){if((n=(0,L.m9)(n)).firestore!==t)throw new Ge(be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class FW extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Rv(t)}get(t){const e=im(t,this._firestore),i=new gW(this._firestore);return this._transaction.lookup([e._key]).then(r=>{if(!r||1!==r.length)return Dt();const s=r[0];if(s.isFoundDocument())return new fI(this._firestore,i,s.key,s,e.converter);if(s.isNoDocument())return new fI(this._firestore,i,e._key,null,e.converter);throw Dt()})}set(t,e,i){const r=im(t,this._firestore),s=lx(r.converter,e,i),c=tx(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,i);return this._transaction.set(r._key,c),this}update(t,e,i,...r){const s=im(t,this._firestore);let c;return c="string"==typeof(e=(0,L.m9)(e))||e instanceof Bf?KP(this._dataReader,"Transaction.update",s._key,e,i,r):ZP(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,c),this}delete(t){const e=im(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=im(t,this._firestore),i=new nm(this._firestore);return super.get(t).then(r=>new Vf(this._firestore,i,e._key,r._document,new kv(!1,!1),e.converter))}}function nF(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Ge("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function eU(){if(typeof Uint8Array>"u")throw new Ge("unimplemented","Uint8Arrays are not available in this environment.")}function tU(){if(!function al(){return typeof atob<"u"}())throw new Ge("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,t=!0){Ed=gd.SDK_VERSION,(0,gd._registerComponent)(new mr.wA("firestore",(e,{instanceIdentifier:i,options:r})=>{const s=e.getProvider("app").getImmediate(),c=new N(new Sk(e.getProvider("auth-internal")),new Mk(e.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ge(be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ou(d.options.projectId,p)}(s,i),s);return r=Object.assign({useFetchStreams:t},r),c._setSettings(r),c},"PUBLIC").setMultipleInstances(!0)),(0,gd.registerVersion)(UA,"3.13.0",n),(0,gd.registerVersion)(UA,"3.13.0","esm2017")}();class _I{constructor(t){this._delegate=t}static fromBase64String(t){return tU(),new _I(lc.fromBase64String(t))}static fromUint8Array(t){return eU(),new _I(lc.fromUint8Array(t))}toBase64(){return tU(),this._delegate.toBase64()}toUint8Array(){return eU(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function iF(n){return function zW(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const i of t)if(i in e&&"function"==typeof e[i])return!0;return!1}(n,["next","error","complete"])}class WW{enableIndexedDbPersistence(t,e){return function Re(n,t){Ff(n=Pn(n,N));const e=K(n);if(e._uninitializedComponentsProvider)throw new Ge(be.FAILED_PRECONDITION,"SDK cache is already specified.");Qo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=n._freezeSettings(),r=new Mv;return mt(e,r,new fb(r,i.cacheSizeBytes,t?.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function Qe(n){Ff(n=Pn(n,N));const t=K(n);if(t._uninitializedComponentsProvider)throw new Ge(be.FAILED_PRECONDITION,"SDK cache is already specified.");Qo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings(),i=new Mv;return mt(t,i,new pb(i,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function Ut(n){if(n._initialized&&!n._terminated)throw new Ge(be.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new _r;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(e=(0,Ee.Z)(function*(i){if(!Da.D())return Promise.resolve();const r=i+"main";yield Da.delete(r)}),function(i){return e.apply(this,arguments)})(Mf(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class nU{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof ou||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&Qo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,i={}){!function WP(n,t,e,i={}){var r;const s=(n=Pn(n,bb))._getSettings(),c=`${t}:${e}`;if("firestore.googleapis.com"!==s.host&&s.host!==c&&Qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:c,ssl:!1})),i.mockUserToken){let d,p;if("string"==typeof i.mockUserToken)d=i.mockUserToken,p=vs.MOCK_USER;else{d=(0,L.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new Ge(be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new vs(m)}n._authCredentials=new Ik(new q_(d,p))}}(this._delegate,t,e,i)}enableNetwork(){return function an(n){return function BP(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const t=yield LP(n),e=yield yb(n);return t.setNetworkEnabled(!0),function(i){const r=yt(i);return r.vu.delete(0),Gg(r)}(e)}))}(K(n=Pn(n,N)))}(this._delegate)}disableNetwork(){return function wn(n){return function VP(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const t=yield LP(n),e=yield yb(n);return t.setNetworkEnabled(!1),(i=(0,Ee.Z)(function*(r){const s=yt(r);s.vu.add(0),yield xf(s),s.bu.set("Offline")}),function(r){return i.apply(this,arguments)})(e);var i}))}(K(n=Pn(n,N)))}(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,HP("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function qe(n){return function(t){const e=new _r;return t.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function HN(n,t){return YT.apply(this,arguments)}(yield wb(t),e)})),e.promise}(K(n=Pn(n,N)))}(this._delegate)}onSnapshotsInSync(t){return function IW(n,t){return function xV(n,t){const e=new Qg(t);return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return i=yield Jg(n),r=e,yt(i).ku.add(r),void r.next();var i,r})),()=>{e.Dc(),n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return i=yield Jg(n),r=e,void yt(i).ku.delete(r);var i,r}))}}(K(n=Pn(n,N)),w(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Ge("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new Cb(this,o(this._delegate,t))}catch(e){throw ea(e,"collection()","Firestore.collection()")}}doc(t){try{return new cc(this,u(this._delegate,t))}catch(e){throw ea(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new ta(this,function a(n,t){if(n=Pn(n,bb),JN("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ge(be.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ks(n,null,(e=t,new ic(Rn.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw ea(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function LW(n,t,e){n=Pn(n,N);const i=Object.assign(Object.assign({},PW),e);return function(r){if(r.maxAttempts<1)throw new Ge(be.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,s,c){const d=new _r;return r.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const p=yield function lI(n){return Nv(n).then(t=>t.datastore)}(r);new AV(r.asyncQueue,p,c,s,d).run()})),d.promise}(K(n),r=>t(new FW(n,r)),i)}(this._delegate,e=>t(new iU(this,e)))}batch(){return K(this._delegate),new rU(new JV(this._delegate,t=>Eb(this._delegate,t)))}loadBundle(t){return function Po(n,t){const e=K(n=Pn(n,N)),i=new E;return function UP(n,t,e,i){const r=function(s,c){let d;return d="string"==typeof s?SM().encode(s):s,p=function(p,m){if(p instanceof Uint8Array)return nI(p,m);if(p instanceof ArrayBuffer)return nI(new Uint8Array(p),m);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new PP(p,c);var p}(e,jg(t));n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function qN(n,t,e){const i=yt(n);var r;(r=(0,Ee.Z)(function*(s,c,d){try{const p=yield c.getMetadata();if(yield function(A,x){const P=yt(A),V=rr(x.createTime);return P.persistence.runTransaction("hasNewerBundle","readonly",G=>P.qs.getBundleMetadata(G,x.id)).then(G=>!!G&&G.createTime.compareTo(V)>=0)}(s.localStore,p))return yield c.close(),d._completeWith({taskState:"Success",documentsLoaded:(A=p).totalDocuments,bytesLoaded:A.totalBytes,totalDocuments:A.totalDocuments,totalBytes:A.totalBytes}),Promise.resolve(new Set);d._updateProgress(CP(p));const m=new RN(p,s.localStore,c.serializer);let y=yield c.bc();for(;y;){const A=yield m.zu(y);A&&d._updateProgress(A),y=yield c.bc()}const T=yield m.complete();return yield hu(s,T.Ju,void 0),yield function(A,x){const P=yt(A);return P.persistence.runTransaction("Save bundle","readwrite",V=>P.qs.saveBundleMetadata(V,x))}(s.localStore,p),d._completeWith(T.progress),Promise.resolve(T.Hu)}catch(p){return Qo("SyncEngine",`Loading bundle failed with ${p}`),d._failWith(p),Promise.resolve(new Set)}var A}),function(s,c,d){return r.apply(this,arguments)})(i,t,e).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield wb(n),r,i)}))}(e,n._databaseId,t,i),i}(this._delegate,t)}namedQuery(t){return function pu(n,t){return function RV(n,t){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(e,i){const r=yt(e);return r.persistence.runTransaction("Get named query","readonly",s=>r.qs.getNamedQuery(s,i))}(yield vb(n),t)}))}(K(n=Pn(n,N)),t).then(e=>e?new ks(n,null,e.query):null)}(this._delegate,t).then(e=>e?new ta(this,e):null)}}class cx extends eF{constructor(t){super(),this.firestore=t}convertBytes(t){return new _I(new lc(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return cc.forKey(e,this.firestore,null)}}class iU{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new cx(t)}get(t){const e=Fv(t);return this._delegate.get(e).then(i=>new vI(this._firestore,new Vf(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const r=Fv(t);return i?(nF("Transaction.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=Fv(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=Fv(t);return this._delegate.delete(e),this}}class rU{constructor(t){this._delegate=t}set(t,e,i){const r=Fv(t);return i?(nF("WriteBatch.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=Fv(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=Fv(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class Pv{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new mI(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new yI(this._firestore,i),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=Pv.INSTANCES;let r=i.get(t);r||(r=new WeakMap,i.set(t,r));let s=r.get(e);return s||(s=new Pv(t,new cx(t),e),r.set(e,s)),s}}Pv.INSTANCES=new WeakMap;class cc{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new cx(t)}static forPath(t,e,i){if(t.length%2!=0)throw new Ge("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new cc(e,new Li(e._delegate,i,new ft(t)))}static forKey(t,e,i){return new cc(e,new Li(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new Cb(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new Cb(this.firestore,o(this._delegate,t))}catch(e){throw ea(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,L.m9)(t))instanceof Li&&h(this._delegate,t)}set(t,e){e=nF("DocumentReference.set",e);try{return e?ZV(this._delegate,t,e):ZV(this._delegate,t)}catch(i){throw ea(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return 1===arguments.length?KV(this._delegate,t):KV(this._delegate,t,e,...i)}catch(r){throw ea(r,"updateDoc()","DocumentReference.update()")}}delete(){return function CW(n){return Eb(Pn(n.firestore,N),[new oc(n._key,qi.none())])}(this._delegate)}onSnapshot(...t){const e=sU(t),i=oU(t,r=>new vI(this.firestore,new Vf(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return QV(this._delegate,e,i)}get(t){let e;return e="cache"===t?.source?function yW(n){n=Pn(n,Li);const t=Pn(n.firestore,N),e=K(t),i=new nm(t);return function YN(n,t){const e=new _r;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(i=(0,Ee.Z)(function*(r,s,c){try{const d=yield function(p,m){const y=yt(p);return y.persistence.runTransaction("read document","readonly",T=>y.localDocuments.getDocument(T,m))}(r,s);d.isFoundDocument()?c.resolve(d):d.isNoDocument()?c.resolve(null):c.reject(new Ge(be.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const p=kf(d,`Failed to get document '${s} from cache`);c.reject(p)}}),function(r,s,c){return i.apply(this,arguments)})(yield vb(n),t,e);var i})),e.promise}(e,n._key).then(r=>new Vf(t,i,n._key,r,new kv(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===t?.source?function wW(n){n=Pn(n,Li);const t=Pn(n.firestore,N);return cI(K(t),n._key,{source:"server"}).then(e=>tF(t,n,e))}(this._delegate):function vW(n){n=Pn(n,Li);const t=Pn(n.firestore,N);return cI(K(t),n._key).then(e=>tF(t,n,e))}(this._delegate),e.then(i=>new vI(this.firestore,new Vf(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new cc(this.firestore,this._delegate.withConverter(t?Pv.getInstance(this.firestore,t):null))}}function ea(n,t,e){return n.message=n.message.replace(t,e),n}function sU(n){for(const t of n)if("object"==typeof t&&!iF(t))return t;return{}}function oU(n,t){var e,i;let r;return r=iF(n[0])?n[0]:iF(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(t(s))},error:null===(e=r.error)||void 0===e?void 0:e.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class vI{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new cc(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return YV(this._delegate,t._delegate)}}class yI extends vI{data(t){const e=this._delegate.data(t);return function Tk(n,t){n||Dt()}(void 0!==e),e}}class ta{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new cx(t)}where(t,e,i){try{return new ta(this.firestore,em(this._delegate,function aW(n,t,e){const i=t,r=rx("where",n);return gI._create(r,i,e)}(t,e,i)))}catch(r){throw ea(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new ta(this.firestore,em(this._delegate,function lW(n,t="asc"){const e=t,i=rx("orderBy",n);return XP._create(i,e)}(t,e)))}catch(i){throw ea(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new ta(this.firestore,em(this._delegate,function cW(n){return $P("limit",n),sx._create("limit",n,"F")}(t)))}catch(e){throw ea(e,"limit()","Query.limit()")}}limitToLast(t){try{return new ta(this.firestore,em(this._delegate,function uW(n){return $P("limitToLast",n),sx._create("limitToLast",n,"L")}(t)))}catch(e){throw ea(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new ta(this.firestore,em(this._delegate,function dW(...n){return ox._create("startAt",n,!0)}(...t)))}catch(e){throw ea(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new ta(this.firestore,em(this._delegate,function hW(...n){return ox._create("startAfter",n,!1)}(...t)))}catch(e){throw ea(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new ta(this.firestore,em(this._delegate,function fW(...n){return ax._create("endBefore",n,!1)}(...t)))}catch(e){throw ea(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new ta(this.firestore,em(this._delegate,function pW(...n){return ax._create("endAt",n,!0)}(...t)))}catch(e){throw ea(e,"endAt()","Query.endAt()")}}isEqual(t){return f(this._delegate,t._delegate)}get(t){let e;return e="cache"===t?.source?function DW(n){n=Pn(n,ks);const t=Pn(n.firestore,N),e=K(t),i=new nm(t);return function NV(n,t){const e=new _r;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(i=(0,Ee.Z)(function*(r,s,c){try{const d=yield Yw(r,s,!0),p=new GT(s,d.ir),m=p.sc(d.documents),y=p.applyChanges(m,!1);c.resolve(y.snapshot)}catch(d){const p=kf(d,`Failed to execute query '${s} against cache`);c.reject(p)}}),function(r,s,c){return i.apply(this,arguments)})(yield vb(n),t,e);var i})),e.promise}(e,n._query).then(r=>new tm(t,i,n,r))}(this._delegate):"server"===t?.source?function EW(n){n=Pn(n,ks);const t=Pn(n.firestore,N),e=K(t),i=new nm(t);return ZN(e,n._query,{source:"server"}).then(r=>new tm(t,i,n,r))}(this._delegate):function bW(n){n=Pn(n,ks);const t=Pn(n.firestore,N),e=K(t),i=new nm(t);return HV(n._query),ZN(e,n._query).then(r=>new tm(t,i,n,r))}(this._delegate),e.then(i=>new rF(this.firestore,new tm(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=sU(t),i=oU(t,r=>new rF(this.firestore,new tm(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return QV(this._delegate,e,i)}withConverter(t){return new ta(this.firestore,this._delegate.withConverter(t?Pv.getInstance(this.firestore,t):null))}}class YW{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new yI(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class rF{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new ta(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new yI(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new YW(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new yI(this._firestore,i))})}isEqual(t){return YV(this._delegate,t._delegate)}}class Cb extends ta{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new cc(this.firestore,t):null}doc(t){try{return new cc(this.firestore,void 0===t?u(this._delegate):u(this._delegate,t))}catch(e){throw ea(e,"doc()","CollectionReference.doc()")}}add(t){return function TW(n,t){const e=Pn(n.firestore,N),i=u(n),r=lx(n.converter,t);return Eb(e,[tx(Rv(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,qi.exists(!1))]).then(()=>i)}(this._delegate,t).then(e=>new cc(this.firestore,e))}isEqual(t){return h(this._delegate,t._delegate)}withConverter(t){return new Cb(this.firestore,this._delegate.withConverter(t?Pv.getInstance(this.firestore,t):null))}}function Fv(n){return Pn(n,Li)}class sF{constructor(...t){this._delegate=new Bf(...t)}static documentId(){return new sF(ki.keyField().canonicalString())}isEqual(t){return(t=(0,L.m9)(t))instanceof Bf&&this._delegate._internalPath.isEqual(t._internalPath)}}class Lv{constructor(t){this._delegate=t}static serverTimestamp(){const t=function VW(){return new YP("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new Lv(t)}static delete(){const t=function BW(){return new dI("deleteField")}();return t._methodName="FieldValue.delete",new Lv(t)}static arrayUnion(...t){const e=function UW(...n){return new nW("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new Lv(e)}static arrayRemove(...t){const e=function HW(...n){return new iW("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new Lv(e)}static increment(t){const e=function jW(n){return new rW("increment",n)}(t);return e._methodName="FieldValue.increment",new Lv(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const ZW={Firestore:nU,GeoPoint:XN,Timestamp:Wi,Blob:_I,Transaction:iU,WriteBatch:rU,DocumentReference:cc,DocumentSnapshot:vI,Query:ta,QueryDocumentSnapshot:yI,QuerySnapshot:rF,CollectionReference:Cb,FieldPath:sF,FieldValue:Lv,setLogLevel:function qW(n){!function ew(n){ba.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function aU(n,t){return function JW(n,t=Mr.z){return new Ti.y(e=>{let i;return null!=t?t.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},e)}):i=n.onSnapshot({includeMetadataChanges:!0},e),()=>{i?.()}})}(n,t)}function oF(n,t){return aU(n,t).pipe((0,at.U)(e=>({payload:e,type:"query"})))}function ux(n,t){return oF(n,t).pipe(Kl(void 0),__(),(0,at.U)(([e,i])=>{const r=i.payload.docChanges(),s=r.map(c=>({type:c.type,payload:c}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((c,d)=>{const p=r.find(y=>y.doc.ref.isEqual(c.ref)),m=e?.payload.docs.find(y=>y.ref.isEqual(c.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(c.metadata)||!p&&m&&JSON.stringify(m.metadata)===JSON.stringify(c.metadata)||s.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:c}})}),s}))}function lU(n,t,e){return ux(n,e).pipe(Ql((i,r)=>function e4(n,t,e){return t.forEach(i=>{e.indexOf(i.type)>-1&&(n=function t4(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return aF(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return aF(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return aF(n,t.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),t),[]),(0,D0.x)(),(0,at.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function aF(n,t,e,...i){const r=n.slice();return r.splice(t,e,...i),r}function cU(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function QW(n){(function KW(n,t){n.INTERNAL.registerComponent(new mr.wA("firestore-compat",e=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(i,r)},"PUBLIC").setServiceProps(Object.assign({},ZW)))})(n,(t,e)=>new nU(t,e,new WW)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(B1.Z);class uU{constructor(t,e,i){this.ref=t,this.query=e,this.afs=i}stateChanges(t){let e=ux(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,at.U)(i=>i.filter(r=>t.indexOf(r.type)>-1)))),e.pipe(Kl(void 0),__(),fn(([i,r])=>r.length>0||!i),(0,at.U)(([i,r])=>r),dn.iC)}auditTrail(t){return this.stateChanges(t).pipe(Ql((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=cU(t);return lU(this.query,e,this.afs.schedulers.outsideAngular).pipe(dn.iC)}valueChanges(t={}){return oF(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(e=>e.payload.docs.map(i=>t.idField?Object.assign(Object.assign({},i.data()),{[t.idField]:i.id}):i.data())),dn.iC)}get(t){return(0,Hn.D)(this.query.get(t)).pipe(dn.iC)}add(t){return this.ref.add(t)}doc(t){return new dU(this.ref.doc(t),this.afs)}}class dU{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const i=this.ref.collection(t),{ref:r,query:s}=pU(i,e);return new uU(r,s,this.afs)}snapshotChanges(){return function XW(n,t){return aU(n,t).pipe(Kl(void 0),__(),(0,at.U)(([e,i])=>i.exists?e?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(dn.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,at.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,Hn.D)(this.ref.get(t)).pipe(dn.iC)}}class n4{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?ux(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(e=>e.filter(i=>t.indexOf(i.type)>-1)),fn(e=>e.length>0),dn.iC):ux(this.query,this.afs.schedulers.outsideAngular).pipe(dn.iC)}auditTrail(t){return this.stateChanges(t).pipe(Ql((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=cU(t);return lU(this.query,e,this.afs.schedulers.outsideAngular).pipe(dn.iC)}valueChanges(t={}){return oF(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(i=>i.payload.docs.map(r=>t.idField?Object.assign({[t.idField]:r.id},r.data()):r.data())),dn.iC)}get(t){return(0,Hn.D)(this.query.get(t)).pipe(dn.iC)}}const hU=new l.OlP("angularfire2.enableFirestorePersistence"),fU=new l.OlP("angularfire2.firestore.persistenceSettings"),i4=new l.OlP("angularfire2.firestore.settings"),r4=new l.OlP("angularfire2.firestore.use-emulator");function pU(n,t=(e=>e)){return{query:t(n),ref:n}}let s4=(()=>{class n{constructor(e,i,r,s,c,d,p,m,y,T,A,x,P,V,G,te,se){this.schedulers=p;const le=(0,si.on)(e,d,i),de=y;T&&$h(le,d,A,P,V,G,x,te),[this.firestore,this.persistenceEnabled$]=(0,si.cc)(`${le.name}.firestore`,"AngularFirestore",le.name,()=>{const Oe=d.runOutsideAngular(()=>le.firestore());if(s&&Oe.settings(s),de&&Oe.useEmulator(...de),r&&!Uo(c)){const je=()=>{try{return(0,Hn.D)(Oe.enablePersistence(m||void 0).then(()=>!0,()=>!1))}catch(ct){return typeof console<"u"&&console.warn(ct),(0,Mt.of)(!1)}};return[Oe,d.runOutsideAngular(je)]}return[Oe,(0,Mt.of)(!1)]},[s,de,r])}collection(e,i){let r;r="string"==typeof e?this.firestore.collection(e):e;const{ref:s,query:c}=pU(r,i),d=this.schedulers.ngZone.run(()=>s);return new uU(d,c,this)}collectionGroup(e,i){const r=i||(c=>c),s=this.firestore.collectionGroup(e);return new n4(r(s),this)}doc(e){let i;i="string"==typeof e?this.firestore.doc(e):e;const r=this.schedulers.ngZone.run(()=>i);return new dU(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(si.Dh),l.LFG(si.xv,8),l.LFG(hU,8),l.LFG(i4,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(dn.HU),l.LFG(fU,8),l.LFG(r4,8),l.LFG(ld,8),l.LFG(ad,8),l.LFG(Gc,8),l.LFG(i_,8),l.LFG(va,8),l.LFG(Bp,8),l.LFG(Vp,8),l.LFG(Hh,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),o4=(()=>{class n{constructor(){jc.Z.registerVersion("angularfire",dn.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:hU,useValue:!0},{provide:fU,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[s4]}),n})();var Wd=F(4829),lF=F(2420);function dx(...n){const t=(0,Zc.jO)(n);return(0,$i.e)((e,i)=>{const r=n.length,s=new Array(r);let c=n.map(()=>!1),d=!1;for(let p=0;p<r;p++)(0,Wd.Xf)(n[p]).subscribe((0,_i.x)(i,m=>{s[p]=m,!d&&!c[p]&&(c[p]=!0,(d=c.every(Wo.y))&&(c=null))},lF.Z));e.subscribe((0,_i.x)(i,p=>{if(d){const m=[p,...s];i.next(t?t(...m):m)}}))})}const gU="@firebase/database";let cF="";function _U(n){cF=n}class l4{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,L.Wl)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,L.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class c4{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,L.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const vU=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new l4(t)}}catch{}return new c4},Bv=vU("localStorage"),uF=vU("sessionStorage"),Tb=new Hr.Yd("@firebase/database"),yU=function(){let n=1;return function(){return n++}}(),wU=function(n){const t=(0,L.dS)(n),e=new L.gQ;e.update(t);const i=e.digest();return L.US.encodeByteArray(i)},wI=function(...n){let t="";for(let e=0;e<n.length;e++){const i=n[e];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=wI.apply(null,i):t+="object"==typeof i?(0,L.Wl)(i):i,t+=" "}return t};let Vv=null,bU=!0;const DU=function(n,t){(0,L.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Tb.logLevel=Hr.in.VERBOSE,Vv=Tb.log.bind(Tb),t&&uF.set("logging_enabled",!0)):"function"==typeof n?Vv=n:(Vv=null,uF.remove("logging_enabled"))},qs=function(...n){if(!0===bU&&(bU=!1,null===Vv&&!0===uF.get("logging_enabled")&&DU(!0)),Vv){const t=wI.apply(null,n);Vv(t)}},bI=function(n){return function(...t){qs(n,...t)}},dF=function(...n){const t="FIREBASE INTERNAL ERROR: "+wI(...n);Tb.error(t)},qd=function(...n){const t=`FIREBASE FATAL ERROR: ${wI(...n)}`;throw Tb.error(t),new Error(t)},Fo=function(...n){const t="FIREBASE WARNING: "+wI(...n);Tb.warn(t)},hx=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},rm="[MIN_NAME]",Uf="[MAX_NAME]",Uv=function(n,t){if(n===t)return 0;if(n===rm||t===Uf)return-1;if(t===rm||n===Uf)return 1;{const e=TU(n),i=TU(t);return null!==e?null!==i?e-i==0?n.length-t.length:e-i:-1:null!==i?1:n<t?-1:1}},h4=function(n,t){return n===t?0:n<t?-1:1},DI=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,L.Wl)(t))},hF=function(n){if("object"!=typeof n||null===n)return(0,L.Wl)(n);const t=[];for(const i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)0!==i&&(e+=","),e+=(0,L.Wl)(t[i]),e+=":",e+=hF(n[t[i]]);return e+="}",e},EU=function(n,t){const e=n.length;if(e<=t)return[n];const i=[];for(let r=0;r<e;r+=t)i.push(n.substring(r,r+t>e?e:r+t));return i};function Ys(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const CU=function(n){(0,L.hu)(!hx(n),"Invalid JSON number");const i=1023;let r,s,c,d,p;0===n?(s=0,c=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=d+i,c=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(s=0,c=Math.round(n/Math.pow(2,-1074))));const m=[];for(p=52;p;p-=1)m.push(c%2?1:0),c=Math.floor(c/2);for(p=11;p;p-=1)m.push(s%2?1:0),s=Math.floor(s/2);m.push(r?1:0),m.reverse();const y=m.join("");let T="";for(p=0;p<64;p+=8){let A=parseInt(y.substr(p,8),2).toString(16);1===A.length&&(A="0"+A),T+=A}return T.toLowerCase()},m4=new RegExp("^-?(0*)\\d{1,10}$"),TU=function(n){if(m4.test(n)){const t=Number(n);if(t>=-2147483648&&t<=2147483647)return t}return null},Ib=function(n){try{n()}catch(t){setTimeout(()=>{throw Fo("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},EI=function(n,t){const e=setTimeout(n,t);return"number"==typeof e&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):"object"==typeof e&&e.unref&&e.unref(),e};class w4{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){Fo(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class b4{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(qs("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Fo(t)}}let CI=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const NU=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,OU="websocket",kU="long_polling";class pF{constructor(t,e,i,r,s=!1,c="",d=!1,p=!1){this.secure=e,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=c,this.includeNamespaceInQueryParams=d,this.isUsingEmulator=p,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Bv.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Bv.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function PU(n,t,e){let i;if((0,L.hu)("string"==typeof t,"typeof type must == string"),(0,L.hu)("object"==typeof e,"typeof params must == object"),t===OU)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==kU)throw new Error("Unknown connection type: "+t);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function D4(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const r=[];return Ys(e,(s,c)=>{r.push(s+"="+c)}),i+r.join("&")}class E4{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,L.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,L.p$)(this.counters_)}}const gF={},mF={};function _F(n){const t=n.toString();return gF[t]||(gF[t]=new E4),gF[t]}class T4{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Ib(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class sm{constructor(t,e,i,r,s,c,d){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=c,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=bI(t),this.stats_=_F(e),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),PU(e,kU,p))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new T4(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,L.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new vF((...s)=>{const[c,d,p,m,y]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=d,this.password=p;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[c,d]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(c,d)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&NU.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){sm.forceAllow_=!0}static forceDisallow(){sm.forceDisallow_=!0}static isAvailable(){return!((0,L.Yr)()||!sm.forceAllow_&&(sm.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,L.Wl)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=(0,L.h$)(e),r=EU(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,L.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=t,i.pw=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,L.Wl)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class vF{constructor(t,e,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,L.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=yU(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=vF.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(d){qs("frame writing exception"),d.stack&&qs(d.stack),qs(d)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||qs("No IE domain setting required")}catch{const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const c=this.pendingSegs.shift();i=i+"&seg"+r+"="+c.seg+"&ts"+r+"="+c.ts+"&d"+r+"="+c.d,r++}return e+=i,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(r),i()})}addTag(t,e){(0,L.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{qs("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let px=null;typeof MozWebSocket<"u"?px=MozWebSocket:typeof WebSocket<"u"&&(px=WebSocket);let Sb=(()=>{class n{constructor(e,i,r,s,c,d,p){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=bI(this.connId),this.stats_=_F(i),this.connURL=n.connectionURL_(i,d,p,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,r,s,c){const d={v:"5"};return!(0,L.Yr)()&&typeof location<"u"&&location.hostname&&NU.test(location.hostname)&&(d.r="f"),i&&(d.s=i),r&&(d.ls=r),s&&(d.ac=s),c&&(d.p=c),PU(e,OU,d)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Bv.set("previous_websocket_failure",!0);try{let r;if((0,L.Yr)()){r={headers:{"User-Agent":`Firebase/5/${cF}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,d=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;d&&(r.proxy={origin:d})}this.mySock=new px(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==px&&!n.forceDisallow_}static previouslyFailed(){return Bv.isInMemoryStorage||!0===Bv.get("previous_websocket_failure")}markConnectionHealthy(){Bv.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,L.cI)(i);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,L.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const i=(0,L.Wl)(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=EU(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),jU=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[sm,Sb]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const i=Sb&&Sb.isAvailable();let r=i&&!Sb.previouslyFailed();if(e.webSocketOnly&&(i||Fo("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Sb];else{const s=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&s.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class ZU{constructor(t,e,i,r,s,c,d,p,m,y){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=c,this.onReady_=d,this.onDisconnect_=p,this.onKill_=m,this.lastSessionId=y,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=bI("c:"+this.id+":"),this.transportManager_=new jU(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=EI(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=DI("t",t),i=DI("d",t);if("c"===e)this.onSecondaryControl_(i);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=DI("t",t),i=DI("d",t);"c"===e?this.onControl_(i):"d"===e&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=DI("t",t);if("d"in t){const i=t.d;if("h"===e){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(i):"r"===e?this.onReset_(i):"e"===e?dF("Server Error: "+i):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):dF("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==i&&Fo("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),EI(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):EI(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Bv.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class KU{put(t,e,i,r){}merge(t,e,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}class QU{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,L.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const r=this.getInitialEvent(t);r&&e.apply(i,r)}off(t,e,i){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let s=0;s<r.length;s++)if(r[s].callback===e&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(t){(0,L.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class gx extends QU{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,L.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new gx}getInitialEvent(t){return(0,L.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class yi{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function ti(){return new yi("")}function Sn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function om(n){return n.pieces_.length-n.pieceNum_}function Bi(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new yi(n.pieces_,t)}function wF(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function TI(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function eH(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new yi(t,0)}function yr(n,t){const e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof yi)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&e.push(i[r])}return new yi(e,0)}function An(n){return n.pieceNum_>=n.pieces_.length}function na(n,t){const e=Sn(n),i=Sn(t);if(null===e)return t;if(e===i)return na(Bi(n),Bi(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function q4(n,t){const e=TI(n,0),i=TI(t,0);for(let r=0;r<e.length&&r<i.length;r++){const s=Uv(e[r],i[r]);if(0!==s)return s}return e.length===i.length?0:e.length<i.length?-1:1}function bF(n,t){if(om(n)!==om(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function uc(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(om(n)>om(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class Y4{constructor(t,e){this.errorPrefix_=e,this.parts_=TI(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,L.ug)(this.parts_[i]);tH(this)}}function tH(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Hv(n))}function Hv(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class DF extends QU{constructor(){let t,e;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new DF}getInitialEvent(t){return(0,L.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const II=1e3;let _x,jv=(()=>{class n extends KU{constructor(e,i,r,s,c,d,p,m){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=c,this.authTokenProvider_=d,this.appCheckTokenProvider_=p,this.authOverride_=m,this.id=n.nextPersistentConnectionId_++,this.log_=bI("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=II,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m&&!(0,L.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");DF.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&gx.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,r){const s=++this.requestNumber_,c={r:s,a:e,b:i};this.log_((0,L.Wl)(c)),(0,L.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const i=new L.BH,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:d=>{const p=d.d;"ok"===d.s?i.resolve(p):i.reject(p)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(e,i,r,s){this.initConnection_();const c=e._queryIdentifier,d=e._path.toString();this.log_("Listen called for "+d+" "+c),this.listens.has(d)||this.listens.set(d,new Map),(0,L.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,L.hu)(!this.listens.get(d).has(c),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:i,query:e,tag:r};this.listens.get(d).set(c,p),this.connected_&&this.sendListen_(p)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(e){const i=e.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const c={p:r};e.tag&&(c.q=i._queryObject,c.t=e.tag),c.h=e.hashFn(),this.sendRequest("q",c,p=>{const m=p.d,y=p.s;n.warnOnListenWarnings_(m,i),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",p),"ok"!==y&&this.removeListen_(r,s),e.onComplete&&e.onComplete(y,m))})}static warnOnListenWarnings_(e,i){if(e&&"object"==typeof e&&(0,L.r3)(e,"w")){const r=(0,L.DV)(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',c=i._path.toString();Fo(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,L.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=(0,L.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const c=s.s,d=s.d||"error";this.authToken_===e&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,r=e.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(e,i){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,L.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,i)}sendUnlisten_(e,i,r,s){this.log_("Unlisten on "+e+" for "+i);const c={p:e};s&&(c.q=r,c.t=s),this.sendRequest("n",c)}onDisconnectPut(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:r})}onDisconnectMerge(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:r})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,r,s){const c={p:i,d:r};this.log_("onDisconnect "+e,c),this.sendRequest(e,c,d=>{s&&setTimeout(()=>{s(d.s,d.d)},Math.floor(0))})}put(e,i,r,s){this.putInternal("p",e,i,r,s)}merge(e,i,r,s){this.putInternal("m",e,i,r,s)}putInternal(e,i,r,s,c){this.initConnection_();const d={p:i,d:r};void 0!==c&&(d.h=c),this.outstandingPuts_.push({action:e,request:d,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,r,c=>{this.log_(i+" response",c),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(c.s,c.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,L.Wl)(e));const i=e.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),"d"===e?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===e?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===e?this.onListenRevoked_(i.p,i.q):"ac"===e?this.onAuthRevoked_(i.s,i.d):"apc"===e?this.onAppCheckRevoked_(i.s,i.d):"sd"===e?this.onSecurityDebugPacket_(i):dF("Unrecognized action received from server: "+(0,L.Wl)(e)+"\nAre you using the latest client?")}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,L.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=II,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=II,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=II),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,Ee.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const i=e.onDataMessage_.bind(e),r=e.onReady_.bind(e),s=e.onRealtimeDisconnect_.bind(e),c=e.id+":"+n.nextConnectionId_++,d=e.lastSessionId;let p=!1,m=null;const y=function(){m?m.close():(p=!0,s())};e.realtime_={close:y,sendRequest:function(x){(0,L.hu)(m,"sendRequest call when we're not connected not allowed."),m.sendRequest(x)}};const A=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[x,P]=yield Promise.all([e.authTokenProvider_.getToken(A),e.appCheckTokenProvider_.getToken(A)]);p?qs("getToken() completed but was canceled"):(qs("getToken() completed. Creating connection."),e.authToken_=x&&x.accessToken,e.appCheckToken_=P&&P.token,m=new ZU(c,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,i,r,s,V=>{Fo(V+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},d))}catch(x){e.log_("Failed to get token: "+x),p||(e.repoInfo_.nodeAdmin&&Fo(x),y())}}})()}interrupt(e){qs("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){qs("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,L.xb)(this.interruptReasons_)&&(this.reconnectDelay_=II,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let r;r=i?i.map(c=>hF(c)).join("$"):"default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,i){const r=new yi(e).toString();let s;if(this.listens.has(r)){const c=this.listens.get(r);s=c.get(i),c.delete(i),0===c.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,i){qs("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){qs("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";(0,L.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+i+"."+cF.replace(/\./g,"-")]=1,(0,L.uI)()?e["framework.cordova"]=1:(0,L.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=gx.getInstance().currentlyOnline();return(0,L.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Fn{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new Fn(t,e)}}class mx{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new Fn(rm,t),r=new Fn(rm,e);return 0!==this.compare(i,r)}minPost(){return Fn.MIN}}class rH extends mx{static get __EMPTY_NODE(){return _x}static set __EMPTY_NODE(t){_x=t}compare(t,e){return Uv(t.name,e.name)}isDefinedOn(t){throw(0,L.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return Fn.MIN}maxPost(){return new Fn(Uf,_x)}makePost(t,e){return(0,L.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Fn(t,_x)}toString(){return".key"}}const Yd=new rH;class vx{constructor(t,e,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let c=1;for(;!t.isEmpty();)if(c=e?i(t.key,e):1,r&&(c*=-1),c<0)t=this.isReverse_?t.left:t.right;else{if(0===c){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let CF,gu=(()=>{class n{constructor(e,i,r,s,c){this.key=e,this.value=i,this.color=r??n.RED,this.left=s??Ta.EMPTY_NODE,this.right=c??Ta.EMPTY_NODE}copy(e,i,r,s,c){return new n(e??this.key,i??this.value,r??this.color,s??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let s=this;const c=r(e,s.key);return s=c<0?s.copy(null,null,null,s.left.insert(e,i,r),null):0===c?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(e,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ta.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let r,s;if(r=this,i(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(e,r.key)){if(r.right.isEmpty())return Ta.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Ta{constructor(t,e=Ta.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Ta(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,gu.BLACK,null,null))}remove(t){return new Ta(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,gu.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,r=null;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}e<0?i=i.left:e>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new vx(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new vx(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new vx(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new vx(this.root_,null,this.comparator_,!0,t)}}function n5(n,t){return Uv(n.name,t.name)}function EF(n,t){return Uv(n,t)}Ta.EMPTY_NODE=new class t5{copy(t,e,i,r,s){return this}insert(t,e,i){return new gu(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const sH=function(n){return"number"==typeof n?"number:"+CU(n):"string:"+n},oH=function(n){if(n.isLeafNode()){const t=n.val();(0,L.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,L.r3)(t,".sv"),"Priority must be a string or number.")}else(0,L.hu)(n===CF||n.isEmpty(),"priority of unexpected type.");(0,L.hu)(n===CF||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let aH,lH,cH,Ab=(()=>{class n{constructor(e,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,(0,L.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),oH(this.priorityNode_)}static set __childrenNodeConstructor(e){aH=e}static get __childrenNodeConstructor(){return aH}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return An(e)?this:".priority"===Sn(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return".priority"===e?this.updatePriority(i):i.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const r=Sn(e);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,L.hu)(".priority"!==r||1===om(e),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Bi(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+sH(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",e+="number"===i?CU(this.value_):this.value_,this.lazyHash_=wU(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,L.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),c=n.VALUE_TYPE_ORDER.indexOf(r);return(0,L.hu)(s>=0,"Unknown leaf type: "+i),(0,L.hu)(c>=0,"Unknown leaf type: "+r),s===c?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:c-s}withIndex(){return this}isIndexed(){return!0}equals(e){return e===this||!!e.isLeafNode()&&(this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Yi=new class o5 extends mx{compare(t,e){const i=t.node.getPriority(),r=e.node.getPriority(),s=i.compareTo(r);return 0===s?Uv(t.name,e.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return Fn.MIN}maxPost(){return new Fn(Uf,new Ab("[PRIORITY-POST]",cH))}makePost(t,e){const i=lH(t);return new Fn(e,new Ab("[PRIORITY-POST]",i))}toString(){return".priority"}},a5=Math.log(2);class l5{constructor(t){this.count=parseInt(Math.log(t+1)/a5,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&r}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const yx=function(n,t,e,i){n.sort(t);const r=function(p,m){const y=m-p;let T,A;if(0===y)return null;if(1===y)return T=n[p],A=e?e(T):T,new gu(A,T.node,gu.BLACK,null,null);{const x=parseInt(y/2,10)+p,P=r(p,x),V=r(x+1,m);return T=n[x],A=e?e(T):T,new gu(A,T.node,gu.BLACK,P,V)}},d=function(p){let m=null,y=null,T=n.length;const A=function(P,V){const G=T-P,te=T;T-=P;const se=r(G+1,te),le=n[G],de=e?e(le):le;x(new gu(de,le.node,V,null,se))},x=function(P){m?(m.left=P,m=P):(y=P,m=P)};for(let P=0;P<p.count;++P){const V=p.nextBitIsOne(),G=Math.pow(2,p.count-(P+1));V?A(G,gu.BLACK):(A(G,gu.BLACK),A(G,gu.RED))}return y}(new l5(n.length));return new Ta(i||t,d)};let TF;const Mb={};class Hf{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,L.hu)(Mb&&Yi,"ChildrenNode.ts has not been loaded"),TF=TF||new Hf({".priority":Mb},{".priority":Yi}),TF}get(t){const e=(0,L.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Ta?e:null}hasIndex(t){return(0,L.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,L.hu)(t!==Yd,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=e.getIterator(Fn.Wrap);let d,c=s.getNext();for(;c;)r=r||t.isDefinedOn(c.node),i.push(c),c=s.getNext();d=r?yx(i,t.getCompare()):Mb;const p=t.toString(),m=Object.assign({},this.indexSet_);m[p]=t;const y=Object.assign({},this.indexes_);return y[p]=d,new Hf(y,m)}addToIndexes(t,e){const i=(0,L.UI)(this.indexes_,(r,s)=>{const c=(0,L.DV)(this.indexSet_,s);if((0,L.hu)(c,"Missing index implementation for "+s),r===Mb){if(c.isDefinedOn(t.node)){const d=[],p=e.getIterator(Fn.Wrap);let m=p.getNext();for(;m;)m.name!==t.name&&d.push(m),m=p.getNext();return d.push(t),yx(d,c.getCompare())}return Mb}{const d=e.get(t.name);let p=r;return d&&(p=p.remove(new Fn(t.name,d))),p.insert(t,t.node)}});return new Hf(i,this.indexSet_)}removeFromIndexes(t,e){const i=(0,L.UI)(this.indexes_,r=>{if(r===Mb)return r;{const s=e.get(t.name);return s?r.remove(new Fn(t.name,s)):r}});return new Hf(i,this.indexSet_)}}let SI,_n=(()=>{class n{constructor(e,i,r){this.children_=e,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&oH(this.priorityNode_),this.children_.isEmpty()&&(0,L.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return SI||(SI=new n(new Ta(EF),null,Hf.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||SI}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const i=this.children_.get(e);return null===i?SI:i}}getChild(e){const i=Sn(e);return null===i?this:this.getImmediateChild(i).getChild(Bi(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,i){if((0,L.hu)(i,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(i);{const r=new Fn(e,i);let s,c;i.isEmpty()?(s=this.children_.remove(e),c=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,i),c=this.indexMap_.addToIndexes(r,this.children_));const d=s.isEmpty()?SI:this.priorityNode_;return new n(s,d,c)}}updateChild(e,i){const r=Sn(e);if(null===r)return i;{(0,L.hu)(".priority"!==Sn(e)||1===om(e),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Bi(e),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let r=0,s=0,c=!0;if(this.forEachChild(Yi,(d,p)=>{i[d]=p.val(e),r++,c&&n.INTEGER_REGEXP_.test(d)?s=Math.max(s,Number(d)):c=!1}),!e&&c&&s<2*r){const d=[];for(const p in i)d[p]=i[p];return d}return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+sH(this.getPriority().val())+":"),this.forEachChild(Yi,(i,r)=>{const s=r.hash();""!==s&&(e+=":"+i+":"+s)}),this.lazyHash_=""===e?"":wU(e)}return this.lazyHash_}getPredecessorChildName(e,i,r){const s=this.resolveIndex_(r);if(s){const c=s.getPredecessorKey(new Fn(e,i));return c?c.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new Fn(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new Fn(i,this.children_.get(i)):null}forEachChild(e,i){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Fn.Wrap);let c=s.peek();for(;null!=c&&i.compare(c,e)<0;)s.getNext(),c=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Fn.Wrap);let c=s.peek();for(;null!=c&&i.compare(c,e)>0;)s.getNext(),c=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===AI?-1:0}withIndex(e){if(e===Yd||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===Yd||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(Yi),s=i.getIterator(Yi);let c=r.getNext(),d=s.getNext();for(;c&&d;){if(c.name!==d.name||!c.node.equals(d.node))return!1;c=r.getNext(),d=s.getNext()}return null===c&&null===d}return!1}return!1}}resolveIndex_(e){return e===Yd?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const AI=new class c5 extends _n{constructor(){super(new Ta(EF),_n.EMPTY_NODE,Hf.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return _n.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Fn,{MIN:{value:new Fn(rm,_n.EMPTY_NODE)},MAX:{value:new Fn(Uf,AI)}}),rH.__EMPTY_NODE=_n.EMPTY_NODE,Ab.__childrenNodeConstructor=_n,function i5(n){CF=n}(AI),function s5(n){cH=n}(AI);const u5=!0;function Or(n,t=null){if(null===n)return _n.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,L.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Ab(n,Or(t));if(n instanceof Array||!u5){let e=_n.EMPTY_NODE;return Ys(n,(i,r)=>{if((0,L.r3)(n,i)&&"."!==i.substring(0,1)){const s=Or(r);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(i,s))}}),e.updatePriority(Or(t))}{const e=[];let i=!1;if(Ys(n,(c,d)=>{if("."!==c.substring(0,1)){const p=Or(d);p.isEmpty()||(i=i||!p.getPriority().isEmpty(),e.push(new Fn(c,p)))}}),0===e.length)return _n.EMPTY_NODE;const s=yx(e,n5,c=>c.name,EF);if(i){const c=yx(e,Yi.getCompare());return new _n(s,Or(t),new Hf({".priority":c},{".priority":Yi}))}return new _n(s,Or(t),Hf.Default)}}!function r5(n){lH=n}(Or);class IF extends mx{constructor(t){super(),this.indexPath_=t,(0,L.hu)(!An(t)&&".priority"!==Sn(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),r=this.extractChild(e.node),s=i.compareTo(r);return 0===s?Uv(t.name,e.name):s}makePost(t,e){const i=Or(t),r=_n.EMPTY_NODE.updateChild(this.indexPath_,i);return new Fn(e,r)}maxPost(){const t=_n.EMPTY_NODE.updateChild(this.indexPath_,AI);return new Fn(Uf,t)}toString(){return TI(this.indexPath_,0).join("/")}}const SF=new class d5 extends mx{compare(t,e){const i=t.node.compareTo(e.node);return 0===i?Uv(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return Fn.MIN}maxPost(){return Fn.MAX}makePost(t,e){const i=Or(t);return new Fn(e,i)}toString(){return".value"}};function uH(n){return{type:"value",snapshotNode:n}}function Nb(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function MI(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function NI(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class AF{constructor(t){this.index_=t}updateChild(t,e,i,r,s,c){(0,L.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=t.getImmediateChild(e);return d.getChild(r).equals(i.getChild(r))&&d.isEmpty()===i.isEmpty()||(null!=c&&(i.isEmpty()?t.hasChild(e)?c.trackChildChange(MI(e,d)):(0,L.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?c.trackChildChange(Nb(e,i)):c.trackChildChange(NI(e,i,d))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return null!=i&&(t.isLeafNode()||t.forEachChild(Yi,(r,s)=>{e.hasChild(r)||i.trackChildChange(MI(r,s))}),e.isLeafNode()||e.forEachChild(Yi,(r,s)=>{if(t.hasChild(r)){const c=t.getImmediateChild(r);c.equals(s)||i.trackChildChange(NI(r,s,c))}else i.trackChildChange(Nb(r,s))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?_n.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class xI{constructor(t){this.indexedFilter_=new AF(t.getIndex()),this.index_=t.getIndex(),this.startPost_=xI.getStartPost_(t),this.endPost_=xI.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const e=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,i=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return e&&i}updateChild(t,e,i,r,s,c){return this.matches(new Fn(e,i))||(i=_n.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,r,s,c)}updateFullNode(t,e,i){e.isLeafNode()&&(e=_n.EMPTY_NODE);let r=e.withIndex(this.index_);r=r.updatePriority(_n.EMPTY_NODE);const s=this;return e.forEachChild(Yi,(c,d)=>{s.matches(new Fn(c,d))||(r=r.updateImmediateChild(c,_n.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class f5{constructor(t){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=e=>{const i=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new xI(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,e,i,r,s,c){return this.rangedFilter_.matches(new Fn(e,i))||(i=_n.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,r,s,c):this.fullLimitUpdateChild_(t,e,i,s,c)}updateFullNode(t,e,i){let r;if(e.isLeafNode()||e.isEmpty())r=_n.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let s;r=_n.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;s.hasNext()&&c<this.limit_;){const d=s.getNext();if(this.withinDirectionalStart(d)){if(!this.withinDirectionalEnd(d))break;r=r.updateImmediateChild(d.name,d.node),c++}}}else{let s;r=e.withIndex(this.index_),r=r.updatePriority(_n.EMPTY_NODE),s=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let c=0;for(;s.hasNext();){const d=s.getNext();c<this.limit_&&this.withinDirectionalStart(d)&&this.withinDirectionalEnd(d)?c++:r=r.updateImmediateChild(d.name,_n.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,r,s){let c;if(this.reverse_){const T=this.index_.getCompare();c=(A,x)=>T(x,A)}else c=this.index_.getCompare();const d=t;(0,L.hu)(d.numChildren()===this.limit_,"");const p=new Fn(e,i),m=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),y=this.rangedFilter_.matches(p);if(d.hasChild(e)){const T=d.getImmediateChild(e);let A=r.getChildAfterChild(this.index_,m,this.reverse_);for(;null!=A&&(A.name===e||d.hasChild(A.name));)A=r.getChildAfterChild(this.index_,A,this.reverse_);const x=null==A?1:c(A,p);if(y&&!i.isEmpty()&&x>=0)return s?.trackChildChange(NI(e,i,T)),d.updateImmediateChild(e,i);{s?.trackChildChange(MI(e,T));const V=d.updateImmediateChild(e,_n.EMPTY_NODE);return null!=A&&this.rangedFilter_.matches(A)?(s?.trackChildChange(Nb(A.name,A.node)),V.updateImmediateChild(A.name,A.node)):V}}return i.isEmpty()?t:y&&c(m,p)>=0?(null!=s&&(s.trackChildChange(MI(m.name,m.node)),s.trackChildChange(Nb(e,i))),d.updateImmediateChild(e,i).updateImmediateChild(m.name,_n.EMPTY_NODE)):t}}class wx{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Yi}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:rm}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Uf}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,L.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Yi}copy(){const t=new wx;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function MF(n,t,e){const i=n.copy();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=e?(i.startNameSet_=!0,i.indexStartName_=e):(i.startNameSet_=!1,i.indexStartName_=""),i}function NF(n,t,e){const i=n.copy();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==e?(i.endNameSet_=!0,i.indexEndName_=e):(i.endNameSet_=!1,i.indexEndName_=""),i}function bx(n,t){const e=n.copy();return e.index_=t,e}function dH(n){const t={};if(n.isDefault())return t;let e;if(n.index_===Yi?e="$priority":n.index_===SF?e="$value":n.index_===Yd?e="$key":((0,L.hu)(n.index_ instanceof IF,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,L.Wl)(e),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";t[i]=(0,L.Wl)(n.indexStartValue_),n.startNameSet_&&(t[i]+=","+(0,L.Wl)(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";t[i]=(0,L.Wl)(n.indexEndValue_),n.endNameSet_&&(t[i]+=","+(0,L.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function hH(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_),t.sin=!n.startAfterSet_),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_),t.ein=!n.endBeforeSet_),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==Yi&&(t.i=n.index_.toString()),t}class Dx extends KU{constructor(t,e,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=bI("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,L.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,r){const s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);const c=Dx.getListenId_(t,i),d={};this.listens_[c]=d;const p=dH(t._queryParams);this.restRequest_(s+".json",p,(m,y)=>{let T=y;if(404===m&&(T=null,m=null),null===m&&this.onDataUpdate_(s,T,!1,i),(0,L.DV)(this.listens_,c)===d){let A;A=m?401===m?"permission_denied":"rest_error:"+m:"ok",r(A,null)}})}unlisten(t,e){const i=Dx.getListenId_(t,e);delete this.listens_[i]}get(t){const e=dH(t._queryParams),i=t._path.toString(),r=new L.BH;return this.restRequest_(i+".json",e,(s,c)=>{let d=c;404===s&&(d=null,s=null),null===s?(this.onDataUpdate_(i,d,!1,null),r.resolve(d)):r.reject(new Error(d))}),r.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(e.auth=r.accessToken),s&&s.token&&(e.ac=s.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,L.xO)(e);this.log_("Sending REST request for "+c);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(i&&4===d.readyState){this.log_("REST Response for "+c+" received. status:",d.status,"response:",d.responseText);let p=null;if(d.status>=200&&d.status<300){try{p=(0,L.cI)(d.responseText)}catch{Fo("Failed to parse JSON response for "+c+": "+d.responseText)}i(null,p)}else 401!==d.status&&404!==d.status&&Fo("Got unsuccessful REST response for "+c+" Status: "+d.status),i(d.status);i=null}},d.open("GET",c,!0),d.send()})}}class y5{constructor(){this.rootNode_=_n.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function Ex(){return{value:null,children:new Map}}function xb(n,t,e){if(An(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const i=Sn(t);n.children.has(i)||n.children.set(i,Ex()),xb(n.children.get(i),t=Bi(t),e)}}function xF(n,t){if(An(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(Yi,(i,r)=>{xb(n,new yi(i),r)}),xF(n,t)}}if(n.children.size>0){const e=Sn(t);return t=Bi(t),n.children.has(e)&&xF(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function RF(n,t,e){null!==n.value?e(t,n.value):function w5(n,t){n.children.forEach((e,i)=>{t(i,e)})}(n,(i,r)=>{RF(r,new yi(t.toString()+"/"+i),e)})}class b5{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&Ys(this.last_,(i,r)=>{e[i]=e[i]-r}),this.last_=t,e}}class C5{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new b5(t);const i=1e4+2e4*Math.random();EI(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;Ys(t,(r,s)=>{s>0&&(0,L.r3)(this.statsToReport_,r)&&(e[r]=s,i=!0)}),i&&this.server_.reportStats(e),EI(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Zd=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Zd||{});function PF(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Cx{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=Zd.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(An(this.path)){if(null!=this.affectedTree.value)return(0,L.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new yi(t));return new Cx(ti(),e,this.revert)}}return(0,L.hu)(Sn(this.path)===t,"operationForChild called for unrelated child."),new Cx(Bi(this.path),this.affectedTree,this.revert)}}class RI{constructor(t,e){this.source=t,this.path=e,this.type=Zd.LISTEN_COMPLETE}operationForChild(t){return An(this.path)?new RI(this.source,ti()):new RI(this.source,Bi(this.path))}}class Gv{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=Zd.OVERWRITE}operationForChild(t){return An(this.path)?new Gv(this.source,ti(),this.snap.getImmediateChild(t)):new Gv(this.source,Bi(this.path),this.snap)}}class Rb{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=Zd.MERGE}operationForChild(t){if(An(this.path)){const e=this.children.subtree(new yi(t));return e.isEmpty()?null:e.value?new Gv(this.source,ti(),e.value):new Rb(this.source,ti(),e)}return(0,L.hu)(Sn(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Rb(this.source,Bi(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class am{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(An(t))return this.isFullyInitialized()&&!this.filtered_;const e=Sn(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class T5{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function OI(n,t,e,i,r,s){const c=i.filter(d=>d.type===e);c.sort((d,p)=>function A5(n,t,e){if(null==t.childName||null==e.childName)throw(0,L.g5)("Should only compare child_ events.");const i=new Fn(t.childName,t.snapshotNode),r=new Fn(e.childName,e.snapshotNode);return n.index_.compare(i,r)}(n,d,p)),c.forEach(d=>{const p=function S5(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,d,s);r.forEach(m=>{m.respondsTo(d.type)&&t.push(m.createEvent(p,n.query_))})})}function Tx(n,t){return{eventCache:n,serverCache:t}}function kI(n,t,e,i){return Tx(new am(t,e,i),n.serverCache)}function pH(n,t,e,i){return Tx(n.eventCache,new am(t,e,i))}function Ix(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function $v(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let FF;class Zi{constructor(t,e=(()=>(FF||(FF=new Ta(h4)),FF))()){this.value=t,this.children=e}static fromObject(t){let e=new Zi(null);return Ys(t,(i,r)=>{e=e.set(new yi(i),r)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:ti(),value:this.value};if(An(t))return null;{const i=Sn(t),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(Bi(t),e);return null!=s?{path:yr(new yi(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(An(t))return this;{const e=Sn(t),i=this.children.get(e);return null!==i?i.subtree(Bi(t)):new Zi(null)}}set(t,e){if(An(t))return new Zi(e,this.children);{const i=Sn(t),s=(this.children.get(i)||new Zi(null)).set(Bi(t),e),c=this.children.insert(i,s);return new Zi(this.value,c)}}remove(t){if(An(t))return this.children.isEmpty()?new Zi(null):new Zi(null,this.children);{const e=Sn(t),i=this.children.get(e);if(i){const r=i.remove(Bi(t));let s;return s=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&s.isEmpty()?new Zi(null):new Zi(this.value,s)}return this}}get(t){if(An(t))return this.value;{const e=Sn(t),i=this.children.get(e);return i?i.get(Bi(t)):null}}setTree(t,e){if(An(t))return e;{const i=Sn(t),s=(this.children.get(i)||new Zi(null)).setTree(Bi(t),e);let c;return c=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new Zi(this.value,c)}}fold(t){return this.fold_(ti(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(yr(t,r),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,ti(),e)}findOnPath_(t,e,i){const r=!!this.value&&i(e,this.value);if(r)return r;if(An(t))return null;{const s=Sn(t),c=this.children.get(s);return c?c.findOnPath_(Bi(t),yr(e,s),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,ti(),e)}foreachOnPath_(t,e,i){if(An(t))return this;{this.value&&i(e,this.value);const r=Sn(t),s=this.children.get(r);return s?s.foreachOnPath_(Bi(t),yr(e,r),i):new Zi(null)}}foreach(t){this.foreach_(ti(),t)}foreach_(t,e){this.children.inorderTraversal((i,r)=>{r.foreach_(yr(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}class mu{constructor(t){this.writeTree_=t}static empty(){return new mu(new Zi(null))}}function PI(n,t,e){if(An(t))return new mu(new Zi(e));{const i=n.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let s=i.value;const c=na(r,t);return s=s.updateChild(c,e),new mu(n.writeTree_.set(r,s))}{const r=new Zi(e),s=n.writeTree_.setTree(t,r);return new mu(s)}}}function LF(n,t,e){let i=n;return Ys(e,(r,s)=>{i=PI(i,yr(t,r),s)}),i}function gH(n,t){if(An(t))return mu.empty();{const e=n.writeTree_.setTree(t,new Zi(null));return new mu(e)}}function BF(n,t){return null!=zv(n,t)}function zv(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(na(e.path,t)):null}function mH(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Yi,(i,r)=>{t.push(new Fn(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&t.push(new Fn(i,r.value))}),t}function lm(n,t){if(An(t))return n;{const e=zv(n,t);return new mu(null!=e?new Zi(e):n.writeTree_.subtree(t))}}function VF(n){return n.writeTree_.isEmpty()}function Ob(n,t){return _H(ti(),n.writeTree_,t)}function _H(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((r,s)=>{".priority"===r?((0,L.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):e=_H(yr(n,r),s,e)}),!e.getChild(n).isEmpty()&&null!==i&&(e=e.updateChild(yr(n,".priority"),i)),e}}function Sx(n,t){return DH(t,n)}function k5(n,t){if(n.snap)return uc(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&uc(yr(n.path,e),t))return!0;return!1}function F5(n){return n.visible}function vH(n,t,e){let i=mu.empty();for(let r=0;r<n.length;++r){const s=n[r];if(t(s)){const c=s.path;let d;if(s.snap)uc(e,c)?(d=na(e,c),i=PI(i,d,s.snap)):uc(c,e)&&(d=na(c,e),i=PI(i,ti(),s.snap.getChild(d)));else{if(!s.children)throw(0,L.g5)("WriteRecord should have .snap or .children");if(uc(e,c))d=na(e,c),i=LF(i,d,s.children);else if(uc(c,e))if(d=na(c,e),An(d))i=LF(i,ti(),s.children);else{const p=(0,L.DV)(s.children,Sn(d));if(p){const m=p.getChild(Bi(d));i=PI(i,ti(),m)}}}}}return i}function yH(n,t,e,i,r){if(i||r){const s=lm(n.visibleWrites,t);return!r&&VF(s)?e:r||null!=e||BF(s,ti())?Ob(vH(n.allWrites,function(m){return(m.visible||r)&&(!i||!~i.indexOf(m.writeId))&&(uc(m.path,t)||uc(t,m.path))},t),e||_n.EMPTY_NODE):null}{const s=zv(n.visibleWrites,t);if(null!=s)return s;{const c=lm(n.visibleWrites,t);return VF(c)?e:null!=e||BF(c,ti())?Ob(c,e||_n.EMPTY_NODE):null}}}function Ax(n,t,e,i){return yH(n.writeTree,n.treePath,t,e,i)}function UF(n,t){return function L5(n,t,e){let i=_n.EMPTY_NODE;const r=zv(n.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(Yi,(s,c)=>{i=i.updateImmediateChild(s,c)}),i;if(e){const s=lm(n.visibleWrites,t);return e.forEachChild(Yi,(c,d)=>{const p=Ob(lm(s,new yi(c)),d);i=i.updateImmediateChild(c,p)}),mH(s).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}return mH(lm(n.visibleWrites,t)).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}(n.writeTree,n.treePath,t)}function wH(n,t,e,i){return function B5(n,t,e,i,r){(0,L.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=yr(t,e);if(BF(n.visibleWrites,s))return null;{const c=lm(n.visibleWrites,s);return VF(c)?r.getChild(e):Ob(c,r.getChild(e))}}(n.writeTree,n.treePath,t,e,i)}function Mx(n,t){return function U5(n,t){return zv(n.visibleWrites,t)}(n.writeTree,yr(n.treePath,t))}function HF(n,t,e){return function V5(n,t,e,i){const r=yr(t,e),s=zv(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(e)?Ob(lm(n.visibleWrites,r),i.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function bH(n,t){return DH(yr(n.treePath,t),n.writeTree)}function DH(n,t){return{treePath:n,writeTree:t}}class $5{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;(0,L.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,L.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===e&&"child_removed"===s)this.changeMap.set(i,NI(i,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===e&&"child_changed"===s)this.changeMap.set(i,MI(i,r.oldSnap));else if("child_changed"===e&&"child_added"===s)this.changeMap.set(i,Nb(i,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==s)throw(0,L.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(i,NI(i,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}const EH=new class z5{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}};class jF{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=null!=this.optCompleteServerCache_?new am(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return HF(this.writes_,t,i)}}getChildAfterChild(t,e,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:$v(this.viewCache_),s=function G5(n,t,e,i,r,s){return function H5(n,t,e,i,r,s,c){let d;const p=lm(n.visibleWrites,t),m=zv(p,ti());if(null!=m)d=m;else{if(null==e)return[];d=Ob(p,e)}if(d=d.withIndex(c),d.isEmpty()||d.isLeafNode())return[];{const y=[],T=c.getCompare(),A=s?d.getReverseIteratorFrom(i,c):d.getIteratorFrom(i,c);let x=A.getNext();for(;x&&y.length<r;)0!==T(x,i)&&y.push(x),x=A.getNext();return y}}(n.writeTree,n.treePath,t,e,i,r,s)}(this.writes_,r,e,1,i,t);return 0===s.length?null:s[0]}}function CH(n,t,e,i,r,s){const c=t.eventCache;if(null!=Mx(i,e))return t;{let d,p;if(An(e))if((0,L.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const m=$v(t),T=UF(i,m instanceof _n?m:_n.EMPTY_NODE);d=n.filter.updateFullNode(t.eventCache.getNode(),T,s)}else{const m=Ax(i,$v(t));d=n.filter.updateFullNode(t.eventCache.getNode(),m,s)}else{const m=Sn(e);if(".priority"===m){(0,L.hu)(1===om(e),"Can't have a priority with additional path components");const y=c.getNode();p=t.serverCache.getNode();const T=wH(i,e,y,p);d=null!=T?n.filter.updatePriority(y,T):c.getNode()}else{const y=Bi(e);let T;if(c.isCompleteForChild(m)){p=t.serverCache.getNode();const A=wH(i,e,c.getNode(),p);T=null!=A?c.getNode().getImmediateChild(m).updateChild(y,A):c.getNode().getImmediateChild(m)}else T=HF(i,m,t.serverCache);d=null!=T?n.filter.updateChild(c.getNode(),m,T,y,r,s):c.getNode()}}return kI(t,d,c.isFullyInitialized()||An(e),n.filter.filtersNodes())}}function Nx(n,t,e,i,r,s,c,d){const p=t.serverCache;let m;const y=c?n.filter:n.filter.getIndexedFilter();if(An(e))m=y.updateFullNode(p.getNode(),i,null);else if(y.filtersNodes()&&!p.isFiltered()){const x=p.getNode().updateChild(e,i);m=y.updateFullNode(p.getNode(),x,null)}else{const x=Sn(e);if(!p.isCompleteForPath(e)&&om(e)>1)return t;const P=Bi(e),G=p.getNode().getImmediateChild(x).updateChild(P,i);m=".priority"===x?y.updatePriority(p.getNode(),G):y.updateChild(p.getNode(),x,G,P,EH,null)}const T=pH(t,m,p.isFullyInitialized()||An(e),y.filtersNodes());return CH(n,T,e,r,new jF(r,T,s),d)}function GF(n,t,e,i,r,s,c){const d=t.eventCache;let p,m;const y=new jF(r,t,s);if(An(e))m=n.filter.updateFullNode(t.eventCache.getNode(),i,c),p=kI(t,m,!0,n.filter.filtersNodes());else{const T=Sn(e);if(".priority"===T)m=n.filter.updatePriority(t.eventCache.getNode(),i),p=kI(t,m,d.isFullyInitialized(),d.isFiltered());else{const A=Bi(e),x=d.getNode().getImmediateChild(T);let P;if(An(A))P=i;else{const V=y.getCompleteChild(T);P=null!=V?".priority"===wF(A)&&V.getChild(eH(A)).isEmpty()?V:V.updateChild(A,i):_n.EMPTY_NODE}p=x.equals(P)?t:kI(t,n.filter.updateChild(d.getNode(),T,P,A,y,c),d.isFullyInitialized(),n.filter.filtersNodes())}}return p}function TH(n,t){return n.eventCache.isCompleteForChild(t)}function IH(n,t,e){return e.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function $F(n,t,e,i,r,s,c,d){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let m,p=t;m=An(e)?i:new Zi(null).setTree(e,i);const y=t.serverCache.getNode();return m.children.inorderTraversal((T,A)=>{if(y.hasChild(T)){const P=IH(0,t.serverCache.getNode().getImmediateChild(T),A);p=Nx(n,p,new yi(T),P,r,s,c,d)}}),m.children.inorderTraversal((T,A)=>{const x=!t.serverCache.isCompleteForChild(T)&&null===A.value;if(!y.hasChild(T)&&!x){const V=IH(0,t.serverCache.getNode().getImmediateChild(T),A);p=Nx(n,p,new yi(T),V,r,s,c,d)}}),p}class eq{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new AF(i.getIndex()),s=function p5(n){return n.loadsAllData()?new AF(n.getIndex()):n.hasLimit()?new f5(n):new xI(n)}(i);this.processor_=function W5(n){return{filter:n}}(s);const c=e.serverCache,d=e.eventCache,p=r.updateFullNode(_n.EMPTY_NODE,c.getNode(),null),m=s.updateFullNode(_n.EMPTY_NODE,d.getNode(),null),y=new am(p,c.isFullyInitialized(),r.filtersNodes()),T=new am(m,d.isFullyInitialized(),s.filtersNodes());this.viewCache_=Tx(T,y),this.eventGenerator_=new T5(this.query_)}get query(){return this.query_}}function iq(n,t){const e=$v(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!An(t)&&!e.getImmediateChild(Sn(t)).isEmpty())?e.getChild(t):null}function SH(n){return 0===n.eventRegistrations_.length}function AH(n,t,e){const i=[];if(e){(0,L.hu)(null==t,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const c=s.createCancelEvent(e,r);c&&i.push(c)})}if(t){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const c=n.eventRegistrations_[s];if(c.matches(t)){if(t.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(c)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function MH(n,t,e,i){t.type===Zd.MERGE&&null!==t.source.queryId&&((0,L.hu)($v(n.viewCache_),"We should always have a full cache before handling merges"),(0,L.hu)(Ix(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function Y5(n,t,e,i,r){const s=new $5;let c,d;if(e.type===Zd.OVERWRITE){const m=e;m.source.fromUser?c=GF(n,t,m.path,m.snap,i,r,s):((0,L.hu)(m.source.fromServer,"Unknown source."),d=m.source.tagged||t.serverCache.isFiltered()&&!An(m.path),c=Nx(n,t,m.path,m.snap,i,r,d,s))}else if(e.type===Zd.MERGE){const m=e;m.source.fromUser?c=function K5(n,t,e,i,r,s,c){let d=t;return i.foreach((p,m)=>{const y=yr(e,p);TH(t,Sn(y))&&(d=GF(n,d,y,m,r,s,c))}),i.foreach((p,m)=>{const y=yr(e,p);TH(t,Sn(y))||(d=GF(n,d,y,m,r,s,c))}),d}(n,t,m.path,m.children,i,r,s):((0,L.hu)(m.source.fromServer,"Unknown source."),d=m.source.tagged||t.serverCache.isFiltered(),c=$F(n,t,m.path,m.children,i,r,d,s))}else if(e.type===Zd.ACK_USER_WRITE){const m=e;c=m.revert?function X5(n,t,e,i,r,s){let c;if(null!=Mx(i,e))return t;{const d=new jF(i,t,r),p=t.eventCache.getNode();let m;if(An(e)||".priority"===Sn(e)){let y;if(t.serverCache.isFullyInitialized())y=Ax(i,$v(t));else{const T=t.serverCache.getNode();(0,L.hu)(T instanceof _n,"serverChildren would be complete if leaf node"),y=UF(i,T)}m=n.filter.updateFullNode(p,y,s)}else{const y=Sn(e);let T=HF(i,y,t.serverCache);null==T&&t.serverCache.isCompleteForChild(y)&&(T=p.getImmediateChild(y)),m=null!=T?n.filter.updateChild(p,y,T,Bi(e),d,s):t.eventCache.getNode().hasChild(y)?n.filter.updateChild(p,y,_n.EMPTY_NODE,Bi(e),d,s):p,m.isEmpty()&&t.serverCache.isFullyInitialized()&&(c=Ax(i,$v(t)),c.isLeafNode()&&(m=n.filter.updateFullNode(m,c,s)))}return c=t.serverCache.isFullyInitialized()||null!=Mx(i,ti()),kI(t,m,c,n.filter.filtersNodes())}}(n,t,m.path,i,r,s):function Q5(n,t,e,i,r,s,c){if(null!=Mx(r,e))return t;const d=t.serverCache.isFiltered(),p=t.serverCache;if(null!=i.value){if(An(e)&&p.isFullyInitialized()||p.isCompleteForPath(e))return Nx(n,t,e,p.getNode().getChild(e),r,s,d,c);if(An(e)){let m=new Zi(null);return p.getNode().forEachChild(Yd,(y,T)=>{m=m.set(new yi(y),T)}),$F(n,t,e,m,r,s,d,c)}return t}{let m=new Zi(null);return i.foreach((y,T)=>{const A=yr(e,y);p.isCompleteForPath(A)&&(m=m.set(y,p.getNode().getChild(A)))}),$F(n,t,e,m,r,s,d,c)}}(n,t,m.path,m.affectedTree,i,r,s)}else{if(e.type!==Zd.LISTEN_COMPLETE)throw(0,L.g5)("Unknown operation type: "+e.type);c=function J5(n,t,e,i,r){const s=t.serverCache;return CH(n,pH(t,s.getNode(),s.isFullyInitialized()||An(e),s.isFiltered()),e,i,EH,r)}(n,t,e.path,i,s)}const p=s.getChanges();return function Z5(n,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=Ix(n);(e.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&e.push(uH(Ix(t)))}}(t,c,p),{viewCache:c,changes:p}}(n.processor_,r,t,e,i);return function q5(n,t){(0,L.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,L.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,L.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,NH(n,s.changes,s.viewCache.eventCache.getNode(),null)}function NH(n,t,e,i){return function I5(n,t,e,i){const r=[],s=[];return t.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&s.push(function h5(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(c.childName,c.snapshotNode))}),OI(n,r,"child_removed",t,i,e),OI(n,r,"child_added",t,i,e),OI(n,r,"child_moved",s,i,e),OI(n,r,"child_changed",t,i,e),OI(n,r,"value",t,i,e),r}(n.eventGenerator_,t,e,i?[i]:n.eventRegistrations_)}let xx,Ox;class xH{constructor(){this.views=new Map}}function zF(n,t,e,i){const r=t.source.queryId;if(null!==r){const s=n.views.get(r);return(0,L.hu)(null!=s,"SyncTree gave us an op for an invalid query."),MH(s,t,e,i)}{let s=[];for(const c of n.views.values())s=s.concat(MH(c,t,e,i));return s}}function RH(n,t,e,i,r){const c=n.views.get(t._queryIdentifier);if(!c){let d=Ax(e,r?i:null),p=!1;d?p=!0:i instanceof _n?(d=UF(e,i),p=!1):(d=_n.EMPTY_NODE,p=!1);const m=Tx(new am(d,p,!1),new am(i,r,!1));return new eq(t,m)}return c}function OH(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function cm(n,t){let e=null;for(const i of n.views.values())e=e||iq(i,t);return e}function kH(n,t){return t._queryParams.loadsAllData()?Rx(n):n.views.get(t._queryIdentifier)}function PH(n,t){return null!=kH(n,t)}function um(n){return null!=Rx(n)}function Rx(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let fq=1;class FH{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Zi(null),this.pendingWriteTree_=function j5(){return{visibleWrites:mu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function WF(n,t,e,i,r){return function N5(n,t,e,i,r){(0,L.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:r}),r&&(n.visibleWrites=PI(n.visibleWrites,t,e)),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i,r),r?kb(n,new Gv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function dm(n,t,e=!1){const i=function R5(n,t){for(let e=0;e<n.allWrites.length;e++){const i=n.allWrites[e];if(i.writeId===t)return i}return null}(n.pendingWriteTree_,t);if(function O5(n,t){const e=n.allWrites.findIndex(d=>d.writeId===t);(0,L.hu)(e>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[e];n.allWrites.splice(e,1);let r=i.visible,s=!1,c=n.allWrites.length-1;for(;r&&c>=0;){const d=n.allWrites[c];d.visible&&(c>=e&&k5(d,i.path)?r=!1:uc(i.path,d.path)&&(s=!0)),c--}return!!r&&(s?(function P5(n){n.visibleWrites=vH(n.allWrites,F5,ti()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=gH(n.visibleWrites,i.path):Ys(i.children,p=>{n.visibleWrites=gH(n.visibleWrites,yr(i.path,p))}),!0))}(n.pendingWriteTree_,t)){let s=new Zi(null);return null!=i.snap?s=s.set(ti(),!0):Ys(i.children,c=>{s=s.set(new yi(c),!0)}),kb(n,new Cx(i.path,s,e))}return[]}function FI(n,t,e){return kb(n,new Gv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function kx(n,t,e,i,r=!1){const s=t._path,c=n.syncPointTree_.get(s);let d=[];if(c&&("default"===t._queryIdentifier||PH(c,t))){const p=function uq(n,t,e,i){const r=t._queryIdentifier,s=[];let c=[];const d=um(n);if("default"===r)for(const[p,m]of n.views.entries())c=c.concat(AH(m,e,i)),SH(m)&&(n.views.delete(p),m.query._queryParams.loadsAllData()||s.push(m.query));else{const p=n.views.get(r);p&&(c=c.concat(AH(p,e,i)),SH(p)&&(n.views.delete(r),p.query._queryParams.loadsAllData()||s.push(p.query)))}return d&&!um(n)&&s.push(new(function aq(){return(0,L.hu)(xx,"Reference.ts has not been loaded"),xx}())(t._repo,t._path)),{removed:s,events:c}}(c,t,e,i);(function lq(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const m=p.removed;if(d=p.events,!r){const y=-1!==m.findIndex(A=>A._queryParams.loadsAllData()),T=n.syncPointTree_.findOnPath(s,(A,x)=>um(x));if(y&&!T){const A=n.syncPointTree_.subtree(s);if(!A.isEmpty()){const x=function wq(n){return n.fold((t,e,i)=>{if(e&&um(e))return[Rx(e)];{let r=[];return e&&(r=OH(e)),Ys(i,(s,c)=>{r=r.concat(c)}),r}})}(A);for(let P=0;P<x.length;++P){const V=x[P],G=V.query,te=UH(n,V);n.listenProvider_.startListening(BI(G),LI(n,G),te.hashFn,te.onComplete)}}}!T&&m.length>0&&!i&&(y?n.listenProvider_.stopListening(BI(t),null):m.forEach(A=>{const x=n.queryToTagMap.get(Fx(A));n.listenProvider_.stopListening(BI(A),x)}))}!function bq(n,t){for(let e=0;e<t.length;++e){const i=t[e];if(!i._queryParams.loadsAllData()){const r=Fx(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,m)}return d}function LH(n,t,e,i){const r=YF(n,i);if(null!=r){const s=ZF(r),c=s.path,d=s.queryId,p=na(c,t);return KF(n,c,new Gv(PF(d),p,e))}return[]}function qF(n,t,e,i=!1){const r=t._path;let s=null,c=!1;n.syncPointTree_.foreachOnPath(r,(A,x)=>{const P=na(A,r);s=s||cm(x,P),c=c||um(x)});let p,d=n.syncPointTree_.get(r);d?(c=c||um(d),s=s||cm(d,ti())):(d=new xH,n.syncPointTree_=n.syncPointTree_.set(r,d)),null!=s?p=!0:(p=!1,s=_n.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((x,P)=>{const V=cm(P,ti());V&&(s=s.updateImmediateChild(x,V))}));const m=PH(d,t);if(!m&&!t._queryParams.loadsAllData()){const A=Fx(t);(0,L.hu)(!n.queryToTagMap.has(A),"View does not exist, but we have a tag");const x=function Dq(){return fq++}();n.queryToTagMap.set(A,x),n.tagToQueryMap.set(x,A)}let T=function cq(n,t,e,i,r,s){const c=RH(n,t,i,r,s);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,c),function rq(n,t){n.eventRegistrations_.push(t)}(c,e),function sq(n,t){const e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Yi,(s,c)=>{i.push(Nb(s,c))}),e.isFullyInitialized()&&i.push(uH(e.getNode())),NH(n,i,e.getNode(),t)}(c,e)}(d,t,e,Sx(n.pendingWriteTree_,r),s,p);if(!m&&!c&&!i){const A=kH(d,t);T=T.concat(function Eq(n,t,e){const i=t._path,r=LI(n,t),s=UH(n,e),c=n.listenProvider_.startListening(BI(t),r,s.hashFn,s.onComplete),d=n.syncPointTree_.subtree(i);if(r)(0,L.hu)(!um(d.value),"If we're adding a query, it shouldn't be shadowed");else{const p=d.fold((m,y,T)=>{if(!An(m)&&y&&um(y))return[Rx(y).query];{let A=[];return y&&(A=A.concat(OH(y).map(x=>x.query))),Ys(T,(x,P)=>{A=A.concat(P)}),A}});for(let m=0;m<p.length;++m){const y=p[m];n.listenProvider_.stopListening(BI(y),LI(n,y))}}return c}(n,t,A))}return T}function Px(n,t,e){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(t,(c,d)=>{const m=cm(d,na(c,t));if(m)return m});return yH(r,t,s,e,!0)}function kb(n,t){return BH(t,n.syncPointTree_,null,Sx(n.pendingWriteTree_,ti()))}function BH(n,t,e,i){if(An(n.path))return VH(n,t,e,i);{const r=t.get(ti());null==e&&null!=r&&(e=cm(r,ti()));let s=[];const c=Sn(n.path),d=n.operationForChild(c),p=t.children.get(c);if(p&&d){const m=e?e.getImmediateChild(c):null,y=bH(i,c);s=s.concat(BH(d,p,m,y))}return r&&(s=s.concat(zF(r,n,i,e))),s}}function VH(n,t,e,i){const r=t.get(ti());null==e&&null!=r&&(e=cm(r,ti()));let s=[];return t.children.inorderTraversal((c,d)=>{const p=e?e.getImmediateChild(c):null,m=bH(i,c),y=n.operationForChild(c);y&&(s=s.concat(VH(y,d,p,m)))}),r&&(s=s.concat(zF(r,n,i,e))),s}function UH(n,t){const e=t.query,i=LI(n,e);return{hashFn:()=>(function tq(n){return n.viewCache_.serverCache.getNode()}(t)||_n.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function _q(n,t,e){const i=YF(n,e);if(i){const r=ZF(i),s=r.path,c=r.queryId,d=na(s,t);return KF(n,s,new RI(PF(c),d))}return[]}(n,e._path,i):function mq(n,t){return kb(n,new RI({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const s=function g4(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}(r,e);return kx(n,e,null,s)}}}}function LI(n,t){const e=Fx(t);return n.queryToTagMap.get(e)}function Fx(n){return n._path.toString()+"$"+n._queryIdentifier}function YF(n,t){return n.tagToQueryMap.get(t)}function ZF(n){const t=n.indexOf("$");return(0,L.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new yi(n.substr(0,t))}}function KF(n,t,e){const i=n.syncPointTree_.get(t);return(0,L.hu)(i,"Missing sync point for query tag that we're tracking"),zF(i,e,Sx(n.pendingWriteTree_,t),null)}function BI(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function hq(){return(0,L.hu)(Ox,"Reference.ts has not been loaded"),Ox}())(n._repo,n._path):n}class QF{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new QF(e)}node(){return this.node_}}class JF{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=yr(this.path_,t);return new JF(this.syncTree_,e)}node(){return Px(this.syncTree_,this.path_)}}const Cq=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},HH=function(n,t,e){return n&&"object"==typeof n?((0,L.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Tq(n[".sv"],t,e):"object"==typeof n[".sv"]?Iq(n[".sv"],t):void(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Tq=function(n,t,e){if("timestamp"===n)return e.timestamp;(0,L.hu)(!1,"Unexpected server value: "+n)},Iq=function(n,t,e){n.hasOwnProperty("increment")||(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,L.hu)(!1,"Unexpected increment value: "+i);const r=t.node();if((0,L.hu)(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const c=r.getValue();return"number"!=typeof c?i:c+i},jH=function(n,t,e,i){return eL(t,new JF(e,n),i)},XF=function(n,t,e){return eL(n,new QF(t),e)};function eL(n,t,e){const i=n.getPriority().val(),r=HH(i,t.getImmediateChild(".priority"),e);let s;if(n.isLeafNode()){const c=n,d=HH(c.getValue(),t,e);return d!==c.getValue()||r!==c.getPriority().val()?new Ab(d,Or(r)):n}{const c=n;return s=c,r!==c.getPriority().val()&&(s=s.updatePriority(new Ab(r))),c.forEachChild(Yi,(d,p)=>{const m=eL(p,t.getImmediateChild(d),e);m!==p&&(s=s.updateImmediateChild(d,m))}),s}}class tL{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function Lx(n,t){let e=t instanceof yi?t:new yi(t),i=n,r=Sn(e);for(;null!==r;){const s=(0,L.DV)(i.node.children,r)||{children:{},childCount:0};i=new tL(r,i,s),e=Bi(e),r=Sn(e)}return i}function Wv(n){return n.node.value}function nL(n,t){n.node.value=t,iL(n)}function GH(n){return n.node.childCount>0}function Bx(n,t){Ys(n.node.children,(e,i)=>{t(new tL(e,n,i))})}function $H(n,t,e,i){e&&!i&&t(n),Bx(n,r=>{$H(r,t,!0,i)}),e&&i&&t(n)}function VI(n){return new yi(null===n.parent?n.name:VI(n.parent)+"/"+n.name)}function iL(n){null!==n.parent&&function Mq(n,t,e){const i=function Sq(n){return void 0===Wv(n)&&!GH(n)}(e),r=(0,L.r3)(n.node.children,t);i&&r?(delete n.node.children[t],n.node.childCount--,iL(n)):!i&&!r&&(n.node.children[t]=e.node,n.node.childCount++,iL(n))}(n.parent,n.name,n)}const Nq=/[\[\].#$\/\u0000-\u001F\u007F]/,xq=/[\[\].#$\u0000-\u001F\u007F]/,rL=10485760,Vx=function(n){return"string"==typeof n&&0!==n.length&&!Nq.test(n)},zH=function(n){return"string"==typeof n&&0!==n.length&&!xq.test(n)},UI=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!hx(n)||n&&"object"==typeof n&&(0,L.r3)(n,".sv")},Kd=function(n,t,e,i){i&&void 0===t||HI((0,L.gK)(n,"value"),t,e)},HI=function(n,t,e){const i=e instanceof yi?new Y4(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+Hv(i));if("function"==typeof t)throw new Error(n+"contains a function "+Hv(i)+" with contents = "+t.toString());if(hx(t))throw new Error(n+"contains "+t.toString()+" "+Hv(i));if("string"==typeof t&&t.length>rL/3&&(0,L.ug)(t)>rL)throw new Error(n+"contains a string greater than "+rL+" utf8 bytes "+Hv(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let r=!1,s=!1;if(Ys(t,(c,d)=>{if(".value"===c)r=!0;else if(".priority"!==c&&".sv"!==c&&(s=!0,!Vx(c)))throw new Error(n+" contains an invalid key ("+c+") "+Hv(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Z4(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,L.ug)(t),tH(n)})(i,c),HI(n,d,i),function K4(n){const t=n.parts_.pop();n.byteLength_-=(0,L.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+Hv(i)+" in addition to actual children.")}},WH=function(n,t,e,i){if(i&&void 0===t)return;const r=(0,L.gK)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");const s=[];Ys(t,(c,d)=>{const p=new yi(c);if(HI(r,d,yr(e,p)),".priority"===wF(p)&&!UI(d))throw new Error(r+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(p)}),function(n,t){let e,i;for(e=0;e<t.length;e++){i=t[e];const s=TI(i);for(let c=0;c<s.length;c++)if((".priority"!==s[c]||c!==s.length-1)&&!Vx(s[c]))throw new Error(n+"contains an invalid key ("+s[c]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(q4);let r=null;for(e=0;e<t.length;e++){if(i=t[e],null!==r&&uc(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},sL=function(n,t,e){if(!e||void 0!==t){if(hx(t))throw new Error((0,L.gK)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!UI(t))throw new Error((0,L.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},jI=function(n,t,e,i){if(!(i&&void 0===e||Vx(e)))throw new Error((0,L.gK)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},GI=function(n,t,e,i){if(!(i&&void 0===e||zH(e)))throw new Error((0,L.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},kq=function(n,t,e,i){e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),GI(n,t,e,i)},dc=function(n,t){if(".info"===Sn(t))throw new Error(n+" failed = Can't modify data under /.info/")},qH=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!Vx(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),zH(n)}(e))throw new Error((0,L.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Pq{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ux(n,t){let e=null;for(let i=0;i<t.length;i++){const r=t[i],s=r.getPath();null!==e&&!bF(s,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:s}),e.events.push(r)}e&&n.eventLists_.push(e)}function YH(n,t,e){Ux(n,e),ZH(n,i=>bF(i,t))}function ul(n,t,e){Ux(n,e),ZH(n,i=>uc(i,t)||uc(t,i))}function ZH(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(t(r.path)?(Fq(n.eventLists_[i]),n.eventLists_[i]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function Fq(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const i=e.getEventRunner();Vv&&qs("event: "+e.toString()),Ib(i)}}}const KH="repo_interrupt",Lq=25;class Bq{constructor(t,e,i,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Pq,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ex(),this.transactionQueueTree_=new tL,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function QH(n){const e=n.infoData_.getNode(new yi(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function $I(n){return Cq({timestamp:QH(n)})}function JH(n,t,e,i,r){n.dataUpdateCount++;const s=new yi(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let c=[];if(r)if(i){const p=(0,L.UI)(e,m=>Or(m));c=function vq(n,t,e,i){const r=YF(n,i);if(r){const s=ZF(r),c=s.path,d=s.queryId,p=na(c,t),m=Zi.fromObject(e);return KF(n,c,new Rb(PF(d),p,m))}return[]}(n.serverSyncTree_,s,p,r)}else{const p=Or(e);c=LH(n.serverSyncTree_,s,p,r)}else if(i){const p=(0,L.UI)(e,m=>Or(m));c=function gq(n,t,e){const i=Zi.fromObject(e);return kb(n,new Rb({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,s,p)}else{const p=Or(e);c=FI(n.serverSyncTree_,s,p)}let d=s;c.length>0&&(d=Fb(n,s)),ul(n.eventQueue_,d,c)}function XH(n,t){oL(n,"connected",t),!1===t&&function Gq(n){Pb(n,"onDisconnectEvents");const t=$I(n),e=Ex();RF(n.onDisconnect_,ti(),(r,s)=>{const c=jH(r,s,n.serverSyncTree_,t);xb(e,r,c)});let i=[];RF(e,ti(),(r,s)=>{i=i.concat(FI(n.serverSyncTree_,r,s));const c=uL(n,r);Fb(n,c)}),n.onDisconnect_=Ex(),ul(n.eventQueue_,ti(),i)}(n)}function oL(n,t,e){const i=new yi("/.info/"+t),r=Or(e);n.infoData_.updateSnapshot(i,r);const s=FI(n.infoSyncTree_,i,r);ul(n.eventQueue_,i,s)}function Hx(n){return n.nextWriteId_++}function aL(n,t,e,i,r){Pb(n,"set",{path:t.toString(),value:e,priority:i});const s=$I(n),c=Or(e,i),d=Px(n.serverSyncTree_,t),p=XF(c,d,s),m=Hx(n),y=WF(n.serverSyncTree_,t,p,m,!0);Ux(n.eventQueue_,y),n.server_.put(t.toString(),c.val(!0),(A,x)=>{const P="ok"===A;P||Fo("set at "+t+" failed: "+A);const V=dm(n.serverSyncTree_,m,!P);ul(n.eventQueue_,t,V),hm(0,r,A,x)});const T=uL(n,t);Fb(n,T),ul(n.eventQueue_,T,[])}function $q(n,t,e){n.server_.onDisconnectCancel(t.toString(),(i,r)=>{"ok"===i&&xF(n.onDisconnect_,t),hm(0,e,i,r)})}function ej(n,t,e,i){const r=Or(e);n.server_.onDisconnectPut(t.toString(),r.val(!0),(s,c)=>{"ok"===s&&xb(n.onDisconnect_,t,r),hm(0,i,s,c)})}function lL(n,t,e){let i;i=".info"===Sn(t._path)?kx(n.infoSyncTree_,t,e):kx(n.serverSyncTree_,t,e),YH(n.eventQueue_,t._path,i)}function tj(n){n.persistentConnection_&&n.persistentConnection_.interrupt(KH)}function Pb(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),qs(e,...t)}function hm(n,t,e,i){t&&Ib(()=>{if("ok"===e)t(null);else{const r=(e||"error").toUpperCase();let s=r;i&&(s+=": "+i);const c=new Error(s);c.code=r,t(c)}})}function cL(n,t,e){return Px(n.serverSyncTree_,t,e)||_n.EMPTY_NODE}function jx(n,t=n.transactionQueueTree_){if(t||Gx(n,t),Wv(t)){const e=ij(n,t);(0,L.hu)(e.length>0,"Sending zero length transaction queue"),e.every(r=>0===r.status)&&function Kq(n,t,e){const i=e.map(m=>m.currentWriteId),r=cL(n,t,i);let s=r;const c=r.hash();for(let m=0;m<e.length;m++){const y=e[m];(0,L.hu)(0===y.status,"tryToSendTransactionQueue_: items in queue should all be run."),y.status=1,y.retryCount++;const T=na(t,y.path);s=s.updateChild(T,y.currentOutputSnapshotRaw)}const d=s.val(!0),p=t;n.server_.put(p.toString(),d,m=>{Pb(n,"transaction put response",{path:p.toString(),status:m});let y=[];if("ok"===m){const T=[];for(let A=0;A<e.length;A++)e[A].status=2,y=y.concat(dm(n.serverSyncTree_,e[A].currentWriteId)),e[A].onComplete&&T.push(()=>e[A].onComplete(null,!0,e[A].currentOutputSnapshotResolved)),e[A].unwatcher();Gx(n,Lx(n.transactionQueueTree_,t)),jx(n,n.transactionQueueTree_),ul(n.eventQueue_,t,y);for(let A=0;A<T.length;A++)Ib(T[A])}else{if("datastale"===m)for(let T=0;T<e.length;T++)e[T].status=3===e[T].status?4:0;else{Fo("transaction at "+p.toString()+" failed: "+m);for(let T=0;T<e.length;T++)e[T].status=4,e[T].abortReason=m}Fb(n,t)}},c)}(n,VI(t),e)}else GH(t)&&Bx(t,e=>{jx(n,e)})}function Fb(n,t){const e=nj(n,t),i=VI(e);return function Qq(n,t,e){if(0===t.length)return;const i=[];let r=[];const c=t.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<t.length;d++){const p=t[d],m=na(e,p.path);let T,y=!1;if((0,L.hu)(null!==m,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)y=!0,T=p.abortReason,r=r.concat(dm(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=Lq)y=!0,T="maxretry",r=r.concat(dm(n.serverSyncTree_,p.currentWriteId,!0));else{const A=cL(n,p.path,c);p.currentInputSnapshot=A;const x=t[d].update(A.val());if(void 0!==x){HI("transaction failed: Data returned ",x,p.path);let P=Or(x);"object"==typeof x&&null!=x&&(0,L.r3)(x,".priority")||(P=P.updatePriority(A.getPriority()));const G=p.currentWriteId,te=$I(n),se=XF(P,A,te);p.currentOutputSnapshotRaw=P,p.currentOutputSnapshotResolved=se,p.currentWriteId=Hx(n),c.splice(c.indexOf(G),1),r=r.concat(WF(n.serverSyncTree_,p.path,se,p.currentWriteId,p.applyLocally)),r=r.concat(dm(n.serverSyncTree_,G,!0))}else y=!0,T="nodata",r=r.concat(dm(n.serverSyncTree_,p.currentWriteId,!0))}ul(n.eventQueue_,e,r),r=[],y&&(t[d].status=2,setTimeout(t[d].unwatcher,Math.floor(0)),t[d].onComplete&&i.push("nodata"===T?()=>t[d].onComplete(null,!1,t[d].currentInputSnapshot):()=>t[d].onComplete(new Error(T),!1,null)))}Gx(n,n.transactionQueueTree_);for(let d=0;d<i.length;d++)Ib(i[d]);jx(n,n.transactionQueueTree_)}(n,ij(n,e),i),i}function nj(n,t){let e,i=n.transactionQueueTree_;for(e=Sn(t);null!==e&&void 0===Wv(i);)i=Lx(i,e),e=Sn(t=Bi(t));return i}function ij(n,t){const e=[];return rj(n,t,e),e.sort((i,r)=>i.order-r.order),e}function rj(n,t,e){const i=Wv(t);if(i)for(let r=0;r<i.length;r++)e.push(i[r]);Bx(t,r=>{rj(n,r,e)})}function Gx(n,t){const e=Wv(t);if(e){let i=0;for(let r=0;r<e.length;r++)2!==e[r].status&&(e[i]=e[r],i++);e.length=i,nL(t,e.length>0?e:void 0)}Bx(t,i=>{Gx(n,i)})}function uL(n,t){const e=VI(nj(n,t)),i=Lx(n.transactionQueueTree_,t);return function Aq(n,t,e){let i=e?n:n.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,r=>{dL(n,r)}),dL(n,i),$H(i,r=>{dL(n,r)}),e}function dL(n,t){const e=Wv(t);if(e){const i=[];let r=[],s=-1;for(let c=0;c<e.length;c++)3===e[c].status||(1===e[c].status?((0,L.hu)(s===c-1,"All SENT items should be at beginning of queue."),s=c,e[c].status=3,e[c].abortReason="set"):((0,L.hu)(0===e[c].status,"Unexpected transaction status in abort"),e[c].unwatcher(),r=r.concat(dm(n.serverSyncTree_,e[c].currentWriteId,!0)),e[c].onComplete&&i.push(e[c].onComplete.bind(null,new Error("set"),!1,null))));-1===s?nL(t,void 0):e.length=s+1,ul(n.eventQueue_,VI(t),r);for(let c=0;c<i.length;c++)Ib(i[c])}}const hL=function(n,t){const e=e8(n),i=e.namespace;return"firebase.com"===e.domain&&qd(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==e.domain&&qd("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Fo("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new pF(e.host,e.secure,i,"ws"===e.scheme||"wss"===e.scheme,t,"",i!==e.subdomain),path:new yi(e.pathString)}},e8=function(n){let t="",e="",i="",r="",s="",c=!0,d="https",p=443;if("string"==typeof n){let m=n.indexOf("//");m>=0&&(d=n.substring(0,m-1),n=n.substring(m+2));let y=n.indexOf("/");-1===y&&(y=n.length);let T=n.indexOf("?");-1===T&&(T=n.length),t=n.substring(0,Math.min(y,T)),y<T&&(r=function Jq(n){let t="";const e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let r=e[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}(n.substring(y,T)));const A=function Xq(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const i=e.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Fo(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,T)));m=t.indexOf(":"),m>=0?(c="https"===d||"wss"===d,p=parseInt(t.substring(m+1),10)):m=t.length;const x=t.slice(0,m);if("localhost"===x.toLowerCase())e="localhost";else if(x.split(".").length<=2)e=x;else{const P=t.indexOf(".");i=t.substring(0,P).toLowerCase(),e=t.substring(P+1),s=i}"ns"in A&&(s=A.ns)}return{host:t,port:p,domain:e,subdomain:i,secure:c,scheme:d,pathString:r,namespace:s}},sj="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",t8=function(){let n=0;const t=[];return function(e){const i=e===n;let r;n=e;const s=new Array(8);for(r=7;r>=0;r--)s[r]=sj.charAt(e%64),e=Math.floor(e/64);(0,L.hu)(0===e,"Cannot push at time == 0");let c=s.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)c+=sj.charAt(t[r]);return(0,L.hu)(20===c.length,"nextPushId: Length should be 20."),c}}();class oj{constructor(t,e,i,r){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=r}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,L.Wl)(this.snapshot.exportVal())}}class aj{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class fL{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,L.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class lj{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new L.BH;return $q(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){dc("OnDisconnect.remove",this._path);const t=new L.BH;return ej(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){dc("OnDisconnect.set",this._path),Kd("OnDisconnect.set",t,this._path,!1);const e=new L.BH;return ej(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){dc("OnDisconnect.setWithPriority",this._path),Kd("OnDisconnect.setWithPriority",t,this._path,!1),sL("OnDisconnect.setWithPriority",e,!1);const i=new L.BH;return function zq(n,t,e,i,r){const s=Or(e,i);n.server_.onDisconnectPut(t.toString(),s.val(!0),(c,d)=>{"ok"===c&&xb(n.onDisconnect_,t,s),hm(0,r,c,d)})}(this._repo,this._path,t,e,i.wrapCallback(()=>{})),i.promise}update(t){dc("OnDisconnect.update",this._path),WH("OnDisconnect.update",t,this._path,!1);const e=new L.BH;return function Wq(n,t,e,i){if((0,L.xb)(e))return qs("onDisconnect().update() called with empty data.  Don't do anything."),void hm(0,i,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(r,s)=>{"ok"===r&&Ys(e,(c,d)=>{const p=Or(d);xb(n.onDisconnect_,yr(t,c),p)}),hm(0,i,r,s)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class Ia{constructor(t,e,i,r){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=r}get key(){return An(this._path)?null:wF(this._path)}get ref(){return new hc(this._repo,this._path)}get _queryIdentifier(){const t=hH(this._queryParams),e=hF(t);return"{}"===e?"default":e}get _queryObject(){return hH(this._queryParams)}isEqual(t){if(!((t=(0,L.m9)(t))instanceof Ia))return!1;const e=this._repo===t._repo,i=bF(this._path,t._path);return e&&i&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function W4(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function $x(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function fm(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===Yd){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==rm)throw new Error(i);if("string"!=typeof t)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==Uf)throw new Error(i);if("string"!=typeof e)throw new Error(r)}}else if(n.getIndex()===Yi){if(null!=t&&!UI(t)||null!=e&&!UI(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,L.hu)(n.getIndex()instanceof IF||n.getIndex()===SF,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function zx(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class hc extends Ia{constructor(t,e){super(t,e,new wx,!1)}get parent(){const t=eH(this._path);return null===t?null:new hc(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class qv{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new yi(t),i=Yv(this.ref,t);return new qv(this._node.getChild(e),i,Yi)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>t(new qv(r,Yv(this.ref,i),Yi)))}hasChild(t){const e=new yi(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function cj(n,t){return(n=(0,L.m9)(n))._checkNotDeleted("ref"),void 0!==t?Yv(n._root,t):n._root}function uj(n,t){(n=(0,L.m9)(n))._checkNotDeleted("refFromURL");const e=hL(t,n._repo.repoInfo_.nodeAdmin);qH("refFromURL",e);const i=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&qd("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),cj(n,e.path.toString())}function Yv(n,t){return null===Sn((n=(0,L.m9)(n))._path)?kq("child","path",t,!1):GI("child","path",t,!1),new hc(n._repo,yr(n._path,t))}function pL(n,t){n=(0,L.m9)(n),dc("set",n._path),Kd("set",t,n._path,!1);const e=new L.BH;return aL(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function o8(n,t){WH("update",t,n._path,!1);const e=new L.BH;return function jq(n,t,e,i){Pb(n,"update",{path:t.toString(),value:e});let r=!0;const s=$I(n),c={};if(Ys(e,(d,p)=>{r=!1,c[d]=jH(yr(t,d),Or(p),n.serverSyncTree_,s)}),r)qs("update() called with empty data.  Don't do anything."),hm(0,i,"ok",void 0);else{const d=Hx(n),p=function pq(n,t,e,i){!function x5(n,t,e,i){(0,L.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:i,visible:!0}),n.visibleWrites=LF(n.visibleWrites,t,e),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i);const r=Zi.fromObject(e);return kb(n,new Rb({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r))}(n.serverSyncTree_,t,c,d);Ux(n.eventQueue_,p),n.server_.merge(t.toString(),e,(m,y)=>{const T="ok"===m;T||Fo("update at "+t+" failed: "+m);const A=dm(n.serverSyncTree_,d,!T),x=A.length>0?Fb(n,t):t;ul(n.eventQueue_,x,A),hm(0,i,m,y)}),Ys(e,m=>{const y=uL(n,yr(t,m));Fb(n,y)}),ul(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function a8(n){n=(0,L.m9)(n);const t=new fL(()=>{}),e=new zI(t);return function Hq(n,t,e){const i=function yq(n,t){const e=t._path;let i=null;n.syncPointTree_.foreachOnPath(e,(m,y)=>{const T=na(m,e);i=i||cm(y,T)});let r=n.syncPointTree_.get(e);r?i=i||cm(r,ti()):(r=new xH,n.syncPointTree_=n.syncPointTree_.set(e,r));const s=null!=i,c=s?new am(i,!0,!1):null;return function nq(n){return Ix(n.viewCache_)}(RH(r,t,Sx(n.pendingWriteTree_,t._path),s?c.getNode():_n.EMPTY_NODE,s))}(n.serverSyncTree_,t);return null!=i?Promise.resolve(i):n.server_.get(t).then(r=>{const s=Or(r).withIndex(t._queryParams.getIndex());let c;if(qF(n.serverSyncTree_,t,e,!0),t._queryParams.loadsAllData())c=FI(n.serverSyncTree_,t._path,s);else{const d=LI(n.serverSyncTree_,t);c=LH(n.serverSyncTree_,t._path,s,d)}return ul(n.eventQueue_,t._path,c),kx(n.serverSyncTree_,t,e,null,!0),s},r=>(Pb(n,"get for query "+(0,L.Wl)(t)+" failed: "+r),Promise.reject(new Error(r))))}(n._repo,n,e).then(i=>new qv(i,new hc(n._repo,n._path),n._queryParams.getIndex()))}class zI{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const i=e._queryParams.getIndex();return new oj("value",this,new qv(t.snapshotNode,new hc(e._repo,e._path),i))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new aj(this,t,e):null}matches(t){return t instanceof zI&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Wx{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new aj(this,t,e):null}createEvent(t,e){(0,L.hu)(null!=t.childName,"Child events should have a childName.");const i=Yv(new hc(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new oj(t.type,this,new qv(t.snapshotNode,i,r),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof Wx&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function WI(n,t,e,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const p=e,m=(y,T)=>{lL(n._repo,n,d),p(y,T)};m.userCallback=e.userCallback,m.context=e.context,e=m}const c=new fL(e,s||void 0),d="value"===t?new zI(c):new Wx(t,c);return function qq(n,t,e){let i;i=".info"===Sn(t._path)?qF(n.infoSyncTree_,t,e):qF(n.serverSyncTree_,t,e),YH(n.eventQueue_,t._path,i)}(n._repo,n,d),()=>lL(n._repo,n,d)}function gL(n,t,e,i){return WI(n,"value",t,e,i)}function dj(n,t,e,i){return WI(n,"child_added",t,e,i)}function hj(n,t,e,i){return WI(n,"child_changed",t,e,i)}function fj(n,t,e,i){return WI(n,"child_moved",t,e,i)}function pj(n,t,e,i){return WI(n,"child_removed",t,e,i)}function gj(n,t,e){let i=null;const r=e?new fL(e):null;"value"===t?i=new zI(r):t&&(i=new Wx(t,r)),lL(n._repo,n,i)}class _u{}class mj extends _u{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Kd("endAt",this._value,t._path,!0);const e=NF(t._queryParams,this._value,this._key);if(zx(e),fm(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ia(t._repo,t._path,e,t._orderByCalled)}}class c8 extends _u{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Kd("endBefore",this._value,t._path,!1);const e=function v5(n,t,e){let i;return i=NF(n,t,n.index_===Yd||e?e:rm),i.endBeforeSet_=!0,i}(t._queryParams,this._value,this._key);if(zx(e),fm(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ia(t._repo,t._path,e,t._orderByCalled)}}class _j extends _u{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Kd("startAt",this._value,t._path,!0);const e=MF(t._queryParams,this._value,this._key);if(zx(e),fm(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ia(t._repo,t._path,e,t._orderByCalled)}}class h8 extends _u{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Kd("startAfter",this._value,t._path,!1);const e=function _5(n,t,e){let i;return i=MF(n,t,n.index_===Yd||e?e:Uf),i.startAfterSet_=!0,i}(t._queryParams,this._value,this._key);if(zx(e),fm(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ia(t._repo,t._path,e,t._orderByCalled)}}class p8 extends _u{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ia(t._repo,t._path,function g5(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class m8 extends _u{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ia(t._repo,t._path,function m5(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class v8 extends _u{constructor(t){super(),this._path=t}_apply(t){$x(t,"orderByChild");const e=new yi(this._path);if(An(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new IF(e),r=bx(t._queryParams,i);return fm(r),new Ia(t._repo,t._path,r,!0)}}class w8 extends _u{_apply(t){$x(t,"orderByKey");const e=bx(t._queryParams,Yd);return fm(e),new Ia(t._repo,t._path,e,!0)}}class D8 extends _u{_apply(t){$x(t,"orderByPriority");const e=bx(t._queryParams,Yi);return fm(e),new Ia(t._repo,t._path,e,!0)}}class C8 extends _u{_apply(t){$x(t,"orderByValue");const e=bx(t._queryParams,SF);return fm(e),new Ia(t._repo,t._path,e,!0)}}class I8 extends _u{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(Kd("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new mj(this._value,this._key)._apply(new _j(this._value,this._key)._apply(t))}}function vu(n,...t){let e=(0,L.m9)(n);for(const i of t)e=i._apply(e);return e}(function oq(n){(0,L.hu)(!xx,"__referenceConstructor has already been defined"),xx=n})(hc),function dq(n){(0,L.hu)(!Ox,"__referenceConstructor has already been defined"),Ox=n}(hc);const mL={};function yj(n,t,e,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||qd("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),qs("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,m,c=hL(s,r),d=c.repoInfo;typeof process<"u"&&process.env&&(m=process.env.FIREBASE_DATABASE_EMULATOR_HOST),m?(p=!0,s=`http://${m}?ns=${d.namespace}`,c=hL(s,r),d=c.repoInfo):p=!c.repoInfo.secure;const y=r&&p?new CI(CI.OWNER):new b4(n.name,n.options,t);qH("Invalid Firebase Database URL",c),An(c.path)||qd("Database URL must point to the root of a Firebase Database (not including a child path).");const T=function x8(n,t,e,i){let r=mL[t.name];r||(r={},mL[t.name]=r);let s=r[n.toURLString()];return s&&qd("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Bq(n,false,e,i),r[n.toURLString()]=s,s}(d,n,y,new w4(n.name,e));return new O8(T,n)}class O8{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Vq(n,t,e){if(n.stats_=_F(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Dx(n.repoInfo_,(i,r,s,c)=>{JH(n,i,r,s,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>XH(n,!0),0);else{if(typeof e<"u"&&null!==e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,L.Wl)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new jv(n.repoInfo_,t,(i,r,s,c)=>{JH(n,i,r,s,c)},i=>{XH(n,i)},i=>{!function Uq(n,t){Ys(t,(e,i)=>{oL(n,e,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function C4(n,t){const e=n.toString();return mF[e]||(mF[e]=t()),mF[e]}(n.repoInfo_,()=>new C5(n.stats_,n.server_)),n.infoData_=new y5,n.infoSyncTree_=new FH({startListening:(i,r,s,c)=>{let d=[];const p=n.infoData_.getNode(i._path);return p.isEmpty()||(d=FI(n.infoSyncTree_,i._path,p),setTimeout(()=>{c("ok")},0)),d},stopListening:()=>{}}),oL(n,"connected",!1),n.serverSyncTree_=new FH({startListening:(i,r,s,c)=>(n.server_.listen(i,s,r,(d,p)=>{const m=c(d,p);ul(n.eventQueue_,i._path,m)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new hc(this._repo,ti())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function N8(n,t){const e=mL[t];(!e||e[n.key]!==n)&&qd(`Database ${t}(${n.repoInfo_}) has already been deleted.`),tj(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&qd("Cannot call "+t+" on a deleted database.")}}function wj(){jU.IS_TRANSPORT_INITIALIZED&&Fo("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function k8(){wj(),sm.forceDisallow()}function P8(){wj(),Sb.forceDisallow(),sm.forceAllow()}function B8(n,t){DU(n,t)}const U8={".sv":"timestamp"};class G8{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}jv.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},jv.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},function V8(n){_U(gd.SDK_VERSION),(0,gd._registerComponent)(new mr.wA("database",(t,{instanceIdentifier:e})=>yj(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,gd.registerVersion)(gU,"0.14.4",n),(0,gd.registerVersion)(gU,"0.14.4","esm2017")}();const q8=new Hr.Yd("@firebase/database-compat"),Dj=function(n){q8.warn("FIREBASE WARNING: "+n)};class K8{constructor(t){this._delegate=t}cancel(t){(0,L.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,L.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),i=>t(i)),e}remove(t){(0,L.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,L.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),i=>t(i)),e}set(t,e){(0,L.Dv)("OnDisconnect.set",1,2,arguments.length),(0,L.Wj)("OnDisconnect.set","onComplete",e,!0);const i=this._delegate.set(t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,L.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,L.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(t,e);return i&&r.then(()=>i(null),s=>i(s)),r}update(t,e){if((0,L.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,Dj("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,L.Wj)("OnDisconnect.update","onComplete",e,!0);const i=this._delegate.update(t);return e&&i.then(()=>e(null),r=>e(r)),i}}class Q8{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,L.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class pm{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,L.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,L.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,L.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,L.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,L.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),GI("DataSnapshot.child","path",t,!1),new pm(this._database,this._delegate.child(t))}hasChild(t){return(0,L.Dv)("DataSnapshot.hasChild",1,1,arguments.length),GI("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,L.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,L.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,L.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new pm(this._database,e)))}hasChildren(){return(0,L.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,L.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,L.Dv)("DataSnapshot.ref",0,0,arguments.length),new dl(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class uo{constructor(t,e){this.database=t,this._delegate=e}on(t,e,i,r){var s;(0,L.Dv)("Query.on",2,4,arguments.length),(0,L.Wj)("Query.on","callback",e,!1);const c=uo.getCancelAndContextArgs_("Query.on",i,r),d=(m,y)=>{e.call(c.context,new pm(this.database,m),y)};d.userCallback=e,d.context=c.context;const p=null===(s=c.cancel)||void 0===s?void 0:s.bind(c.context);switch(t){case"value":return gL(this._delegate,d,p),e;case"child_added":return dj(this._delegate,d,p),e;case"child_removed":return pj(this._delegate,d,p),e;case"child_changed":return hj(this._delegate,d,p),e;case"child_moved":return fj(this._delegate,d,p),e;default:throw new Error((0,L.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,i){if((0,L.Dv)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,L.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,L.Wj)("Query.off","callback",e,!0),(0,L.lb)("Query.off","context",i,!0),e){const r=()=>{};r.userCallback=e,r.context=i,gj(this._delegate,t,r)}else gj(this._delegate,t)}get(){return a8(this._delegate).then(t=>new pm(this.database,t))}once(t,e,i,r){(0,L.Dv)("Query.once",1,4,arguments.length),(0,L.Wj)("Query.once","callback",e,!0);const s=uo.getCancelAndContextArgs_("Query.once",i,r),c=new L.BH,d=(m,y)=>{const T=new pm(this.database,m);e&&e.call(s.context,T,y),c.resolve(T)};d.userCallback=e,d.context=s.context;const p=m=>{s.cancel&&s.cancel.call(s.context,m),c.reject(m)};switch(t){case"value":gL(this._delegate,d,p,{onlyOnce:!0});break;case"child_added":dj(this._delegate,d,p,{onlyOnce:!0});break;case"child_removed":pj(this._delegate,d,p,{onlyOnce:!0});break;case"child_changed":hj(this._delegate,d,p,{onlyOnce:!0});break;case"child_moved":fj(this._delegate,d,p,{onlyOnce:!0});break;default:throw new Error((0,L.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(t){return(0,L.Dv)("Query.limitToFirst",1,1,arguments.length),new uo(this.database,vu(this._delegate,function g8(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new p8(n)}(t)))}limitToLast(t){return(0,L.Dv)("Query.limitToLast",1,1,arguments.length),new uo(this.database,vu(this._delegate,function _8(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new m8(n)}(t)))}orderByChild(t){return(0,L.Dv)("Query.orderByChild",1,1,arguments.length),new uo(this.database,vu(this._delegate,function y8(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return GI("orderByChild","path",n,!1),new v8(n)}(t)))}orderByKey(){return(0,L.Dv)("Query.orderByKey",0,0,arguments.length),new uo(this.database,vu(this._delegate,function b8(){return new w8}()))}orderByPriority(){return(0,L.Dv)("Query.orderByPriority",0,0,arguments.length),new uo(this.database,vu(this._delegate,function E8(){return new D8}()))}orderByValue(){return(0,L.Dv)("Query.orderByValue",0,0,arguments.length),new uo(this.database,vu(this._delegate,function T8(){return new C8}()))}startAt(t=null,e){return(0,L.Dv)("Query.startAt",0,2,arguments.length),new uo(this.database,vu(this._delegate,function d8(n=null,t){return jI("startAt","key",t,!0),new _j(n,t)}(t,e)))}startAfter(t=null,e){return(0,L.Dv)("Query.startAfter",0,2,arguments.length),new uo(this.database,vu(this._delegate,function f8(n,t){return jI("startAfter","key",t,!0),new h8(n,t)}(t,e)))}endAt(t=null,e){return(0,L.Dv)("Query.endAt",0,2,arguments.length),new uo(this.database,vu(this._delegate,function l8(n,t){return jI("endAt","key",t,!0),new mj(n,t)}(t,e)))}endBefore(t=null,e){return(0,L.Dv)("Query.endBefore",0,2,arguments.length),new uo(this.database,vu(this._delegate,function u8(n,t){return jI("endBefore","key",t,!0),new c8(n,t)}(t,e)))}equalTo(t,e){return(0,L.Dv)("Query.equalTo",1,2,arguments.length),new uo(this.database,vu(this._delegate,function S8(n,t){return jI("equalTo","key",t,!0),new I8(n,t)}(t,e)))}toString(){return(0,L.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,L.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,L.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof uo))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,i){const r={cancel:void 0,context:void 0};if(e&&i)r.cancel=e,(0,L.Wj)(t,"cancel",r.cancel,!0),r.context=i,(0,L.lb)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,L.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r}get ref(){return new dl(this.database,new hc(this._delegate._repo,this._delegate._path))}}class dl extends uo{constructor(t,e){super(t,new Ia(e._repo,e._path,new wx,!1)),this.database=t,this._delegate=e}getKey(){return(0,L.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,L.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new dl(this.database,Yv(this._delegate,t))}getParent(){(0,L.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new dl(this.database,t):null}getRoot(){return(0,L.Dv)("Reference.root",0,0,arguments.length),new dl(this.database,this._delegate.root)}set(t,e){(0,L.Dv)("Reference.set",1,2,arguments.length),(0,L.Wj)("Reference.set","onComplete",e,!0);const i=pL(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}update(t,e){if((0,L.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,Dj("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}dc("Reference.update",this._delegate._path),(0,L.Wj)("Reference.update","onComplete",e,!0);const i=o8(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,L.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,L.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function s8(n,t,e){if(dc("setWithPriority",n._path),Kd("setWithPriority",t,n._path,!1),sL("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new L.BH;return aL(n._repo,n._path,t,e,i.wrapCallback(()=>{})),i.promise}(this._delegate,t,e);return i&&r.then(()=>i(null),s=>i(s)),r}remove(t){(0,L.Dv)("Reference.remove",0,1,arguments.length),(0,L.Wj)("Reference.remove","onComplete",t,!0);const e=function i8(n){return dc("remove",n._path),pL(n,null)}(this._delegate);return t&&e.then(()=>t(null),i=>t(i)),e}transaction(t,e,i){(0,L.Dv)("Reference.transaction",1,3,arguments.length),(0,L.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,L.Wj)("Reference.transaction","onComplete",e,!0),function(n,t,e,i){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,L.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function $8(n,t,e){var i;if(n=(0,L.m9)(n),dc("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=e?.applyLocally)||void 0===i||i,s=new L.BH,d=gL(n,()=>{});return function Zq(n,t,e,i,r,s){Pb(n,"transaction on "+t);const c={path:t,update:e,onComplete:i,status:null,order:yU(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=cL(n,t,void 0);c.currentInputSnapshot=d;const p=c.update(d.val());if(void 0===p)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{HI("transaction failed: Data returned ",p,c.path),c.status=0;const m=Lx(n.transactionQueueTree_,t),y=Wv(m)||[];let T;y.push(c),nL(m,y),"object"==typeof p&&null!==p&&(0,L.r3)(p,".priority")?(T=(0,L.DV)(p,".priority"),(0,L.hu)(UI(T),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):T=(Px(n.serverSyncTree_,t)||_n.EMPTY_NODE).getPriority().val();const A=$I(n),x=Or(p,T),P=XF(x,d,A);c.currentOutputSnapshotRaw=x,c.currentOutputSnapshotResolved=P,c.currentWriteId=Hx(n);const V=WF(n.serverSyncTree_,t,P,c.currentWriteId,c.applyLocally);ul(n.eventQueue_,t,V),jx(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(p,m,y)=>{let T=null;p?s.reject(p):(T=new qv(y,new hc(n._repo,n._path),Yi),s.resolve(new G8(m,T)))},d,r),s.promise}(this._delegate,t,{applyLocally:i}).then(s=>new Q8(s.committed,new pm(this.database,s.snapshot)));return e&&r.then(s=>e(null,s.committed,s.snapshot),s=>e(s,!1,null)),r}setPriority(t,e){(0,L.Dv)("Reference.setPriority",1,2,arguments.length),(0,L.Wj)("Reference.setPriority","onComplete",e,!0);const i=function r8(n,t){n=(0,L.m9)(n),dc("setPriority",n._path),sL("setPriority",t,!1);const e=new L.BH;return aL(n._repo,yr(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}push(t,e){(0,L.Dv)("Reference.push",0,2,arguments.length),(0,L.Wj)("Reference.push","onComplete",e,!0);const i=function n8(n,t){n=(0,L.m9)(n),dc("push",n._path),Kd("push",t,n._path,!0);const e=QH(n._repo),i=t8(e),r=Yv(n,i),s=Yv(n,i);let c;return c=null!=t?pL(s,t).then(()=>s):Promise.resolve(s),r.then=c.then.bind(c),r.catch=c.then.bind(c,void 0),r}(this._delegate,t),r=i.then(c=>new dl(this.database,c));e&&r.then(()=>e(null),c=>e(c));const s=new dl(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return dc("Reference.onDisconnect",this._delegate._path),new K8(new lj(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class qI{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:k8,forceLongPolling:P8}}useEmulator(t,e,i={}){!function bj(n,t,e,i={}){(n=(0,L.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&qd("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&qd('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new CI(CI.OWNER);else if(i.mockUserToken){const c="string"==typeof i.mockUserToken?i.mockUserToken:(0,L.Sg)(i.mockUserToken,n.app.options.projectId);s=new CI(c)}!function M8(n,t,e,i){n.repoInfo_=new pF(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}(r,t,e,s)}(this._delegate,t,e,i)}ref(t){if((0,L.Dv)("database.ref",0,1,arguments.length),t instanceof dl){const e=uj(this._delegate,t.toString());return new dl(this,e)}{const e=cj(this._delegate,t);return new dl(this,e)}}refFromURL(t){(0,L.Dv)("database.refFromURL",1,1,arguments.length);const i=uj(this._delegate,t);return new dl(this,i)}goOffline(){return(0,L.Dv)("database.goOffline",0,0,arguments.length),function F8(n){(n=(0,L.m9)(n))._checkNotDeleted("goOffline"),tj(n._repo)}(this._delegate)}goOnline(){return(0,L.Dv)("database.goOnline",0,0,arguments.length),function L8(n){(n=(0,L.m9)(n))._checkNotDeleted("goOnline"),function Yq(n){n.persistentConnection_&&n.persistentConnection_.resume(KH)}(n._repo)}(this._delegate)}}qI.ServerValue={TIMESTAMP:function H8(){return U8}(),increment:n=>function j8(n){return{".sv":{increment:n}}}(n)};var X8=Object.freeze({__proto__:null,initStandalone:function J8({app:n,url:t,version:e,customAuthImpl:i,namespace:r,nodeAdmin:s=!1}){_U(e);const c=new mr.zt("auth-internal",new mr.H0("database-standalone"));return c.setComponent(new mr.wA("auth-internal",()=>i,"PRIVATE")),{instance:new qI(yj(n,c,void 0,t,s),n),namespace:r}}});const e9=qI.ServerValue;function Ej(n){return null==n}function Cj(n){return"function"==typeof n.set}function Tj(n,t){return Cj(t)?t:n.ref(t)}function Ij(n,t){if(function n9(n){return"string"==typeof n}(n))return t.stringCase();if(Cj(n))return t.firebaseCase();if(function i9(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function YI(n,t,e="on",i=Mr.z){return new Ti.y(r=>{let s=null;return s=n[e](t,(c,d)=>{i.schedule(()=>{r.next({snapshot:c,prevKey:d})}),"once"===e&&i.schedule(()=>r.complete())},c=>{i.schedule(()=>r.error(c))}),"on"===e?{unsubscribe(){null!=s&&n.off(t,s)}}:{unsubscribe(){}}}).pipe((0,at.U)(r=>{const{snapshot:s,prevKey:c}=r;let d=null;return s.exists()&&(d=s.key),{type:t,payload:s,prevKey:c,key:d}}),(0,Ar.B)())}function Sj(n,t){const e=n.length;for(let i=0;i<e;i++)if(n[i].payload.key===t)return i;return-1}function o9(n,t){const{payload:e,prevKey:i,key:r}=t,s=Sj(n,r),c=function s9(n,t){if(Ej(t))return 0;{const e=Sj(n,t);return-1===e?n.length:e+1}}(n,i);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let d=null;t.payload.forEach(p=>{const m={payload:p,type:"value",prevKey:d,key:p.key};return d=p.key,n=[...n,m],!1})}return n;case"child_added":if(s>-1){const d=n[s-1];(d&&d.key||null)!==i&&(n=n.filter(p=>p.payload.key!==e.key)).splice(c,0,t)}else{if(null==i)return[t,...n];(n=n.slice()).splice(c,0,t)}return n;case"child_removed":return n.filter(d=>d.payload.key!==e.key);case"child_changed":return n.map(d=>d.payload.key===r?t:d);case"child_moved":if(s>-1){const d=n.splice(s,1)[0];return(n=n.slice()).splice(c,0,d),n}return n;default:return n}}function Aj(n){return(Ej(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Mj(n,t,e){return function r9(n,t,e){return YI(n,"value","once",e).pipe((0,Jn.w)(i=>{const r=[(0,Mt.of)(i)];return t.forEach(s=>r.push(YI(n,s,"on",e))),(0,Sr.T)(...r).pipe(Ql(o9,[]))}),(0,D0.x)())}(n,t=Aj(t),e)}function Nj(n,t,e){const i=(t=Aj(t)).map(r=>YI(n,r,"on",e));return(0,Sr.T)(...i)}function xj(n,t){return function(i,r){return Ij(i,{stringCase:()=>n.child(i)[t](r),firebaseCase:()=>i[t](r),snapshotCase:()=>i.ref[t](r)})}}function u9(n){return function(e){return e?Ij(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function Rj(n,t){return function(){return YI(n,"value","on",t)}}!function t9(n){n.INTERNAL.registerComponent(new mr.wA("database-compat",(t,{instanceIdentifier:e})=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("database").getImmediate({identifier:e});return new qI(r,i)},"PUBLIC").setServiceProps({Reference:dl,Query:uo,Database:qI,DataSnapshot:pm,enableLogging:B8,INTERNAL:X8,ServerValue:e9}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(B1.Z);const f9=new l.OlP("angularfire2.realtimeDatabaseURL"),p9=new l.OlP("angularfire2.database.use-emulator");let g9=(()=>{class n{constructor(e,i,r,s,c,d,p,m,y,T,A,x,P,V,G){this.schedulers=d;const te=p,se=(0,si.on)(e,c,i);m&&$h(se,c,y,A,x,P,T,V),this.database=(0,si.cc)(`${se.name}.database.${r}`,"AngularFireDatabase",se.name,()=>{const le=c.runOutsideAngular(()=>se.database(r||void 0));return te&&le.useEmulator(...te),le},[te])}list(e,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>Tj(this.database,e));let s=r;return i&&(s=i(r)),function d9(n,t){const e=t.schedulers.outsideAngular,i=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:xj(i,"update"),set:xj(i,"set"),push:r=>i.push(r),remove:u9(i),snapshotChanges:r=>Mj(n,r,e).pipe(dn.iC),stateChanges:r=>Nj(n,r,e).pipe(dn.iC),auditTrail:r=>function a9(n,t,e){return function c9(n,t,e){return function l9(n,t){return YI(n,"value","on",t).pipe((0,at.U)(e=>{let i;return e.payload.forEach(r=>(i=r.key,!1)),{data:e,lastKeyToLoad:i}}))}(n,e).pipe(dx(t),(0,at.U)(([r,s])=>{const c=r.lastKeyToLoad,d=s.map(p=>p.key);return{actions:s,lastKeyToLoad:c,loadedKeys:d}}),function a4(n){return(0,$i.e)((t,e)=>{let i=!1,r=0;t.subscribe((0,_i.x)(e,s=>(i||(i=!n(s,r++)))&&e.next(s)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,at.U)(r=>r.actions))}(n,Nj(n,t).pipe(Ql((r,s)=>[...r,s],[])),e)}(n,r,e).pipe(dn.iC),valueChanges:(r,s)=>Mj(n,r,e).pipe((0,at.U)(d=>d.map(p=>s&&s.idField?Object.assign(Object.assign({},p.payload.val()),{[s.idField]:p.key}):p.payload.val())),dn.iC)}}(s,this)}object(e){return function h9(n,t){return{query:n,snapshotChanges:()=>Rj(n,t.schedulers.outsideAngular)().pipe(dn.iC),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>Rj(n,t.schedulers.outsideAngular)().pipe(dn.iC,(0,at.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Tj(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(si.Dh),l.LFG(si.xv,8),l.LFG(f9,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(dn.HU),l.LFG(p9,8),l.LFG(ld,8),l.LFG(ad,8),l.LFG(Gc,8),l.LFG(i_,8),l.LFG(va,8),l.LFG(Bp,8),l.LFG(Vp,8),l.LFG(Hh,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),m9=(()=>{class n{constructor(){jc.Z.registerVersion("angularfire",dn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[g9]}),n})();const{isArray:_9}=Array,{getPrototypeOf:v9,prototype:y9,keys:w9}=Object;function Oj(n){if(1===n.length){const t=n[0];if(_9(t))return{args:t,keys:null};if(function b9(n){return n&&"object"==typeof n&&v9(n)===y9}(t)){const e=w9(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}const{isArray:D9}=Array;function _L(n){return(0,at.U)(t=>function E9(n,t){return D9(t)?n(...t):n(t)}(n,t))}function kj(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}let Pj=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static#e=this.\u0275fac=function(i){return new(i||n)(l.Y36(l.Qsj),l.Y36(l.SBq))};static#t=this.\u0275dir=l.lG2({type:n})}return n})(),Zv=(()=>{class n extends Pj{static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}();static#t=this.\u0275dir=l.lG2({type:n,features:[l.qOj]})}return n})();const hl=new l.OlP("NgValueAccessor"),I9={provide:hl,useExisting:(0,l.Gpc)(()=>qx),multi:!0},A9=new l.OlP("CompositionEventMode");let qx=(()=>{class n extends Pj{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function S9(){const n=B()?B().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static#e=this.\u0275fac=function(i){return new(i||n)(l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(A9,8))};static#t=this.\u0275dir=l.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){1&i&&l.NdJ("input",function(c){return r._handleInput(c.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(c){return r._compositionEnd(c.target.value)})},features:[l._Bn([I9]),l.qOj]})}return n})();function gm(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function Lj(n){return null!=n&&"number"==typeof n.length}const ho=new l.OlP("NgValidators"),mm=new l.OlP("NgAsyncValidators"),M9=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class vL{static min(t){return function Bj(n){return t=>{if(gm(t.value)||gm(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}(t)}static max(t){return function Vj(n){return t=>{if(gm(t.value)||gm(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}(t)}static required(t){return function Uj(n){return gm(n.value)?{required:!0}:null}(t)}static requiredTrue(t){return function Hj(n){return!0===n.value?null:{required:!0}}(t)}static email(t){return function jj(n){return gm(n.value)||M9.test(n.value)?null:{email:!0}}(t)}static minLength(t){return function Gj(n){return t=>gm(t.value)||!Lj(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function $j(n){return t=>Lj(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static pattern(t){return function zj(n){if(!n)return Yx;let t,e;return"string"==typeof n?(e="","^"!==n.charAt(0)&&(e+="^"),e+=n,"$"!==n.charAt(n.length-1)&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(gm(i.value))return null;const r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return Qj(t)}static composeAsync(t){return Jj(t)}}function Yx(n){return null}function Wj(n){return null!=n}function qj(n){return(0,l.QGY)(n)?(0,Hn.D)(n):n}function Yj(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function Zj(n,t){return t.map(e=>e(n))}function Kj(n){return n.map(t=>function N9(n){return!n.validate}(t)?t:e=>t.validate(e))}function Qj(n){if(!n)return null;const t=n.filter(Wj);return 0==t.length?null:function(e){return Yj(Zj(e,t))}}function yL(n){return null!=n?Qj(Kj(n)):null}function Jj(n){if(!n)return null;const t=n.filter(Wj);return 0==t.length?null:function(e){return function C9(...n){const t=(0,Zc.jO)(n),{args:e,keys:i}=Oj(n),r=new Ti.y(s=>{const{length:c}=e;if(!c)return void s.complete();const d=new Array(c);let p=c,m=c;for(let y=0;y<c;y++){let T=!1;(0,Wd.Xf)(e[y]).subscribe((0,_i.x)(s,A=>{T||(T=!0,m--),d[y]=A},()=>p--,void 0,()=>{(!p||!T)&&(m||s.next(i?kj(i,d):d),s.complete())}))}});return t?r.pipe(_L(t)):r}(Zj(e,t).map(qj)).pipe((0,at.U)(Yj))}}function wL(n){return null!=n?Jj(Kj(n)):null}function Xj(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function e3(n){return n._rawValidators}function t3(n){return n._rawAsyncValidators}function bL(n){return n?Array.isArray(n)?n:[n]:[]}function Zx(n,t){return Array.isArray(n)?n.includes(t):n===t}function n3(n,t){const e=bL(t);return bL(n).forEach(r=>{Zx(e,r)||e.push(r)}),e}function i3(n,t){return bL(t).filter(e=>!Zx(n,e))}class r3{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=yL(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=wL(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class ia extends r3{get formDirective(){return null}get path(){return null}}class _m extends r3{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class s3{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let o3=(()=>{class n extends s3{constructor(e){super(e)}static#e=this.\u0275fac=function(i){return new(i||n)(l.Y36(_m,2))};static#t=this.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){2&i&&l.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[l.qOj]})}return n})(),a3=(()=>{class n extends s3{constructor(e){super(e)}static#e=this.\u0275fac=function(i){return new(i||n)(l.Y36(ia,10))};static#t=this.\u0275dir=l.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){2&i&&l.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[l.qOj]})}return n})();const ZI="VALID",Qx="INVALID",Lb="PENDING",KI="DISABLED";function CL(n){return(Jx(n)?n.validators:n)||null}function TL(n,t){return(Jx(t)?t.asyncValidators:n)||null}function Jx(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function c3(n,t,e){const i=n.controls;if(!(t?Object.keys(i):i).length)throw new l.vHH(1e3,"");if(!i[e])throw new l.vHH(1001,"")}function u3(n,t,e){n._forEachChild((i,r)=>{if(void 0===e[r])throw new l.vHH(1002,"")})}class Xx{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===ZI}get invalid(){return this.status===Qx}get pending(){return this.status==Lb}get disabled(){return this.status===KI}get enabled(){return this.status!==KI}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(n3(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(n3(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(i3(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(i3(t,this._rawAsyncValidators))}hasValidator(t){return Zx(this._rawValidators,t)}hasAsyncValidator(t){return Zx(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Lb,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=KI,this.errors=null,this._forEachChild(i=>{i.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ZI,this._forEachChild(i=>{i.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ZI||this.status===Lb)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?KI:ZI}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Lb,this._hasOwnPendingAsyncValidator=!0;const e=qj(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new l.vpe,this.statusChanges=new l.vpe}_calculateStatus(){return this._allControlsDisabled()?KI:this.errors?Qx:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Lb)?Lb:this._anyControlsHaveStatus(Qx)?Qx:ZI}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Jx(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function k9(n){return Array.isArray(n)?yL(n):n||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function P9(n){return Array.isArray(n)?wL(n):n||null}(this._rawAsyncValidators)}}class QI extends Xx{constructor(t,e,i){super(CL(e),TL(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){u3(this,0,t),Object.keys(t).forEach(i=>{c3(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(i=>{const r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,s)=>{i=e(i,r,s)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}class d3 extends QI{}const Kv=new l.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>JI}),JI="always";function XI(n,t,e=JI){IL(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(n.disabled),function L9(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&h3(n,t)})}(n,t),function V9(n,t){const e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function B9(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&h3(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function F9(n,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function tR(n,t,e=!0){const i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),iR(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function nR(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function IL(n,t){const e=e3(n);null!==t.validator?n.setValidators(Xj(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const i=t3(n);null!==t.asyncValidator?n.setAsyncValidators(Xj(i,t.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();nR(t._rawValidators,r),nR(t._rawAsyncValidators,r)}function iR(n,t){let e=!1;if(null!==n){if(null!==t.validator){const r=e3(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(c=>c!==t.validator);s.length!==r.length&&(e=!0,n.setValidators(s))}}if(null!==t.asyncValidator){const r=t3(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(c=>c!==t.asyncValidator);s.length!==r.length&&(e=!0,n.setAsyncValidators(s))}}}const i=()=>{};return nR(t._rawValidators,i),nR(t._rawAsyncValidators,i),e}function h3(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function g3(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function m3(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const tS=class extends Xx{constructor(t=null,e,i){super(CL(e),TL(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Jx(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=m3(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){g3(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){g3(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){m3(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};let b3=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=l.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),E3=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=l.oAB({type:n});static#n=this.\u0275inj=l.cJS({})}return n})();const xL=new l.OlP("NgModelWithFormControlWarning"),X9={provide:ia,useExisting:(0,l.Gpc)(()=>rR)};let rR=(()=>{class n extends ia{constructor(e,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new l.vpe,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(iR(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return XI(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){tR(e.control||null,e,!1),function G9(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,function p3(n,t){n._syncPendingControls(),t.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,r=this.form.get(e.path);i!==r&&(tR(i||null,e),(n=>n instanceof tS)(r)&&(XI(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);(function f3(n,t){IL(n,t)})(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function U9(n,t){return iR(n,t)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){IL(this.form,this),this._oldForm&&iR(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(i){return new(i||n)(l.Y36(ho,10),l.Y36(mm,10),l.Y36(Kv,8))};static#t=this.\u0275dir=l.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){1&i&&l.NdJ("submit",function(c){return r.onSubmit(c)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[l._Bn([X9]),l.qOj,l.TTD]})}return n})();const nY={provide:_m,useExisting:(0,l.Gpc)(()=>kL)};let kL=(()=>{class n extends _m{set isDisabled(e){}static#e=this._ngModelWarningSentOnce=!1;constructor(e,i,r,s,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.name=null,this.update=new l.vpe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function ML(n,t){if(!t)return null;let e,i,r;return Array.isArray(t),t.forEach(s=>{s.constructor===qx?e=s:function j9(n){return Object.getPrototypeOf(n.constructor)===Zv}(s)?i=s:r=s}),r||i||e||null}(0,s)}ngOnChanges(e){this._added||this._setUpControl(),function AL(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return function eR(n,t){return[...t.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(i){return new(i||n)(l.Y36(ia,13),l.Y36(ho,10),l.Y36(mm,10),l.Y36(hl,10),l.Y36(xL,8))};static#n=this.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[l._Bn([nY]),l.qOj,l.TTD]})}return n})(),V3=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=l.oAB({type:n});static#n=this.\u0275inj=l.cJS({imports:[E3]})}return n})();class U3 extends Xx{constructor(t,e,i){super(CL(e),TL(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,i={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,e={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,i={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),e&&(this.controls.splice(r,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){u3(this,0,t),t.forEach((i,r)=>{c3(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,i)=>!!i._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,i)=>{t(e,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}}function H3(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let _Y=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const e=new n;return e.useNonNullable=!0,e}group(e,i=null){const r=this._reduceControls(e);let s={};return H3(i)?s=i:null!==i&&(s.validators=i.validator,s.asyncValidators=i.asyncValidator),new QI(r,s)}record(e,i=null){const r=this._reduceControls(e);return new d3(r,i)}control(e,i,r){let s={};return this.useNonNullable?(H3(i)?s=i:(s.validators=i,s.asyncValidators=r),new tS(e,{...s,nonNullable:!0})):new tS(e,i,r)}array(e,i,r){const s=e.map(c=>this._createControl(c));return new U3(s,i,r)}_reduceControls(e){const i={};return Object.keys(e).forEach(r=>{i[r]=this._createControl(e[r])}),i}_createControl(e){return e instanceof tS||e instanceof Xx?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vY=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Kv,useValue:e.callSetDisabledState??JI}]}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=l.oAB({type:n});static#n=this.\u0275inj=l.cJS({imports:[V3]})}return n})(),yY=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:xL,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Kv,useValue:e.callSetDisabledState??JI}]}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=l.oAB({type:n});static#n=this.\u0275inj=l.cJS({imports:[V3]})}return n})();class j3{}class wY{}const jf="*";function G3(n,t){return{type:7,name:n,definitions:t,options:{}}}function sR(n,t=null){return{type:4,styles:t,timings:n}}function $3(n,t=null){return{type:2,steps:n,options:t}}function Jv(n){return{type:6,styles:n,offset:null}}function nS(n,t,e){return{type:0,name:n,styles:t,options:e}}function oR(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}class iS{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class z3{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,i=0,r=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++e==s&&this._onFinish()}),c.onDestroy(()=>{++i==s&&this._onDestroy()}),c.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((c,d)=>Math.max(c,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){const t=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}const W3=["toast-component",""];function bY(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"button",5),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.remove())}),l.TgZ(1,"span",6),l._uU(2,"\xd7"),l.qZA()()}}function DY(n,t){if(1&n&&(l.ynx(0),l._uU(1),l.BQk()),2&n){const e=l.oxw(2);l.xp6(1),l.hij("[",e.duplicatesCount+1,"]")}}function EY(n,t){if(1&n&&(l.TgZ(0,"div"),l._uU(1),l.YNc(2,DY,2,1,"ng-container",4),l.qZA()),2&n){const e=l.oxw();l.Tol(e.options.titleClass),l.uIk("aria-label",e.title),l.xp6(1),l.hij(" ",e.title," "),l.xp6(1),l.Q6J("ngIf",e.duplicatesCount)}}function CY(n,t){if(1&n&&l._UZ(0,"div",7),2&n){const e=l.oxw();l.Tol(e.options.messageClass),l.Q6J("innerHTML",e.message,l.oJD)}}function TY(n,t){if(1&n&&(l.TgZ(0,"div",8),l._uU(1),l.qZA()),2&n){const e=l.oxw();l.Tol(e.options.messageClass),l.uIk("aria-label",e.message),l.xp6(1),l.hij(" ",e.message," ")}}function IY(n,t){if(1&n&&(l.TgZ(0,"div"),l._UZ(1,"div",9),l.qZA()),2&n){const e=l.oxw();l.xp6(1),l.Udp("width",e.width+"%")}}class OY{_attachedHost;component;viewContainerRef;injector;constructor(t,e){this.component=t,this.injector=e}attach(t,e){return this._attachedHost=t,t.attach(this,e)}detach(){const t=this._attachedHost;if(t)return this._attachedHost=void 0,t.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class kY{_attachedPortal;_disposeFn;attach(t,e){return this._attachedPortal=t,this.attachComponentPortal(t,e)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(t){this._disposeFn=t}}class PY{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new Qt.x;_activate=new Qt.x;_manualClose=new Qt.x;_resetTimeout=new Qt.x;_countDuplicate=new Qt.x;constructor(t){this._overlayRef=t}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(t,e){t&&this._resetTimeout.next(),e&&this._countDuplicate.next(++this.duplicatesCount)}}class aR{toastId;config;message;title;toastType;toastRef;_onTap=new Qt.x;_onAction=new Qt.x;constructor(t,e,i,r,s,c){this.toastId=t,this.config=e,this.message=i,this.title=r,this.toastType=s,this.toastRef=c,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(t){this._onAction.next(t)}onAction(){return this._onAction.asObservable()}}const Y3=new l.OlP("ToastConfig");class FY extends kY{_hostDomElement;_componentFactoryResolver;_appRef;constructor(t,e,i){super(),this._hostDomElement=t,this._componentFactoryResolver=e,this._appRef=i}attachComponentPortal(t,e){const i=this._componentFactoryResolver.resolveComponentFactory(t.component);let r;return r=i.create(t.injector),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.detachView(r.hostView),r.destroy()}),e?this._hostDomElement.insertBefore(this._getComponentRootNode(r),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(r)),r}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let LY=(()=>{class n{_document=(0,l.f3M)(ve);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e=this._document.createElement("div");e.classList.add("overlay-container"),e.setAttribute("aria-live","polite"),this._document.body.appendChild(e),this._containerElement=e}static \u0275fac=function(i){return new(i||n)};static \u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class BY{_portalHost;constructor(t){this._portalHost=t}attach(t,e=!0){return this._portalHost.attach(t,e)}detach(){return this._portalHost.detach()}}let VY=(()=>{class n{_overlayContainer=(0,l.f3M)(LY);_componentFactoryResolver=(0,l.f3M)(l._Vd);_appRef=(0,l.f3M)(l.z2F);_document=(0,l.f3M)(ve);_paneElements=new Map;create(e,i){return this._createOverlayRef(this.getPaneElement(e,i))}getPaneElement(e="",i){return this._paneElements.get(i)||this._paneElements.set(i,{}),this._paneElements.get(i)[e]||(this._paneElements.get(i)[e]=this._createPaneElement(e,i)),this._paneElements.get(i)[e]}_createPaneElement(e,i){const r=this._document.createElement("div");return r.id="toast-container",r.classList.add(e),r.classList.add("toast-container"),i?i.getContainerElement().appendChild(r):this._overlayContainer.getContainerElement().appendChild(r),r}_createPortalHost(e){return new FY(e,this._componentFactoryResolver,this._appRef)}_createOverlayRef(e){return new BY(this._createPortalHost(e))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),VL=(()=>{class n{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(e,i,r,s,c){this.overlay=i,this._injector=r,this.sanitizer=s,this.ngZone=c,this.toastrConfig={...e.default,...e.config},e.config.iconClasses&&(this.toastrConfig.iconClasses={...e.default.iconClasses,...e.config.iconClasses})}show(e,i,r={},s=""){return this._preBuildNotification(s,e,i,this.applyConfig(r))}success(e,i,r={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",e,i,this.applyConfig(r))}error(e,i,r={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",e,i,this.applyConfig(r))}info(e,i,r={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",e,i,this.applyConfig(r))}warning(e,i,r={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",e,i,this.applyConfig(r))}clear(e){for(const i of this.toasts)if(void 0!==e){if(i.toastId===e)return void i.toastRef.manualClose()}else i.toastRef.manualClose()}remove(e){const i=this._findToast(e);if(!i||(i.activeToast.toastRef.close(),this.toasts.splice(i.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const r=this.toasts[this.currentlyActive].toastRef;r.isInactive()||(this.currentlyActive=this.currentlyActive+1,r.activate())}return!0}findDuplicate(e="",i="",r,s){const{includeTitleDuplicates:c}=this.toastrConfig;for(const d of this.toasts)if((!c||c&&d.title===e)&&d.message===i)return d.toastRef.onDuplicate(r,s),d;return null}applyConfig(e={}){return{...this.toastrConfig,...e}}_findToast(e){for(let i=0;i<this.toasts.length;i++)if(this.toasts[i].toastId===e)return{index:i,activeToast:this.toasts[i]};return null}_preBuildNotification(e,i,r,s){return s.onActivateTick?this.ngZone.run(()=>this._buildNotification(e,i,r,s)):this._buildNotification(e,i,r,s)}_buildNotification(e,i,r,s){if(!s.toastComponent)throw new Error("toastComponent required");const c=this.findDuplicate(r,i,this.toastrConfig.resetTimeoutOnDuplicate&&s.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&r||i)&&this.toastrConfig.preventDuplicates&&null!==c)return c;this.previousToastMessage=i;let d=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(d=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const p=this.overlay.create(s.positionClass,this.overlayContainer);this.index=this.index+1;let m=i;i&&s.enableHtml&&(m=this.sanitizer.sanitize(l.q3G.HTML,i));const y=new PY(p),T=new aR(this.index,s,m,r,e,y),x=l.zs3.create({providers:[{provide:aR,useValue:T}],parent:this._injector}),P=new OY(s.toastComponent,x),V=p.attach(P,s.newestOnTop);y.componentInstance=V.instance;const G={toastId:this.index,title:r||"",message:i||"",toastRef:y,onShown:y.afterActivate(),onHidden:y.afterClosed(),onTap:T.onTap(),onAction:T.onAction(),portal:V};return d||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{G.toastRef.activate()})),this.toasts.push(G),G}static \u0275fac=function(i){return new(i||n)(l.LFG(Y3),l.LFG(VY),l.LFG(l.zs3),l.LFG(Io),l.LFG(l.R0b))};static \u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const UY={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",toastComponent:(()=>{class n{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=-1;toastClasses="";state;get displayStyle(){if("inactive"===this.state.value)return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(e,i,r){this.toastrService=e,this.toastPackage=i,this.ngZone=r,this.message=i.message,this.title=i.title,this.options=i.config,this.originalTimeout=i.config.timeOut,this.toastClasses=`${i.toastType} ${i.config.toastClass}`,this.sub=i.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=i.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=i.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=i.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s}),this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}}}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const e=(new Date).getTime();this.width=(this.hideTime-e)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(e,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(e),i)):this.timeout=setTimeout(()=>e(),i)}outsideInterval(e,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(e),i)):this.intervalId=setInterval(()=>e(),i)}runInsideAngular(e){this.ngZone?this.ngZone.run(()=>e()):e()}static \u0275fac=function(i){return new(i||n)(l.Y36(VL),l.Y36(aR),l.Y36(l.R0b))};static \u0275cmp=l.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(i,r){1&i&&l.NdJ("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&i&&(l.d8E("@flyInOut",r.state),l.Tol(r.toastClasses),l.Udp("display",r.displayStyle))},standalone:!0,features:[l.jDz],attrs:W3,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(i,r){1&i&&(l.YNc(0,bY,3,0,"button",0),l.YNc(1,EY,3,5,"div",1),l.YNc(2,CY,1,3,"div",2),l.YNc(3,TY,2,4,"div",3),l.YNc(4,IY,2,2,"div",4)),2&i&&(l.Q6J("ngIf",r.options.closeButton),l.xp6(1),l.Q6J("ngIf",r.title),l.xp6(1),l.Q6J("ngIf",r.message&&r.options.enableHtml),l.xp6(1),l.Q6J("ngIf",r.message&&!r.options.enableHtml),l.xp6(1),l.Q6J("ngIf",r.options.progressBar))},dependencies:[Mi],encapsulation:2,data:{animation:[G3("flyInOut",[nS("inactive",Jv({opacity:0})),nS("active",Jv({opacity:1})),nS("removed",Jv({opacity:0})),oR("inactive => active",sR("{{ easeTime }}ms {{ easing }}")),oR("active => removed",sR("{{ easeTime }}ms {{ easing }}"))])]}})}return n})()},HY=(n={})=>(0,l.MR2)([{provide:Y3,useValue:{default:UY,config:n}}]);let jY=(()=>{class n{static forRoot(e={}){return{ngModule:n,providers:[HY(e)]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=l.oAB({type:n});static \u0275inj=l.cJS({})}return n})();function Z3(n){return new l.vHH(3e3,!1)}function vm(n){switch(n.length){case 0:return new iS;case 1:return n[0];default:return new z3(n)}}function K3(n,t,e=new Map,i=new Map){const r=[],s=[];let c=-1,d=null;if(t.forEach(p=>{const m=p.get("offset"),y=m==c,T=y&&d||new Map;p.forEach((A,x)=>{let P=x,V=A;if("offset"!==x)switch(P=n.normalizePropertyName(P,r),V){case"!":V=e.get(x);break;case jf:V=i.get(x);break;default:V=n.normalizeStyleValue(x,P,V,r)}T.set(P,V)}),y||s.push(T),d=T,c=m}),r.length)throw function d7(n){return new l.vHH(3502,!1)}();return s}function UL(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&HL(e,"start",n)));break;case"done":n.onDone(()=>i(e&&HL(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&HL(e,"destroy",n)))}}function HL(n,t,e){const s=jL(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,e.totalTime??n.totalTime,!!e.disabled),c=n._data;return null!=c&&(s._data=c),s}function jL(n,t,e,i,r="",s=0,c){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:r,totalTime:s,disabled:!!c}}function fl(n,t,e){let i=n.get(t);return i||n.set(t,i=e),i}function Q3(n){const t=n.indexOf(":");return[n.substring(1,t),n.slice(t+1)]}const E7=(()=>typeof document>"u"?null:document.documentElement)();function GL(n){const t=n.parentNode||n.host||null;return t===E7?null:t}let Xv=null,J3=!1;function X3(n,t){for(;t;){if(t===n)return!0;t=GL(t)}return!1}function eG(n,t,e){if(e)return Array.from(n.querySelectorAll(t));const i=n.querySelector(t);return i?[i]:[]}let tG=(()=>{class n{validateStyleProperty(e){return function T7(n){Xv||(Xv=function I7(){return typeof document<"u"?document.body:null}()||{},J3=!!Xv.style&&"WebkitAppearance"in Xv.style);let t=!0;return Xv.style&&!function C7(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in Xv.style,!t&&J3&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Xv.style)),t}(e)}matchesElement(e,i){return!1}containsElement(e,i){return X3(e,i)}getParentElement(e){return GL(e)}query(e,i,r){return eG(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,s,c,d=[],p){return new iS(r,s)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac})}return n})(),$L=(()=>{class n{static#e=this.NOOP=new tG}return n})();const S7=1e3,zL="ng-enter",lR="ng-leave",cR="ng-trigger",uR=".ng-trigger",iG="ng-animating",WL=".ng-animating";function Gf(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:qL(parseFloat(t[1]),t[2])}function qL(n,t){return"s"===t?n*S7:n}function dR(n,t,e){return n.hasOwnProperty("duration")?n:function M7(n,t,e){let r,s=0,c="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return t.push(Z3()),{duration:0,delay:0,easing:""};r=qL(parseFloat(d[1]),d[2]);const p=d[3];null!=p&&(s=qL(parseFloat(p),d[4]));const m=d[5];m&&(c=m)}else r=n;if(!e){let d=!1,p=t.length;r<0&&(t.push(function GY(){return new l.vHH(3100,!1)}()),d=!0),s<0&&(t.push(function $Y(){return new l.vHH(3101,!1)}()),d=!0),d&&t.splice(p,0,Z3())}return{duration:r,delay:s,easing:c}}(n,t,e)}function rS(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function rG(n){const t=new Map;return Object.keys(n).forEach(e=>{t.set(e,n[e])}),t}function ym(n,t=new Map,e){if(e)for(let[i,r]of e)t.set(i,r);for(let[i,r]of n)t.set(i,r);return t}function Qd(n,t,e){t.forEach((i,r)=>{const s=ZL(r);e&&!e.has(r)&&e.set(r,n.style[s]),n.style[s]=i})}function ey(n,t){t.forEach((e,i)=>{const r=ZL(i);n.style[r]=""})}function sS(n){return Array.isArray(n)?1==n.length?n[0]:$3(n):n}const YL=new RegExp("{{\\s*(.+?)\\s*}}","g");function oG(n){let t=[];if("string"==typeof n){let e;for(;e=YL.exec(n);)t.push(e[1]);YL.lastIndex=0}return t}function oS(n,t,e){const i=n.toString(),r=i.replace(YL,(s,c)=>{let d=t[c];return null==d&&(e.push(function WY(n){return new l.vHH(3003,!1)}()),d=""),d.toString()});return r==i?n:r}function hR(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const R7=/-+([a-z0-9])/g;function ZL(n){return n.replace(R7,(...t)=>t[1].toUpperCase())}function pl(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function qY(n){return new l.vHH(3004,!1)}()}}function aG(n,t){return window.getComputedStyle(n)[t]}const fR="*";function P7(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function F7(n,t,e){if(":"==n[0]){const p=function L7(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(function a7(n){return new l.vHH(3016,!1)}()),"* => *"}}(n,e);if("function"==typeof p)return void t.push(p);n=p}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(function o7(n){return new l.vHH(3015,!1)}()),t;const r=i[1],s=i[2],c=i[3];t.push(lG(r,c));"<"==s[0]&&!(r==fR&&c==fR)&&t.push(lG(c,r))}(i,e,t)):e.push(n),e}const pR=new Set(["true","1"]),gR=new Set(["false","0"]);function lG(n,t){const e=pR.has(n)||gR.has(n),i=pR.has(t)||gR.has(t);return(r,s)=>{let c=n==fR||n==r,d=t==fR||t==s;return!c&&e&&"boolean"==typeof r&&(c=r?pR.has(n):gR.has(n)),!d&&i&&"boolean"==typeof s&&(d=s?pR.has(t):gR.has(t)),c&&d}}const B7=new RegExp("s*:selfs*,?","g");function KL(n,t,e,i){return new V7(n).build(t,e,i)}class V7{constructor(t){this._driver=t}build(t,e,i){const r=new j7(e);return this._resetContextStyleTimingState(r),pl(this,sS(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,r=e.depCount=0;const s=[],c=[];return"@"==t.name.charAt(0)&&e.errors.push(function ZY(){return new l.vHH(3006,!1)}()),t.definitions.forEach(d=>{if(this._resetContextStyleTimingState(e),0==d.type){const p=d,m=p.name;m.toString().split(/\s*,\s*/).forEach(y=>{p.name=y,s.push(this.visitState(p,e))}),p.name=m}else if(1==d.type){const p=this.visitTransition(d,e);i+=p.queryCount,r+=p.depCount,c.push(p)}else e.errors.push(function KY(){return new l.vHH(3007,!1)}())}),{type:7,name:t.name,states:s,transitions:c,queryCount:i,depCount:r,options:null}}visitState(t,e){const i=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){const s=new Set,c=r||{};i.styles.forEach(d=>{d instanceof Map&&d.forEach(p=>{oG(p).forEach(m=>{c.hasOwnProperty(m)||s.add(m)})})}),s.size&&(hR(s.values()),e.errors.push(function QY(n,t){return new l.vHH(3008,!1)}()))}return{type:0,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const i=pl(this,sS(t.animation),e);return{type:1,matchers:P7(t.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:ty(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(i=>pl(this,i,e)),options:ty(t.options)}}visitGroup(t,e){const i=e.currentTime;let r=0;const s=t.steps.map(c=>{e.currentTime=i;const d=pl(this,c,e);return r=Math.max(r,e.currentTime),d});return e.currentTime=r,{type:3,steps:s,options:ty(t.options)}}visitAnimate(t,e){const i=function $7(n,t){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return QL(dR(n,t).duration,0,"");const e=n;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=QL(0,0,"");return s.dynamic=!0,s.strValue=e,s}const r=dR(e,t);return QL(r.duration,r.delay,r.easing)}(t.timings,e.errors);e.currentAnimateTimings=i;let r,s=t.styles?t.styles:Jv({});if(5==s.type)r=this.visitKeyframes(s,e);else{let c=t.styles,d=!1;if(!c){d=!0;const m={};i.easing&&(m.easing=i.easing),c=Jv(m)}e.currentTime+=i.duration+i.delay;const p=this.visitStyle(c,e);p.isEmptyStep=d,r=p}return e.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(t,e){const i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){const i=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let d of r)"string"==typeof d?d===jf?i.push(d):e.errors.push(new l.vHH(3002,!1)):i.push(rG(d));let s=!1,c=null;return i.forEach(d=>{if(d instanceof Map&&(d.has("easing")&&(c=d.get("easing"),d.delete("easing")),!s))for(let p of d.values())if(p.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:c,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,e){const i=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;i&&s>0&&(s-=i.duration+i.delay),t.styles.forEach(c=>{"string"!=typeof c&&c.forEach((d,p)=>{const m=e.collectedStyles.get(e.currentQuerySelector),y=m.get(p);let T=!0;y&&(s!=r&&s>=y.startTime&&r<=y.endTime&&(e.errors.push(function XY(n,t,e,i,r){return new l.vHH(3010,!1)}()),T=!1),s=y.startTime),T&&m.set(p,{startTime:s,endTime:r}),e.options&&function x7(n,t,e){const i=t.params||{},r=oG(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||e.push(function zY(n){return new l.vHH(3001,!1)}())})}(d,e.options,e.errors)})})}visitKeyframes(t,e){const i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function e7(){return new l.vHH(3011,!1)}()),i;let s=0;const c=[];let d=!1,p=!1,m=0;const y=t.steps.map(te=>{const se=this._makeStyleAst(te,e);let le=null!=se.offset?se.offset:function G7(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){const i=e;t=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(se.styles),de=0;return null!=le&&(s++,de=se.offset=le),p=p||de<0||de>1,d=d||de<m,m=de,c.push(de),se});p&&e.errors.push(function t7(){return new l.vHH(3012,!1)}()),d&&e.errors.push(function n7(){return new l.vHH(3200,!1)}());const T=t.steps.length;let A=0;s>0&&s<T?e.errors.push(function i7(){return new l.vHH(3202,!1)}()):0==s&&(A=1/(T-1));const x=T-1,P=e.currentTime,V=e.currentAnimateTimings,G=V.duration;return y.forEach((te,se)=>{const le=A>0?se==x?1:A*se:c[se],de=le*G;e.currentTime=P+V.delay+de,V.duration=de,this._validateStyleAst(te,e),te.offset=le,i.styles.push(te)}),i}visitReference(t,e){return{type:8,animation:pl(this,sS(t.animation),e),options:ty(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:ty(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:ty(t.options)}}visitQuery(t,e){const i=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[s,c]=function U7(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(B7,"")),n=n.replace(/@\*/g,uR).replace(/@\w+/g,e=>uR+"-"+e.slice(1)).replace(/:animating/g,WL),[n,t]}(t.selector);e.currentQuerySelector=i.length?i+" "+s:s,fl(e.collectedStyles,e.currentQuerySelector,new Map);const d=pl(this,sS(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:c,animation:d,originalSelector:t.selector,options:ty(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function r7(){return new l.vHH(3013,!1)}());const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:dR(t.timings,e.errors,!0);return{type:12,animation:pl(this,sS(t.animation),e),timings:i,options:null}}}class j7{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function ty(n){return n?(n=rS(n)).params&&(n.params=function H7(n){return n?rS(n):null}(n.params)):n={},n}function QL(n,t,e){return{duration:n,delay:t,easing:e}}function JL(n,t,e,i,r,s,c=null,d=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:c,subTimeline:d}}class mR{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const q7=new RegExp(":enter","g"),Z7=new RegExp(":leave","g");function XL(n,t,e,i,r,s=new Map,c=new Map,d,p,m=[]){return(new K7).buildKeyframes(n,t,e,i,r,s,c,d,p,m)}class K7{buildKeyframes(t,e,i,r,s,c,d,p,m,y=[]){m=m||new mR;const T=new e2(t,e,m,r,s,y,[]);T.options=p;const A=p.delay?Gf(p.delay):0;T.currentTimeline.delayNextStep(A),T.currentTimeline.setStyles([c],null,T.errors,p),pl(this,i,T);const x=T.timelines.filter(P=>P.containsAnimation());if(x.length&&d.size){let P;for(let V=x.length-1;V>=0;V--){const G=x[V];if(G.element===e){P=G;break}}P&&!P.allowOnlyTimelineStyles()&&P.setStyles([d],null,T.errors,p)}return x.length?x.map(P=>P.buildKeyframes()):[JL(e,[],[],[],0,A,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const i=e.subInstructions.get(e.element);if(i){const r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,c=this._visitSubInstructions(i,r,r.options);s!=c&&e.transformIntoNewTimeline(c)}e.previousNode=t}visitAnimateRef(t,e){const i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,i),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,i){for(const r of t){const s=r?.delay;if(s){const c="number"==typeof s?s:Gf(oS(s,r?.params??{},e.errors));i.delayNextStep(c)}}}_visitSubInstructions(t,e,i){let s=e.currentTimeline.currentTime;const c=null!=i.duration?Gf(i.duration):null,d=null!=i.delay?Gf(i.delay):null;return 0!==c&&t.forEach(p=>{const m=e.appendInstructionToTimeline(p,c,d);s=Math.max(s,m.duration+m.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),pl(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const i=e.subContextCount;let r=e;const s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=_R);const c=Gf(s.delay);r.delayNextStep(c)}t.steps.length&&(t.steps.forEach(c=>pl(this,c,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const i=[];let r=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?Gf(t.options.delay):0;t.steps.forEach(c=>{const d=e.createSubContext(t.options);s&&d.delayNextStep(s),pl(this,c,d),r=Math.max(r,d.currentTimeline.currentTime),i.push(d.currentTimeline)}),i.forEach(c=>e.currentTimeline.mergeTimelineCollectedStyles(c)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const i=t.strValue;return dR(e.params?oS(i,e.params,e.errors):i,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const i=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(i.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(s):i.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const i=e.currentAnimateTimings,r=e.currentTimeline.duration,s=i.duration,d=e.createSubContext().currentTimeline;d.easing=i.easing,t.styles.forEach(p=>{d.forwardTime((p.offset||0)*s),d.setStyles(p.styles,p.easing,e.errors,e.options),d.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(d),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){const i=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?Gf(r.delay):0;s&&(6===e.previousNode.type||0==i&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=_R);let c=i;const d=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=d.length;let p=null;d.forEach((m,y)=>{e.currentQueryIndex=y;const T=e.createSubContext(t.options,m);s&&T.delayNextStep(s),m===e.element&&(p=T.currentTimeline),pl(this,t.animation,T),T.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,T.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(c),p&&(e.currentTimeline.mergeTimelineCollectedStyles(p),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const i=e.parentContext,r=e.currentTimeline,s=t.timings,c=Math.abs(s.duration),d=c*(e.currentQueryTotal-1);let p=c*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":p=d-p;break;case"full":p=i.currentStaggerTime}const y=e.currentTimeline;p&&y.delayNextStep(p);const T=y.currentTime;pl(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=r.currentTime-T+(r.startTime-i.currentTimeline.startTime)}}const _R={};class e2{constructor(t,e,i,r,s,c,d,p){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=c,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=_R,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new vR(this._driver,e,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const i=t;let r=this.options;null!=i.duration&&(r.duration=Gf(i.duration)),null!=i.delay&&(r.delay=Gf(i.delay));const s=i.params;if(s){let c=r.params;c||(c=this.options.params={}),Object.keys(s).forEach(d=>{(!e||!c.hasOwnProperty(d))&&(c[d]=oS(s[d],c,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const i=t.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return t}createSubContext(t=null,e,i){const r=e||this.element,s=new e2(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=_R,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){const r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(i??0)+t.delay,easing:""},s=new Q7(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,r,s,c){let d=[];if(r&&d.push(this.element),t.length>0){t=(t=t.replace(q7,"."+this._enterClassName)).replace(Z7,"."+this._leaveClassName);let m=this._driver.query(this.element,t,1!=i);0!==i&&(m=i<0?m.slice(m.length+i,m.length):m.slice(0,i)),d.push(...m)}return!s&&0==d.length&&c.push(function s7(n){return new l.vHH(3014,!1)}()),d}}class vR{constructor(t,e,i,r){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new vR(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||jf),this._currentKeyframe.set(e,jf);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,r){e&&this._previousKeyframe.set("easing",e);const s=r&&r.params||{},c=function J7(n,t){const e=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||t.keys();for(let s of i)e.set(s,jf)}else ym(r,e)}),e}(t,this._globalTimelineStyles);for(let[d,p]of c){const m=oS(p,s,i);this._pendingStyles.set(d,m),this._localTimelineStyles.has(d)||this._backFill.set(d,this._globalTimelineStyles.get(d)??jf),this._updateStyle(d,m)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,i)=>{const r=this._styleSummary.get(i);(!r||e.time>r.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((d,p)=>{const m=ym(d,new Map,this._backFill);m.forEach((y,T)=>{"!"===y?t.add(T):y===jf&&e.add(T)}),i||m.set("offset",p/this.duration),r.push(m)});const s=t.size?hR(t.values()):[],c=e.size?hR(e.values()):[];if(i){const d=r[0],p=new Map(d);d.set("offset",0),p.set("offset",1),r=[d,p]}return JL(this.element,r,s,c,this.duration,this.startTime,this.easing,!1)}}class Q7 extends vR{constructor(t,e,i,r,s,c,d=!1){super(t,e,c.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=d,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],c=i+e,d=e/c,p=ym(t[0]);p.set("offset",0),s.push(p);const m=ym(t[0]);m.set("offset",dG(d)),s.push(m);const y=t.length-1;for(let T=1;T<=y;T++){let A=ym(t[T]);const x=A.get("offset");A.set("offset",dG((e+x*i)/c)),s.push(A)}i=c,e=0,r="",t=s}return JL(this.element,t,this.preStyleProps,this.postStyleProps,i,e,r,!0)}}function dG(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class t2{}const X7=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class eZ extends t2{normalizePropertyName(t,e){return ZL(t)}normalizeStyleValue(t,e,i,r){let s="";const c=i.toString().trim();if(X7.has(e)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const d=i.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&r.push(function YY(n,t){return new l.vHH(3005,!1)}())}return c+s}}function hG(n,t,e,i,r,s,c,d,p,m,y,T,A){return{type:0,element:n,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:i,toStyles:c,timelines:d,queriedElements:p,preStyleProps:m,postStyleProps:y,totalTime:T,errors:A}}const n2={};class fG{constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,r){return function tZ(n,t,e,i,r){return n.some(s=>s(t,e,i,r))}(this.ast.matchers,t,e,i,r)}buildStyles(t,e,i){let r=this._stateStyles.get("*");return void 0!==t&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,i):new Map}build(t,e,i,r,s,c,d,p,m,y){const T=[],A=this.ast.options&&this.ast.options.params||n2,P=this.buildStyles(i,d&&d.params||n2,T),V=p&&p.params||n2,G=this.buildStyles(r,V,T),te=new Set,se=new Map,le=new Map,de="void"===r,Oe={params:nZ(V,A),delay:this.ast.options?.delay},je=y?[]:XL(t,e,this.ast.animation,s,c,P,G,Oe,m,T);let ct=0;if(je.forEach(_t=>{ct=Math.max(_t.duration+_t.delay,ct)}),T.length)return hG(e,this._triggerName,i,r,de,P,G,[],[],se,le,ct,T);je.forEach(_t=>{const Tt=_t.element,rt=fl(se,Tt,new Set);_t.preStyleProps.forEach(Zt=>rt.add(Zt));const tt=fl(le,Tt,new Set);_t.postStyleProps.forEach(Zt=>tt.add(Zt)),Tt!==e&&te.add(Tt)});const nt=hR(te.values());return hG(e,this._triggerName,i,r,de,P,G,je,nt,se,le,ct)}}function nZ(n,t){const e=rS(t);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(e[i]=n[i]);return e}class iZ{constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){const i=new Map,r=rS(this.defaultParams);return Object.keys(t).forEach(s=>{const c=t[s];null!==c&&(r[s]=c)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((c,d)=>{c&&(c=oS(c,r,e));const p=this.normalizer.normalizePropertyName(d,e);c=this.normalizer.normalizeStyleValue(d,p,c,e),i.set(d,c)})}),i}}class sZ{constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{this.states.set(r.name,new iZ(r.style,r.options&&r.options.params||{},i))}),pG(this.states,"true","1"),pG(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new fG(t,r,this.states))}),this.fallbackTransition=function oZ(n,t,e){return new fG(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,d)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,r){return this.transitionFactories.find(c=>c.match(t,e,i,r))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}}function pG(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}const aZ=new mR;class lZ{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const i=[],s=KL(this._driver,e,i,[]);if(i.length)throw function h7(n){return new l.vHH(3503,!1)}();this._animations.set(t,s)}_buildPlayer(t,e,i){const r=t.element,s=K3(this._normalizer,t.keyframes,e,i);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){const r=[],s=this._animations.get(t);let c;const d=new Map;if(s?(c=XL(this._driver,e,s,zL,lR,new Map,new Map,i,aZ,r),c.forEach(y=>{const T=fl(d,y.element,new Map);y.postStyleProps.forEach(A=>T.set(A,null))})):(r.push(function f7(){return new l.vHH(3300,!1)}()),c=[]),r.length)throw function p7(n){return new l.vHH(3504,!1)}();d.forEach((y,T)=>{y.forEach((A,x)=>{y.set(x,this._driver.computeStyle(T,x,jf))})});const m=vm(c.map(y=>{const T=d.get(y.element);return this._buildPlayer(y,new Map,T)}));return this._playersById.set(t,m),m.onDestroy(()=>this.destroy(t)),this.players.push(m),m}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function g7(n){return new l.vHH(3301,!1)}();return e}listen(t,e,i,r){const s=jL(e,"","","");return UL(this._getPlayer(t),i,s,r),()=>{}}command(t,e,i,r){if("register"==i)return void this.register(t,r[0]);if("create"==i)return void this.create(t,e,r[0]||{});const s=this._getPlayer(t);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const gG="ng-animate-queued",i2="ng-animate-disabled",fZ=[],mG={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},pZ={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},yu="__ng_removed";class r2{get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;const i=t&&t.hasOwnProperty("value");if(this.value=function vZ(n){return n??null}(i?t.value:t),i){const s=rS(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){const e=t.params;if(e){const i=this.options.params;Object.keys(e).forEach(r=>{null==i[r]&&(i[r]=e[r])})}}}const aS="void",s2=new r2(aS);class gZ{constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,fc(e,this._hostClassName)}listen(t,e,i,r){if(!this._triggers.has(e))throw function m7(n,t){return new l.vHH(3302,!1)}();if(null==i||0==i.length)throw function _7(n){return new l.vHH(3303,!1)}();if(!function yZ(n){return"start"==n||"done"==n}(i))throw function v7(n,t){return new l.vHH(3400,!1)}();const s=fl(this._elementListeners,t,[]),c={name:e,phase:i,callback:r};s.push(c);const d=fl(this._engine.statesByElement,t,new Map);return d.has(e)||(fc(t,cR),fc(t,cR+"-"+e),d.set(e,s2)),()=>{this._engine.afterFlush(()=>{const p=s.indexOf(c);p>=0&&s.splice(p,1),this._triggers.has(e)||d.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function y7(n){return new l.vHH(3401,!1)}();return e}trigger(t,e,i,r=!0){const s=this._getTrigger(e),c=new o2(this.id,e,t);let d=this._engine.statesByElement.get(t);d||(fc(t,cR),fc(t,cR+"-"+e),this._engine.statesByElement.set(t,d=new Map));let p=d.get(e);const m=new r2(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&p&&m.absorbOptions(p.options),d.set(e,m),p||(p=s2),m.value!==aS&&p.value===m.value){if(!function DZ(n,t){const e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!t.hasOwnProperty(s)||n[s]!==t[s])return!1}return!0}(p.params,m.params)){const V=[],G=s.matchStyles(p.value,p.params,V),te=s.matchStyles(m.value,m.params,V);V.length?this._engine.reportError(V):this._engine.afterFlush(()=>{ey(t,G),Qd(t,te)})}return}const A=fl(this._engine.playersByElement,t,[]);A.forEach(V=>{V.namespaceId==this.id&&V.triggerName==e&&V.queued&&V.destroy()});let x=s.matchTransition(p.value,m.value,t,m.params),P=!1;if(!x){if(!r)return;x=s.fallbackTransition,P=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:x,fromState:p,toState:m,player:c,isFallbackTransition:P}),P||(fc(t,gG),c.onStart(()=>{Bb(t,gG)})),c.onDone(()=>{let V=this.players.indexOf(c);V>=0&&this.players.splice(V,1);const G=this._engine.playersByElement.get(t);if(G){let te=G.indexOf(c);te>=0&&G.splice(te,1)}}),this.players.push(c),A.push(c),c}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const i=this._engine.driver.query(t,uR,!0);i.forEach(r=>{if(r[yu])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(c=>c.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,i,r){const s=this._engine.statesByElement.get(t),c=new Map;if(s){const d=[];if(s.forEach((p,m)=>{if(c.set(m,p.value),this._triggers.has(m)){const y=this.trigger(t,m,aS,r);y&&d.push(y)}}),d.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,c),i&&vm(d).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){const r=new Set;e.forEach(s=>{const c=s.name;if(r.has(c))return;r.add(c);const p=this._triggers.get(c).fallbackTransition,m=i.get(c)||s2,y=new r2(aS),T=new o2(this.id,c,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:c,transition:p,fromState:m,toState:y,player:T,isFallbackTransition:!0})})}}removeNode(t,e){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let c=t;for(;c=c.parentNode;)if(i.statesByElement.get(c)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,e);else{const s=t[yu];(!s||s===mG)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){fc(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,c=this._elementListeners.get(s);c&&c.forEach(d=>{if(d.name==i.triggerName){const p=jL(s,i.triggerName,i.fromState.value,i.toState.value);p._data=t,UL(i.player,d.phase,p,d.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{const s=i.transition.ast.depCount,c=r.transition.ast.depCount;return 0==s||0==c?s-c:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}}class mZ{_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){const i=new gZ(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let c=!1,d=this.driver.getParentElement(e);for(;d;){const p=r.get(d);if(p){const m=i.indexOf(p);i.splice(m+1,0,t),c=!0;break}d=this.driver.getParentElement(d)}c||i.unshift(t)}else i.push(t);return r.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let r=this._namespaceLookup[t];r&&r.register(e,i)&&this.totalAnimations++}destroy(t,e){t&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const i=this._fetchNamespace(t);this.namespacesByHostElement.delete(i.hostElement);const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(e),delete this._namespaceLookup[t]}))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,i=this.statesByElement.get(t);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&e.add(s)}return e}trigger(t,e,i,r){if(yR(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,i,r),!0}return!1}insertNode(t,e,i,r){if(!yR(e))return;const s=e[yu];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const c=this.collectedLeaveElements.indexOf(e);c>=0&&this.collectedLeaveElements.splice(c,1)}if(t){const c=this._fetchNamespace(t);c&&c.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),fc(t,i2)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Bb(t,i2))}removeNode(t,e,i){if(yR(e)){const r=t?this._fetchNamespace(t):null;r?r.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i);const s=this.namespacesByHostElement.get(e);s&&s.id!==t&&s.removeNode(e,i)}else this._onRemovalComplete(e,i)}markElementAsRemoved(t,e,i,r,s){this.collectedLeaveElements.push(e),e[yu]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,i,r,s){return yR(e)?this._fetchNamespace(t).listen(e,i,r,s):()=>{}}_buildInstruction(t,e,i,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,uR,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,WL,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return vm(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[yu];if(e&&e.setForRemoval){if(t[yu]=mG,e.namespaceId){this.destroyInnerAnimations(t);const i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(i2)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)fc(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?vm(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw function w7(n){return new l.vHH(3402,!1)}()}_flushAnimations(t,e){const i=new mR,r=[],s=new Map,c=[],d=new Map,p=new Map,m=new Map,y=new Set;this.disabledNodes.forEach(gt=>{y.add(gt);const St=this.driver.query(gt,".ng-animate-queued",!0);for(let Ht=0;Ht<St.length;Ht++)y.add(St[Ht])});const T=this.bodyNode,A=Array.from(this.statesByElement.keys()),x=yG(A,this.collectedEnterElements),P=new Map;let V=0;x.forEach((gt,St)=>{const Ht=zL+V++;P.set(St,Ht),gt.forEach(jt=>fc(jt,Ht))});const G=[],te=new Set,se=new Set;for(let gt=0;gt<this.collectedLeaveElements.length;gt++){const St=this.collectedLeaveElements[gt],Ht=St[yu];Ht&&Ht.setForRemoval&&(G.push(St),te.add(St),Ht.hasAnimation?this.driver.query(St,".ng-star-inserted",!0).forEach(jt=>te.add(jt)):se.add(St))}const le=new Map,de=yG(A,Array.from(te));de.forEach((gt,St)=>{const Ht=lR+V++;le.set(St,Ht),gt.forEach(jt=>fc(jt,Ht))}),t.push(()=>{x.forEach((gt,St)=>{const Ht=P.get(St);gt.forEach(jt=>Bb(jt,Ht))}),de.forEach((gt,St)=>{const Ht=le.get(St);gt.forEach(jt=>Bb(jt,Ht))}),G.forEach(gt=>{this.processLeaveNode(gt)})});const Oe=[],je=[];for(let gt=this._namespaceList.length-1;gt>=0;gt--)this._namespaceList[gt].drainQueuedTransitions(e).forEach(Ht=>{const jt=Ht.player,ii=Ht.element;if(Oe.push(jt),this.collectedEnterElements.length){const Ki=ii[yu];if(Ki&&Ki.setForMove){if(Ki.previousTriggersValues&&Ki.previousTriggersValues.has(Ht.triggerName)){const kr=Ki.previousTriggersValues.get(Ht.triggerName),rs=this.statesByElement.get(Ht.element);if(rs&&rs.has(Ht.triggerName)){const Tm=rs.get(Ht.triggerName);Tm.value=kr,rs.set(Ht.triggerName,Tm)}}return void jt.destroy()}}const wi=!T||!this.driver.containsElement(T,ii),sr=le.get(ii),mo=P.get(ii),$n=this._buildInstruction(Ht,i,mo,sr,wi);if($n.errors&&$n.errors.length)return void je.push($n);if(wi)return jt.onStart(()=>ey(ii,$n.fromStyles)),jt.onDestroy(()=>Qd(ii,$n.toStyles)),void r.push(jt);if(Ht.isFallbackTransition)return jt.onStart(()=>ey(ii,$n.fromStyles)),jt.onDestroy(()=>Qd(ii,$n.toStyles)),void r.push(jt);const Cs=[];$n.timelines.forEach(Ki=>{Ki.stretchStartingKeyframe=!0,this.disabledNodes.has(Ki.element)||Cs.push(Ki)}),$n.timelines=Cs,i.append(ii,$n.timelines),c.push({instruction:$n,player:jt,element:ii}),$n.queriedElements.forEach(Ki=>fl(d,Ki,[]).push(jt)),$n.preStyleProps.forEach((Ki,kr)=>{if(Ki.size){let rs=p.get(kr);rs||p.set(kr,rs=new Set),Ki.forEach((Tm,nh)=>rs.add(nh))}}),$n.postStyleProps.forEach((Ki,kr)=>{let rs=m.get(kr);rs||m.set(kr,rs=new Set),Ki.forEach((Tm,nh)=>rs.add(nh))})});if(je.length){const gt=[];je.forEach(St=>{gt.push(function b7(n,t){return new l.vHH(3505,!1)}())}),Oe.forEach(St=>St.destroy()),this.reportError(gt)}const ct=new Map,nt=new Map;c.forEach(gt=>{const St=gt.element;i.has(St)&&(nt.set(St,St),this._beforeAnimationBuild(gt.player.namespaceId,gt.instruction,ct))}),r.forEach(gt=>{const St=gt.element;this._getPreviousPlayers(St,!1,gt.namespaceId,gt.triggerName,null).forEach(jt=>{fl(ct,St,[]).push(jt),jt.destroy()})});const _t=G.filter(gt=>bG(gt,p,m)),Tt=new Map;vG(Tt,this.driver,se,m,jf).forEach(gt=>{bG(gt,p,m)&&_t.push(gt)});const tt=new Map;x.forEach((gt,St)=>{vG(tt,this.driver,new Set(gt),p,"!")}),_t.forEach(gt=>{const St=Tt.get(gt),Ht=tt.get(gt);Tt.set(gt,new Map([...St?.entries()??[],...Ht?.entries()??[]]))});const Zt=[],Mn=[],go={};c.forEach(gt=>{const{element:St,player:Ht,instruction:jt}=gt;if(i.has(St)){if(y.has(St))return Ht.onDestroy(()=>Qd(St,jt.toStyles)),Ht.disabled=!0,Ht.overrideTotalTime(jt.totalTime),void r.push(Ht);let ii=go;if(nt.size>1){let sr=St;const mo=[];for(;sr=sr.parentNode;){const $n=nt.get(sr);if($n){ii=$n;break}mo.push(sr)}mo.forEach($n=>nt.set($n,ii))}const wi=this._buildAnimation(Ht.namespaceId,jt,ct,s,tt,Tt);if(Ht.setRealPlayer(wi),ii===go)Zt.push(Ht);else{const sr=this.playersByElement.get(ii);sr&&sr.length&&(Ht.parentPlayer=vm(sr)),r.push(Ht)}}else ey(St,jt.fromStyles),Ht.onDestroy(()=>Qd(St,jt.toStyles)),Mn.push(Ht),y.has(St)&&r.push(Ht)}),Mn.forEach(gt=>{const St=s.get(gt.element);if(St&&St.length){const Ht=vm(St);gt.setRealPlayer(Ht)}}),r.forEach(gt=>{gt.parentPlayer?gt.syncPlayerEvents(gt.parentPlayer):gt.destroy()});for(let gt=0;gt<G.length;gt++){const St=G[gt],Ht=St[yu];if(Bb(St,lR),Ht&&Ht.hasAnimation)continue;let jt=[];if(d.size){let wi=d.get(St);wi&&wi.length&&jt.push(...wi);let sr=this.driver.query(St,WL,!0);for(let mo=0;mo<sr.length;mo++){let $n=d.get(sr[mo]);$n&&$n.length&&jt.push(...$n)}}const ii=jt.filter(wi=>!wi.destroyed);ii.length?wZ(this,St,ii):this.processLeaveNode(St)}return G.length=0,Zt.forEach(gt=>{this.players.push(gt),gt.onDone(()=>{gt.destroy();const St=this.players.indexOf(gt);this.players.splice(St,1)}),gt.play()}),Zt}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,r,s){let c=[];if(e){const d=this.playersByQueriedElement.get(t);d&&(c=d)}else{const d=this.playersByElement.get(t);if(d){const p=!s||s==aS;d.forEach(m=>{m.queued||!p&&m.triggerName!=r||c.push(m)})}}return(i||r)&&(c=c.filter(d=>!(i&&i!=d.namespaceId||r&&r!=d.triggerName))),c}_beforeAnimationBuild(t,e,i){const s=e.element,c=e.isRemovalTransition?void 0:t,d=e.isRemovalTransition?void 0:e.triggerName;for(const p of e.timelines){const m=p.element,y=m!==s,T=fl(i,m,[]);this._getPreviousPlayers(m,y,c,d,e.toState).forEach(x=>{const P=x.getRealPlayer();P.beforeDestroy&&P.beforeDestroy(),x.destroy(),T.push(x)})}ey(s,e.fromStyles)}_buildAnimation(t,e,i,r,s,c){const d=e.triggerName,p=e.element,m=[],y=new Set,T=new Set,A=e.timelines.map(P=>{const V=P.element;y.add(V);const G=V[yu];if(G&&G.removedBeforeQueried)return new iS(P.duration,P.delay);const te=V!==p,se=function bZ(n){const t=[];return wG(n,t),t}((i.get(V)||fZ).map(ct=>ct.getRealPlayer())).filter(ct=>!!ct.element&&ct.element===V),le=s.get(V),de=c.get(V),Oe=K3(this._normalizer,P.keyframes,le,de),je=this._buildPlayer(P,Oe,se);if(P.subTimeline&&r&&T.add(V),te){const ct=new o2(t,d,V);ct.setRealPlayer(je),m.push(ct)}return je});m.forEach(P=>{fl(this.playersByQueriedElement,P.element,[]).push(P),P.onDone(()=>function _Z(n,t,e){let i=n.get(t);if(i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&n.delete(t)}return i}(this.playersByQueriedElement,P.element,P))}),y.forEach(P=>fc(P,iG));const x=vm(A);return x.onDestroy(()=>{y.forEach(P=>Bb(P,iG)),Qd(p,e.toStyles)}),T.forEach(P=>{fl(r,P,[]).push(x)}),x}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new iS(t.duration,t.delay)}}class o2{constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i,this._player=new iS,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,i)=>{e.forEach(r=>UL(t,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){fl(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function yR(n){return n&&1===n.nodeType}function _G(n,t){const e=n.style.display;return n.style.display=t??"none",e}function vG(n,t,e,i,r){const s=[];e.forEach(p=>s.push(_G(p)));const c=[];i.forEach((p,m)=>{const y=new Map;p.forEach(T=>{const A=t.computeStyle(m,T,r);y.set(T,A),(!A||0==A.length)&&(m[yu]=pZ,c.push(m))}),n.set(m,y)});let d=0;return e.forEach(p=>_G(p,s[d++])),c}function yG(n,t){const e=new Map;if(n.forEach(d=>e.set(d,[])),0==t.length)return e;const r=new Set(t),s=new Map;function c(d){if(!d)return 1;let p=s.get(d);if(p)return p;const m=d.parentNode;return p=e.has(m)?m:r.has(m)?1:c(m),s.set(d,p),p}return t.forEach(d=>{const p=c(d);1!==p&&e.get(p).push(d)}),e}function fc(n,t){n.classList?.add(t)}function Bb(n,t){n.classList?.remove(t)}function wZ(n,t,e){vm(e).onDone(()=>n.processLeaveNode(t))}function wG(n,t){for(let e=0;e<n.length;e++){const i=n[e];i instanceof z3?wG(i.players,t):t.push(i)}}function bG(n,t,e){const i=e.get(n);if(!i)return!1;let r=t.get(n);return r?i.forEach(s=>r.add(s)):t.set(n,i),e.delete(n),!0}class wR{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new mZ(t,e,i),this._timelineEngine=new lZ(t,e,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,i,r,s){const c=t+"-"+r;let d=this._triggerCache[c];if(!d){const p=[],y=KL(this._driver,s,p,[]);if(p.length)throw function u7(n,t){return new l.vHH(3404,!1)}();d=function rZ(n,t,e){return new sZ(n,t,e)}(r,y,this._normalizer),this._triggerCache[c]=d}this._transitionEngine.registerTrigger(e,r,d)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,r){this._transitionEngine.insertNode(t,e,i,r)}onRemove(t,e,i){this._transitionEngine.removeNode(t,e,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,r){if("@"==i.charAt(0)){const[s,c]=Q3(i);this._timelineEngine.command(s,e,c,r)}else this._transitionEngine.trigger(t,e,i,r)}listen(t,e,i,r,s){if("@"==i.charAt(0)){const[c,d]=Q3(i);return this._timelineEngine.listen(c,e,d,s)}return this._transitionEngine.listen(t,e,i,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(t){this._transitionEngine.afterFlushAnimationsDone(t)}}let CZ=(()=>{class n{static#e=this.initialStylesByElement=new WeakMap;constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(e);s||n.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Qd(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Qd(this._element,this._initialStyles),this._endStyles&&(Qd(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(ey(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ey(this._element,this._endStyles),this._endStyles=null),Qd(this._element,this._initialStyles),this._state=3)}}return n})();function a2(n){let t=null;return n.forEach((e,i)=>{(function TZ(n){return"display"===n||"position"===n})(i)&&(t=t||new Map,t.set(i,e))}),t}class DG{constructor(t,e,i,r){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(t,e,i){return t.animate(this._convertKeyframesToObject(e),i)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&t.set(r,this._finished?i:aG(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class IZ{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return X3(t,e)}getParentElement(t){return GL(t)}query(t,e,i){return eG(t,e,i)}computeStyle(t,e,i){return window.getComputedStyle(t)[e]}animate(t,e,i,r,s,c=[]){const p={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(p.easing=s);const m=new Map,y=c.filter(x=>x instanceof DG);(function O7(n,t){return 0===n||0===t})(i,r)&&y.forEach(x=>{x.currentSnapshot.forEach((P,V)=>m.set(V,P))});let T=function N7(n){return n.length?n[0]instanceof Map?n:n.map(t=>rG(t)):[]}(e).map(x=>ym(x));T=function k7(n,t,e){if(e.size&&t.length){let i=t[0],r=[];if(e.forEach((s,c)=>{i.has(c)||r.push(c),i.set(c,s)}),r.length)for(let s=1;s<t.length;s++){let c=t[s];r.forEach(d=>c.set(d,aG(n,d)))}}return t}(t,T,m);const A=function EZ(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=a2(t[0]),t.length>1&&(i=a2(t[t.length-1]))):t instanceof Map&&(e=a2(t)),e||i?new CZ(n,e,i):null}(t,T);return new DG(t,T,p,A)}}let SZ=(()=>{class n extends j3{constructor(e,i){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(i.body,{id:"0",encapsulation:l.ifc.None,styles:[],data:{animation:[]}})}build(e){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?$3(e):e;return EG(this._renderer,null,i,"register",[r]),new AZ(i,this._renderer)}static#e=this.\u0275fac=function(i){return new(i||n)(l.LFG(l.FYo),l.LFG(ve))};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac})}return n})();class AZ extends wY{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new MZ(this._id,t,e||{},this._renderer)}}class MZ{constructor(t,e,i,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return EG(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function EG(n,t,e,i,r){return n.setProperty(t,`@@${e}:${i}`,r)}const CG="@.disabled";let NZ=(()=>{class n{constructor(e,i,r){this.delegate=e,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,i.onRemovalComplete=(s,c)=>{const d=c?.parentNode(s);d&&c.removeChild(d,s)}}createRenderer(e,i){const s=this.delegate.createRenderer(e,i);if(!(e&&i&&i.data&&i.data.animation)){let y=this._rendererCache.get(s);return y||(y=new TG("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,y)),y}const c=i.id,d=i.id+"-"+this._currentId;this._currentId++,this.engine.register(d,e);const p=y=>{Array.isArray(y)?y.forEach(p):this.engine.registerTrigger(c,d,e,y.name,y)};return i.data.animation.forEach(p),new xZ(this,d,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,r){e>=0&&e<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[c,d]=s;c(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(i){return new(i||n)(l.LFG(l.FYo),l.LFG(wR),l.LFG(l.R0b))};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac})}return n})();class TG{constructor(t,e,i,r){this.namespaceId=t,this.delegate=e,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(t){this.delegate.destroyNode?.(t)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,r=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){"@"==e.charAt(0)&&e==CG?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.delegate.listen(t,e,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class xZ extends TG{constructor(t,e,i,r,s){super(e,i,r,s),this.factory=t,this.namespaceId=e}setProperty(t,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==CG?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,e.slice(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i){if("@"==e.charAt(0)){const r=function RZ(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let s=e.slice(1),c="";return"@"!=s.charAt(0)&&([s,c]=function OZ(n){const t=n.indexOf(".");return[n.substring(0,t),n.slice(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,c,d=>{this.factory.scheduleListenerCallback(d._data||-1,i,d)})}return this.delegate.listen(t,e,i)}}let kZ=(()=>{class n extends wR{constructor(e,i,r,s){super(e.body,i,r)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(i){return new(i||n)(l.LFG(ve),l.LFG($L),l.LFG(t2),l.LFG(l.z2F))};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac})}return n})();const IG=[{provide:j3,useClass:SZ},{provide:t2,useFactory:function PZ(){return new eZ}},{provide:wR,useClass:kZ},{provide:l.FYo,useFactory:function FZ(n,t,e){return new NZ(n,t,e)},deps:[fa,wR,l.R0b]}],l2=[{provide:$L,useFactory:()=>new IZ},{provide:l.QbO,useValue:"BrowserAnimations"},...IG],SG=[{provide:$L,useClass:tG},{provide:l.QbO,useValue:"NoopAnimations"},...IG];let LZ=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?SG:l2}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=l.oAB({type:n});static#n=this.\u0275inj=l.cJS({providers:l2,imports:[Hu]})}return n})();var c2=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],Vb={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(n){return typeof console<"u"&&console.warn(n)},getWeek:function(n){var t=new Date(n.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var e=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},u2={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(n){var t=n%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1};const d2=u2;var Sa=function(n,t){return void 0===t&&(t=2),("000"+n).slice(-1*t)},pc=function(n){return!0===n?1:0};function AG(n,t){var e;return function(){var i=this,r=arguments;clearTimeout(e),e=setTimeout(function(){return n.apply(i,r)},t)}}var h2=function(n){return n instanceof Array?n:[n]};function ra(n,t,e){if(!0===e)return n.classList.add(t);n.classList.remove(t)}function li(n,t,e){var i=window.document.createElement(n);return e=e||"",i.className=t=t||"",void 0!==e&&(i.textContent=e),i}function DR(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function MG(n,t){return t(n)?n:n.parentNode?MG(n.parentNode,t):void 0}function ER(n,t){var e=li("div","numInputWrapper"),i=li("input","numInput "+n),r=li("span","arrowUp"),s=li("span","arrowDown");if(-1===navigator.userAgent.indexOf("MSIE 9.0")?i.type="number":(i.type="text",i.pattern="\\d*"),void 0!==t)for(var c in t)i.setAttribute(c,t[c]);return e.appendChild(i),e.appendChild(r),e.appendChild(s),e}function gl(n){try{return"function"==typeof n.composedPath?n.composedPath()[0]:n.target}catch{return n.target}}var f2=function(){},CR=function(n,t,e){return e.months[t?"shorthand":"longhand"][n]},BZ={D:f2,F:function(n,t,e){n.setMonth(e.months.longhand.indexOf(t))},G:function(n,t){n.setHours((n.getHours()>=12?12:0)+parseFloat(t))},H:function(n,t){n.setHours(parseFloat(t))},J:function(n,t){n.setDate(parseFloat(t))},K:function(n,t,e){n.setHours(n.getHours()%12+12*pc(new RegExp(e.amPM[1],"i").test(t)))},M:function(n,t,e){n.setMonth(e.months.shorthand.indexOf(t))},S:function(n,t){n.setSeconds(parseFloat(t))},U:function(n,t){return new Date(1e3*parseFloat(t))},W:function(n,t,e){var i=parseInt(t),r=new Date(n.getFullYear(),0,2+7*(i-1),0,0,0,0);return r.setDate(r.getDate()-r.getDay()+e.firstDayOfWeek),r},Y:function(n,t){n.setFullYear(parseFloat(t))},Z:function(n,t){return new Date(t)},d:function(n,t){n.setDate(parseFloat(t))},h:function(n,t){n.setHours((n.getHours()>=12?12:0)+parseFloat(t))},i:function(n,t){n.setMinutes(parseFloat(t))},j:function(n,t){n.setDate(parseFloat(t))},l:f2,m:function(n,t){n.setMonth(parseFloat(t)-1)},n:function(n,t){n.setMonth(parseFloat(t)-1)},s:function(n,t){n.setSeconds(parseFloat(t))},u:function(n,t){return new Date(parseFloat(t))},w:f2,y:function(n,t){n.setFullYear(2e3+parseFloat(t))}},ny={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},lS={Z:function(n){return n.toISOString()},D:function(n,t,e){return t.weekdays.shorthand[lS.w(n,t,e)]},F:function(n,t,e){return CR(lS.n(n,t,e)-1,!1,t)},G:function(n,t,e){return Sa(lS.h(n,t,e))},H:function(n){return Sa(n.getHours())},J:function(n,t){return void 0!==t.ordinal?n.getDate()+t.ordinal(n.getDate()):n.getDate()},K:function(n,t){return t.amPM[pc(n.getHours()>11)]},M:function(n,t){return CR(n.getMonth(),!0,t)},S:function(n){return Sa(n.getSeconds())},U:function(n){return n.getTime()/1e3},W:function(n,t,e){return e.getWeek(n)},Y:function(n){return Sa(n.getFullYear(),4)},d:function(n){return Sa(n.getDate())},h:function(n){return n.getHours()%12?n.getHours()%12:12},i:function(n){return Sa(n.getMinutes())},j:function(n){return n.getDate()},l:function(n,t){return t.weekdays.longhand[n.getDay()]},m:function(n){return Sa(n.getMonth()+1)},n:function(n){return n.getMonth()+1},s:function(n){return n.getSeconds()},u:function(n){return n.getTime()},w:function(n){return n.getDay()},y:function(n){return String(n.getFullYear()).substring(2)}},NG=function(n){var t=n.config,e=void 0===t?Vb:t,i=n.l10n,r=void 0===i?u2:i,s=n.isMobile,c=void 0!==s&&s;return function(d,p,m){var y=m||r;return void 0===e.formatDate||c?p.split("").map(function(T,A,x){return lS[T]&&"\\"!==x[A-1]?lS[T](d,y,e):"\\"!==T?T:""}).join(""):e.formatDate(d,p,y)}},p2=function(n){var t=n.config,e=void 0===t?Vb:t,i=n.l10n,r=void 0===i?u2:i;return function(s,c,d,p){if(0===s||s){var y,m=p||r,T=s;if(s instanceof Date)y=new Date(s.getTime());else if("string"!=typeof s&&void 0!==s.toFixed)y=new Date(s);else if("string"==typeof s){var A=c||(e||Vb).dateFormat,x=String(s).trim();if("today"===x)y=new Date,d=!0;else if(e&&e.parseDate)y=e.parseDate(s,A);else if(/Z$/.test(x)||/GMT$/.test(x))y=new Date(s);else{for(var P=void 0,V=[],G=0,te=0,se="";G<A.length;G++){var le=A[G],de="\\"===le;if(ny[le]&&"\\"!==A[G-1]&&!de){se+=ny[le];var je=new RegExp(se).exec(s);je&&(P=!0)&&V["Y"!==le?"push":"unshift"]({fn:BZ[le],val:je[++te]})}else de||(se+=".")}y=e&&e.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0),V.forEach(function(ct){return y=(0,ct.fn)(y,ct.val,m)||y}),y=P?y:void 0}}return y instanceof Date&&!isNaN(y.getTime())?(!0===d&&y.setHours(0,0,0,0),y):void e.errorHandler(new Error("Invalid date provided: "+T))}}};function ml(n,t,e){return void 0===e&&(e=!0),!1!==e?new Date(n.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):n.getTime()-t.getTime()}var VZ=function(n,t,e){return n>Math.min(t,e)&&n<Math.max(t,e)},g2=function(n,t,e){return 3600*n+60*t+e},UZ=function(n){var t=Math.floor(n/3600),e=(n-3600*t)/60;return[t,e,n-3600*t-60*e]},HZ={DAY:864e5};function m2(n){var t=n.defaultHour,e=n.defaultMinute,i=n.defaultSeconds;if(void 0!==n.minDate){var r=n.minDate.getHours(),s=n.minDate.getMinutes(),c=n.minDate.getSeconds();t<r&&(t=r),t===r&&e<s&&(e=s),t===r&&e===s&&i<c&&(i=n.minDate.getSeconds())}if(void 0!==n.maxDate){var d=n.maxDate.getHours(),p=n.maxDate.getMinutes();(t=Math.min(t,d))===d&&(e=Math.min(p,e)),t===d&&e===p&&(i=n.maxDate.getSeconds())}return{hours:t,minutes:e,seconds:i}}F(9706);var Lo=function(){return Lo=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++)for(var r in t=arguments[e])Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},Lo.apply(this,arguments)},xG=function(){for(var n=0,t=0,e=arguments.length;t<e;t++)n+=arguments[t].length;var i=Array(n),r=0;for(t=0;t<e;t++)for(var s=arguments[t],c=0,d=s.length;c<d;c++,r++)i[r]=s[c];return i},jZ=300;function GZ(n,t){var e={config:Lo(Lo({},Vb),bs.defaultConfig),l10n:d2};function s(){var H;return(null===(H=e.calendarContainer)||void 0===H?void 0:H.getRootNode()).activeElement||document.activeElement}function c(H){return H.bind(e)}function d(){var H=e.config;!1===H.weekNumbers&&1===H.showMonths||!0!==H.noCalendar&&window.requestAnimationFrame(function(){if(void 0!==e.calendarContainer&&(e.calendarContainer.style.visibility="hidden",e.calendarContainer.style.display="block"),void 0!==e.daysContainer){var z=(e.days.offsetWidth+1)*H.showMonths;e.daysContainer.style.width=z+"px",e.calendarContainer.style.width=z+(void 0!==e.weekWrapper?e.weekWrapper.offsetWidth:0)+"px",e.calendarContainer.style.removeProperty("visibility"),e.calendarContainer.style.removeProperty("display")}})}function p(H){if(0===e.selectedDates.length){var z=void 0===e.config.minDate||ml(new Date,e.config.minDate)>=0?new Date:new Date(e.config.minDate.getTime()),ue=m2(e.config);z.setHours(ue.hours,ue.minutes,ue.seconds,z.getMilliseconds()),e.selectedDates=[z],e.latestSelectedDateObj=z}void 0!==H&&"blur"!==H.type&&function $oe(H){H.preventDefault();var z="keydown"===H.type,ue=gl(H),ke=ue;void 0!==e.amPM&&ue===e.amPM&&(e.amPM.textContent=e.l10n.amPM[pc(e.amPM.textContent===e.l10n.amPM[0])]);var pt=parseFloat(ke.getAttribute("min")),At=parseFloat(ke.getAttribute("max")),Cn=parseFloat(ke.getAttribute("step")),$t=parseInt(ke.value,10),Vt=$t+Cn*(H.delta||(z?38===H.which?1:-1:0));if(typeof ke.value<"u"&&2===ke.value.length){var cn=ke===e.hourElement,Ui=ke===e.minuteElement;Vt<pt?(Vt=At+Vt+pc(!cn)+(pc(cn)&&pc(!e.amPM)),Ui&&de(void 0,-1,e.hourElement)):Vt>At&&(Vt=ke===e.hourElement?Vt-At-pc(!e.amPM):pt,Ui&&de(void 0,1,e.hourElement)),e.amPM&&cn&&(1===Cn?Vt+$t===23:Math.abs(Vt-$t)>Cn)&&(e.amPM.textContent=e.l10n.amPM[pc(e.amPM.textContent===e.l10n.amPM[0])]),ke.value=Sa(Vt)}}(H);var ke=e._input.value;T(),Kf(),e._input.value!==ke&&e._debouncedChange()}function T(){if(void 0!==e.hourElement&&void 0!==e.minuteElement){var H=(parseInt(e.hourElement.value.slice(-2),10)||0)%24,z=(parseInt(e.minuteElement.value,10)||0)%60,ue=void 0!==e.secondElement?(parseInt(e.secondElement.value,10)||0)%60:0;void 0!==e.amPM&&(H=function m(H,z){return H%12+12*pc(z===e.l10n.amPM[1])}(H,e.amPM.textContent));var ke=void 0!==e.config.minTime||e.config.minDate&&e.minDateHasTime&&e.latestSelectedDateObj&&0===ml(e.latestSelectedDateObj,e.config.minDate,!0),pt=void 0!==e.config.maxTime||e.config.maxDate&&e.maxDateHasTime&&e.latestSelectedDateObj&&0===ml(e.latestSelectedDateObj,e.config.maxDate,!0);if(void 0!==e.config.maxTime&&void 0!==e.config.minTime&&e.config.minTime>e.config.maxTime){var At=g2(e.config.minTime.getHours(),e.config.minTime.getMinutes(),e.config.minTime.getSeconds()),Cn=g2(e.config.maxTime.getHours(),e.config.maxTime.getMinutes(),e.config.maxTime.getSeconds()),$t=g2(H,z,ue);if($t>Cn&&$t<At){var Ln=UZ(At);H=Ln[0],z=Ln[1],ue=Ln[2]}}else{if(pt){var Vt=void 0!==e.config.maxTime?e.config.maxTime:e.config.maxDate;(H=Math.min(H,Vt.getHours()))===Vt.getHours()&&(z=Math.min(z,Vt.getMinutes())),z===Vt.getMinutes()&&(ue=Math.min(ue,Vt.getSeconds()))}if(ke){var cn=void 0!==e.config.minTime?e.config.minTime:e.config.minDate;(H=Math.max(H,cn.getHours()))===cn.getHours()&&z<cn.getMinutes()&&(z=cn.getMinutes()),z===cn.getMinutes()&&(ue=Math.max(ue,cn.getSeconds()))}}x(H,z,ue)}}function A(H){var z=H||e.latestSelectedDateObj;z&&z instanceof Date&&x(z.getHours(),z.getMinutes(),z.getSeconds())}function x(H,z,ue){void 0!==e.latestSelectedDateObj&&e.latestSelectedDateObj.setHours(H%24,z,ue||0,0),e.hourElement&&e.minuteElement&&!e.isMobile&&(e.hourElement.value=Sa(e.config.time_24hr?H:(12+H)%12+12*pc(H%12==0)),e.minuteElement.value=Sa(z),void 0!==e.amPM&&(e.amPM.textContent=e.l10n.amPM[pc(H>=12)]),void 0!==e.secondElement&&(e.secondElement.value=Sa(ue)))}function P(H){var z=gl(H),ue=parseInt(z.value)+(H.delta||0);(ue/1e3>1||"Enter"===H.key&&!/[^\d]/.test(ue.toString()))&&Ki(ue)}function V(H,z,ue,ke){return z instanceof Array?z.forEach(function(pt){return V(H,pt,ue,ke)}):H instanceof Array?H.forEach(function(pt){return V(pt,z,ue,ke)}):(H.addEventListener(z,ue,ke),void e._handlers.push({remove:function(){return H.removeEventListener(z,ue,ke)}}))}function G(){Pr("onChange")}function se(H,z){var ue=void 0!==H?e.parseDate(H):e.latestSelectedDateObj||(e.config.minDate&&e.config.minDate>e.now?e.config.minDate:e.config.maxDate&&e.config.maxDate<e.now?e.config.maxDate:e.now),ke=e.currentYear,pt=e.currentMonth;try{void 0!==ue&&(e.currentYear=ue.getFullYear(),e.currentMonth=ue.getMonth())}catch(At){At.message="Invalid date supplied: "+ue,e.config.errorHandler(At)}z&&e.currentYear!==ke&&(Pr("onYearChange"),Zt()),z&&(e.currentYear!==ke||e.currentMonth!==pt)&&Pr("onMonthChange"),e.redraw()}function le(H){var z=gl(H);~z.className.indexOf("arrow")&&de(H,z.classList.contains("arrowUp")?1:-1)}function de(H,z,ue){var ke=H&&gl(H),pt=ue||ke&&ke.parentNode&&ke.parentNode.firstChild,At=jB("increment");At.delta=z,pt&&pt.dispatchEvent(At)}function je(H,z,ue,ke){var pt=kr(z,!0),At=li("span",H,z.getDate().toString());return At.dateObj=z,At.$i=ke,At.setAttribute("aria-label",e.formatDate(z,e.config.ariaDateFormat)),-1===H.indexOf("hidden")&&0===ml(z,e.now)&&(e.todayDateElem=At,At.classList.add("today"),At.setAttribute("aria-current","date")),pt?(At.tabIndex=-1,GB(z)&&(At.classList.add("selected"),e.selectedDateElem=At,"range"===e.config.mode&&(ra(At,"startRange",e.selectedDates[0]&&0===ml(z,e.selectedDates[0],!0)),ra(At,"endRange",e.selectedDates[1]&&0===ml(z,e.selectedDates[1],!0)),"nextMonthDay"===H&&At.classList.add("inRange")))):At.classList.add("flatpickr-disabled"),"range"===e.config.mode&&function joe(H){return!("range"!==e.config.mode||e.selectedDates.length<2)&&ml(H,e.selectedDates[0])>=0&&ml(H,e.selectedDates[1])<=0}(z)&&!GB(z)&&At.classList.add("inRange"),e.weekNumbers&&1===e.config.showMonths&&"prevMonthDay"!==H&&ke%7==6&&e.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+e.config.getWeek(z)+"</span>"),Pr("onDayCreate",At),At}function ct(H){H.focus(),"range"===e.config.mode&&lD(H)}function nt(H){for(var ue=H>0?e.config.showMonths:-1,ke=H>0?0:e.config.showMonths-1;ke!=ue;ke+=H)for(var pt=e.daysContainer.children[ke],Cn=H>0?pt.children.length:-1,$t=H>0?0:pt.children.length-1;$t!=Cn;$t+=H){var Ln=pt.children[$t];if(-1===Ln.className.indexOf("hidden")&&kr(Ln.dateObj))return Ln}}function Tt(H,z){var ue=s(),ke=rs(ue||document.body),pt=void 0!==H?H:ke?ue:void 0!==e.selectedDateElem&&rs(e.selectedDateElem)?e.selectedDateElem:void 0!==e.todayDateElem&&rs(e.todayDateElem)?e.todayDateElem:nt(z>0?1:-1);void 0===pt?e._input.focus():ke?function _t(H,z){for(var ue=-1===H.className.indexOf("Month")?H.dateObj.getMonth():e.currentMonth,ke=z>0?e.config.showMonths:-1,pt=z>0?1:-1,At=ue-e.currentMonth;At!=ke;At+=pt)for(var Cn=e.daysContainer.children[At],Ln=Cn.children.length,Vt=ue-e.currentMonth===At?H.$i+z:z<0?Cn.children.length-1:0;Vt>=0&&Vt<Ln&&Vt!=(z>0?Ln:-1);Vt+=pt){var cn=Cn.children[Vt];if(-1===cn.className.indexOf("hidden")&&kr(cn.dateObj)&&Math.abs(H.$i-Vt)>=Math.abs(z))return ct(cn)}e.changeMonth(pt),Tt(nt(pt),0)}(pt,z):ct(pt)}function rt(H,z){for(var ue=(new Date(H,z,1).getDay()-e.l10n.firstDayOfWeek+7)%7,ke=e.utils.getDaysInMonth((z-1+12)%12,H),pt=e.utils.getDaysInMonth(z,H),At=window.document.createDocumentFragment(),Cn=e.config.showMonths>1,$t=Cn?"prevMonthDay hidden":"prevMonthDay",Ln=Cn?"nextMonthDay hidden":"nextMonthDay",Vt=ke+1-ue,cn=0;Vt<=ke;Vt++,cn++)At.appendChild(je("flatpickr-day "+$t,new Date(H,z-1,Vt),0,cn));for(Vt=1;Vt<=pt;Vt++,cn++)At.appendChild(je("flatpickr-day",new Date(H,z,Vt),0,cn));for(var Ui=pt+1;Ui<=42-ue&&(1===e.config.showMonths||cn%7!=0);Ui++,cn++)At.appendChild(je("flatpickr-day "+Ln,new Date(H,z+1,Ui%pt),0,cn));var ih=li("div","dayContainer");return ih.appendChild(At),ih}function tt(){if(void 0!==e.daysContainer){DR(e.daysContainer),e.weekNumbers&&DR(e.weekNumbers);for(var H=document.createDocumentFragment(),z=0;z<e.config.showMonths;z++){var ue=new Date(e.currentYear,e.currentMonth,1);ue.setMonth(e.currentMonth+z),H.appendChild(rt(ue.getFullYear(),ue.getMonth()))}e.daysContainer.appendChild(H),e.days=e.daysContainer.firstChild,"range"===e.config.mode&&1===e.selectedDates.length&&lD()}}function Zt(){if(!(e.config.showMonths>1||"dropdown"!==e.config.monthSelectorType)){e.monthsDropdownContainer.tabIndex=-1,e.monthsDropdownContainer.innerHTML="";for(var z=0;z<12;z++)if(ke=z,!(void 0!==e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&ke<e.config.minDate.getMonth()||void 0!==e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()&&ke>e.config.maxDate.getMonth())){var ue=li("option","flatpickr-monthDropdown-month");ue.value=new Date(e.currentYear,z).getMonth().toString(),ue.textContent=CR(z,e.config.shorthandCurrentMonth,e.l10n),ue.tabIndex=-1,e.currentMonth===z&&(ue.selected=!0),e.monthsDropdownContainer.appendChild(ue)}}var ke}function Mn(){var ue,H=li("div","flatpickr-month"),z=window.document.createDocumentFragment();e.config.showMonths>1||"static"===e.config.monthSelectorType?ue=li("span","cur-month"):(e.monthsDropdownContainer=li("select","flatpickr-monthDropdown-months"),e.monthsDropdownContainer.setAttribute("aria-label",e.l10n.monthAriaLabel),V(e.monthsDropdownContainer,"change",function(Cn){var $t=gl(Cn),Ln=parseInt($t.value,10);e.changeMonth(Ln-e.currentMonth),Pr("onMonthChange")}),Zt(),ue=e.monthsDropdownContainer);var ke=ER("cur-year",{tabindex:"-1"}),pt=ke.getElementsByTagName("input")[0];pt.setAttribute("aria-label",e.l10n.yearAriaLabel),e.config.minDate&&pt.setAttribute("min",e.config.minDate.getFullYear().toString()),e.config.maxDate&&(pt.setAttribute("max",e.config.maxDate.getFullYear().toString()),pt.disabled=!!e.config.minDate&&e.config.minDate.getFullYear()===e.config.maxDate.getFullYear());var At=li("div","flatpickr-current-month");return At.appendChild(ue),At.appendChild(ke),z.appendChild(At),H.appendChild(z),{container:H,yearElement:pt,monthElement:ue}}function go(){DR(e.monthNav),e.monthNav.appendChild(e.prevMonthNav),e.config.showMonths&&(e.yearElements=[],e.monthElements=[]);for(var H=e.config.showMonths;H--;){var z=Mn();e.yearElements.push(z.yearElement),e.monthElements.push(z.monthElement),e.monthNav.appendChild(z.container)}e.monthNav.appendChild(e.nextMonthNav)}function Ht(){e.weekdayContainer?DR(e.weekdayContainer):e.weekdayContainer=li("div","flatpickr-weekdays");for(var H=e.config.showMonths;H--;){var z=li("div","flatpickr-weekdaycontainer");e.weekdayContainer.appendChild(z)}return jt(),e.weekdayContainer}function jt(){if(e.weekdayContainer){var H=e.l10n.firstDayOfWeek,z=xG(e.l10n.weekdays.shorthand);H>0&&H<z.length&&(z=xG(z.splice(H,z.length),z.splice(0,H)));for(var ue=e.config.showMonths;ue--;)e.weekdayContainer.children[ue].innerHTML="\n      <span class='flatpickr-weekday'>\n        "+z.join("</span><span class='flatpickr-weekday'>")+"\n      </span>\n      "}}function wi(H,z){void 0===z&&(z=!0);var ue=z?H:H-e.currentMonth;ue<0&&!0===e._hidePrevMonthArrow||ue>0&&!0===e._hideNextMonthArrow||(e.currentMonth+=ue,(e.currentMonth<0||e.currentMonth>11)&&(e.currentYear+=e.currentMonth>11?1:-1,e.currentMonth=(e.currentMonth+12)%12,Pr("onYearChange"),Zt()),tt(),Pr("onMonthChange"),MO())}function Cs(H){return e.calendarContainer.contains(H)}function bl(H){if(e.isOpen&&!e.config.inline){var z=gl(H),ue=Cs(z),pt=!(z===e.input||z===e.altInput||e.element.contains(z)||H.path&&H.path.indexOf&&(~H.path.indexOf(e.input)||~H.path.indexOf(e.altInput))||ue||Cs(H.relatedTarget)),At=!e.config.ignoredFocusElements.some(function(Cn){return Cn.contains(z)});pt&&At&&(e.config.allowInput&&e.setDate(e._input.value,!1,e.config.altInput?e.config.altFormat:e.config.dateFormat),void 0!==e.timeContainer&&void 0!==e.minuteElement&&void 0!==e.hourElement&&""!==e.input.value&&void 0!==e.input.value&&p(),e.close(),e.config&&"range"===e.config.mode&&1===e.selectedDates.length&&e.clear(!1))}}function Ki(H){if(!(!H||e.config.minDate&&H<e.config.minDate.getFullYear()||e.config.maxDate&&H>e.config.maxDate.getFullYear())){var ue=e.currentYear!==H;e.currentYear=H||e.currentYear,e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth=Math.min(e.config.maxDate.getMonth(),e.currentMonth):e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&(e.currentMonth=Math.max(e.config.minDate.getMonth(),e.currentMonth)),ue&&(e.redraw(),Pr("onYearChange"),Zt())}}function kr(H,z){var ue;void 0===z&&(z=!0);var ke=e.parseDate(H,void 0,z);if(e.config.minDate&&ke&&ml(ke,e.config.minDate,void 0!==z?z:!e.minDateHasTime)<0||e.config.maxDate&&ke&&ml(ke,e.config.maxDate,void 0!==z?z:!e.maxDateHasTime)>0)return!1;if(!e.config.enable&&0===e.config.disable.length)return!0;if(void 0===ke)return!1;for(var pt=!!e.config.enable,At=null!==(ue=e.config.enable)&&void 0!==ue?ue:e.config.disable,Cn=0,$t=void 0;Cn<At.length;Cn++){if("function"==typeof($t=At[Cn])&&$t(ke))return pt;if($t instanceof Date&&void 0!==ke&&$t.getTime()===ke.getTime())return pt;if("string"==typeof $t){var Ln=e.parseDate($t,void 0,!0);return Ln&&Ln.getTime()===ke.getTime()?pt:!pt}if("object"==typeof $t&&void 0!==ke&&$t.from&&$t.to&&ke.getTime()>=$t.from.getTime()&&ke.getTime()<=$t.to.getTime())return pt}return!pt}function rs(H){return void 0!==e.daysContainer&&-1===H.className.indexOf("hidden")&&-1===H.className.indexOf("flatpickr-disabled")&&e.daysContainer.contains(H)}function Tm(H){var z=H.target===e._input,ue=e._input.value.trimEnd()!==$B();z&&ue&&(!H.relatedTarget||!Cs(H.relatedTarget))&&e.setDate(e._input.value,!0,H.target===e.altInput?e.config.altFormat:e.config.dateFormat)}function nh(H){var z=gl(H),ue=e.config.wrap?n.contains(z):z===e._input,ke=e.config.allowInput,pt=e.isOpen&&(!ke||!ue),At=e.config.inline&&ue&&!ke;if(13===H.keyCode&&ue){if(ke)return e.setDate(e._input.value,!0,z===e.altInput?e.config.altFormat:e.config.dateFormat),e.close(),z.blur();e.open()}else if(Cs(z)||pt||At){var Cn=!!e.timeContainer&&e.timeContainer.contains(z);switch(H.keyCode){case 13:Cn?(H.preventDefault(),p(),dD()):hD(H);break;case 27:H.preventDefault(),dD();break;case 8:case 46:ue&&!e.config.allowInput&&(H.preventDefault(),e.clear());break;case 37:case 39:if(Cn||ue)e.hourElement&&e.hourElement.focus();else{H.preventDefault();var $t=s();if(void 0!==e.daysContainer&&(!1===ke||$t&&rs($t))){var Ln=39===H.keyCode?1:-1;H.ctrlKey?(H.stopPropagation(),wi(Ln),Tt(nt(1),0)):Tt(void 0,Ln)}}break;case 38:case 40:H.preventDefault();var Vt=40===H.keyCode?1:-1;e.daysContainer&&void 0!==z.$i||z===e.input||z===e.altInput?H.ctrlKey?(H.stopPropagation(),Ki(e.currentYear-Vt),Tt(nt(1),0)):Cn||Tt(void 0,7*Vt):z===e.currentYearElement?Ki(e.currentYear-Vt):e.config.enableTime&&(!Cn&&e.hourElement&&e.hourElement.focus(),p(H),e._debouncedChange());break;case 9:if(Cn){var cn=[e.hourElement,e.minuteElement,e.secondElement,e.amPM].concat(e.pluginElements).filter(function(Dl){return Dl}),Ui=cn.indexOf(z);if(-1!==Ui){var ih=cn[Ui+(H.shiftKey?-1:1)];H.preventDefault(),(ih||e._input).focus()}}else!e.config.noCalendar&&e.daysContainer&&e.daysContainer.contains(z)&&H.shiftKey&&(H.preventDefault(),e._input.focus())}}if(void 0!==e.amPM&&z===e.amPM)switch(H.key){case e.l10n.amPM[0].charAt(0):case e.l10n.amPM[0].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[0],T(),Kf();break;case e.l10n.amPM[1].charAt(0):case e.l10n.amPM[1].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[1],T(),Kf()}(ue||Cs(z))&&Pr("onKeyDown",H)}function lD(H,z){if(void 0===z&&(z="flatpickr-day"),1===e.selectedDates.length&&(!H||H.classList.contains(z)&&!H.classList.contains("flatpickr-disabled"))){for(var ue=H?H.dateObj.getTime():e.days.firstElementChild.dateObj.getTime(),ke=e.parseDate(e.selectedDates[0],void 0,!0).getTime(),pt=Math.min(ue,e.selectedDates[0].getTime()),At=Math.max(ue,e.selectedDates[0].getTime()),Cn=!1,$t=0,Ln=0,Vt=pt;Vt<At;Vt+=HZ.DAY)kr(new Date(Vt),!0)||(Cn=Cn||Vt>pt&&Vt<At,Vt<ke&&(!$t||Vt>$t)?$t=Vt:Vt>ke&&(!Ln||Vt<Ln)&&(Ln=Vt));Array.from(e.rContainer.querySelectorAll("*:nth-child(-n+"+e.config.showMonths+") > ."+z)).forEach(function(Ui){var Dl=Ui.dateObj.getTime(),KS=$t>0&&Dl<$t||Ln>0&&Dl>Ln;if(KS)return Ui.classList.add("notAllowed"),void["inRange","startRange","endRange"].forEach(function(fD){Ui.classList.remove(fD)});Cn&&!KS||(["startRange","inRange","endRange","notAllowed"].forEach(function(fD){Ui.classList.remove(fD)}),void 0!==H&&(H.classList.add(ue<=e.selectedDates[0].getTime()?"startRange":"endRange"),ke<ue&&Dl===ke?Ui.classList.add("startRange"):ke>ue&&Dl===ke&&Ui.classList.add("endRange"),Dl>=$t&&(0===Ln||Dl<=Ln)&&VZ(Dl,ke,ue)&&Ui.classList.add("inRange")))})}}function EO(){e.isOpen&&!e.config.static&&!e.config.inline&&cD()}function CO(H){return function(z){var ue=e.config["_"+H+"Date"]=e.parseDate(z,e.config.dateFormat),ke=e.config["_"+("min"===H?"max":"min")+"Date"];void 0!==ue&&(e["min"===H?"minDateHasTime":"maxDateHasTime"]=ue.getHours()>0||ue.getMinutes()>0||ue.getSeconds()>0),e.selectedDates&&(e.selectedDates=e.selectedDates.filter(function(pt){return kr(pt)}),!e.selectedDates.length&&"min"===H&&A(ue),Kf()),e.daysContainer&&(YS(),void 0!==ue?e.currentYearElement[H]=ue.getFullYear().toString():e.currentYearElement.removeAttribute(H),e.currentYearElement.disabled=!!ke&&void 0!==ue&&ke.getFullYear()===ue.getFullYear())}}function qS(){return e.config.wrap?n.querySelector("[data-input]"):n}function IO(){"object"!=typeof e.config.locale&&typeof bs.l10ns[e.config.locale]>"u"&&e.config.errorHandler(new Error("flatpickr: invalid locale "+e.config.locale)),e.l10n=Lo(Lo({},bs.l10ns.default),"object"==typeof e.config.locale?e.config.locale:"default"!==e.config.locale?bs.l10ns[e.config.locale]:void 0),ny.D="("+e.l10n.weekdays.shorthand.join("|")+")",ny.l="("+e.l10n.weekdays.longhand.join("|")+")",ny.M="("+e.l10n.months.shorthand.join("|")+")",ny.F="("+e.l10n.months.longhand.join("|")+")",ny.K="("+e.l10n.amPM[0]+"|"+e.l10n.amPM[1]+"|"+e.l10n.amPM[0].toLowerCase()+"|"+e.l10n.amPM[1].toLowerCase()+")",void 0===Lo(Lo({},t),JSON.parse(JSON.stringify(n.dataset||{}))).time_24hr&&void 0===bs.defaultConfig.time_24hr&&(e.config.time_24hr=e.l10n.time_24hr),e.formatDate=NG(e),e.parseDate=p2({config:e.config,l10n:e.l10n})}function cD(H){if("function"!=typeof e.config.position){if(void 0!==e.calendarContainer){Pr("onPreCalendarPosition");var z=H||e._positionElement,ue=Array.prototype.reduce.call(e.calendarContainer.children,function(Joe,Xoe){return Joe+Xoe.offsetHeight},0),ke=e.calendarContainer.offsetWidth,pt=e.config.position.split(" "),At=pt[0],Cn=pt.length>1?pt[1]:null,$t=z.getBoundingClientRect(),Ln=window.innerHeight-$t.bottom,Vt="above"===At||"below"!==At&&Ln<ue&&$t.top>ue,cn=window.pageYOffset+$t.top+(Vt?-ue-2:z.offsetHeight+2);if(ra(e.calendarContainer,"arrowTop",!Vt),ra(e.calendarContainer,"arrowBottom",Vt),!e.config.inline){var Ui=window.pageXOffset+$t.left,ih=!1,Dl=!1;"center"===Cn?(Ui-=(ke-$t.width)/2,ih=!0):"right"===Cn&&(Ui-=ke-$t.width,Dl=!0),ra(e.calendarContainer,"arrowLeft",!ih&&!Dl),ra(e.calendarContainer,"arrowCenter",ih),ra(e.calendarContainer,"arrowRight",Dl);var KS=window.document.body.offsetWidth-(window.pageXOffset+$t.right),fD=Ui+ke>window.document.body.offsetWidth,zoe=KS+ke>window.document.body.offsetWidth;if(ra(e.calendarContainer,"rightMost",fD),!e.config.static)if(e.calendarContainer.style.top=cn+"px",fD)if(zoe){var zB=function Zf(){for(var H=null,z=0;z<document.styleSheets.length;z++){var ue=document.styleSheets[z];if(ue.cssRules){H=ue;break}}return H??function uD(){var H=document.createElement("style");return document.head.appendChild(H),H.sheet}()}();if(void 0===zB)return;var Woe=window.document.body.offsetWidth,qoe=Math.max(0,Woe/2-ke/2),Koe=zB.cssRules.length,Qoe="{left:"+$t.left+"px;right:auto;}";ra(e.calendarContainer,"rightMost",!1),ra(e.calendarContainer,"centerMost",!0),zB.insertRule(".flatpickr-calendar.centerMost:before,.flatpickr-calendar.centerMost:after"+Qoe,Koe),e.calendarContainer.style.left=qoe+"px",e.calendarContainer.style.right="auto"}else e.calendarContainer.style.left="auto",e.calendarContainer.style.right=KS+"px";else e.calendarContainer.style.left=Ui+"px",e.calendarContainer.style.right="auto"}}}else e.config.position(e,H)}function YS(){e.config.noCalendar||e.isMobile||(Zt(),MO(),tt())}function dD(){e._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(e.close,0):e.close()}function hD(H){H.preventDefault(),H.stopPropagation();var ue=MG(gl(H),function(cn){return cn.classList&&cn.classList.contains("flatpickr-day")&&!cn.classList.contains("flatpickr-disabled")&&!cn.classList.contains("notAllowed")});if(void 0!==ue){var ke=ue,pt=e.latestSelectedDateObj=new Date(ke.dateObj.getTime()),At=(pt.getMonth()<e.currentMonth||pt.getMonth()>e.currentMonth+e.config.showMonths-1)&&"range"!==e.config.mode;if(e.selectedDateElem=ke,"single"===e.config.mode)e.selectedDates=[pt];else if("multiple"===e.config.mode){var Cn=GB(pt);Cn?e.selectedDates.splice(parseInt(Cn),1):e.selectedDates.push(pt)}else"range"===e.config.mode&&(2===e.selectedDates.length&&e.clear(!1,!1),e.latestSelectedDateObj=pt,e.selectedDates.push(pt),0!==ml(pt,e.selectedDates[0],!0)&&e.selectedDates.sort(function(cn,Ui){return cn.getTime()-Ui.getTime()}));if(T(),At){var $t=e.currentYear!==pt.getFullYear();e.currentYear=pt.getFullYear(),e.currentMonth=pt.getMonth(),$t&&(Pr("onYearChange"),Zt()),Pr("onMonthChange")}MO(),tt(),Kf(),At||"range"===e.config.mode||1!==e.config.showMonths?void 0!==e.selectedDateElem&&void 0===e.hourElement&&e.selectedDateElem&&e.selectedDateElem.focus():ct(ke),void 0!==e.hourElement&&void 0!==e.hourElement&&e.hourElement.focus(),e.config.closeOnSelect&&("single"===e.config.mode&&!e.config.enableTime||"range"===e.config.mode&&2===e.selectedDates.length&&!e.config.enableTime)&&dD(),G()}}e.parseDate=p2({config:e.config,l10n:e.l10n}),e._handlers=[],e.pluginElements=[],e.loadedPlugins=[],e._bind=V,e._setHoursFromDate=A,e._positionCalendar=cD,e.changeMonth=wi,e.changeYear=Ki,e.clear=function sr(H,z){if(void 0===H&&(H=!0),void 0===z&&(z=!0),e.input.value="",void 0!==e.altInput&&(e.altInput.value=""),void 0!==e.mobileInput&&(e.mobileInput.value=""),e.selectedDates=[],e.latestSelectedDateObj=void 0,!0===z&&(e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth()),!0===e.config.enableTime){var ue=m2(e.config);x(ue.hours,ue.minutes,ue.seconds)}e.redraw(),H&&Pr("onChange")},e.close=function mo(){e.isOpen=!1,e.isMobile||(void 0!==e.calendarContainer&&e.calendarContainer.classList.remove("open"),void 0!==e._input&&e._input.classList.remove("active")),Pr("onClose")},e.onMouseOver=lD,e._createElement=li,e.createDay=je,e.destroy=function $n(){void 0!==e.config&&Pr("onDestroy");for(var H=e._handlers.length;H--;)e._handlers[H].remove();if(e._handlers=[],e.mobileInput)e.mobileInput.parentNode&&e.mobileInput.parentNode.removeChild(e.mobileInput),e.mobileInput=void 0;else if(e.calendarContainer&&e.calendarContainer.parentNode)if(e.config.static&&e.calendarContainer.parentNode){var z=e.calendarContainer.parentNode;if(z.lastChild&&z.removeChild(z.lastChild),z.parentNode){for(;z.firstChild;)z.parentNode.insertBefore(z.firstChild,z);z.parentNode.removeChild(z)}}else e.calendarContainer.parentNode.removeChild(e.calendarContainer);e.altInput&&(e.input.type="text",e.altInput.parentNode&&e.altInput.parentNode.removeChild(e.altInput),delete e.altInput),e.input&&(e.input.type=e.input._type,e.input.classList.remove("flatpickr-input"),e.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(ue){try{delete e[ue]}catch{}})},e.isEnabled=kr,e.jumpToDate=se,e.updateValue=Kf,e.open=function HB(H,z){if(void 0===z&&(z=e._positionElement),!0===e.isMobile){if(H){H.preventDefault();var ue=gl(H);ue&&ue.blur()}return void 0!==e.mobileInput&&(e.mobileInput.focus(),e.mobileInput.click()),void Pr("onOpen")}if(!e._input.disabled&&!e.config.inline){var ke=e.isOpen;e.isOpen=!0,ke||(e.calendarContainer.classList.add("open"),e._input.classList.add("active"),Pr("onOpen"),cD(z)),!0===e.config.enableTime&&!0===e.config.noCalendar&&!1===e.config.allowInput&&(void 0===H||!e.timeContainer.contains(H.relatedTarget))&&setTimeout(function(){return e.hourElement.select()},50)}},e.redraw=YS,e.set=function SO(H,z){if(null!==H&&"object"==typeof H)for(var ue in Object.assign(e.config,H),H)void 0!==Dy[ue]&&Dy[ue].forEach(function(ke){return ke()});else e.config[H]=z,void 0!==Dy[H]?Dy[H].forEach(function(ke){return ke()}):c2.indexOf(H)>-1&&(e.config[H]=h2(z));e.redraw(),Kf(!0)},e.setDate=function AO(H,z,ue){if(void 0===z&&(z=!1),void 0===ue&&(ue=e.config.dateFormat),0!==H&&!H||H instanceof Array&&0===H.length)return e.clear(z);ZS(H,ue),e.latestSelectedDateObj=e.selectedDates[e.selectedDates.length-1],e.redraw(),se(void 0,z),A(),0===e.selectedDates.length&&e.clear(!1),Kf(z),z&&Pr("onChange")},e.toggle=function Hoe(H){if(!0===e.isOpen)return e.close();e.open(H)};var Dy={locale:[IO,jt],showMonths:[go,d,Ht],minDate:[se],maxDate:[se],positionElement:[Jz],clickOpens:[function(){!0===e.config.clickOpens?(V(e._input,"focus",e.open),V(e._input,"click",e.open)):(e._input.removeEventListener("focus",e.open),e._input.removeEventListener("click",e.open))}]};function ZS(H,z){var ue=[];if(H instanceof Array)ue=H.map(function(ke){return e.parseDate(ke,z)});else if(H instanceof Date||"number"==typeof H)ue=[e.parseDate(H,z)];else if("string"==typeof H)switch(e.config.mode){case"single":case"time":ue=[e.parseDate(H,z)];break;case"multiple":ue=H.split(e.config.conjunction).map(function(ke){return e.parseDate(ke,z)});break;case"range":ue=H.split(e.l10n.rangeSeparator).map(function(ke){return e.parseDate(ke,z)})}else e.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(H)));e.selectedDates=e.config.allowInvalidPreload?ue:ue.filter(function(ke){return ke instanceof Date&&kr(ke,!1)}),"range"===e.config.mode&&e.selectedDates.sort(function(ke,pt){return ke.getTime()-pt.getTime()})}function Qz(H){return H.slice().map(function(z){return"string"==typeof z||"number"==typeof z||z instanceof Date?e.parseDate(z,void 0,!0):z&&"object"==typeof z&&z.from&&z.to?{from:e.parseDate(z.from,void 0),to:e.parseDate(z.to,void 0)}:z}).filter(function(z){return z})}function Jz(){e._positionElement=e.config.positionElement||e._input}function Pr(H,z){if(void 0!==e.config){var ue=e.config[H];if(void 0!==ue&&ue.length>0)for(var ke=0;ue[ke]&&ke<ue.length;ke++)ue[ke](e.selectedDates,e.input.value,e,z);"onChange"===H&&(e.input.dispatchEvent(jB("change")),e.input.dispatchEvent(jB("input")))}}function jB(H){var z=document.createEvent("Event");return z.initEvent(H,!0,!0),z}function GB(H){for(var z=0;z<e.selectedDates.length;z++){var ue=e.selectedDates[z];if(ue instanceof Date&&0===ml(ue,H))return""+z}return!1}function MO(){e.config.noCalendar||e.isMobile||!e.monthNav||(e.yearElements.forEach(function(H,z){var ue=new Date(e.currentYear,e.currentMonth,1);ue.setMonth(e.currentMonth+z),e.config.showMonths>1||"static"===e.config.monthSelectorType?e.monthElements[z].textContent=CR(ue.getMonth(),e.config.shorthandCurrentMonth,e.l10n)+" ":e.monthsDropdownContainer.value=ue.getMonth().toString(),H.value=ue.getFullYear().toString()}),e._hidePrevMonthArrow=void 0!==e.config.minDate&&(e.currentYear===e.config.minDate.getFullYear()?e.currentMonth<=e.config.minDate.getMonth():e.currentYear<e.config.minDate.getFullYear()),e._hideNextMonthArrow=void 0!==e.config.maxDate&&(e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth+1>e.config.maxDate.getMonth():e.currentYear>e.config.maxDate.getFullYear()))}function $B(H){var z=H||(e.config.altInput?e.config.altFormat:e.config.dateFormat);return e.selectedDates.map(function(ue){return e.formatDate(ue,z)}).filter(function(ue,ke,pt){return"range"!==e.config.mode||e.config.enableTime||pt.indexOf(ue)===ke}).join("range"!==e.config.mode?e.config.conjunction:e.l10n.rangeSeparator)}function Kf(H){void 0===H&&(H=!0),void 0!==e.mobileInput&&e.mobileFormatStr&&(e.mobileInput.value=void 0!==e.latestSelectedDateObj?e.formatDate(e.latestSelectedDateObj,e.mobileFormatStr):""),e.input.value=$B(e.config.dateFormat),void 0!==e.altInput&&(e.altInput.value=$B(e.config.altFormat)),!1!==H&&Pr("onValueUpdate")}function Goe(H){var z=gl(H),ue=e.prevMonthNav.contains(z),ke=e.nextMonthNav.contains(z);ue||ke?wi(ue?-1:1):e.yearElements.indexOf(z)>=0?z.select():z.classList.contains("arrowUp")?e.changeYear(e.currentYear+1):z.classList.contains("arrowDown")&&e.changeYear(e.currentYear-1)}return function r(){e.element=e.input=n,e.isOpen=!1,function TO(){var H=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],z=Lo(Lo({},JSON.parse(JSON.stringify(n.dataset||{}))),t),ue={};e.config.parseDate=z.parseDate,e.config.formatDate=z.formatDate,Object.defineProperty(e.config,"enable",{get:function(){return e.config._enable},set:function(cn){e.config._enable=Qz(cn)}}),Object.defineProperty(e.config,"disable",{get:function(){return e.config._disable},set:function(cn){e.config._disable=Qz(cn)}});var ke="time"===z.mode;z.dateFormat||!z.enableTime&&!ke||(ue.dateFormat=z.noCalendar||ke?"H:i"+(z.enableSeconds?":S":""):(bs.defaultConfig.dateFormat||Vb.dateFormat)+" H:i"+(z.enableSeconds?":S":"")),z.altInput&&(z.enableTime||ke)&&!z.altFormat&&(ue.altFormat=z.noCalendar||ke?"h:i"+(z.enableSeconds?":S K":" K"):(bs.defaultConfig.altFormat||Vb.altFormat)+" h:i"+(z.enableSeconds?":S":"")+" K"),Object.defineProperty(e.config,"minDate",{get:function(){return e.config._minDate},set:CO("min")}),Object.defineProperty(e.config,"maxDate",{get:function(){return e.config._maxDate},set:CO("max")});var Cn=function(cn){return function(Ui){e.config["min"===cn?"_minTime":"_maxTime"]=e.parseDate(Ui,"H:i:S")}};Object.defineProperty(e.config,"minTime",{get:function(){return e.config._minTime},set:Cn("min")}),Object.defineProperty(e.config,"maxTime",{get:function(){return e.config._maxTime},set:Cn("max")}),"time"===z.mode&&(e.config.noCalendar=!0,e.config.enableTime=!0),Object.assign(e.config,ue,z);for(var $t=0;$t<H.length;$t++)e.config[H[$t]]=!0===e.config[H[$t]]||"true"===e.config[H[$t]];for(c2.filter(function(cn){return void 0!==e.config[cn]}).forEach(function(cn){e.config[cn]=h2(e.config[cn]||[]).map(c)}),e.isMobile=!e.config.disableMobile&&!e.config.inline&&"single"===e.config.mode&&!e.config.disable.length&&!e.config.enable&&!e.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),$t=0;$t<e.config.plugins.length;$t++){var Ln=e.config.plugins[$t](e)||{};for(var Vt in Ln)c2.indexOf(Vt)>-1?e.config[Vt]=h2(Ln[Vt]).map(c).concat(e.config[Vt]):typeof z[Vt]>"u"&&(e.config[Vt]=Ln[Vt])}z.altInputClass||(e.config.altInputClass=qS().className+" "+e.config.altInputClass),Pr("onParseConfig")}(),IO(),function Voe(){e.input=qS(),e.input?(e.input._type=e.input.type,e.input.type="text",e.input.classList.add("flatpickr-input"),e._input=e.input,e.config.altInput&&(e.altInput=li(e.input.nodeName,e.config.altInputClass),e._input=e.altInput,e.altInput.placeholder=e.input.placeholder,e.altInput.disabled=e.input.disabled,e.altInput.required=e.input.required,e.altInput.tabIndex=e.input.tabIndex,e.altInput.type="text",e.input.setAttribute("type","hidden"),!e.config.static&&e.input.parentNode&&e.input.parentNode.insertBefore(e.altInput,e.input.nextSibling)),e.config.allowInput||e._input.setAttribute("readonly","readonly"),Jz()):e.config.errorHandler(new Error("Invalid input element specified"))}(),function Boe(){e.selectedDates=[],e.now=e.parseDate(e.config.now)||new Date;var H=e.config.defaultDate||("INPUT"!==e.input.nodeName&&"TEXTAREA"!==e.input.nodeName||!e.input.placeholder||e.input.value!==e.input.placeholder?e.input.value:null);H&&ZS(H,e.config.dateFormat),e._initialDate=e.selectedDates.length>0?e.selectedDates[0]:e.config.minDate&&e.config.minDate.getTime()>e.now.getTime()?e.config.minDate:e.config.maxDate&&e.config.maxDate.getTime()<e.now.getTime()?e.config.maxDate:e.now,e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth(),e.selectedDates.length>0&&(e.latestSelectedDateObj=e.selectedDates[0]),void 0!==e.config.minTime&&(e.config.minTime=e.parseDate(e.config.minTime,"H:i")),void 0!==e.config.maxTime&&(e.config.maxTime=e.parseDate(e.config.maxTime,"H:i")),e.minDateHasTime=!!e.config.minDate&&(e.config.minDate.getHours()>0||e.config.minDate.getMinutes()>0||e.config.minDate.getSeconds()>0),e.maxDateHasTime=!!e.config.maxDate&&(e.config.maxDate.getHours()>0||e.config.maxDate.getMinutes()>0||e.config.maxDate.getSeconds()>0)}(),function i(){e.utils={getDaysInMonth:function(H,z){return void 0===H&&(H=e.currentMonth),void 0===z&&(z=e.currentYear),1===H&&(z%4==0&&z%100!=0||z%400==0)?29:e.l10n.daysInMonth[H]}}}(),e.isMobile||function Oe(){var H=window.document.createDocumentFragment();if(e.calendarContainer=li("div","flatpickr-calendar"),e.calendarContainer.tabIndex=-1,!e.config.noCalendar){if(H.appendChild(function gt(){return e.monthNav=li("div","flatpickr-months"),e.yearElements=[],e.monthElements=[],e.prevMonthNav=li("span","flatpickr-prev-month"),e.prevMonthNav.innerHTML=e.config.prevArrow,e.nextMonthNav=li("span","flatpickr-next-month"),e.nextMonthNav.innerHTML=e.config.nextArrow,go(),Object.defineProperty(e,"_hidePrevMonthArrow",{get:function(){return e.__hidePrevMonthArrow},set:function(H){e.__hidePrevMonthArrow!==H&&(ra(e.prevMonthNav,"flatpickr-disabled",H),e.__hidePrevMonthArrow=H)}}),Object.defineProperty(e,"_hideNextMonthArrow",{get:function(){return e.__hideNextMonthArrow},set:function(H){e.__hideNextMonthArrow!==H&&(ra(e.nextMonthNav,"flatpickr-disabled",H),e.__hideNextMonthArrow=H)}}),e.currentYearElement=e.yearElements[0],MO(),e.monthNav}()),e.innerContainer=li("div","flatpickr-innerContainer"),e.config.weekNumbers){var z=function ii(){e.calendarContainer.classList.add("hasWeeks");var H=li("div","flatpickr-weekwrapper");H.appendChild(li("span","flatpickr-weekday",e.l10n.weekAbbreviation));var z=li("div","flatpickr-weeks");return H.appendChild(z),{weekWrapper:H,weekNumbers:z}}(),ue=z.weekWrapper,ke=z.weekNumbers;e.innerContainer.appendChild(ue),e.weekNumbers=ke,e.weekWrapper=ue}e.rContainer=li("div","flatpickr-rContainer"),e.rContainer.appendChild(Ht()),e.daysContainer||(e.daysContainer=li("div","flatpickr-days"),e.daysContainer.tabIndex=-1),tt(),e.rContainer.appendChild(e.daysContainer),e.innerContainer.appendChild(e.rContainer),H.appendChild(e.innerContainer)}e.config.enableTime&&H.appendChild(function St(){e.calendarContainer.classList.add("hasTime"),e.config.noCalendar&&e.calendarContainer.classList.add("noCalendar");var H=m2(e.config);e.timeContainer=li("div","flatpickr-time"),e.timeContainer.tabIndex=-1;var z=li("span","flatpickr-time-separator",":"),ue=ER("flatpickr-hour",{"aria-label":e.l10n.hourAriaLabel});e.hourElement=ue.getElementsByTagName("input")[0];var ke=ER("flatpickr-minute",{"aria-label":e.l10n.minuteAriaLabel});if(e.minuteElement=ke.getElementsByTagName("input")[0],e.hourElement.tabIndex=e.minuteElement.tabIndex=-1,e.hourElement.value=Sa(e.latestSelectedDateObj?e.latestSelectedDateObj.getHours():e.config.time_24hr?H.hours:function y(H){switch(H%24){case 0:case 12:return 12;default:return H%12}}(H.hours)),e.minuteElement.value=Sa(e.latestSelectedDateObj?e.latestSelectedDateObj.getMinutes():H.minutes),e.hourElement.setAttribute("step",e.config.hourIncrement.toString()),e.minuteElement.setAttribute("step",e.config.minuteIncrement.toString()),e.hourElement.setAttribute("min",e.config.time_24hr?"0":"1"),e.hourElement.setAttribute("max",e.config.time_24hr?"23":"12"),e.hourElement.setAttribute("maxlength","2"),e.minuteElement.setAttribute("min","0"),e.minuteElement.setAttribute("max","59"),e.minuteElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(ue),e.timeContainer.appendChild(z),e.timeContainer.appendChild(ke),e.config.time_24hr&&e.timeContainer.classList.add("time24hr"),e.config.enableSeconds){e.timeContainer.classList.add("hasSeconds");var pt=ER("flatpickr-second");e.secondElement=pt.getElementsByTagName("input")[0],e.secondElement.value=Sa(e.latestSelectedDateObj?e.latestSelectedDateObj.getSeconds():H.seconds),e.secondElement.setAttribute("step",e.minuteElement.getAttribute("step")),e.secondElement.setAttribute("min","0"),e.secondElement.setAttribute("max","59"),e.secondElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(li("span","flatpickr-time-separator",":")),e.timeContainer.appendChild(pt)}return e.config.time_24hr||(e.amPM=li("span","flatpickr-am-pm",e.l10n.amPM[pc((e.latestSelectedDateObj?e.hourElement.value:e.config.defaultHour)>11)]),e.amPM.title=e.l10n.toggleTitle,e.amPM.tabIndex=-1,e.timeContainer.appendChild(e.amPM)),e.timeContainer}()),ra(e.calendarContainer,"rangeMode","range"===e.config.mode),ra(e.calendarContainer,"animate",!0===e.config.animate),ra(e.calendarContainer,"multiMonth",e.config.showMonths>1),e.calendarContainer.appendChild(H);var pt=void 0!==e.config.appendTo&&void 0!==e.config.appendTo.nodeType;if((e.config.inline||e.config.static)&&(e.calendarContainer.classList.add(e.config.inline?"inline":"static"),e.config.inline&&(!pt&&e.element.parentNode?e.element.parentNode.insertBefore(e.calendarContainer,e._input.nextSibling):void 0!==e.config.appendTo&&e.config.appendTo.appendChild(e.calendarContainer)),e.config.static)){var At=li("div","flatpickr-wrapper");e.element.parentNode&&e.element.parentNode.insertBefore(At,e.element),At.appendChild(e.element),e.altInput&&At.appendChild(e.altInput),At.appendChild(e.calendarContainer)}!e.config.static&&!e.config.inline&&(void 0!==e.config.appendTo?e.config.appendTo:window.document.body).appendChild(e.calendarContainer)}(),function te(){if(e.config.wrap&&["open","close","toggle","clear"].forEach(function(ue){Array.prototype.forEach.call(e.element.querySelectorAll("[data-"+ue+"]"),function(ke){return V(ke,"click",e[ue])})}),e.isMobile)!function Uoe(){var H=e.config.enableTime?e.config.noCalendar?"time":"datetime-local":"date";e.mobileInput=li("input",e.input.className+" flatpickr-mobile"),e.mobileInput.tabIndex=1,e.mobileInput.type=H,e.mobileInput.disabled=e.input.disabled,e.mobileInput.required=e.input.required,e.mobileInput.placeholder=e.input.placeholder,e.mobileFormatStr="datetime-local"===H?"Y-m-d\\TH:i:S":"date"===H?"Y-m-d":"H:i:S",e.selectedDates.length>0&&(e.mobileInput.defaultValue=e.mobileInput.value=e.formatDate(e.selectedDates[0],e.mobileFormatStr)),e.config.minDate&&(e.mobileInput.min=e.formatDate(e.config.minDate,"Y-m-d")),e.config.maxDate&&(e.mobileInput.max=e.formatDate(e.config.maxDate,"Y-m-d")),e.input.getAttribute("step")&&(e.mobileInput.step=String(e.input.getAttribute("step"))),e.input.type="hidden",void 0!==e.altInput&&(e.altInput.type="hidden");try{e.input.parentNode&&e.input.parentNode.insertBefore(e.mobileInput,e.input.nextSibling)}catch{}V(e.mobileInput,"change",function(z){e.setDate(gl(z).value,!1,e.mobileFormatStr),Pr("onChange"),Pr("onClose")})}();else{var H=AG(EO,50);if(e._debouncedChange=AG(G,jZ),e.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&V(e.daysContainer,"mouseover",function(ue){"range"===e.config.mode&&lD(gl(ue))}),V(e._input,"keydown",nh),void 0!==e.calendarContainer&&V(e.calendarContainer,"keydown",nh),!e.config.inline&&!e.config.static&&V(window,"resize",H),void 0!==window.ontouchstart?V(window.document,"touchstart",bl):V(window.document,"mousedown",bl),V(window.document,"focus",bl,{capture:!0}),!0===e.config.clickOpens&&(V(e._input,"focus",e.open),V(e._input,"click",e.open)),void 0!==e.daysContainer&&(V(e.monthNav,"click",Goe),V(e.monthNav,["keyup","increment"],P),V(e.daysContainer,"click",hD)),void 0!==e.timeContainer&&void 0!==e.minuteElement&&void 0!==e.hourElement){V(e.timeContainer,["increment"],p),V(e.timeContainer,"blur",p,{capture:!0}),V(e.timeContainer,"click",le),V([e.hourElement,e.minuteElement],["focus","click"],function(ue){return gl(ue).select()}),void 0!==e.secondElement&&V(e.secondElement,"focus",function(){return e.secondElement&&e.secondElement.select()}),void 0!==e.amPM&&V(e.amPM,"click",function(ue){p(ue)})}e.config.allowInput&&V(e._input,"blur",Tm)}}(),(e.selectedDates.length||e.config.noCalendar)&&(e.config.enableTime&&A(e.config.noCalendar?e.latestSelectedDateObj:void 0),Kf(!1)),d();var H=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!e.isMobile&&H&&cD(),Pr("onReady")}(),e}function Ub(n,t){for(var e=Array.prototype.slice.call(n).filter(function(c){return c instanceof HTMLElement}),i=[],r=0;r<e.length;r++){var s=e[r];try{if(null!==s.getAttribute("data-fp-omit"))continue;void 0!==s._flatpickr&&(s._flatpickr.destroy(),s._flatpickr=void 0),s._flatpickr=GZ(s,t||{}),i.push(s._flatpickr)}catch(c){console.error(c)}}return 1===i.length?i[0]:i}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(n){return Ub(this,n)},HTMLElement.prototype.flatpickr=function(n){return Ub([this],n)});var bs=function(n,t){return"string"==typeof n?Ub(window.document.querySelectorAll(n),t):n instanceof Node?Ub([n],t):Ub(n,t)};bs.defaultConfig={},bs.l10ns={en:Lo({},d2),default:Lo({},d2)},bs.localize=function(n){bs.l10ns.default=Lo(Lo({},bs.l10ns.default),n)},bs.setDefaults=function(n){bs.defaultConfig=Lo(Lo({},bs.defaultConfig),n)},bs.parseDate=p2({}),bs.formatDate=NG({}),bs.compareDates=ml,typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(n){return Ub(this,n)}),Date.prototype.fp_incr=function(n){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof n?parseInt(n,10):n))},typeof window<"u"&&(window.flatpickr=bs);const $Z=bs;let _2=(()=>{class n{constructor(){this.altFormat="F j, Y",this.altInput=!1,this.altInputClass="",this.allowInput=!1,this.allowInvalidPreload=!1,this.appendTo=void 0,this.ariaDateFormat="F j, Y",this.clickOpens=!0,this.dateFormat="Y-m-d",this.defaultHour=12,this.defaultMinute=0,this.defaultSeconds=0,this.disable=[],this.disableMobile=!1,this.enableTime=!1,this.enableSeconds=!1,this.formatDate=void 0,this.hourIncrement=1,this.inline=!1,this.maxDate=void 0,this.minDate=void 0,this.maxTime=void 0,this.minTime=void 0,this.minuteIncrement=5,this.mode="single",this.nextArrow=">",this.noCalendar=!1,this.now=new Date,this.prevArrow="<",this.shorthandCurrentMonth=!1,this.static=!1,this.time24hr=!1,this.utc=!1,this.weekNumbers=!1,this.wrap=!1,this.plugins=[],this.locale="default",this.convertModelValue=!1,this.showMonths=1,this.monthSelectorType="static",this.ignoredFocusElements=[]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const zZ={provide:hl,useExisting:(0,l.Gpc)(()=>WZ),multi:!0};let WZ=(()=>{class n{constructor(e,i,r){this.elm=e,this.defaults=i,this.renderer=r,this.options={},this.ignoredFocusElements=[],this.flatpickrReady=new l.vpe,this.flatpickrChange=new l.vpe,this.flatpickrValueUpdate=new l.vpe,this.flatpickrOpen=new l.vpe,this.flatpickrClose=new l.vpe,this.flatpickrMonthChange=new l.vpe,this.flatpickrYearChange=new l.vpe,this.flatpickrDayCreate=new l.vpe,this.isDisabled=!1,this.onChangeFn=()=>{},this.onTouchedFn=()=>{}}ngAfterViewInit(){const e={altFormat:this.altFormat,altInput:this.altInput,altInputClass:this.altInputClass,allowInput:this.allowInput,allowInvalidPreload:this.allowInvalidPreload,appendTo:this.appendTo,ariaDateFormat:this.ariaDateFormat,clickOpens:this.clickOpens,dateFormat:this.dateFormat,defaultHour:this.defaultHour,defaultMinute:this.defaultMinute,defaultSeconds:this.defaultSeconds,disable:this.disable,disableMobile:this.disableMobile,enable:this.enable,enableTime:this.enableTime,enableSeconds:this.enableSeconds,formatDate:this.formatDate,hourIncrement:this.hourIncrement,defaultDate:this.initialValue,inline:this.inline,maxDate:this.maxDate,minDate:this.minDate,maxTime:this.maxTime,minTime:this.minTime,minuteIncrement:this.minuteIncrement,mode:this.mode,nextArrow:this.nextArrow,noCalendar:this.noCalendar,now:this.now,parseDate:this.parseDate,prevArrow:this.prevArrow,shorthandCurrentMonth:this.shorthandCurrentMonth,showMonths:this.showMonths,monthSelectorType:this.monthSelectorType,static:this.static,time24hr:this.time24hr,weekNumbers:this.weekNumbers,getWeek:this.getWeek,wrap:this.wrap,plugins:this.plugins,locale:this.locale,ignoredFocusElements:this.ignoredFocusElements,onChange:(i,r,s)=>{this.flatpickrChange.emit({selectedDates:i,dateString:r,instance:s})},onOpen:(i,r,s)=>{this.flatpickrOpen.emit({selectedDates:i,dateString:r,instance:s})},onClose:(i,r,s)=>{this.flatpickrClose.emit({selectedDates:i,dateString:r,instance:s})},onMonthChange:(i,r,s)=>{this.flatpickrMonthChange.emit({selectedDates:i,dateString:r,instance:s})},onYearChange:(i,r,s)=>{this.flatpickrYearChange.emit({selectedDates:i,dateString:r,instance:s})},onReady:(i,r,s)=>{this.flatpickrReady.emit({selectedDates:i,dateString:r,instance:s})},onValueUpdate:(i,r,s)=>{this.flatpickrValueUpdate.emit({selectedDates:i,dateString:r,instance:s})},onDayCreate:(i,r,s,c)=>{this.flatpickrDayCreate.emit({selectedDates:i,dateString:r,instance:s,dayElement:c})}};Object.keys(e).forEach(i=>{typeof e[i]>"u"&&(e[i]=typeof this.options[i]<"u"?this.options[i]:this.defaults[i])}),e.time_24hr=e.time24hr,e.altInputClass=(e.altInputClass||"")+" "+this.elm.nativeElement.className,e.enable||delete e.enable,this.instance=$Z(this.elm.nativeElement,e),this.setDisabledState(this.isDisabled)}ngOnChanges(e){this.instance&&Object.keys(e).forEach(i=>{this.instance.set(i,this[i])})}ngOnDestroy(){this.instance&&this.instance.destroy()}writeValue(e){let i=e;this.convertModelValue&&"range"===this.mode&&e&&(i=[e.from,e.to]),this.instance?this.instance.setDate(i):this.initialValue=i}registerOnChange(e){this.onChangeFn=e}registerOnTouched(e){this.onTouchedFn=e}setDisabledState(e){this.isDisabled=e,this.instance&&(this.isDisabled?this.renderer.setProperty(this.instance._input,"disabled","disabled"):this.renderer.removeAttribute(this.instance._input,"disabled"))}inputChanged(){const e=this.elm.nativeElement.value;if(this.convertModelValue&&"string"==typeof e)switch(this.mode){case"multiple":const i=e.split("; ").map(c=>this.instance.parseDate(c,this.instance.config.dateFormat,!this.instance.config.enableTime));this.onChangeFn(i);break;case"range":const[r,s]=e.split(this.instance.l10n.rangeSeparator).map(c=>this.instance.parseDate(c,this.instance.config.dateFormat,!this.instance.config.enableTime));this.onChangeFn({from:r,to:s});break;default:this.onChangeFn(this.instance.parseDate(e,this.instance.config.dateFormat,!this.instance.config.enableTime))}else this.onChangeFn(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(_2),l.Y36(l.Qsj))},n.\u0275dir=l.lG2({type:n,selectors:[["","mwlFlatpickr",""]],hostBindings:function(e,i){1&e&&l.NdJ("blur",function(){return i.onTouchedFn()})("input",function(){return i.inputChanged()})},inputs:{options:"options",altFormat:"altFormat",altInput:"altInput",altInputClass:"altInputClass",allowInput:"allowInput",allowInvalidPreload:"allowInvalidPreload",appendTo:"appendTo",ariaDateFormat:"ariaDateFormat",clickOpens:"clickOpens",dateFormat:"dateFormat",defaultHour:"defaultHour",defaultMinute:"defaultMinute",defaultSeconds:"defaultSeconds",disable:"disable",disableMobile:"disableMobile",enable:"enable",enableTime:"enableTime",enableSeconds:"enableSeconds",formatDate:"formatDate",hourIncrement:"hourIncrement",inline:"inline",maxDate:"maxDate",minDate:"minDate",maxTime:"maxTime",minTime:"minTime",minuteIncrement:"minuteIncrement",mode:"mode",nextArrow:"nextArrow",noCalendar:"noCalendar",now:"now",parseDate:"parseDate",prevArrow:"prevArrow",shorthandCurrentMonth:"shorthandCurrentMonth",showMonths:"showMonths",static:"static",time24hr:"time24hr",weekNumbers:"weekNumbers",getWeek:"getWeek",wrap:"wrap",plugins:"plugins",locale:"locale",convertModelValue:"convertModelValue",monthSelectorType:"monthSelectorType",ignoredFocusElements:"ignoredFocusElements"},outputs:{flatpickrReady:"flatpickrReady",flatpickrChange:"flatpickrChange",flatpickrValueUpdate:"flatpickrValueUpdate",flatpickrOpen:"flatpickrOpen",flatpickrClose:"flatpickrClose",flatpickrMonthChange:"flatpickrMonthChange",flatpickrYearChange:"flatpickrYearChange",flatpickrDayCreate:"flatpickrDayCreate"},exportAs:["mwlFlatpickr"],features:[l._Bn([zZ]),l.TTD]}),n})();const RG=new l.OlP("flatpickr defaults");function qZ(n){const t=new _2;return Object.assign(t,n),t}let YZ=(()=>{class n{static forRoot(e={}){return{ngModule:n,providers:[{provide:RG,useValue:e},{provide:_2,useFactory:qZ,deps:[RG]}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();var Ds=F(1631),ZZ=F(4266);const KZ=["addListener","removeListener"],QZ=["addEventListener","removeEventListener"],JZ=["on","off"];function Es(n,t,e,i){if((0,Zr.m)(e)&&(i=e,e=void 0),i)return Es(n,t,e).pipe(_L(i));const[r,s]=function tK(n){return(0,Zr.m)(n.addEventListener)&&(0,Zr.m)(n.removeEventListener)}(n)?QZ.map(c=>d=>n[c](t,d,e)):function XZ(n){return(0,Zr.m)(n.addListener)&&(0,Zr.m)(n.removeListener)}(n)?KZ.map(OG(n,t)):function eK(n){return(0,Zr.m)(n.on)&&(0,Zr.m)(n.off)}(n)?JZ.map(OG(n,t)):[];if(!r&&(0,ZZ.z)(n))return(0,Ds.z)(c=>Es(c,t,e))((0,Wd.Xf)(n));if(!r)throw new TypeError("Invalid event target");return new Ti.y(c=>{const d=(...p)=>c.next(1<p.length?p:p[0]);return r(d),()=>s(d)})}function OG(n,t){return e=>i=>n[e](t,i)}var nK=F(671);function TR(n=0,t,e=Mr.P){let i=-1;return null!=t&&((0,nK.K)(t)?e=t:i=t),new Ti.y(r=>{let s=function iK(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;s<0&&(s=0);let c=0;return e.schedule(function(){r.closed||(r.next(c++),0<=i?this.schedule(void 0,i):r.complete())},s)})}const{isArray:rK}=Array;function kG(n){return 1===n.length&&rK(n[0])?n[0]:n}function v2(...n){const t=(0,Zc.jO)(n),e=kG(n);return e.length?new Ti.y(i=>{let r=e.map(()=>[]),s=e.map(()=>!1);i.add(()=>{r=s=null});for(let c=0;!i.closed&&c<e.length;c++)(0,Wd.Xf)(e[c]).subscribe((0,_i.x)(i,d=>{if(r[c].push(d),r.every(p=>p.length)){const p=r.map(m=>m.shift());i.next(t?t(...p):p),r.some((m,y)=>!m.length&&s[y])&&i.complete()}},()=>{s[c]=!0,!r[c].length&&i.complete()}));return()=>{r=s=null}}):er.E}function bi(n){return(0,$i.e)((t,e)=>{(0,Wd.Xf)(n).subscribe((0,_i.x)(e,()=>e.complete(),lF.Z)),!e.closed&&t.subscribe(e)})}var Ps=F(9397);Math,Math,Math;const wQ=["*"],KQ=["dialog"];function sy(n){return"string"==typeof n}function oy(n){return null!=n}function zb(n){return(n||document.body).getBoundingClientRect()}const s$={animation:!0,transitionTimerDelayMs:5},jJ=()=>{},{transitionTimerDelayMs:GJ}=s$,gS=new Map,Na=(n,t,e,i)=>{let r=i.context||{};const s=gS.get(t);if(s)switch(i.runningTransition){case"continue":return er.E;case"stop":n.run(()=>s.transition$.complete()),r=Object.assign(s.context,r),gS.delete(t)}const c=e(t,i.animation,r)||jJ;if(!i.animation||"none"===window.getComputedStyle(t).transitionProperty)return n.run(()=>c()),(0,Mt.of)(void 0).pipe(function UJ(n){return t=>new Ti.y(e=>t.subscribe({next:c=>n.run(()=>e.next(c)),error:c=>n.run(()=>e.error(c)),complete:()=>n.run(()=>e.complete())}))}(n));const d=new Qt.x,p=new Qt.x,m=d.pipe(function oK(...n){return t=>Kh(t,(0,Mt.of)(...n))}(!0));gS.set(t,{transition$:d,complete:()=>{p.next(),p.complete()},context:r});const y=function HJ(n){const{transitionDelay:t,transitionDuration:e}=window.getComputedStyle(n);return 1e3*(parseFloat(t)+parseFloat(e))}(t);return n.runOutsideAngular(()=>{const T=Es(t,"transitionend").pipe(bi(m),fn(({target:x})=>x===t));(function PG(...n){return 1===(n=kG(n)).length?(0,Wd.Xf)(n[0]):new Ti.y(function sK(n){return t=>{let e=[];for(let i=0;e&&!t.closed&&i<n.length;i++)e.push((0,Wd.Xf)(n[i]).subscribe((0,_i.x)(t,r=>{if(e){for(let s=0;s<e.length;s++)s!==i&&e[s].unsubscribe();e=null}t.next(r)})))}}(n))})(TR(y+GJ).pipe(bi(m)),T,p).pipe(bi(m)).subscribe(()=>{gS.delete(t),n.run(()=>{c(),d.next(),d.complete()})})}),d.asObservable()};let NR=(()=>{class n{constructor(){this.animation=s$.animation}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Vi=function(n){return n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown",n}(Vi||{});typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const D$=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function E$(n){const t=Array.from(n.querySelectorAll(D$)).filter(e=>-1!==e.tabIndex);return[t[0],t[t.length-1]]}new Date(1882,10,12),new Date(2174,10,25);class dy{constructor(t,e,i){this.nodes=t,this.viewRef=e,this.componentRef=i}}let YX=(()=>{class n{constructor(e,i){this._el=e,this._zone=i}ngOnInit(){this._zone.onStable.asObservable().pipe(jn(1)).subscribe(()=>{Na(this._zone,this._el.nativeElement,(e,i)=>{i&&zb(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Na(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}static#e=this.\u0275fac=function(i){return new(i||n)(l.Y36(l.SBq),l.Y36(l.R0b))};static#t=this.\u0275cmp=l.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(i,r){2&i&&(l.Tol("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),l.ekj("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[l.jDz],decls:0,vars:0,template:function(i,r){},encapsulation:2})}return n})();class B${update(t){}close(t){}dismiss(t){}}const ZX=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],KX=["animation","backdropClass"];class QX{_applyWindowOptions(t,e){ZX.forEach(i=>{oy(e[i])&&(t[i]=e[i])})}_applyBackdropOptions(t,e){KX.forEach(i=>{oy(e[i])&&(t[i]=e[i])})}update(t){this._applyWindowOptions(this._windowCmptRef.instance,t),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,t)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(bi(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(bi(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(t,e,i,r){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new Qt.x,this._dismissed=new Qt.x,this._hidden=new Qt.x,t.instance.dismissEvent.subscribe(s=>{this.dismiss(s)}),this.result=new Promise((s,c)=>{this._resolve=s,this._reject=c}),this.result.then(null,()=>{})}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();!function t$(n){return n&&n.then}(e)?!1!==e&&this._dismiss(t):e.then(i=>{!1!==i&&this._dismiss(t)},()=>{})}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,Mt.of)(void 0);t.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),v2(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var j2=function(n){return n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC",n}(j2||{});let JX=(()=>{class n{constructor(e,i,r){this._document=e,this._elRef=i,this._zone=r,this._closed$=new Qt.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new l.vpe,this.shown=new Qt.x,this.hidden=new Qt.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":sy(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(jn(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,i={animation:this.animation,runningTransition:"stop"},c=v2(Na(this._zone,e,()=>e.classList.remove("show"),i),Na(this._zone,this._dialogEl.nativeElement,()=>{},i));return c.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),c}_show(){const e={animation:this.animation,runningTransition:"continue"};v2(Na(this._zone,this._elRef.nativeElement,(s,c)=>{c&&zb(s),s.classList.add("show")},e),Na(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{Es(e,"keydown").pipe(bi(this._closed$),fn(r=>r.which===Vi.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(j2.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;Es(this._dialogEl.nativeElement,"mousedown").pipe(bi(this._closed$),(0,Ps.b)(()=>i=!1),(0,Jn.w)(()=>Es(e,"mouseup").pipe(bi(this._closed$),jn(1))),fn(({target:r})=>e===r)).subscribe(()=>{i=!0}),Es(e,"click").pipe(bi(this._closed$)).subscribe(({target:r})=>{e===r&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss(j2.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const i=e.querySelector("[ngbAutofocus]"),r=E$(e)[0];(i||r||e).focus()}}_restoreFocus(){const e=this._document.body,i=this._elWithFocus;let r;r=i&&i.focus&&e.contains(i)?i:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Na(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}static#e=this.\u0275fac=function(i){return new(i||n)(l.Y36(ve),l.Y36(l.SBq),l.Y36(l.R0b))};static#t=this.\u0275cmp=l.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(i,r){if(1&i&&l.Gf(KQ,7),2&i){let s;l.iGM(s=l.CRH())&&(r._dialogEl=s.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(i,r){2&i&&(l.uIk("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),l.Tol("modal d-block"+(r.windowClass?" "+r.windowClass:"")),l.ekj("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[l.jDz],ngContentSelectors:wQ,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(i,r){1&i&&(l.F$t(),l.TgZ(0,"div",0,1)(2,"div",2),l.Hsn(3),l.qZA()()),2&i&&l.Tol("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+r.fullscreenClass+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2})}return n})(),XX=(()=>{class n{constructor(e){this._document=e}hide(){const e=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,r=i.style,{overflow:s,paddingRight:c}=r;if(e>0){const d=parseFloat(window.getComputedStyle(i).paddingRight);r.paddingRight=`${d+e}px`}return r.overflow="hidden",()=>{e>0&&(r.paddingRight=c),r.overflow=s}}static#e=this.\u0275fac=function(i){return new(i||n)(l.LFG(ve))};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),eee=(()=>{class n{constructor(e,i,r,s,c,d,p){this._applicationRef=e,this._injector=i,this._environmentInjector=r,this._document=s,this._scrollBar=c,this._rendererFactory=d,this._ngZone=p,this._activeWindowCmptHasChanged=new Qt.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new l.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const m=this._windowCmpts[this._windowCmpts.length-1];((n,t,e,i=!1)=>{n.runOutsideAngular(()=>{const r=Es(t,"focusin").pipe(bi(e),(0,at.U)(s=>s.target));Es(t,"keydown").pipe(bi(e),fn(s=>s.which===Vi.Tab),dx(r)).subscribe(([s,c])=>{const[d,p]=E$(t);(c===d||c===t)&&s.shiftKey&&(p.focus(),s.preventDefault()),c===p&&!s.shiftKey&&(d.focus(),s.preventDefault())}),i&&Es(t,"click").pipe(bi(e),dx(r),(0,at.U)(s=>s[1])).subscribe(s=>s.focus())})})(this._ngZone,m.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(m.location.nativeElement)}})}_restoreScrollBar(){const e=this._scrollBarRestoreFn;e&&(this._scrollBarRestoreFn=null,e())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(e,i,r){const s=r.container instanceof HTMLElement?r.container:oy(r.container)?this._document.querySelector(r.container):this._document.body,c=this._rendererFactory.createRenderer(null,null);if(!s)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const d=new B$,p=(e=r.injector||e).get(l.lqb,null)||this._environmentInjector,m=this._getContentRef(e,p,i,d,r);let y=!1!==r.backdrop?this._attachBackdrop(s):void 0,T=this._attachWindowComponent(s,m.nodes),A=new QX(T,m,y,r.beforeDismiss);return this._registerModalRef(A),this._registerWindowCmpt(T),A.hidden.pipe(jn(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(c.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),d.close=x=>{A.close(x)},d.dismiss=x=>{A.dismiss(x)},d.update=x=>{A.update(x)},A.update(r),1===this._modalRefs.length&&c.addClass(this._document.body,"modal-open"),y&&y.instance&&y.changeDetectorRef.detectChanges(),T.changeDetectorRef.detectChanges(),A}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(i=>i.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e){let i=(0,l.LMc)(YX,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(i.hostView),e.appendChild(i.location.nativeElement),i}_attachWindowComponent(e,i){let r=(0,l.LMc)(JX,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:i});return this._applicationRef.attachView(r.hostView),e.appendChild(r.location.nativeElement),r}_getContentRef(e,i,r,s,c){return r?r instanceof l.Rgc?this._createFromTemplateRef(r,s):sy(r)?this._createFromString(r):this._createFromComponent(e,i,r,s,c):new dy([])}_createFromTemplateRef(e,i){const s=e.createEmbeddedView({$implicit:i,close(c){i.close(c)},dismiss(c){i.dismiss(c)}});return this._applicationRef.attachView(s),new dy([s.rootNodes],s)}_createFromString(e){const i=this._document.createTextNode(`${e}`);return new dy([[i]])}_createFromComponent(e,i,r,s,c){const d=l.zs3.create({providers:[{provide:B$,useValue:s}],parent:e}),p=(0,l.LMc)(r,{environmentInjector:i,elementInjector:d}),m=p.location.nativeElement;return c.scrollable&&m.classList.add("component-host-scrollable"),this._applicationRef.attachView(p.hostView),new dy([[m]],p.hostView,p)}_setAriaHidden(e){const i=e.parentElement;i&&e!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==e&&"SCRIPT"!==r.nodeName&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,i)=>{e?i.setAttribute("aria-hidden",e):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const i=()=>{const r=this._modalRefs.indexOf(e);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(i,i)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const i=this._windowCmpts.indexOf(e);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}static#e=this.\u0275fac=function(i){return new(i||n)(l.LFG(l.z2F),l.LFG(l.zs3),l.LFG(l.lqb),l.LFG(ve),l.LFG(XX),l.LFG(l.FYo),l.LFG(l.R0b))};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),tee=(()=>{class n{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}static#e=this.\u0275fac=function(i){return new(i||n)(l.LFG(NR))};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),G2=(()=>{class n{constructor(e,i,r){this._injector=e,this._modalStack=i,this._config=r}open(e,i={}){const r={...this._config,animation:this._config.animation,...i};return this._modalStack.open(this._injector,e,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}static#e=this.\u0275fac=function(i){return new(i||n)(l.LFG(l.zs3),l.LFG(eee),l.LFG(tee))};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),V$=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=l.oAB({type:n});static#n=this.\u0275inj=l.cJS({providers:[G2]})}return n})();new l.OlP("live announcer delay",{providedIn:"root",factory:function Aee(){return 100}});const xee_firebase={apiKey:"AIzaSyBDgKKEOVdpy8B2-zfUNmSWI9xz9mJoMFk",authDomain:"petguardian-app.firebaseapp.com",databaseURL:"https://petguardian-app-default-rtdb.firebaseio.com",projectId:"petguardian-app",storageBucket:"petguardian-app.appspot.com",messagingSenderId:"938087449708",appId:"1:938087449708:web:b26fdf38bb98c828cdc449",measurementId:"G-0GJ9Z7MJ35"};var wl=F(5619),Oee=F(7103);function GR(...n){const t=(0,Zc.yG)(n),e=(0,Zc.jO)(n),{args:i,keys:r}=Oj(n);if(0===i.length)return(0,Hn.D)([],t);const s=new Ti.y(function kee(n,t,e=Wo.y){return i=>{K$(t,()=>{const{length:r}=n,s=new Array(r);let c=r,d=r;for(let p=0;p<r;p++)K$(t,()=>{const m=(0,Hn.D)(n[p],t);let y=!1;m.subscribe((0,_i.x)(i,T=>{s[p]=T,y||(y=!0,d--),d||i.next(e(s.slice()))},()=>{--c||i.complete()}))},i)},i)}}(i,t,r?c=>kj(r,c):Wo.y));return e?s.pipe(_L(e)):s}function K$(n,t,e){n?(0,Oee.f)(e,n,t):t()}function Q$(n){return new Ti.y(t=>{(0,Wd.Xf)(n()).subscribe(t)})}var Pee=F(8407);function wS(n,t){const e=(0,Zr.m)(n)?n:()=>n,i=r=>r.error(e());return new Ti.y(t?r=>t.schedule(i,0,r):i)}var z2=F(7394);function W2(){return(0,$i.e)((n,t)=>{let e=null;n._refCount++;const i=(0,_i.x)(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const r=n._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}class J$ extends Ti.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,$i.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new z2.w0;const e=this.getSubject();t.add(this.source.subscribe((0,_i.x)(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=z2.w0.EMPTY)}return t}refCount(){return W2()(this)}}function bS(n,t){return(0,Zr.m)(t)?(0,Ds.z)(n,t,1):(0,Ds.z)(n,1)}function hy(n){return(0,$i.e)((t,e)=>{let s,i=null,r=!1;i=t.subscribe((0,_i.x)(e,void 0,void 0,c=>{s=(0,Wd.Xf)(n(c,hy(n)(t))),i?(i.unsubscribe(),i=null,s.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(e))})}function $R(n){return n<=0?()=>er.E:(0,$i.e)((t,e)=>{let i=[];t.subscribe((0,_i.x)(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function q2(n){return(0,$i.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}const bn="primary",DS=Symbol("RouteTitle");class Lee{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Zb(n){return new Lee(n)}function Bee(n,t,e){const i=e.path.split("/");if(i.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const c=i[s],d=n[s];if(c.startsWith(":"))r[c.substring(1)]=d;else if(c!==d.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function eh(n,t){const e=n?Object.keys(n):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!X$(n[r],t[r]))return!1;return!0}function X$(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}return n===t}function e6(n){return n.length>0?n[n.length-1]:null}function bm(n){return function Ree(n){return!!n&&(n instanceof Ti.y||(0,Zr.m)(n.lift)&&(0,Zr.m)(n.subscribe))}(n)?n:(0,l.QGY)(n)?(0,Hn.D)(Promise.resolve(n)):(0,Mt.of)(n)}const Uee={exact:function i6(n,t,e){if(!fy(n.segments,t.segments)||!zR(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!n.children[i]||!i6(n.children[i],t.children[i],e))return!1;return!0},subset:r6},t6={exact:function Hee(n,t){return eh(n,t)},subset:function jee(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>X$(n[e],t[e]))},ignored:()=>!0};function n6(n,t,e){return Uee[e.paths](n.root,t.root,e.matrixParams)&&t6[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function r6(n,t,e){return s6(n,t,t.segments,e)}function s6(n,t,e,i){if(n.segments.length>e.length){const r=n.segments.slice(0,e.length);return!(!fy(r,e)||t.hasChildren()||!zR(r,e,i))}if(n.segments.length===e.length){if(!fy(n.segments,e)||!zR(n.segments,e,i))return!1;for(const r in t.children)if(!n.children[r]||!r6(n.children[r],t.children[r],i))return!1;return!0}{const r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!!(fy(n.segments,r)&&zR(n.segments,r,i)&&n.children[bn])&&s6(n.children[bn],t,s,i)}}function zR(n,t,e){return t.every((i,r)=>t6[e](n[r].parameters,i.parameters))}class Kb{constructor(t=new Di([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zb(this.queryParams)),this._queryParamMap}toString(){return zee.serialize(this)}}class Di{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return WR(this)}}class ES{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Zb(this.parameters)),this._parameterMap}toString(){return l6(this)}}function fy(n,t){return n.length===t.length&&n.every((e,i)=>e.path===t[i].path)}let CS=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=l.Yz7({token:n,factory:function(){return new Y2},providedIn:"root"})}return n})();class Y2{parse(t){const e=new nte(t);return new Kb(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${TS(t.root,!0)}`,i=function Yee(n){const t=Object.keys(n).map(e=>{const i=n[e];return Array.isArray(i)?i.map(r=>`${qR(e)}=${qR(r)}`).join("&"):`${qR(e)}=${qR(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams),r="string"==typeof t.fragment?`#${function Wee(n){return encodeURI(n)}(t.fragment)}`:"";return`${e}${i}${r}`}}const zee=new Y2;function WR(n){return n.segments.map(t=>l6(t)).join("/")}function TS(n,t){if(!n.hasChildren())return WR(n);if(t){const e=n.children[bn]?TS(n.children[bn],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==bn&&i.push(`${r}:${TS(s,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function $ee(n,t){let e=[];return Object.entries(n.children).forEach(([i,r])=>{i===bn&&(e=e.concat(t(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==bn&&(e=e.concat(t(r,i)))}),e}(n,(i,r)=>r===bn?[TS(n.children[bn],!1)]:[`${r}:${TS(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[bn]?`${WR(n)}/${e[0]}`:`${WR(n)}/(${e.join("//")})`}}function o6(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qR(n){return o6(n).replace(/%3B/gi,";")}function Z2(n){return o6(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function YR(n){return decodeURIComponent(n)}function a6(n){return YR(n.replace(/\+/g,"%20"))}function l6(n){return`${Z2(n.path)}${function qee(n){return Object.keys(n).map(t=>`;${Z2(t)}=${Z2(n[t])}`).join("")}(n.parameters)}`}const Zee=/^[^\/()?;#]+/;function K2(n){const t=n.match(Zee);return t?t[0]:""}const Kee=/^[^\/()?;=#]+/,Jee=/^[^=?&#]+/,ete=/^[^&#]+/;class nte{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Di([],{}):new Di([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[bn]=new Di(t,e)),i}parseSegment(){const t=K2(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new l.vHH(4009,!1);return this.capture(t),new ES(YR(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=function Qee(n){const t=n.match(Kee);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=K2(this.remaining);r&&(i=r,this.capture(i))}t[YR(e)]=YR(i)}parseQueryParam(t){const e=function Xee(n){const t=n.match(Jee);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const c=function tte(n){const t=n.match(ete);return t?t[0]:""}(this.remaining);c&&(i=c,this.capture(i))}const r=a6(e),s=a6(i);if(t.hasOwnProperty(r)){let c=t[r];Array.isArray(c)||(c=[c],t[r]=c),c.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=K2(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new l.vHH(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=bn);const c=this.parseChildren();e[s]=1===Object.keys(c).length?c[bn]:new Di([],c),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new l.vHH(4011,!1)}}function c6(n){return n.segments.length>0?new Di([],{[bn]:n}):n}function u6(n){const t={};for(const i of Object.keys(n.children)){const s=u6(n.children[i]);if(i===bn&&0===s.segments.length&&s.hasChildren())for(const[c,d]of Object.entries(s.children))t[c]=d;else(s.segments.length>0||s.hasChildren())&&(t[i]=s)}return function ite(n){if(1===n.numberOfChildren&&n.children[bn]){const t=n.children[bn];return new Di(n.segments.concat(t.segments),t.children)}return n}(new Di(n.segments,t))}function py(n){return n instanceof Kb}function d6(n){let t;const r=c6(function e(s){const c={};for(const p of s.children){const m=e(p);c[p.outlet]=m}const d=new Di(s.url,c);return s===n&&(t=d),d}(n.root));return t??r}function h6(n,t,e,i){let r=n;for(;r.parent;)r=r.parent;if(0===t.length)return Q2(r,r,r,e,i);const s=function ste(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new p6(!0,0,n);let t=0,e=!1;const i=n.reduce((r,s,c)=>{if("object"==typeof s&&null!=s){if(s.outlets){const d={};return Object.entries(s.outlets).forEach(([p,m])=>{d[p]="string"==typeof m?m.split("/"):m}),[...r,{outlets:d}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===c?(s.split("/").forEach((d,p)=>{0==p&&"."===d||(0==p&&""===d?e=!0:".."===d?t++:""!=d&&r.push(d))}),r):[...r,s]},[]);return new p6(e,t,i)}(t);if(s.toRoot())return Q2(r,r,new Di([],{}),e,i);const c=function ote(n,t,e){if(n.isAbsolute)return new KR(t,!0,0);if(!e)return new KR(t,!1,NaN);if(null===e.parent)return new KR(e,!0,0);const i=ZR(n.commands[0])?0:1;return function ate(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new l.vHH(4005,!1);r=i.segments.length}return new KR(i,!1,r-s)}(e,e.segments.length-1+i,n.numberOfDoubleDots)}(s,r,n),d=c.processChildren?SS(c.segmentGroup,c.index,s.commands):g6(c.segmentGroup,c.index,s.commands);return Q2(r,c.segmentGroup,d,e,i)}function ZR(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function IS(n){return"object"==typeof n&&null!=n&&n.outlets}function Q2(n,t,e,i,r){let c,s={};i&&Object.entries(i).forEach(([p,m])=>{s[p]=Array.isArray(m)?m.map(y=>`${y}`):`${m}`}),c=n===t?e:f6(n,t,e);const d=c6(u6(c));return new Kb(d,s,r)}function f6(n,t,e){const i={};return Object.entries(n.children).forEach(([r,s])=>{i[r]=s===t?e:f6(s,t,e)}),new Di(n.segments,i)}class p6{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&ZR(i[0]))throw new l.vHH(4003,!1);const r=i.find(IS);if(r&&r!==e6(i))throw new l.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class KR{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function g6(n,t,e){if(n||(n=new Di([],{})),0===n.segments.length&&n.hasChildren())return SS(n,t,e);const i=function cte(n,t,e){let i=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;const c=n.segments[r],d=e[i];if(IS(d))break;const p=`${d}`,m=i<e.length-1?e[i+1]:null;if(r>0&&void 0===p)break;if(p&&m&&"object"==typeof m&&void 0===m.outlets){if(!_6(p,m,c))return s;i+=2}else{if(!_6(p,{},c))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new Di(n.segments.slice(0,i.pathIndex),{});return s.children[bn]=new Di(n.segments.slice(i.pathIndex),n.children),SS(s,0,r)}return i.match&&0===r.length?new Di(n.segments,{}):i.match&&!n.hasChildren()?J2(n,t,e):i.match?SS(n,0,r):J2(n,t,e)}function SS(n,t,e){if(0===e.length)return new Di(n.segments,{});{const i=function lte(n){return IS(n[0])?n[0].outlets:{[bn]:n}}(e),r={};if(Object.keys(i).some(s=>s!==bn)&&n.children[bn]&&1===n.numberOfChildren&&0===n.children[bn].segments.length){const s=SS(n.children[bn],t,e);return new Di(n.segments,s.children)}return Object.entries(i).forEach(([s,c])=>{"string"==typeof c&&(c=[c]),null!==c&&(r[s]=g6(n.children[s],t,c))}),Object.entries(n.children).forEach(([s,c])=>{void 0===i[s]&&(r[s]=c)}),new Di(n.segments,r)}}function J2(n,t,e){const i=n.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(IS(s)){const p=ute(s.outlets);return new Di(i,p)}if(0===r&&ZR(e[0])){i.push(new ES(n.segments[t].path,m6(e[0]))),r++;continue}const c=IS(s)?s.outlets[bn]:`${s}`,d=r<e.length-1?e[r+1]:null;c&&d&&ZR(d)?(i.push(new ES(c,m6(d))),r+=2):(i.push(new ES(c,{})),r++)}return new Di(i,{})}function ute(n){const t={};return Object.entries(n).forEach(([e,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(t[e]=J2(new Di([],{}),0,i))}),t}function m6(n){const t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function _6(n,t,e){return n==e.path&&eh(t,e.parameters)}const AS="imperative";class th{constructor(t,e){this.id=t,this.url=e}}class QR extends th{constructor(t,e,i="imperative",r=null){super(t,e),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Dm extends th{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class MS extends th{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Qb extends th{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=16}}class JR extends th{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class v6 extends th{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dte extends th{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hte extends th{constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class fte extends th{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pte extends th{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gte{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class mte{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class _te{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vte{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yte{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wte{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class y6{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class X2{}class eB{constructor(t){this.url=t}}class bte{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new NS,this.attachRef=null}}let NS=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new bte,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class w6{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=tB(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=tB(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=nB(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return nB(t,this._root).map(e=>e.value)}}function tB(n,t){if(n===t.value)return t;for(const e of t.children){const i=tB(n,e);if(i)return i}return null}function nB(n,t){if(n===t.value)return[t];for(const e of t.children){const i=nB(n,e);if(i.length)return i.unshift(t),i}return[]}class zf{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Jb(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class b6 extends w6{constructor(t,e){super(t),this.snapshot=e,iB(this,t)}toString(){return this.snapshot.toString()}}function D6(n,t){const e=function Dte(n,t){const c=new XR([],{},{},"",{},bn,t,null,{});return new C6("",new zf(c,[]))}(0,t),i=new wl.X([new ES("",{})]),r=new wl.X({}),s=new wl.X({}),c=new wl.X({}),d=new wl.X(""),p=new Xb(i,r,c,d,s,bn,t,e.root);return p.snapshot=e.root,new b6(new zf(p,[]),e)}class Xb{constructor(t,e,i,r,s,c,d,p){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=c,this.component=d,this._futureSnapshot=p,this.title=this.dataSubject?.pipe((0,at.U)(m=>m[DS]))??(0,Mt.of)(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,at.U)(t=>Zb(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,at.U)(t=>Zb(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function E6(n,t="emptyOnly"){const e=n.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const r=e[i],s=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function Ete(n){return n.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(i))}class XR{get title(){return this.data?.[DS]}constructor(t,e,i,r,s,c,d,p,m){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=c,this.component=d,this.routeConfig=p,this._resolve=m}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Zb(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zb(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class C6 extends w6{constructor(t,e){super(e),this.url=t,iB(this,e)}toString(){return T6(this._root)}}function iB(n,t){t.value._routerState=n,t.children.forEach(e=>iB(n,e))}function T6(n){const t=n.children.length>0?` { ${n.children.map(T6).join(", ")} } `:"";return`${n.value}${t}`}function rB(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,eh(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),eh(t.params,e.params)||n.paramsSubject.next(e.params),function Vee(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!eh(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.urlSubject.next(e.url),eh(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function sB(n,t){const e=eh(n.params,t.params)&&function Gee(n,t){return fy(n,t)&&n.every((e,i)=>eh(e.parameters,t[i].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||sB(n.parent,t.parent))}let oB=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=bn,this.activateEvents=new l.vpe,this.deactivateEvents=new l.vpe,this.attachEvents=new l.vpe,this.detachEvents=new l.vpe,this.parentContexts=(0,l.f3M)(NS),this.location=(0,l.f3M)(l.s_b),this.changeDetector=(0,l.f3M)(l.sBO),this.environmentInjector=(0,l.f3M)(l.lqb),this.inputBinder=(0,l.f3M)(eO,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){const{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new l.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new l.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new l.vHH(4012,!1);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new l.vHH(4013,!1);this._activatedRoute=e;const r=this.location,c=e.snapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,p=new Cte(e,d,r.injector);this.activated=r.createComponent(c,{index:r.length,injector:p,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=l.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[l.TTD]})}return n})();class Cte{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===Xb?this.route:t===NS?this.childContexts:this.parent.get(t,e)}}const eO=new l.OlP("");let I6=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){const{activatedRoute:i}=e,r=GR([i.queryParams,i.params,i.data]).pipe((0,Jn.w)(([s,c,d],p)=>(d={...s,...c,...d},0===p?(0,Mt.of)(d):Promise.resolve(d)))).subscribe(s=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(e);const c=(0,l.qFp)(i.component);if(c)for(const{templateName:d}of c.inputs)e.activatedComponentRef.setInput(d,s[d]);else this.unsubscribeFromRouteData(e)});this.outletDataSubscriptions.set(e,r)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac})}return n})();function xS(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const r=function Ite(n,t,e){return t.children.map(i=>{for(const r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return xS(n,i,r);return xS(n,i)})}(n,t,e);return new zf(i,r)}{if(n.shouldAttach(t.value)){const s=n.retrieve(t.value);if(null!==s){const c=s.route;return c.value._futureSnapshot=t.value,c.children=t.children.map(d=>xS(n,d)),c}}const i=function Ste(n){return new Xb(new wl.X(n.url),new wl.X(n.params),new wl.X(n.queryParams),new wl.X(n.fragment),new wl.X(n.data),n.outlet,n.component,n)}(t.value),r=t.children.map(s=>xS(n,s));return new zf(i,r)}}const aB="ngNavigationCancelingError";function S6(n,t){const{redirectTo:e,navigationBehaviorOptions:i}=py(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=A6(!1,0,t);return r.url=e,r.navigationBehaviorOptions=i,r}function A6(n,t,e){const i=new Error("NavigationCancelingError: "+(n||""));return i[aB]=!0,i.cancellationCode=t,e&&(i.url=e),i}function M6(n){return n&&n[aB]}let N6=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=l.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[l.jDz],decls:1,vars:0,template:function(i,r){1&i&&l._UZ(0,"router-outlet")},dependencies:[oB],encapsulation:2})}return n})();function lB(n){const t=n.children&&n.children.map(lB),e=t?{...n,children:t}:{...n};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==bn&&(e.component=N6),e}function Eu(n){return n.outlet||bn}function RS(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class Pte{constructor(t,e,i,r,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),rB(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const r=Jb(e);t.children.forEach(s=>{const c=s.value.outlet;this.deactivateRoutes(s,r[c],i),delete r[c]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const c=i.getContext(r.outlet);c&&this.deactivateChildRoutes(t,e,c.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Jb(t);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],r);if(i&&i.outlet){const c=i.outlet.detach(),d=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:c,route:t,contexts:d})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Jb(t);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){const r=Jb(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new wte(s.value.snapshot))}),t.children.length&&this.forwardEvent(new vte(t.value.snapshot))}activateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(rB(r),r===s)if(r.component){const c=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,c.children)}else this.activateChildRoutes(t,e,i);else if(r.component){const c=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const d=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),c.children.onOutletReAttached(d.contexts),c.attachRef=d.componentRef,c.route=d.route.value,c.outlet&&c.outlet.attach(d.componentRef,d.route.value),rB(d.route.value),this.activateChildRoutes(t,null,c.children)}else{const d=RS(r.snapshot);c.attachRef=null,c.route=r,c.injector=d,c.outlet&&c.outlet.activateWith(r,c.injector),this.activateChildRoutes(t,null,c.children)}}else this.activateChildRoutes(t,null,i)}}class x6{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class tO{constructor(t,e){this.component=t,this.route=e}}function Fte(n,t,e){const i=n._root;return OS(i,t?t._root:null,e,[i.value])}function eD(n,t){const e=Symbol(),i=t.get(n,e);return i===e?"function"!=typeof n||(0,l.Z0I)(n)?t.get(n):n:i}function OS(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Jb(t);return n.children.forEach(c=>{(function Bte(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,c=t?t.value:null,d=e?e.getContext(n.value.outlet):null;if(c&&s.routeConfig===c.routeConfig){const p=function Vte(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!fy(n.url,t.url);case"pathParamsOrQueryParamsChange":return!fy(n.url,t.url)||!eh(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!sB(n,t)||!eh(n.queryParams,t.queryParams);default:return!sB(n,t)}}(c,s,s.routeConfig.runGuardsAndResolvers);p?r.canActivateChecks.push(new x6(i)):(s.data=c.data,s._resolvedData=c._resolvedData),OS(n,t,s.component?d?d.children:null:e,i,r),p&&d&&d.outlet&&d.outlet.isActivated&&r.canDeactivateChecks.push(new tO(d.outlet.component,c))}else c&&kS(t,d,r),r.canActivateChecks.push(new x6(i)),OS(n,null,s.component?d?d.children:null:e,i,r)})(c,s[c.value.outlet],e,i.concat([c.value]),r),delete s[c.value.outlet]}),Object.entries(s).forEach(([c,d])=>kS(d,e.getContext(c),r)),r}function kS(n,t,e){const i=Jb(n),r=n.value;Object.entries(i).forEach(([s,c])=>{kS(c,r.component?t?t.children.getContext(s):null:t,e)}),e.canDeactivateChecks.push(new tO(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function PS(n){return"function"==typeof n}function R6(n){return n instanceof xc||"EmptyError"===n?.name}const nO=Symbol("INITIAL_VALUE");function tD(){return(0,Jn.w)(n=>GR(n.map(t=>t.pipe(jn(1),Kl(nO)))).pipe((0,at.U)(t=>{for(const e of t)if(!0!==e){if(e===nO)return nO;if(!1===e||e instanceof Kb)return e}return!0}),fn(t=>t!==nO),jn(1)))}function O6(n){return(0,Pee.z)((0,Ps.b)(t=>{if(py(t))throw S6(0,t)}),(0,at.U)(t=>!0===t))}class iO{constructor(t){this.segmentGroup=t||null}}class k6{constructor(t){this.urlTree=t}}function nD(n){return wS(new iO(n))}function P6(n){return wS(new k6(n))}class sne{constructor(t,e){this.urlSerializer=t,this.urlTree=e}noMatchError(t){return new l.vHH(4002,!1)}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return(0,Mt.of)(i);if(r.numberOfChildren>1||!r.children[bn])return wS(new l.vHH(4e3,!1));r=r.children[bn]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreateUrlTree(t,e,i,r){const s=this.createSegmentGroup(t,e.root,i,r);return new Kb(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return Object.entries(t).forEach(([r,s])=>{if("string"==typeof s&&s.startsWith(":")){const d=s.substring(1);i[r]=e[d]}else i[r]=s}),i}createSegmentGroup(t,e,i,r){const s=this.createSegments(t,e.segments,i,r);let c={};return Object.entries(e.children).forEach(([d,p])=>{c[d]=this.createSegmentGroup(t,p,i,r)}),new Di(s,c)}createSegments(t,e,i,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){const r=i[e.path.substring(1)];if(!r)throw new l.vHH(4001,!1);return r}findOrReturn(t,e){let i=0;for(const r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}}const cB={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function one(n,t,e,i,r){const s=uB(n,t,e);return s.matched?(i=function Mte(n,t){return n.providers&&!n._injector&&(n._injector=(0,l.MMx)(n.providers,t,`Route: ${n.path}`)),n._injector??t}(t,i),function nne(n,t,e,i){const r=t.canMatch;if(!r||0===r.length)return(0,Mt.of)(!0);const s=r.map(c=>{const d=eD(c,n);return bm(function zte(n){return n&&PS(n.canMatch)}(d)?d.canMatch(t,e):n.runInContext(()=>d(t,e)))});return(0,Mt.of)(s).pipe(tD(),O6())}(i,t,e).pipe((0,at.U)(c=>!0===c?s:{...cB}))):(0,Mt.of)(s)}function uB(n,t,e){if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?{...cB}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(t.matcher||Bee)(e,n,t);if(!r)return{...cB};const s={};Object.entries(r.posParams??{}).forEach(([d,p])=>{s[d]=p.path});const c=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:c,positionalParamSegments:r.posParams??{}}}function F6(n,t,e,i){return e.length>0&&function cne(n,t,e){return e.some(i=>rO(n,t,i)&&Eu(i)!==bn)}(n,e,i)?{segmentGroup:new Di(t,lne(i,new Di(e,n.children))),slicedSegments:[]}:0===e.length&&function une(n,t,e){return e.some(i=>rO(n,t,i))}(n,e,i)?{segmentGroup:new Di(n.segments,ane(n,0,e,i,n.children)),slicedSegments:e}:{segmentGroup:new Di(n.segments,n.children),slicedSegments:e}}function ane(n,t,e,i,r){const s={};for(const c of i)if(rO(n,e,c)&&!r[Eu(c)]){const d=new Di([],{});s[Eu(c)]=d}return{...r,...s}}function lne(n,t){const e={};e[bn]=t;for(const i of n)if(""===i.path&&Eu(i)!==bn){const r=new Di([],{});e[Eu(i)]=r}return e}function rO(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}class pne{constructor(t,e,i,r,s,c,d){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=c,this.urlSerializer=d,this.allowRedirects=!0,this.applyRedirects=new sne(this.urlSerializer,this.urlTree)}noMatchError(t){return new l.vHH(4002,!1)}recognize(){const t=F6(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,bn).pipe(hy(e=>{if(e instanceof k6)return this.allowRedirects=!1,this.urlTree=e.urlTree,this.match(e.urlTree);throw e instanceof iO?this.noMatchError(e):e}),(0,at.U)(e=>{const i=new XR([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},bn,this.rootComponentType,null,{}),r=new zf(i,e),s=new C6("",r),c=function rte(n,t,e=null,i=null){return h6(d6(n),t,e,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return c.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(c),this.inheritParamsAndData(s._root),{state:s,tree:c}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t.root,bn).pipe(hy(i=>{throw i instanceof iO?this.noMatchError(i):i}))}inheritParamsAndData(t){const e=t.value,i=E6(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(t,e,i):this.processSegment(t,e,i,i.segments,r,!0)}processChildren(t,e,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return(0,Hn.D)(r).pipe(bS(s=>{const c=i.children[s],d=function Ote(n,t){const e=n.filter(i=>Eu(i)===t);return e.push(...n.filter(i=>Eu(i)!==t)),e}(e,s);return this.processSegmentGroup(t,d,c,s)}),Ql((s,c)=>(s.push(...c),s)),zo(null),function Fee(n,t){const e=arguments.length>=2;return i=>i.pipe(n?fn((r,s)=>n(r,s,i)):Wo.y,$R(1),e?zo(t):Bl(()=>new xc))}(),(0,Ds.z)(s=>{if(null===s)return nD(i);const c=L6(s);return function gne(n){n.sort((t,e)=>t.value.outlet===bn?-1:e.value.outlet===bn?1:t.value.outlet.localeCompare(e.value.outlet))}(c),(0,Mt.of)(c)}))}processSegment(t,e,i,r,s,c){return(0,Hn.D)(e).pipe(bS(d=>this.processSegmentAgainstRoute(d._injector??t,e,d,i,r,s,c).pipe(hy(p=>{if(p instanceof iO)return(0,Mt.of)(null);throw p}))),ma(d=>!!d),hy(d=>{if(R6(d))return function hne(n,t,e){return 0===t.length&&!n.children[e]}(i,r,s)?(0,Mt.of)([]):nD(i);throw d}))}processSegmentAgainstRoute(t,e,i,r,s,c,d){return function dne(n,t,e,i){return!!(Eu(n)===i||i!==bn&&rO(t,e,n))&&("**"===n.path||uB(t,n,e).matched)}(i,r,s,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,r,i,s,c,d):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,i,s,c):nD(r):nD(r)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,c):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,r){const s=this.applyRedirects.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?P6(s):this.applyRedirects.lineralizeSegments(i,s).pipe((0,Ds.z)(c=>{const d=new Di(c,{});return this.processSegment(t,e,d,c,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c){const{matched:d,consumedSegments:p,remainingSegments:m,positionalParamSegments:y}=uB(e,r,s);if(!d)return nD(e);const T=this.applyRedirects.applyRedirectCommands(p,r.redirectTo,y);return r.redirectTo.startsWith("/")?P6(T):this.applyRedirects.lineralizeSegments(r,T).pipe((0,Ds.z)(A=>this.processSegment(t,i,e,A.concat(m),c,!1)))}matchSegmentAgainstRoute(t,e,i,r,s,c){let d;if("**"===i.path){const p=r.length>0?e6(r).parameters:{},m=new XR(r,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,B6(i),Eu(i),i.component??i._loadedComponent??null,i,V6(i));d=(0,Mt.of)({snapshot:m,consumedSegments:[],remainingSegments:[]}),e.children={}}else d=one(e,i,r,t).pipe((0,at.U)(({matched:p,consumedSegments:m,remainingSegments:y,parameters:T})=>p?{snapshot:new XR(m,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,B6(i),Eu(i),i.component??i._loadedComponent??null,i,V6(i)),consumedSegments:m,remainingSegments:y}:null));return d.pipe((0,Jn.w)(p=>null===p?nD(e):this.getChildConfig(t=i._injector??t,i,r).pipe((0,Jn.w)(({routes:m})=>{const y=i._loadedInjector??t,{snapshot:T,consumedSegments:A,remainingSegments:x}=p,{segmentGroup:P,slicedSegments:V}=F6(e,A,x,m);if(0===V.length&&P.hasChildren())return this.processChildren(y,m,P).pipe((0,at.U)(te=>null===te?null:[new zf(T,te)]));if(0===m.length&&0===V.length)return(0,Mt.of)([new zf(T,[])]);const G=Eu(i)===s;return this.processSegment(y,m,P,V,G?bn:s,!0).pipe((0,at.U)(te=>[new zf(T,te)]))}))))}getChildConfig(t,e,i){return e.children?(0,Mt.of)({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?(0,Mt.of)({routes:e._loadedRoutes,injector:e._loadedInjector}):function tne(n,t,e,i){const r=t.canLoad;if(void 0===r||0===r.length)return(0,Mt.of)(!0);const s=r.map(c=>{const d=eD(c,n);return bm(function Hte(n){return n&&PS(n.canLoad)}(d)?d.canLoad(t,e):n.runInContext(()=>d(t,e)))});return(0,Mt.of)(s).pipe(tD(),O6())}(t,e,i).pipe((0,Ds.z)(r=>r?this.configLoader.loadChildren(t,e).pipe((0,Ps.b)(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function rne(n){return wS(A6(!1,3))}())):(0,Mt.of)({routes:[],injector:t})}}function mne(n){const t=n.value.routeConfig;return t&&""===t.path}function L6(n){const t=[],e=new Set;for(const i of n){if(!mne(i)){t.push(i);continue}const r=t.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):t.push(i)}for(const i of e){const r=L6(i.children);t.push(new zf(i.value,r))}return t.filter(i=>!e.has(i))}function B6(n){return n.data||{}}function V6(n){return n.resolve||{}}function vne(n,t){return(0,Ds.z)(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return(0,Mt.of)(e);let s=0;return(0,Hn.D)(r).pipe(bS(c=>function yne(n,t,e,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!U6(r)&&(s[DS]=r.title),function wne(n,t,e,i){const r=function bne(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return(0,Mt.of)({});const s={};return(0,Hn.D)(r).pipe((0,Ds.z)(c=>function Dne(n,t,e,i){const r=RS(t)??i,s=eD(n,r);return bm(s.resolve?s.resolve(t,e):r.runInContext(()=>s(t,e)))}(n[c],t,e,i).pipe(ma(),(0,Ps.b)(d=>{s[c]=d}))),$R(1),function FG(n){return(0,at.U)(()=>n)}(s),hy(c=>R6(c)?er.E:wS(c)))}(s,n,t,i).pipe((0,at.U)(c=>(n._resolvedData=c,n.data=E6(n,e).resolve,r&&U6(r)&&(n.data[DS]=r.title),null)))}(c.route,i,n,t)),(0,Ps.b)(()=>s++),$R(1),(0,Ds.z)(c=>s===r.length?(0,Mt.of)(e):er.E))})}function U6(n){return"string"==typeof n.title||null===n.title}function dB(n){return(0,Jn.w)(t=>{const e=n(t);return e?(0,Hn.D)(e).pipe((0,at.U)(()=>t)):(0,Mt.of)(t)})}const iD=new l.OlP("ROUTES");let hB=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,l.f3M)(l.Sil)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return(0,Mt.of)(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=bm(e.loadComponent()).pipe((0,at.U)(H6),(0,Ps.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),q2(()=>{this.componentLoaders.delete(e)})),r=new J$(i,()=>new Qt.x).pipe(W2());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return(0,Mt.of)({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=function Ene(n,t,e,i){return bm(n.loadChildren()).pipe((0,at.U)(H6),(0,Ds.z)(r=>r instanceof l.YKP||Array.isArray(r)?(0,Mt.of)(r):(0,Hn.D)(t.compileModuleAsync(r))),(0,at.U)(r=>{i&&i(n);let s,c,d=!1;return Array.isArray(r)?(c=r,!0):(s=r.create(e).injector,c=s.get(iD,[],{optional:!0,self:!0}).flat()),{routes:c.map(lB),injector:s}}))}(i,this.compiler,e,this.onLoadEndListener).pipe(q2(()=>{this.childrenLoaders.delete(i)})),c=new J$(s,()=>new Qt.x).pipe(W2());return this.childrenLoaders.set(i,c),c}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function H6(n){return function Cne(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let sO=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Qt.x,this.transitionAbortSubject=new Qt.x,this.configLoader=(0,l.f3M)(hB),this.environmentInjector=(0,l.f3M)(l.lqb),this.urlSerializer=(0,l.f3M)(CS),this.rootContexts=(0,l.f3M)(NS),this.inputBindingEnabled=null!==(0,l.f3M)(eO,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,Mt.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new mte(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new gte(r))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:i})}setupNavigations(e,i,r){return this.transitions=new wl.X({id:0,currentUrlTree:i,currentRawUrl:i,currentBrowserUrl:i,extractedUrl:e.urlHandlingStrategy.extract(i),urlAfterRedirects:e.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:AS,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(fn(s=>0!==s.id),(0,at.U)(s=>({...s,extractedUrl:e.urlHandlingStrategy.extract(s.rawUrl)})),(0,Jn.w)(s=>{this.currentTransition=s;let c=!1,d=!1;return(0,Mt.of)(s).pipe((0,Ps.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.rawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Jn.w)(p=>{const m=p.currentBrowserUrl.toString(),y=!e.navigated||p.extractedUrl.toString()!==m||m!==p.currentUrlTree.toString();if(!y&&"reload"!==(p.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const A="";return this.events.next(new Qb(p.id,this.urlSerializer.serialize(p.rawUrl),A,0)),p.resolve(null),er.E}if(e.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return(0,Mt.of)(p).pipe((0,Jn.w)(A=>{const x=this.transitions?.getValue();return this.events.next(new QR(A.id,this.urlSerializer.serialize(A.extractedUrl),A.source,A.restoredState)),x!==this.transitions?.getValue()?er.E:Promise.resolve(A)}),function _ne(n,t,e,i,r,s){return(0,Ds.z)(c=>function fne(n,t,e,i,r,s,c="emptyOnly"){return new pne(n,t,e,i,r,c,s).recognize()}(n,t,e,i,c.extractedUrl,r,s).pipe((0,at.U)(({state:d,tree:p})=>({...c,targetSnapshot:d,urlAfterRedirects:p}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),(0,Ps.b)(A=>{s.targetSnapshot=A.targetSnapshot,s.urlAfterRedirects=A.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:A.urlAfterRedirects};const x=new v6(A.id,this.urlSerializer.serialize(A.extractedUrl),this.urlSerializer.serialize(A.urlAfterRedirects),A.targetSnapshot);this.events.next(x)}));if(y&&e.urlHandlingStrategy.shouldProcessUrl(p.currentRawUrl)){const{id:A,extractedUrl:x,source:P,restoredState:V,extras:G}=p,te=new QR(A,this.urlSerializer.serialize(x),P,V);this.events.next(te);const se=D6(0,this.rootComponentType).snapshot;return this.currentTransition=s={...p,targetSnapshot:se,urlAfterRedirects:x,extras:{...G,skipLocationChange:!1,replaceUrl:!1}},(0,Mt.of)(s)}{const A="";return this.events.next(new Qb(p.id,this.urlSerializer.serialize(p.extractedUrl),A,1)),p.resolve(null),er.E}}),(0,Ps.b)(p=>{const m=new dte(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}),(0,at.U)(p=>(this.currentTransition=s={...p,guards:Fte(p.targetSnapshot,p.currentSnapshot,this.rootContexts)},s)),function qte(n,t){return(0,Ds.z)(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:c}}=e;return 0===c.length&&0===s.length?(0,Mt.of)({...e,guardsResult:!0}):function Yte(n,t,e,i){return(0,Hn.D)(n).pipe((0,Ds.z)(r=>function ene(n,t,e,i,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,Mt.of)(!0);const c=s.map(d=>{const p=RS(t)??r,m=eD(d,p);return bm(function $te(n){return n&&PS(n.canDeactivate)}(m)?m.canDeactivate(n,t,e,i):p.runInContext(()=>m(n,t,e,i))).pipe(ma())});return(0,Mt.of)(c).pipe(tD())}(r.component,r.route,e,t,i)),ma(r=>!0!==r,!0))}(c,i,r,n).pipe((0,Ds.z)(d=>d&&function Ute(n){return"boolean"==typeof n}(d)?function Zte(n,t,e,i){return(0,Hn.D)(t).pipe(bS(r=>Kh(function Qte(n,t){return null!==n&&t&&t(new _te(n)),(0,Mt.of)(!0)}(r.route.parent,i),function Kte(n,t){return null!==n&&t&&t(new yte(n)),(0,Mt.of)(!0)}(r.route,i),function Xte(n,t,e){const i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(c=>function Lte(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(c)).filter(c=>null!==c).map(c=>Q$(()=>{const d=c.guards.map(p=>{const m=RS(c.node)??e,y=eD(p,m);return bm(function Gte(n){return n&&PS(n.canActivateChild)}(y)?y.canActivateChild(i,n):m.runInContext(()=>y(i,n))).pipe(ma())});return(0,Mt.of)(d).pipe(tD())}));return(0,Mt.of)(s).pipe(tD())}(n,r.path,e),function Jte(n,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return(0,Mt.of)(!0);const r=i.map(s=>Q$(()=>{const c=RS(t)??e,d=eD(s,c);return bm(function jte(n){return n&&PS(n.canActivate)}(d)?d.canActivate(t,n):c.runInContext(()=>d(t,n))).pipe(ma())}));return(0,Mt.of)(r).pipe(tD())}(n,r.route,e))),ma(r=>!0!==r,!0))}(i,s,n,t):(0,Mt.of)(d)),(0,at.U)(d=>({...e,guardsResult:d})))})}(this.environmentInjector,p=>this.events.next(p)),(0,Ps.b)(p=>{if(s.guardsResult=p.guardsResult,py(p.guardsResult))throw S6(0,p.guardsResult);const m=new hte(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.events.next(m)}),fn(p=>!!p.guardsResult||(this.cancelNavigationTransition(p,"",3),!1)),dB(p=>{if(p.guards.canActivateChecks.length)return(0,Mt.of)(p).pipe((0,Ps.b)(m=>{const y=new fte(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(y)}),(0,Jn.w)(m=>{let y=!1;return(0,Mt.of)(m).pipe(vne(e.paramsInheritanceStrategy,this.environmentInjector),(0,Ps.b)({next:()=>y=!0,complete:()=>{y||this.cancelNavigationTransition(m,"",2)}}))}),(0,Ps.b)(m=>{const y=new pte(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(y)}))}),dB(p=>{const m=y=>{const T=[];y.routeConfig?.loadComponent&&!y.routeConfig._loadedComponent&&T.push(this.configLoader.loadComponent(y.routeConfig).pipe((0,Ps.b)(A=>{y.component=A}),(0,at.U)(()=>{})));for(const A of y.children)T.push(...m(A));return T};return GR(m(p.targetSnapshot.root)).pipe(zo(),jn(1))}),dB(()=>this.afterPreactivation()),(0,at.U)(p=>{const m=function Tte(n,t,e){const i=xS(n,t._root,e?e._root:void 0);return new b6(i,t)}(e.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return this.currentTransition=s={...p,targetRouterState:m},s}),(0,Ps.b)(()=>{this.events.next(new X2)}),((n,t,e,i)=>(0,at.U)(r=>(new Pte(t,r.targetRouterState,r.currentRouterState,e,i).activate(n),r)))(this.rootContexts,e.routeReuseStrategy,p=>this.events.next(p),this.inputBindingEnabled),jn(1),(0,Ps.b)({next:p=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Dm(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects))),e.titleStrategy?.updateTitle(p.targetRouterState.snapshot),p.resolve(!0)},complete:()=>{c=!0}}),bi(this.transitionAbortSubject.pipe((0,Ps.b)(p=>{throw p}))),q2(()=>{c||d||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),hy(p=>{if(d=!0,M6(p))this.events.next(new MS(s.id,this.urlSerializer.serialize(s.extractedUrl),p.message,p.cancellationCode)),function Ate(n){return M6(n)&&py(n.url)}(p)?this.events.next(new eB(p.url)):s.resolve(!1);else{this.events.next(new JR(s.id,this.urlSerializer.serialize(s.extractedUrl),p,s.targetSnapshot??void 0));try{s.resolve(e.errorHandler(p))}catch(m){s.reject(m)}}return er.E}))}))}cancelNavigationTransition(e,i,r){const s=new MS(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(s),e.resolve(!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function j6(n){return n!==AS}let G6=(()=>{class n{buildTitle(e){let i,r=e.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===bn);return i}getResolvedTitleForRoute(e){return e.data[DS]}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(Tne)},providedIn:"root"})}return n})(),Tne=(()=>{class n extends G6{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}static#e=this.\u0275fac=function(i){return new(i||n)(l.LFG(Ue))};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ine=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(Ane)},providedIn:"root"})}return n})();class Sne{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let Ane=(()=>{class n extends Sne{static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}();static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const oO=new l.OlP("",{providedIn:"root",factory:()=>({})});let Mne=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(Nne)},providedIn:"root"})}return n})(),Nne=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var FS=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(FS||{});function $6(n,t){n.events.pipe(fn(e=>e instanceof Dm||e instanceof MS||e instanceof JR||e instanceof Qb),(0,at.U)(e=>e instanceof Dm||e instanceof Qb?FS.COMPLETE:e instanceof MS&&(0===e.code||1===e.code)?FS.REDIRECTING:FS.FAILED),fn(e=>e!==FS.REDIRECTING),jn(1)).subscribe(()=>{t()})}function xne(n){throw n}function Rne(n,t,e){return t.parse("/")}const One={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},kne={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let xa=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,l.f3M)(l.c2e),this.isNgZoneEnabled=!1,this._events=new Qt.x,this.options=(0,l.f3M)(oO,{optional:!0})||{},this.pendingTasks=(0,l.f3M)(l.HDt),this.errorHandler=this.options.errorHandler||xne,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Rne,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,l.f3M)(Mne),this.routeReuseStrategy=(0,l.f3M)(Ine),this.titleStrategy=(0,l.f3M)(G6),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,l.f3M)(iD,{optional:!0})?.flat()??[],this.navigationTransitions=(0,l.f3M)(sO),this.urlSerializer=(0,l.f3M)(CS),this.location=(0,l.f3M)(ot),this.componentInputBindingEnabled=!!(0,l.f3M)(eO,{optional:!0}),this.eventsSubscription=new z2.w0,this.isNgZoneEnabled=(0,l.f3M)(l.R0b)instanceof l.R0b&&l.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Kb,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=D6(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const e=this.navigationTransitions.events.subscribe(i=>{try{const{currentTransition:r}=this.navigationTransitions;if(null===r)return void(z6(i)&&this._events.next(i));if(i instanceof QR)j6(r.source)&&(this.browserUrlTree=r.extractedUrl);else if(i instanceof Qb)this.rawUrlTree=r.rawUrl;else if(i instanceof v6){if("eager"===this.urlUpdateStrategy){if(!r.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl);this.setBrowserUrl(s,r)}this.browserUrlTree=r.urlAfterRedirects}}else if(i instanceof X2)this.currentUrlTree=r.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r),this.browserUrlTree=r.urlAfterRedirects);else if(i instanceof MS)0!==i.code&&1!==i.code&&(this.navigated=!0),(3===i.code||2===i.code)&&this.restoreHistory(r);else if(i instanceof eB){const s=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),c={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||j6(r.source)};this.scheduleNavigation(s,AS,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}i instanceof JR&&this.restoreHistory(r,!0),i instanceof Dm&&(this.navigated=!0),z6(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),AS,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,i,e.state)},0)}))}navigateToSyncWithBrowser(e,i,r){const s={replaceUrl:!0},c=r?.navigationId?r:null;if(r){const p={...r};delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(s.state=p)}const d=this.parseUrl(e);this.scheduleNavigation(d,i,c,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(lB),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){const{relativeTo:r,queryParams:s,fragment:c,queryParamsHandling:d,preserveFragment:p}=i,m=p?this.currentUrlTree.fragment:c;let T,y=null;switch(d){case"merge":y={...this.currentUrlTree.queryParams,...s};break;case"preserve":y=this.currentUrlTree.queryParams;break;default:y=s||null}null!==y&&(y=this.removeEmptyProps(y));try{T=d6(r?r.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof e[0]||!e[0].startsWith("/"))&&(e=[]),T=this.currentUrlTree.root}return h6(T,e,y,m??null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=py(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,AS,null,i)}navigate(e,i={skipLocationChange:!1}){return function Pne(n){for(let t=0;t<n.length;t++)if(null==n[t])throw new l.vHH(4008,!1)}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?{...One}:!1===i?{...kne}:i,py(e))return n6(this.currentUrlTree,e,r);const s=this.parseUrl(e);return n6(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const s=e[r];return null!=s&&(i[r]=s),i},{})}scheduleNavigation(e,i,r,s,c){if(this.disposed)return Promise.resolve(!1);let d,p,m;c?(d=c.resolve,p=c.reject,m=c.promise):m=new Promise((T,A)=>{d=T,p=A});const y=this.pendingTasks.add();return $6(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(y))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:e,extras:s,resolve:d,reject:p,promise:m,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),m.catch(T=>Promise.reject(T))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const c={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",c)}else{const s={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(r,"",s)}}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function z6(n){return!(n instanceof X2||n instanceof eB)}let LS=(()=>{class n{constructor(e,i,r,s,c,d){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=c,this.locationStrategy=d,this.href=null,this.commands=null,this.onChanges=new Qt.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const p=c.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===p||"area"===p,this.isAnchorElement?this.subscription=e.events.subscribe(m=>{m instanceof Dm&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(e,i,r,s,c){return!!(null===this.urlTree||this.isAnchorElement&&(0!==e||i||r||s||c||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const e=null===this.href?null:(0,l.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",e)}applyAttributeValue(e,i){const r=this.renderer,s=this.el.nativeElement;null!==i?r.setAttribute(s,e,i):r.removeAttribute(s,e)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(i){return new(i||n)(l.Y36(xa),l.Y36(Xb),l.$8M("tabindex"),l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(Ze))};static#t=this.\u0275dir=l.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){1&i&&l.NdJ("click",function(c){return r.onClick(c.button,c.ctrlKey,c.shiftKey,c.altKey,c.metaKey)}),2&i&&l.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",l.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",l.VuI],replaceUrl:["replaceUrl","replaceUrl",l.VuI],routerLink:"routerLink"},standalone:!0,features:[l.Xq5,l.TTD]})}return n})(),W6=(()=>{class n{get isActive(){return this._isActive}constructor(e,i,r,s,c){this.router=e,this.element=i,this.renderer=r,this.cdr=s,this.link=c,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new l.vpe,this.routerEventsSubscription=e.events.subscribe(d=>{d instanceof Dm&&this.update()})}ngAfterContentInit(){(0,Mt.of)(this.links.changes,(0,Mt.of)(null)).pipe((0,pd.J)()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const e=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=(0,Hn.D)(e).pipe((0,pd.J)()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(e){const i=Array.isArray(e)?e:e.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const e=this.hasActiveLinks();this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.classes.forEach(i=>{e?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),e&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(e))})}isLinkActive(e){const i=function Fne(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>!!r.urlTree&&e.isActive(r.urlTree,i)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}static#e=this.\u0275fac=function(i){return new(i||n)(l.Y36(xa),l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(l.sBO),l.Y36(LS,8))};static#t=this.\u0275dir=l.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(i,r,s){if(1&i&&l.Suo(s,LS,5),2&i){let c;l.iGM(c=l.CRH())&&(r.links=c)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[l.TTD]})}return n})();class q6{}let Lne=(()=>{class n{constructor(e,i,r,s,c){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(fn(e=>e instanceof Dm),bS(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=(0,l.MMx)(s.providers,e,`Route: ${s.path}`));const c=s._injector??e,d=s._loadedInjector??c;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(c,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(d,s.children??s._loadedRoutes))}return(0,Hn.D)(r).pipe((0,pd.J)())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):(0,Mt.of)(null);const s=r.pipe((0,Ds.z)(c=>null===c?(0,Mt.of)(void 0):(i._loadedRoutes=c.routes,i._loadedInjector=c.injector,this.processRoutes(c.injector??e,c.routes))));if(i.loadComponent&&!i._loadedComponent){const c=this.loader.loadComponent(i);return(0,Hn.D)([s,c]).pipe((0,pd.J)())}return s})}static#e=this.\u0275fac=function(i){return new(i||n)(l.LFG(xa),l.LFG(l.Sil),l.LFG(l.lqb),l.LFG(q6),l.LFG(hB))};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const fB=new l.OlP("");let Y6=(()=>{class n{constructor(e,i,r,s,c={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration=c.scrollPositionRestoration||"disabled",c.anchorScrolling=c.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof QR?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Dm?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof Qb&&0===e.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof y6&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new y6(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){l.$Z()};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac})}return n})();function Wf(n,t){return{\u0275kind:n,\u0275providers:t}}function K6(){const n=(0,l.f3M)(l.zs3);return t=>{const e=n.get(l.z2F);if(t!==e.components[0])return;const i=n.get(xa),r=n.get(Q6);1===n.get(pB)&&i.initialNavigation(),n.get(J6,null,l.XFs.Optional)?.setUpPreloading(),n.get(fB,null,l.XFs.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const Q6=new l.OlP("",{factory:()=>new Qt.x}),pB=new l.OlP("",{providedIn:"root",factory:()=>1}),J6=new l.OlP("");function Hne(n){return Wf(0,[{provide:J6,useExisting:Lne},{provide:q6,useExisting:n}])}const X6=new l.OlP("ROUTER_FORROOT_GUARD"),Gne=[ot,{provide:CS,useClass:Y2},xa,NS,{provide:Xb,useFactory:function Z6(n){return n.routerState.root},deps:[xa]},hB,[]];function $ne(){return new l.PXZ("Router",xa)}let ez=(()=>{class n{constructor(e){}static forRoot(e,i){return{ngModule:n,providers:[Gne,[],{provide:iD,multi:!0,useValue:e},{provide:X6,useFactory:Yne,deps:[[xa,new l.FiY,new l.tp0]]},{provide:oO,useValue:i||{}},i?.useHash?{provide:Ze,useClass:$e}:{provide:Ze,useClass:st},{provide:fB,useFactory:()=>{const n=(0,l.f3M)(cr),t=(0,l.f3M)(l.R0b),e=(0,l.f3M)(oO),i=(0,l.f3M)(sO),r=(0,l.f3M)(CS);return e.scrollOffset&&n.setOffset(e.scrollOffset),new Y6(r,i,n,t,e)}},i?.preloadingStrategy?Hne(i.preloadingStrategy).\u0275providers:[],{provide:l.PXZ,multi:!0,useFactory:$ne},i?.initialNavigation?Zne(i):[],i?.bindToComponentInputs?Wf(8,[I6,{provide:eO,useExisting:I6}]).\u0275providers:[],[{provide:tz,useFactory:K6},{provide:l.tb,multi:!0,useExisting:tz}]]}}static forChild(e){return{ngModule:n,providers:[{provide:iD,multi:!0,useValue:e}]}}static#e=this.\u0275fac=function(i){return new(i||n)(l.LFG(X6,8))};static#t=this.\u0275mod=l.oAB({type:n});static#n=this.\u0275inj=l.cJS({})}return n})();function Yne(n){return"guarded"}function Zne(n){return["disabled"===n.initialNavigation?Wf(3,[{provide:l.ip1,multi:!0,useFactory:()=>{const t=(0,l.f3M)(xa);return()=>{t.setUpLocationChangeListener()}}},{provide:pB,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Wf(2,[{provide:pB,useValue:0},{provide:l.ip1,multi:!0,deps:[l.zs3],useFactory:t=>{const e=t.get(He,Promise.resolve());return()=>e.then(()=>new Promise(i=>{const r=t.get(xa),s=t.get(Q6);$6(r,()=>{i(!0)}),t.get(sO).afterPreactivation=()=>(i(!0),s.closed?(0,Mt.of)(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const tz=new l.OlP("");var gy=function(n){return n.UserNotFound="auth/user-not-found",n.WrongPassword="auth/wrong-password",n.EmailInUse="auth/email-already-in-use",n.WeakPassword="auth/weak-password",n.BadEmail="auth/invalid-email",n.InvalidLogin="auth/invalid-login-credentials",n}(gy||{});let Qne=(()=>{class n{constructor(){}firebaseError(e){switch(e){case gy.UserNotFound:return"User does not exist";case gy.WrongPassword:return"Wrong password";case gy.EmailInUse:return"Email already in use";case gy.WeakPassword:return"Weak password, use 6 characters at least";case gy.BadEmail:return"Invalid Email";case gy.InvalidLogin:return"Credentials not accepted";default:return"Unknown error"}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),nz=(()=>{class n{constructor(){this.loggedIn=new wl.X(!1)}get isLoggedIn(){return this.loggedIn.asObservable()}isLoggedNext(e){return this.loggedIn.next(e)}SessionAddStorage(e,i){sessionStorage.setItem(e,JSON.stringify(i))}SessionGetStorage(e){const i=sessionStorage.getItem(e);return JSON.parse(i)}SessionRemove(e){sessionStorage.removeItem(e),sessionStorage.clear()}SessionClear(){sessionStorage.clear()}LocalAddStorage(e,i){localStorage.setItem(e,JSON.stringify(i))}LocalGetStorage(e){const i=localStorage.getItem(e);return JSON.parse(i)}LocalRemove(e){localStorage.removeItem(e)}LocalClear(){localStorage.clear()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Jne(n,t){1&n&&(l.TgZ(0,"span",10)(1,"strong"),l._uU(2,"Mail"),l.qZA(),l._uU(3," is required "),l.qZA())}function Xne(n,t){1&n&&(l.TgZ(0,"span",10),l._uU(1," Mail must be "),l.TgZ(2,"strong"),l._uU(3,"valid"),l.qZA()())}function eie(n,t){1&n&&(l.TgZ(0,"span",10)(1,"strong"),l._uU(2,"Password"),l.qZA(),l._uU(3," is required "),l.qZA())}let tie=(()=>{class n{constructor(e,i,r,s,c,d){this.fb=e,this.afAuth=i,this.router=r,this.fireBaseErrorService=s,this.toastr=c,this.storageService=d,this.loginUser=this.fb.group({email:["yejenot448@ibtrades.com",[vL.required,vL.email]],password:["yejenot448@ibtrades.com",vL.required]}),this.subscription=this.storageService.isLoggedIn.subscribe(p=>{1==p&&this.router.navigate(["dashboard"])})}login(){this.afAuth.signInWithEmailAndPassword(this.loginUser.value.email,this.loginUser.value.password).then(r=>{this.storageService.isLoggedNext(!0),this.router.navigate(["dashboard"])}).catch(r=>{this.toastr.error(this.fireBaseErrorService.firebaseError(r.code),"Error")})}static#e=this.\u0275fac=function(i){return new(i||n)(l.Y36(_Y),l.Y36(ld),l.Y36(xa),l.Y36(Qne),l.Y36(VL),l.Y36(nz))};static#t=this.\u0275cmp=l.Xpm({type:n,selectors:[["app-login"]],decls:20,vars:5,consts:[[1,"wrapper"],[1,"body"],["src","../../../assets/img/login-person.png","alt","Login",1,"logo"],[3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["type","email","formControlName","email","placeholder","name@example.com",1,"form-control"],["class","text-danger errorLabel",4,"ngIf"],["type","password","formControlName","password","placeholder","Password",1,"form-control"],[1,"d-grid","gap-2"],["type","submit",1,"btn","btn-primary","btn-lg",3,"disabled"],[1,"text-danger","errorLabel"]],template:function(i,r){if(1&i&&(l.TgZ(0,"div",0)(1,"div",1),l._UZ(2,"img",2),l.TgZ(3,"h1"),l._uU(4,"Login"),l.qZA(),l.TgZ(5,"form",3),l.NdJ("ngSubmit",function(){return r.login()}),l.TgZ(6,"div",4),l._UZ(7,"input",5),l.TgZ(8,"label"),l._uU(9,"Email"),l.qZA(),l.YNc(10,Jne,4,0,"span",6),l.YNc(11,Xne,4,0,"span",6),l.qZA(),l.TgZ(12,"div",4),l._UZ(13,"input",7),l.TgZ(14,"label"),l._uU(15,"Password"),l.qZA(),l.YNc(16,eie,4,0,"span",6),l.qZA(),l.TgZ(17,"div",8)(18,"button",9),l._uU(19,"Iniciar Sesion"),l.qZA()()()()()),2&i){let s,c,d;l.xp6(5),l.Q6J("formGroup",r.loginUser),l.xp6(5),l.Q6J("ngIf",(null==(s=r.loginUser.get("email"))?null:s.hasError("required"))&&(null==(s=r.loginUser.get("email"))?null:s.touched)),l.xp6(1),l.Q6J("ngIf",(null==(c=r.loginUser.get("email"))?null:c.hasError("email"))&&(null==(c=r.loginUser.get("email"))?null:c.touched)),l.xp6(5),l.Q6J("ngIf",(null==(d=r.loginUser.get("password"))?null:d.hasError("required"))&&(null==(d=r.loginUser.get("password"))?null:d.touched)),l.xp6(2),l.Q6J("disabled",r.loginUser.invalid)}},dependencies:[Mi,b3,qx,o3,a3,rR,kL],styles:[".wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100vh}.logo[_ngcontent-%COMP%]{height:130px;margin-bottom:10px}.body[_ngcontent-%COMP%]{width:100%;max-width:330px;margin:auto;padding:30px;text-align:center}"]})}return n})();function po(n){if(null===n||!0===n||!1===n)return NaN;var t=Number(n);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function aO(n){return(aO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function pn(n,t){if(t.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+t.length+" present")}function ni(n){pn(1,arguments);var t=Object.prototype.toString.call(n);return n instanceof Date||"object"===aO(n)&&"[object Date]"===t?new Date(n.getTime()):"number"==typeof n||"[object Number]"===t?new Date(n):(("string"==typeof n||"[object String]"===t)&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function my(n,t){pn(2,arguments);var e=ni(n),i=po(t);return isNaN(i)?new Date(NaN):(i&&e.setDate(e.getDate()+i),e)}function BS(n,t){return pn(2,arguments),my(n,-po(t))}function Cu(n){pn(1,arguments);var t=ni(n);return t.setHours(0,0,0,0),t}function VS(n){pn(1,arguments);var t=ni(n),e=t.getMonth();return t.setFullYear(t.getFullYear(),e+1,0),t.setHours(23,59,59,999),t}function gB(n,t){pn(2,arguments);var e=ni(n).getTime(),i=po(t);return new Date(e+i)}var nie=36e5;function US(n,t){return pn(2,arguments),gB(n,po(t)*nie)}function mB(n,t){pn(2,arguments);var e=ni(n),i=ni(t);return e.getFullYear()===i.getFullYear()&&e.getMonth()===i.getMonth()}function _B(n,t){pn(2,arguments);var e=Cu(n),i=Cu(t);return e.getTime()===i.getTime()}var rie=function(){function n(){}return n.prototype.getAllStyles=function(t){return window.getComputedStyle(t)},n.prototype.getStyle=function(t,e){return this.getAllStyles(t)[e]},n.prototype.isStaticPositioned=function(t){return"static"===(this.getStyle(t,"position")||"static")},n.prototype.offsetParent=function(t){for(var e=t.offsetParent||document.documentElement;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement},n.prototype.position=function(t,e){void 0===e&&(e=!0);var i,r={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))i={top:(i=t.getBoundingClientRect()).top,bottom:i.bottom,left:i.left,right:i.right,height:i.height,width:i.width};else{var s=this.offsetParent(t);i=this.offset(t,!1),s!==document.documentElement&&(r=this.offset(s,!1)),r.top+=s.clientTop,r.left+=s.clientLeft}return i.top-=r.top,i.bottom-=r.top,i.left-=r.left,i.right-=r.left,e&&(i.top=Math.round(i.top),i.bottom=Math.round(i.bottom),i.left=Math.round(i.left),i.right=Math.round(i.right)),i},n.prototype.offset=function(t,e){void 0===e&&(e=!0);var i=t.getBoundingClientRect(),r_top=window.pageYOffset-document.documentElement.clientTop,r_left=window.pageXOffset-document.documentElement.clientLeft,s={height:i.height||t.offsetHeight,width:i.width||t.offsetWidth,top:i.top+r_top,bottom:i.bottom+r_top,left:i.left+r_left,right:i.right+r_left};return e&&(s.height=Math.round(s.height),s.width=Math.round(s.width),s.top=Math.round(s.top),s.bottom=Math.round(s.bottom),s.left=Math.round(s.left),s.right=Math.round(s.right)),s},n.prototype.positionElements=function(t,e,i,r){var s=i.split("-"),c=s[0],d=void 0===c?"top":c,p=s[1],m=void 0===p?"center":p,y=r?this.offset(t,!1):this.position(t,!1),T=this.getAllStyles(e),A=parseFloat(T.marginTop),x=parseFloat(T.marginBottom),P=parseFloat(T.marginLeft),V=parseFloat(T.marginRight),G=0,te=0;switch(d){case"top":G=y.top-(e.offsetHeight+A+x);break;case"bottom":G=y.top+y.height;break;case"left":te=y.left-(e.offsetWidth+P+V);break;case"right":te=y.left+y.width}switch(m){case"top":G=y.top;break;case"bottom":G=y.top+y.height-e.offsetHeight;break;case"left":te=y.left;break;case"right":te=y.left+y.width-e.offsetWidth;break;case"center":"top"===d||"bottom"===d?te=y.left+y.width/2-e.offsetWidth/2:G=y.top+y.height/2-e.offsetHeight/2}e.style.transform="translate("+Math.round(te)+"px, "+Math.round(G)+"px)";var se=e.getBoundingClientRect(),le=document.documentElement,de=window.innerHeight||le.clientHeight,Oe=window.innerWidth||le.clientWidth;return se.left>=0&&se.top>=0&&se.right<=Oe&&se.bottom<=de},n}(),sie=/\s+/,iz=new rie,Tu=function(){return Tu=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++)for(var r in t=arguments[e])Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},Tu.apply(this,arguments)},vB=function(n,t,e){if(e||2===arguments.length)for(var s,i=0,r=t.length;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return n.concat(s||Array.prototype.slice.call(t))},yB=function(n){return n[n.SUNDAY=0]="SUNDAY",n[n.MONDAY=1]="MONDAY",n[n.TUESDAY=2]="TUESDAY",n[n.WEDNESDAY=3]="WEDNESDAY",n[n.THURSDAY=4]="THURSDAY",n[n.FRIDAY=5]="FRIDAY",n[n.SATURDAY=6]="SATURDAY",n}(yB||{}),aie=[yB.SUNDAY,yB.SATURDAY],wB=7,Em=86400;function rz(n,t){var e=t.startDate,r=t.excluded,s=t.precision;if(r.length<1)return 0;for(var d=n.getDay,p=n.addDays,m=(0,n.addSeconds)(e,t.seconds-1),y=d(e),T=d(m),A=0,x=e,P=function(){var V=d(x);r.some(function(G){return G===V})&&(A+=function lie(n,t){var i=t.day,s=t.dayEnd,c=t.startDate,d=t.endDate,p=n.differenceInSeconds,y=n.startOfDay;if("minutes"===t.precision){if(i===t.dayStart)return p((0,n.endOfDay)(c),c)+1;if(i===s)return p(d,y(d))+1}return Em}(n,{dayStart:y,dayEnd:T,day:V,precision:s,startDate:e,endDate:m})),x=p(x,1)};x<m;)P();return A}function HS(n,t){var i=t.periodStart,r=t.periodEnd;return t.events.filter(function(s){return function die(n,t){var e=t.event,i=t.periodStart,r=t.periodEnd,s=n.isSameSecond,c=e.start,d=e.end||e.start;return!!(c>i&&c<r||d>i&&d<r||c<i&&d>r||s(c,i)||s(c,r)||s(d,i)||s(d,r))}(n,{event:s,periodStart:i,periodEnd:r})})}function sz(n,t){var e=t.date,i=t.weekendDays,r=void 0===i?aie:i,c=n.isSameDay,d=n.getDay,p=(0,n.startOfDay)(new Date),m=d(e);return{date:e,day:m,isPast:e<p,isToday:c(e,p),isFuture:e>p,isWeekend:r.indexOf(m)>-1}}function DB(n,t){for(var r=t.excluded,s=void 0===r?[]:r,c=t.weekendDays,d=t.viewStart,p=void 0===d?n.startOfWeek(t.viewDate,{weekStartsOn:t.weekStartsOn}):d,m=t.viewEnd,y=void 0===m?n.addDays(p,wB):m,T=n.addDays,A=n.getDay,x=[],P=p;P<y;)s.some(function(V){return A(P)===V})||x.push(sz(n,{date:P,weekendDays:c})),P=T(P,1);return x}function fie(n,t){var e=t.events,i=void 0===e?[]:e,r=t.excluded,s=void 0===r?[]:r,c=t.precision,d=void 0===c?"days":c,p=t.absolutePositionedEvents,m=void 0!==p&&p,y=t.viewStart,T=t.viewEnd;y=n.startOfDay(y),T=n.endOfDay(T);var A=n.differenceInSeconds,x=n.differenceInDays,P=function hie(n,t){for(var i=t.date2,r=t.excluded,s=t.date1,c=0;s<i;)-1===r.indexOf(n.getDay(s))&&c++,s=n.addDays(s,1);return c}(n,{date1:y,date2:T,excluded:s}),V=x(T,y)+1,G=i.filter(function(le){return le.allDay}).map(function(le){var de=function uie(n,t){var e=t.event,i=t.startOfWeek,r=t.excluded,s=t.precision,c=n.differenceInDays,d=n.startOfDay,p=n.differenceInSeconds;if(e.start<i)return 0;var m=0;switch(s){case"days":m=c(d(e.start),i)*Em;break;case"minutes":m=p(e.start,i)}return m-=rz(n,{startDate:i,seconds:m,excluded:r,precision:s}),Math.abs(m/Em)}(n,{event:le,startOfWeek:y,excluded:s,precision:d}),Oe=function cie(n,t){var e=t.event,i=t.offset,s=t.excluded,c=t.precision,d=t.totalDaysInView,m=n.differenceInSeconds,y=n.addDays,T=n.endOfDay,A=n.differenceInDays,x=Em,P=(0,n.max)([e.start,t.startOfWeekDate]);e.end&&(x="minutes"===c?m(e.end,P):A(y(T(e.end),1),P)*Em);var V=i*Em,te=d*Em;return V+x>te&&(x=te-V),(x-=rz(n,{startDate:P,seconds:x,excluded:s,precision:c}))/Em}(n,{event:le,offset:de,startOfWeekDate:y,excluded:s,precision:d,totalDaysInView:V});return{event:le,offset:de,span:Oe}}).filter(function(le){return le.offset<P}).filter(function(le){return le.span>0}).map(function(le){return{event:le.event,offset:le.offset,span:le.span,startsBeforeWeek:le.event.start<y,endsAfterWeek:(le.event.end||le.event.start)>T}}).sort(function(le,de){var Oe=A(le.event.start,de.event.start);return 0===Oe?A(de.event.end||de.event.start,le.event.end||le.event.start):Oe}),te=[],se=[];return G.forEach(function(le,de){if(-1===se.indexOf(le)){se.push(le);var Oe=le.span+le.offset,je=G.slice(de+1).filter(function(_t){if(_t.offset>=Oe&&Oe+_t.span<=V&&-1===se.indexOf(_t)){var Tt=_t.offset-Oe;return m||(_t.offset=Tt),Oe+=_t.span+Tt,se.push(_t),!0}}),ct=vB([le],je,!0),nt=ct.filter(function(_t){return _t.event.id}).map(function(_t){return _t.event.id}).join("-");te.push(Tu({row:ct},nt?{id:nt}:{}))}}),te}function pie(n,t){var e=t.events,i=t.viewDate,r=t.hourSegments,s=t.hourDuration,c=t.dayStart,d=t.dayEnd,p=t.weekStartsOn,m=t.excluded,y=t.weekendDays,T=t.segmentHeight,A=t.viewStart,x=t.viewEnd,P=t.minimumEventHeight,V=function vie(n,t){var e=t.viewDate,i=t.hourSegments,r=t.hourDuration,s=t.dayStart,c=t.dayEnd,d=n.setMinutes,p=n.setHours,m=n.startOfDay,y=n.startOfMinute,T=n.endOfDay,A=n.addMinutes,x=n.addDays,P=[],V=d(p(m(e),uO(s.hour)),dO(s.minute)),G=d(p(y(T(e)),uO(c.hour)),dO(c.minute)),te=(r||60)/i,se=m(e),le=T(e),de=function(Tt){return Tt};n.getTimezoneOffset(se)!==n.getTimezoneOffset(le)&&(se=x(se,1),V=x(V,1),G=x(G,1),de=function(Tt){return x(Tt,-1)});for(var Oe=r?1440/r:60,je=0;je<Oe;je++){for(var ct=[],nt=0;nt<i;nt++){var _t=A(A(V,je*(r||60)),nt*te);_t>=V&&_t<G&&ct.push({date:de(_t),displayDate:_t,isStart:0===nt})}ct.length>0&&P.push({segments:ct})}return P}(n,{viewDate:i,hourSegments:r,hourDuration:s,dayStart:c,dayEnd:d}),G=DB(n,{viewDate:i,weekStartsOn:p,excluded:m,weekendDays:y,viewStart:A,viewEnd:x}),te=n.setHours,se=n.setMinutes,le=n.getHours,de=n.getMinutes;return G.map(function(Oe){var je=function _ie(n,t){var e=t.events,i=t.viewDate,r=t.hourSegments,s=t.dayStart,c=t.dayEnd,d=t.eventWidth,p=t.segmentHeight,m=t.hourDuration,y=t.minimumEventHeight,T=n.setMinutes,A=n.setHours,x=n.startOfDay,P=n.startOfMinute,V=n.endOfDay,G=n.differenceInMinutes,te=T(A(x(i),uO(s.hour)),dO(s.minute)),se=T(A(P(V(i)),uO(c.hour)),dO(c.minute));se.setSeconds(59,999);var le=[],de=HS(n,{events:e.filter(function(nt){return!nt.allDay}),periodStart:te,periodEnd:se}),Oe=de.sort(function(nt,_t){return nt.start.valueOf()-_t.start.valueOf()}).map(function(nt){var _t=nt.start,Tt=nt.end||_t,rt=_t<te,tt=Tt>se,Zt=r*p/(m||60),Mn=0;if(_t>te){var go=n.getTimezoneOffset(_t),St=n.getTimezoneOffset(te)-go;Mn+=G(_t,te)+St}Mn*=Zt,Mn=Math.floor(Mn);var Ht=rt?te:_t,jt=tt?se:Tt,ii=n.getTimezoneOffset(Ht)-n.getTimezoneOffset(jt),wi=G(jt,Ht)+ii;nt.end?wi*=Zt:wi=p,y&&wi<y&&(wi=y),wi=Math.floor(wi);for(var mo=cO(le,Mn,Mn+wi),$n=0;mo.some(function(bl){return bl.left===$n});)$n+=d;var Cs={event:nt,height:wi,width:d,top:Mn,left:$n,startsBeforeDay:rt,endsAfterDay:tt};return le.push(Cs),Cs}),je=Math.max.apply(Math,Oe.map(function(nt){return nt.left+nt.width})),ct=HS(n,{events:e.filter(function(nt){return nt.allDay}),periodStart:x(te),periodEnd:V(se)});return{events:Oe,width:je,allDayEvents:ct,period:{events:de,start:te,end:se}}}(n,{events:e,viewDate:Oe.date,hourSegments:r,dayStart:c,dayEnd:d,segmentHeight:T,eventWidth:1,hourDuration:s,minimumEventHeight:P}),ct=V.map(function(Tt){var rt=Tt.segments.map(function(tt){var Zt=se(te(Oe.date,le(tt.date)),de(tt.date));return Tu(Tu({},tt),{date:Zt})});return Tu(Tu({},Tt),{segments:rt})});function nt(Tt,rt){var tt=Math.max.apply(Math,rt.map(function(Mn){return Mn.left+1})),Zt=Tt.filter(function(Mn){return Mn.left>=tt}).filter(function(Mn){return cO(rt,Mn.top,Mn.top+Mn.height).length>0});return Zt.length>0?nt(Tt,Zt):tt}var _t=je.events.map(function(Tt){var tt=100/nt(je.events,cO(je.events,Tt.top,Tt.top+Tt.height));return Tu(Tu({},Tt),{left:Tt.left*tt,width:tt})});return{hours:ct,date:Oe.date,events:_t.map(function(Tt){var rt=cO(_t.filter(function(tt){return tt.left>Tt.left}),Tt.top,Tt.top+Tt.height);return rt.length>0?Tu(Tu({},Tt),{width:Math.min.apply(Math,rt.map(function(tt){return tt.left}))-Tt.left}):Tt})}})}function cO(n,t,e){return n.filter(function(i){var r=i.top,s=i.top+i.height;return t<s&&s<e||t<r&&r<e||r<=t&&e<=s})}function uO(n){return Math.max(Math.min(23,n),0)}function dO(n){return Math.max(Math.min(59,n),0)}var rD=function(n){return n.NotArray="Events must be an array",n.StartPropertyMissing="Event is missing the `start` property",n.StartPropertyNotDate="Event `start` property should be a javascript date object. Do `new Date(event.start)` to fix it.",n.EndPropertyNotDate="Event `end` property should be a javascript date object. Do `new Date(event.end)` to fix it.",n.EndsBeforeStart="Event `start` property occurs after the `end`",n}(rD||{});function EB(n,t){return n=function Die(n,t){return typeof n>"u"?typeof t>"u"?n:t:n}(n,t),"function"==typeof n?function(){for(var i=arguments,r=arguments.length,s=Array(r),c=0;c<r;c++)s[c]=i[c];return!!n.apply(this,s)}:n?function(){return!0}:function(){return!1}}var CB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol?"symbol":typeof n},oz=function(n){return null!=n&&"object"===(typeof n>"u"?"undefined":CB(n))&&1===n.nodeType&&"object"===CB(n.style)&&"object"===CB(n.ownerDocument)};function az(n,t){if(t=IB(t,!0),!oz(t))return-1;for(var e=0;e<n.length;e++)if(n[e]===t)return e;return-1}function TB(n,t){return-1!==az(n,t)}function Cie(n){for(var t=arguments,e=[],i=arguments.length-1;i-- >0;)e[i]=t[i+1];return function Eie(n,t){for(var e=0;e<t.length;e++)TB(n,t[e])||n.push(t[e]);return t}(n,e=e.map(IB))}function Tie(n){for(var t=arguments,e=[],i=arguments.length-1;i-- >0;)e[i]=t[i+1];return e.map(IB).reduce(function(r,s){var c=az(n,s);return-1!==c?r.concat(n.splice(c,1)):r},[])}function IB(n,t){if("string"==typeof n)try{return document.querySelector(n)}catch(e){throw e}if(!oz(n)&&!t)throw new TypeError(n+" is not a DOM element.");return n}function lz(n){if(n===window)return function Sie(){var n={top:{value:0,enumerable:!0},left:{value:0,enumerable:!0},right:{value:window.innerWidth,enumerable:!0},bottom:{value:window.innerHeight,enumerable:!0},width:{value:window.innerWidth,enumerable:!0},height:{value:window.innerHeight,enumerable:!0},x:{value:0,enumerable:!0},y:{value:0,enumerable:!0}};if(Object.create)return Object.create({},n);var t={};return Object.defineProperties(t,n),t}();try{var t=n.getBoundingClientRect();return void 0===t.x&&(t.x=t.left,t.y=t.top),t}catch{throw new TypeError("Can't call getBoundingClientRect on "+n)}}var t,SB=void 0;"function"!=typeof Object.create?(t=function(){},SB=function(e,i){if(e!==Object(e)&&null!==e)throw TypeError("Argument must be an object, or null");t.prototype=e||{};var r=new t;return t.prototype=null,void 0!==i&&Object.defineProperties(r,i),null===e&&(r.__proto__=null),r}):SB=Object.create;var Mie=SB,_y=["altKey","button","buttons","clientX","clientY","ctrlKey","metaKey","movementX","movementY","offsetX","offsetY","pageX","pageY","region","relatedTarget","screenX","screenY","shiftKey","which","x","y"];function AB(n,t){t=t||{};for(var e=Mie(n),i=0;i<_y.length;i++)void 0!==t[_y[i]]&&(e[_y[i]]=t[_y[i]]);return e}function MB(n,t){console.log("data ",t),n.data=t||{},n.dispatched="mousemove"}var jS=["webkit","moz","ms","o"],GS=function(){if(typeof window>"u")return function(){};for(var n=0,t=jS.length;n<t&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[jS[n]+"RequestAnimationFrame"];if(!window.requestAnimationFrame){var e=0;window.requestAnimationFrame=function(i){var r=(new Date).getTime(),s=Math.max(0,16-r-e),c=window.setTimeout(function(){return i(r+s)},s);return e=r+s,c}}return window.requestAnimationFrame.bind(window)}(),sD=function(){if(typeof window>"u")return function(){};for(var n=0,t=jS.length;n<t&&!window.cancelAnimationFrame;++n)window.cancelAnimationFrame=window[jS[n]+"CancelAnimationFrame"]||window[jS[n]+"CancelRequestAnimationFrame"];return window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){window.clearTimeout(e)}),window.cancelAnimationFrame.bind(window)}();function xie(n,t){void 0===t&&(t={});var e=this,i=4,r=!1;if("object"!=typeof t.margin){var s=t.margin||-1;this.margin={left:s,right:s,top:s,bottom:s}}else this.margin=t.margin;this.scrollWhenOutside=t.scrollWhenOutside||!1;var c={},d=function Iie(n,t){var e=EB((t=t||{}).allowUpdate,!0);return function(r){if(r=r||window.event,n.target=r.target||r.srcElement||r.originalTarget,n.element=this,n.type=r.type,e(r)){if(r.targetTouches)n.x=r.targetTouches[0].clientX,n.y=r.targetTouches[0].clientY,n.pageX=r.targetTouches[0].pageX,n.pageY=r.targetTouches[0].pageY,n.screenX=r.targetTouches[0].screenX,n.screenY=r.targetTouches[0].screenY;else{if(null===r.pageX&&null!==r.clientX){var s=r.target&&r.target.ownerDocument||document,c=s.documentElement,d=s.body;n.pageX=r.clientX+(c&&c.scrollLeft||d&&d.scrollLeft||0)-(c&&c.clientLeft||d&&d.clientLeft||0),n.pageY=r.clientY+(c&&c.scrollTop||d&&d.scrollTop||0)-(c&&c.clientTop||d&&d.clientTop||0)}else n.pageX=r.pageX,n.pageY=r.pageY;n.x=r.clientX,n.y=r.clientY,n.screenX=r.screenX,n.screenY=r.screenY}n.clientX=n.x,n.clientY=n.y}}}(c),p=function Nie(n){var t={screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,button:0,buttons:1,relatedTarget:null,region:null};function e(s){for(var c=0;c<_y.length;c++)t[_y[c]]=s[_y[c]]}return void 0!==n&&n.addEventListener("mousemove",e),{destroy:function r(){n&&n.removeEventListener("mousemove",e,!1),t=null},dispatch:MouseEvent?function(c,d,p){var m=new MouseEvent("mousemove",AB(t,d));return MB(m,p),c.dispatchEvent(m)}:"function"==typeof document.createEvent?function(c,d,p){var m=AB(t,d),y=document.createEvent("MouseEvents");return y.initMouseEvent("mousemove",!0,!0,window,0,m.screenX,m.screenY,m.clientX,m.clientY,m.ctrlKey,m.altKey,m.shiftKey,m.metaKey,m.button,m.relatedTarget),MB(y,p),c.dispatchEvent(y)}:"function"==typeof document.createEventObject?function(c,d,p){var m=document.createEventObject(),y=AB(t,d);for(var T in y)m[T]=y[T];return MB(m,p),c.dispatchEvent(m)}:void 0}}(),m=!1;window.addEventListener("mousemove",d,!1),window.addEventListener("touchmove",d,!1),isNaN(t.maxSpeed)||(i=t.maxSpeed),"object"!=typeof i&&(i={left:i,right:i,top:i,bottom:i}),this.autoScroll=EB(t.autoScroll),this.syncMove=EB(t.syncMove,!1),this.destroy=function(rt){window.removeEventListener("mousemove",d,!1),window.removeEventListener("touchmove",d,!1),window.removeEventListener("mousedown",V,!1),window.removeEventListener("touchstart",V,!1),window.removeEventListener("mouseup",G,!1),window.removeEventListener("touchend",G,!1),window.removeEventListener("pointerup",G,!1),window.removeEventListener("mouseleave",se,!1),window.removeEventListener("mousemove",Oe,!1),window.removeEventListener("touchmove",Oe,!1),window.removeEventListener("scroll",P,!0),n=[],rt&&te()},this.add=function(){for(var rt=[],tt=arguments.length;tt--;)rt[tt]=arguments[tt];return Cie.apply(void 0,[n].concat(rt)),this},this.remove=function(){for(var rt=[],tt=arguments.length;tt--;)rt[tt]=arguments[tt];return Tie.apply(void 0,[n].concat(rt))};var T,rt,y=null;"[object Array]"!==Object.prototype.toString.call(n)&&(n=[n]),rt=n,n=[],rt.forEach(function(tt){tt===window?y=window:e.add(tt)}),Object.defineProperties(this,{down:{get:function(){return m}},maxSpeed:{get:function(){return i}},point:{get:function(){return c}},scrolling:{get:function(){return r}}});var x,A=null;function P(rt){for(var tt=0;tt<n.length;tt++)if(n[tt]===rt.target){r=!0;break}r&&GS(function(){return r=!1})}function V(){m=!0}function G(){m=!1,te()}function te(){sD(x),sD(T)}function se(){m=!1}function de(){for(var rt=null,tt=0;tt<n.length;tt++)cz(c,n[tt])&&(rt=n[tt]);return rt}function Oe(rt){if(e.autoScroll()&&!rt.dispatched){var tt=rt.target,Zt=document.body;A&&!cz(c,A)&&(e.scrollWhenOutside||(A=null)),tt&&tt.parentNode===Zt?tt=de():(tt=function le(rt){if(!rt)return null;if(A===rt||TB(n,rt))return rt;for(;rt=rt.parentNode;)if(TB(n,rt))return rt;return null}(tt),tt||(tt=de())),tt&&tt!==A&&(A=tt),y&&(sD(T),T=GS(je)),A&&(sD(x),x=GS(ct))}}function je(){nt(y),sD(T),T=GS(je)}function ct(){A&&(nt(A),sD(x),x=GS(ct))}function nt(rt){var Zt,Mn,tt=lz(rt);Zt=c.x<tt.left+e.margin.left?Math.floor(Math.max(-1,(c.x-tt.left)/e.margin.left-1)*e.maxSpeed.left):c.x>tt.right-e.margin.right?Math.ceil(Math.min(1,(c.x-tt.right)/e.margin.right+1)*e.maxSpeed.right):0,Mn=c.y<tt.top+e.margin.top?Math.floor(Math.max(-1,(c.y-tt.top)/e.margin.top-1)*e.maxSpeed.top):c.y>tt.bottom-e.margin.bottom?Math.ceil(Math.min(1,(c.y-tt.bottom)/e.margin.bottom+1)*e.maxSpeed.bottom):0,e.syncMove()&&p.dispatch(rt,{pageX:c.pageX+Zt,pageY:c.pageY+Mn,clientX:c.x+Zt,clientY:c.y+Mn}),setTimeout(function(){Mn&&function _t(rt,tt){rt===window?window.scrollTo(rt.pageXOffset,rt.pageYOffset+tt):rt.scrollTop+=tt}(rt,Mn),Zt&&function Tt(rt,tt){rt===window?window.scrollTo(rt.pageXOffset+tt,rt.pageYOffset):rt.scrollLeft+=tt}(rt,Zt)})}window.addEventListener("mousedown",V,!1),window.addEventListener("touchstart",V,!1),window.addEventListener("mouseup",G,!1),window.addEventListener("touchend",G,!1),window.addEventListener("pointerup",G,!1),window.addEventListener("mousemove",Oe,!1),window.addEventListener("touchmove",Oe,!1),window.addEventListener("mouseleave",se,!1),window.addEventListener("scroll",P,!0)}function cz(n,t,e){return e?n.y>e.top&&n.y<e.bottom&&n.x>e.left&&n.x<e.right:function Aie(n,t){var e=lz(t);return n.y>e.top&&n.y<e.bottom&&n.x>e.left&&n.x<e.right}(n,t)}function NB(n,t,e){e&&e.split(" ").forEach(i=>n.addClass(t.nativeElement,i))}function hO(n,t,e){e&&e.split(" ").forEach(i=>n.removeClass(t.nativeElement,i))}let uz=(()=>{class n{constructor(){this.currentDrag=new Qt.x}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),dz=(()=>{class n{constructor(e){this.elementRef=e}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","mwlDraggableScrollContainer",""]]}),n})(),xB=(()=>{class n{constructor(e,i,r,s,c,d,p){this.element=e,this.renderer=i,this.draggableHelper=r,this.zone=s,this.vcr=c,this.scrollContainer=d,this.document=p,this.dragAxis={x:!0,y:!0},this.dragSnapGrid={},this.ghostDragEnabled=!0,this.showOriginalElementWhileDragging=!1,this.dragCursor="",this.autoScroll={margin:20},this.dragPointerDown=new l.vpe,this.dragStart=new l.vpe,this.ghostElementCreated=new l.vpe,this.dragging=new l.vpe,this.dragEnd=new l.vpe,this.pointerDown$=new Qt.x,this.pointerMove$=new Qt.x,this.pointerUp$=new Qt.x,this.eventListenerSubscriptions={},this.destroy$=new Qt.x,this.timeLongPress={timerBegin:0,timerEnd:0}}ngOnInit(){this.checkEventListeners();const e=this.pointerDown$.pipe(fn(()=>this.canDrag()),(0,Ds.z)(i=>{i.event.stopPropagation&&!this.scrollContainer&&i.event.stopPropagation();const r=this.renderer.createElement("style");this.renderer.setAttribute(r,"type","text/css"),this.renderer.appendChild(r,this.renderer.createText("\n          body * {\n           -moz-user-select: none;\n           -ms-user-select: none;\n           -webkit-user-select: none;\n           user-select: none;\n          }\n        ")),requestAnimationFrame(()=>{this.document.head.appendChild(r)});const s=this.getScrollPosition(),c=new Ti.y(x=>this.renderer.listen(this.scrollContainer?this.scrollContainer.elementRef.nativeElement:"window","scroll",V=>x.next(V))).pipe(Kl(s),(0,at.U)(()=>this.getScrollPosition())),d=new Qt.x,p=new Xn;this.dragPointerDown.observers.length>0&&this.zone.run(()=>{this.dragPointerDown.next({x:0,y:0})});const m=(0,Sr.T)(this.pointerUp$,this.pointerDown$,p,this.destroy$).pipe((0,Ar.B)()),y=GR([this.pointerMove$,c]).pipe((0,at.U)(([x,P])=>({currentDrag$:d,transformX:x.clientX-i.clientX,transformY:x.clientY-i.clientY,clientX:x.clientX,clientY:x.clientY,scrollLeft:P.left,scrollTop:P.top,target:x.event.target})),(0,at.U)(x=>(this.dragSnapGrid.x&&(x.transformX=Math.round(x.transformX/this.dragSnapGrid.x)*this.dragSnapGrid.x),this.dragSnapGrid.y&&(x.transformY=Math.round(x.transformY/this.dragSnapGrid.y)*this.dragSnapGrid.y),x)),(0,at.U)(x=>(this.dragAxis.x||(x.transformX=0),this.dragAxis.y||(x.transformY=0),x)),(0,at.U)(x=>{const P=x.scrollLeft-s.left,V=x.scrollTop-s.top;return{...x,x:x.transformX+P,y:x.transformY+V}}),fn(({x,y:P,transformX:V,transformY:G})=>!this.validateDrag||this.validateDrag({x,y:P,transform:{x:V,y:G}})),bi(m),(0,Ar.B)()),T=y.pipe(jn(1),(0,Ar.B)()),A=y.pipe($R(1),(0,Ar.B)());return T.subscribe(({clientX:x,clientY:P,x:V,y:G})=>{if(this.dragStart.observers.length>0&&this.zone.run(()=>{this.dragStart.next({cancelDrag$:p})}),this.scroller=function Rie(n,t){return new xie(n,t)}([this.scrollContainer?this.scrollContainer.elementRef.nativeElement:this.document.defaultView],{...this.autoScroll,autoScroll:()=>!0}),NB(this.renderer,this.element,this.dragActiveClass),this.ghostDragEnabled){const te=this.element.nativeElement.getBoundingClientRect(),se=this.element.nativeElement.cloneNode(!0);if(this.showOriginalElementWhileDragging||this.renderer.setStyle(this.element.nativeElement,"visibility","hidden"),this.ghostElementAppendTo?this.ghostElementAppendTo.appendChild(se):this.element.nativeElement.parentNode.insertBefore(se,this.element.nativeElement.nextSibling),this.ghostElement=se,this.document.body.style.cursor=this.dragCursor,this.setElementStyles(se,{position:"fixed",top:`${te.top}px`,left:`${te.left}px`,width:`${te.width}px`,height:`${te.height}px`,cursor:this.dragCursor,margin:"0",willChange:"transform",pointerEvents:"none"}),this.ghostElementTemplate){const le=this.vcr.createEmbeddedView(this.ghostElementTemplate);se.innerHTML="",le.rootNodes.filter(de=>de instanceof Node).forEach(de=>{se.appendChild(de)}),A.subscribe(()=>{this.vcr.remove(this.vcr.indexOf(le))})}this.ghostElementCreated.observers.length>0&&this.zone.run(()=>{this.ghostElementCreated.emit({clientX:x-V,clientY:P-G,element:se})}),A.subscribe(()=>{se.parentElement.removeChild(se),this.ghostElement=null,this.renderer.setStyle(this.element.nativeElement,"visibility","")})}this.draggableHelper.currentDrag.next(d)}),A.pipe((0,Ds.z)(x=>{const P=p.pipe(function bie(n){return function wie(n,t){return(0,$i.e)(b0(n,t,arguments.length>=2,!1,!0))}((t,e,i)=>!n||n(e,i)?t+1:t,0)}(),jn(1),(0,at.U)(V=>({...x,dragCancelled:V>0})));return p.complete(),P})).subscribe(({x,y:P,dragCancelled:V})=>{this.scroller.destroy(),this.dragEnd.observers.length>0&&this.zone.run(()=>{this.dragEnd.next({x,y:P,dragCancelled:V})}),hO(this.renderer,this.element,this.dragActiveClass),d.complete()}),(0,Sr.T)(m,A).pipe(jn(1)).subscribe(()=>{requestAnimationFrame(()=>{this.document.head.removeChild(r)})}),y}),(0,Ar.B)());(0,Sr.T)(e.pipe(jn(1),(0,at.U)(i=>[,i])),e.pipe(__())).pipe(fn(([i,r])=>!i||i.x!==r.x||i.y!==r.y),(0,at.U)(([i,r])=>r)).subscribe(({x:i,y:r,currentDrag$:s,clientX:c,clientY:d,transformX:p,transformY:m,target:y})=>{this.dragging.observers.length>0&&this.zone.run(()=>{this.dragging.next({x:i,y:r})}),requestAnimationFrame(()=>{if(this.ghostElement){const T=`translate3d(${p}px, ${m}px, 0px)`;this.setElementStyles(this.ghostElement,{transform:T,"-webkit-transform":T,"-ms-transform":T,"-moz-transform":T,"-o-transform":T})}}),s.next({clientX:c,clientY:d,dropData:this.dropData,target:y})})}ngOnChanges(e){e.dragAxis&&this.checkEventListeners()}ngOnDestroy(){this.unsubscribeEventListeners(),this.pointerDown$.complete(),this.pointerMove$.complete(),this.pointerUp$.complete(),this.destroy$.next()}checkEventListeners(){const e=this.canDrag(),i=Object.keys(this.eventListenerSubscriptions).length>0;e&&!i?this.zone.runOutsideAngular(()=>{this.eventListenerSubscriptions.mousedown=this.renderer.listen(this.element.nativeElement,"mousedown",r=>{this.onMouseDown(r)}),this.eventListenerSubscriptions.mouseup=this.renderer.listen("document","mouseup",r=>{this.onMouseUp(r)}),this.eventListenerSubscriptions.touchstart=this.renderer.listen(this.element.nativeElement,"touchstart",r=>{this.onTouchStart(r)}),this.eventListenerSubscriptions.touchend=this.renderer.listen("document","touchend",r=>{this.onTouchEnd(r)}),this.eventListenerSubscriptions.touchcancel=this.renderer.listen("document","touchcancel",r=>{this.onTouchEnd(r)}),this.eventListenerSubscriptions.mouseenter=this.renderer.listen(this.element.nativeElement,"mouseenter",()=>{this.onMouseEnter()}),this.eventListenerSubscriptions.mouseleave=this.renderer.listen(this.element.nativeElement,"mouseleave",()=>{this.onMouseLeave()})}):!e&&i&&this.unsubscribeEventListeners()}onMouseDown(e){0===e.button&&(this.eventListenerSubscriptions.mousemove||(this.eventListenerSubscriptions.mousemove=this.renderer.listen("document","mousemove",i=>{this.pointerMove$.next({event:i,clientX:i.clientX,clientY:i.clientY})})),this.pointerDown$.next({event:e,clientX:e.clientX,clientY:e.clientY}))}onMouseUp(e){0===e.button&&(this.eventListenerSubscriptions.mousemove&&(this.eventListenerSubscriptions.mousemove(),delete this.eventListenerSubscriptions.mousemove),this.pointerUp$.next({event:e,clientX:e.clientX,clientY:e.clientY}))}onTouchStart(e){let i,r,s;if(this.touchStartLongPress&&(this.timeLongPress.timerBegin=Date.now(),r=!1,s=this.hasScrollbar(),i=this.getScrollPosition()),!this.eventListenerSubscriptions.touchmove){const c=Es(this.document,"contextmenu").subscribe(p=>{p.preventDefault()}),d=Es(this.document,"touchmove",{passive:!1}).subscribe(p=>{this.touchStartLongPress&&!r&&s&&(r=this.shouldBeginDrag(e,p,i)),(!this.touchStartLongPress||!s||r)&&(p.preventDefault(),this.pointerMove$.next({event:p,clientX:p.targetTouches[0].clientX,clientY:p.targetTouches[0].clientY}))});this.eventListenerSubscriptions.touchmove=()=>{c.unsubscribe(),d.unsubscribe()}}this.pointerDown$.next({event:e,clientX:e.touches[0].clientX,clientY:e.touches[0].clientY})}onTouchEnd(e){this.eventListenerSubscriptions.touchmove&&(this.eventListenerSubscriptions.touchmove(),delete this.eventListenerSubscriptions.touchmove,this.touchStartLongPress&&this.enableScroll()),this.pointerUp$.next({event:e,clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY})}onMouseEnter(){this.setCursor(this.dragCursor)}onMouseLeave(){this.setCursor("")}canDrag(){return this.dragAxis.x||this.dragAxis.y}setCursor(e){this.eventListenerSubscriptions.mousemove||this.renderer.setStyle(this.element.nativeElement,"cursor",e)}unsubscribeEventListeners(){Object.keys(this.eventListenerSubscriptions).forEach(e=>{this.eventListenerSubscriptions[e](),delete this.eventListenerSubscriptions[e]})}setElementStyles(e,i){Object.keys(i).forEach(r=>{this.renderer.setStyle(e,r,i[r])})}getScrollElement(){return this.scrollContainer?this.scrollContainer.elementRef.nativeElement:this.document.body}getScrollPosition(){return this.scrollContainer?{top:this.scrollContainer.elementRef.nativeElement.scrollTop,left:this.scrollContainer.elementRef.nativeElement.scrollLeft}:{top:window.pageYOffset||this.document.documentElement.scrollTop,left:window.pageXOffset||this.document.documentElement.scrollLeft}}shouldBeginDrag(e,i,r){const s=this.getScrollPosition(),c_top=Math.abs(s.top-r.top),c_left=Math.abs(s.left-r.left),d=Math.abs(i.targetTouches[0].clientX-e.touches[0].clientX)-c_left,p=Math.abs(i.targetTouches[0].clientY-e.touches[0].clientY)-c_top,y=this.touchStartLongPress;return(d+p>y.delta||c_top>0||c_left>0)&&(this.timeLongPress.timerBegin=Date.now()),this.timeLongPress.timerEnd=Date.now(),this.timeLongPress.timerEnd-this.timeLongPress.timerBegin>=y.delay&&(this.disableScroll(),!0)}enableScroll(){this.scrollContainer&&this.renderer.setStyle(this.scrollContainer.elementRef.nativeElement,"overflow",""),this.renderer.setStyle(this.document.body,"overflow","")}disableScroll(){this.scrollContainer&&this.renderer.setStyle(this.scrollContainer.elementRef.nativeElement,"overflow","hidden"),this.renderer.setStyle(this.document.body,"overflow","hidden")}hasScrollbar(){const e=this.getScrollElement();return e.scrollWidth>e.clientWidth||e.scrollHeight>e.clientHeight}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(uz),l.Y36(l.R0b),l.Y36(l.s_b),l.Y36(dz,8),l.Y36(ve))},n.\u0275dir=l.lG2({type:n,selectors:[["","mwlDraggable",""]],inputs:{dropData:"dropData",dragAxis:"dragAxis",dragSnapGrid:"dragSnapGrid",ghostDragEnabled:"ghostDragEnabled",showOriginalElementWhileDragging:"showOriginalElementWhileDragging",validateDrag:"validateDrag",dragCursor:"dragCursor",dragActiveClass:"dragActiveClass",ghostElementAppendTo:"ghostElementAppendTo",ghostElementTemplate:"ghostElementTemplate",touchStartLongPress:"touchStartLongPress",autoScroll:"autoScroll"},outputs:{dragPointerDown:"dragPointerDown",dragStart:"dragStart",ghostElementCreated:"ghostElementCreated",dragging:"dragging",dragEnd:"dragEnd"},features:[l.TTD]}),n})();function hz(n,t,e){return n>=e.left&&n<=e.right&&t>=e.top&&t<=e.bottom}let RB=(()=>{class n{constructor(e,i,r,s,c){this.element=e,this.draggableHelper=i,this.zone=r,this.renderer=s,this.scrollContainer=c,this.dragEnter=new l.vpe,this.dragLeave=new l.vpe,this.dragOver=new l.vpe,this.drop=new l.vpe}ngOnInit(){this.currentDragSubscription=this.draggableHelper.currentDrag.subscribe(e=>{NB(this.renderer,this.element,this.dragActiveClass);const i={updateCache:!0},r=this.renderer.listen(this.scrollContainer?this.scrollContainer.elementRef.nativeElement:"window","scroll",()=>{i.updateCache=!0});let s;const c=e.pipe((0,at.U)(({clientX:m,clientY:y,dropData:T,target:A})=>{s={clientX:m,clientY:y,dropData:T,target:A},i.updateCache&&(i.rect=this.element.nativeElement.getBoundingClientRect(),this.scrollContainer&&(i.scrollContainerRect=this.scrollContainer.elementRef.nativeElement.getBoundingClientRect()),i.updateCache=!1);const x=hz(m,y,i.rect),P=!this.validateDrop||this.validateDrop({clientX:m,clientY:y,target:A,dropData:T});return i.scrollContainerRect?x&&P&&hz(m,y,i.scrollContainerRect):x&&P})),d=c.pipe((0,D0.x)());let p;d.pipe(fn(m=>m)).subscribe(()=>{p=!0,NB(this.renderer,this.element,this.dragOverClass),this.dragEnter.observers.length>0&&this.zone.run(()=>{this.dragEnter.next(s)})}),c.pipe(fn(m=>m)).subscribe(()=>{this.dragOver.observers.length>0&&this.zone.run(()=>{this.dragOver.next(s)})}),d.pipe(__(),fn(([m,y])=>m&&!y)).subscribe(()=>{p=!1,hO(this.renderer,this.element,this.dragOverClass),this.dragLeave.observers.length>0&&this.zone.run(()=>{this.dragLeave.next(s)})}),e.subscribe({complete:()=>{r(),hO(this.renderer,this.element,this.dragActiveClass),p&&(hO(this.renderer,this.element,this.dragOverClass),this.drop.observers.length>0&&this.zone.run(()=>{this.drop.next(s)}))}})})}ngOnDestroy(){this.currentDragSubscription&&this.currentDragSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(uz),l.Y36(l.R0b),l.Y36(l.Qsj),l.Y36(dz,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","mwlDroppable",""]],inputs:{dragOverClass:"dragOverClass",dragActiveClass:"dragActiveClass",validateDrop:"validateDrop"},outputs:{dragEnter:"dragEnter",dragLeave:"dragLeave",dragOver:"dragOver",drop:"drop"}}),n})(),fO=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const vy=!(typeof window>"u")&&("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0);function fz(n,t,e,i){const r=t.querySelectorAll(n);if(r.length){const s=e.querySelectorAll(n);for(let c=0;c<r.length;c++)i(r[c],s[c])}}let Pie=0;function pz(n,t){"file"!==t.type&&(t.value=n.value),"radio"===t.type&&t.name&&(t.name=`mat-clone-${t.name}-${Pie++}`)}function gz(n,t){const e=t.getContext("2d");if(e)try{e.drawImage(n,0,0)}catch{}}function mz(n,t,e,i){const r={top:n.top,bottom:n.bottom,left:n.left,right:n.right};return t.top&&(r.top+=i),t.bottom&&(r.bottom+=i),t.left&&(r.left+=e),t.right&&(r.right+=e),r.height=r.bottom-r.top,r.width=r.right-r.left,r}const _z=Object.freeze({topLeft:"nw-resize",topRight:"ne-resize",bottomLeft:"sw-resize",bottomRight:"se-resize",leftOrRight:"col-resize",topOrBottom:"row-resize"});function vz(n,t){return n.left&&n.top?t.topLeft:n.right&&n.top?t.topRight:n.left&&n.bottom?t.bottomLeft:n.right&&n.bottom?t.bottomRight:n.left||n.right?t.leftOrRight:n.top||n.bottom?t.topOrBottom:""}function pO({edges:n,initialRectangle:t,newRectangle:e}){const i={};return Object.keys(n).forEach(r=>{i[r]=(e[r]||0)-(t[r]||0)}),i}const yz="resize-active";let wz=(()=>{class n{constructor(e,i,r,s){this.platformId=e,this.renderer=i,this.elm=r,this.zone=s,this.enableGhostResize=!1,this.resizeSnapGrid={},this.resizeCursors=_z,this.ghostElementPositioning="fixed",this.allowNegativeResizes=!1,this.mouseMoveThrottleMS=50,this.resizeStart=new l.vpe,this.resizing=new l.vpe,this.resizeEnd=new l.vpe,this.mouseup=new Qt.x,this.mousedown=new Qt.x,this.mousemove=new Qt.x,this.destroy$=new Qt.x,this.pointerEventListeners=oD.getInstance(i,s)}ngOnInit(){const e=(0,Sr.T)(this.pointerEventListeners.pointerDown,this.mousedown),i=(0,Sr.T)(this.pointerEventListeners.pointerMove,this.mousemove).pipe((0,Ps.b)(({event:m})=>{s&&m.cancelable&&m.preventDefault()}),(0,Ar.B)()),r=(0,Sr.T)(this.pointerEventListeners.pointerUp,this.mouseup);let s;const c=()=>{s&&s.clonedNode&&(this.elm.nativeElement.parentElement.removeChild(s.clonedNode),this.renderer.setStyle(this.elm.nativeElement,"visibility","inherit"))},d=()=>({..._z,...this.resizeCursors});e.pipe((0,Ds.z)(m=>{function y(x){return{clientX:x.clientX-m.clientX,clientY:x.clientY-m.clientY}}const T=()=>{const x={x:1,y:1};return s&&(this.resizeSnapGrid.left&&s.edges.left?x.x=+this.resizeSnapGrid.left:this.resizeSnapGrid.right&&s.edges.right&&(x.x=+this.resizeSnapGrid.right),this.resizeSnapGrid.top&&s.edges.top?x.y=+this.resizeSnapGrid.top:this.resizeSnapGrid.bottom&&s.edges.bottom&&(x.y=+this.resizeSnapGrid.bottom)),x};function A(x,P){return{x:Math.ceil(x.clientX/P.x),y:Math.ceil(x.clientY/P.y)}}return(0,Sr.T)(i.pipe(jn(1)).pipe((0,at.U)(x=>[,x])),i.pipe(__())).pipe((0,at.U)(([x,P])=>[x&&y(x),y(P)])).pipe(fn(([x,P])=>{if(!x)return!0;const V=T(),G=A(x,V),te=A(P,V);return G.x!==te.x||G.y!==te.y})).pipe((0,at.U)(([,x])=>{const P=T();return{clientX:Math.round(x.clientX/P.x)*P.x,clientY:Math.round(x.clientY/P.y)*P.y}})).pipe(bi((0,Sr.T)(r,e)))})).pipe(fn(()=>!!s)).pipe((0,at.U)(({clientX:m,clientY:y})=>mz(s.startingRect,s.edges,m,y))).pipe(fn(m=>this.allowNegativeResizes||!!(m.height&&m.width&&m.height>0&&m.width>0))).pipe(fn(m=>!this.validateResize||this.validateResize({rectangle:m,edges:pO({edges:s.edges,initialRectangle:s.startingRect,newRectangle:m})})),bi(this.destroy$)).subscribe(m=>{s&&s.clonedNode&&(this.renderer.setStyle(s.clonedNode,"height",`${m.height}px`),this.renderer.setStyle(s.clonedNode,"width",`${m.width}px`),this.renderer.setStyle(s.clonedNode,"top",`${m.top}px`),this.renderer.setStyle(s.clonedNode,"left",`${m.left}px`)),this.resizing.observers.length>0&&this.zone.run(()=>{this.resizing.emit({edges:pO({edges:s.edges,initialRectangle:s.startingRect,newRectangle:m}),rectangle:m})}),s.currentRect=m}),e.pipe((0,at.U)(({edges:m})=>m||{}),fn(m=>Object.keys(m).length>0),bi(this.destroy$)).subscribe(m=>{s&&c();const y=function Fie(n,t){let e=0,i=0;const r=n.nativeElement.style,c=["transform","-ms-transform","-moz-transform","-o-transform"].map(d=>r[d]).find(d=>!!d);if(c&&c.includes("translate")&&(e=c.replace(/.*translate3?d?\((-?[0-9]*)px, (-?[0-9]*)px.*/,"$1"),i=c.replace(/.*translate3?d?\((-?[0-9]*)px, (-?[0-9]*)px.*/,"$2")),"absolute"===t)return{height:n.nativeElement.offsetHeight,width:n.nativeElement.offsetWidth,top:n.nativeElement.offsetTop-i,bottom:n.nativeElement.offsetHeight+n.nativeElement.offsetTop-i,left:n.nativeElement.offsetLeft-e,right:n.nativeElement.offsetWidth+n.nativeElement.offsetLeft-e};{const d=n.nativeElement.getBoundingClientRect();return{height:d.height,width:d.width,top:d.top-i,bottom:d.bottom-i,left:d.left-e,right:d.right-e,scrollTop:n.nativeElement.scrollTop,scrollLeft:n.nativeElement.scrollLeft}}}(this.elm,this.ghostElementPositioning);s={edges:m,startingRect:y,currentRect:y};const T=d(),A=vz(s.edges,T);this.renderer.setStyle(document.body,"cursor",A),this.setElementClass(this.elm,yz,!0),this.enableGhostResize&&(s.clonedNode=function kie(n){const t=n.cloneNode(!0),e=t.querySelectorAll("[id]"),i=n.nodeName.toLowerCase();return t.removeAttribute("id"),e.forEach(r=>{r.removeAttribute("id")}),"canvas"===i?gz(n,t):("input"===i||"select"===i||"textarea"===i)&&pz(n,t),fz("canvas",n,t,gz),fz("input, textarea, select",n,t,pz),t}(this.elm.nativeElement),this.elm.nativeElement.parentElement.appendChild(s.clonedNode),this.renderer.setStyle(this.elm.nativeElement,"visibility","hidden"),this.renderer.setStyle(s.clonedNode,"position",this.ghostElementPositioning),this.renderer.setStyle(s.clonedNode,"left",`${s.startingRect.left}px`),this.renderer.setStyle(s.clonedNode,"top",`${s.startingRect.top}px`),this.renderer.setStyle(s.clonedNode,"height",`${s.startingRect.height}px`),this.renderer.setStyle(s.clonedNode,"width",`${s.startingRect.width}px`),this.renderer.setStyle(s.clonedNode,"cursor",vz(s.edges,T)),this.renderer.addClass(s.clonedNode,"resize-ghost-element"),s.clonedNode.scrollTop=s.startingRect.scrollTop,s.clonedNode.scrollLeft=s.startingRect.scrollLeft),this.resizeStart.observers.length>0&&this.zone.run(()=>{this.resizeStart.emit({edges:pO({edges:m,initialRectangle:y,newRectangle:y}),rectangle:mz(y,{},0,0)})})}),r.pipe(bi(this.destroy$)).subscribe(()=>{s&&(this.renderer.removeClass(this.elm.nativeElement,yz),this.renderer.setStyle(document.body,"cursor",""),this.renderer.setStyle(this.elm.nativeElement,"cursor",""),this.resizeEnd.observers.length>0&&this.zone.run(()=>{this.resizeEnd.emit({edges:pO({edges:s.edges,initialRectangle:s.startingRect,newRectangle:s.currentRect}),rectangle:s.currentRect})}),c(),s=null)})}ngOnDestroy(){(function np(n){return n===Vo})(this.platformId)&&this.renderer.setStyle(document.body,"cursor",""),this.mousedown.complete(),this.mouseup.complete(),this.mousemove.complete(),this.destroy$.next()}setElementClass(e,i,r){r?this.renderer.addClass(e.nativeElement,i):this.renderer.removeClass(e.nativeElement,i)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.Lbi),l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(l.R0b))},n.\u0275dir=l.lG2({type:n,selectors:[["","mwlResizable",""]],inputs:{validateResize:"validateResize",enableGhostResize:"enableGhostResize",resizeSnapGrid:"resizeSnapGrid",resizeCursors:"resizeCursors",ghostElementPositioning:"ghostElementPositioning",allowNegativeResizes:"allowNegativeResizes",mouseMoveThrottleMS:"mouseMoveThrottleMS"},outputs:{resizeStart:"resizeStart",resizing:"resizing",resizeEnd:"resizeEnd"},exportAs:["mwlResizable"]}),n})();class oD{constructor(t,e){this.pointerDown=new Ti.y(i=>{let r,s;return e.runOutsideAngular(()=>{r=t.listen("document","mousedown",c=>{i.next({clientX:c.clientX,clientY:c.clientY,event:c})}),vy&&(s=t.listen("document","touchstart",c=>{i.next({clientX:c.touches[0].clientX,clientY:c.touches[0].clientY,event:c})}))}),()=>{r(),vy&&s()}}).pipe((0,Ar.B)()),this.pointerMove=new Ti.y(i=>{let r,s;return e.runOutsideAngular(()=>{r=t.listen("document","mousemove",c=>{i.next({clientX:c.clientX,clientY:c.clientY,event:c})}),vy&&(s=t.listen("document","touchmove",c=>{i.next({clientX:c.targetTouches[0].clientX,clientY:c.targetTouches[0].clientY,event:c})}))}),()=>{r(),vy&&s()}}).pipe((0,Ar.B)()),this.pointerUp=new Ti.y(i=>{let r,s,c;return e.runOutsideAngular(()=>{r=t.listen("document","mouseup",d=>{i.next({clientX:d.clientX,clientY:d.clientY,event:d})}),vy&&(s=t.listen("document","touchend",d=>{i.next({clientX:d.changedTouches[0].clientX,clientY:d.changedTouches[0].clientY,event:d})}),c=t.listen("document","touchcancel",d=>{i.next({clientX:d.changedTouches[0].clientX,clientY:d.changedTouches[0].clientY,event:d})}))}),()=>{r(),vy&&(s(),c())}}).pipe((0,Ar.B)())}static getInstance(t,e){return oD.instance||(oD.instance=new oD(t,e)),oD.instance}}let Vie=(()=>{class n{constructor(e,i,r,s){this.renderer=e,this.element=i,this.zone=r,this.resizableDirective=s,this.resizeEdges={},this.eventListeners={},this.destroy$=new Qt.x}ngOnInit(){this.zone.runOutsideAngular(()=>{this.listenOnTheHost("mousedown").subscribe(e=>{this.onMousedown(e,e.clientX,e.clientY)}),this.listenOnTheHost("mouseup").subscribe(e=>{this.onMouseup(e.clientX,e.clientY)}),vy&&(this.listenOnTheHost("touchstart").subscribe(e=>{this.onMousedown(e,e.touches[0].clientX,e.touches[0].clientY)}),(0,Sr.T)(this.listenOnTheHost("touchend"),this.listenOnTheHost("touchcancel")).subscribe(e=>{this.onMouseup(e.changedTouches[0].clientX,e.changedTouches[0].clientY)}))})}ngOnDestroy(){this.destroy$.next(),this.unsubscribeEventListeners()}onMousedown(e,i,r){e.cancelable&&e.preventDefault(),this.eventListeners.touchmove||(this.eventListeners.touchmove=this.renderer.listen(this.element.nativeElement,"touchmove",s=>{this.onMousemove(s,s.targetTouches[0].clientX,s.targetTouches[0].clientY)})),this.eventListeners.mousemove||(this.eventListeners.mousemove=this.renderer.listen(this.element.nativeElement,"mousemove",s=>{this.onMousemove(s,s.clientX,s.clientY)})),this.resizable.mousedown.next({clientX:i,clientY:r,edges:this.resizeEdges})}onMouseup(e,i){this.unsubscribeEventListeners(),this.resizable.mouseup.next({clientX:e,clientY:i,edges:this.resizeEdges})}get resizable(){return this.resizableDirective||this.resizableContainer}onMousemove(e,i,r){this.resizable.mousemove.next({clientX:i,clientY:r,edges:this.resizeEdges,event:e})}unsubscribeEventListeners(){Object.keys(this.eventListeners).forEach(e=>{this.eventListeners[e](),delete this.eventListeners[e]})}listenOnTheHost(e){return Es(this.element.nativeElement,e).pipe(bi(this.destroy$))}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(l.R0b),l.Y36(wz,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","mwlResizeHandle",""]],inputs:{resizeEdges:"resizeEdges",resizableContainer:"resizableContainer"}}),n})(),bz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const Uie=function(n){return{action:n}};function Hie(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"a",5),l.NdJ("mwlClick",function(r){const c=l.CHM(e).$implicit,d=l.oxw(2).event;return l.KtG(c.onClick({event:d,sourceEvent:r}))})("mwlKeydownEnter",function(r){const c=l.CHM(e).$implicit,d=l.oxw(2).event;return l.KtG(c.onClick({event:d,sourceEvent:r}))}),l.ALo(1,"calendarA11y"),l.qZA()}if(2&n){const e=t.$implicit;l.Q6J("ngClass",e.cssClass)("innerHtml",e.label,l.oJD),l.uIk("aria-label",l.xi3(1,3,l.VKq(6,Uie,e),"actionButtonLabel"))}}function jie(n,t){if(1&n&&(l.TgZ(0,"span",3),l.YNc(1,Hie,2,8,"a",4),l.qZA()),2&n){const e=l.oxw(),i=e.event,r=e.trackByActionId;l.xp6(1),l.Q6J("ngForOf",i.actions)("ngForTrackBy",r)}}function Gie(n,t){1&n&&l.YNc(0,jie,2,2,"span",2),2&n&&l.Q6J("ngIf",t.event.actions)}function $ie(n,t){}const zie=function(n,t){return{event:n,trackByActionId:t}},aD=function(){return{}};function Wie(n,t){if(1&n&&(l._UZ(0,"span",2),l.ALo(1,"calendarEventTitle"),l.ALo(2,"calendarA11y")),2&n){const e=t.event;l.Q6J("innerHTML",l.Dn7(1,2,e.title,t.view,e),l.oJD),l.uIk("aria-hidden",l.xi3(2,6,l.DdM(9,aD),"hideEventTitle"))}}function qie(n,t){}const Yie=function(n,t){return{event:n,view:t}};function Zie(n,t){if(1&n&&(l.TgZ(0,"div",2),l._UZ(1,"div",3)(2,"div",4),l.qZA()),2&n){const e=t.contents;l.Q6J("ngClass","cal-tooltip-"+t.placement),l.xp6(2),l.Q6J("innerHtml",e,l.oJD)}}function Kie(n,t){}const Qie=function(n,t,e){return{contents:n,placement:t,event:e}};function Jie(n,t){if(1&n&&(l.TgZ(0,"span",7),l._uU(1),l.qZA()),2&n){const e=l.oxw().day;l.xp6(1),l.Oqu(e.badgeTotal)}}const OB=function(n){return{backgroundColor:n}},Xie=function(n,t){return{event:n,draggedFrom:t}},$S=function(n,t){return{x:n,y:t}},gO=function(){return{delay:300,delta:30}};function ere(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",10),l.NdJ("mouseenter",function(){const s=l.CHM(e).$implicit,c=l.oxw(2).highlightDay;return l.KtG(c.emit({event:s}))})("mouseleave",function(){const s=l.CHM(e).$implicit,c=l.oxw(2).unhighlightDay;return l.KtG(c.emit({event:s}))})("mwlClick",function(r){const c=l.CHM(e).$implicit,d=l.oxw(2).eventClicked;return l.KtG(d.emit({event:c,sourceEvent:r}))}),l.ALo(1,"calendarEventTitle"),l.ALo(2,"calendarA11y"),l.qZA()}if(2&n){const e=t.$implicit,i=l.oxw(2),r=i.tooltipPlacement,s=i.tooltipTemplate,c=i.tooltipAppendToBody,d=i.tooltipDelay,p=i.day,m=i.validateDrag;l.ekj("cal-draggable",e.draggable),l.Q6J("ngStyle",l.VKq(22,OB,null==e.color?null:e.color.primary))("ngClass",null==e?null:e.cssClass)("mwlCalendarTooltip",l.Dn7(1,15,e.title,"monthTooltip",e))("tooltipPlacement",r)("tooltipEvent",e)("tooltipTemplate",s)("tooltipAppendToBody",c)("tooltipDelay",d)("dropData",l.WLB(24,Xie,e,p))("dragAxis",l.WLB(27,$S,e.draggable,e.draggable))("validateDrag",m)("touchStartLongPress",l.DdM(30,gO)),l.uIk("aria-hidden",l.xi3(2,19,l.DdM(31,aD),"hideMonthCellEvents"))}}function tre(n,t){if(1&n&&(l.TgZ(0,"div",8),l.YNc(1,ere,3,32,"div",9),l.qZA()),2&n){const e=l.oxw(),i=e.day,r=e.trackByEventId;l.xp6(1),l.Q6J("ngForOf",i.events)("ngForTrackBy",r)}}const nre=function(n,t){return{day:n,locale:t}};function ire(n,t){if(1&n&&(l.TgZ(0,"div",2),l.ALo(1,"calendarA11y"),l.TgZ(2,"span",3),l.YNc(3,Jie,2,1,"span",4),l.TgZ(4,"span",5),l._uU(5),l.ALo(6,"calendarDate"),l.qZA()()(),l.YNc(7,tre,2,2,"div",6)),2&n){const e=t.day,i=t.locale;l.uIk("aria-label",l.xi3(1,4,l.WLB(11,nre,e,i),"monthCell")),l.xp6(3),l.Q6J("ngIf",e.badgeTotal>0),l.xp6(2),l.Oqu(l.Dn7(6,7,e.date,"monthViewDayNumber",i)),l.xp6(2),l.Q6J("ngIf",e.events.length>0)}}function rre(n,t){}const sre=function(n,t,e,i,r,s,c,d,p,m,y,T){return{day:n,openDay:t,locale:e,tooltipPlacement:i,highlightDay:r,unhighlightDay:s,eventClicked:c,tooltipTemplate:d,tooltipAppendToBody:p,tooltipDelay:m,trackByEventId:y,validateDrag:T}},ore=function(n){return{event:n}},Dz=function(n,t){return{event:n,locale:t}};function are(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",7),l._UZ(1,"span",8),l._uU(2," "),l.TgZ(3,"mwl-calendar-event-title",9),l.NdJ("mwlClick",function(r){const c=l.CHM(e).$implicit,d=l.oxw(2).eventClicked;return l.KtG(d.emit({event:c,sourceEvent:r}))})("mwlKeydownEnter",function(r){const c=l.CHM(e).$implicit,d=l.oxw(2).eventClicked;return l.KtG(d.emit({event:c,sourceEvent:r}))}),l.ALo(4,"calendarA11y"),l.qZA(),l._uU(5," "),l._UZ(6,"mwl-calendar-event-actions",10),l.qZA()}if(2&n){const e=t.$implicit,i=l.oxw(2).validateDrag,r=l.oxw();l.ekj("cal-draggable",e.draggable),l.Q6J("ngClass",null==e?null:e.cssClass)("dropData",l.VKq(16,ore,e))("dragAxis",l.WLB(18,$S,e.draggable,e.draggable))("validateDrag",i)("touchStartLongPress",l.DdM(21,gO)),l.xp6(1),l.Q6J("ngStyle",l.VKq(22,OB,null==e.color?null:e.color.primary)),l.xp6(2),l.Q6J("event",e)("customTemplate",r.eventTitleTemplate),l.uIk("aria-label",l.xi3(4,13,l.WLB(24,Dz,e,r.locale),"eventDescription")),l.xp6(3),l.Q6J("event",e)("customTemplate",r.eventActionsTemplate)}}const Ez=function(n,t){return{date:n,locale:t}};function lre(n,t){if(1&n&&(l.TgZ(0,"div",3),l._UZ(1,"span",4),l.ALo(2,"calendarA11y"),l._UZ(3,"span",5),l.ALo(4,"calendarA11y"),l.YNc(5,are,7,27,"div",6),l.qZA()),2&n){const e=l.oxw(),i=e.events,r=e.trackByEventId,s=l.oxw();l.Q6J("@collapse",void 0),l.xp6(1),l.uIk("aria-label",l.xi3(2,5,l.WLB(11,Ez,s.date,s.locale),"openDayEventsAlert")),l.xp6(2),l.uIk("aria-label",l.xi3(4,8,l.WLB(14,Ez,s.date,s.locale),"openDayEventsLandmark")),l.xp6(2),l.Q6J("ngForOf",i)("ngForTrackBy",r)}}function cre(n,t){1&n&&l.YNc(0,lre,6,17,"div",2),2&n&&l.Q6J("ngIf",t.isOpen)}function ure(n,t){}const dre=function(n,t,e,i,r){return{events:n,eventClicked:t,isOpen:e,trackByEventId:i,validateDrag:r}};function hre(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",4),l.NdJ("click",function(r){const c=l.CHM(e).$implicit,d=l.oxw(2);return l.KtG(d.columnHeaderClicked.emit({isoDayNumber:c.day,sourceEvent:r}))}),l._uU(1),l.ALo(2,"calendarDate"),l.qZA()}if(2&n){const e=t.$implicit,i=l.oxw().locale;l.ekj("cal-past",e.isPast)("cal-today",e.isToday)("cal-future",e.isFuture)("cal-weekend",e.isWeekend),l.Q6J("ngClass",e.cssClass),l.xp6(1),l.hij(" ",l.Dn7(2,10,e.date,"monthViewColumnHeader",i)," ")}}function fre(n,t){if(1&n&&(l.TgZ(0,"div",2),l.YNc(1,hre,3,14,"div",3),l.qZA()),2&n){const e=t.days,i=t.trackByWeekDayHeaderDate;l.xp6(1),l.Q6J("ngForOf",e)("ngForTrackBy",i)}}function pre(n,t){}const gre=function(n,t,e){return{days:n,locale:t,trackByWeekDayHeaderDate:e}};function mre(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"mwl-calendar-month-cell",7),l.NdJ("mwlClick",function(r){const c=l.CHM(e).$implicit,d=l.oxw(2);return l.KtG(d.dayClicked.emit({day:c,sourceEvent:r}))})("mwlKeydownEnter",function(r){const c=l.CHM(e).$implicit,d=l.oxw(2);return l.KtG(d.dayClicked.emit({day:c,sourceEvent:r}))})("highlightDay",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.toggleDayHighlight(r.event,!0))})("unhighlightDay",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.toggleDayHighlight(r.event,!1))})("drop",function(r){const c=l.CHM(e).$implicit,d=l.oxw(2);return l.KtG(d.eventDropped(c,r.dropData.event,r.dropData.draggedFrom))})("eventClicked",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.eventClicked.emit({event:r.event,sourceEvent:r.sourceEvent}))}),l.ALo(1,"calendarA11y"),l.qZA()}if(2&n){const e=t.$implicit,i=l.oxw(2);l.Q6J("ngClass",null==e?null:e.cssClass)("day",e)("openDay",i.openDay)("locale",i.locale)("tooltipPlacement",i.tooltipPlacement)("tooltipAppendToBody",i.tooltipAppendToBody)("tooltipTemplate",i.tooltipTemplate)("tooltipDelay",i.tooltipDelay)("customTemplate",i.cellTemplate)("ngStyle",l.VKq(15,OB,e.backgroundColor))("clickListenerDisabled",0===i.dayClicked.observers.length),l.uIk("tabindex",l.xi3(1,12,l.DdM(17,aD),"monthCellTabIndex"))}}function _re(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div")(1,"div",4),l.YNc(2,mre,2,18,"mwl-calendar-month-cell",5),l.ALo(3,"slice"),l.qZA(),l.TgZ(4,"mwl-calendar-open-day-events",6),l.NdJ("eventClicked",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.eventClicked.emit({event:r.event,sourceEvent:r.sourceEvent}))})("drop",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.eventDropped(s.openDay,r.dropData.event,r.dropData.draggedFrom))}),l.qZA()()}if(2&n){const e=t.$implicit,i=l.oxw();l.xp6(2),l.Q6J("ngForOf",l.Dn7(3,9,i.view.days,e,e+i.view.totalDaysVisibleInWeek))("ngForTrackBy",i.trackByDate),l.xp6(2),l.Q6J("locale",i.locale)("isOpen",i.openRowIndex===e)("events",null==i.openDay?null:i.openDay.events)("date",null==i.openDay?null:i.openDay.date)("customTemplate",i.openDayEventsTemplate)("eventTitleTemplate",i.eventTitleTemplate)("eventActionsTemplate",i.eventActionsTemplate)}}function vre(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",4),l.NdJ("mwlClick",function(r){const c=l.CHM(e).$implicit,d=l.oxw().dayHeaderClicked;return l.KtG(d.emit({day:c,sourceEvent:r}))})("drop",function(r){const c=l.CHM(e).$implicit,d=l.oxw().eventDropped;return l.KtG(d.emit({event:r.dropData.event,newStart:c.date}))})("dragEnter",function(){const s=l.CHM(e).$implicit,c=l.oxw().dragEnter;return l.KtG(c.emit({date:s.date}))}),l.TgZ(1,"b"),l._uU(2),l.ALo(3,"calendarDate"),l.qZA(),l._UZ(4,"br"),l.TgZ(5,"span"),l._uU(6),l.ALo(7,"calendarDate"),l.qZA()()}if(2&n){const e=t.$implicit,i=l.oxw().locale;l.ekj("cal-past",e.isPast)("cal-today",e.isToday)("cal-future",e.isFuture)("cal-weekend",e.isWeekend),l.Q6J("ngClass",e.cssClass),l.xp6(2),l.Oqu(l.Dn7(3,11,e.date,"weekViewColumnHeader",i)),l.xp6(4),l.Oqu(l.Dn7(7,15,e.date,"weekViewColumnSubHeader",i))}}function yre(n,t){if(1&n&&(l.TgZ(0,"div",2),l.YNc(1,vre,8,19,"div",3),l.qZA()),2&n){const e=t.days,i=t.trackByWeekDayHeaderDate;l.xp6(1),l.Q6J("ngForOf",e)("ngForTrackBy",i)}}function wre(n,t){}const bre=function(n,t,e,i,r,s){return{days:n,locale:t,dayHeaderClicked:e,eventDropped:i,dragEnter:r,trackByWeekDayHeaderDate:s}},Dre=function(n,t,e){return{color:n,backgroundColor:t,borderColor:e}};function Ere(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",2),l.NdJ("mwlClick",function(r){const c=l.CHM(e).eventClicked;return l.KtG(c.emit({sourceEvent:r}))})("mwlKeydownEnter",function(r){const c=l.CHM(e).eventClicked;return l.KtG(c.emit({sourceEvent:r}))}),l.ALo(1,"calendarEventTitle"),l.ALo(2,"calendarA11y"),l._UZ(3,"mwl-calendar-event-actions",3),l._uU(4," "),l._UZ(5,"mwl-calendar-event-title",4),l.qZA()}if(2&n){const e=t.weekEvent,i=t.tooltipPlacement,r=t.tooltipTemplate,s=t.tooltipAppendToBody,c=t.tooltipDisabled,d=t.tooltipDelay,p=t.daysInWeek,m=l.oxw();l.Q6J("ngStyle",l.kEZ(20,Dre,null==e.event.color?null:e.event.color.secondaryText,null==e.event.color?null:e.event.color.secondary,null==e.event.color?null:e.event.color.primary))("mwlCalendarTooltip",c?"":l.Dn7(1,13,e.event.title,1===p?"dayTooltip":"weekTooltip",e.tempEvent||e.event))("tooltipPlacement",i)("tooltipEvent",e.tempEvent||e.event)("tooltipTemplate",r)("tooltipAppendToBody",s)("tooltipDelay",d),l.uIk("aria-label",l.xi3(2,17,l.WLB(24,Dz,e.tempEvent||e.event,m.locale),"eventDescription")),l.xp6(3),l.Q6J("event",e.tempEvent||e.event)("customTemplate",m.eventActionsTemplate),l.xp6(2),l.Q6J("event",e.tempEvent||e.event)("customTemplate",m.eventTitleTemplate)("view",1===p?"day":"week")}}function Cre(n,t){}const Tre=function(n,t,e,i,r,s,c,d,p){return{weekEvent:n,tooltipPlacement:t,eventClicked:e,tooltipTemplate:i,tooltipAppendToBody:r,tooltipDisabled:s,tooltipDelay:c,column:d,daysInWeek:p}};function Ire(n,t){if(1&n&&(l.TgZ(0,"div",4),l._uU(1),l.ALo(2,"calendarDate"),l.qZA()),2&n){const e=l.oxw(),i=e.segment,r=e.daysInWeek,s=e.locale;l.xp6(1),l.hij(" ",l.Dn7(2,1,i.displayDate,1===r?"dayViewHour":"weekViewHour",s)," ")}}function Sre(n,t){if(1&n&&(l.TgZ(0,"div",2),l.ALo(1,"calendarA11y"),l.YNc(2,Ire,3,5,"div",3),l.qZA()),2&n){const e=t.segment,r=t.isTimeLabel,s=t.daysInWeek;l.Udp("height",t.segmentHeight,"px"),l.ekj("cal-hour-start",e.isStart)("cal-after-hour-start",!e.isStart),l.Q6J("ngClass",e.cssClass),l.uIk("aria-hidden",l.xi3(1,9,l.DdM(12,aD),1===s?"hideDayHourSegment":"hideWeekHourSegment")),l.xp6(2),l.Q6J("ngIf",r)}}function Are(n,t){}const Mre=function(n,t,e,i,r){return{segment:n,locale:t,segmentHeight:e,isTimeLabel:i,daysInWeek:r}};function Nre(n,t){if(1&n&&l._UZ(0,"div",3),2&n){const e=l.oxw().topPx;l.Udp("top",e,"px")}}function xre(n,t){1&n&&l.YNc(0,Nre,1,2,"div",2),2&n&&l.Q6J("ngIf",t.isVisible)}function Rre(n,t){}const Ore=function(n,t,e,i,r,s,c){return{columnDate:n,dayStartHour:t,dayStartMinute:e,dayEndHour:i,dayEndMinute:r,isVisible:s,topPx:c}};function kre(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",13),l.NdJ("drop",function(r){const c=l.CHM(e).$implicit,d=l.oxw(2);return l.KtG(d.eventDropped(r,c.date,!0))})("dragEnter",function(){const s=l.CHM(e).$implicit,c=l.oxw(2);return l.KtG(c.dateDragEnter(s.date))}),l.qZA()}}const Pre=function(){return{left:!0}};function Fre(n,t){1&n&&l._UZ(0,"div",22),2&n&&l.Q6J("resizeEdges",l.DdM(1,Pre))}const Lre=function(){return{right:!0}};function Bre(n,t){1&n&&l._UZ(0,"div",23),2&n&&l.Q6J("resizeEdges",l.DdM(1,Lre))}const Vre=function(n,t){return{left:n,right:t}},Cz=function(n,t){return{event:n,calendarId:t}},Ure=function(n){return{x:n}};function Hre(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",17,18),l.NdJ("resizeStart",function(r){const c=l.CHM(e).$implicit;l.oxw();const d=l.MAs(1),p=l.oxw(2);return l.KtG(p.allDayEventResizeStarted(d,c,r))})("resizing",function(r){const c=l.CHM(e).$implicit,d=l.oxw(3);return l.KtG(d.allDayEventResizing(c,r,d.dayColumnWidth))})("resizeEnd",function(){const s=l.CHM(e).$implicit,c=l.oxw(3);return l.KtG(c.allDayEventResizeEnded(s))})("dragStart",function(){const s=l.CHM(e).$implicit,c=l.MAs(1);l.oxw();const d=l.MAs(1),p=l.oxw(2);return l.KtG(p.dragStarted(d,c,s,!1))})("dragging",function(){l.CHM(e);const r=l.oxw(3);return l.KtG(r.allDayEventDragMove())})("dragEnd",function(r){const c=l.CHM(e).$implicit,d=l.oxw(3);return l.KtG(d.dragEnded(c,r,d.dayColumnWidth))}),l.YNc(2,Fre,1,2,"div",19),l.TgZ(3,"mwl-calendar-week-view-event",20),l.NdJ("eventClicked",function(r){const c=l.CHM(e).$implicit,d=l.oxw(3);return l.KtG(d.eventClicked.emit({event:c.event,sourceEvent:r.sourceEvent}))}),l.qZA(),l.YNc(4,Bre,1,2,"div",21),l.qZA()}if(2&n){const e=t.$implicit,i=l.oxw(3);l.Udp("width",100/i.days.length*e.span,"%")("margin-left",i.rtl?null:100/i.days.length*e.offset,"%")("margin-right",i.rtl?100/i.days.length*e.offset:null,"%"),l.ekj("cal-draggable",e.event.draggable&&0===i.allDayEventResizes.size)("cal-starts-within-week",!e.startsBeforeWeek)("cal-ends-within-week",!e.endsAfterWeek),l.Q6J("ngClass",null==e.event?null:e.event.cssClass)("resizeCursors",i.resizeCursors)("resizeSnapGrid",l.WLB(33,Vre,i.dayColumnWidth,i.dayColumnWidth))("validateResize",i.validateResize)("dropData",l.WLB(36,Cz,e.event,i.calendarId))("dragAxis",l.WLB(39,$S,e.event.draggable&&0===i.allDayEventResizes.size,!i.snapDraggedEvents&&e.event.draggable&&0===i.allDayEventResizes.size))("dragSnapGrid",i.snapDraggedEvents?l.VKq(42,Ure,i.dayColumnWidth):l.DdM(44,aD))("validateDrag",i.validateDrag)("touchStartLongPress",l.DdM(45,gO)),l.xp6(2),l.Q6J("ngIf",(null==e.event||null==e.event.resizable?null:e.event.resizable.beforeStart)&&!e.startsBeforeWeek),l.xp6(1),l.Q6J("locale",i.locale)("weekEvent",e)("tooltipPlacement",i.tooltipPlacement)("tooltipTemplate",i.tooltipTemplate)("tooltipAppendToBody",i.tooltipAppendToBody)("tooltipDelay",i.tooltipDelay)("customTemplate",i.eventTemplate)("eventTitleTemplate",i.eventTitleTemplate)("eventActionsTemplate",i.eventActionsTemplate)("daysInWeek",i.daysInWeek),l.xp6(1),l.Q6J("ngIf",(null==e.event||null==e.event.resizable?null:e.event.resizable.afterEnd)&&!e.endsAfterWeek)}}function jre(n,t){if(1&n&&(l.TgZ(0,"div",14,15),l.YNc(2,Hre,5,46,"div",16),l.qZA()),2&n){const e=t.$implicit,i=l.oxw(2);l.xp6(2),l.Q6J("ngForOf",e.row)("ngForTrackBy",i.trackByWeekAllDayEvent)}}function Gre(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",8,9),l.NdJ("dragEnter",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.dragEnter("allDay"))})("dragLeave",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.dragLeave("allDay"))}),l.TgZ(2,"div",5),l._UZ(3,"div",10),l.YNc(4,kre,1,0,"div",11),l.qZA(),l.YNc(5,jre,3,2,"div",12),l.qZA()}if(2&n){const e=l.oxw();l.xp6(3),l.Q6J("ngTemplateOutlet",e.allDayEventsLabelTemplate),l.xp6(1),l.Q6J("ngForOf",e.days)("ngForTrackBy",e.trackByWeekDayHeaderDate),l.xp6(1),l.Q6J("ngForOf",e.view.allDayEventRows)("ngForTrackBy",e.trackById)}}function $re(n,t){if(1&n&&l._UZ(0,"mwl-calendar-week-view-hour-segment",28),2&n){const e=t.$implicit,i=l.oxw(3);l.Udp("height",i.hourSegmentHeight,"px"),l.Q6J("segment",e)("segmentHeight",i.hourSegmentHeight)("locale",i.locale)("customTemplate",i.hourSegmentTemplate)("isTimeLabel",!0)("daysInWeek",i.daysInWeek)}}function zre(n,t){if(1&n&&(l.TgZ(0,"div",26),l.YNc(1,$re,1,8,"mwl-calendar-week-view-hour-segment",27),l.qZA()),2&n){const e=t.$implicit,i=t.odd,r=l.oxw(2);l.ekj("cal-hour-odd",i),l.xp6(1),l.Q6J("ngForOf",e.segments)("ngForTrackBy",r.trackByHourSegment)}}function Wre(n,t){if(1&n&&(l.TgZ(0,"div",24),l.YNc(1,zre,2,4,"div",25),l.qZA()),2&n){const e=l.oxw();l.xp6(1),l.Q6J("ngForOf",e.view.hourColumns[0].hours)("ngForTrackBy",e.trackByHour)}}const qre=function(){return{left:!0,top:!0}};function Yre(n,t){1&n&&l._UZ(0,"div",22),2&n&&l.Q6J("resizeEdges",l.DdM(1,qre))}function Zre(n,t){}function Kre(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"mwl-calendar-week-view-event",36),l.NdJ("eventClicked",function(r){l.CHM(e);const s=l.oxw().$implicit,c=l.oxw(2);return l.KtG(c.eventClicked.emit({event:s.event,sourceEvent:r.sourceEvent}))}),l.qZA()}if(2&n){const e=l.oxw().$implicit,i=l.oxw().$implicit,r=l.oxw();l.Q6J("locale",r.locale)("weekEvent",e)("tooltipPlacement",r.tooltipPlacement)("tooltipTemplate",r.tooltipTemplate)("tooltipAppendToBody",r.tooltipAppendToBody)("tooltipDisabled",r.dragActive||r.timeEventResizes.size>0)("tooltipDelay",r.tooltipDelay)("customTemplate",r.eventTemplate)("eventTitleTemplate",r.eventTitleTemplate)("eventActionsTemplate",r.eventActionsTemplate)("column",i)("daysInWeek",r.daysInWeek)}}const Qre=function(){return{right:!0,bottom:!0}};function Jre(n,t){1&n&&l._UZ(0,"div",23),2&n&&l.Q6J("resizeEdges",l.DdM(1,Qre))}const Xre=function(n,t,e,i){return{left:n,right:t,top:e,bottom:i}};function ese(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",33,18),l.NdJ("resizeStart",function(r){const c=l.CHM(e).$implicit,d=l.oxw(2),p=l.MAs(6);return l.KtG(d.timeEventResizeStarted(p,c,r))})("resizing",function(r){const c=l.CHM(e).$implicit,d=l.oxw(2);return l.KtG(d.timeEventResizing(c,r))})("resizeEnd",function(){const s=l.CHM(e).$implicit,c=l.oxw(2);return l.KtG(c.timeEventResizeEnded(s))})("dragStart",function(){const s=l.CHM(e).$implicit,c=l.MAs(1),d=l.oxw(2),p=l.MAs(6);return l.KtG(d.dragStarted(p,c,s,!0))})("dragging",function(r){const c=l.CHM(e).$implicit,d=l.oxw(2);return l.KtG(d.dragMove(c,r))})("dragEnd",function(r){const c=l.CHM(e).$implicit,d=l.oxw(2);return l.KtG(d.dragEnded(c,r,d.dayColumnWidth,!0))}),l.YNc(2,Yre,1,2,"div",19),l.YNc(3,Zre,0,0,"ng-template",34),l.YNc(4,Kre,1,12,"ng-template",null,35,l.W1O),l.YNc(6,Jre,1,2,"div",21),l.qZA()}if(2&n){const e=t.$implicit,i=l.MAs(5),r=l.oxw(2);l.Udp("top",e.top,"px")("height",e.height,"px")("left",e.left,"%")("width",e.width,"%"),l.ekj("cal-draggable",e.event.draggable&&0===r.timeEventResizes.size)("cal-starts-within-day",!e.startsBeforeDay)("cal-ends-within-day",!e.endsAfterDay),l.Q6J("ngClass",e.event.cssClass)("hidden",0===e.height&&0===e.width)("resizeCursors",r.resizeCursors)("resizeSnapGrid",l.l5B(30,Xre,r.dayColumnWidth,r.dayColumnWidth,r.eventSnapSize||r.hourSegmentHeight,r.eventSnapSize||r.hourSegmentHeight))("validateResize",r.validateResize)("allowNegativeResizes",!0)("dropData",l.WLB(35,Cz,e.event,r.calendarId))("dragAxis",l.WLB(38,$S,e.event.draggable&&0===r.timeEventResizes.size,e.event.draggable&&0===r.timeEventResizes.size))("dragSnapGrid",r.snapDraggedEvents?l.WLB(41,$S,r.dayColumnWidth,r.eventSnapSize||r.hourSegmentHeight):l.DdM(44,aD))("touchStartLongPress",l.DdM(45,gO))("ghostDragEnabled",!r.snapDraggedEvents)("ghostElementTemplate",i)("validateDrag",r.validateDrag),l.xp6(2),l.Q6J("ngIf",(null==e.event||null==e.event.resizable?null:e.event.resizable.beforeStart)&&!e.startsBeforeDay),l.xp6(1),l.Q6J("ngTemplateOutlet",i),l.xp6(3),l.Q6J("ngIf",(null==e.event||null==e.event.resizable?null:e.event.resizable.afterEnd)&&!e.endsAfterDay)}}function tse(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"mwl-calendar-week-view-hour-segment",38),l.NdJ("mwlClick",function(r){const c=l.CHM(e).$implicit,d=l.oxw(3);return l.KtG(d.hourSegmentClicked.emit({date:c.date,sourceEvent:r}))})("drop",function(r){const c=l.CHM(e).$implicit,d=l.oxw(3);return l.KtG(d.eventDropped(r,c.date,!1))})("dragEnter",function(){const s=l.CHM(e).$implicit,c=l.oxw(3);return l.KtG(c.dateDragEnter(s.date))}),l.qZA()}if(2&n){const e=t.$implicit,i=l.oxw(3);l.Udp("height",i.hourSegmentHeight,"px"),l.Q6J("segment",e)("segmentHeight",i.hourSegmentHeight)("locale",i.locale)("customTemplate",i.hourSegmentTemplate)("daysInWeek",i.daysInWeek)("clickListenerDisabled",0===i.hourSegmentClicked.observers.length)("dragOverClass",i.dragActive&&i.snapDraggedEvents?null:"cal-drag-over")("isTimeLabel",1===i.daysInWeek)}}function nse(n,t){if(1&n&&(l.TgZ(0,"div",26),l.YNc(1,tse,1,10,"mwl-calendar-week-view-hour-segment",37),l.qZA()),2&n){const e=t.$implicit,i=t.odd,r=l.oxw(2);l.ekj("cal-hour-odd",i),l.xp6(1),l.Q6J("ngForOf",e.segments)("ngForTrackBy",r.trackByHourSegment)}}function ise(n,t){if(1&n&&(l.TgZ(0,"div",29),l._UZ(1,"mwl-calendar-week-view-current-time-marker",30),l.TgZ(2,"div",31),l.YNc(3,ese,7,46,"div",32),l.qZA(),l.YNc(4,nse,2,4,"div",25),l.qZA()),2&n){const e=t.$implicit,i=l.oxw();l.xp6(1),l.Q6J("columnDate",e.date)("dayStartHour",i.dayStartHour)("dayStartMinute",i.dayStartMinute)("dayEndHour",i.dayEndHour)("dayEndMinute",i.dayEndMinute)("hourSegments",i.hourSegments)("hourDuration",i.hourDuration)("hourSegmentHeight",i.hourSegmentHeight)("customTemplate",i.currentTimeMarkerTemplate),l.xp6(2),l.Q6J("ngForOf",e.events)("ngForTrackBy",i.trackByWeekTimeEvent),l.xp6(1),l.Q6J("ngForOf",e.hours)("ngForTrackBy",i.trackByHour)}}let yy=(()=>{class n{constructor(e,i,r){this.renderer=e,this.elm=i,this.document=r,this.clickListenerDisabled=!1,this.click=new l.vpe,this.destroy$=new Qt.x}ngOnInit(){this.clickListenerDisabled||this.listen().pipe(bi(this.destroy$)).subscribe(e=>{e.stopPropagation(),this.click.emit(e)})}ngOnDestroy(){this.destroy$.next()}listen(){return new Ti.y(e=>this.renderer.listen(this.elm.nativeElement,"click",i=>{e.next(i)}))}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(ve))},n.\u0275dir=l.lG2({type:n,selectors:[["","mwlClick",""]],inputs:{clickListenerDisabled:"clickListenerDisabled"},outputs:{click:"mwlClick"}}),n})(),mO=(()=>{class n{constructor(e,i,r){this.host=e,this.ngZone=i,this.renderer=r,this.keydown=new l.vpe,this.keydownListener=null}ngOnInit(){this.ngZone.runOutsideAngular(()=>{this.keydownListener=this.renderer.listen(this.host.nativeElement,"keydown",e=>{(13===e.keyCode||13===e.which||"Enter"===e.key)&&(e.preventDefault(),e.stopPropagation(),this.ngZone.run(()=>{this.keydown.emit(e)}))})})}ngOnDestroy(){null!==this.keydownListener&&(this.keydownListener(),this.keydownListener=null)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.R0b),l.Y36(l.Qsj))},n.\u0275dir=l.lG2({type:n,selectors:[["","mwlKeydownEnter",""]],outputs:{keydown:"mwlKeydownEnter"}}),n})(),_O=(()=>{class n{constructor(e){this.i18nPlural=e}monthCell({day:e,locale:i}){return e.badgeTotal>0?`\n        ${Jt(e.date,"EEEE MMMM d",i)},\n        ${this.i18nPlural.transform(e.badgeTotal,{"=0":"No events","=1":"One event",other:"# events"})},\n         click to expand\n      `:`${Jt(e.date,"EEEE MMMM d",i)}`}openDayEventsLandmark({date:e,locale:i}){return`\n      Beginning of expanded view for ${Jt(e,"EEEE MMMM dd",i)}\n    `}openDayEventsAlert({date:e,locale:i}){return`${Jt(e,"EEEE MMMM dd",i)} expanded`}eventDescription({event:e,locale:i}){if(!0===e.allDay)return this.allDayEventDescription({event:e,locale:i});const r=`\n      ${Jt(e.start,"EEEE MMMM dd",i)},\n      ${e.title}, from ${Jt(e.start,"hh:mm a",i)}\n    `;return e.end?r+` to ${Jt(e.end,"hh:mm a",i)}`:r}allDayEventDescription({event:e,locale:i}){const r=`\n      ${e.title}, event spans multiple days:\n      start time ${Jt(e.start,"MMMM dd hh:mm a",i)}\n    `;return e.end?r+`, stop time ${Jt(e.end,"MMMM d hh:mm a",i)}`:r+", no stop time"}actionButtonLabel({action:e}){return e.a11yLabel}monthCellTabIndex(){return 0}hideMonthCellEvents(){return!0}hideEventTitle(){return!0}hideWeekHourSegment(){return!0}hideDayHourSegment(){return!0}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(_c))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),wy=(()=>{class n{constructor(e,i){this.calendarA11y=e,this.locale=i}transform(e,i){if(e.locale=e.locale||this.locale,typeof this.calendarA11y[i]>"u"){const r=Object.getOwnPropertyNames(Object.getPrototypeOf(_O.prototype)).filter(s=>"constructor"!==s);throw new Error(`${i} is not a valid a11y method. Can only be one of ${r.join(", ")}`)}return this.calendarA11y[i](e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(_O,16),l.Y36(l.soG,16))},n.\u0275pipe=l.Yjl({name:"calendarA11y",type:n,pure:!0}),n})(),Tz=(()=>{class n{constructor(){this.trackByActionId=(e,i)=>i.id?i.id:i}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["mwl-calendar-event-actions"]],inputs:{event:"event",customTemplate:"customTemplate"},decls:3,vars:5,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","cal-event-actions",4,"ngIf"],[1,"cal-event-actions"],["class","cal-event-action","href","javascript:;","tabindex","0","role","button",3,"ngClass","innerHtml","mwlClick","mwlKeydownEnter",4,"ngFor","ngForOf","ngForTrackBy"],["href","javascript:;","tabindex","0","role","button",1,"cal-event-action",3,"ngClass","innerHtml","mwlClick","mwlKeydownEnter"]],template:function(e,i){if(1&e&&(l.YNc(0,Gie,1,1,"ng-template",null,0,l.W1O),l.YNc(2,$ie,0,0,"ng-template",1)),2&e){const r=l.MAs(1);l.xp6(2),l.Q6J("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",l.WLB(2,zie,i.event,i.trackByActionId))}},dependencies:[as,lr,Mi,Qi,yy,mO,wy],encapsulation:2}),n})();class kB{month(t,e){return t.title}monthTooltip(t,e){return t.title}week(t,e){return t.title}weekTooltip(t,e){return t.title}day(t,e){return t.title}dayTooltip(t,e){return t.title}}let PB=(()=>{class n{constructor(e){this.calendarEventTitle=e}transform(e,i,r){return this.calendarEventTitle[i](r,e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(kB,16))},n.\u0275pipe=l.Yjl({name:"calendarEventTitle",type:n,pure:!0}),n})(),Iz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["mwl-calendar-event-title"]],inputs:{event:"event",customTemplate:"customTemplate",view:"view"},decls:3,vars:5,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-event-title",3,"innerHTML"]],template:function(e,i){if(1&e&&(l.YNc(0,Wie,3,10,"ng-template",null,0,l.W1O),l.YNc(2,qie,0,0,"ng-template",1)),2&e){const r=l.MAs(1);l.xp6(2),l.Q6J("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",l.WLB(2,Yie,i.event,i.view))}},dependencies:[Qi,PB,wy],encapsulation:2}),n})(),rse=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["mwl-calendar-tooltip-window"]],inputs:{contents:"contents",placement:"placement",event:"event",customTemplate:"customTemplate"},decls:3,vars:6,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-tooltip",3,"ngClass"],[1,"cal-tooltip-arrow"],[1,"cal-tooltip-inner",3,"innerHtml"]],template:function(e,i){if(1&e&&(l.YNc(0,Zie,3,2,"ng-template",null,0,l.W1O),l.YNc(2,Kie,0,0,"ng-template",1)),2&e){const r=l.MAs(1);l.xp6(2),l.Q6J("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",l.kEZ(2,Qie,i.contents,i.placement,i.event))}},dependencies:[as,Qi],encapsulation:2}),n})(),Sz=(()=>{class n{constructor(e,i,r,s,c,d){this.elementRef=e,this.injector=i,this.renderer=r,this.viewContainerRef=c,this.document=d,this.placement="auto",this.delay=null,this.cancelTooltipDelay$=new Qt.x,this.tooltipFactory=s.resolveComponentFactory(rse)}ngOnChanges(e){this.tooltipRef&&(e.contents||e.customTemplate||e.event)&&(this.tooltipRef.instance.contents=this.contents,this.tooltipRef.instance.customTemplate=this.customTemplate,this.tooltipRef.instance.event=this.event,this.tooltipRef.changeDetectorRef.markForCheck(),this.contents||this.hide())}ngOnDestroy(){this.hide()}onMouseOver(){(null===this.delay?(0,Mt.of)("now"):TR(this.delay)).pipe(bi(this.cancelTooltipDelay$)).subscribe(()=>{this.show()})}onMouseOut(){this.hide()}show(){!this.tooltipRef&&this.contents&&(this.tooltipRef=this.viewContainerRef.createComponent(this.tooltipFactory,0,this.injector,[]),this.tooltipRef.instance.contents=this.contents,this.tooltipRef.instance.customTemplate=this.customTemplate,this.tooltipRef.instance.event=this.event,this.appendToBody&&this.document.body.appendChild(this.tooltipRef.location.nativeElement),requestAnimationFrame(()=>{this.positionTooltip()}))}hide(){this.tooltipRef&&(this.viewContainerRef.remove(this.viewContainerRef.indexOf(this.tooltipRef.hostView)),this.tooltipRef=null),this.cancelTooltipDelay$.next()}positionTooltip(e=[]){this.tooltipRef&&(this.tooltipRef.changeDetectorRef.detectChanges(),this.tooltipRef.instance.placement=function oie(n,t,e,i,r){var s=Array.isArray(e)?e:e.split(sie),c=["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"],d=t.classList,p=function(G){var te=G.split("-"),se=te[0],le=te[1],de=[];return r&&(de.push(r+"-"+se),le&&de.push(r+"-"+se+"-"+le),de.forEach(function(Oe){d.add(Oe)})),de};r&&c.forEach(function(G){d.remove(r+"-"+G)});var m=s.findIndex(function(G){return"auto"===G});m>=0&&c.forEach(function(G){null==s.find(function(te){return-1!==te.search("^"+G)})&&s.splice(m++,1,G)});var y=t.style;y.position="absolute",y.top="0",y.left="0",y["will-change"]="transform";for(var T,A=!1,x=0,P=s;x<P.length;x++){var V=p(T=P[x]);if(iz.positionElements(n,t,T,i)){A=!0;break}r&&V.forEach(function(G){d.remove(G)})}return A||(p(T=s[0]),iz.positionElements(n,t,T,i)),T}(this.elementRef.nativeElement,this.tooltipRef.location.nativeElement.children[0],this.placement,this.appendToBody),-1===e.indexOf(this.tooltipRef.instance.placement)&&this.positionTooltip([...e,this.tooltipRef.instance.placement]))}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.zs3),l.Y36(l.Qsj),l.Y36(l._Vd),l.Y36(l.s_b),l.Y36(ve))},n.\u0275dir=l.lG2({type:n,selectors:[["","mwlCalendarTooltip",""]],hostBindings:function(e,i){1&e&&l.NdJ("mouseenter",function(){return i.onMouseOver()})("mouseleave",function(){return i.onMouseOut()})},inputs:{contents:["mwlCalendarTooltip","contents"],placement:["tooltipPlacement","placement"],customTemplate:["tooltipTemplate","customTemplate"],event:["tooltipEvent","event"],appendToBody:["tooltipAppendToBody","appendToBody"],delay:["tooltipDelay","delay"]},features:[l.TTD]}),n})();var qf=function(n){return n.Month="month",n.Week="week",n.Day="day",n}(qf||{});const Az=n=>function yie(n,t){var e=!0;function i(r,s){t(r,s),e=!1}return Array.isArray(n)?(n.forEach(function(r){r.start?r.start instanceof Date||i(rD.StartPropertyNotDate,r):i(rD.StartPropertyMissing,r),r.end&&(r.end instanceof Date||i(rD.EndPropertyNotDate,r),r.start>r.end&&i(rD.EndsBeforeStart,r))}),e):(t(rD.NotArray,n),!1)}(n,(...e)=>console.warn("angular-calendar",...e));function Mz(n,t){return Math.floor(n.left)<=Math.ceil(t.left)&&Math.floor(t.left)<=Math.ceil(n.right)&&Math.floor(n.left)<=Math.ceil(t.right)&&Math.floor(t.right)<=Math.ceil(n.right)}function Nz(n,t){return Math.round(n/t)*t}const xz=(n,t)=>t.id?t.id:t,FB=(n,t)=>t.date.toISOString(),ase=(n,t)=>t.date.toISOString(),lse=(n,t)=>t.segments[0].date.toISOString(),cse=(n,t)=>t.event.id?t.event.id:t.event,use=(n,t)=>t.event.id?t.event.id:t.event;function LB(n,t,e,i,r){const s=Nz(n,i||e),c=function hse(n,t,e){return(e||60)/(n*t)}(t,e,r);return s*c}function Rz(n,t,e){return t.end?t.end:n.addMinutes(t.start,e)}function Iu(n,t,e,i){let r=0,s=0;const c=e<0?n.subDays:n.addDays;let d=t;for(;s<=Math.abs(e);){d=c(t,r);const p=n.getDay(d);-1===i.indexOf(p)&&s++,r++}return d}function BB(n,t,e,i=[],r){let s=r?n.startOfDay(t):n.startOfWeek(t,{weekStartsOn:e});const c=n.endOfWeek(t,{weekStartsOn:e});for(;i.indexOf(n.getDay(s))>-1&&s<c;)s=n.addDays(s,1);if(r)return{viewStart:s,viewEnd:n.endOfDay(Iu(n,s,r-1,i))};{let d=c;for(;i.indexOf(n.getDay(d))>-1&&d>s;)d=n.subDays(d,1);return{viewStart:s,viewEnd:d}}}function VB({x:n,y:t}){return Math.abs(n)>1||Math.abs(t)>1}class Yf{}let gse=(()=>{class n{constructor(e){this.dateAdapter=e,this.excludeDays=[],this.viewDateChange=new l.vpe}onClick(){const e={day:this.dateAdapter.subDays,week:this.dateAdapter.subWeeks,month:this.dateAdapter.subMonths}[this.view];this.viewDateChange.emit(this.view===qf.Day?Iu(this.dateAdapter,this.viewDate,-1,this.excludeDays):this.view===qf.Week&&this.daysInWeek?Iu(this.dateAdapter,this.viewDate,-this.daysInWeek,this.excludeDays):e(this.viewDate,1))}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Yf))},n.\u0275dir=l.lG2({type:n,selectors:[["","mwlCalendarPreviousView",""]],hostBindings:function(e,i){1&e&&l.NdJ("click",function(){return i.onClick()})},inputs:{view:"view",viewDate:"viewDate",excludeDays:"excludeDays",daysInWeek:"daysInWeek"},outputs:{viewDateChange:"viewDateChange"}}),n})(),mse=(()=>{class n{constructor(e){this.dateAdapter=e,this.excludeDays=[],this.viewDateChange=new l.vpe}onClick(){const e={day:this.dateAdapter.addDays,week:this.dateAdapter.addWeeks,month:this.dateAdapter.addMonths}[this.view];this.viewDateChange.emit(this.view===qf.Day?Iu(this.dateAdapter,this.viewDate,1,this.excludeDays):this.view===qf.Week&&this.daysInWeek?Iu(this.dateAdapter,this.viewDate,this.daysInWeek,this.excludeDays):e(this.viewDate,1))}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Yf))},n.\u0275dir=l.lG2({type:n,selectors:[["","mwlCalendarNextView",""]],hostBindings:function(e,i){1&e&&l.NdJ("click",function(){return i.onClick()})},inputs:{view:"view",viewDate:"viewDate",excludeDays:"excludeDays",daysInWeek:"daysInWeek"},outputs:{viewDateChange:"viewDateChange"}}),n})(),_se=(()=>{class n{constructor(e){this.dateAdapter=e,this.viewDateChange=new l.vpe}onClick(){this.viewDateChange.emit(this.dateAdapter.startOfDay(new Date))}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Yf))},n.\u0275dir=l.lG2({type:n,selectors:[["","mwlCalendarToday",""]],hostBindings:function(e,i){1&e&&l.NdJ("click",function(){return i.onClick()})},inputs:{viewDate:"viewDate"},outputs:{viewDateChange:"viewDateChange"}}),n})(),vse=(()=>{class n{constructor(e){this.dateAdapter=e}monthViewColumnHeader({date:e,locale:i}){return Jt(e,"EEEE",i)}monthViewDayNumber({date:e,locale:i}){return Jt(e,"d",i)}monthViewTitle({date:e,locale:i}){return Jt(e,"LLLL y",i)}weekViewColumnHeader({date:e,locale:i}){return Jt(e,"EEEE",i)}weekViewColumnSubHeader({date:e,locale:i}){return Jt(e,"MMM d",i)}weekViewTitle({date:e,locale:i,weekStartsOn:r,excludeDays:s,daysInWeek:c}){const{viewStart:d,viewEnd:p}=BB(this.dateAdapter,e,r,s,c),m=(y,T)=>Jt(y,"MMM d"+(T?", yyyy":""),i);return`${m(d,d.getUTCFullYear()!==p.getUTCFullYear())} - ${m(p,!0)}`}weekViewHour({date:e,locale:i}){return Jt(e,"h a",i)}dayViewHour({date:e,locale:i}){return Jt(e,"h a",i)}dayViewTitle({date:e,locale:i}){return Jt(e,"EEEE, MMMM d, y",i)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Yf))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),vO=(()=>{class n extends vse{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=l.n5z(n)))(i||n)}}(),n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),zS=(()=>{class n{constructor(e,i){this.dateFormatter=e,this.locale=i}transform(e,i,r=this.locale,s=0,c=[],d){if(typeof this.dateFormatter[i]>"u"){const p=Object.getOwnPropertyNames(Object.getPrototypeOf(vO.prototype)).filter(m=>"constructor"!==m);throw new Error(`${i} is not a valid date formatter. Can only be one of ${p.join(", ")}`)}return this.dateFormatter[i]({date:e,locale:r,weekStartsOn:s,excludeDays:c,daysInWeek:d})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(vO,16),l.Y36(l.soG,16))},n.\u0275pipe=l.Yjl({name:"calendarDate",type:n,pure:!0}),n})(),yO=(()=>{class n{constructor(e){this.dateAdapter=e}getMonthView(e){return function mie(n,t){var e=t.events,i=void 0===e?[]:e,r=t.viewDate,s=t.weekStartsOn,c=t.excluded,d=void 0===c?[]:c,p=t.viewStart,m=void 0===p?n.startOfMonth(r):p,y=t.viewEnd,T=void 0===y?n.endOfMonth(r):y,A=t.weekendDays;i||(i=[]);for(var _t,P=n.endOfWeek,V=n.differenceInDays,G=n.startOfDay,te=n.addHours,se=n.endOfDay,le=n.isSameMonth,de=n.getDay,Oe=(0,n.startOfWeek)(m,{weekStartsOn:s}),je=P(T,{weekStartsOn:s}),ct=HS(n,{events:i,periodStart:Oe,periodEnd:je}),nt=[],Tt=function(Ht){var jt;if(_t?(jt=G(te(_t,24)),_t.getTime()===jt.getTime()&&(jt=G(te(_t,25))),_t=jt):jt=_t=Oe,!d.some(function(sr){return de(jt)===sr})){var ii=sz(n,{date:jt,weekendDays:A}),wi=HS(n,{events:ct,periodStart:G(jt),periodEnd:se(jt)});ii.inMonth=le(jt,r),ii.events=wi,ii.badgeTotal=wi.length,nt.push(ii)}},rt=0;rt<V(je,Oe)+1;rt++)Tt();var tt=[],Zt=wB-d.length;if(Zt<wB)for(rt=0;rt<nt.length;rt+=Zt){var Mn=nt.slice(rt,rt+Zt);Mn.some(function(jt){return m<=jt.date&&jt.date<T})&&(tt=vB(vB([],tt,!0),Mn,!0))}else tt=nt;var gt=Math.floor(tt.length/Zt),St=[];for(rt=0;rt<gt;rt++)St.push(rt*Zt);return{rowOffsets:St,totalDaysVisibleInWeek:Zt,days:tt,period:{start:tt[0].date,end:se(tt[tt.length-1].date),events:ct}}}(this.dateAdapter,e)}getWeekViewHeader(e){return DB(this.dateAdapter,e)}getWeekView(e){return function gie(n,t){var e=t.events,i=void 0===e?[]:e,r=t.viewDate,s=t.weekStartsOn,c=t.excluded,d=void 0===c?[]:c,p=t.precision,m=void 0===p?"days":p,y=t.absolutePositionedEvents,T=void 0!==y&&y,A=t.hourSegments,x=t.hourDuration,P=t.dayStart,V=t.dayEnd,G=t.weekendDays,te=t.segmentHeight,se=t.minimumEventHeight,le=t.viewStart,de=void 0===le?n.startOfWeek(r,{weekStartsOn:s}):le,Oe=t.viewEnd,je=void 0===Oe?n.endOfWeek(r,{weekStartsOn:s}):Oe;i||(i=[]);var nt=n.endOfDay,_t=HS(n,{events:i,periodStart:de=(0,n.startOfDay)(de),periodEnd:je=nt(je)}),Tt=DB(n,{viewDate:r,weekStartsOn:s,excluded:d,weekendDays:G,viewStart:de,viewEnd:je});return{allDayEventRows:fie(n,{events:_t,excluded:d,precision:m,absolutePositionedEvents:T,viewStart:de,viewEnd:je}),period:{events:_t,start:Tt[0].date,end:nt(Tt[Tt.length-1].date)},hourColumns:pie(n,{events:i,viewDate:r,hourSegments:A,hourDuration:x,dayStart:P,dayEnd:V,weekStartsOn:s,excluded:d,weekendDays:G,segmentHeight:te,viewStart:de,viewEnd:je,minimumEventHeight:se})}}(this.dateAdapter,e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Yf))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();new l.OlP("Moment");var Cm=function(n){return n.Drag="drag",n.Drop="drop",n.Resize="resize",n}(Cm||{});let WS=(()=>{class n{static forRoot(e,i={}){return{ngModule:n,providers:[e,i.eventTitleFormatter||kB,i.dateFormatter||vO,i.utils||yO,i.a11y||_O]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[_c],imports:[zn]}),n})(),yse=(()=>{class n{constructor(){this.highlightDay=new l.vpe,this.unhighlightDay=new l.vpe,this.eventClicked=new l.vpe,this.trackByEventId=xz,this.validateDrag=VB}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["mwl-calendar-month-cell"]],hostAttrs:[1,"cal-cell","cal-day-cell"],hostVars:18,hostBindings:function(e,i){2&e&&l.ekj("cal-past",i.day.isPast)("cal-today",i.day.isToday)("cal-future",i.day.isFuture)("cal-weekend",i.day.isWeekend)("cal-in-month",i.day.inMonth)("cal-out-month",!i.day.inMonth)("cal-has-events",i.day.events.length>0)("cal-open",i.day===i.openDay)("cal-event-highlight",!!i.day.backgroundColor)},inputs:{day:"day",openDay:"openDay",locale:"locale",tooltipPlacement:"tooltipPlacement",tooltipAppendToBody:"tooltipAppendToBody",customTemplate:"customTemplate",tooltipTemplate:"tooltipTemplate",tooltipDelay:"tooltipDelay"},outputs:{highlightDay:"highlightDay",unhighlightDay:"unhighlightDay",eventClicked:"eventClicked"},decls:3,vars:15,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-cell-top"],["aria-hidden","true"],["class","cal-day-badge",4,"ngIf"],[1,"cal-day-number"],["class","cal-events",4,"ngIf"],[1,"cal-day-badge"],[1,"cal-events"],["class","cal-event","mwlDraggable","","dragActiveClass","cal-drag-active",3,"ngStyle","ngClass","mwlCalendarTooltip","tooltipPlacement","tooltipEvent","tooltipTemplate","tooltipAppendToBody","tooltipDelay","cal-draggable","dropData","dragAxis","validateDrag","touchStartLongPress","mouseenter","mouseleave","mwlClick",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event",3,"ngStyle","ngClass","mwlCalendarTooltip","tooltipPlacement","tooltipEvent","tooltipTemplate","tooltipAppendToBody","tooltipDelay","dropData","dragAxis","validateDrag","touchStartLongPress","mouseenter","mouseleave","mwlClick"]],template:function(e,i){if(1&e&&(l.YNc(0,ire,8,14,"ng-template",null,0,l.W1O),l.YNc(2,rre,0,0,"ng-template",1)),2&e){const r=l.MAs(1);l.xp6(2),l.Q6J("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",l.rFY(2,sre,[i.day,i.openDay,i.locale,i.tooltipPlacement,i.highlightDay,i.unhighlightDay,i.eventClicked,i.tooltipTemplate,i.tooltipAppendToBody,i.tooltipDelay,i.trackByEventId,i.validateDrag]))}},dependencies:[as,lr,Mi,Qi,Do,xB,Sz,yy,zS,PB,wy],encapsulation:2}),n})();const wse=G3("collapse",[nS("void",Jv({height:0,overflow:"hidden","padding-top":0,"padding-bottom":0})),nS("*",Jv({height:"*",overflow:"hidden","padding-top":"*","padding-bottom":"*"})),oR("* => void",sR("150ms ease-out")),oR("void => *",sR("150ms ease-in"))]);let bse=(()=>{class n{constructor(){this.isOpen=!1,this.eventClicked=new l.vpe,this.trackByEventId=xz,this.validateDrag=VB}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["mwl-calendar-open-day-events"]],inputs:{locale:"locale",isOpen:"isOpen",events:"events",customTemplate:"customTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",date:"date"},outputs:{eventClicked:"eventClicked"},decls:3,vars:8,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","cal-open-day-events","role","application",4,"ngIf"],["role","application",1,"cal-open-day-events"],["tabindex","-1","role","alert"],["tabindex","0","role","landmark"],["mwlDraggable","","dragActiveClass","cal-drag-active",3,"ngClass","cal-draggable","dropData","dragAxis","validateDrag","touchStartLongPress",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDraggable","","dragActiveClass","cal-drag-active",3,"ngClass","dropData","dragAxis","validateDrag","touchStartLongPress"],[1,"cal-event",3,"ngStyle"],["view","month","tabindex","0",3,"event","customTemplate","mwlClick","mwlKeydownEnter"],[3,"event","customTemplate"]],template:function(e,i){if(1&e&&(l.YNc(0,cre,1,1,"ng-template",null,0,l.W1O),l.YNc(2,ure,0,0,"ng-template",1)),2&e){const r=l.MAs(1);l.xp6(2),l.Q6J("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",l.qbA(2,dre,i.events,i.eventClicked,i.isOpen,i.trackByEventId,i.validateDrag))}},dependencies:[as,lr,Mi,Qi,Do,xB,Tz,Iz,yy,mO,wy],encapsulation:2,data:{animation:[wse]}}),n})(),Dse=(()=>{class n{constructor(){this.columnHeaderClicked=new l.vpe,this.trackByWeekDayHeaderDate=FB}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["mwl-calendar-month-view-header"]],inputs:{days:"days",locale:"locale",customTemplate:"customTemplate"},outputs:{columnHeaderClicked:"columnHeaderClicked"},decls:3,vars:6,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","row",1,"cal-cell-row","cal-header"],["class","cal-cell","tabindex","0","role","columnheader",3,"cal-past","cal-today","cal-future","cal-weekend","ngClass","click",4,"ngFor","ngForOf","ngForTrackBy"],["tabindex","0","role","columnheader",1,"cal-cell",3,"ngClass","click"]],template:function(e,i){if(1&e&&(l.YNc(0,fre,2,2,"ng-template",null,0,l.W1O),l.YNc(2,pre,0,0,"ng-template",1)),2&e){const r=l.MAs(1);l.xp6(2),l.Q6J("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",l.kEZ(2,gre,i.days,i.locale,i.trackByWeekDayHeaderDate))}},dependencies:[as,lr,Qi,zS],encapsulation:2}),n})(),Ese=(()=>{class n{constructor(e,i,r,s){this.cdr=e,this.utils=i,this.dateAdapter=s,this.events=[],this.excludeDays=[],this.activeDayIsOpen=!1,this.tooltipPlacement="auto",this.tooltipAppendToBody=!0,this.tooltipDelay=null,this.beforeViewRender=new l.vpe,this.dayClicked=new l.vpe,this.eventClicked=new l.vpe,this.columnHeaderClicked=new l.vpe,this.eventTimesChanged=new l.vpe,this.trackByRowOffset=(c,d)=>this.view.days.slice(d,this.view.totalDaysVisibleInWeek).map(p=>p.date.toISOString()).join("-"),this.trackByDate=(c,d)=>d.date.toISOString(),this.locale=r}ngOnInit(){this.refresh&&(this.refreshSubscription=this.refresh.subscribe(()=>{this.refreshAll(),this.cdr.markForCheck()}))}ngOnChanges(e){const i=e.viewDate||e.excludeDays||e.weekendDays,r=e.viewDate||e.events||e.excludeDays||e.weekendDays;i&&this.refreshHeader(),e.events&&Az(this.events),r&&this.refreshBody(),(i||r)&&this.emitBeforeViewRender(),(e.activeDayIsOpen||e.viewDate||e.events||e.excludeDays||e.activeDay)&&this.checkActiveDayIsOpen()}ngOnDestroy(){this.refreshSubscription&&this.refreshSubscription.unsubscribe()}toggleDayHighlight(e,i){this.view.days.forEach(r=>{i&&r.events.indexOf(e)>-1?r.backgroundColor=e.color&&e.color.secondary||"#D1E8FF":delete r.backgroundColor})}eventDropped(e,i,r){if(e!==r){const s=this.dateAdapter.getYear(e.date),c=this.dateAdapter.getMonth(e.date),d=this.dateAdapter.getDate(e.date),p=this.dateAdapter.setDate(this.dateAdapter.setMonth(this.dateAdapter.setYear(i.start,s),c),d);let m;if(i.end){const y=this.dateAdapter.differenceInSeconds(p,i.start);m=this.dateAdapter.addSeconds(i.end,y)}this.eventTimesChanged.emit({event:i,newStart:p,newEnd:m,day:e,type:Cm.Drop})}}refreshHeader(){this.columnHeaders=this.utils.getWeekViewHeader({viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,weekendDays:this.weekendDays})}refreshBody(){this.view=this.utils.getMonthView({events:this.events,viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,weekendDays:this.weekendDays})}checkActiveDayIsOpen(){if(!0===this.activeDayIsOpen){const e=this.activeDay||this.viewDate;this.openDay=this.view.days.find(r=>this.dateAdapter.isSameDay(r.date,e));const i=this.view.days.indexOf(this.openDay);this.openRowIndex=Math.floor(i/this.view.totalDaysVisibleInWeek)*this.view.totalDaysVisibleInWeek}else this.openRowIndex=null,this.openDay=null}refreshAll(){this.refreshHeader(),this.refreshBody(),this.emitBeforeViewRender(),this.checkActiveDayIsOpen()}emitBeforeViewRender(){this.columnHeaders&&this.view&&this.beforeViewRender.emit({header:this.columnHeaders,body:this.view.days,period:this.view.period})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.sBO),l.Y36(yO),l.Y36(l.soG),l.Y36(Yf))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mwl-calendar-month-view"]],inputs:{viewDate:"viewDate",events:"events",excludeDays:"excludeDays",activeDayIsOpen:"activeDayIsOpen",activeDay:"activeDay",refresh:"refresh",locale:"locale",tooltipPlacement:"tooltipPlacement",tooltipTemplate:"tooltipTemplate",tooltipAppendToBody:"tooltipAppendToBody",tooltipDelay:"tooltipDelay",weekStartsOn:"weekStartsOn",headerTemplate:"headerTemplate",cellTemplate:"cellTemplate",openDayEventsTemplate:"openDayEventsTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",weekendDays:"weekendDays"},outputs:{beforeViewRender:"beforeViewRender",dayClicked:"dayClicked",eventClicked:"eventClicked",columnHeaderClicked:"columnHeaderClicked",eventTimesChanged:"eventTimesChanged"},features:[l.TTD],decls:4,vars:5,consts:[["role","grid",1,"cal-month-view"],[3,"days","locale","customTemplate","columnHeaderClicked"],[1,"cal-days"],[4,"ngFor","ngForOf","ngForTrackBy"],["role","row",1,"cal-cell-row"],["role","gridcell","mwlDroppable","","dragOverClass","cal-drag-over",3,"ngClass","day","openDay","locale","tooltipPlacement","tooltipAppendToBody","tooltipTemplate","tooltipDelay","customTemplate","ngStyle","clickListenerDisabled","mwlClick","mwlKeydownEnter","highlightDay","unhighlightDay","drop","eventClicked",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragOverClass","cal-drag-over",3,"locale","isOpen","events","date","customTemplate","eventTitleTemplate","eventActionsTemplate","eventClicked","drop"],["role","gridcell","mwlDroppable","","dragOverClass","cal-drag-over",3,"ngClass","day","openDay","locale","tooltipPlacement","tooltipAppendToBody","tooltipTemplate","tooltipDelay","customTemplate","ngStyle","clickListenerDisabled","mwlClick","mwlKeydownEnter","highlightDay","unhighlightDay","drop","eventClicked"]],template:function(e,i){1&e&&(l.TgZ(0,"div",0)(1,"mwl-calendar-month-view-header",1),l.NdJ("columnHeaderClicked",function(s){return i.columnHeaderClicked.emit(s)}),l.qZA(),l.TgZ(2,"div",2),l.YNc(3,_re,5,13,"div",3),l.qZA()()),2&e&&(l.xp6(1),l.Q6J("days",i.columnHeaders)("locale",i.locale)("customTemplate",i.headerTemplate),l.xp6(2),l.Q6J("ngForOf",i.view.rowOffsets)("ngForTrackBy",i.trackByRowOffset))},dependencies:[as,lr,Do,RB,yy,mO,yse,bse,Dse,Ji,wy],encapsulation:2}),n})(),Oz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[zn,fO,WS,fO]}),n})();class Cse{constructor(t,e){this.dragContainerElement=t,this.startPosition=e.getBoundingClientRect()}validateDrag({x:t,y:e,snapDraggedEvents:i,dragAlreadyMoved:r,transform:s}){const c=VB({x:t,y:e})||r;if(i){const d=Object.assign({},this.startPosition,{left:this.startPosition.left+s.x,right:this.startPosition.right+s.x,top:this.startPosition.top+s.y,bottom:this.startPosition.bottom+s.y});if(c){const p=this.dragContainerElement.getBoundingClientRect(),m=p.top<d.top&&d.top<p.bottom,y=p.top<d.bottom&&d.bottom<p.bottom;return Mz(p,d)&&(m||y)}return!1}return c}}class Tse{constructor(t,e,i){this.resizeContainerElement=t,this.minWidth=e,this.rtl=i}validateResize({rectangle:t,edges:e}){return this.rtl&&(typeof e.left<"u"?(t.left-=e.left,t.right+=e.left):typeof e.right<"u"&&(t.left+=e.right,t.right-=e.right),t.width=t.right-t.left),!(this.minWidth&&Math.ceil(t.width)<Math.ceil(this.minWidth))&&function ose(n,t){return Mz(n,t)&&function sse(n,t){return Math.floor(n.top)<=Math.ceil(t.top)&&Math.floor(t.top)<=Math.ceil(n.bottom)&&Math.floor(n.top)<=Math.ceil(t.bottom)&&Math.floor(t.bottom)<=Math.ceil(n.bottom)}(n,t)}(this.resizeContainerElement.getBoundingClientRect(),t)}}let Ise=(()=>{class n{constructor(){this.dayHeaderClicked=new l.vpe,this.eventDropped=new l.vpe,this.dragEnter=new l.vpe,this.trackByWeekDayHeaderDate=FB}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["mwl-calendar-week-view-header"]],inputs:{days:"days",locale:"locale",customTemplate:"customTemplate"},outputs:{dayHeaderClicked:"dayHeaderClicked",eventDropped:"eventDropped",dragEnter:"dragEnter"},decls:3,vars:9,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","row",1,"cal-day-headers"],["class","cal-header","mwlDroppable","","dragOverClass","cal-drag-over","tabindex","0","role","columnheader",3,"cal-past","cal-today","cal-future","cal-weekend","ngClass","mwlClick","drop","dragEnter",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragOverClass","cal-drag-over","tabindex","0","role","columnheader",1,"cal-header",3,"ngClass","mwlClick","drop","dragEnter"]],template:function(e,i){if(1&e&&(l.YNc(0,yre,2,2,"ng-template",null,0,l.W1O),l.YNc(2,wre,0,0,"ng-template",1)),2&e){const r=l.MAs(1);l.xp6(2),l.Q6J("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",l.HTZ(2,bre,i.days,i.locale,i.dayHeaderClicked,i.eventDropped,i.dragEnter,i.trackByWeekDayHeaderDate))}},dependencies:[as,lr,Qi,RB,yy,zS],encapsulation:2}),n})(),Sse=(()=>{class n{constructor(){this.eventClicked=new l.vpe}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["mwl-calendar-week-view-event"]],inputs:{locale:"locale",weekEvent:"weekEvent",tooltipPlacement:"tooltipPlacement",tooltipAppendToBody:"tooltipAppendToBody",tooltipDisabled:"tooltipDisabled",tooltipDelay:"tooltipDelay",customTemplate:"customTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",tooltipTemplate:"tooltipTemplate",column:"column",daysInWeek:"daysInWeek"},outputs:{eventClicked:"eventClicked"},decls:3,vars:12,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["tabindex","0","role","application",1,"cal-event",3,"ngStyle","mwlCalendarTooltip","tooltipPlacement","tooltipEvent","tooltipTemplate","tooltipAppendToBody","tooltipDelay","mwlClick","mwlKeydownEnter"],[3,"event","customTemplate"],[3,"event","customTemplate","view"]],template:function(e,i){if(1&e&&(l.YNc(0,Ere,6,27,"ng-template",null,0,l.W1O),l.YNc(2,Cre,0,0,"ng-template",1)),2&e){const r=l.MAs(1);l.xp6(2),l.Q6J("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",l.rFY(2,Tre,[i.weekEvent,i.tooltipPlacement,i.eventClicked,i.tooltipTemplate,i.tooltipAppendToBody,i.tooltipDisabled,i.tooltipDelay,i.column,i.daysInWeek]))}},dependencies:[Qi,Do,Tz,Iz,Sz,yy,mO,PB,wy],encapsulation:2}),n})(),Ase=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["mwl-calendar-week-view-hour-segment"]],inputs:{segment:"segment",segmentHeight:"segmentHeight",locale:"locale",isTimeLabel:"isTimeLabel",daysInWeek:"daysInWeek",customTemplate:"customTemplate"},decls:3,vars:8,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-hour-segment",3,"ngClass"],["class","cal-time",4,"ngIf"],[1,"cal-time"]],template:function(e,i){if(1&e&&(l.YNc(0,Sre,3,13,"ng-template",null,0,l.W1O),l.YNc(2,Are,0,0,"ng-template",1)),2&e){const r=l.MAs(1);l.xp6(2),l.Q6J("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",l.qbA(2,Mre,i.segment,i.locale,i.segmentHeight,i.isTimeLabel,i.daysInWeek))}},dependencies:[as,Mi,Qi,zS,wy],encapsulation:2}),n})(),Mse=(()=>{class n{constructor(e,i){this.dateAdapter=e,this.zone=i,this.columnDate$=new wl.X(void 0),this.marker$=this.zone.onStable.pipe((0,Jn.w)(()=>function iie(n=0,t=Mr.z){return n<0&&(n=0),TR(n,n,t)}(6e4)),Kl(0),Rc(this.columnDate$),(0,at.U)(r=>{const s=this.dateAdapter.setMinutes(this.dateAdapter.setHours(r,this.dayStartHour),this.dayStartMinute),c=this.dateAdapter.setMinutes(this.dateAdapter.setHours(r,this.dayEndHour),this.dayEndMinute),d=this.hourSegments*this.hourSegmentHeight/(this.hourDuration||60),p=new Date;return{isVisible:this.dateAdapter.isSameDay(r,p)&&p>=s&&p<=c,top:this.dateAdapter.differenceInMinutes(p,s)*d}}))}ngOnChanges(e){e.columnDate&&this.columnDate$.next(e.columnDate.currentValue)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Yf),l.Y36(l.R0b))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mwl-calendar-week-view-current-time-marker"]],inputs:{columnDate:"columnDate",dayStartHour:"dayStartHour",dayStartMinute:"dayStartMinute",dayEndHour:"dayEndHour",dayEndMinute:"dayEndMinute",hourSegments:"hourSegments",hourDuration:"hourDuration",hourSegmentHeight:"hourSegmentHeight",customTemplate:"customTemplate"},features:[l.TTD],decls:5,vars:14,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","cal-current-time-marker",3,"top",4,"ngIf"],[1,"cal-current-time-marker"]],template:function(e,i){if(1&e&&(l.YNc(0,xre,1,1,"ng-template",null,0,l.W1O),l.YNc(2,Rre,0,0,"ng-template",1),l.ALo(3,"async"),l.ALo(4,"async")),2&e){const r=l.MAs(1);let s;l.xp6(2),l.Q6J("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",l.Hh0(6,Ore,i.columnDate,i.dayStartHour,i.dayStartMinute,i.dayEndHour,i.dayEndMinute,null==(s=l.lcZ(3,2,i.marker$))?null:s.isVisible,null==(s=l.lcZ(4,4,i.marker$))?null:s.top))}},dependencies:[Mi,Qi,Fa],encapsulation:2}),n})(),kz=(()=>{class n{constructor(e,i,r,s,c){this.cdr=e,this.utils=i,this.dateAdapter=s,this.element=c,this.events=[],this.excludeDays=[],this.tooltipPlacement="auto",this.tooltipAppendToBody=!0,this.tooltipDelay=null,this.precision="days",this.snapDraggedEvents=!0,this.hourSegments=2,this.hourSegmentHeight=30,this.minimumEventHeight=30,this.dayStartHour=0,this.dayStartMinute=0,this.dayEndHour=23,this.dayEndMinute=59,this.dayHeaderClicked=new l.vpe,this.eventClicked=new l.vpe,this.eventTimesChanged=new l.vpe,this.beforeViewRender=new l.vpe,this.hourSegmentClicked=new l.vpe,this.allDayEventResizes=new Map,this.timeEventResizes=new Map,this.eventDragEnterByType={allDay:0,time:0},this.dragActive=!1,this.dragAlreadyMoved=!1,this.calendarId=Symbol("angular calendar week view id"),this.rtl=!1,this.trackByWeekDayHeaderDate=FB,this.trackByHourSegment=ase,this.trackByHour=lse,this.trackByWeekAllDayEvent=cse,this.trackByWeekTimeEvent=use,this.trackByHourColumn=(d,p)=>p.hours[0]?p.hours[0].segments[0].date.toISOString():p,this.trackById=(d,p)=>p.id,this.locale=r}ngOnInit(){this.refresh&&(this.refreshSubscription=this.refresh.subscribe(()=>{this.refreshAll(),this.cdr.markForCheck()}))}ngOnChanges(e){const i=e.viewDate||e.excludeDays||e.weekendDays||e.daysInWeek||e.weekStartsOn,r=e.viewDate||e.dayStartHour||e.dayStartMinute||e.dayEndHour||e.dayEndMinute||e.hourSegments||e.hourDuration||e.weekStartsOn||e.weekendDays||e.excludeDays||e.hourSegmentHeight||e.events||e.daysInWeek||e.minimumEventHeight;i&&this.refreshHeader(),e.events&&Az(this.events),r&&this.refreshBody(),(i||r)&&this.emitBeforeViewRender()}ngOnDestroy(){this.refreshSubscription&&this.refreshSubscription.unsubscribe()}ngAfterViewInit(){this.rtl=typeof window<"u"&&"rtl"===getComputedStyle(this.element.nativeElement).direction,this.cdr.detectChanges()}timeEventResizeStarted(e,i,r){this.timeEventResizes.set(i.event,r),this.resizeStarted(e,i)}timeEventResizing(e,i){this.timeEventResizes.set(e.event,i);const r=new Map,s=[...this.events];this.timeEventResizes.forEach((c,d)=>{const p=this.getTimeEventResizedDates(d,c),m={...d,...p};r.set(m,d);const y=s.indexOf(d);s[y]=m}),this.restoreOriginalEvents(s,r,!0)}timeEventResizeEnded(e){this.view=this.getWeekView(this.events);const i=this.timeEventResizes.get(e.event);if(i){this.timeEventResizes.delete(e.event);const r=this.getTimeEventResizedDates(e.event,i);this.eventTimesChanged.emit({newStart:r.start,newEnd:r.end,event:e.event,type:Cm.Resize})}}allDayEventResizeStarted(e,i,r){this.allDayEventResizes.set(i,{originalOffset:i.offset,originalSpan:i.span,edge:typeof r.edges.left<"u"?"left":"right"}),this.resizeStarted(e,i,this.getDayColumnWidth(e))}allDayEventResizing(e,i,r){const s=this.allDayEventResizes.get(e),c=this.rtl?-1:1;if(typeof i.edges.left<"u"){const d=Math.round(+i.edges.left/r)*c;e.offset=s.originalOffset+d,e.span=s.originalSpan-d}else if(typeof i.edges.right<"u"){const d=Math.round(+i.edges.right/r)*c;e.span=s.originalSpan+d}}allDayEventResizeEnded(e){const i=this.allDayEventResizes.get(e);if(i){const r="left"===i.edge;let s;s=r?e.offset-i.originalOffset:e.span-i.originalSpan,e.offset=i.originalOffset,e.span=i.originalSpan;const c=this.getAllDayEventResizedDates(e.event,s,r);this.eventTimesChanged.emit({newStart:c.start,newEnd:c.end,event:e.event,type:Cm.Resize}),this.allDayEventResizes.delete(e)}}getDayColumnWidth(e){return Math.floor(e.offsetWidth/this.days.length)}dateDragEnter(e){this.lastDragEnterDate=e}eventDropped(e,i,r){(function pse(n,t,e,i){return n.dropData&&n.dropData.event&&(n.dropData.calendarId!==i||n.dropData.event.allDay&&!e||!n.dropData.event.allDay&&e)})(e,0,r,this.calendarId)&&this.lastDragEnterDate.getTime()===i.getTime()&&(!this.snapDraggedEvents||e.dropData.event!==this.lastDraggedEvent)&&this.eventTimesChanged.emit({type:Cm.Drop,event:e.dropData.event,newStart:i,allDay:r}),this.lastDraggedEvent=null}dragEnter(e){this.eventDragEnterByType[e]++}dragLeave(e){this.eventDragEnterByType[e]--}dragStarted(e,i,r,s){this.dayColumnWidth=this.getDayColumnWidth(e);const c=new Cse(e,i);this.validateDrag=({x:d,y:p,transform:m})=>{const y=0===this.allDayEventResizes.size&&0===this.timeEventResizes.size&&c.validateDrag({x:d,y:p,snapDraggedEvents:this.snapDraggedEvents,dragAlreadyMoved:this.dragAlreadyMoved,transform:m});if(y&&this.validateEventTimesChanged){const T=this.getDragMovedEventTimes(r,{x:d,y:p},this.dayColumnWidth,s);return this.validateEventTimesChanged({type:Cm.Drag,event:r.event,newStart:T.start,newEnd:T.end})}return y},this.dragActive=!0,this.dragAlreadyMoved=!1,this.lastDraggedEvent=null,this.eventDragEnterByType={allDay:0,time:0},!this.snapDraggedEvents&&s&&this.view.hourColumns.forEach(d=>{const p=d.events.find(m=>m.event===r.event&&m!==r);p&&(p.width=0,p.height=0)}),this.cdr.markForCheck()}dragMove(e,i){const r=this.getDragMovedEventTimes(e,i,this.dayColumnWidth,!0),s=e.event,c={...s,...r},d=this.events.map(p=>p===s?c:p);this.restoreOriginalEvents(d,new Map([[c,s]]),this.snapDraggedEvents),this.dragAlreadyMoved=!0}allDayEventDragMove(){this.dragAlreadyMoved=!0}dragEnded(e,i,r,s=!1){this.view=this.getWeekView(this.events),this.dragActive=!1,this.validateDrag=null;const{start:c,end:d}=this.getDragMovedEventTimes(e,i,r,s);(this.snapDraggedEvents||this.eventDragEnterByType[s?"time":"allDay"]>0)&&function fse(n,t,e){const i=t||n;return e.start<=n&&n<=e.end||e.start<=i&&i<=e.end}(c,d,this.view.period)&&(this.lastDraggedEvent=e.event,this.eventTimesChanged.emit({newStart:c,newEnd:d,event:e.event,type:Cm.Drag,allDay:!s}))}refreshHeader(){this.days=this.utils.getWeekViewHeader({viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,weekendDays:this.weekendDays,...BB(this.dateAdapter,this.viewDate,this.weekStartsOn,this.excludeDays,this.daysInWeek)})}refreshBody(){this.view=this.getWeekView(this.events)}refreshAll(){this.refreshHeader(),this.refreshBody(),this.emitBeforeViewRender()}emitBeforeViewRender(){this.days&&this.view&&this.beforeViewRender.emit({header:this.days,...this.view})}getWeekView(e){return this.utils.getWeekView({events:e,viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,precision:this.precision,absolutePositionedEvents:!0,hourSegments:this.hourSegments,hourDuration:this.hourDuration,dayStart:{hour:this.dayStartHour,minute:this.dayStartMinute},dayEnd:{hour:this.dayEndHour,minute:this.dayEndMinute},segmentHeight:this.hourSegmentHeight,weekendDays:this.weekendDays,minimumEventHeight:this.minimumEventHeight,...BB(this.dateAdapter,this.viewDate,this.weekStartsOn,this.excludeDays,this.daysInWeek)})}getDragMovedEventTimes(e,i,r,s){const c=Nz(i.x,r)/r*(this.rtl?-1:1),d=s?LB(i.y,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize,this.hourDuration):0,p=this.dateAdapter.addMinutes(Iu(this.dateAdapter,e.event.start,c,this.excludeDays),d);let m;return e.event.end&&(m=this.dateAdapter.addMinutes(Iu(this.dateAdapter,e.event.end,c,this.excludeDays),d)),{start:p,end:m}}restoreOriginalEvents(e,i,r=!0){const s=this.view;r&&(this.view=this.getWeekView(e));const c=e.filter(d=>i.has(d));this.view.hourColumns.forEach((d,p)=>{s.hourColumns[p].hours.forEach((m,y)=>{m.segments.forEach((T,A)=>{d.hours[y].segments[A].cssClass=T.cssClass})}),c.forEach(m=>{const y=i.get(m),T=d.events.find(A=>A.event===(r?m:y));T?(T.event=y,T.tempEvent=m,r||(T.height=0,T.width=0)):d.events.push({event:y,left:0,top:0,height:0,width:0,startsBeforeDay:!1,endsAfterDay:!1,tempEvent:m})})}),i.clear()}getTimeEventResizedDates(e,i){const r={start:e.start,end:Rz(this.dateAdapter,e,this.minimumEventHeight)},{end:s,...c}=e,d={start:this.dateAdapter.addMinutes(r.end,-1*this.minimumEventHeight),end:Rz(this.dateAdapter,c,this.minimumEventHeight)},p=this.rtl?-1:1;if(typeof i.edges.left<"u"){const m=Math.round(+i.edges.left/this.dayColumnWidth)*p,y=Iu(this.dateAdapter,r.start,m,this.excludeDays);r.start=y<d.start?y:d.start}else if(typeof i.edges.right<"u"){const m=Math.round(+i.edges.right/this.dayColumnWidth)*p,y=Iu(this.dateAdapter,r.end,m,this.excludeDays);r.end=y>d.end?y:d.end}if(typeof i.edges.top<"u"){const m=LB(i.edges.top,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize,this.hourDuration),y=this.dateAdapter.addMinutes(r.start,m);r.start=y<d.start?y:d.start}else if(typeof i.edges.bottom<"u"){const m=LB(i.edges.bottom,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize,this.hourDuration),y=this.dateAdapter.addMinutes(r.end,m);r.end=y>d.end?y:d.end}return r}resizeStarted(e,i,r){this.dayColumnWidth=this.getDayColumnWidth(e);const s=new Tse(e,r,this.rtl);this.validateResize=({rectangle:c,edges:d})=>{const p=s.validateResize({rectangle:{...c},edges:d});if(p&&this.validateEventTimesChanged){let m;if(r){const y=this.rtl?-1:1;if(typeof d.left<"u"){const T=Math.round(+d.left/r)*y;m=this.getAllDayEventResizedDates(i.event,T,!this.rtl)}else{const T=Math.round(+d.right/r)*y;m=this.getAllDayEventResizedDates(i.event,T,this.rtl)}}else m=this.getTimeEventResizedDates(i.event,{rectangle:c,edges:d});return this.validateEventTimesChanged({type:Cm.Resize,event:i.event,newStart:m.start,newEnd:m.end})}return p},this.cdr.markForCheck()}getAllDayEventResizedDates(e,i,r){let s=e.start,c=e.end||e.start;return r?s=Iu(this.dateAdapter,s,i,this.excludeDays):c=Iu(this.dateAdapter,c,i,this.excludeDays),{start:s,end:c}}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.sBO),l.Y36(yO),l.Y36(l.soG),l.Y36(Yf),l.Y36(l.SBq))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mwl-calendar-week-view"]],inputs:{viewDate:"viewDate",events:"events",excludeDays:"excludeDays",refresh:"refresh",locale:"locale",tooltipPlacement:"tooltipPlacement",tooltipTemplate:"tooltipTemplate",tooltipAppendToBody:"tooltipAppendToBody",tooltipDelay:"tooltipDelay",weekStartsOn:"weekStartsOn",headerTemplate:"headerTemplate",eventTemplate:"eventTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",precision:"precision",weekendDays:"weekendDays",snapDraggedEvents:"snapDraggedEvents",hourSegments:"hourSegments",hourDuration:"hourDuration",hourSegmentHeight:"hourSegmentHeight",minimumEventHeight:"minimumEventHeight",dayStartHour:"dayStartHour",dayStartMinute:"dayStartMinute",dayEndHour:"dayEndHour",dayEndMinute:"dayEndMinute",hourSegmentTemplate:"hourSegmentTemplate",eventSnapSize:"eventSnapSize",allDayEventsLabelTemplate:"allDayEventsLabelTemplate",daysInWeek:"daysInWeek",currentTimeMarkerTemplate:"currentTimeMarkerTemplate",validateEventTimesChanged:"validateEventTimesChanged",resizeCursors:"resizeCursors"},outputs:{dayHeaderClicked:"dayHeaderClicked",eventClicked:"eventClicked",eventTimesChanged:"eventTimesChanged",beforeViewRender:"beforeViewRender",hourSegmentClicked:"hourSegmentClicked"},features:[l.TTD],decls:8,vars:9,consts:[["role","grid",1,"cal-week-view"],[3,"days","locale","customTemplate","dayHeaderClicked","eventDropped","dragEnter"],["class","cal-all-day-events","mwlDroppable","",3,"dragEnter","dragLeave",4,"ngIf"],["mwlDroppable","",1,"cal-time-events",3,"dragEnter","dragLeave"],["class","cal-time-label-column",4,"ngIf"],[1,"cal-day-columns"],["dayColumns",""],["class","cal-day-column",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","",1,"cal-all-day-events",3,"dragEnter","dragLeave"],["allDayEventsContainer",""],[1,"cal-time-label-column",3,"ngTemplateOutlet"],["class","cal-day-column","mwlDroppable","","dragOverClass","cal-drag-over",3,"drop","dragEnter",4,"ngFor","ngForOf","ngForTrackBy"],["class","cal-events-row",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragOverClass","cal-drag-over",1,"cal-day-column",3,"drop","dragEnter"],[1,"cal-events-row"],["eventRowContainer",""],["class","cal-event-container","mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",3,"cal-draggable","cal-starts-within-week","cal-ends-within-week","ngClass","width","marginLeft","marginRight","resizeCursors","resizeSnapGrid","validateResize","dropData","dragAxis","dragSnapGrid","validateDrag","touchStartLongPress","resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd",4,"ngFor","ngForOf","ngForTrackBy"],["mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event-container",3,"ngClass","resizeCursors","resizeSnapGrid","validateResize","dropData","dragAxis","dragSnapGrid","validateDrag","touchStartLongPress","resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd"],["event",""],["class","cal-resize-handle cal-resize-handle-before-start","mwlResizeHandle","",3,"resizeEdges",4,"ngIf"],[3,"locale","weekEvent","tooltipPlacement","tooltipTemplate","tooltipAppendToBody","tooltipDelay","customTemplate","eventTitleTemplate","eventActionsTemplate","daysInWeek","eventClicked"],["class","cal-resize-handle cal-resize-handle-after-end","mwlResizeHandle","",3,"resizeEdges",4,"ngIf"],["mwlResizeHandle","",1,"cal-resize-handle","cal-resize-handle-before-start",3,"resizeEdges"],["mwlResizeHandle","",1,"cal-resize-handle","cal-resize-handle-after-end",3,"resizeEdges"],[1,"cal-time-label-column"],["class","cal-hour",3,"cal-hour-odd",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cal-hour"],[3,"height","segment","segmentHeight","locale","customTemplate","isTimeLabel","daysInWeek",4,"ngFor","ngForOf","ngForTrackBy"],[3,"segment","segmentHeight","locale","customTemplate","isTimeLabel","daysInWeek"],[1,"cal-day-column"],[3,"columnDate","dayStartHour","dayStartMinute","dayEndHour","dayEndMinute","hourSegments","hourDuration","hourSegmentHeight","customTemplate"],[1,"cal-events-container"],["class","cal-event-container","mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",3,"cal-draggable","cal-starts-within-day","cal-ends-within-day","ngClass","hidden","top","height","left","width","resizeCursors","resizeSnapGrid","validateResize","allowNegativeResizes","dropData","dragAxis","dragSnapGrid","touchStartLongPress","ghostDragEnabled","ghostElementTemplate","validateDrag","resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd",4,"ngFor","ngForOf","ngForTrackBy"],["mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event-container",3,"ngClass","hidden","resizeCursors","resizeSnapGrid","validateResize","allowNegativeResizes","dropData","dragAxis","dragSnapGrid","touchStartLongPress","ghostDragEnabled","ghostElementTemplate","validateDrag","resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd"],[3,"ngTemplateOutlet"],["weekEventTemplate",""],[3,"locale","weekEvent","tooltipPlacement","tooltipTemplate","tooltipAppendToBody","tooltipDisabled","tooltipDelay","customTemplate","eventTitleTemplate","eventActionsTemplate","column","daysInWeek","eventClicked"],["mwlDroppable","","dragActiveClass","cal-drag-active",3,"height","segment","segmentHeight","locale","customTemplate","daysInWeek","clickListenerDisabled","dragOverClass","isTimeLabel","mwlClick","drop","dragEnter",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragActiveClass","cal-drag-active",3,"segment","segmentHeight","locale","customTemplate","daysInWeek","clickListenerDisabled","dragOverClass","isTimeLabel","mwlClick","drop","dragEnter"]],template:function(e,i){1&e&&(l.TgZ(0,"div",0)(1,"mwl-calendar-week-view-header",1),l.NdJ("dayHeaderClicked",function(s){return i.dayHeaderClicked.emit(s)})("eventDropped",function(s){return i.eventDropped({dropData:s},s.newStart,!0)})("dragEnter",function(s){return i.dateDragEnter(s.date)}),l.qZA(),l.YNc(2,Gre,6,5,"div",2),l.TgZ(3,"div",3),l.NdJ("dragEnter",function(){return i.dragEnter("time")})("dragLeave",function(){return i.dragLeave("time")}),l.YNc(4,Wre,2,2,"div",4),l.TgZ(5,"div",5,6),l.YNc(7,ise,5,13,"div",7),l.qZA()()()),2&e&&(l.xp6(1),l.Q6J("days",i.days)("locale",i.locale)("customTemplate",i.headerTemplate),l.xp6(1),l.Q6J("ngIf",i.view.allDayEventRows.length>0),l.xp6(2),l.Q6J("ngIf",i.view.hourColumns.length>0&&1!==i.daysInWeek),l.xp6(1),l.ekj("cal-resize-active",i.timeEventResizes.size>0),l.xp6(2),l.Q6J("ngForOf",i.view.hourColumns)("ngForTrackBy",i.trackByHourColumn))},dependencies:[as,lr,Mi,Qi,wz,Vie,xB,RB,yy,Ise,Sse,Ase,Mse],encapsulation:2}),n})(),UB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[zn,bz,fO,WS,bz,fO]}),n})(),Nse=(()=>{class n{constructor(){this.events=[],this.hourSegments=2,this.hourSegmentHeight=30,this.minimumEventHeight=30,this.dayStartHour=0,this.dayStartMinute=0,this.dayEndHour=23,this.dayEndMinute=59,this.tooltipPlacement="auto",this.tooltipAppendToBody=!0,this.tooltipDelay=null,this.snapDraggedEvents=!0,this.eventClicked=new l.vpe,this.hourSegmentClicked=new l.vpe,this.eventTimesChanged=new l.vpe,this.beforeViewRender=new l.vpe}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["mwl-calendar-day-view"]],inputs:{viewDate:"viewDate",events:"events",hourSegments:"hourSegments",hourSegmentHeight:"hourSegmentHeight",hourDuration:"hourDuration",minimumEventHeight:"minimumEventHeight",dayStartHour:"dayStartHour",dayStartMinute:"dayStartMinute",dayEndHour:"dayEndHour",dayEndMinute:"dayEndMinute",refresh:"refresh",locale:"locale",eventSnapSize:"eventSnapSize",tooltipPlacement:"tooltipPlacement",tooltipTemplate:"tooltipTemplate",tooltipAppendToBody:"tooltipAppendToBody",tooltipDelay:"tooltipDelay",hourSegmentTemplate:"hourSegmentTemplate",eventTemplate:"eventTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",snapDraggedEvents:"snapDraggedEvents",allDayEventsLabelTemplate:"allDayEventsLabelTemplate",currentTimeMarkerTemplate:"currentTimeMarkerTemplate",validateEventTimesChanged:"validateEventTimesChanged",resizeCursors:"resizeCursors"},outputs:{eventClicked:"eventClicked",hourSegmentClicked:"hourSegmentClicked",eventTimesChanged:"eventTimesChanged",beforeViewRender:"beforeViewRender"},decls:1,vars:27,consts:[[1,"cal-day-view",3,"daysInWeek","viewDate","events","hourSegments","hourDuration","hourSegmentHeight","minimumEventHeight","dayStartHour","dayStartMinute","dayEndHour","dayEndMinute","refresh","locale","eventSnapSize","tooltipPlacement","tooltipTemplate","tooltipAppendToBody","tooltipDelay","resizeCursors","hourSegmentTemplate","eventTemplate","eventTitleTemplate","eventActionsTemplate","snapDraggedEvents","allDayEventsLabelTemplate","currentTimeMarkerTemplate","validateEventTimesChanged","eventClicked","hourSegmentClicked","eventTimesChanged","beforeViewRender"]],template:function(e,i){1&e&&(l.TgZ(0,"mwl-calendar-week-view",0),l.NdJ("eventClicked",function(s){return i.eventClicked.emit(s)})("hourSegmentClicked",function(s){return i.hourSegmentClicked.emit(s)})("eventTimesChanged",function(s){return i.eventTimesChanged.emit(s)})("beforeViewRender",function(s){return i.beforeViewRender.emit(s)}),l.qZA()),2&e&&l.Q6J("daysInWeek",1)("viewDate",i.viewDate)("events",i.events)("hourSegments",i.hourSegments)("hourDuration",i.hourDuration)("hourSegmentHeight",i.hourSegmentHeight)("minimumEventHeight",i.minimumEventHeight)("dayStartHour",i.dayStartHour)("dayStartMinute",i.dayStartMinute)("dayEndHour",i.dayEndHour)("dayEndMinute",i.dayEndMinute)("refresh",i.refresh)("locale",i.locale)("eventSnapSize",i.eventSnapSize)("tooltipPlacement",i.tooltipPlacement)("tooltipTemplate",i.tooltipTemplate)("tooltipAppendToBody",i.tooltipAppendToBody)("tooltipDelay",i.tooltipDelay)("resizeCursors",i.resizeCursors)("hourSegmentTemplate",i.hourSegmentTemplate)("eventTemplate",i.eventTemplate)("eventTitleTemplate",i.eventTitleTemplate)("eventActionsTemplate",i.eventActionsTemplate)("snapDraggedEvents",i.snapDraggedEvents)("allDayEventsLabelTemplate",i.allDayEventsLabelTemplate)("currentTimeMarkerTemplate",i.currentTimeMarkerTemplate)("validateEventTimesChanged",i.validateEventTimesChanged)},dependencies:[kz],encapsulation:2}),n})(),Pz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[zn,WS,UB]}),n})(),xse=(()=>{class n{static forRoot(e,i={}){return{ngModule:n,providers:[e,i.eventTitleFormatter||kB,i.dateFormatter||vO,i.utils||yO,i.a11y||_O]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[WS,Oz,UB,Pz,WS,Oz,UB,Pz]}),n})();const by=void 0,Fz=["en",[["a","p"],["AM","PM"],by],[["AM","PM"],by,by],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],by,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],by,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",by,"{1} 'at' {0}",by],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Rse(n){const e=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===i?1:5}],Ose=["modalContent"];function kse(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"mwl-calendar-month-view",10),l.NdJ("dayClicked",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.dayClicked(r.day))}),l.qZA()}if(2&n){const e=l.oxw();l.Q6J("locale",e.locale)("viewDate",e.viewDate)("events",e.events)("refresh",e.refresh)("activeDayIsOpen",e.activeDayIsOpen)}}function Pse(n,t){if(1&n&&l._UZ(0,"mwl-calendar-week-view",11),2&n){const e=l.oxw();l.Q6J("locale",e.locale)("viewDate",e.viewDate)("events",e.events)("refresh",e.refresh)}}function Fse(n,t){if(1&n&&l._UZ(0,"mwl-calendar-day-view",11),2&n){const e=l.oxw();l.Q6J("locale",e.locale)("viewDate",e.viewDate)("events",e.events)("refresh",e.refresh)}}Ls(Fz);const wO_red={primary:"#ad2121",secondary:"#FAE3E3"},wO_blue={primary:"#1e90ff",secondary:"#D1E8FF"},wO_yellow={primary:"#e3bc08",secondary:"#FDF1BA"};let Lz=(()=>{class n{constructor(e){this.modal=e,this.locale="en",this.view=qf.Month,this.CalendarView=qf,this.viewDate=new Date,this.refresh=new Qt.x,this.events=[{start:BS(Cu(new Date),1),end:my(new Date,1),title:"A 3 day event",color:{...wO_red},allDay:!0},{start:Cu(new Date),title:"An event with no end date",color:{...wO_yellow}},{start:BS(VS(new Date),3),end:my(VS(new Date),3),title:"A long event that spans 2 months",color:{...wO_blue},allDay:!0},{start:US(Cu(new Date),2),end:US(new Date,2),title:"A draggable and resizable event",color:{...wO_yellow}}],this.activeDayIsOpen=!0}dayClicked({date:e,events:i}){mB(e,this.viewDate)&&(this.activeDayIsOpen=!(_B(this.viewDate,e)&&!0===this.activeDayIsOpen||0===i.length),this.viewDate=e)}setView(e){this.view=e}closeOpenMonthViewDay(){this.activeDayIsOpen=!1}static#e=this.\u0275fac=function(i){return new(i||n)(l.Y36(G2))};static#t=this.\u0275cmp=l.Xpm({type:n,selectors:[["app-visual-appointments"]],viewQuery:function(i,r){if(1&i&&l.Gf(Ose,7),2&i){let s;l.iGM(s=l.CRH())&&(r.modalContent=s.first)}},decls:27,vars:20,consts:[[1,"row","text-center"],[1,"col-md-4"],[1,"btn-group"],["mwlCalendarPreviousView","",1,"btn","btn-dark",3,"view","viewDate","viewDateChange"],["mwlCalendarToday","",1,"btn","btn-outline-secondary",3,"viewDate","viewDateChange"],["mwlCalendarNextView","",1,"btn","btn-dark",3,"view","viewDate","viewDateChange"],[1,"btn","btn-dark",3,"click"],[3,"ngSwitch"],[3,"locale","viewDate","events","refresh","activeDayIsOpen","dayClicked",4,"ngSwitchCase"],[3,"locale","viewDate","events","refresh",4,"ngSwitchCase"],[3,"locale","viewDate","events","refresh","activeDayIsOpen","dayClicked"],[3,"locale","viewDate","events","refresh"]],template:function(i,r){1&i&&(l._UZ(0,"br"),l.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3),l.NdJ("viewDateChange",function(c){return r.viewDate=c})("viewDateChange",function(){return r.closeOpenMonthViewDay()}),l._uU(5," Previous "),l.qZA(),l.TgZ(6,"div",4),l.NdJ("viewDateChange",function(c){return r.viewDate=c}),l._uU(7," Today "),l.qZA(),l.TgZ(8,"div",5),l.NdJ("viewDateChange",function(c){return r.viewDate=c})("viewDateChange",function(){return r.closeOpenMonthViewDay()}),l._uU(9," Next "),l.qZA()()(),l.TgZ(10,"div",1)(11,"h3"),l._uU(12),l.ALo(13,"calendarDate"),l.qZA()(),l.TgZ(14,"div",1)(15,"div",2)(16,"div",6),l.NdJ("click",function(){return r.setView(r.CalendarView.Month)}),l._uU(17," Month "),l.qZA(),l.TgZ(18,"div",6),l.NdJ("click",function(){return r.setView(r.CalendarView.Week)}),l._uU(19," Week "),l.qZA(),l.TgZ(20,"div",6),l.NdJ("click",function(){return r.setView(r.CalendarView.Day)}),l._uU(21," Day "),l.qZA()()()(),l._UZ(22,"br"),l.TgZ(23,"div",7),l.YNc(24,kse,1,5,"mwl-calendar-month-view",8),l.YNc(25,Pse,1,4,"mwl-calendar-week-view",9),l.YNc(26,Fse,1,4,"mwl-calendar-day-view",9),l.qZA()),2&i&&(l.xp6(4),l.Q6J("view",r.view)("viewDate",r.viewDate),l.xp6(2),l.Q6J("viewDate",r.viewDate),l.xp6(2),l.Q6J("view",r.view)("viewDate",r.viewDate),l.xp6(4),l.Oqu(l.Dn7(13,16,r.viewDate,r.view+"ViewTitle","en")),l.xp6(4),l.ekj("active",r.view===r.CalendarView.Month),l.xp6(2),l.ekj("active",r.view===r.CalendarView.Week),l.xp6(2),l.ekj("active",r.view===r.CalendarView.Day),l.xp6(3),l.Q6J("ngSwitch",r.view),l.xp6(1),l.Q6J("ngSwitchCase",r.CalendarView.Month),l.xp6(1),l.Q6J("ngSwitchCase",r.CalendarView.Week),l.xp6(1),l.Q6J("ngSwitchCase",r.CalendarView.Day))},dependencies:[ka,Su,gse,mse,_se,Ese,kz,Nse,zS]})}return n})(),Lse=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=l.Xpm({type:n,selectors:[["app-dashboard"]],decls:2,vars:0,consts:[[2,"height","20%"]],template:function(i,r){1&i&&(l.TgZ(0,"div",0),l._UZ(1,"app-visual-appointments"),l.qZA())},dependencies:[Lz]})}return n})();const Bse=["modalContent"];Ls(Fz);const bO_red={primary:"#ad2121",secondary:"#FAE3E3"},bO_blue={primary:"#1e90ff",secondary:"#D1E8FF"},bO_yellow={primary:"#e3bc08",secondary:"#FDF1BA"};let Vse=(()=>{class n{constructor(e){this.modal=e,this.locale="en",this.view=qf.Month,this.CalendarView=qf,this.viewDate=new Date,this.refresh=new Qt.x,this.events=[{start:BS(Cu(new Date),1),end:my(new Date,1),title:"A 3 day event",color:{...bO_red},allDay:!0},{start:Cu(new Date),title:"An event with no end date",color:{...bO_yellow}},{start:BS(VS(new Date),3),end:my(VS(new Date),3),title:"A long event that spans 2 months",color:{...bO_blue},allDay:!0},{start:US(Cu(new Date),2),end:US(new Date,2),title:"A draggable and resizable event",color:{...bO_yellow}}],this.activeDayIsOpen=!0}dayClicked({date:e,events:i}){mB(e,this.viewDate)&&(this.activeDayIsOpen=!(_B(this.viewDate,e)&&!0===this.activeDayIsOpen||0===i.length),this.viewDate=e)}setView(e){this.view=e}closeOpenMonthViewDay(){this.activeDayIsOpen=!1}static#e=this.\u0275fac=function(i){return new(i||n)(l.Y36(G2))};static#t=this.\u0275cmp=l.Xpm({type:n,selectors:[["app-controller-appointments"]],viewQuery:function(i,r){if(1&i&&l.Gf(Bse,7),2&i){let s;l.iGM(s=l.CRH())&&(r.modalContent=s.first)}},decls:2,vars:0,template:function(i,r){1&i&&(l.TgZ(0,"p"),l._uU(1,"Controller appointments"),l.qZA())}})}return n})();const Use=[{path:"",component:tie},{path:"dashboard",component:Lse},{path:"appointments",component:(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=l.Xpm({type:n,selectors:[["app-appointments"]],decls:2,vars:0,template:function(i,r){1&i&&l._UZ(0,"app-visual-appointments")(1,"app-controller-appointments")},dependencies:[Vse,Lz]})}return n})()},{path:"client",component:(()=>{class n{onKeyDown(e){"Enter"===e.key&&e.target instanceof HTMLInputElement&&alert("Searching client...")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=l.Xpm({type:n,selectors:[["app-clients-page"]],decls:70,vars:0,consts:[[1,"module"],["id","searchClient","type","text","placeholder","John Doe",1,"searchBar",3,"keydown"],[1,"whiteButton"],[2,"column-count","2"],["src","/assets/img/userProfileImage.jpg",2,"width","250px"],[2,"text-align","left"],[2,"font-weight","bold"],[2,"margin-top","40px"]],template:function(i,r){1&i&&(l.TgZ(0,"div")(1,"h1"),l._uU(2,"Clients"),l.qZA()(),l.TgZ(3,"div",0)(4,"h2"),l._uU(5,"Search clients"),l.qZA(),l.TgZ(6,"input",1),l.NdJ("keydown",function(c){return r.onKeyDown(c)}),l.qZA()(),l.TgZ(7,"div",0)(8,"h2"),l._uU(9,"Recent clients"),l.qZA(),l.TgZ(10,"table")(11,"tr")(12,"th")(13,"button",2)(14,"div",3)(15,"div"),l._UZ(16,"img",4),l.qZA(),l.TgZ(17,"div",5)(18,"p",6),l._uU(19,"John Doe"),l.qZA(),l.TgZ(20,"ul")(21,"li"),l._uU(22,"Pets: Tooby, Linda"),l.qZA(),l.TgZ(23,"li"),l._uU(24,"Last visit: 10/11/2023"),l.qZA()()()()()(),l.TgZ(25,"th")(26,"button",2)(27,"div",3)(28,"div"),l._UZ(29,"img",4),l.qZA(),l.TgZ(30,"div",5)(31,"p",6),l._uU(32,"John Doe"),l.qZA(),l.TgZ(33,"ul")(34,"li"),l._uU(35,"Pets: Tooby, Linda"),l.qZA(),l.TgZ(36,"li"),l._uU(37,"Last visit: 10/11/2023"),l.qZA()()()()()()()(),l.TgZ(38,"table",7)(39,"tr")(40,"th")(41,"button",2)(42,"div",3)(43,"div"),l._UZ(44,"img",4),l.qZA(),l.TgZ(45,"div",5)(46,"p",6),l._uU(47,"John Doe"),l.qZA(),l.TgZ(48,"ul")(49,"li"),l._uU(50,"Pets: Tooby, Linda"),l.qZA(),l.TgZ(51,"li"),l._uU(52,"Last visit: 10/11/2023"),l.qZA()()()()()(),l.TgZ(53,"th")(54,"button",2)(55,"div",3)(56,"div"),l._UZ(57,"img",4),l.qZA(),l.TgZ(58,"div",5)(59,"p",6),l._uU(60,"John Doe"),l.qZA(),l.TgZ(61,"ul")(62,"li"),l._uU(63,"Pets: Tooby, Linda"),l.qZA(),l.TgZ(64,"li"),l._uU(65,"Last visit: 10/11/2023"),l.qZA()()()()()()()(),l._UZ(66,"br")(67,"br")(68,"br")(69,"br"),l.qZA())},styles:[".searchBar[_ngcontent-%COMP%]{width:100%;border-radius:20px;padding:5px;border-color:transparent;background-image:url(/assets/img/searchIco.png);background-size:20px;background-repeat:no-repeat;background-position:right center}.module[_ngcontent-%COMP%]{margin-top:30px}.whiteButton[_ngcontent-%COMP%]{border-color:transparent;background-color:#fff;padding:20px;border-radius:20px;width:550px;margin-right:50px;box-shadow:#959da533 0 8px 24px}.whiteButton[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:20px}"]})}return n})()}];let Hse=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=l.oAB({type:n});static#n=this.\u0275inj=l.cJS({imports:[ez.forRoot(Use),ez]})}return n})();const jse=[[["","icon",""]],"*"],Gse=["[icon]","*"];let $se=(()=>{class n{constructor(){this.routerLinkActiveOptions={exact:!1}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=l.Xpm({type:n,selectors:[["app-sidenav-link"]],inputs:{routerLink:"routerLink",routerLinkActiveOptions:"routerLinkActiveOptions"},ngContentSelectors:Gse,decls:5,vars:2,consts:[["routerLinkActive","active",3,"routerLink","routerLinkActiveOptions"],[1,"text-container"]],template:function(i,r){1&i&&(l.F$t(jse),l.TgZ(0,"a",0)(1,"span"),l.Hsn(2),l.qZA(),l.TgZ(3,"span",1),l.Hsn(4,1),l.qZA()()),2&i&&l.Q6J("routerLink",r.routerLink)("routerLinkActiveOptions",r.routerLinkActiveOptions)},dependencies:[LS,W6],styles:["a[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;gap:8px;min-width:200px;padding:16px;background-color:#2d6f28;font-weight:700;color:#afeebb;box-sizing:border-box;text-decoration:none;border-radius:0;transition:background-color 275ms ease-out}a[_ngcontent-%COMP%]   .text-container[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}a.active[_ngcontent-%COMP%]{background-color:#2d6f28;font-weight:700;color:#afeebb}a.inactive[_ngcontent-%COMP%]{background-color:#afeebb;font-weight:700;color:#2d6f28}a[_ngcontent-%COMP%]:hover{background-color:#afeebb;color:#2d6f28}"]})}return n})(),zse=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=l.Xpm({type:n,selectors:[["app-header"]],decls:6,vars:0,consts:[["id","header"],[2,"display","grid"],[1,"hTittle"],[2,"text-align","right","padding-right","40px"],["src","/assets/user-icon.png","alt",""]],template:function(i,r){1&i&&(l.TgZ(0,"div",0)(1,"div",1)(2,"span",2),l._uU(3," PetGuardian "),l.qZA()(),l.TgZ(4,"div",3),l._UZ(5,"img",4),l.qZA()())}})}return n})();function Wse(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div"),l._UZ(1,"app-header"),l.TgZ(2,"app-sidenav-link",1)(3,"span"),l._uU(4,"Home"),l.qZA()(),l.TgZ(5,"app-sidenav-link",2)(6,"span"),l._uU(7,"Appointments"),l.qZA()(),l.TgZ(8,"app-sidenav-link",3)(9,"span"),l._uU(10,"Clients"),l.qZA()(),l.TgZ(11,"app-sidenav-link",4),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.logout())}),l.TgZ(12,"span"),l._uU(13,"Logout "),l.qZA()()()}}let qse=(()=>{class n{constructor(e,i,r){this.afAuth=e,this.router=i,this.storageService=r,this.isLoggedIn$=this.storageService.isLoggedIn,this.subscription=this.storageService.isLoggedIn.subscribe(s=>{0==s&&this.router.navigate(["/"])})}logout(){this.afAuth.signOut().then(()=>{this.storageService.isLoggedNext(!1),this.router.navigate(["/"])})}static#e=this.\u0275fac=function(i){return new(i||n)(l.Y36(ld),l.Y36(xa),l.Y36(nz))};static#t=this.\u0275cmp=l.Xpm({type:n,selectors:[["app-side-nav"]],decls:2,vars:3,consts:[[4,"ngIf"],["routerLink","dashboard"],["routerLink","appointments"],["routerLink","client"],["routerLink","client",3,"click"]],template:function(i,r){1&i&&(l.YNc(0,Wse,14,0,"div",0),l.ALo(1,"async")),2&i&&l.Q6J("ngIf",l.lcZ(1,1,r.isLoggedIn$))},dependencies:[Mi,LS,$se,zse,Fa],styles:["[_nghost-%COMP%]{height:100vh;width:var(--sidenav-width);box-sizing:border-box;position:sticky;top:0;background-color:#2d6f28}"]})}return n})(),Yse=(()=>{class n{constructor(){this.title="petguardian-web"}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=l.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"content"]],template:function(i,r){1&i&&(l._UZ(0,"app-side-nav"),l.TgZ(1,"div",0),l._UZ(2,"router-outlet"),l.qZA())},dependencies:[oB,qse],styles:["[_ngcontent-%COMP%]:root{--sidenav-width: 300px}[_nghost-%COMP%]{min-height:100vh;display:flex;flex-direction:row}.content[_ngcontent-%COMP%]{flex-grow:1;padding:15px;background-color:#ededed}"]})}return n})();var Bz=F(7582),Zse=6e4;function Kse(n,t){return pn(2,arguments),gB(n,po(t)*Zse)}function Qse(n,t){return pn(2,arguments),gB(n,1e3*po(t))}function Vz(n){var t=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return t.setUTCFullYear(n.getFullYear()),n.getTime()-t.getTime()}var Jse=864e5;function Uz(n,t){var e=n.getFullYear()-t.getFullYear()||n.getMonth()-t.getMonth()||n.getDate()-t.getDate()||n.getHours()-t.getHours()||n.getMinutes()-t.getMinutes()||n.getSeconds()-t.getSeconds()||n.getMilliseconds()-t.getMilliseconds();return e<0?-1:e>0?1:e}function eoe(n,t){pn(2,arguments);var e=ni(n),i=ni(t),r=Uz(e,i),s=Math.abs(function Xse(n,t){pn(2,arguments);var e=Cu(n),i=Cu(t),r=e.getTime()-Vz(e),s=i.getTime()-Vz(i);return Math.round((r-s)/Jse)}(e,i));e.setDate(e.getDate()-r*s);var d=r*(s-+(Uz(e,i)===-r));return 0===d?0:d}Math.pow(10,8);var ioe=6e4;function jz(n,t){return pn(2,arguments),ni(n).getTime()-ni(t).getTime()}var Gz={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},aoe="trunc";function $z(n){return n?Gz[n]:Gz[aoe]}function loe(n,t,e){pn(2,arguments);var i=jz(n,t)/ioe;return $z(e?.roundingMethod)(i)}function coe(n,t,e){pn(2,arguments);var i=jz(n,t)/1e3;return $z(e?.roundingMethod)(i)}function uoe(n){pn(1,arguments);var t=ni(n);return t.setHours(23,59,59,999),t}var zz={};function Wz(){return zz}function doe(n,t){var e,i,r,s,c,d,p,m;pn(1,arguments);var y=Wz(),T=po(null!==(e=null!==(i=null!==(r=null!==(s=t?.weekStartsOn)&&void 0!==s?s:null==t||null===(c=t.locale)||void 0===c||null===(d=c.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==r?r:y.weekStartsOn)&&void 0!==i?i:null===(p=y.locale)||void 0===p||null===(m=p.options)||void 0===m?void 0:m.weekStartsOn)&&void 0!==e?e:0);if(!(T>=0&&T<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var A=ni(n),x=A.getDay(),P=6+(x<T?-7:0)-(x-T);return A.setDate(A.getDate()+P),A.setHours(23,59,59,999),A}function hoe(n){return pn(1,arguments),ni(n).getDay()}function foe(n){return pn(1,arguments),ni(n).getMonth()}function qz(n){pn(1,arguments);var t=ni(n);return t.setMilliseconds(0),t}function poe(n,t){pn(2,arguments);var e=qz(n),i=qz(t);return e.getTime()===i.getTime()}function goe(n){var t,e;if(pn(1,arguments),n&&"function"==typeof n.forEach)t=n;else{if("object"!==aO(n)||null===n)return new Date(NaN);t=Array.prototype.slice.call(n)}return t.forEach(function(i){var r=ni(i);(void 0===e||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function moe(n,t){pn(2,arguments);var e=ni(n),i=po(t);return e.setHours(i),e}function _oe(n,t){pn(2,arguments);var e=ni(n),i=po(t);return e.setMinutes(i),e}function voe(n){pn(1,arguments);var t=ni(n);return t.setSeconds(0,0),t}function yoe(n){pn(1,arguments);var t=ni(n);return t.setDate(1),t.setHours(0,0,0,0),t}function Yz(n,t){var e,i,r,s,c,d,p,m;pn(1,arguments);var y=Wz(),T=po(null!==(e=null!==(i=null!==(r=null!==(s=t?.weekStartsOn)&&void 0!==s?s:null==t||null===(c=t.locale)||void 0===c||null===(d=c.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==r?r:y.weekStartsOn)&&void 0!==i?i:null===(p=y.locale)||void 0===p||null===(m=p.options)||void 0===m?void 0:m.weekStartsOn)&&void 0!==e?e:0);if(!(T>=0&&T<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var A=ni(n),x=A.getDay(),P=(x<T?7:0)+x-T;return A.setDate(A.getDate()-P),A.setHours(0,0,0,0),A}function woe(n){return pn(1,arguments),ni(n).getHours()}function boe(n){return pn(1,arguments),ni(n).getMinutes()}function Doe(n){return new Date(n).getTimezoneOffset()}function Zz(n,t){return pn(2,arguments),my(n,7*po(t))}function Kz(n,t){pn(2,arguments);var e=ni(n),i=po(t);if(isNaN(i))return new Date(NaN);if(!i)return e;var r=e.getDate(),s=new Date(e.getTime());return s.setMonth(e.getMonth()+i+1,0),r>=s.getDate()?s:(e.setFullYear(s.getFullYear(),s.getMonth(),r),e)}function Coe(n,t){return pn(2,arguments),Zz(n,-po(t))}function Toe(n,t){return pn(2,arguments),Kz(n,-po(t))}function DO(n){return pn(1,arguments),Yz(n,{weekStartsOn:1})}var Aoe=6048e5;function Moe(n){pn(1,arguments);var t=ni(n),e=DO(t).getTime()-function Soe(n){pn(1,arguments);var t=function Ioe(n){pn(1,arguments);var t=ni(n),e=t.getFullYear(),i=new Date(0);i.setFullYear(e+1,0,4),i.setHours(0,0,0,0);var r=DO(i),s=new Date(0);s.setFullYear(e,0,4),s.setHours(0,0,0,0);var c=DO(s);return t.getTime()>=r.getTime()?e+1:t.getTime()>=c.getTime()?e:e-1}(n),e=new Date(0);return e.setFullYear(t,0,4),e.setHours(0,0,0,0),DO(e)}(t).getTime();return Math.round(e/Aoe)+1}function Noe(n,t){pn(2,arguments);var e=ni(n),i=po(t);return e.setDate(i),e}function Roe(n,t){pn(2,arguments);var e=ni(n),i=po(t),r=e.getFullYear(),s=e.getDate(),c=new Date(0);c.setFullYear(r,i,15),c.setHours(0,0,0,0);var d=function xoe(n){pn(1,arguments);var t=ni(n),e=t.getFullYear(),i=t.getMonth(),r=new Date(0);return r.setFullYear(e,i+1,0),r.setHours(0,0,0,0),r.getDate()}(c);return e.setMonth(i,Math.min(s,d)),e}function Ooe(n,t){pn(2,arguments);var e=ni(n),i=po(t);return isNaN(e.getTime())?new Date(NaN):(e.setFullYear(i),e)}function koe(n){return pn(1,arguments),ni(n).getDate()}function Poe(n){return pn(1,arguments),ni(n).getFullYear()}function Foe(){return(0,Bz.pi)((0,Bz.pi)({},function Eoe(){return{addDays:my,addHours:US,addMinutes:Kse,addSeconds:Qse,differenceInDays:eoe,differenceInMinutes:loe,differenceInSeconds:coe,endOfDay:uoe,endOfMonth:VS,endOfWeek:doe,getDay:hoe,getMonth:foe,isSameDay:_B,isSameMonth:mB,isSameSecond:poe,max:goe,setHours:moe,setMinutes:_oe,startOfDay:Cu,startOfMinute:voe,startOfMonth:yoe,startOfWeek:Yz,getHours:woe,getMinutes:boe,getTimezoneOffset:Doe}}()),{addWeeks:Zz,addMonths:Kz,subDays:BS,subWeeks:Coe,subMonths:Toe,getISOWeek:Moe,setDate:Noe,setMonth:Roe,setYear:Ooe,getDate:koe,getYear:Poe})}let Loe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=l.oAB({type:n,bootstrap:[Yse]});static#n=this.\u0275inj=l.cJS({imports:[si.hO.initializeApp(xee_firebase),Qy,zn,YZ.forRoot(),V$,vY,yY,o4,m_,m9,Hu,Hse,LZ,jY.forRoot(),xse.forRoot({provide:Yf,useFactory:Foe})]})}return n})();pr().bootstrapModule(Loe).catch(n=>console.error(n))},9706:()=>{"function"!=typeof Object.assign&&(Object.assign=function(Ct){for(var Ne=[],F=1;F<arguments.length;F++)Ne[F-1]=arguments[F];if(!Ct)throw TypeError("Cannot convert undefined or null to object");for(var l=function(he){he&&Object.keys(he).forEach(function(ve){return Ct[ve]=he[ve]})},ne=0,B=Ne;ne<B.length;ne++)l(B[ne]);return Ct})},5619:(Ct,Ne,F)=>{F.d(Ne,{X:()=>ne});var l=F(8645);class ne extends l.x{constructor(ie){super(),this._value=ie}get value(){return this.getValue()}_subscribe(ie){const he=super._subscribe(ie);return!he.closed&&ie.next(this._value),he}getValue(){const{hasError:ie,thrownError:he,_value:ve}=this;if(ie)throw he;return this._throwIfClosed(),ve}next(ie){super.next(this._value=ie)}}},5592:(Ct,Ne,F)=>{F.d(Ne,{y:()=>He});var l=F(305),ne=F(7394),B=F(4850),ie=F(8407),he=F(2653),ve=F(4674),Ae=F(1441);let He=(()=>{class ae{constructor(Ve){Ve&&(this._subscribe=Ve)}lift(Ve){const st=new ae;return st.source=this,st.operator=Ve,st}subscribe(Ve,st,$e){const ot=function Z(ae){return ae&&ae instanceof l.Lv||function $(ae){return ae&&(0,ve.m)(ae.next)&&(0,ve.m)(ae.error)&&(0,ve.m)(ae.complete)}(ae)&&(0,ne.Nn)(ae)}(Ve)?Ve:new l.Hp(Ve,st,$e);return(0,Ae.x)(()=>{const{operator:ze,source:Rt}=this;ot.add(ze?ze.call(ot,Rt):Rt?this._subscribe(ot):this._trySubscribe(ot))}),ot}_trySubscribe(Ve){try{return this._subscribe(Ve)}catch(st){Ve.error(st)}}forEach(Ve,st){return new(st=we(st))(($e,ot)=>{const ze=new l.Hp({next:Rt=>{try{Ve(Rt)}catch(Nt){ot(Nt),ze.unsubscribe()}},error:ot,complete:$e});this.subscribe(ze)})}_subscribe(Ve){var st;return null===(st=this.source)||void 0===st?void 0:st.subscribe(Ve)}[B.L](){return this}pipe(...Ve){return(0,ie.U)(Ve)(this)}toPromise(Ve){return new(Ve=we(Ve))((st,$e)=>{let ot;this.subscribe(ze=>ot=ze,ze=>$e(ze),()=>st(ot))})}}return ae.create=Ze=>new ae(Ze),ae})();function we(ae){var Ze;return null!==(Ze=ae??he.config.Promise)&&void 0!==Ze?Ze:Promise}},8645:(Ct,Ne,F)=>{F.d(Ne,{x:()=>Ae});var l=F(5592),ne=F(7394);const ie=(0,F(2306).d)(we=>function(){we(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var he=F(9039),ve=F(1441);let Ae=(()=>{class we extends l.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Z){const ae=new He(this,this);return ae.operator=Z,ae}_throwIfClosed(){if(this.closed)throw new ie}next(Z){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ae of this.currentObservers)ae.next(Z)}})}error(Z){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Z;const{observers:ae}=this;for(;ae.length;)ae.shift().error(Z)}})}complete(){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Z}=this;for(;Z.length;)Z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Z;return(null===(Z=this.observers)||void 0===Z?void 0:Z.length)>0}_trySubscribe(Z){return this._throwIfClosed(),super._trySubscribe(Z)}_subscribe(Z){return this._throwIfClosed(),this._checkFinalizedStatuses(Z),this._innerSubscribe(Z)}_innerSubscribe(Z){const{hasError:ae,isStopped:Ze,observers:Ve}=this;return ae||Ze?ne.Lc:(this.currentObservers=null,Ve.push(Z),new ne.w0(()=>{this.currentObservers=null,(0,he.P)(Ve,Z)}))}_checkFinalizedStatuses(Z){const{hasError:ae,thrownError:Ze,isStopped:Ve}=this;ae?Z.error(Ze):Ve&&Z.complete()}asObservable(){const Z=new l.y;return Z.source=this,Z}}return we.create=($,Z)=>new He($,Z),we})();class He extends Ae{constructor($,Z){super(),this.destination=$,this.source=Z}next($){var Z,ae;null===(ae=null===(Z=this.destination)||void 0===Z?void 0:Z.next)||void 0===ae||ae.call(Z,$)}error($){var Z,ae;null===(ae=null===(Z=this.destination)||void 0===Z?void 0:Z.error)||void 0===ae||ae.call(Z,$)}complete(){var $,Z;null===(Z=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===Z||Z.call($)}_subscribe($){var Z,ae;return null!==(ae=null===(Z=this.source)||void 0===Z?void 0:Z.subscribe($))&&void 0!==ae?ae:ne.Lc}}},305:(Ct,Ne,F)=>{F.d(Ne,{Hp:()=>$e,Lv:()=>ae});var l=F(4674),ne=F(7394),B=F(2653),ie=F(3894),he=F(2420);const ve=we("C",void 0,void 0);function we(pe,xe,fe){return{kind:pe,value:xe,error:fe}}var $=F(7599),Z=F(1441);class ae extends ne.w0{constructor(xe){super(),this.isStopped=!1,xe?(this.destination=xe,(0,ne.Nn)(xe)&&xe.add(this)):this.destination=Nt}static create(xe,fe,Pe){return new $e(xe,fe,Pe)}next(xe){this.isStopped?Rt(function He(pe){return we("N",pe,void 0)}(xe),this):this._next(xe)}error(xe){this.isStopped?Rt(function Ae(pe){return we("E",void 0,pe)}(xe),this):(this.isStopped=!0,this._error(xe))}complete(){this.isStopped?Rt(ve,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(xe){this.destination.next(xe)}_error(xe){try{this.destination.error(xe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ze=Function.prototype.bind;function Ve(pe,xe){return Ze.call(pe,xe)}class st{constructor(xe){this.partialObserver=xe}next(xe){const{partialObserver:fe}=this;if(fe.next)try{fe.next(xe)}catch(Pe){ot(Pe)}}error(xe){const{partialObserver:fe}=this;if(fe.error)try{fe.error(xe)}catch(Pe){ot(Pe)}else ot(xe)}complete(){const{partialObserver:xe}=this;if(xe.complete)try{xe.complete()}catch(fe){ot(fe)}}}class $e extends ae{constructor(xe,fe,Pe){let We;if(super(),(0,l.m)(xe)||!xe)We={next:xe??void 0,error:fe??void 0,complete:Pe??void 0};else{let ge;this&&B.config.useDeprecatedNextContext?(ge=Object.create(xe),ge.unsubscribe=()=>this.unsubscribe(),We={next:xe.next&&Ve(xe.next,ge),error:xe.error&&Ve(xe.error,ge),complete:xe.complete&&Ve(xe.complete,ge)}):We=xe}this.destination=new st(We)}}function ot(pe){B.config.useDeprecatedSynchronousErrorHandling?(0,Z.O)(pe):(0,ie.h)(pe)}function Rt(pe,xe){const{onStoppedNotification:fe}=B.config;fe&&$.z.setTimeout(()=>fe(pe,xe))}const Nt={closed:!0,next:he.Z,error:function ze(pe){throw pe},complete:he.Z}},7394:(Ct,Ne,F)=>{F.d(Ne,{Lc:()=>ve,w0:()=>he,Nn:()=>Ae});var l=F(4674);const B=(0,F(2306).d)(we=>function(Z){we(this),this.message=Z?`${Z.length} errors occurred during unsubscription:\n${Z.map((ae,Ze)=>`${Ze+1}) ${ae.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Z});var ie=F(9039);class he{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:Z}=this;if(Z)if(this._parentage=null,Array.isArray(Z))for(const Ve of Z)Ve.remove(this);else Z.remove(this);const{initialTeardown:ae}=this;if((0,l.m)(ae))try{ae()}catch(Ve){$=Ve instanceof B?Ve.errors:[Ve]}const{_finalizers:Ze}=this;if(Ze){this._finalizers=null;for(const Ve of Ze)try{He(Ve)}catch(st){$=$??[],st instanceof B?$=[...$,...st.errors]:$.push(st)}}if($)throw new B($)}}add($){var Z;if($&&$!==this)if(this.closed)He($);else{if($ instanceof he){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(Z=this._finalizers)&&void 0!==Z?Z:[]).push($)}}_hasParent($){const{_parentage:Z}=this;return Z===$||Array.isArray(Z)&&Z.includes($)}_addParent($){const{_parentage:Z}=this;this._parentage=Array.isArray(Z)?(Z.push($),Z):Z?[Z,$]:$}_removeParent($){const{_parentage:Z}=this;Z===$?this._parentage=null:Array.isArray(Z)&&(0,ie.P)(Z,$)}remove($){const{_finalizers:Z}=this;Z&&(0,ie.P)(Z,$),$ instanceof he&&$._removeParent(this)}}he.EMPTY=(()=>{const we=new he;return we.closed=!0,we})();const ve=he.EMPTY;function Ae(we){return we instanceof he||we&&"closed"in we&&(0,l.m)(we.remove)&&(0,l.m)(we.add)&&(0,l.m)(we.unsubscribe)}function He(we){(0,l.m)(we)?we():we.unsubscribe()}},2653:(Ct,Ne,F)=>{F.d(Ne,{config:()=>l});const l={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(Ct,Ne,F)=>{F.d(Ne,{E:()=>ne});const ne=new(F(5592).y)(he=>he.complete())},2459:(Ct,Ne,F)=>{F.d(Ne,{D:()=>xe});var l=F(4829),ne=F(3093),B=F(5137),ve=F(5592),He=F(4971),we=F(4674),$=F(7103);function ae(fe,Pe){if(!fe)throw new Error("Iterable cannot be null");return new ve.y(We=>{(0,$.f)(We,Pe,()=>{const ge=fe[Symbol.asyncIterator]();(0,$.f)(We,Pe,()=>{ge.next().then(X=>{X.done?We.complete():We.next(X.value)})},0,!0)})})}var Ze=F(8382),Ve=F(4026),st=F(4266),$e=F(3664),ot=F(5726),ze=F(9853),Rt=F(541);function xe(fe,Pe){return Pe?function pe(fe,Pe){if(null!=fe){if((0,Ze.c)(fe))return function ie(fe,Pe){return(0,l.Xf)(fe).pipe((0,B.R)(Pe),(0,ne.Q)(Pe))}(fe,Pe);if((0,st.z)(fe))return function Ae(fe,Pe){return new ve.y(We=>{let ge=0;return Pe.schedule(function(){ge===fe.length?We.complete():(We.next(fe[ge++]),We.closed||this.schedule())})})}(fe,Pe);if((0,Ve.t)(fe))return function he(fe,Pe){return(0,l.Xf)(fe).pipe((0,B.R)(Pe),(0,ne.Q)(Pe))}(fe,Pe);if((0,ot.D)(fe))return ae(fe,Pe);if((0,$e.T)(fe))return function Z(fe,Pe){return new ve.y(We=>{let ge;return(0,$.f)(We,Pe,()=>{ge=fe[He.h](),(0,$.f)(We,Pe,()=>{let X,Je;try{({value:X,done:Je}=ge.next())}catch(kt){return void We.error(kt)}Je?We.complete():We.next(X)},0,!0)}),()=>(0,we.m)(ge?.return)&&ge.return()})}(fe,Pe);if((0,Rt.L)(fe))return function Nt(fe,Pe){return ae((0,Rt.Q)(fe),Pe)}(fe,Pe)}throw(0,ze.z)(fe)}(fe,Pe):(0,l.Xf)(fe)}},4829:(Ct,Ne,F)=>{F.d(Ne,{Xf:()=>Ze});var l=F(7582),ne=F(4266),B=F(4026),ie=F(5592),he=F(8382),ve=F(5726),Ae=F(9853),He=F(3664),we=F(541),$=F(4674),Z=F(3894),ae=F(4850);function Ze(pe){if(pe instanceof ie.y)return pe;if(null!=pe){if((0,he.c)(pe))return function Ve(pe){return new ie.y(xe=>{const fe=pe[ae.L]();if((0,$.m)(fe.subscribe))return fe.subscribe(xe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(pe);if((0,ne.z)(pe))return function st(pe){return new ie.y(xe=>{for(let fe=0;fe<pe.length&&!xe.closed;fe++)xe.next(pe[fe]);xe.complete()})}(pe);if((0,B.t)(pe))return function $e(pe){return new ie.y(xe=>{pe.then(fe=>{xe.closed||(xe.next(fe),xe.complete())},fe=>xe.error(fe)).then(null,Z.h)})}(pe);if((0,ve.D)(pe))return ze(pe);if((0,He.T)(pe))return function ot(pe){return new ie.y(xe=>{for(const fe of pe)if(xe.next(fe),xe.closed)return;xe.complete()})}(pe);if((0,we.L)(pe))return function Rt(pe){return ze((0,we.Q)(pe))}(pe)}throw(0,Ae.z)(pe)}function ze(pe){return new ie.y(xe=>{(function Nt(pe,xe){var fe,Pe,We,ge;return(0,l.mG)(this,void 0,void 0,function*(){try{for(fe=(0,l.KL)(pe);!(Pe=yield fe.next()).done;)if(xe.next(Pe.value),xe.closed)return}catch(X){We={error:X}}finally{try{Pe&&!Pe.done&&(ge=fe.return)&&(yield ge.call(fe))}finally{if(We)throw We.error}}xe.complete()})})(pe,xe).catch(fe=>xe.error(fe))})}},3019:(Ct,Ne,F)=>{F.d(Ne,{T:()=>ve});var l=F(7537),ne=F(4829),B=F(6232),ie=F(9940),he=F(2459);function ve(...Ae){const He=(0,ie.yG)(Ae),we=(0,ie._6)(Ae,1/0),$=Ae;return $.length?1===$.length?(0,ne.Xf)($[0]):(0,l.J)(we)((0,he.D)($,He)):B.E}},2096:(Ct,Ne,F)=>{F.d(Ne,{of:()=>B});var l=F(9940),ne=F(2459);function B(...ie){const he=(0,l.yG)(ie);return(0,ne.D)(ie,he)}},8251:(Ct,Ne,F)=>{F.d(Ne,{x:()=>ne});var l=F(305);function ne(ie,he,ve,Ae,He){return new B(ie,he,ve,Ae,He)}class B extends l.Lv{constructor(he,ve,Ae,He,we,$){super(he),this.onFinalize=we,this.shouldUnsubscribe=$,this._next=ve?function(Z){try{ve(Z)}catch(ae){he.error(ae)}}:super._next,this._error=He?function(Z){try{He(Z)}catch(ae){he.error(ae)}finally{this.unsubscribe()}}:super._error,this._complete=Ae?function(){try{Ae()}catch(Z){he.error(Z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var he;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ve}=this;super.unsubscribe(),!ve&&(null===(he=this.onFinalize)||void 0===he||he.call(this))}}}},3997:(Ct,Ne,F)=>{F.d(Ne,{x:()=>ie});var l=F(2737),ne=F(9360),B=F(8251);function ie(ve,Ae=l.y){return ve=ve??he,(0,ne.e)((He,we)=>{let $,Z=!0;He.subscribe((0,B.x)(we,ae=>{const Ze=Ae(ae);(Z||!ve($,Ze))&&(Z=!1,$=Ze,we.next(ae))}))})}function he(ve,Ae){return ve===Ae}},7398:(Ct,Ne,F)=>{F.d(Ne,{U:()=>B});var l=F(9360),ne=F(8251);function B(ie,he){return(0,l.e)((ve,Ae)=>{let He=0;ve.subscribe((0,ne.x)(Ae,we=>{Ae.next(ie.call(he,we,He++))}))})}},7537:(Ct,Ne,F)=>{F.d(Ne,{J:()=>B});var l=F(1631),ne=F(2737);function B(ie=1/0){return(0,l.z)(ne.y,ie)}},1631:(Ct,Ne,F)=>{F.d(Ne,{z:()=>He});var l=F(7398),ne=F(4829),B=F(9360),ie=F(7103),he=F(8251),Ae=F(4674);function He(we,$,Z=1/0){return(0,Ae.m)($)?He((ae,Ze)=>(0,l.U)((Ve,st)=>$(ae,Ve,Ze,st))((0,ne.Xf)(we(ae,Ze))),Z):("number"==typeof $&&(Z=$),(0,B.e)((ae,Ze)=>function ve(we,$,Z,ae,Ze,Ve,st,$e){const ot=[];let ze=0,Rt=0,Nt=!1;const pe=()=>{Nt&&!ot.length&&!ze&&$.complete()},xe=Pe=>ze<ae?fe(Pe):ot.push(Pe),fe=Pe=>{Ve&&$.next(Pe),ze++;let We=!1;(0,ne.Xf)(Z(Pe,Rt++)).subscribe((0,he.x)($,ge=>{Ze?.(ge),Ve?xe(ge):$.next(ge)},()=>{We=!0},void 0,()=>{if(We)try{for(ze--;ot.length&&ze<ae;){const ge=ot.shift();st?(0,ie.f)($,st,()=>fe(ge)):fe(ge)}pe()}catch(ge){$.error(ge)}}))};return we.subscribe((0,he.x)($,xe,()=>{Nt=!0,pe()})),()=>{$e?.()}}(ae,Ze,we,Z)))}},3093:(Ct,Ne,F)=>{F.d(Ne,{Q:()=>ie});var l=F(7103),ne=F(9360),B=F(8251);function ie(he,ve=0){return(0,ne.e)((Ae,He)=>{Ae.subscribe((0,B.x)(He,we=>(0,l.f)(He,he,()=>He.next(we),ve),()=>(0,l.f)(He,he,()=>He.complete(),ve),we=>(0,l.f)(He,he,()=>He.error(we),ve)))})}},3020:(Ct,Ne,F)=>{F.d(Ne,{B:()=>he});var l=F(4829),ne=F(8645),B=F(305),ie=F(9360);function he(Ae={}){const{connector:He=(()=>new ne.x),resetOnError:we=!0,resetOnComplete:$=!0,resetOnRefCountZero:Z=!0}=Ae;return ae=>{let Ze,Ve,st,$e=0,ot=!1,ze=!1;const Rt=()=>{Ve?.unsubscribe(),Ve=void 0},Nt=()=>{Rt(),Ze=st=void 0,ot=ze=!1},pe=()=>{const xe=Ze;Nt(),xe?.unsubscribe()};return(0,ie.e)((xe,fe)=>{$e++,!ze&&!ot&&Rt();const Pe=st=st??He();fe.add(()=>{$e--,0===$e&&!ze&&!ot&&(Ve=ve(pe,Z))}),Pe.subscribe(fe),!Ze&&$e>0&&(Ze=new B.Hp({next:We=>Pe.next(We),error:We=>{ze=!0,Rt(),Ve=ve(Nt,we,We),Pe.error(We)},complete:()=>{ot=!0,Rt(),Ve=ve(Nt,$),Pe.complete()}}),(0,l.Xf)(xe).subscribe(Ze))})(ae)}}function ve(Ae,He,...we){if(!0===He)return void Ae();if(!1===He)return;const $=new B.Hp({next:()=>{$.unsubscribe(),Ae()}});return(0,l.Xf)(He(...we)).subscribe($)}},5137:(Ct,Ne,F)=>{F.d(Ne,{R:()=>ne});var l=F(9360);function ne(B,ie=0){return(0,l.e)((he,ve)=>{ve.add(B.schedule(()=>he.subscribe(ve),ie))})}},4664:(Ct,Ne,F)=>{F.d(Ne,{w:()=>ie});var l=F(4829),ne=F(9360),B=F(8251);function ie(he,ve){return(0,ne.e)((Ae,He)=>{let we=null,$=0,Z=!1;const ae=()=>Z&&!we&&He.complete();Ae.subscribe((0,B.x)(He,Ze=>{we?.unsubscribe();let Ve=0;const st=$++;(0,l.Xf)(he(Ze,st)).subscribe(we=(0,B.x)(He,$e=>He.next(ve?ve(Ze,$e,st,Ve++):$e),()=>{we=null,ae()}))},()=>{Z=!0,ae()}))})}},9397:(Ct,Ne,F)=>{F.d(Ne,{b:()=>he});var l=F(4674),ne=F(9360),B=F(8251),ie=F(2737);function he(ve,Ae,He){const we=(0,l.m)(ve)||Ae||He?{next:ve,error:Ae,complete:He}:ve;return we?(0,ne.e)(($,Z)=>{var ae;null===(ae=we.subscribe)||void 0===ae||ae.call(we);let Ze=!0;$.subscribe((0,B.x)(Z,Ve=>{var st;null===(st=we.next)||void 0===st||st.call(we,Ve),Z.next(Ve)},()=>{var Ve;Ze=!1,null===(Ve=we.complete)||void 0===Ve||Ve.call(we),Z.complete()},Ve=>{var st;Ze=!1,null===(st=we.error)||void 0===st||st.call(we,Ve),Z.error(Ve)},()=>{var Ve,st;Ze&&(null===(Ve=we.unsubscribe)||void 0===Ve||Ve.call(we)),null===(st=we.finalize)||void 0===st||st.call(we)}))}):ie.y}},1954:(Ct,Ne,F)=>{F.d(Ne,{o:()=>he});var l=F(7394);class ne extends l.w0{constructor(Ae,He){super()}schedule(Ae,He=0){return this}}const B={setInterval(ve,Ae,...He){const{delegate:we}=B;return we?.setInterval?we.setInterval(ve,Ae,...He):setInterval(ve,Ae,...He)},clearInterval(ve){const{delegate:Ae}=B;return(Ae?.clearInterval||clearInterval)(ve)},delegate:void 0};var ie=F(9039);class he extends ne{constructor(Ae,He){super(Ae,He),this.scheduler=Ae,this.work=He,this.pending=!1}schedule(Ae,He=0){var we;if(this.closed)return this;this.state=Ae;const $=this.id,Z=this.scheduler;return null!=$&&(this.id=this.recycleAsyncId(Z,$,He)),this.pending=!0,this.delay=He,this.id=null!==(we=this.id)&&void 0!==we?we:this.requestAsyncId(Z,this.id,He),this}requestAsyncId(Ae,He,we=0){return B.setInterval(Ae.flush.bind(Ae,this),we)}recycleAsyncId(Ae,He,we=0){if(null!=we&&this.delay===we&&!1===this.pending)return He;null!=He&&B.clearInterval(He)}execute(Ae,He){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const we=this._execute(Ae,He);if(we)return we;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ae,He){let $,we=!1;try{this.work(Ae)}catch(Z){we=!0,$=Z||new Error("Scheduled action threw falsy error")}if(we)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:Ae,scheduler:He}=this,{actions:we}=He;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ie.P)(we,this),null!=Ae&&(this.id=this.recycleAsyncId(He,Ae,null)),this.delay=null,super.unsubscribe()}}}},2631:(Ct,Ne,F)=>{F.d(Ne,{v:()=>B});var l=F(4552);class ne{constructor(he,ve=ne.now){this.schedulerActionCtor=he,this.now=ve}schedule(he,ve=0,Ae){return new this.schedulerActionCtor(this,he).schedule(Ae,ve)}}ne.now=l.l.now;class B extends ne{constructor(he,ve=ne.now){super(he,ve),this.actions=[],this._active=!1}flush(he){const{actions:ve}=this;if(this._active)return void ve.push(he);let Ae;this._active=!0;do{if(Ae=he.execute(he.state,he.delay))break}while(he=ve.shift());if(this._active=!1,Ae){for(;he=ve.shift();)he.unsubscribe();throw Ae}}}},6321:(Ct,Ne,F)=>{F.d(Ne,{P:()=>ie,z:()=>B});var l=F(1954);const B=new(F(2631).v)(l.o),ie=B},4552:(Ct,Ne,F)=>{F.d(Ne,{l:()=>l});const l={now:()=>(l.delegate||Date).now(),delegate:void 0}},7599:(Ct,Ne,F)=>{F.d(Ne,{z:()=>l});const l={setTimeout(ne,B,...ie){const{delegate:he}=l;return he?.setTimeout?he.setTimeout(ne,B,...ie):setTimeout(ne,B,...ie)},clearTimeout(ne){const{delegate:B}=l;return(B?.clearTimeout||clearTimeout)(ne)},delegate:void 0}},4971:(Ct,Ne,F)=>{F.d(Ne,{h:()=>ne});const ne=function l(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(Ct,Ne,F)=>{F.d(Ne,{L:()=>l});const l="function"==typeof Symbol&&Symbol.observable||"@@observable"},9940:(Ct,Ne,F)=>{F.d(Ne,{_6:()=>ve,jO:()=>ie,yG:()=>he});var l=F(4674),ne=F(671);function B(Ae){return Ae[Ae.length-1]}function ie(Ae){return(0,l.m)(B(Ae))?Ae.pop():void 0}function he(Ae){return(0,ne.K)(B(Ae))?Ae.pop():void 0}function ve(Ae,He){return"number"==typeof B(Ae)?Ae.pop():He}},9039:(Ct,Ne,F)=>{function l(ne,B){if(ne){const ie=ne.indexOf(B);0<=ie&&ne.splice(ie,1)}}F.d(Ne,{P:()=>l})},2306:(Ct,Ne,F)=>{function l(ne){const ie=ne(he=>{Error.call(he),he.stack=(new Error).stack});return ie.prototype=Object.create(Error.prototype),ie.prototype.constructor=ie,ie}F.d(Ne,{d:()=>l})},1441:(Ct,Ne,F)=>{F.d(Ne,{O:()=>ie,x:()=>B});var l=F(2653);let ne=null;function B(he){if(l.config.useDeprecatedSynchronousErrorHandling){const ve=!ne;if(ve&&(ne={errorThrown:!1,error:null}),he(),ve){const{errorThrown:Ae,error:He}=ne;if(ne=null,Ae)throw He}}else he()}function ie(he){l.config.useDeprecatedSynchronousErrorHandling&&ne&&(ne.errorThrown=!0,ne.error=he)}},7103:(Ct,Ne,F)=>{function l(ne,B,ie,he=0,ve=!1){const Ae=B.schedule(function(){ie(),ve?ne.add(this.schedule(null,he)):this.unsubscribe()},he);if(ne.add(Ae),!ve)return Ae}F.d(Ne,{f:()=>l})},2737:(Ct,Ne,F)=>{function l(ne){return ne}F.d(Ne,{y:()=>l})},4266:(Ct,Ne,F)=>{F.d(Ne,{z:()=>l});const l=ne=>ne&&"number"==typeof ne.length&&"function"!=typeof ne},5726:(Ct,Ne,F)=>{F.d(Ne,{D:()=>ne});var l=F(4674);function ne(B){return Symbol.asyncIterator&&(0,l.m)(B?.[Symbol.asyncIterator])}},4674:(Ct,Ne,F)=>{function l(ne){return"function"==typeof ne}F.d(Ne,{m:()=>l})},8382:(Ct,Ne,F)=>{F.d(Ne,{c:()=>B});var l=F(4850),ne=F(4674);function B(ie){return(0,ne.m)(ie[l.L])}},3664:(Ct,Ne,F)=>{F.d(Ne,{T:()=>B});var l=F(4971),ne=F(4674);function B(ie){return(0,ne.m)(ie?.[l.h])}},4026:(Ct,Ne,F)=>{F.d(Ne,{t:()=>ne});var l=F(4674);function ne(B){return(0,l.m)(B?.then)}},541:(Ct,Ne,F)=>{F.d(Ne,{L:()=>ie,Q:()=>B});var l=F(7582),ne=F(4674);function B(he){return(0,l.FC)(this,arguments,function*(){const Ae=he.getReader();try{for(;;){const{value:He,done:we}=yield(0,l.qq)(Ae.read());if(we)return yield(0,l.qq)(void 0);yield yield(0,l.qq)(He)}}finally{Ae.releaseLock()}})}function ie(he){return(0,ne.m)(he?.getReader)}},671:(Ct,Ne,F)=>{F.d(Ne,{K:()=>ne});var l=F(4674);function ne(B){return B&&(0,l.m)(B.schedule)}},9360:(Ct,Ne,F)=>{F.d(Ne,{A:()=>ne,e:()=>B});var l=F(4674);function ne(ie){return(0,l.m)(ie?.lift)}function B(ie){return he=>{if(ne(he))return he.lift(function(ve){try{return ie(ve,this)}catch(Ae){this.error(Ae)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(Ct,Ne,F)=>{function l(){}F.d(Ne,{Z:()=>l})},8407:(Ct,Ne,F)=>{F.d(Ne,{U:()=>B,z:()=>ne});var l=F(2737);function ne(...ie){return B(ie)}function B(ie){return 0===ie.length?l.y:1===ie.length?ie[0]:function(ve){return ie.reduce((Ae,He)=>He(Ae),ve)}}},3894:(Ct,Ne,F)=>{F.d(Ne,{h:()=>B});var l=F(2653),ne=F(7599);function B(ie){ne.z.setTimeout(()=>{const{onUnhandledError:he}=l.config;if(!he)throw ie;he(ie)})}},9853:(Ct,Ne,F)=>{function l(ne){return new TypeError(`You provided ${null!==ne&&"object"==typeof ne?"an invalid object":`'${ne}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Ne,{z:()=>l})},5879:(Ct,Ne,F)=>{F.d(Ne,{$8M:()=>Bc,$WT:()=>la,$Z:()=>ng,AFp:()=>tE,ALo:()=>qM,AaK:()=>ae,BQk:()=>Cd,CHM:()=>Js,CRH:()=>oN,DdM:()=>Fd,Dn7:()=>YM,EJc:()=>wv,EiD:()=>b1,EpF:()=>JE,F$t:()=>Td,F4k:()=>tu,FYo:()=>b_,FiY:()=>Pp,Gf:()=>sN,GfV:()=>j1,Gpc:()=>st,HDt:()=>eb,HTZ:()=>XC,Hh0:()=>GM,Hsn:()=>XE,Ikx:()=>EC,JOm:()=>Gc,JVY:()=>VO,JZr:()=>Nt,KtG:()=>$u,L6k:()=>UO,LAX:()=>d_,LFG:()=>Kt,LMc:()=>Li,Lbi:()=>nE,Lck:()=>FM,MAs:()=>Bt,MGl:()=>ow,MMx:()=>GC,MR2:()=>QD,NdJ:()=>Y_,Ojb:()=>tk,OlP:()=>qn,Oqu:()=>K_,P3R:()=>KD,PXZ:()=>HT,Q6J:()=>hf,QGY:()=>rw,QbO:()=>ek,Qsj:()=>Jl,R0b:()=>es,RDi:()=>ro,Rgc:()=>dv,SBq:()=>y_,SDv:()=>RM,Sil:()=>EN,Suo:()=>pT,TTD:()=>Bu,TgZ:()=>ki,Tol:()=>gf,Udp:()=>wg,VKq:()=>kg,VuI:()=>QN,W1O:()=>lN,WLB:()=>QC,X6Q:()=>IP,XFs:()=>Gt,Xpm:()=>Au,Xq5:()=>yd,Xts:()=>Wp,Y36:()=>ef,YKP:()=>UC,YNc:()=>HA,Yjl:()=>ch,Yz7:()=>xt,Z0I:()=>Bn,ZZ4:()=>pb,_Bn:()=>Rg,_UZ:()=>gg,_Vd:()=>Qh,_c5:()=>gb,_uU:()=>mf,aQg:()=>Qg,c2e:()=>xf,cJS:()=>Qn,cg1:()=>fw,d8E:()=>CC,dDg:()=>zg,dqk:()=>Vn,dwT:()=>hw,eBb:()=>$p,eFA:()=>jT,eJc:()=>gv,ekj:()=>ns,eoX:()=>LT,f3M:()=>sn,g9A:()=>F1,h0i:()=>Od,hGG:()=>iI,hij:()=>xd,iGM:()=>fT,ifc:()=>Zs,ip1:()=>Gg,jDz:()=>zC,kEZ:()=>Nw,kL8:()=>ic,l5B:()=>xw,lG2:()=>Sl,lcZ:()=>du,lqb:()=>Zl,lri:()=>sb,mCW:()=>d0,n5z:()=>Mo,oAB:()=>Fa,oJD:()=>E1,oxw:()=>nu,pB0:()=>p1,q3G:()=>Yo,q4F:()=>Jh,qFp:()=>ks,qLn:()=>Xl,qOj:()=>V_,qZA:()=>ft,qbA:()=>JC,qzn:()=>so,rFY:()=>eT,rWj:()=>kf,rg0:()=>Dh,s9C:()=>Z_,sBO:()=>YT,s_b:()=>cl,soG:()=>Rf,tb:()=>Cv,tp0:()=>ed,uIk:()=>Yn,vHH:()=>pe,vpe:()=>wa,wAp:()=>yf,xi3:()=>nT,xp6:()=>TE,ynx:()=>iw,z2F:()=>qg,z3N:()=>ps,zSh:()=>JD,zW0:()=>Q0,zs3:()=>oo});var l=F(8645),ne=F(7394),B=F(5592),ie=F(3019),he=F(5619),ve=F(2096),Ae=F(3020),He=F(4664),we=F(3997);function $(o){for(let a in o)if(o[a]===$)return a;throw Error("Could not find renamed property on target object.")}function Z(o,a){for(const u in a)a.hasOwnProperty(u)&&!o.hasOwnProperty(u)&&(o[u]=a[u])}function ae(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(ae).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const u=a.indexOf("\n");return-1===u?a:a.substring(0,u)}function Ze(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const Ve=$({__forward_ref__:$});function st(o){return o.__forward_ref__=st,o.toString=function(){return ae(this())},o}function $e(o){return ot(o)?o():o}function ot(o){return"function"==typeof o&&o.hasOwnProperty(Ve)&&o.__forward_ref__===st}function ze(o){return o&&!!o.\u0275providers}const Nt="https://g.co/ng/security#xss";class pe extends Error{constructor(a,u){super(function xe(o,a){return`NG0${Math.abs(o)}${a?": "+a:""}`}(a,u)),this.code=a}}function fe(o){return"string"==typeof o?o:null==o?"":String(o)}function Je(o,a){throw new pe(-201,!1)}function it(o,a,u,h){throw new Error(`ASSERTION ERROR: ${o}`+(null==h?"":` [Expected=> ${u} ${h} ${a} <=Actual]`))}function xt(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Qn(o){return{providers:o.providers||[],imports:o.imports||[]}}function Ei(o){return ar(o,Ai)||ar(o,_o)}function Bn(o){return null!==Ei(o)}function ar(o,a){return o.hasOwnProperty(a)?o[a]:null}function ss(o){return o&&(o.hasOwnProperty(zr)||o.hasOwnProperty(Ra))?o[zr]:null}const Ai=$({\u0275prov:$}),zr=$({\u0275inj:$}),_o=$({ngInjectableDef:$}),Ra=$({ngInjectorDef:$});var Gt=function(o){return o[o.Default=0]="Default",o[o.Host=1]="Host",o[o.Self=2]="Self",o[o.SkipSelf=4]="SkipSelf",o[o.Optional=8]="Optional",o}(Gt||{});let Yt;function Jt(o){const a=Yt;return Yt=o,a}function hi(o,a,u){const h=Ei(o);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:u&Gt.Optional?null:void 0!==a?a:void Je(ae(o))}const Vn=globalThis,et={},dt="__NG_DI_FLAG__",Ft="ngTempTokenPath",q=/\n/gm,ee="__source";let Le;function wt(o){const a=Le;return Le=o,a}function nn(o,a=Gt.Default){if(void 0===Le)throw new pe(-203,!1);return null===Le?hi(o,void 0,a):Le.get(o,a&Gt.Optional?null:void 0,a)}function Kt(o,a=Gt.Default){return(function Xt(){return Yt}()||nn)($e(o),a)}function sn(o,a=Gt.Default){return Kt(o,ji(a))}function ji(o){return typeof o>"u"||"number"==typeof o?o:0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)}function In(o){const a=[];for(let u=0;u<o.length;u++){const h=$e(o[u]);if(Array.isArray(h)){if(0===h.length)throw new pe(900,!1);let f,_=Gt.Default;for(let w=0;w<h.length;w++){const E=h[w],I=sa(E);"number"==typeof I?-1===I?f=E.token:_|=I:f=E}a.push(Kt(f,_))}else a.push(Kt(h))}return a}function br(o,a){return o[dt]=a,o.prototype[dt]=a,o}function sa(o){return o[dt]}function bo(o){return{toString:o}.toString()}var oa=function(o){return o[o.OnPush=0]="OnPush",o[o.Default=1]="Default",o}(oa||{}),Zs=function(o){return o[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",o}(Zs||{});const Ks={},vn=[],aa=$({\u0275cmp:$}),Cl=$({\u0275dir:$}),mc=$({\u0275pipe:$}),Qf=$({\u0275mod:$}),Ls=$({\u0275fac:$}),Tl=$({__NG_ELEMENT_ID__:$}),Il=$({__NG_ENV_ID__:$});function sh(o,a,u){let h=o.length;for(;;){const f=o.indexOf(a,u);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const _=a.length;if(f+_===h||o.charCodeAt(f+_)<=32)return f}u=f+1}}function as(o,a,u){let h=0;for(;h<u.length;){const f=u[h];if("number"==typeof f){if(0!==f)break;h++;const _=u[h++],w=u[h++],E=u[h++];o.setAttribute(a,w,E,_)}else{const _=f,w=u[++h];Bs(_)?o.setProperty(a,_,w):o.setAttribute(a,_,w),h++}}return h}function oh(o){return 3===o||4===o||6===o}function Bs(o){return 64===o.charCodeAt(0)}function Oa(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let u=-1;for(let h=0;h<a.length;h++){const f=a[h];"number"==typeof f?u=f:0===u||lr(o,u,f,null,-1===u||2===u?a[++h]:null)}}return o}function lr(o,a,u,h,f){let _=0,w=o.length;if(-1===a)w=-1;else for(;_<o.length;){const E=o[_++];if("number"==typeof E){if(E===a){w=-1;break}if(E>a){w=_-1;break}}}for(;_<o.length;){const E=o[_];if("number"==typeof E)break;if(E===u){if(null===h)return void(null!==f&&(o[_+1]=f));if(h===o[_+1])return void(o[_+2]=f)}_++,null!==h&&_++,null!==f&&_++}-1!==w&&(o.splice(w,0,a),_=w+1),o.splice(_++,0,u),null!==h&&o.splice(_++,0,h),null!==f&&o.splice(_++,0,f)}const ah="ng-template";function Gi(o,a,u){let h=0,f=!0;for(;h<o.length;){let _=o[h++];if("string"==typeof _&&f){const w=o[h++];if(u&&"class"===_&&-1!==sh(w.toLowerCase(),a,0))return!0}else{if(1===_){for(;h<o.length&&"string"==typeof(_=o[h++]);)if(_.toLowerCase()===a)return!0;return!1}"number"==typeof _&&(f=!1)}}return!1}function Mi(o){return 4===o.type&&o.value!==ah}function Ey(o,a,u){return a===(4!==o.type||u?o.value:ah)}function Im(o,a,u){let h=4;const f=o.attrs||[],_=function Cy(o){for(let a=0;a<o.length;a++)if(oh(o[a]))return a;return o.length}(f);let w=!1;for(let E=0;E<a.length;E++){const I=a[E];if("number"!=typeof I){if(!w)if(4&h){if(h=2|1&h,""!==I&&!Ey(o,I,u)||""===I&&1===a.length){if(ls(h))return!1;w=!0}}else{const N=8&h?I:a[++E];if(8&h&&null!==o.attrs){if(!Gi(o.attrs,N,u)){if(ls(h))return!1;w=!0}continue}const j=ka(8&h?"class":I,f,Mi(o),u);if(-1===j){if(ls(h))return!1;w=!0;continue}if(""!==N){let K;K=j>_?"":f[j+1].toLowerCase();const oe=8&h?K:null;if(oe&&-1!==sh(oe,N,0)||2&h&&N!==K){if(ls(h))return!1;w=!0}}}}else{if(!w&&!ls(h)&&!ls(I))return!1;if(w&&ls(I))continue;w=!1,h=I|1&h}}return ls(h)||w}function ls(o){return 0==(1&o)}function ka(o,a,u,h){if(null===a)return-1;let f=0;if(h||!u){let _=!1;for(;f<a.length;){const w=a[f];if(w===o)return f;if(3===w||6===w)_=!0;else{if(1===w||2===w){let E=a[++f];for(;"string"==typeof E;)E=a[++f];continue}if(4===w)break;if(0===w){f+=4;continue}}f+=_?1:2}return-1}return function Pa(o,a){let u=o.indexOf(4);if(u>-1)for(u++;u<o.length;){const h=o[u];if("number"==typeof h)return-1;if(h===a)return u;u++}return-1}(a,o)}function Su(o,a,u=!1){for(let h=0;h<a.length;h++)if(Im(o,a[h],u))return!0;return!1}function Xf(o,a){e:for(let u=0;u<a.length;u++){const h=a[u];if(o.length===h.length){for(let f=0;f<o.length;f++)if(o[f]!==h[f])continue e;return!0}}return!1}function Do(o,a){return o?":not("+a.trim()+")":a}function Qi(o){let a=o[0],u=1,h=2,f="",_=!1;for(;u<o.length;){let w=o[u];if("string"==typeof w)if(2&h){const E=o[++u];f+="["+w+(E.length>0?'="'+E+'"':"")+"]"}else 8&h?f+="."+w:4&h&&(f+=" "+w);else""!==f&&!ls(w)&&(a+=Do(_,f),f=""),h=w,_=_||!ls(h);u++}return""!==f&&(a+=Do(_,f)),a}function Au(o){return bo(()=>{const a=_c(o),u={...a,decls:o.decls,vars:o.vars,template:o.template,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,onPush:o.changeDetection===oa.OnPush,directiveDefs:null,pipeDefs:null,dependencies:a.standalone&&o.dependencies||null,getStandaloneInjector:null,signals:o.signals??!1,data:o.data||{},encapsulation:o.encapsulation||Zs.Emulated,styles:o.styles||vn,_:null,schemas:o.schemas||null,tView:null,id:""};Sm(u);const h=o.dependencies;return u.directiveDefs=vc(h,!1),u.pipeDefs=vc(h,!0),u.id=function Us(o){let a=0;const u=[o.selectors,o.ngContentSelectors,o.hostVars,o.hostAttrs,o.consts,o.vars,o.decls,o.encapsulation,o.standalone,o.signals,o.exportAs,JSON.stringify(o.inputs),JSON.stringify(o.outputs),Object.getOwnPropertyNames(o.type.prototype),!!o.contentQueries,!!o.viewQuery].join("|");for(const f of u)a=Math.imul(31,a)+f.charCodeAt(0)<<0;return a+=2147483648,"c"+a}(u),u})}function lh(o){return yn(o)||Ni(o)}function Mu(o){return null!==o}function Fa(o){return bo(()=>({type:o.type,bootstrap:o.bootstrap||vn,declarations:o.declarations||vn,imports:o.imports||vn,exports:o.exports||vn,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function Nu(o,a){if(null==o)return Ks;const u={};for(const h in o)if(o.hasOwnProperty(h)){let f=o[h],_=f;Array.isArray(f)&&(_=f[1],f=f[0]),u[f]=h,a&&(a[f]=_)}return u}function Sl(o){return bo(()=>{const a=_c(o);return Sm(a),a})}function ch(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function yn(o){return o[aa]||null}function Ni(o){return o[Cl]||null}function Wr(o){return o[mc]||null}function la(o){const a=yn(o)||Ni(o)||Wr(o);return null!==a&&a.standalone}function qr(o,a){const u=o[Qf]||null;if(!u&&!0===a)throw new Error(`Type ${ae(o)} does not have '\u0275mod' property.`);return u}function _c(o){const a={};return{type:o.type,providersResolver:null,factory:null,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:a,inputTransforms:null,inputConfig:o.inputs||Ks,exportAs:o.exportAs||null,standalone:!0===o.standalone,signals:!0===o.signals,selectors:o.selectors||vn,viewQuery:o.viewQuery||null,features:o.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Nu(o.inputs,a),outputs:Nu(o.outputs)}}function Sm(o){o.features?.forEach(a=>a(o))}function vc(o,a){if(!o)return null;const u=a?Wr:lh;return()=>("function"==typeof o?o():o).map(h=>u(h)).filter(Mu)}const fi=0,vt=1,zt=2,pi=3,Yr=4,La=5,Ji=6,yc=7,zn=8,Vo=9,Al=10,Wt=11,Dr=12,np=13,Uo=14,gi=15,uh=16,Ba=17,cr=18,Ho=19,jo=20,ca=21,Hs=22,wc=23,ua=24,ln=25,Ml=1,Ru=2,ur=7,dr=9,Er=11;function hr(o){return Array.isArray(o)&&"object"==typeof o[Ml]}function Ur(o){return Array.isArray(o)&&!0===o[Ml]}function Ou(o){return 0!=(4&o.flags)}function Ua(o){return o.componentOffset>-1}function Ts(o){return 1==(1&o.flags)}function cs(o){return!!o.template}function Nl(o){return 0!=(512&o[zt])}function Ha(o,a){return o.hasOwnProperty(Ls)?o[Ls]:null}let Xi=null,ja=!1;function us(o){const a=Xi;return Xi=o,a}const Ga={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Ec(o){if(!$a(o)||o.dirty){if(!o.producerMustRecompute(o)&&!_h(o))return void(o.dirty=!1);o.producerRecomputeValue(o),o.dirty=!1}}function Cc(o){o.dirty=!0,function ap(o){if(void 0===o.liveConsumerNode)return;const a=ja;ja=!0;try{for(const u of o.liveConsumerNode)u.dirty||Cc(u)}finally{ja=a}}(o),o.consumerMarkedDirty?.(o)}function lp(o){return o&&(o.nextProducerIndex=0),us(o)}function fr(o,a){if(us(a),o&&void 0!==o.producerNode&&void 0!==o.producerIndexOfThis&&void 0!==o.producerLastReadVersion){if($a(o))for(let u=o.nextProducerIndex;u<o.producerNode.length;u++)Tc(o.producerNode[u],o.producerIndexOfThis[u]);for(;o.producerNode.length>o.nextProducerIndex;)o.producerNode.pop(),o.producerLastReadVersion.pop(),o.producerIndexOfThis.pop()}}function _h(o){ha(o);for(let a=0;a<o.producerNode.length;a++){const u=o.producerNode[a],h=o.producerLastReadVersion[a];if(h!==u.version||(Ec(u),h!==u.version))return!0}return!1}function vh(o){if(ha(o),$a(o))for(let a=0;a<o.producerNode.length;a++)Tc(o.producerNode[a],o.producerIndexOfThis[a]);o.producerNode.length=o.producerLastReadVersion.length=o.producerIndexOfThis.length=0,o.liveConsumerNode&&(o.liveConsumerNode.length=o.liveConsumerIndexOfThis.length=0)}function Tc(o,a){if(function Ic(o){o.liveConsumerNode??=[],o.liveConsumerIndexOfThis??=[]}(o),ha(o),1===o.liveConsumerNode.length)for(let h=0;h<o.producerNode.length;h++)Tc(o.producerNode[h],o.producerIndexOfThis[h]);const u=o.liveConsumerNode.length-1;if(o.liveConsumerNode[a]=o.liveConsumerNode[u],o.liveConsumerIndexOfThis[a]=o.liveConsumerIndexOfThis[u],o.liveConsumerNode.length--,o.liveConsumerIndexOfThis.length--,a<o.liveConsumerNode.length){const h=o.liveConsumerIndexOfThis[a],f=o.liveConsumerNode[a];ha(f),f.producerIndexOfThis[h]=a}}function $a(o){return o.consumerIsAlwaysLive||(o?.liveConsumerNode?.length??0)>0}function ha(o){o.producerNode??=[],o.producerIndexOfThis??=[],o.producerLastReadVersion??=[]}let dp=null;function Dh(o){const a=us(null);try{return o()}finally{us(a)}}const Eh=()=>{},Om=(()=>({...Ga,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:o=>{o.schedule(o.ref)},hasRun:!1,cleanupFn:Eh}))();class km{constructor(a,u,h){this.previousValue=a,this.currentValue=u,this.firstChange=h}isFirstChange(){return this.firstChange}}function Bu(){return Mc}function Mc(o){return o.type.prototype.ngOnChanges&&(o.setInput=za),Pm}function Pm(){const o=Wa(this),a=o?.current;if(a){const u=o.previous;if(u===Ks)o.previous=a;else for(let h in a)u[h]=a[h];o.current=null,this.ngOnChanges(a)}}function za(o,a,u,h){const f=this.declaredInputs[u],_=Wa(o)||function fp(o,a){return o[Co]=a}(o,{previous:Ks,current:null}),w=_.current||(_.current={}),E=_.previous,I=E[f];w[f]=new km(I&&I.currentValue,a,E===Ks),o[h]=a}Bu.ngInherit=!0;const Co="__ngSimpleChanges__";function Wa(o){return o[Co]||null}const Qs=function(o,a,u){};function Un(o){for(;Array.isArray(o);)o=o[fi];return o}function qa(o,a){return Un(a[o])}function Cr(o,a){return Un(a[o.index])}function Th(o,a){return o.data[a]}function Ya(o,a){return o[a]}function Tr(o,a){const u=a[o];return hr(u)?u:u[fi]}function ds(o,a){return null==a?null:o[a]}function Um(o){o[Ba]=0}function Ih(o){1024&o[zt]||(o[zt]|=1024,Oy(o,1))}function Vu(o){1024&o[zt]&&(o[zt]&=-1025,Oy(o,-1))}function Oy(o,a){let u=o[pi];if(null===u)return;u[La]+=a;let h=u;for(u=u[pi];null!==u&&(1===a&&1===h[La]||-1===a&&0===h[La]);)u[La]+=a,h=u,u=u[pi]}const qt={lFrame:Mt(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Ir(){return qt.bindingsEnabled}function To(){return null!==qt.skipHydrationRootTNode}function Ue(){return qt.lFrame.lView}function gn(){return qt.lFrame.tView}function Js(o){return qt.lFrame.contextLView=o,o[zn]}function $u(o){return qt.lFrame.contextLView=null,o}function gr(){let o=zu();for(;null!==o&&64===o.type;)o=o.parent;return o}function zu(){return qt.lFrame.currentTNode}function Ll(){const o=qt.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}function pa(o,a){const u=qt.lFrame;u.currentTNode=o,u.isParent=a}function Za(){return qt.lFrame.isParent}function Ah(){qt.lFrame.isParent=!1}function hs(){const o=qt.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}function Ka(){return qt.lFrame.bindingIndex++}function Io(o){const a=qt.lFrame,u=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,u}function xh(o){qt.lFrame.inI18n=o}function Wu(o,a){const u=qt.lFrame;u.bindingIndex=u.bindingRootIndex=o,qu(a)}function qu(o){qt.lFrame.currentDirectiveIndex=o}function wp(o){const a=qt.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}function Yu(){return qt.lFrame.currentQueryIndex}function bp(o){qt.lFrame.currentQueryIndex=o}function Dp(o){const a=o[vt];return 2===a.type?a.declTNode:1===a.type?o[Ji]:null}function jm(o,a,u){if(u&Gt.SkipSelf){let f=a,_=o;for(;!(f=f.parent,null!==f||u&Gt.Host||(f=Dp(_),null===f||(_=_[Uo],10&f.type))););if(null===f)return!1;a=f,o=_}const h=qt.lFrame=Qt();return h.currentTNode=a,h.lView=o,!0}function si(o){const a=Qt(),u=o[vt];qt.lFrame=a,a.currentTNode=u.firstChild,a.lView=o,a.tView=u,a.contextLView=o,a.bindingIndex=u.bindingStartIndex,a.inI18n=!1}function Qt(){const o=qt.lFrame,a=null===o?null:o.child;return null===a?Mt(o):a}function Mt(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function Ti(){const o=qt.lFrame;return qt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const Hn=Ti;function Sr(){const o=Ti();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function at(){return qt.lFrame.selectedIndex}function $o(o){qt.lFrame.selectedIndex=o}function Xn(){const o=qt.lFrame;return Th(o.tView,o.selectedIndex)}let _i=!0;function fn(){return _i}function er(o){_i=o}function zo(o,a){for(let u=a.directiveStart,h=a.directiveEnd;u<h;u++){const _=o.data[u].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:N,ngOnDestroy:k}=_;w&&(o.contentHooks??=[]).push(-u,w),E&&((o.contentHooks??=[]).push(u,E),(o.contentCheckHooks??=[]).push(u,E)),I&&(o.viewHooks??=[]).push(-u,I),N&&((o.viewHooks??=[]).push(u,N),(o.viewCheckHooks??=[]).push(u,N)),null!=k&&(o.destroyHooks??=[]).push(u,k)}}function Bl(o,a,u){ma(o,a,3,u)}function Zu(o,a,u,h){(3&o[zt])===u&&ma(o,a,u,h)}function Wo(o,a){let u=o[zt];(3&u)===a&&(u&=8191,u+=1,o[zt]=u)}function ma(o,a,u,h){const _=h??-1,w=a.length-1;let E=0;for(let I=void 0!==h?65535&o[Ba]:0;I<w;I++)if("number"==typeof a[I+1]){if(E=a[I],null!=h&&E>=h)break}else a[I]<0&&(o[Ba]+=65536),(E<_||-1==_)&&(Rc(o,u,a,I),o[Ba]=(4294901760&o[Ba])+I+2),I++}function Zr(o,a){Qs(4,o,a);const u=us(null);try{a.call(o)}finally{us(u),Qs(5,o,a)}}function Rc(o,a,u,h){const f=u[h]<0,_=u[h+1],E=o[f?-u[h]:u[h]];f?o[zt]>>13<o[Ba]>>16&&(3&o[zt])===a&&(o[zt]+=8192,Zr(E,_)):Zr(E,_)}const So=-1;class dn{constructor(a,u,h){this.factory=a,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=h}}function kc(o){return o!==So}function Vl(o){return 32767&o}function Ul(o,a){let u=function By(o){return o>>16}(o),h=a;for(;u>0;)h=h[Uo],u--;return h}let Tp=!0;function Rh(o){const a=Tp;return Tp=o,a}const Wm=255,Vy=5;let Ip=0;const Ee={};function mr(o,a){const u=Hr(o,a);if(-1!==u)return u;const h=a[vt];h.firstCreatePass&&(o.injectorIndex=a.length,L(h.data,o),L(a,null),L(h.blueprint,null));const f=Ao(o,a),_=o.injectorIndex;if(kc(f)){const w=Vl(f),E=Ul(f,a),I=E[vt].data;for(let N=0;N<8;N++)a[_+N]=E[w+N]|I[w+N]}return a[_+8]=f,_}function L(o,a){o.push(0,0,0,0,0,0,0,0,a)}function Hr(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function Ao(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let u=0,h=null,f=a;for(;null!==f;){if(h=jl(f),null===h)return So;if(u++,f=f[Uo],-1!==h.injectorIndex)return h.injectorIndex|u<<16}return So}function Hl(o,a,u){!function oi(o,a,u){let h;"string"==typeof u?h=u.charCodeAt(0)||0:u.hasOwnProperty(Tl)&&(h=u[Tl]),null==h&&(h=u[Tl]=Ip++);const f=h&Wm;a.data[o+(f>>Vy)]|=1<<f}(o,a,u)}function ei(o,a,u){if(u&Gt.Optional||void 0!==o)return o;Je()}function Pc(o,a,u,h){if(u&Gt.Optional&&void 0===h&&(h=null),!(u&(Gt.Self|Gt.Host))){const f=o[Vo],_=Jt(void 0);try{return f?f.get(a,h,u&Gt.Optional):hi(a,h,u&Gt.Optional)}finally{Jt(_)}}return ei(h,0,u)}function Ja(o,a,u,h=Gt.Default,f){if(null!==o){if(2048&a[zt]&&!(h&Gt.Self)){const w=function Ph(o,a,u,h,f){let _=o,w=a;for(;null!==_&&null!==w&&2048&w[zt]&&!(512&w[zt]);){const E=Ju(_,w,u,h|Gt.Self,Ee);if(E!==Ee)return E;let I=_.parent;if(!I){const N=w[jo];if(N){const k=N.get(u,Ee,h);if(k!==Ee)return k}I=jl(w),w=w[Uo]}_=I}return f}(o,a,u,h,Ee);if(w!==Ee)return w}const _=Ju(o,a,u,h,Ee);if(_!==Ee)return _}return Pc(a,u,h,f)}function Ju(o,a,u,h,f){const _=function Ap(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(Tl)?o[Tl]:void 0;return"number"==typeof a?a>=0?a&Wm:el:a}(u);if("function"==typeof _){if(!jm(a,o,h))return h&Gt.Host?ei(f,0,h):Pc(a,u,h,f);try{let w;if(w=_(h),null!=w||h&Gt.Optional)return w;Je()}finally{Hn()}}else if("number"==typeof _){let w=null,E=Hr(o,a),I=So,N=h&Gt.Host?a[gi][Ji]:null;for((-1===E||h&Gt.SkipSelf)&&(I=-1===E?Ao(o,a):a[E+8],I!==So&&kh(h,!1)?(w=a[vt],E=Vl(I),a=Ul(I,a)):E=-1);-1!==E;){const k=a[vt];if(qo(_,E,k.data)){const j=Sp(E,a,u,w,h,N);if(j!==Ee)return j}I=a[E+8],I!==So&&kh(h,a[vt].data[E+8]===N)&&qo(_,E,a)?(w=k,E=Vl(I),a=Ul(I,a)):E=-1}}return f}function Sp(o,a,u,h,f,_){const w=a[vt],E=w.data[o+8],k=Oh(E,w,u,null==h?Ua(E)&&Tp:h!=w&&0!=(3&E.type),f&Gt.Host&&_===E);return null!==k?Xa(a,w,k,E):Ee}function Oh(o,a,u,h,f){const _=o.providerIndexes,w=a.data,E=1048575&_,I=o.directiveStart,k=_>>20,K=f?E+k:o.directiveEnd;for(let oe=h?E:E+k;oe<K;oe++){const Re=w[oe];if(oe<I&&u===Re||oe>=I&&Re.type===u)return oe}if(f){const oe=w[I];if(oe&&cs(oe)&&oe.type===u)return I}return null}function Xa(o,a,u,h){let f=o[u];const _=a.data;if(function Gm(o){return o instanceof dn}(f)){const w=f;w.resolving&&function We(o,a){const u=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new pe(-200,`Circular dependency in DI detected for ${o}${u}`)}(function Pe(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():fe(o)}(_[u]));const E=Rh(w.canSeeViewProviders);w.resolving=!0;const N=w.injectImpl?Jt(w.injectImpl):null;jm(o,h,Gt.Default);try{f=o[u]=w.factory(void 0,_,o,h),a.firstCreatePass&&u>=h.directiveStart&&function jn(o,a,u){const{ngOnChanges:h,ngOnInit:f,ngDoCheck:_}=a.type.prototype;if(h){const w=Mc(a);(u.preOrderHooks??=[]).push(o,w),(u.preOrderCheckHooks??=[]).push(o,w)}f&&(u.preOrderHooks??=[]).push(0-o,f),_&&((u.preOrderHooks??=[]).push(o,_),(u.preOrderCheckHooks??=[]).push(o,_))}(u,_[u],a)}finally{null!==N&&Jt(N),Rh(E),w.resolving=!1,Hn()}}return f}function qo(o,a,u){return!!(u[a+(o>>Vy)]&1<<o)}function kh(o,a){return!(o&Gt.Self||o&Gt.Host&&a)}class mn{constructor(a,u){this._tNode=a,this._lView=u}get(a,u,h){return Ja(this._tNode,this._lView,a,ji(h),u)}}function el(){return new mn(gr(),Ue())}function Mo(o){return bo(()=>{const a=o.prototype.constructor,u=a[Ls]||Lc(a),h=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==h;){const _=f[Ls]||Lc(f);if(_&&_!==u)return _;f=Object.getPrototypeOf(f)}return _=>new _})}function Lc(o){return ot(o)?()=>{const a=Lc($e(o));return a&&a()}:Ha(o)}function jl(o){const a=o[vt],u=a.type;return 2===u?a.declTNode:1===u?o[Ji]:null}function Bc(o){return function Qu(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const u=o.attrs;if(u){const h=u.length;let f=0;for(;f<h;){const _=u[f];if(oh(_))break;if(0===_)f+=2;else if("number"==typeof _)for(f++;f<h&&"string"==typeof u[f];)f++;else{if(_===a)return u[f+1];f+=2}}}return null}(gr(),o)}const Vc="__parameters__";function U(o,a,u){return bo(()=>{const h=function R(o){return function(...u){if(o){const h=o(...u);for(const f in h)this[f]=h[f]}}}(a);function f(..._){if(this instanceof f)return h.apply(this,_),this;const w=new f(..._);return E.annotation=w,E;function E(I,N,k){const j=I.hasOwnProperty(Vc)?I[Vc]:Object.defineProperty(I,Vc,{value:[]})[Vc];for(;j.length<=k;)j.push(null);return(j[k]=j[k]||[]).push(w),I}}return u&&(f.prototype=Object.create(u.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}function $l(o,a){o.forEach(u=>Array.isArray(u)?$l(u,a):a(u))}function Np(o,a,u){a>=o.length?o.push(u):o.splice(a,0,u)}function Fh(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function tl(o,a){const u=[];for(let h=0;h<o;h++)u.push(a);return u}function fs(o,a,u){let h=Uc(o,a);return h>=0?o[1|h]=u:(h=~h,function Uy(o,a,u,h){let f=o.length;if(f==a)o.push(u,h);else if(1===f)o.push(h,o[0]),o[0]=u;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=u,o[a+1]=h}}(o,h,a,u)),h}function Lh(o,a){const u=Uc(o,a);if(u>=0)return o[1|u]}function Uc(o,a){return function Rp(o,a,u){let h=0,f=o.length>>u;for(;f!==h;){const _=h+(f-h>>1),w=o[_<<u];if(a===w)return _<<u;w>a?f=_:h=_+1}return~(f<<u)}(o,a,1)}const Pp=br(U("Optional"),8),ed=br(U("SkipSelf"),4);function od(o){return 128==(128&o.flags)}var Gc=function(o){return o[o.Important=1]="Important",o[o.DashCase=2]="DashCase",o}(Gc||{});const i_=/^>|^->|<!--|-->|--!>|<!-$/g,va=/(<|>)/g,Bp="\u200b$1\u200b";const $h=new Map;let ld=0;const jp="__ngContext__";function Jr(o,a){hr(a)?(o[jp]=a[Ho],function Mr(o){$h.set(o[Ho],o)}(a)):o[jp]=a}let Y;function ce(o,a){return Y(o,a)}function Xe(o){const a=o[pi];return Ur(a)?a[pi]:a}function Si(o){return cd(o[Dr])}function no(o){return cd(o[Yr])}function cd(o){for(;null!==o&&!Ur(o);)o=o[Yr];return o}function Wc(o,a,u,h,f){if(null!=h){let _,w=!1;Ur(h)?_=h:hr(h)&&(w=!0,h=h[fi]);const E=Un(h);0===o&&null!==u?null==f?OD(a,u,E):ql(a,u,E,f||null,!0):1===o&&null!==u?ql(a,u,E,f||null,!0):2===o?function o0(o,a,u){const h=l_(o,a);h&&function kD(o,a,u,h){o.removeChild(a,u,h)}(o,h,a,u)}(a,E,w):3===o&&a.destroyNode(E),null!=_&&function o1(o,a,u,h,f){const _=u[ur];_!==Un(u)&&Wc(a,o,h,_,f);for(let E=Er;E<u.length;E++){const I=u[E];Ss(I[vt],I,o,a,h,_)}}(a,o,_,u,f)}}function ud(o,a){return o.createText(a)}function zh(o,a){return o.createComment(function Vp(o){return o.replace(i_,a=>a.replace(va,Bp))}(a))}function dd(o,a,u){return o.createElement(a,u)}function hd(o,a){const u=o[dr],h=u.indexOf(a);Vu(a),u.splice(h,1)}function Xr(o,a){if(o.length<=Er)return;const u=Er+a,h=o[u];if(h){const f=h[uh];null!==f&&f!==o&&hd(f,h),a>0&&(o[u-1][Yr]=h[Yr]);const _=Fh(o,Er+a);!function e0(o,a){Ss(o,a,a[Wt],2,null,null),a[fi]=null,a[Ji]=null}(h[vt],h);const w=_[cr];null!==w&&w.detachView(_[vt]),h[pi]=null,h[Yr]=null,h[zt]&=-129}return h}function ND(o,a){if(!(256&a[zt])){const u=a[Wt];a[wc]&&vh(a[wc]),a[ua]&&vh(a[ua]),u.destroyNode&&Ss(o,a,u,3,null,null),function a_(o){let a=o[Dr];if(!a)return xD(o[vt],o);for(;a;){let u=null;if(hr(a))u=a[Dr];else{const h=a[Er];h&&(u=h)}if(!u){for(;a&&!a[Yr]&&a!==o;)hr(a)&&xD(a[vt],a),a=a[pi];null===a&&(a=o),hr(a)&&xD(a[vt],a),u=a&&a[Yr]}a=u}}(a)}}function xD(o,a){if(!(256&a[zt])){a[zt]&=-129,a[zt]|=256,function kO(o,a){let u;if(null!=o&&null!=(u=o.destroyHooks))for(let h=0;h<u.length;h+=2){const f=a[u[h]];if(!(f instanceof dn)){const _=u[h+1];if(Array.isArray(_))for(let w=0;w<_.length;w+=2){const E=f[_[w]],I=_[w+1];Qs(4,E,I);try{I.call(E)}finally{Qs(5,E,I)}}else{Qs(4,f,_);try{_.call(f)}finally{Qs(5,f,_)}}}}}(o,a),function OO(o,a){const u=o.cleanup,h=a[yc];if(null!==u)for(let _=0;_<u.length-1;_+=2)if("string"==typeof u[_]){const w=u[_+3];w>=0?h[w]():h[-w].unsubscribe(),_+=2}else u[_].call(h[u[_+1]]);null!==h&&(a[yc]=null);const f=a[ca];if(null!==f){a[ca]=null;for(let _=0;_<f.length;_++)(0,f[_])()}}(o,a),1===a[vt].type&&a[Wt].destroy();const u=a[uh];if(null!==u&&Ur(a[pi])){u!==a[pi]&&hd(u,a);const h=a[cr];null!==h&&h.detachView(o)}!function r_(o){$h.delete(o[Ho])}(a)}}function RD(o,a,u){return t1(o,a.parent,u)}function t1(o,a,u){let h=a;for(;null!==h&&40&h.type;)h=(a=h).parent;if(null===h)return u[fi];{const{componentOffset:f}=h;if(f>-1){const{encapsulation:_}=o.data[h.directiveStart+f];if(_===Zs.None||_===Zs.Emulated)return null}return Cr(h,u)}}function ql(o,a,u,h,f){o.insertBefore(a,u,h,f)}function OD(o,a,u){o.appendChild(a,u)}function r0(o,a,u,h,f){null!==h?ql(o,a,u,h,f):OD(o,a,u)}function l_(o,a){return o.parentNode(a)}function PD(o,a,u){return c_(o,a,u)}function n1(o,a,u){return 40&o.type?Cr(o,u):null}let FD,l0,GD,c0,c_=n1;function i1(o,a){c_=o,FD=a}function s0(o,a,u,h){const f=RD(o,h,a),_=a[Wt],E=PD(h.parent||a[Ji],h,a);if(null!=f)if(Array.isArray(u))for(let I=0;I<u.length;I++)r0(_,f,u[I],E,!1);else r0(_,f,u,E,!1);void 0!==FD&&FD(_,h,a,u,f)}function u_(o,a){if(null!==a){const u=a.type;if(3&u)return Cr(a,o);if(4&u)return LD(-1,o[a.index]);if(8&u){const h=a.child;if(null!==h)return u_(o,h);{const f=o[a.index];return Ur(f)?LD(-1,f):Un(f)}}if(32&u)return ce(a,o)()||Un(o[a.index]);{const h=r1(o,a);return null!==h?Array.isArray(h)?h[0]:u_(Xe(o[gi]),h):u_(o,a.next)}}return null}function r1(o,a){return null!==a?o[gi][Ji].projection[a.projection]:null}function LD(o,a){const u=Er+o+1;if(u<a.length){const h=a[u],f=h[vt].firstChild;if(null!==f)return u_(h,f)}return a[ur]}function BD(o,a,u,h,f,_,w){for(;null!=u;){const E=h[u.index],I=u.type;if(w&&0===a&&(E&&Jr(Un(E),h),u.flags|=2),32!=(32&u.flags))if(8&I)BD(o,a,u.child,h,f,_,!1),Wc(a,o,f,E,_);else if(32&I){const N=ce(u,h);let k;for(;k=N();)Wc(a,o,f,k,_);Wc(a,o,f,E,_)}else 16&I?a0(o,a,h,u,f,_):Wc(a,o,f,E,_);u=w?u.projectionNext:u.next}}function Ss(o,a,u,h,f,_){BD(u,h,o.firstChild,a,f,_,!1)}function a0(o,a,u,h,f,_){const w=u[gi],I=w[Ji].projection[h.projection];if(Array.isArray(I))for(let N=0;N<I.length;N++)Wc(a,o,f,I[N],_);else{let N=I;const k=w[pi];od(h)&&(N.flags|=128),BD(o,a,N,k,f,_,!0)}}function UD(o,a,u){""===u?o.removeAttribute(a,"class"):o.setAttribute(a,"class",u)}function l1(o,a,u){const{mergedAttrs:h,classes:f,styles:_}=u;null!==h&&as(o,a,h),null!==f&&UD(o,a,f),null!==_&&function a1(o,a,u){o.setAttribute(a,"style",u)}(o,a,_)}function io(o){return function HD(){if(void 0===l0&&(l0=null,Vn.trustedTypes))try{l0=Vn.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return l0}()?.createHTML(o)||o}function ro(o){GD=o}function Yc(){if(void 0!==GD)return GD;if(typeof document<"u")return document;throw new pe(210,!1)}function Wh(){if(void 0===c0&&(c0=null,Vn.trustedTypes))try{c0=Vn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return c0}function u1(o){return Wh()?.createHTML(o)||o}function $D(o){return Wh()?.createScriptURL(o)||o}class qh{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Nt})`}}class zD extends qh{getTypeName(){return"HTML"}}class h1 extends qh{getTypeName(){return"Style"}}class f1 extends qh{getTypeName(){return"Script"}}class LO extends qh{getTypeName(){return"URL"}}class BO extends qh{getTypeName(){return"ResourceURL"}}function ps(o){return o instanceof qh?o.changingThisBreaksApplicationSecurity:o}function so(o,a){const u=function u0(o){return o instanceof qh&&o.getTypeName()||null}(o);if(null!=u&&u!==a){if("ResourceURL"===u&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${u} (see ${Nt})`)}return u===a}function VO(o){return new zD(o)}function UO(o){return new h1(o)}function $p(o){return new f1(o)}function d_(o){return new LO(o)}function p1(o){return new BO(o)}function g1(o){const a=new HO(o);return function jO(){try{return!!(new window.DOMParser).parseFromString(io(""),"text/html")}catch{return!1}}()?new m1(a):a}class m1{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const u=(new window.DOMParser).parseFromString(io(a),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(a):(u.removeChild(u.firstChild),u)}catch{return null}}}class HO{constructor(a){this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(a){const u=this.inertDocument.createElement("template");return u.innerHTML=io(a),u}}const GO=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function d0(o){return(o=String(o)).match(GO)?o:"unsafe:"+o}function Yl(o){const a={};for(const u of o.split(","))a[u]=!0;return a}function zp(...o){const a={};for(const u of o)for(const h in u)u.hasOwnProperty(h)&&(a[h]=!0);return a}const h_=Yl("area,br,col,hr,img,wbr"),h0=Yl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),_1=Yl("rp,rt"),WD=zp(h_,zp(h0,Yl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),zp(_1,Yl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),zp(_1,h0)),As=Yl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Yh=zp(As,Yl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Yl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),y1=Yl("script,style,template");class zO{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let u=a.firstChild,h=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?h=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,h&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let f=this.checkClobberedElement(u,u.nextSibling);if(f){u=f;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(a){const u=a.nodeName.toLowerCase();if(!WD.hasOwnProperty(u))return this.sanitizedSomething=!0,!y1.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const h=a.attributes;for(let f=0;f<h.length;f++){const _=h.item(f),w=_.name,E=w.toLowerCase();if(!Yh.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let I=_.value;As[E]&&(I=d0(I)),this.buf.push(" ",w,'="',w1(I),'"')}return this.buf.push(">"),!0}endElement(a){const u=a.nodeName.toLowerCase();WD.hasOwnProperty(u)&&!h_.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(a){this.buf.push(w1(a))}checkClobberedElement(a,u){if(u&&(a.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return u}}const WO=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,nl=/([^\#-~ |!])/g;function w1(o){return o.replace(/&/g,"&amp;").replace(WO,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(nl,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let f0;function b1(o,a){let u=null;try{f0=f0||g1(o);let h=a?String(a):"";u=f0.getInertBodyElement(h);let f=5,_=h;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,h=_,_=u.innerHTML,u=f0.getInertBodyElement(h)}while(h!==_);return io((new zO).sanitizeChildren(qD(u)||u))}finally{if(u){const h=qD(u)||u;for(;h.firstChild;)h.removeChild(h.firstChild)}}}function qD(o){return"content"in o&&function D1(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var Yo=function(o){return o[o.NONE=0]="NONE",o[o.HTML=1]="HTML",o[o.STYLE=2]="STYLE",o[o.SCRIPT=3]="SCRIPT",o[o.URL=4]="URL",o[o.RESOURCE_URL=5]="RESOURCE_URL",o}(Yo||{});function E1(o){const a=f_();return a?u1(a.sanitize(Yo.HTML,o)||""):so(o,"HTML")?u1(ps(o)):b1(Yc(),fe(o))}function YD(o){const a=f_();return a?a.sanitize(Yo.URL,o)||"":so(o,"URL")?ps(o):d0(fe(o))}function C1(o){const a=f_();if(a)return $D(a.sanitize(Yo.RESOURCE_URL,o)||"");if(so(o,"ResourceURL"))return $D(ps(o));throw new pe(904,!1)}function KD(o,a,u){return function ZD(o,a){return"src"===a&&("embed"===o||"frame"===o||"iframe"===o||"media"===o||"script"===o)||"href"===a&&("base"===o||"link"===o)?C1:YD}(a,u)(o)}function f_(){const o=Ue();return o&&o[Al].sanitizer}class qn{constructor(a,u){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=xt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Wp=new qn("ENVIRONMENT_INITIALIZER"),I1=new qn("INJECTOR",-1),S1=new qn("INJECTOR_DEF_TYPES");class p0{get(a,u=et){if(u===et){const h=new Error(`NullInjectorError: No provider for ${ae(a)}!`);throw h.name="NullInjectorError",h}return u}}function QD(o){return{\u0275providers:o}}function A1(...o){return{\u0275providers:M1(0,o),\u0275fromNgModule:!0}}function M1(o,...a){const u=[],h=new Set;let f;const _=w=>{u.push(w)};return $l(a,w=>{const E=w;p_(E,_,[],h)&&(f||=[],f.push(E))}),void 0!==f&&g0(f,_),u}function g0(o,a){for(let u=0;u<o.length;u++){const{ngModule:h,providers:f}=o[u];m0(f,_=>{a(_,h)})}}function p_(o,a,u,h){if(!(o=$e(o)))return!1;let f=null,_=ss(o);const w=!_&&yn(o);if(_||w){if(w&&!w.standalone)return!1;f=o}else{const I=o.ngModule;if(_=ss(I),!_)return!1;f=I}const E=h.has(f);if(w){if(E)return!1;if(h.add(f),w.dependencies){const I="function"==typeof w.dependencies?w.dependencies():w.dependencies;for(const N of I)p_(N,a,u,h)}}else{if(!_)return!1;{if(null!=_.imports&&!E){let N;h.add(f);try{$l(_.imports,k=>{p_(k,a,u,h)&&(N||=[],N.push(k))})}finally{}void 0!==N&&g0(N,a)}if(!E){const N=Ha(f)||(()=>new f);a({provide:f,useFactory:N,deps:vn},f),a({provide:S1,useValue:f,multi:!0},f),a({provide:Wp,useValue:()=>Kt(f),multi:!0},f)}const I=_.providers;if(null!=I&&!E){const N=o;m0(I,k=>{a(k,N)})}}}return f!==o&&void 0!==o.providers}function m0(o,a){for(let u of o)ze(u)&&(u=u.\u0275providers),Array.isArray(u)?m0(u,a):a(u)}const JB=$({provide:String,useValue:$});function N1(o){return null!==o&&"object"==typeof o&&JB in o}function Zh(o){return"function"==typeof o}const JD=new qn("Set Injector scope."),_0={},XO={};let XD;function g_(){return void 0===XD&&(XD=new p0),XD}class Zl{}class eE extends Zl{get destroyed(){return this._destroyed}constructor(a,u,h,f){super(),this.parent=u,this.source=h,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,il(a,w=>this.processProvider(w)),this.records.set(I1,qp(void 0,this)),f.has("environment")&&this.records.set(Zl,qp(void 0,this));const _=this.records.get(JD);null!=_&&"string"==typeof _.value&&this.scopes.add(_.value),this.injectorDefTypes=new Set(this.get(S1.multi,vn,Gt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const u of this._ngOnDestroyHooks)u.ngOnDestroy();const a=this._onDestroyHooks;this._onDestroyHooks=[];for(const u of a)u()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(a){return this.assertNotDestroyed(),this._onDestroyHooks.push(a),()=>this.removeOnDestroy(a)}runInContext(a){this.assertNotDestroyed();const u=wt(this),h=Jt(void 0);try{return a()}finally{wt(u),Jt(h)}}get(a,u=et,h=Gt.Default){if(this.assertNotDestroyed(),a.hasOwnProperty(Il))return a[Il](this);h=ji(h);const _=wt(this),w=Jt(void 0);try{if(!(h&Gt.SkipSelf)){let I=this.records.get(a);if(void 0===I){const N=function k1(o){return"function"==typeof o||"object"==typeof o&&o instanceof qn}(a)&&Ei(a);I=N&&this.injectableDefInScope(N)?qp(v0(a),_0):null,this.records.set(a,I)}if(null!=I)return this.hydrate(a,I)}return(h&Gt.Self?g_():this.parent).get(a,u=h&Gt.Optional&&u===et?null:u)}catch(E){if("NullInjectorError"===E.name){if((E[Ft]=E[Ft]||[]).unshift(ae(a)),_)throw E;return function El(o,a,u,h){const f=o[Ft];throw a[ee]&&f.unshift(a[ee]),o.message=function rh(o,a,u,h=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.slice(2):o;let f=ae(a);if(Array.isArray(a))f=a.map(ae).join(" -> ");else if("object"==typeof a){let _=[];for(let w in a)if(a.hasOwnProperty(w)){let E=a[w];_.push(w+":"+("string"==typeof E?JSON.stringify(E):ae(E)))}f=`{${_.join(", ")}}`}return`${u}${h?"("+h+")":""}[${f}]: ${o.replace(q,"\n  ")}`}("\n"+o.message,f,u,h),o.ngTokenPath=f,o[Ft]=null,o}(E,a,"R3InjectorError",this.source)}throw E}finally{Jt(w),wt(_)}}resolveInjectorInitializers(){const a=wt(this),u=Jt(void 0);try{const f=this.get(Wp.multi,vn,Gt.Self);for(const _ of f)_()}finally{wt(a),Jt(u)}}toString(){const a=[],u=this.records;for(const h of u.keys())a.push(ae(h));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new pe(205,!1)}processProvider(a){let u=Zh(a=$e(a))?a:$e(a&&a.provide);const h=function eV(o){return N1(o)?qp(void 0,o.useValue):qp(R1(o),_0)}(a);if(Zh(a)||!0!==a.multi)this.records.get(u);else{let f=this.records.get(u);f||(f=qp(void 0,_0,!0),f.factory=()=>In(f.multi),this.records.set(u,f)),u=a,f.multi.push(a)}this.records.set(u,h)}hydrate(a,u){return u.value===_0&&(u.value=XO,u.value=u.factory()),"object"==typeof u.value&&u.value&&function O1(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(a){if(!a.providedIn)return!1;const u=$e(a.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}removeOnDestroy(a){const u=this._onDestroyHooks.indexOf(a);-1!==u&&this._onDestroyHooks.splice(u,1)}}function v0(o){const a=Ei(o),u=null!==a?a.factory:Ha(o);if(null!==u)return u;if(o instanceof qn)throw new pe(204,!1);if(o instanceof Function)return function XB(o){const a=o.length;if(a>0)throw tl(a,"?"),new pe(204,!1);const u=function $r(o){return o&&(o[Ai]||o[_o])||null}(o);return null!==u?()=>u.factory(o):()=>new o}(o);throw new pe(204,!1)}function R1(o,a,u){let h;if(Zh(o)){const f=$e(o);return Ha(f)||v0(f)}if(N1(o))h=()=>$e(o.useValue);else if(function x1(o){return!(!o||!o.useFactory)}(o))h=()=>o.useFactory(...In(o.deps||[]));else if(function QO(o){return!(!o||!o.useExisting)}(o))h=()=>Kt($e(o.useExisting));else{const f=$e(o&&(o.useClass||o.provide));if(!function y0(o){return!!o.deps}(o))return Ha(f)||v0(f);h=()=>new f(...In(o.deps))}return h}function qp(o,a,u=!1){return{factory:o,value:a,multi:u?[]:void 0}}function il(o,a){for(const u of o)Array.isArray(u)?il(u,a):u&&ze(u)?il(u.\u0275providers,a):a(u)}const tE=new qn("AppId",{providedIn:"root",factory:()=>P1}),P1="ng",F1=new qn("Platform Initializer"),nE=new qn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ek=new qn("AnimationModuleType"),tk=new qn("CSP nonce",{providedIn:"root",factory:()=>Yc().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let sk=(o,a,u)=>null;function aE(o,a,u=!1){return sk(o,a,u)}class $s{}class v_{}class U1{resolveComponentFactory(a){throw function gs(o){const a=Error(`No component factory found for ${ae(o)}.`);return a.ngComponent=o,a}(a)}}let Qh=(()=>{class o{static#e=this.NULL=new U1}return o})();function H1(){return Nr(gr(),Ue())}function Nr(o,a){return new y_(Cr(o,a))}let y_=(()=>{class o{constructor(u){this.nativeElement=u}static#e=this.__NG_ELEMENT_ID__=H1}return o})();function w_(o){return o instanceof y_?o.nativeElement:o}class b_{}let Jl=(()=>{class o{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function hE(){const o=Ue(),u=Tr(gr().index,o);return(hr(u)?u:o)[Wt]}()}return o})(),ok=(()=>{class o{static#e=this.\u0275prov=xt({token:o,providedIn:"root",factory:()=>null})}return o})();class j1{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const Jh=new j1("16.2.8"),T0={};function Kp(o,a=null,u=null,h){const f=q1(o,a,u,h);return f.resolveInjectorInitializers(),f}function q1(o,a=null,u=null,h,f=new Set){const _=[u||vn,A1(o)];return h=h||("object"==typeof o?void 0:ae(o)),new eE(_,a||g_(),h||null,f)}let oo=(()=>{class o{static#e=this.THROW_IF_NOT_FOUND=et;static#t=this.NULL=new p0;static create(u,h){if(Array.isArray(u))return Kp({name:""},h,u,"");{const f=u.name??"";return Kp({name:f},u.parent,u.providers,f)}}static#n=this.\u0275prov=xt({token:o,providedIn:"any",factory:()=>Kt(I1)});static#i=this.__NG_ELEMENT_ID__=-1}return o})();function Qp(o){return o.ngOriginalError}class Xl{constructor(){this._console=console}handleError(a){const u=this._findOriginalError(a);this._console.error("ERROR",a),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(a){let u=a&&Qp(a);for(;u&&Qp(u);)u=Qp(u);return u||null}}function Jp(o){return a=>{setTimeout(o,void 0,a)}}const wa=class K1 extends l.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,u,h){let f=a,_=u||(()=>null),w=h;if(a&&"object"==typeof a){const I=a;f=I.next?.bind(I),_=I.error?.bind(I),w=I.complete?.bind(I)}this.__isAsync&&(_=Jp(_),f&&(f=Jp(f)),w&&(w=Jp(w)));const E=super.subscribe({next:f,error:_,complete:w});return a instanceof ne.w0&&a.add(E),E}};function M0(...o){}class es{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new wa(!1),this.onMicrotaskEmpty=new wa(!1),this.onStable=new wa(!1),this.onError=new wa(!1),typeof Zone>"u")throw new pe(908,!1);Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!h&&u,f.shouldCoalesceRunChangeDetection=h,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function _E(){const o="function"==typeof Vn.requestAnimationFrame;let a=Vn[o?"requestAnimationFrame":"setTimeout"],u=Vn[o?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&a&&u){const h=a[Zone.__symbol__("OriginalDelegate")];h&&(a=h);const f=u[Zone.__symbol__("OriginalDelegate")];f&&(u=f)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:u}}().nativeRequestAnimationFrame,function eA(o){const a=()=>{!function X1(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(Vn,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,D_(o),o.isCheckStableRunning=!0,vE(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),D_(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,h,f,_,w,E)=>{if(function ms(o){return!(!Array.isArray(o)||1!==o.length)&&!0===o[0].data?.__ignore_ng_zone__}(E))return u.invokeTask(f,_,w,E);try{return yE(o),u.invokeTask(f,_,w,E)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||o.shouldCoalesceRunChangeDetection)&&a(),tA(o)}},onInvoke:(u,h,f,_,w,E,I)=>{try{return yE(o),u.invoke(f,_,w,E,I)}finally{o.shouldCoalesceRunChangeDetection&&a(),tA(o)}},onHasTask:(u,h,f,_)=>{u.hasTask(f,_),h===f&&("microTask"==_.change?(o._hasPendingMicrotasks=_.microTask,D_(o),vE(o)):"macroTask"==_.change&&(o.hasPendingMacrotasks=_.macroTask))},onHandleError:(u,h,f,_)=>(u.handleError(f,_),o.runOutsideAngular(()=>o.onError.emit(_)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!es.isInAngularZone())throw new pe(909,!1)}static assertNotInAngularZone(){if(es.isInAngularZone())throw new pe(909,!1)}run(a,u,h){return this._inner.run(a,u,h)}runTask(a,u,h,f){const _=this._inner,w=_.scheduleEventTask("NgZoneEvent: "+f,a,J1,M0,M0);try{return _.runTask(w,u,h)}finally{_.cancelTask(w)}}runGuarded(a,u,h){return this._inner.runGuarded(a,u,h)}runOutsideAngular(a){return this._outer.run(a)}}const J1={};function vE(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function D_(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function yE(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function tA(o){o._nesting--,vE(o)}class wE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new wa,this.onMicrotaskEmpty=new wa,this.onStable=new wa,this.onError=new wa}run(a,u,h){return a.apply(u,h)}runGuarded(a,u,h){return a.apply(u,h)}runOutsideAngular(a){return a()}runTask(a,u,h,f){return a.apply(u,h)}}const N0=new qn("",{providedIn:"root",factory:x0});function x0(){const o=sn(es);let a=!0;const u=new B.y(f=>{a=o.isStable&&!o.hasPendingMacrotasks&&!o.hasPendingMicrotasks,o.runOutsideAngular(()=>{f.next(a),f.complete()})}),h=new B.y(f=>{let _;o.runOutsideAngular(()=>{_=o.onStable.subscribe(()=>{es.assertNotInAngularZone(),queueMicrotask(()=>{!a&&!o.hasPendingMacrotasks&&!o.hasPendingMicrotasks&&(a=!0,f.next(!0))})})});const w=o.onUnstable.subscribe(()=>{es.assertInAngularZone(),a&&(a=!1,o.runOutsideAngular(()=>{f.next(!1)}))});return()=>{_.unsubscribe(),w.unsubscribe()}});return(0,ie.T)(u,h.pipe((0,Ae.B)()))}function Qc(o){return o instanceof Function?o():o}let Xh=(()=>{class o{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=xt({token:o,providedIn:"root",factory:()=>new o})}return o})();function Jc(o){for(;o;){o[zt]|=64;const a=Xe(o);if(Nl(o)&&!a)return o;o=a}return null}const sA=new qn("",{providedIn:"root",factory:()=>!1});let Xc=null;function uA(o,a){return o[a]??CE()}function _d(o,a){const u=CE();u.producerNode?.length&&(o[a]=Xc,u.lView=o,Xc=C_())}const dA={...Ga,consumerIsAlwaysLive:!0,consumerMarkedDirty:o=>{Jc(o.lView)},lView:null};function C_(){return Object.create(dA)}function CE(){return Xc??=C_(),Xc}const rn={};function TE(o){zs(gn(),Ue(),at()+o,!1)}function zs(o,a,u,h){if(!h)if(3==(3&a[zt])){const _=o.preOrderCheckHooks;null!==_&&Bl(a,_,u)}else{const _=o.preOrderHooks;null!==_&&Zu(a,_,0,u)}$o(u)}function ef(o,a=Gt.Default){const u=Ue();return null===u?Kt(o,a):Ja(gr(),u,$e(o),a)}function ng(){throw new Error("invalid")}function T_(o,a,u,h,f,_,w,E,I,N,k){const j=a.blueprint.slice();return j[fi]=f,j[zt]=140|h,(null!==N||o&&2048&o[zt])&&(j[zt]|=2048),Um(j),j[pi]=j[Uo]=o,j[zn]=u,j[Al]=w||o&&o[Al],j[Wt]=E||o&&o[Wt],j[Vo]=I||o&&o[Vo]||null,j[Ji]=_,j[Ho]=function Qy(){return ld++}(),j[Hs]=k,j[jo]=N,j[gi]=2==a.type?o[gi]:j,j}function vd(o,a,u,h,f){let _=o.data[a];if(null===_)_=L0(o,a,u,h,f),function Nh(){return qt.lFrame.inI18n}()&&(_.flags|=32);else if(64&_.type){_.type=u,_.value=h,_.attrs=f;const w=Ll();_.injectorIndex=null===w?-1:w.injectorIndex}return pa(_,!0),_}function L0(o,a,u,h,f){const _=zu(),w=Za(),I=o.data[a]=function gA(o,a,u,h,f,_){let w=a?a.injectorIndex:-1,E=0;return To()&&(E|=128),{type:u,index:h,insertBeforeIndex:null,injectorIndex:w,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:E,providerIndexes:0,value:f,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?_:_&&_.parent,u,a,h,f);return null===o.firstChild&&(o.firstChild=I),null!==_&&(w?null==_.child&&null!==I.parent&&(_.child=I):null===_.next&&(_.next=I,I.prev=_)),I}function ig(o,a,u,h){if(0===u)return-1;const f=a.length;for(let _=0;_<u;_++)a.push(h),o.blueprint.push(h),o.data.push(null);return f}function rg(o,a,u,h,f){const _=uA(a,wc),w=at(),E=2&h;try{$o(-1),E&&a.length>ln&&zs(o,a,ln,!1),Qs(E?2:0,f);const N=E?_:null,k=lp(N);try{null!==N&&(N.dirty=!1),u(h,f)}finally{fr(N,k)}}finally{E&&null===a[wc]&&_d(a,wc),$o(w),Qs(E?3:1,f)}}function I_(o,a,u){if(Ou(a)){const h=us(null);try{const _=a.directiveEnd;for(let w=a.directiveStart;w<_;w++){const E=o.data[w];E.contentQueries&&E.contentQueries(1,u[w],w)}}finally{us(h)}}}function S_(o,a,u){Ir()&&(function rf(o,a,u,h){const f=u.directiveStart,_=u.directiveEnd;Ua(u)&&function fk(o,a,u){const h=Cr(a,o),f=M_(u);let w=16;u.signals?w=4096:u.onPush&&(w=64);const E=O_(o,T_(o,f,null,w,h,a,null,o[Al].rendererFactory.createRenderer(h,u),null,null,null));o[a.index]=E}(a,u,o.data[f+u.componentOffset]),o.firstCreatePass||mr(u,a),Jr(h,a);const w=u.initialInputs;for(let E=f;E<_;E++){const I=o.data[E],N=Xa(a,o,E,u);Jr(N,a),null!==w&&pk(0,E-f,N,I,0,w),cs(I)&&(Tr(u.index,a)[zn]=Xa(a,o,E,u))}}(o,a,u,Cr(u,a)),64==(64&u.flags)&&ec(o,a,u))}function A_(o,a,u=Cr){const h=a.localNames;if(null!==h){let f=a.index+1;for(let _=0;_<h.length;_+=2){const w=h[_+1],E=-1===w?u(a,o):o[w];o[f++]=E}}}function M_(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=tf(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts,o.id):a}function tf(o,a,u,h,f,_,w,E,I,N,k){const j=ln+h,K=j+f,oe=function hA(o,a){const u=[];for(let h=0;h<a;h++)u.push(h<o?null:rn);return u}(j,K),Re="function"==typeof N?N():N;return oe[vt]={type:o,blueprint:oe,template:u,queries:null,viewQuery:E,declTNode:a,data:oe.slice().fill(null,j),bindingStartIndex:j,expandoStartIndex:K,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:I,consts:Re,incompleteFirstPass:!1,ssrId:k}}let N_=o=>null;function mA(o,a,u,h){for(let f in o)if(o.hasOwnProperty(f)){u=null===u?{}:u;const _=o[f];null===h?sg(u,a,f,_):h.hasOwnProperty(f)&&sg(u,a,h[f],_)}return u}function sg(o,a,u,h){o.hasOwnProperty(u)?o[u].push(a,h):o[u]=[a,h]}function Ns(o,a,u,h,f,_,w,E){const I=Cr(a,u);let k,N=a.inputs;!E&&null!=N&&(k=N[h])?(OE(o,u,k,h,f),Ua(a)&&function nf(o,a){const u=Tr(a,o);16&u[zt]||(u[zt]|=64)}(u,a.index)):3&a.type&&(h=function B0(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(h),f=null!=w?w(f,a.value||"",h):f,_.setProperty(I,h,f))}function ME(o,a,u,h){if(Ir()){const f=null===h?null:{"":-1},_=function U0(o,a){const u=o.directiveRegistry;let h=null,f=null;if(u)for(let _=0;_<u.length;_++){const w=u[_];if(Su(a,w.selectors,!1))if(h||(h=[]),cs(w))if(null!==w.findHostDirectiveDefs){const E=[];f=f||new Map,w.findHostDirectiveDefs(w,E,f),h.unshift(...E,w),H0(o,a,E.length)}else h.unshift(w),H0(o,a,0);else f=f||new Map,w.findHostDirectiveDefs?.(w,h,f),h.push(w)}return null===h?null:[h,f]}(o,u);let w,E;null===_?w=E=null:[w,E]=_,null!==w&&NE(o,a,u,w,f,E),f&&function Ri(o,a,u){if(a){const h=o.localNames=[];for(let f=0;f<a.length;f+=2){const _=u[a[f+1]];if(null==_)throw new pe(-301,!1);h.push(a[f],_)}}}(u,h,f)}u.mergedAttrs=Oa(u.mergedAttrs,u.attrs)}function NE(o,a,u,h,f,_){for(let N=0;N<h.length;N++)Hl(mr(u,a),o,h[N].type);!function x_(o,a,u){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+u,o.providerIndexes=a}(u,o.data.length,h.length);for(let N=0;N<h.length;N++){const k=h[N];k.providersResolver&&k.providersResolver(k)}let w=!1,E=!1,I=ig(o,a,h.length,null);for(let N=0;N<h.length;N++){const k=h[N];u.mergedAttrs=Oa(u.mergedAttrs,k.hostAttrs),R_(o,u,a,I,k),j0(I,k,f),null!==k.contentQueries&&(u.flags|=4),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(u.flags|=64);const j=k.type.prototype;!w&&(j.ngOnChanges||j.ngOnInit||j.ngDoCheck)&&((o.preOrderHooks??=[]).push(u.index),w=!0),!E&&(j.ngOnChanges||j.ngDoCheck)&&((o.preOrderCheckHooks??=[]).push(u.index),E=!0),I++}!function _A(o,a,u){const f=a.directiveEnd,_=o.data,w=a.attrs,E=[];let I=null,N=null;for(let k=a.directiveStart;k<f;k++){const j=_[k],K=u?u.get(j):null,Re=K?K.outputs:null;I=mA(j.inputs,k,I,K?K.inputs:null),N=mA(j.outputs,k,N,Re);const Qe=null===I||null===w||Mi(a)?null:gk(I,k,w);E.push(Qe)}null!==I&&(I.hasOwnProperty("class")&&(a.flags|=8),I.hasOwnProperty("style")&&(a.flags|=16)),a.initialInputs=E,a.inputs=I,a.outputs=N}(o,u,_)}function ec(o,a,u){const h=u.directiveStart,f=u.directiveEnd,_=u.index,w=function Fy(){return qt.lFrame.currentDirectiveIndex}();try{$o(_);for(let E=h;E<f;E++){const I=o.data[E],N=a[E];qu(E),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&V0(I,N)}}finally{$o(-1),qu(w)}}function V0(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function H0(o,a,u){a.componentOffset=u,(o.components??=[]).push(a.index)}function j0(o,a,u){if(u){if(a.exportAs)for(let h=0;h<a.exportAs.length;h++)u[a.exportAs[h]]=o;cs(a)&&(u[""]=o)}}function R_(o,a,u,h,f){o.data[h]=f;const _=f.factory||(f.factory=Ha(f.type)),w=new dn(_,cs(f),ef);o.blueprint[h]=w,u[h]=w,function vA(o,a,u,h,f){const _=f.hostBindings;if(_){let w=o.hostBindingOpCodes;null===w&&(w=o.hostBindingOpCodes=[]);const E=~a.index;(function hk(o){let a=o.length;for(;a>0;){const u=o[--a];if("number"==typeof u&&u<0)return u}return 0})(w)!=E&&w.push(E),w.push(u,h,_)}}(o,a,h,ig(o,u,f.hostVars,rn),f)}function rl(o,a,u,h,f,_){const w=Cr(o,a);!function xE(o,a,u,h,f,_,w){if(null==_)o.removeAttribute(a,f,u);else{const E=null==w?fe(_):w(_,h||"",f);o.setAttribute(a,f,E,u)}}(a[Wt],w,_,o.value,u,h,f)}function pk(o,a,u,h,f,_){const w=_[a];if(null!==w)for(let E=0;E<w.length;)yA(h,u,w[E++],w[E++],w[E++])}function yA(o,a,u,h,f){const _=us(null);try{const w=o.inputTransforms;null!==w&&w.hasOwnProperty(h)&&(f=w[h].call(a,f)),null!==o.setInput?o.setInput(a,f,u,h):a[h]=f}finally{us(_)}}function gk(o,a,u){let h=null,f=0;for(;f<u.length;){const _=u[f];if(0!==_)if(5!==_){if("number"==typeof _)break;if(o.hasOwnProperty(_)){null===h&&(h=[]);const w=o[_];for(let E=0;E<w.length;E+=2)if(w[E]===a){h.push(_,w[E+1],u[f+1]);break}}f+=2}else f+=2;else f+=4}return h}function og(o,a,u,h){return[o,!0,!1,a,null,0,h,u,null,null,null]}function eu(o,a){const u=o.contentQueries;if(null!==u)for(let h=0;h<u.length;h+=2){const _=u[h+1];if(-1!==_){const w=o.data[_];bp(u[h]),w.contentQueries(2,a[_],_)}}}function O_(o,a){return o[Dr]?o[np][Yr]=a:o[Dr]=a,o[np]=a,a}function G0(o,a,u){bp(0);const h=us(null);try{a(o,u)}finally{us(h)}}function sf(o){return o[yc]||(o[yc]=[])}function wA(o){return o.cleanup||(o.cleanup=[])}function bA(o,a,u){return(null===o||cs(o))&&(u=function fa(o){for(;Array.isArray(o);){if("object"==typeof o[Ml])return o;o=o[fi]}return null}(u[a.index])),u[Wt]}function RE(o,a){const u=o[Vo],h=u?u.get(Xl,null):null;h&&h.handleError(a)}function OE(o,a,u,h,f){for(let _=0;_<u.length;){const w=u[_++],E=u[_++];yA(o.data[w],a[w],h,E,f)}}function DA(o,a){const u=Tr(a,o),h=u[vt];!function kE(o,a){for(let u=a.length;u<o.blueprint.length;u++)a.push(o.blueprint[u])}(h,u);const f=u[fi];null!==f&&null===u[Hs]&&(u[Hs]=aE(f,u[Vo])),k_(h,u,u[zn])}function k_(o,a,u){si(a);try{const h=o.viewQuery;null!==h&&G0(1,h,u);const f=o.template;null!==f&&rg(o,a,f,1,u),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&eu(o,a),o.staticViewQueries&&G0(2,o.viewQuery,u);const _=o.components;null!==_&&function EA(o,a){for(let u=0;u<a.length;u++)DA(o,a[u])}(a,_)}catch(h){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),h}finally{a[zt]&=-5,Sr()}}let PE=(()=>{class o{constructor(){this.all=new Set,this.queue=new Map}create(u,h,f){const _=typeof Zone>"u"?null:Zone.current,w=function Ry(o,a,u){const h=Object.create(Om);u&&(h.consumerAllowSignalWrites=!0),h.fn=o,h.schedule=a;const f=w=>{h.cleanupFn=w};return h.ref={notify:()=>Cc(h),run:()=>{if(h.dirty=!1,h.hasRun&&!_h(h))return;h.hasRun=!0;const w=lp(h);try{h.cleanupFn(),h.cleanupFn=Eh,h.fn(f)}finally{fr(h,w)}},cleanup:()=>h.cleanupFn()},h.ref}(u,N=>{this.all.has(N)&&this.queue.set(N,_)},f);let E;this.all.add(w),w.notify();const I=()=>{w.cleanup(),E?.(),this.all.delete(w),this.queue.delete(w)};return E=h?.onDestroy(I),{destroy:I}}flush(){if(0!==this.queue.size)for(const[u,h]of this.queue)this.queue.delete(u),h?h.run(()=>u.run()):u.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=xt({token:o,providedIn:"root",factory:()=>new o})}return o})();function $0(o,a,u){let h=u?o.styles:null,f=u?o.classes:null,_=0;if(null!==a)for(let w=0;w<a.length;w++){const E=a[w];"number"==typeof E?_=E:1==_?f=Ze(f,E):2==_&&(h=Ze(h,E+": "+a[++w]+";"))}u?o.styles=h:o.stylesWithoutHost=h,u?o.classes=f:o.classesWithoutHost=f}function P_(o,a,u,h,f=!1){for(;null!==u;){const _=a[u.index];null!==_&&h.push(Un(_)),Ur(_)&&CA(_,h);const w=u.type;if(8&w)P_(o,a,u.child,h);else if(32&w){const E=ce(u,a);let I;for(;I=E();)h.push(I)}else if(16&w){const E=r1(a,u);if(Array.isArray(E))h.push(...E);else{const I=Xe(a[gi]);P_(I[vt],I,E,h,!0)}}u=f?u.projectionNext:u.next}return h}function CA(o,a){for(let u=Er;u<o.length;u++){const h=o[u],f=h[vt].firstChild;null!==f&&P_(h[vt],h,f,a)}o[ur]!==o[fi]&&a.push(o[ur])}function af(o,a,u,h=!0){const f=a[Al],_=f.rendererFactory,w=f.afterRenderEventManager;_.begin?.(),w?.begin();try{q0(o,a,o.template,u)}catch(I){throw h&&RE(a,I),I}finally{_.end?.(),f.effectManager?.flush(),w?.end()}}function q0(o,a,u,h){const f=a[zt];if(256!=(256&f)){a[Al].effectManager?.flush(),si(a);try{Um(a),function yp(o){return qt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==u&&rg(o,a,u,2,h);const w=3==(3&f);if(w){const N=o.preOrderCheckHooks;null!==N&&Bl(a,N,null)}else{const N=o.preOrderHooks;null!==N&&Zu(a,N,0,null),Wo(a,0)}if(function F_(o){for(let a=Si(o);null!==a;a=no(a)){if(!a[Ru])continue;const u=a[dr];for(let h=0;h<u.length;h++){Ih(u[h])}}}(a),FE(a,2),null!==o.contentQueries&&eu(o,a),w){const N=o.contentCheckHooks;null!==N&&Bl(a,N)}else{const N=o.contentHooks;null!==N&&Zu(a,N,1),Wo(a,1)}!function F0(o,a){const u=o.hostBindingOpCodes;if(null===u)return;const h=uA(a,ua);try{for(let f=0;f<u.length;f++){const _=u[f];if(_<0)$o(~_);else{const w=_,E=u[++f],I=u[++f];Wu(E,w),h.dirty=!1;const N=lp(h);try{I(2,a[w])}finally{fr(h,N)}}}}finally{null===a[ua]&&_d(a,ua),$o(-1)}}(o,a);const E=o.components;null!==E&&nr(a,E,0);const I=o.viewQuery;if(null!==I&&G0(2,I,h),w){const N=o.viewCheckHooks;null!==N&&Bl(a,N)}else{const N=o.viewHooks;null!==N&&Zu(a,N,2),Wo(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[zt]&=-73,Vu(a)}finally{Sr()}}}function FE(o,a){for(let u=Si(o);null!==u;u=no(u))for(let h=Er;h<u.length;h++)TA(u[h],a)}function L_(o,a,u){TA(Tr(a,o),u)}function TA(o,a){if(!function Fl(o){return 128==(128&o[zt])}(o))return;const u=o[vt],h=o[zt];if(80&h&&0===a||1024&h||2===a)q0(u,o,u.template,o[zn]);else if(o[La]>0){FE(o,1);const f=u.components;null!==f&&nr(o,f,1)}}function nr(o,a,u){for(let h=0;h<a.length;h++)L_(o,a[h],u)}class ag{get rootNodes(){const a=this._lView,u=a[vt];return P_(u,a,u.firstChild,[])}constructor(a,u){this._lView=a,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[zn]}set context(a){this._lView[zn]=a}get destroyed(){return 256==(256&this._lView[zt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[pi];if(Ur(a)){const u=a[8],h=u?u.indexOf(this):-1;h>-1&&(Xr(a,h),Fh(u,h))}this._attachedToViewContainer=!1}ND(this._lView[vt],this._lView)}onDestroy(a){!function ri(o,a){if(256==(256&o[zt]))throw new pe(911,!1);null===o[ca]&&(o[ca]=[]),o[ca].push(a)}(this._lView,a)}markForCheck(){Jc(this._cdRefInjectingView||this._lView)}detach(){this._lView[zt]&=-129}reattach(){this._lView[zt]|=128}detectChanges(){af(this._lView[vt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new pe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Wl(o,a){Ss(o,a,a[Wt],2,null,null)}(this._lView[vt],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new pe(902,!1);this._appRef=a}}class vk extends ag{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;af(a[vt],a,a[zn],!1)}checkNoChanges(){}get context(){return null}}class IA extends Qh{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const u=yn(a);return new lg(u,this.ngModule)}}function SA(o){const a=[];for(let u in o)o.hasOwnProperty(u)&&a.push({propName:o[u],templateName:u});return a}class MA{constructor(a,u){this.injector=a,this.parentInjector=u}get(a,u,h){h=ji(h);const f=this.injector.get(a,T0,h);return f!==T0||u===T0?f:this.parentInjector.get(a,u,h)}}class lg extends v_{get inputs(){const a=this.componentDef,u=a.inputTransforms,h=SA(a.inputs);if(null!==u)for(const f of h)u.hasOwnProperty(f.propName)&&(f.transform=u[f.propName]);return h}get outputs(){return SA(this.componentDef.outputs)}constructor(a,u){super(),this.componentDef=a,this.ngModule=u,this.componentType=a.type,this.selector=function ep(o){return o.map(Qi).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!u}create(a,u,h,f){let _=(f=f||this.ngModule)instanceof Zl?f:f?.injector;_&&null!==this.componentDef.getStandaloneInjector&&(_=this.componentDef.getStandaloneInjector(_)||_);const w=_?new MA(a,_):a,E=w.get(b_,null);if(null===E)throw new pe(407,!1);const j={rendererFactory:E,sanitizer:w.get(ok,null),effectManager:w.get(PE,null),afterRenderEventManager:w.get(Xh,null)},K=E.createRenderer(null,this.componentDef),oe=this.componentDef.selectors[0][0]||"div",Re=h?function dk(o,a,u,h){const _=h.get(sA,!1)||u===Zs.ShadowDom,w=o.selectRootElement(a,_);return function IE(o){N_(o)}(w),w}(K,h,this.componentDef.encapsulation,w):dd(K,oe,function AA(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(oe)),Ut=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let qe=null;null!==Re&&(qe=aE(Re,w,!0));const an=tf(0,null,null,1,0,null,null,null,null,null,null),wn=T_(null,an,null,Ut,null,null,j,K,w,null,qe);let vi,Po;si(wn);try{const pu=this.componentDef;let Ff,Lf=null;pu.findHostDirectiveDefs?(Ff=[],Lf=new Map,pu.findHostDirectiveDefs(pu,Ff,Lf),Ff.push(pu)):Ff=[pu];const qP=function NA(o,a){const u=o[vt],h=ln;return o[h]=a,vd(u,h,2,"#host",null)}(wn,Re),lc=function nc(o,a,u,h,f,_,w){const E=f[vt];!function xA(o,a,u,h){for(const f of o)a.mergedAttrs=Oa(a.mergedAttrs,f.hostAttrs);null!==a.mergedAttrs&&($0(a,a.mergedAttrs,!0),null!==u&&l1(h,u,a))}(h,o,a,w);let I=null;null!==a&&(I=aE(a,f[Vo]));const N=_.rendererFactory.createRenderer(a,u);let k=16;u.signals?k=4096:u.onPush&&(k=64);const j=T_(f,M_(u),null,k,f[o.index],o,_,N,null,null,I);return E.firstCreatePass&&H0(E,o,h.length-1),O_(f,j),f[o.index]=j}(qP,Re,pu,Ff,wn,j,K);Po=Th(an,ln),Re&&function RA(o,a,u,h){if(h)as(o,u,["ng-version",Jh.full]);else{const{attrs:f,classes:_}=function Vs(o){const a=[],u=[];let h=1,f=2;for(;h<o.length;){let _=o[h];if("string"==typeof _)2===f?""!==_&&a.push(_,o[++h]):8===f&&u.push(_);else{if(!ls(f))break;f=_}h++}return{attrs:a,classes:u}}(a.selectors[0]);f&&as(o,u,f),_&&_.length>0&&UD(o,u,_.join(" "))}}(K,pu,Re,h),void 0!==u&&function LE(o,a,u){const h=o.projection=[];for(let f=0;f<a.length;f++){const _=u[f];h.push(null!=_?Array.from(_):null)}}(Po,this.ngContentSelectors,u),vi=function yk(o,a,u,h,f,_){const w=gr(),E=f[vt],I=Cr(w,f);NE(E,f,w,u,null,h);for(let k=0;k<u.length;k++)Jr(Xa(f,E,w.directiveStart+k,w),f);ec(E,f,w),I&&Jr(I,f);const N=Xa(f,E,w.directiveStart+w.componentOffset,w);if(o[zn]=f[zn]=N,null!==_)for(const k of _)k(N,a);return I_(E,w,o),N}(lc,pu,Ff,Lf,wn,[B_]),k_(an,wn,null)}finally{Sr()}return new Y0(this.componentType,vi,Nr(Po,wn),wn,Po)}}class Y0 extends $s{constructor(a,u,h,f,_){super(),this.location=h,this._rootLView=f,this._tNode=_,this.previousInputValues=null,this.instance=u,this.hostView=this.changeDetectorRef=new vk(f),this.componentType=a}setInput(a,u){const h=this._tNode.inputs;let f;if(null!==h&&(f=h[a])){if(this.previousInputValues??=new Map,this.previousInputValues.has(a)&&Object.is(this.previousInputValues.get(a),u))return;const _=this._rootLView;OE(_[vt],_,f,a,u),this.previousInputValues.set(a,u),Jc(Tr(this._tNode.index,_))}}get injector(){return new mn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function B_(){const o=gr();zo(Ue()[vt],o)}function V_(o){let a=function BE(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),u=!0;const h=[o];for(;a;){let f;if(cs(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new pe(903,!1);f=a.\u0275dir}if(f){if(u){h.push(f);const w=o;w.inputs=U_(o.inputs),w.inputTransforms=U_(o.inputTransforms),w.declaredInputs=U_(o.declaredInputs),w.outputs=U_(o.outputs);const E=f.hostBindings;E&&OA(o,E);const I=f.viewQuery,N=f.contentQueries;if(I&&K0(o,I),N&&wk(o,N),Z(o.inputs,f.inputs),Z(o.declaredInputs,f.declaredInputs),Z(o.outputs,f.outputs),null!==f.inputTransforms&&(null===w.inputTransforms&&(w.inputTransforms={}),Z(w.inputTransforms,f.inputTransforms)),cs(f)&&f.data.animation){const k=o.data;k.animation=(k.animation||[]).concat(f.data.animation)}}const _=f.features;if(_)for(let w=0;w<_.length;w++){const E=_[w];E&&E.ngInherit&&E(o),E===V_&&(u=!1)}}a=Object.getPrototypeOf(a)}!function Z0(o){let a=0,u=null;for(let h=o.length-1;h>=0;h--){const f=o[h];f.hostVars=a+=f.hostVars,f.hostAttrs=Oa(f.hostAttrs,u=Oa(u,f.hostAttrs))}}(h)}function U_(o){return o===Ks?{}:o===vn?[]:o}function K0(o,a){const u=o.viewQuery;o.viewQuery=u?(h,f)=>{a(h,f),u(h,f)}:a}function wk(o,a){const u=o.contentQueries;o.contentQueries=u?(h,f,_)=>{a(h,f,_),u(h,f,_)}:a}function OA(o,a){const u=o.hostBindings;o.hostBindings=u?(h,f)=>{a(h,f),u(h,f)}:a}function Q0(o){return a=>{a.findHostDirectiveDefs=J0,a.hostDirectives=(Array.isArray(o)?o:o()).map(u=>"function"==typeof u?{directive:$e(u),inputs:Ks,outputs:Ks}:{directive:$e(u.directive),inputs:VE(u.inputs),outputs:VE(u.outputs)})}}function J0(o,a,u){if(null!==o.hostDirectives)for(const h of o.hostDirectives){const f=Ni(h.directive);X0(f.declaredInputs,h.inputs),J0(f,a,u),u.set(f,h),a.push(f)}}function VE(o){if(void 0===o||0===o.length)return Ks;const a={};for(let u=0;u<o.length;u+=2)a[o[u]]=o[u+1];return a}function X0(o,a){for(const u in a)a.hasOwnProperty(u)&&(o[a[u]]=o[u])}function yd(o){const a=o.inputConfig,u={};for(const h in a)if(a.hasOwnProperty(h)){const f=a[h];Array.isArray(f)&&f[2]&&(u[h]=f[2])}o.inputTransforms=u}function j_(o){return!!cg(o)&&(Array.isArray(o)||!(o instanceof Map)&&Symbol.iterator in o)}function cg(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function sl(o,a,u){return o[a]=u}function ug(o,a){return o[a]}function xr(o,a,u){return!Object.is(o[a],u)&&(o[a]=u,!0)}function lf(o,a,u,h){const f=xr(o,a,u);return xr(o,a+1,h)||f}function No(o,a,u,h,f){const _=lf(o,a,u,h);return xr(o,a+2,f)||_}function xo(o,a,u,h,f,_){const w=lf(o,a,u,h);return lf(o,a+2,f,_)||w}function Yn(o,a,u,h){const f=Ue();return xr(f,Ka(),a)&&(gn(),rl(Xn(),f,o,a,u,h)),Yn}function wd(o,a,u,h){return xr(o,Ka(),u)?a+fe(u)+h:rn}function HA(o,a,u,h,f,_,w,E){const I=Ue(),N=gn(),k=o+ln,j=N.firstCreatePass?function hV(o,a,u,h,f,_,w,E,I){const N=a.consts,k=vd(a,o,4,w||null,ds(N,E));ME(a,u,k,ds(N,I)),zo(a,k);const j=k.tView=tf(2,k,h,f,_,a.directiveRegistry,a.pipeRegistry,null,a.schemas,N,null);return null!==a.queries&&(a.queries.template(a,k),j.queries=a.queries.embeddedTView(k)),k}(k,N,I,a,u,h,f,_,w):N.data[k];pa(j,!1);const K=YE(N,I,j,o);fn()&&s0(N,I,K,j),Jr(K,I),O_(I,I[k]=og(K,I,K,j)),Ts(j)&&S_(N,I,j),null!=w&&A_(I,j,E)}let YE=function on(o,a,u,h){return er(!0),a[Wt].createComment("")};function Bt(o){return Ya(function Hm(){return qt.lFrame.contextLView}(),ln+o)}function hf(o,a,u){const h=Ue();return xr(h,Ka(),a)&&Ns(gn(),Xn(),h,o,a,h[Wt],u,!1),hf}function Rn(o,a,u,h,f){const w=f?"class":"style";OE(o,u,a.inputs[w],w,h)}function ki(o,a,u,h){const f=Ue(),_=gn(),w=ln+o,E=f[Wt],I=_.firstCreatePass?function Nk(o,a,u,h,f,_){const w=a.consts,I=vd(a,o,2,h,ds(w,f));return ME(a,u,I,ds(w,_)),null!==I.attrs&&$0(I,I.attrs,!1),null!==I.mergedAttrs&&$0(I,I.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,I),I}(w,_,f,a,u,h):_.data[w],N=tw(_,f,I,E,a,o);f[w]=N;const k=Ts(I);return pa(I,!0),l1(E,N,I),32!=(32&I.flags)&&fn()&&s0(_,f,N,I),0===function Uu(){return qt.lFrame.elementDepthCount}()&&Jr(N,f),function pr(){qt.lFrame.elementDepthCount++}(),k&&(S_(_,f,I),I_(_,I,f)),null!==h&&A_(f,I),ki}function ft(){let o=gr();Za()?Ah():(o=o.parent,pa(o,!1));const a=o;(function Hu(o){return qt.skipHydrationRootTNode===o})(a)&&function Sh(){qt.skipHydrationRootTNode=null}(),function vp(){qt.lFrame.elementDepthCount--}();const u=gn();return u.firstCreatePass&&(zo(u,o),Ou(o)&&u.queries.elementEnd(o)),null!=a.classesWithoutHost&&function Ep(o){return 0!=(8&o.flags)}(a)&&Rn(u,a,Ue(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function Cp(o){return 0!=(16&o.flags)}(a)&&Rn(u,a,Ue(),a.stylesWithoutHost,!1),ft}function gg(o,a,u,h){return ki(o,a,u,h),ft(),gg}let tw=(o,a,u,h,f,_)=>(er(!0),dd(h,f,function $i(){return qt.lFrame.currentNamespace}()));function iw(o,a,u){const h=Ue(),f=gn(),_=o+ln,w=f.firstCreatePass?function nw(o,a,u,h,f){const _=a.consts,w=ds(_,h),E=vd(a,o,8,"ng-container",w);return null!==w&&$0(E,w,!0),ME(a,u,E,ds(_,f)),null!==a.queries&&a.queries.elementStart(a,E),E}(_,f,h,a,u):f.data[_];pa(w,!0);const E=KE(f,h,w,o);return h[_]=E,fn()&&s0(f,h,E,w),Jr(E,h),Ts(w)&&(S_(f,h,w),I_(f,w,h)),null!=u&&A_(h,w),iw}function Cd(){let o=gr();const a=gn();return Za()?Ah():(o=o.parent,pa(o,!1)),a.firstCreatePass&&(zo(a,o),Ou(o)&&a.queries.elementEnd(o)),Cd}let KE=(o,a,u,h)=>(er(!0),zh(a[Wt],""));function JE(){return Ue()}function rw(o){return!!o&&"function"==typeof o.then}function tu(o){return!!o&&"function"==typeof o.subscribe}function Y_(o,a,u,h){const f=Ue(),_=gn(),w=gr();return function Da(o,a,u,h,f,_,w){const E=Ts(h),N=o.firstCreatePass&&wA(o),k=a[zn],j=sf(a);let K=!0;if(3&h.type||w){const Qe=Cr(h,a),mt=w?w(Qe):Qe,Ut=j.length,qe=w?wn=>w(Un(wn[h.index])):h.index;let an=null;if(!w&&E&&(an=function sw(o,a,u,h){const f=o.cleanup;if(null!=f)for(let _=0;_<f.length-1;_+=2){const w=f[_];if(w===u&&f[_+1]===h){const E=a[yc],I=f[_+2];return E.length>I?E[I]:null}"string"==typeof w&&(_+=2)}return null}(o,a,f,h.index)),null!==an)(an.__ngLastListenerFn__||an).__ngNextListenerFn__=_,an.__ngLastListenerFn__=_,K=!1;else{_=mg(h,a,k,_,!1);const wn=u.listen(mt,f,_);j.push(_,wn),N&&N.push(f,qe,Ut,Ut+1)}}else _=mg(h,a,k,_,!1);const oe=h.outputs;let Re;if(K&&null!==oe&&(Re=oe[f])){const Qe=Re.length;if(Qe)for(let mt=0;mt<Qe;mt+=2){const vi=a[Re[mt]][Re[mt+1]].subscribe(_),Po=j.length;j.push(_,vi),N&&N.push(f,h.index,Po,-(Po+1))}}}(_,f,f[Wt],w,o,a,h),Y_}function GA(o,a,u,h){try{return Qs(6,a,u),!1!==u(h)}catch(f){return RE(o,f),!1}finally{Qs(7,a,u)}}function mg(o,a,u,h,f){return function _(w){if(w===Function)return h;Jc(o.componentOffset>-1?Tr(o.index,a):a);let I=GA(a,u,h,w),N=_.__ngNextListenerFn__;for(;N;)I=GA(a,u,N,w)&&I,N=N.__ngNextListenerFn__;return f&&!1===I&&w.preventDefault(),I}}function nu(o=1){return function Qa(o){return(qt.lFrame.contextLView=function Jn(o,a){for(;o>0;)a=a[Uo],o--;return a}(o,qt.lFrame.contextLView))[zn]}(o)}function Rk(o,a){let u=null;const h=function Jf(o){const a=o.attrs;if(null!=a){const u=a.indexOf(5);if(!(1&u))return a[u+1]}return null}(o);for(let f=0;f<a.length;f++){const _=a[f];if("*"!==_){if(null===h?Su(o,_,!0):Xf(h,_))return f}else u=f}return u}function Td(o){const a=Ue()[gi][Ji];if(!a.projection){const h=a.projection=tl(o?o.length:1,null),f=h.slice();let _=a.child;for(;null!==_;){const w=o?Rk(_,o):0;null!==w&&(f[w]?f[w].projectionNext=_:h[w]=_,f[w]=_),_=_.next}}}function XE(o,a=0,u){const h=Ue(),f=gn(),_=vd(f,ln+o,16,null,u||null);null===_.projection&&(_.projection=a),Ah(),(!h[Hs]||To())&&32!=(32&_.flags)&&function VD(o,a,u){a0(a[Wt],0,a,u,RD(o,u,a),PD(u.parent||a[Ji],u,a))}(f,h,_)}function Z_(o,a,u){return ow(o,"",a,"",u),Z_}function ow(o,a,u,h,f){const _=Ue(),w=wd(_,a,u,h);return w!==rn&&Ns(gn(),Xn(),_,o,w,_[Wt],f,!1),ow}function Xo(o,a){return o<<17|a<<2}function iu(o){return o>>17&32767}function nC(o){return 2|o}function pf(o){return(131068&o)>>2}function iC(o,a){return-131069&o|a<<2}function rC(o){return 1|o}function qA(o,a,u,h,f){const _=o[u+1],w=null===a;let E=h?iu(_):pf(_),I=!1;for(;0!==E&&(!1===I||w);){const k=o[E+1];Fk(o[E],a)&&(I=!0,o[E+1]=h?rC(k):nC(k)),E=h?iu(k):pf(k)}I&&(o[u+1]=h?nC(_):rC(_))}function Fk(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&Uc(o,a)>=0}const ts={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function YA(o){return o.substring(ts.key,ts.keyEnd)}function sC(o,a){const u=ts.textEnd;return u===a?-1:(a=ts.keyEnd=function lC(o,a,u){for(;a<u&&o.charCodeAt(a)>32;)a++;return a}(o,ts.key=a,u),yg(o,a,u))}function yg(o,a,u){for(;a<u&&o.charCodeAt(a)<=32;)a++;return a}function wg(o,a,u){return Ea(o,a,u,!1),wg}function ns(o,a){return Ea(o,a,null,!0),ns}function gf(o){!function al(o,a,u,h){const f=gn(),_=Io(2);f.firstUpdatePass&&KA(f,null,_,h);const w=Ue();if(u!==rn&&xr(w,_,u)){const E=f.data[at()];if(dC(E,h)&&!jr(f,_)){let I=h?E.classesWithoutHost:E.stylesWithoutHost;null!==I&&(u=Ze(I,u||"")),Rn(f,E,w,u,h)}else!function cw(o,a,u,h,f,_,w,E){f===rn&&(f=vn);let I=0,N=0,k=0<f.length?f[0]:null,j=0<_.length?_[0]:null;for(;null!==k||null!==j;){const K=I<f.length?f[I+1]:void 0,oe=N<_.length?_[N+1]:void 0;let Qe,Re=null;k===j?(I+=2,N+=2,K!==oe&&(Re=j,Qe=oe)):null===j||null!==k&&k<j?(I+=2,Re=k):(N+=2,Re=j,Qe=oe),null!==Re&&au(o,a,u,h,Re,Qe,w,E),k=I<f.length?f[I]:null,j=N<_.length?_[N]:null}}(f,E,w,w[Wt],w[_+1],w[_+1]=function Uk(o,a,u){if(null==u||""===u)return vn;const h=[],f=ps(u);if(Array.isArray(f))for(let _=0;_<f.length;_++)o(h,f[_],!0);else if("object"==typeof f)for(const _ in f)f.hasOwnProperty(_)&&o(h,_,f[_]);else"string"==typeof f&&a(h,f);return h}(o,a,u),h,_)}}(Ad,ir,o,!0)}function ir(o,a){for(let u=function Bk(o){return function aC(o){ts.key=0,ts.keyEnd=0,ts.value=0,ts.valueEnd=0,ts.textEnd=o.length}(o),sC(o,yg(o,0,ts.textEnd))}(a);u>=0;u=sC(a,u))fs(o,YA(a),!0)}function Ea(o,a,u,h){const f=Ue(),_=gn(),w=Io(2);_.firstUpdatePass&&KA(_,o,w,h),a!==rn&&xr(f,w,a)&&au(_,_.data[at()],f,f[Wt],o,f[w+1]=function Nd(o,a){return null==o||""===o||("string"==typeof a?o+=a:"object"==typeof o&&(o=ae(ps(o)))),o}(a,u),h,w)}function jr(o,a){return a>=o.expandoStartIndex}function KA(o,a,u,h){const f=o.data;if(null===f[u+1]){const _=f[at()],w=jr(o,u);dC(_,h)&&null===a&&!w&&(a=!1),a=function Sd(o,a,u,h){const f=wp(o);let _=h?a.residualClasses:a.residualStyles;if(null===f)0===(h?a.classBindings:a.styleBindings)&&(u=su(u=bg(null,o,a,u,h),a.attrs,h),_=null);else{const w=a.directiveStylingLast;if(-1===w||o[w]!==f)if(u=bg(f,o,a,u,h),null===_){let I=function vr(o,a,u){const h=u?a.classBindings:a.styleBindings;if(0!==pf(h))return o[iu(h)]}(o,a,h);void 0!==I&&Array.isArray(I)&&(I=bg(null,o,a,I[1],h),I=su(I,a.attrs,h),function ru(o,a,u,h){o[iu(u?a.classBindings:a.styleBindings)]=h}(o,a,h,I))}else _=function lw(o,a,u){let h;const f=a.directiveEnd;for(let _=1+a.directiveStylingLast;_<f;_++)h=su(h,o[_].hostAttrs,u);return su(h,a.attrs,u)}(o,a,h)}return void 0!==_&&(h?a.residualClasses=_:a.residualStyles=_),u}(f,_,a,h),function kk(o,a,u,h,f,_){let w=_?a.classBindings:a.styleBindings,E=iu(w),I=pf(w);o[h]=u;let k,N=!1;if(Array.isArray(u)?(k=u[1],(null===k||Uc(u,k)>0)&&(N=!0)):k=u,f)if(0!==I){const K=iu(o[E+1]);o[h+1]=Xo(K,E),0!==K&&(o[K+1]=iC(o[K+1],h)),o[E+1]=function WA(o,a){return 131071&o|a<<17}(o[E+1],h)}else o[h+1]=Xo(E,0),0!==E&&(o[E+1]=iC(o[E+1],h)),E=h;else o[h+1]=Xo(I,0),0===E?E=h:o[I+1]=iC(o[I+1],h),I=h;N&&(o[h+1]=nC(o[h+1])),qA(o,k,h,!0),qA(o,k,h,!1),function Pk(o,a,u,h,f){const _=f?o.residualClasses:o.residualStyles;null!=_&&"string"==typeof a&&Uc(_,a)>=0&&(u[h+1]=rC(u[h+1]))}(a,k,o,h,_),w=Xo(E,I),_?a.classBindings=w:a.styleBindings=w}(f,_,a,u,w,h)}}function bg(o,a,u,h,f){let _=null;const w=u.directiveEnd;let E=u.directiveStylingLast;for(-1===E?E=u.directiveStart:E++;E<w&&(_=a[E],h=su(h,_.hostAttrs,f),_!==o);)E++;return null!==o&&(u.directiveStylingLast=E),h}function su(o,a,u){const h=u?1:2;let f=-1;if(null!==a)for(let _=0;_<a.length;_++){const w=a[_];"number"==typeof w?f=w:f===h&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),fs(o,w,!!u||a[++_]))}return void 0===o?null:o}function Ad(o,a,u){const h=String(a);""!==h&&!h.includes(" ")&&fs(o,h,u)}function au(o,a,u,h,f,_,w,E){if(!(3&a.type))return;const I=o.data,N=I[E+1],k=function Ok(o){return 1==(1&o)}(N)?ll(I,a,u,f,pf(N),w):void 0;Md(k)||(Md(_)||function aw(o){return 2==(2&o)}(N)&&(_=ll(I,null,u,f,E,w)),function PO(o,a,u,h,f){if(a)f?o.addClass(u,h):o.removeClass(u,h);else{let _=-1===h.indexOf("-")?void 0:Gc.DashCase;null==f?o.removeStyle(u,h,_):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),_|=Gc.Important),o.setStyle(u,h,f,_))}}(h,w,qa(at(),u),f,_))}function ll(o,a,u,h,f,_){const w=null===a;let E;for(;f>0;){const I=o[f],N=Array.isArray(I),k=N?I[1]:I,j=null===k;let K=u[f+1];K===rn&&(K=j?vn:void 0);let oe=j?Lh(K,h):k===h?K:void 0;if(N&&!Md(oe)&&(oe=Lh(I,h)),Md(oe)&&(E=oe,w))return E;const Re=o[f+1];f=w?iu(Re):pf(Re)}if(null!==a){let I=_?a.residualClasses:a.residualStyles;null!=I&&(E=Lh(I,h))}return E}function Md(o){return void 0!==o}function dC(o,a){return 0!=(o.flags&(a?8:16))}function mf(o,a=""){const u=Ue(),h=gn(),f=o+ln,_=h.firstCreatePass?vd(h,f,1,a,null):h.data[f],w=uw(h,u,_,a,o);u[f]=w,fn()&&s0(h,u,w,_),pa(_,!1)}let uw=(o,a,u,h,f)=>(er(!0),ud(a[Wt],h));function K_(o){return xd("",o,""),K_}function xd(o,a,u){const h=Ue(),f=wd(h,o,a,u);return f!==rn&&function tc(o,a,u){const h=qa(a,o);!function o_(o,a,u){o.setValue(a,u)}(o[Wt],h,u)}(h,at(),f),xd}function EC(o,a,u){const h=Ue();return xr(h,Ka(),a)&&Ns(gn(),Xn(),h,o,a,h[Wt],u,!0),EC}function CC(o,a,u){const h=Ue();if(xr(h,Ka(),a)){const _=gn(),w=Xn();Ns(_,w,h,o,a,bA(wp(_.data),w,h),u,!0)}return CC}const lu=void 0;var J_=["en",[["a","p"],["AM","PM"],lu],[["AM","PM"],lu,lu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],lu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],lu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",lu,"{1} 'at' {0}",lu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function vf(o){const u=Math.floor(Math.abs(o)),h=o.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===h?1:5}];let cu={};function hw(o,a,u){"string"!=typeof a&&(u=a,a=o[yf.LocaleId]),a=a.toLowerCase().replace(/_/g,"-"),cu[a]=o,u&&(cu[a][yf.ExtraData]=u)}function fw(o){const a=function IC(o){return o.toLowerCase().replace(/_/g,"-")}(o);let u=TC(a);if(u)return u;const h=a.split("-")[0];if(u=TC(h),u)return u;if("en"===h)return J_;throw new pe(701,!1)}function ic(o){return fw(o)[yf.PluralCase]}function TC(o){return o in cu||(cu[o]=Vn.ng&&Vn.ng.common&&Vn.ng.common.locales&&Vn.ng.common.locales[o]),cu[o]}var yf=function(o){return o[o.LocaleId=0]="LocaleId",o[o.DayPeriodsFormat=1]="DayPeriodsFormat",o[o.DayPeriodsStandalone=2]="DayPeriodsStandalone",o[o.DaysFormat=3]="DaysFormat",o[o.DaysStandalone=4]="DaysStandalone",o[o.MonthsFormat=5]="MonthsFormat",o[o.MonthsStandalone=6]="MonthsStandalone",o[o.Eras=7]="Eras",o[o.FirstDayOfWeek=8]="FirstDayOfWeek",o[o.WeekendRange=9]="WeekendRange",o[o.DateFormat=10]="DateFormat",o[o.TimeFormat=11]="TimeFormat",o[o.DateTimeFormat=12]="DateTimeFormat",o[o.NumberSymbols=13]="NumberSymbols",o[o.NumberFormats=14]="NumberFormats",o[o.CurrencyCode=15]="CurrencyCode",o[o.CurrencySymbol=16]="CurrencySymbol",o[o.CurrencyName=17]="CurrencyName",o[o.Currencies=18]="Currencies",o[o.Directionality=19]="Directionality",o[o.PluralCase=20]="PluralCase",o[o.ExtraData=21]="ExtraData",o}(yf||{});const Ca="en-US",Tg={marker:"element"},wf={marker:"ICU"};var ws=function(o){return o[o.SHIFT=2]="SHIFT",o[o.APPEND_EAGERLY=1]="APPEND_EAGERLY",o[o.COMMENT=2]="COMMENT",o}(ws||{});let gw=Ca;function Ig(o){(function ut(o,a){null==o&&it(a,o,null,"!=")})(o,"Expected localeId to be defined"),"string"==typeof o&&(gw=o.toLowerCase().replace(/_/g,"-"))}function AC(o,a,u){const h=a.insertBeforeIndex,f=Array.isArray(h)?h[0]:h;return null===f?n1(o,0,u):Un(u[f])}function hM(o,a,u,h,f){const _=a.insertBeforeIndex;if(Array.isArray(_)){let w=h,E=null;if(3&a.type||(E=w,w=f),null!==w&&-1===a.componentOffset)for(let I=1;I<_.length;I++)ql(o,w,u[_[I]],E,!1)}}function rc(o,a){if(o.push(a),o.length>1)for(let u=o.length-2;u>=0;u--){const h=o[u];fM(h)||ko(h,a)&&null===pM(h)&&ev(h,a.index)}}function fM(o){return!(64&o.type)}function ko(o,a){return fM(a)||o.index>a.index}function pM(o){const a=o.insertBeforeIndex;return Array.isArray(a)?a[0]:a}function ev(o,a){const u=o.insertBeforeIndex;Array.isArray(u)?u[0]=a:(i1(AC,hM),o.insertBeforeIndex=a)}function tv(o,a,u){const h=L0(o,u,64,null,null);return rc(a,h),h}function wM(){const o=[];let u,h,a=-1;function _(E,I){a=0;const N=function mw(o,a){const u=a[o.currentCaseLViewIndex];return null===u?u:u<0?~u:u}(E,I);h=null!==N?E.remove[N]:vn}function w(){if(a<h.length){const E=h[a++];return E>0?u[E]:(o.push(a,h),_(u[vt].data[~E],u),w())}return 0===o.length?null:(h=o.pop(),a=o.pop(),w())}return function f(E,I){for(u=I;o.length;)o.pop();return _(E.value,I),w}}const yw=/\ufffd(\d+):?\d*\ufffd/gi,ww=/\ufffd(\d+)\ufffd/,iv=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Ng="\ufffd",qk=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,rv=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,Yk=/\uE500/g;function RC(o,a,u,h,f,_,w){const E=ig(o,h,1,null);let I=E<<ws.SHIFT,N=Ll();a===N&&(N=null),null===N&&(I|=ws.APPEND_EAGERLY),w&&(I|=ws.COMMENT,function Ye(o){void 0===Y&&(Y=o())}(wM)),f.push(I,null===_?"":_);const k=L0(o,E,w?32:1,null===_?"":_,null);rc(u,k);const j=k.index;return pa(k,!1),null!==N&&a!==N&&function gM(o,a){let u=o.insertBeforeIndex;null===u?(i1(AC,hM),u=o.insertBeforeIndex=[null,a]):(function ci(o,a,u){o!=a&&it(u,o,a,"==")}(Array.isArray(u),!0,"Expecting array here"),u.push(a))}(N,j),k}function EM(o,a,u,h,f,_,w){const E=w.match(yw),I=RC(o,a,u,_,h,E?null:w,!1);E&&oc(f,w,I.index,null,0,null)}function oc(o,a,u,h,f,_){const w=o.length,E=w+1;o.push(null,null);const I=w+2,N=a.split(yw);let k=0;for(let j=0;j<N.length;j++){const K=N[j];if(1&j){const oe=f+parseInt(K,10);o.push(-1-oe),k|=bw(oe)}else""!==K&&o.push(K)}return o.push(u<<2|(h?1:0)),h&&o.push(h,_),o[w]=k,o[E]=o.length-I,k}function bw(o){return 1<<Math.min(o,31)}function Dw(o){let a,_,u="",h=0,f=!1;for(;null!==(a=qk.exec(o));)f?a[0]===`${Ng}/*${_}${Ng}`&&(h=a.index,f=!1):(u+=o.substring(h,a.index+a[0].length),_=a[1],f=!0);return u+=o.slice(h),u}function TM(o,a,u,h,f,_){let w=0;const E={type:f.type,currentCaseLViewIndex:ig(o,a,1,null),anchorIdx:_,cases:[],create:[],remove:[],update:[]};(function SM(o,a,u){o.push(bw(a.mainBinding),2,-1-a.mainBinding,u<<2|2)})(u,f,_),function sc(o,a,u){const h=o.data[a];null===h?o.data[a]=u:h.value=u}(o,_,E);const I=f.values;for(let N=0;N<I.length;N++){const k=I[N],j=[];for(let K=0;K<k.length;K++){const oe=k[K];if("string"!=typeof oe){const Re=j.push(oe)-1;k[K]=`\x3c!--\ufffd${Re}\ufffd--\x3e`}}w=IM(o,E,a,u,h,f.cases[N],k.join(""),j)|w}w&&function Kk(o,a,u){o.push(a,1,u<<2|3)}(u,w,_)}function Gr(o){const a=[],u=[];let h=1,f=0;const _=kn(o=o.replace(iv,function(w,E,I){return h="select"===I?0:1,f=parseInt(E.slice(1),10),""}));for(let w=0;w<_.length;){let E=_[w++].trim();1===h&&(E=E.replace(/\s*(?:=)?(\w+)\s*/,"$1")),E.length&&a.push(E);const I=kn(_[w++]);a.length>u.length&&u.push(I)}return{type:h,mainBinding:f,cases:a,values:u}}function kn(o){if(!o)return[];let a=0;const u=[],h=[],f=/[{}]/g;let _;for(f.lastIndex=0;_=f.exec(o);){const E=_.index;if("}"==_[0]){if(u.pop(),0==u.length){const I=o.substring(a,E);iv.test(I)?h.push(Gr(I)):h.push(I),a=E+1}}else{if(0==u.length){const I=o.substring(a,E);h.push(I),a=E+1}u.push("{")}}const w=o.substring(a);return h.push(w),h}function IM(o,a,u,h,f,_,w,E){const I=[],N=[],k=[];a.cases.push(_),a.create.push(I),a.remove.push(N),a.update.push(k);const K=g1(Yc()).getInertBodyElement(w),oe=qD(K)||K;return oe?PC(o,a,u,h,I,N,k,oe,f,E,0):0}function PC(o,a,u,h,f,_,w,E,I,N,k){let j=0,K=E.firstChild;for(;K;){const oe=ig(o,u,1,null);switch(K.nodeType){case Node.ELEMENT_NODE:const Re=K,Qe=Re.tagName.toLowerCase();if(WD.hasOwnProperty(Qe)){Tw(f,Tg,Qe,I,oe),o.data[oe]=Qe;const an=Re.attributes;for(let wn=0;wn<an.length;wn++){const vi=an.item(wn),Po=vi.name.toLowerCase();vi.value.match(yw)?Yh.hasOwnProperty(Po)&&oc(w,vi.value,oe,vi.name,0,As[Po]?d0:null):AM(f,oe,vi)}j=PC(o,a,u,h,f,_,w,K,oe,N,k+1)|j,Ew(_,oe,k)}break;case Node.TEXT_NODE:const mt=K.textContent||"",Ut=mt.match(yw);Tw(f,null,Ut?"":mt,I,oe),Ew(_,oe,k),Ut&&(j=oc(w,mt,oe,null,0,null)|j);break;case Node.COMMENT_NODE:const qe=ww.exec(K.textContent||"");if(qe){const wn=N[parseInt(qe[1],10)];Tw(f,wf,"",I,oe),TM(o,u,h,I,wn,oe),Cw(_,oe,k)}}K=K.nextSibling}return j}function Ew(o,a,u){0===u&&o.push(a)}function Cw(o,a,u){0===u&&(o.push(~a),o.push(a))}function Tw(o,a,u,h,f){null!==a&&o.push(a),o.push(u,f,function MC(o,a,u){return o|a<<17|u<<1}(0,h,f))}function AM(o,a,u){o.push(a<<1|1,u.name,u.value)}function FC(o,a,u=-1){const h=gn(),f=Ue(),_=ln+o,w=ds(h.consts,a),E=Ll();h.firstCreatePass&&function uu(o,a,u,h,f,_){const w=Ll(),E=[],I=[],N=[[]];f=function Zk(o,a){if(function kC(o){return-1===o}(a))return Dw(o);{const u=o.indexOf(`:${a}${Ng}`)+2+a.toString().length,h=o.search(new RegExp(`${Ng}\\/\\*\\d+:${a}${Ng}`));return Dw(o.substring(u,h))}}(f,_);const k=function DM(o){return o.replace(Yk," ")}(f).split(rv);for(let j=0;j<k.length;j++){let K=k[j];if(1&j){const oe=47===K.charCodeAt(0),Qe=(K.charCodeAt(oe?1:0),ln+Number.parseInt(K.substring(oe?2:1)));if(oe)N.shift(),pa(Ll(),!1);else{const mt=tv(o,N[0],Qe);N.unshift([]),pa(mt,!0)}}else{const oe=kn(K);for(let Re=0;Re<oe.length;Re++){let Qe=oe[Re];if(1&Re){const mt=Qe;if("object"!=typeof mt)throw new Error(`Unable to parse ICU expression in "${f}" message.`);TM(o,u,I,a,mt,RC(o,w,N[0],u,E,"",!0).index)}else""!==Qe&&EM(o,w,N[0],E,I,u,Qe)}}}o.data[h]={create:E,update:I}}(h,null===E?0:E.index,f,_,w,u),2===h.type?f[gi][zt]|=32:f[zt]|=32;const I=h.data[_],k=t1(h,E===f[Ji]?null:E,f);(function $k(o,a,u,h){const f=o[Wt];for(let _=0;_<a.length;_++){const w=a[_++],E=a[_],N=(w&ws.APPEND_EAGERLY)===ws.APPEND_EAGERLY,k=w>>>ws.SHIFT;let j=o[k];null===j&&(j=o[k]=(w&ws.COMMENT)===ws.COMMENT?f.createComment(E):ud(f,E)),N&&null!==u&&ql(f,u,j,h,!1)}})(f,I.create,k,E&&8&E.type?f[E.index]:null),xh(!0)}function RM(o,a,u){FC(o,a,u),function LC(){xh(!1)}()}function VC(o,a,u,h,f){if(o=$e(o),Array.isArray(o))for(let _=0;_<o.length;_++)VC(o[_],a,u,h,f);else{const _=gn(),w=Ue(),E=gr();let I=Zh(o)?o:$e(o.provide);const N=R1(o),k=1048575&E.providerIndexes,j=E.directiveStart,K=E.providerIndexes>>20;if(Zh(o)||!o.multi){const oe=new dn(N,f,ef),Re=Mw(I,a,f?k:k+K,j);-1===Re?(Hl(mr(E,w),_,I),rr(_,o,a.length),a.push(I),E.directiveStart++,E.directiveEnd++,f&&(E.providerIndexes+=1048576),u.push(oe),w.push(oe)):(u[Re]=oe,w[Re]=oe)}else{const oe=Mw(I,a,k+K,j),Re=Mw(I,a,k,k+K),mt=Re>=0&&u[Re];if(f&&!mt||!f&&!(oe>=0&&u[oe])){Hl(mr(E,w),_,I);const Ut=function PM(o,a,u,h,f){const _=new dn(o,u,ef);return _.multi=[],_.index=a,_.componentProviders=0,Aw(_,f,h&&!u),_}(f?ac:cv,u.length,f,h,N);!f&&mt&&(u[Re].providerFactory=Ut),rr(_,o,a.length,0),a.push(I),E.directiveStart++,E.directiveEnd++,f&&(E.providerIndexes+=1048576),u.push(Ut),w.push(Ut)}else rr(_,o,oe>-1?oe:Re,Aw(u[f?Re:oe],N,!f&&h));!f&&h&&mt&&u[Re].componentProviders++}}}function rr(o,a,u,h){const f=Zh(a),_=function JO(o){return!!o.useClass}(a);if(f||_){const I=(_?$e(a.useClass):a).prototype.ngOnDestroy;if(I){const N=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const k=N.indexOf(u);-1===k?N.push(u,[h,I]):N[k+1].push(h,I)}else N.push(u,I)}}}function Aw(o,a,u){return u&&o.componentProviders++,o.multi.push(a)-1}function Mw(o,a,u,h){for(let f=u;f<h;f++)if(a[f]===o)return f;return-1}function cv(o,a,u,h){return uv(this.multi,[])}function ac(o,a,u,h){const f=this.multi;let _;if(this.providerFactory){const w=this.providerFactory.componentProviders,E=Xa(u,u[vt],this.providerFactory.index,h);_=E.slice(0,w),uv(f,_);for(let I=w;I<E.length;I++)_.push(E[I])}else _=[],uv(f,_);return _}function uv(o,a){for(let u=0;u<o.length;u++)a.push((0,o[u])());return a}function Rg(o,a=[]){return u=>{u.providersResolver=(h,f)=>function kM(o,a,u){const h=gn();if(h.firstCreatePass){const f=cs(o);VC(u,h.data,h.blueprint,f,!0),VC(a,h.data,h.blueprint,f,!1)}}(h,f?f(o):o,a)}}class Od{}class UC{}function FM(o,a){return new HC(o,a??null,[])}class HC extends Od{constructor(a,u,h){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new IA(this);const f=qr(a);this._bootstrapComponents=Qc(f.bootstrap),this._r3Injector=q1(a,u,[{provide:Od,useValue:this},{provide:Qh,useValue:this.componentFactoryResolver},...h],ae(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Cf extends UC{constructor(a){super(),this.moduleType=a}create(a){return new HC(this.moduleType,a,[])}}class LM extends Od{constructor(a){super(),this.componentFactoryResolver=new IA(this),this.instance=null;const u=new eE([...a.providers,{provide:Od,useValue:this},{provide:Qh,useValue:this.componentFactoryResolver}],a.parent||g_(),a.debugName,new Set(["environment"]));this.injector=u,a.runEnvironmentInitializers&&u.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function GC(o,a,u=null){return new LM({providers:o,parent:a,debugName:u,runEnvironmentInitializers:!0}).injector}let $C=(()=>{class o{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u)){const h=M1(0,u.type),f=h.length>0?GC([h],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u,f)}return this.cachedInjectors.get(u)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=xt({token:o,providedIn:"environment",factory:()=>new o(Kt(Zl))})}return o})();function zC(o){o.getStandaloneInjector=a=>a.get($C).getOrCreateStandaloneInjector(o)}function Fd(o,a,u){const h=hs()+o,f=Ue();return f[h]===rn?sl(f,h,u?a.call(u):a()):ug(f,h)}function kg(o,a,u,h){return Pg(Ue(),hs(),o,a,u,h)}function QC(o,a,u,h,f){return Bd(Ue(),hs(),o,a,u,h,f)}function Nw(o,a,u,h,f,_){return zM(Ue(),hs(),o,a,u,h,f,_)}function xw(o,a,u,h,f,_,w){return function tT(o,a,u,h,f,_,w,E,I){const N=a+u;return xo(o,N,f,_,w,E)?sl(o,N+4,I?h.call(I,f,_,w,E):h(f,_,w,E)):Ld(o,N+4)}(Ue(),hs(),o,a,u,h,f,_,w)}function JC(o,a,u,h,f,_,w,E){const I=hs()+o,N=Ue(),k=xo(N,I,u,h,f,_);return xr(N,I+4,w)||k?sl(N,I+5,E?a.call(E,u,h,f,_,w):a(u,h,f,_,w)):ug(N,I+5)}function XC(o,a,u,h,f,_,w,E,I){const N=hs()+o,k=Ue(),j=xo(k,N,u,h,f,_);return lf(k,N+4,w,E)||j?sl(k,N+6,I?a.call(I,u,h,f,_,w,E):a(u,h,f,_,w,E)):ug(k,N+6)}function GM(o,a,u,h,f,_,w,E,I,N){const k=hs()+o,j=Ue();let K=xo(j,k,u,h,f,_);return No(j,k+4,w,E,I)||K?sl(j,k+7,N?a.call(N,u,h,f,_,w,E,I):a(u,h,f,_,w,E,I)):ug(j,k+7)}function eT(o,a,u,h){return function WM(o,a,u,h,f,_){let w=a+u,E=!1;for(let I=0;I<f.length;I++)xr(o,w++,f[I])&&(E=!0);return E?sl(o,w,h.apply(_,f)):Ld(o,w)}(Ue(),hs(),o,a,u,h)}function Ld(o,a){const u=o[a];return u===rn?void 0:u}function Pg(o,a,u,h,f,_){const w=a+u;return xr(o,w,f)?sl(o,w+1,_?h.call(_,f):h(f)):Ld(o,w+1)}function Bd(o,a,u,h,f,_,w){const E=a+u;return lf(o,E,f,_)?sl(o,E+2,w?h.call(w,f,_):h(f,_)):Ld(o,E+2)}function zM(o,a,u,h,f,_,w,E){const I=a+u;return No(o,I,f,_,w)?sl(o,I+3,E?h.call(E,f,_,w):h(f,_,w)):Ld(o,I+3)}function qM(o,a){const u=gn();let h;const f=o+ln;u.firstCreatePass?(h=function nP(o,a){if(a)for(let u=a.length-1;u>=0;u--){const h=a[u];if(o===h.name)return h}}(a,u.pipeRegistry),u.data[f]=h,h.onDestroy&&(u.destroyHooks??=[]).push(f,h.onDestroy)):h=u.data[f];const _=h.factory||(h.factory=Ha(h.type)),E=Jt(ef);try{const I=Rh(!1),N=_();return Rh(I),function Wi(o,a,u,h){u>=o.data.length&&(o.data[u]=null,o.blueprint[u]=null),a[u]=h}(u,Ue(),f,N),N}finally{Jt(E)}}function du(o,a,u){const h=o+ln,f=Ue(),_=Ya(f,h);return Sf(f,h)?Pg(f,hs(),a,_.transform,u,_):_.transform(u)}function nT(o,a,u,h){const f=o+ln,_=Ue(),w=Ya(_,f);return Sf(_,f)?Bd(_,hs(),a,w.transform,u,h,w):w.transform(u,h)}function YM(o,a,u,h,f){const _=o+ln,w=Ue(),E=Ya(w,_);return Sf(w,_)?zM(w,hs(),a,E.transform,u,h,f,E):E.transform(u,h,f)}function Sf(o,a){return o[vt].data[a].pure}function iT(){return this._results[Symbol.iterator]()}class Ow{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new wa)}constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Ow.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=iT)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,u){return this._results.reduce(a,u)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,u){const h=this;h.dirty=!1;const f=function Qr(o){return o.flat(Number.POSITIVE_INFINITY)}(a);(this._changesDetected=!function eo(o,a,u){if(o.length!==a.length)return!1;for(let h=0;h<o.length;h++){let f=o[h],_=a[h];if(u&&(f=u(f),_=u(_)),_!==f)return!1}return!0}(h._results,f,u))&&(h._results=f,h.length=f.length,h.last=f[this.length-1],h.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function QM(o,a,u,h=!0){const f=a[vt];if(function n0(o,a,u,h){const f=Er+h,_=u.length;h>0&&(u[f-1][Yr]=a),h<_-Er?(a[Yr]=u[f],Np(u,Er+h,a)):(u.push(a),a[Yr]=null),a[pi]=u;const w=a[uh];null!==w&&u!==w&&function qc(o,a){const u=o[dr];a[gi]!==a[pi][pi][gi]&&(o[Ru]=!0),null===u?o[dr]=[a]:u.push(a)}(w,a);const E=a[cr];null!==E&&E.insertView(o),a[zt]|=128}(f,a,o,u),h){const _=LD(u,o),w=a[Wt],E=l_(w,o[ur]);null!==E&&function t0(o,a,u,h,f,_){h[fi]=f,h[Ji]=a,Ss(o,h,u,1,f,_)}(f,o[Ji],w,a,E,_)}}let dv=(()=>{class o{static#e=this.__NG_ELEMENT_ID__=rP}return o})();const oT=dv,kw=class extends oT{constructor(a,u,h){super(),this._declarationLView=a,this._declarationTContainer=u,this.elementRef=h}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(a,u){return this.createEmbeddedViewImpl(a,u)}createEmbeddedViewImpl(a,u,h){const f=function rT(o,a,u,h){const f=a.tView,E=T_(o,f,u,4096&o[zt]?4096:16,null,a,null,null,null,h?.injector??null,h?.hydrationInfo??null);E[uh]=o[a.index];const N=o[cr];return null!==N&&(E[cr]=N.createEmbeddedView(f)),k_(f,E,u),E}(this._declarationLView,this._declarationTContainer,a,{injector:u,hydrationInfo:h});return new ag(f)}};function rP(){return hv(gr(),Ue())}function hv(o,a){return 4&o.type?new kw(a,o,Nr(o,a)):null}let cl=(()=>{class o{static#e=this.__NG_ELEMENT_ID__=Vg}return o})();function Vg(){return cT(gr(),Ue())}const XM=cl,Vd=class extends XM{constructor(a,u,h){super(),this._lContainer=a,this._hostTNode=u,this._hostLView=h}get element(){return Nr(this._hostTNode,this._hostLView)}get injector(){return new mn(this._hostTNode,this._hostLView)}get parentInjector(){const a=Ao(this._hostTNode,this._hostLView);if(kc(a)){const u=Ul(a,this._hostLView),h=Vl(a);return new mn(u[vt].data[h+8],u)}return new mn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const u=eN(this._lContainer);return null!==u&&u[a]||null}get length(){return this._lContainer.length-Er}createEmbeddedView(a,u,h){let f,_;"number"==typeof h?f=h:null!=h&&(f=h.index,_=h.injector);const E=a.createEmbeddedViewImpl(u||{},_,null);return this.insertImpl(E,f,false),E}createComponent(a,u,h,f,_){const w=a&&!function Kr(o){return"function"==typeof o}(a);let E;if(w)E=u;else{const Qe=u||{};E=Qe.index,h=Qe.injector,f=Qe.projectableNodes,_=Qe.environmentInjector||Qe.ngModuleRef}const I=w?a:new lg(yn(a)),N=h||this.parentInjector;if(!_&&null==I.ngModule){const mt=(w?N:this.parentInjector).get(Zl,null);mt&&(_=mt)}yn(I.componentType??{});const oe=I.create(N,f,null,_);return this.insertImpl(oe.hostView,E,false),oe}insert(a,u){return this.insertImpl(a,u,!1)}insertImpl(a,u,h){const f=a._lView;if(function Vm(o){return Ur(o[pi])}(f)){const I=this.indexOf(a);if(-1!==I)this.detach(I);else{const N=f[pi],k=new Vd(N,N[Ji],N[pi]);k.detach(k.indexOf(a))}}const w=this._adjustIndex(u),E=this._lContainer;return QM(E,f,w,!h),a.attachToViewContainerRef(),Np(Ud(E),w,a),a}move(a,u){return this.insert(a,u)}indexOf(a){const u=eN(this._lContainer);return null!==u?u.indexOf(a):-1}remove(a){const u=this._adjustIndex(a,-1),h=Xr(this._lContainer,u);h&&(Fh(Ud(this._lContainer),u),ND(h[vt],h))}detach(a){const u=this._adjustIndex(a,-1),h=Xr(this._lContainer,u);return h&&null!=Fh(Ud(this._lContainer),u)?new ag(h):null}_adjustIndex(a,u=0){return a??this.length+u}};function eN(o){return o[8]}function Ud(o){return o[8]||(o[8]=[])}function cT(o,a){let u;const h=a[o.index];return Ur(h)?u=h:(u=og(h,a,null,o),a[o.index]=u,O_(a,u)),uT(u,a,o,h),new Vd(u,o,a)}let uT=function tN(o,a,u,h){if(o[ur])return;let f;f=8&u.type?Un(h):function Hd(o,a){const u=o[Wt],h=u.createComment(""),f=Cr(a,o);return ql(u,l_(u,f),h,function Gp(o,a){return o.nextSibling(a)}(u,f),!1),h}(a,u),o[ur]=f};class Bw{constructor(a){this.queryList=a,this.matches=null}clone(){return new Bw(this.queryList)}setDirty(){this.queryList.setDirty()}}class dT{constructor(a=[]){this.queries=a}createEmbeddedView(a){const u=a.queries;if(null!==u){const h=null!==a.contentQueries?a.contentQueries[0]:u.length,f=[];for(let _=0;_<h;_++){const w=u.getByIndex(_);f.push(this.queries[w.indexInDeclarationView].clone())}return new dT(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let u=0;u<this.queries.length;u++)null!==aN(a,u).matches&&this.queries[u].setDirty()}}class pv{constructor(a,u,h=null){this.predicate=a,this.flags=u,this.read=h}}class Vw{constructor(a=[]){this.queries=a}elementStart(a,u){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(a,u)}elementEnd(a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(a)}embeddedTView(a){let u=null;for(let h=0;h<this.length;h++){const f=null!==u?u.length:0,_=this.getByIndex(h).embeddedTView(a,f);_&&(_.indexInDeclarationView=h,null!==u?u.push(_):u=[_])}return null!==u?new Vw(u):null}template(a,u){for(let h=0;h<this.queries.length;h++)this.queries[h].template(a,u)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class hT{constructor(a,u=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(a,u){this.isApplyingToNode(u)&&this.matchTNode(a,u)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,u){this.elementStart(a,u)}embeddedTView(a,u){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,u),new hT(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let h=a.parent;for(;null!==h&&8&h.type&&h.index!==u;)h=h.parent;return u===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(a,u){const h=this.metadata.predicate;if(Array.isArray(h))for(let f=0;f<h.length;f++){const _=h[f];this.matchTNodeWithReadOption(a,u,iN(u,_)),this.matchTNodeWithReadOption(a,u,Oh(u,a,_,!1,!1))}else h===dv?4&u.type&&this.matchTNodeWithReadOption(a,u,-1):this.matchTNodeWithReadOption(a,u,Oh(u,a,h,!1,!1))}matchTNodeWithReadOption(a,u,h){if(null!==h){const f=this.metadata.read;if(null!==f)if(f===y_||f===cl||f===dv&&4&u.type)this.addMatch(u.index,-2);else{const _=Oh(u,a,f,!1,!1);null!==_&&this.addMatch(u.index,_)}else this.addMatch(u.index,h)}}addMatch(a,u){null===this.matches?this.matches=[a,u]:this.matches.push(a,u)}}function iN(o,a){const u=o.localNames;if(null!==u)for(let h=0;h<u.length;h+=2)if(u[h]===a)return u[h+1];return null}function rN(o,a,u,h){return-1===u?function oP(o,a){return 11&o.type?Nr(o,a):4&o.type?hv(o,a):null}(a,o):-2===u?function Af(o,a,u){return u===y_?Nr(a,o):u===dv?hv(a,o):u===cl?cT(a,o):void 0}(o,a,h):Xa(o,o[vt],u,a)}function Ug(o,a,u,h){const f=a[cr].queries[h];if(null===f.matches){const _=o.data,w=u.matches,E=[];for(let I=0;I<w.length;I+=2){const N=w[I];E.push(N<0?null:rN(a,_[N],w[I+1],u.metadata.read))}f.matches=E}return f.matches}function Uw(o,a,u,h){const f=o.queries.getByIndex(u),_=f.matches;if(null!==_){const w=Ug(o,a,f,u);for(let E=0;E<_.length;E+=2){const I=_[E];if(I>0)h.push(w[E/2]);else{const N=_[E+1],k=a[-I];for(let j=Er;j<k.length;j++){const K=k[j];K[uh]===K[pi]&&Uw(K[vt],K,N,h)}if(null!==k[dr]){const j=k[dr];for(let K=0;K<j.length;K++){const oe=j[K];Uw(oe[vt],oe,N,h)}}}}}return h}function fT(o){const a=Ue(),u=gn(),h=Yu();bp(h+1);const f=aN(u,h);if(o.dirty&&function Bm(o){return 4==(4&o[zt])}(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const _=f.crossesNgTemplate?Uw(u,a,h,[]):Ug(u,a,f,h);o.reset(_,w_),o.notifyOnChanges()}return!0}return!1}function sN(o,a,u){const h=gn();h.firstCreatePass&&(is(h,new pv(o,a,u),-1),2==(2&a)&&(h.staticViewQueries=!0)),Hw(h,Ue(),a)}function pT(o,a,u,h){const f=gn();if(f.firstCreatePass){const _=gr();is(f,new pv(a,u,h),_.index),function lP(o,a){const u=o.contentQueries||(o.contentQueries=[]);a!==(u.length?u[u.length-1]:-1)&&u.push(o.queries.length-1,a)}(f,o),2==(2&u)&&(f.staticContentQueries=!0)}Hw(f,Ue(),u)}function oN(){return function aP(o,a){return o[cr].queries[a].queryList}(Ue(),Yu())}function Hw(o,a,u){const h=new Ow(4==(4&u));(function pA(o,a,u,h){const f=sf(a);f.push(u),o.firstCreatePass&&wA(o).push(h,f.length-1)})(o,a,h,h.destroy),null===a[cr]&&(a[cr]=new dT),a[cr].queries.push(new Bw(h))}function is(o,a,u){null===o.queries&&(o.queries=new Vw),o.queries.track(new hT(a,u))}function aN(o,a){return o.queries.getByIndex(a)}function lN(o,a){return hv(o,a)}function gv(o){return!!qr(o)}const Gg=new qn("Application Initializer");let yv=(()=>{class o{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,h)=>{this.resolve=u,this.reject=h}),this.appInits=sn(Gg,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const u=[];for(const f of this.appInits){const _=f();if(rw(_))u.push(_);else if(tu(_)){const w=new Promise((E,I)=>{_.subscribe({complete:E,error:I})});u.push(w)}}const h=()=>{this.done=!0,this.resolve()};Promise.all(u).then(()=>{h()}).catch(f=>{this.reject(f)}),0===u.length&&h(),this.initialized=!0}static#e=this.\u0275fac=function(h){return new(h||o)};static#t=this.\u0275prov=xt({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),xf=(()=>{class o{log(u){console.log(u)}warn(u){console.warn(u)}static#e=this.\u0275fac=function(h){return new(h||o)};static#t=this.\u0275prov=xt({token:o,factory:o.\u0275fac,providedIn:"platform"})}return o})();const Rf=new qn("LocaleId",{providedIn:"root",factory:()=>sn(Rf,Gt.Optional|Gt.SkipSelf)||function ST(){return typeof $localize<"u"&&$localize.locale||Ca}()}),wv=new qn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let eb=(()=>{class o{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new he.X(!1)}add(){this.hasPendingTasks.next(!0);const u=this.taskId++;return this.pendingTasks.add(u),u}remove(u){this.pendingTasks.delete(u),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(h){return new(h||o)};static#t=this.\u0275prov=xt({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();class $d{constructor(a,u){this.ngModuleFactory=a,this.componentFactories=u}}let EN=(()=>{class o{compileModuleSync(u){return new Cf(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const h=this.compileModuleSync(u),_=Qc(qr(u).declarations).reduce((w,E)=>{const I=yn(E);return I&&w.push(new lg(I)),w},[]);return new $d(h,_)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}static#e=this.\u0275fac=function(h){return new(h||o)};static#t=this.\u0275prov=xt({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();const sb=new qn(""),kf=new qn("");let BT,zg=(()=>{class o{constructor(u,h,f){this._ngZone=u,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,BT||(function Wg(o){BT=o}(f),f.addToWindow(h)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{es.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(u)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,h,f){let _=-1;h&&h>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==_),u(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:u,timeoutId:_,updateCb:f})}whenStable(u,h,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,h,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,h,f){return[]}static#e=this.\u0275fac=function(h){return new(h||o)(Kt(es),Kt(LT),Kt(kf))};static#t=this.\u0275prov=xt({token:o,factory:o.\u0275fac})}return o})(),LT=(()=>{class o{constructor(){this._applications=new Map}registerApplication(u,h){this._applications.set(u,h)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,h=!0){return BT?.findTestabilityInTree(this,u,h)??null}static#e=this.\u0275fac=function(h){return new(h||o)};static#t=this.\u0275prov=xt({token:o,factory:o.\u0275fac,providedIn:"platform"})}return o})(),zd=null;const ob=new qn("AllowMultipleToken"),Ev=new qn("PlatformDestroyListeners"),Cv=new qn("appBootstrapListener");class HT{constructor(a,u){this.name=a,this.token=u}}function jT(o,a,u=[]){const h=`Platform: ${a}`,f=new qn(h);return(_=[])=>{let w=$T();if(!w||w.injector.get(ob,!1)){const E=[...u,..._,{provide:f,useValue:!0}];o?o(E):function EP(o){if(zd&&!zd.get(ob,!1))throw new pe(400,!1);(function NN(){!function xm(o){dp=o}(()=>{throw new pe(600,!1)})})(),zd=o;const a=o.get(kN);(function RN(o){o.get(F1,null)?.forEach(u=>u())})(o)}(function GT(o=[],a){return oo.create({name:a,providers:[{provide:JD,useValue:"platform"},{provide:Ev,useValue:new Set([()=>zd=null])},...o]})}(E,h))}return function ON(o){const a=$T();if(!a)throw new pe(401,!1);return a}()}}function $T(){return zd?.get(kN)??null}let kN=(()=>{class o{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,h){const f=function zT(o="zone.js",a){return"noop"===o?new wE:"zone.js"===o?new es(a):o}(h?.ngZone,function PN(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:o?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:o?.runCoalescing??!1}}({eventCoalescing:h?.ngZoneEventCoalescing,runCoalescing:h?.ngZoneRunCoalescing}));return f.run(()=>{const _=function jC(o,a,u){return new HC(o,a,u)}(u.moduleType,this.injector,function BN(o){return[{provide:es,useFactory:o},{provide:Wp,multi:!0,useFactory:()=>{const a=sn(WT,{optional:!0});return()=>a.initialize()}},{provide:cb,useFactory:LN},{provide:N0,useFactory:x0}]}(()=>f)),w=_.injector.get(Xl,null);return f.runOutsideAngular(()=>{const E=f.onError.subscribe({next:I=>{w.handleError(I)}});_.onDestroy(()=>{Yg(this._modules,_),E.unsubscribe()})}),function ab(o,a,u){try{const h=u();return rw(h)?h.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):h}catch(h){throw a.runOutsideAngular(()=>o.handleError(h)),h}}(w,f,()=>{const E=_.injector.get(yv);return E.runInitializers(),E.donePromise.then(()=>(Ig(_.injector.get(Rf,Ca)||Ca),this._moduleDoBootstrap(_),_))})})}bootstrapModule(u,h=[]){const f=lb({},h);return function VT(o,a,u){const h=new Cf(u);return Promise.resolve(h)}(0,0,u).then(_=>this.bootstrapModuleFactory(_,f))}_moduleDoBootstrap(u){const h=u.injector.get(qg);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(f=>h.bootstrap(f));else{if(!u.instance.ngDoBootstrap)throw new pe(-403,!1);u.instance.ngDoBootstrap(h)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new pe(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const u=this._injector.get(Ev,null);u&&(u.forEach(h=>h()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(h){return new(h||o)(Kt(oo))};static#t=this.\u0275prov=xt({token:o,factory:o.\u0275fac,providedIn:"platform"})}return o})();function lb(o,a){return Array.isArray(a)?a.reduce(lb,o):{...o,...a}}let qg=(()=>{class o{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=sn(cb),this.zoneIsStable=sn(N0),this.componentTypes=[],this.components=[],this.isStable=sn(eb).hasPendingTasks.pipe((0,He.w)(u=>u?(0,ve.of)(!1):this.zoneIsStable),(0,we.x)(),(0,Ae.B)()),this._injector=sn(Zl)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,h){const f=u instanceof v_;if(!this._injector.get(yv).done)throw!f&&la(u),new pe(405,!1);let w;w=f?u:this._injector.get(Qh).resolveComponentFactory(u),this.componentTypes.push(w.componentType);const E=function UT(o){return o.isBoundToModule}(w)?void 0:this._injector.get(Od),N=w.create(oo.NULL,[],h||w.selector,E),k=N.location.nativeElement,j=N.injector.get(sb,null);return j?.registerApplication(k),N.onDestroy(()=>{this.detachView(N.hostView),Yg(this.components,N),j?.unregisterApplication(k)}),this._loadComponent(N),N}tick(){if(this._runningTick)throw new pe(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this.internalErrorHandler(u)}finally{this._runningTick=!1}}attachView(u){const h=u;this._views.push(h),h.attachToAppRef(this)}detachView(u){const h=u;Yg(this._views,h),h.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const h=this._injector.get(Cv,[]);h.push(...this._bootstrapListeners),h.forEach(f=>f(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Yg(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new pe(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(h){return new(h||o)};static#t=this.\u0275prov=xt({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function Yg(o,a){const u=o.indexOf(a);u>-1&&o.splice(u,1)}const cb=new qn("",{providedIn:"root",factory:()=>sn(Xl).handleError.bind(void 0)});function LN(){const o=sn(es),a=sn(Xl);return u=>o.runOutsideAngular(()=>a.handleError(u))}let WT=(()=>{class o{constructor(){this.zone=sn(es),this.applicationRef=sn(qg)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(h){return new(h||o)};static#t=this.\u0275prov=xt({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function IP(){return!1}let YT=(()=>{class o{static#e=this.__NG_ELEMENT_ID__=ZT}return o})();function ZT(o){return function KT(o,a,u){if(Ua(o)&&!u){const h=Tr(o.index,a);return new ag(h,h)}return 47&o.type?new ag(a[gi],a):null}(gr(),Ue(),16==(16&o))}class WN{constructor(){}supports(a){return j_(a)}create(a){return new eI(a)}}const RP=(o,a)=>a;class eI{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||RP}forEachItem(a){let u;for(u=this._itHead;null!==u;u=u._next)a(u)}forEachOperation(a){let u=this._itHead,h=this._removalsHead,f=0,_=null;for(;u||h;){const w=!h||u&&u.currentIndex<hb(h,f,_)?u:h,E=hb(w,f,_),I=w.currentIndex;if(w===h)f--,h=h._nextRemoved;else if(u=u._next,null==w.previousIndex)f++;else{_||(_=[]);const N=E-f,k=I-f;if(N!=k){for(let K=0;K<N;K++){const oe=K<_.length?_[K]:_[K]=0,Re=oe+K;k<=Re&&Re<N&&(_[K]=oe+1)}_[w.previousIndex]=k-N}}E!==I&&a(w,E,I)}}forEachPreviousItem(a){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachMovedItem(a){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}forEachIdentityChange(a){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)a(u)}diff(a){if(null==a&&(a=[]),!j_(a))throw new pe(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,_,w,u=this._itHead,h=!1;if(Array.isArray(a)){this.length=a.length;for(let E=0;E<this.length;E++)_=a[E],w=this._trackByFn(E,_),null!==u&&Object.is(u.trackById,w)?(h&&(u=this._verifyReinsertion(u,_,w,E)),Object.is(u.item,_)||this._addIdentityChange(u,_)):(u=this._mismatch(u,_,w,E),h=!0),u=u._next}else f=0,function LA(o,a){if(Array.isArray(o))for(let u=0;u<o.length;u++)a(o[u]);else{const u=o[Symbol.iterator]();let h;for(;!(h=u.next()).done;)a(h.value)}}(a,E=>{w=this._trackByFn(f,E),null!==u&&Object.is(u.trackById,w)?(h&&(u=this._verifyReinsertion(u,E,w,f)),Object.is(u.item,E)||this._addIdentityChange(u,E)):(u=this._mismatch(u,E,w,f),h=!0),u=u._next,f++}),this.length=f;return this._truncate(u),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,u,h,f){let _;return null===a?_=this._itTail:(_=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._reinsertAfter(a,_,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(h,f))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._moveAfter(a,_,f)):a=this._addAfter(new OP(u,h),_,f),a}_verifyReinsertion(a,u,h,f){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==_?a=this._reinsertAfter(_,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const u=a._next;this._addToRemovals(this._unlink(a)),a=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,u,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,_=a._nextRemoved;return null===f?this._removalsHead=_:f._nextRemoved=_,null===_?this._removalsTail=f:_._prevRemoved=f,this._insertAfter(a,u,h),this._addToMoves(a,h),a}_moveAfter(a,u,h){return this._unlink(a),this._insertAfter(a,u,h),this._addToMoves(a,h),a}_addAfter(a,u,h){return this._insertAfter(a,u,h),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,u,h){const f=null===u?this._itHead:u._next;return a._next=f,a._prev=u,null===f?this._itTail=a:f._prev=a,null===u?this._itHead=a:u._next=a,null===this._linkedRecords&&(this._linkedRecords=new db),this._linkedRecords.put(a),a.currentIndex=h,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const u=a._prev,h=a._next;return null===u?this._itHead=h:u._next=h,null===h?this._itTail=u:h._prev=u,a}_addToMoves(a,u){return a.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new db),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,u){return a.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class OP{constructor(a,u){this.item=a,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class tI{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,u){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===u||u<=h.currentIndex)&&Object.is(h.trackById,a))return h;return null}remove(a){const u=a._prevDup,h=a._nextDup;return null===u?this._head=h:u._nextDup=h,null===h?this._tail=u:h._prevDup=u,null===this._head}}class db{constructor(){this.map=new Map}put(a){const u=a.trackById;let h=this.map.get(u);h||(h=new tI,this.map.set(u,h)),h.add(a)}get(a,u){const f=this.map.get(a);return f?f.get(a,u):null}remove(a){const u=a.trackById;return this.map.get(u).remove(a)&&this.map.delete(u),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function hb(o,a,u){const h=o.previousIndex;if(null===h)return h;let f=0;return u&&h<u.length&&(f=u[h]),h+a+f}class qN{constructor(){}supports(a){return a instanceof Map||cg(a)}create(){return new Av}}class Av{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let u;for(u=this._mapHead;null!==u;u=u._next)a(u)}forEachPreviousItem(a){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)a(u)}forEachChangedItem(a){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}diff(a){if(a){if(!(a instanceof Map||cg(a)))throw new pe(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(a,(h,f)=>{if(u&&u.key===f)this._maybeAddToChanges(u,h),this._appendAfter=u,u=u._next;else{const _=this._getOrCreateRecordForKey(f,h);u=this._insertBeforeOrAppend(u,_)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let h=u;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,u){if(a){const h=a._prev;return u._next=a,u._prev=h,a._prev=u,h&&(h._next=u),a===this._mapHead&&(this._mapHead=u),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(a,u){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,u);const _=f._prev,w=f._next;return _&&(_._next=w),w&&(w._prev=_),f._next=null,f._prev=null,f}const h=new kP(a);return this._records.set(a,h),h.currentValue=u,this._addToAdditions(h),h}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,u){Object.is(u,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=u,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,u){a instanceof Map?a.forEach(u):Object.keys(a).forEach(h=>u(a[h],h))}}class kP{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function fb(){return new pb([new WN])}let pb=(()=>{class o{static#e=this.\u0275prov=xt({token:o,providedIn:"root",factory:fb});constructor(u){this.factories=u}static create(u,h){if(null!=h){const f=h.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:h=>o.create(u,h||fb()),deps:[[o,new ed,new Pp]]}}find(u){const h=this.factories.find(f=>f.supports(u));if(null!=h)return h;throw new pe(901,!1)}}return o})();function nI(){return new Qg([new qN])}let Qg=(()=>{class o{static#e=this.\u0275prov=xt({token:o,providedIn:"root",factory:nI});constructor(u){this.factories=u}static create(u,h){if(h){const f=h.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:h=>o.create(u,h||nI()),deps:[[o,new ed,new Pp]]}}find(u){const h=this.factories.find(f=>f.supports(u));if(h)return h;throw new pe(901,!1)}}return o})();const gb=jT(null,"core",[]);let iI=(()=>{class o{constructor(u){}static#e=this.\u0275fac=function(h){return new(h||o)(Kt(qg))};static#t=this.\u0275mod=Fa({type:o});static#n=this.\u0275inj=Qn({})}return o})();function QN(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}function Li(o,a){const u=yn(o),h=a.elementInjector||g_();return new lg(u).create(h,a.projectableNodes,a.hostElement,a.environmentInjector)}function ks(o){const a=yn(o);if(!a)return null;const u=new lg(a);return{get selector(){return u.selector},get type(){return u.componentType},get inputs(){return u.inputs},get outputs(){return u.outputs},get ngContentSelectors(){return u.ngContentSelectors},get isStandalone(){return a.standalone},get isSignal(){return a.signals}}}},3399:(Ct,Ne,F)=>{F.d(Ne,{Z:()=>st});var l=F(9058),ne=F(4537),B=F(7592),ie=F(7879);class he{constructor(ot,ze){this._delegate=ot,this.firebase=ze,(0,B._addComponent)(ot,new ne.wA("app-compat",()=>this,"PUBLIC")),this.container=ot.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ot){this._delegate.automaticDataCollectionEnabled=ot}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ot=>{this._delegate.checkDestroyed(),ot()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,B.deleteApp)(this._delegate)))}_getService(ot,ze=B._DEFAULT_ENTRY_NAME){var Rt;this._delegate.checkDestroyed();const Nt=this._delegate.container.getProvider(ot);return!Nt.isInitialized()&&"EXPLICIT"===(null===(Rt=Nt.getComponent())||void 0===Rt?void 0:Rt.instantiationMode)&&Nt.initialize(),Nt.getImmediate({identifier:ze})}_removeServiceInstance(ot,ze=B._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ot).clearInstance(ze)}_addComponent(ot){(0,B._addComponent)(this._delegate,ot)}_addOrOverwriteComponent(ot){(0,B._addOrOverwriteComponent)(this._delegate,ot)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ae=new l.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function we(){const $e=function He($e){const ot={},ze={__esModule:!0,initializeApp:function pe(We,ge={}){const X=B.initializeApp(We,ge);if((0,l.r3)(ot,X.name))return ot[X.name];const Je=new $e(X,ze);return ot[X.name]=Je,Je},app:Nt,registerVersion:B.registerVersion,setLogLevel:B.setLogLevel,onLog:B.onLog,apps:null,SDK_VERSION:B.SDK_VERSION,INTERNAL:{registerComponent:function fe(We){const ge=We.name,X=ge.replace("-compat","");if(B._registerComponent(We)&&"PUBLIC"===We.type){const Je=(kt=Nt())=>{if("function"!=typeof kt[X])throw Ae.create("invalid-app-argument",{appName:ge});return kt[X]()};void 0!==We.serviceProps&&(0,l.ZB)(Je,We.serviceProps),ze[X]=Je,$e.prototype[X]=function(...kt){return this._getService.bind(this,ge).apply(this,We.multipleInstances?kt:[])}}return"PUBLIC"===We.type?ze[X]:null},removeApp:function Rt(We){delete ot[We]},useAsService:function Pe(We,ge){return"serverAuth"===ge?null:ge},modularAPIs:B}};function Nt(We){if(!(0,l.r3)(ot,We=We||B._DEFAULT_ENTRY_NAME))throw Ae.create("no-app",{appName:We});return ot[We]}return ze.default=ze,Object.defineProperty(ze,"apps",{get:function xe(){return Object.keys(ot).map(We=>ot[We])}}),Nt.App=$e,ze}(he);return $e.INTERNAL=Object.assign(Object.assign({},$e.INTERNAL),{createFirebaseNamespace:we,extendNamespace:function ot(ze){(0,l.ZB)($e,ze)},createSubscribe:l.ne,ErrorFactory:l.LL,deepExtend:l.ZB}),$e}(),Z=new ie.Yd("@firebase/app-compat");if((0,l.jU)()&&void 0!==self.firebase){Z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const $e=self.firebase.SDK_VERSION;$e&&$e.indexOf("LITE")>=0&&Z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const st=$;!function Ve($e){(0,B.registerVersion)("@firebase/app-compat","0.2.13",$e)}()},7592:(Ct,Ne,F)=>{F.r(Ne),F.d(Ne,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>Qn,_DEFAULT_ENTRY_NAME:()=>me,_addComponent:()=>Fe,_addOrOverwriteComponent:()=>Be,_apps:()=>Ce,_clearComponents:()=>Pt,_components:()=>Se,_getProvider:()=>it,_registerComponent:()=>ut,_removeServiceInstance:()=>di,deleteApp:()=>$r,getApp:()=>Bn,getApps:()=>ar,initializeApp:()=>Ei,onLog:()=>zr,registerVersion:()=>Ai,setLogLevel:()=>_o});var l=F(5861),ne=F(4537),B=F(7879),ie=F(9058),he=F(1878);class ve{constructor(Q){this.container=Q}getPlatformInfoString(){return this.container.getProviders().map(Ie=>{if(function Ae(Me){const Q=Me.getComponent();return"VERSION"===Q?.type}(Ie)){const et=Ie.getImmediate();return`${et.library}/${et.version}`}return null}).filter(Ie=>Ie).join(" ")}}const He="@firebase/app",$=new B.Yd("@firebase/app"),me="[DEFAULT]",De={[He]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ce=new Map,Se=new Map;function Fe(Me,Q){try{Me.container.addComponent(Q)}catch(Ie){$.debug(`Component ${Q.name} failed to register with FirebaseApp ${Me.name}`,Ie)}}function Be(Me,Q){Me.container.addOrOverwriteComponent(Q)}function ut(Me){const Q=Me.name;if(Se.has(Q))return $.debug(`There were multiple attempts to register component ${Q}.`),!1;Se.set(Q,Me);for(const Ie of Ce.values())Fe(Ie,Me);return!0}function it(Me,Q){const Ie=Me.container.getProvider("heartbeat").getImmediate({optional:!0});return Ie&&Ie.triggerHeartbeat(),Me.container.getProvider(Q)}function di(Me,Q,Ie=me){it(Me,Q).clearInstance(Ie)}function Pt(){Se.clear()}const xt=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Kn{constructor(Q,Ie,et){this._isDeleted=!1,this._options=Object.assign({},Q),this._config=Object.assign({},Ie),this._name=Ie.name,this._automaticDataCollectionEnabled=Ie.automaticDataCollectionEnabled,this._container=et,this.container.addComponent(new ne.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Q){this.checkDestroyed(),this._automaticDataCollectionEnabled=Q}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Q){this._isDeleted=Q}checkDestroyed(){if(this.isDeleted)throw xt.create("app-deleted",{appName:this._name})}}const Qn="9.23.0";function Ei(Me,Q={}){let Ie=Me;"object"!=typeof Q&&(Q={name:Q});const et=Object.assign({name:me,automaticDataCollectionEnabled:!1},Q),dt=et.name;if("string"!=typeof dt||!dt)throw xt.create("bad-app-name",{appName:String(dt)});if(Ie||(Ie=(0,ie.aH)()),!Ie)throw xt.create("no-options");const Ft=Ce.get(dt);if(Ft){if((0,ie.vZ)(Ie,Ft.options)&&(0,ie.vZ)(et,Ft.config))return Ft;throw xt.create("duplicate-app",{appName:dt})}const xn=new ne.H0(dt);for(const W of Se.values())xn.addComponent(W);const q=new Kn(Ie,et,xn);return Ce.set(dt,q),q}function Bn(Me=me){const Q=Ce.get(Me);if(!Q&&Me===me&&(0,ie.aH)())return Ei();if(!Q)throw xt.create("no-app",{appName:Me});return Q}function ar(){return Array.from(Ce.values())}function $r(Me){return ss.apply(this,arguments)}function ss(){return(ss=(0,l.Z)(function*(Me){const Q=Me.name;Ce.has(Q)&&(Ce.delete(Q),yield Promise.all(Me.container.getProviders().map(Ie=>Ie.delete())),Me.isDeleted=!0)})).apply(this,arguments)}function Ai(Me,Q,Ie){var et;let dt=null!==(et=De[Me])&&void 0!==et?et:Me;Ie&&(dt+=`-${Ie}`);const Ft=dt.match(/\s|\//),xn=Q.match(/\s|\//);if(Ft||xn){const q=[`Unable to register library "${dt}" with version "${Q}":`];return Ft&&q.push(`library name "${dt}" contains illegal characters (whitespace or "/")`),Ft&&xn&&q.push("and"),xn&&q.push(`version name "${Q}" contains illegal characters (whitespace or "/")`),void $.warn(q.join(" "))}ut(new ne.wA(`${dt}-version`,()=>({library:dt,version:Q}),"VERSION"))}function zr(Me,Q){if(null!==Me&&"function"!=typeof Me)throw xt.create("invalid-log-argument");(0,B.Am)(Me,Q)}function _o(Me){(0,B.Ub)(Me)}const Ra="firebase-heartbeat-database",Gt=1,Yt="firebase-heartbeat-store";let Xt=null;function Jt(){return Xt||(Xt=(0,he.X3)(Ra,Gt,{upgrade:(Me,Q)=>{0===Q&&Me.createObjectStore(Yt)}}).catch(Me=>{throw xt.create("idb-open",{originalErrorMessage:Me.message})})),Xt}function Hi(){return(Hi=(0,l.Z)(function*(Me){try{return yield(yield Jt()).transaction(Yt).objectStore(Yt).get(vo(Me))}catch(Q){if(Q instanceof ie.ZR)$.warn(Q.message);else{const Ie=xt.create("idb-get",{originalErrorMessage:Q?.message});$.warn(Ie.message)}}})).apply(this,arguments)}function Vn(Me,Q){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,l.Z)(function*(Me,Q){try{const et=(yield Jt()).transaction(Yt,"readwrite");yield et.objectStore(Yt).put(Q,vo(Me)),yield et.done}catch(Ie){if(Ie instanceof ie.ZR)$.warn(Ie.message);else{const et=xt.create("idb-set",{originalErrorMessage:Ie?.message});$.warn(et.message)}}})).apply(this,arguments)}function vo(Me){return`${Me.name}!${Me.options.appId}`}class Tn{constructor(Q){this.container=Q,this._heartbeatsCache=null;const Ie=this.container.getProvider("app").getImmediate();this._storage=new Bo(Ie),this._heartbeatsCachePromise=this._storage.read().then(et=>(this._heartbeatsCache=et,et))}triggerHeartbeat(){var Q=this;return(0,l.Z)(function*(){const et=Q.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),dt=os();if(null===Q._heartbeatsCache&&(Q._heartbeatsCache=yield Q._heartbeatsCachePromise),Q._heartbeatsCache.lastSentHeartbeatDate!==dt&&!Q._heartbeatsCache.heartbeats.some(Ft=>Ft.date===dt))return Q._heartbeatsCache.heartbeats.push({date:dt,agent:et}),Q._heartbeatsCache.heartbeats=Q._heartbeatsCache.heartbeats.filter(Ft=>{const xn=new Date(Ft.date).valueOf();return Date.now()-xn<=2592e6}),Q._storage.overwrite(Q._heartbeatsCache)})()}getHeartbeatsHeader(){var Q=this;return(0,l.Z)(function*(){if(null===Q._heartbeatsCache&&(yield Q._heartbeatsCachePromise),null===Q._heartbeatsCache||0===Q._heartbeatsCache.heartbeats.length)return"";const Ie=os(),{heartbeatsToSend:et,unsentEntries:dt}=function yo(Me,Q=1024){const Ie=[];let et=Me.slice();for(const dt of Me){const Ft=Ie.find(xn=>xn.agent===dt.agent);if(Ft){if(Ft.dates.push(dt.date),Lr(Ie)>Q){Ft.dates.pop();break}}else if(Ie.push({agent:dt.agent,dates:[dt.date]}),Lr(Ie)>Q){Ie.pop();break}et=et.slice(1)}return{heartbeatsToSend:Ie,unsentEntries:et}}(Q._heartbeatsCache.heartbeats),Ft=(0,ie.L)(JSON.stringify({version:2,heartbeats:et}));return Q._heartbeatsCache.lastSentHeartbeatDate=Ie,dt.length>0?(Q._heartbeatsCache.heartbeats=dt,yield Q._storage.overwrite(Q._heartbeatsCache)):(Q._heartbeatsCache.heartbeats=[],Q._storage.overwrite(Q._heartbeatsCache)),Ft})()}}function os(){return(new Date).toISOString().substring(0,10)}class Bo{constructor(Q){this.app=Q,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,l.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Q=this;return(0,l.Z)(function*(){return(yield Q._canUseIndexedDBPromise)&&(yield function hi(Me){return Hi.apply(this,arguments)}(Q.app))||{heartbeats:[]}})()}overwrite(Q){var Ie=this;return(0,l.Z)(function*(){var et;if(yield Ie._canUseIndexedDBPromise){const Ft=yield Ie.read();return Vn(Ie.app,{lastSentHeartbeatDate:null!==(et=Q.lastSentHeartbeatDate)&&void 0!==et?et:Ft.lastSentHeartbeatDate,heartbeats:Q.heartbeats})}})()}add(Q){var Ie=this;return(0,l.Z)(function*(){var et;if(yield Ie._canUseIndexedDBPromise){const Ft=yield Ie.read();return Vn(Ie.app,{lastSentHeartbeatDate:null!==(et=Q.lastSentHeartbeatDate)&&void 0!==et?et:Ft.lastSentHeartbeatDate,heartbeats:[...Ft.heartbeats,...Q.heartbeats]})}})()}}function Lr(Me){return(0,ie.L)(JSON.stringify({version:2,heartbeats:Me})).length}!function wo(Me){ut(new ne.wA("platform-logger",Q=>new ve(Q),"PRIVATE")),ut(new ne.wA("heartbeat",Q=>new Tn(Q),"PRIVATE")),Ai(He,"0.9.13",Me),Ai(He,"0.9.13","esm2017"),Ai("fire-js","")}("")},4097:(Ct,Ne,F)=>{F.d(Ne,{C6:()=>l.getApps,Mq:()=>l.getApp});var l=F(7592);(0,l.registerVersion)("firebase","9.23.0","app")},120:(Ct,Ne,F)=>{F.d(Ne,{Z:()=>l.Z});var l=F(3399);l.Z.registerVersion("firebase","9.23.0","app-compat")},8977:(Ct,Ne,F)=>{F.r(Ne);var l=F(5861),ne=F(3399),B=F(9058),ie=F(7592),he=F(7582),ve=F(7879),Ae=F(4537);const we={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const st=function Ze(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},$e=function Ve(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ot=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Rt=new ve.Yd("@firebase/auth");function pe(b,...g){Rt.logLevel<=ve.in.ERROR&&Rt.error(`Auth (${ie.SDK_VERSION}): ${b}`,...g)}function xe(b,...g){throw ge(b,...g)}function fe(b,...g){return ge(b,...g)}function Pe(b,g,v){const D=Object.assign(Object.assign({},$e()),{[g]:v});return new B.LL("auth","Firebase",D).create(g,{appName:b.name})}function We(b,g,v){if(!(g instanceof v))throw v.name!==g.constructor.name&&xe(b,"argument-error"),Pe(b,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ge(b,...g){if("string"!=typeof b){const v=g[0],D=[...g.slice(1)];return D[0]&&(D[0].appName=b.name),b._errorFactory.create(v,...D)}return ot.create(b,...g)}function X(b,g,...v){if(!b)throw ge(g,...v)}function Je(b){const g="INTERNAL ASSERTION FAILED: "+b;throw pe(g),new Error(g)}function kt(b,g){b||Je(g)}function Nn(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function Zn(){return"http:"===Wn()||"https:"===Wn()}function Wn(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class or{constructor(g,v){this.shortDelay=g,this.longDelay=v,kt(v>g,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return function ci(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Zn()||(0,B.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function me(b,g){kt(b.emulator,"Emulator should always be set here");const{url:v}=b.emulator;return g?`${v}${g.startsWith("/")?g.slice(1):g}`:v}class De{static initialize(g,v,D){this.fetchImpl=g,v&&(this.headersImpl=v),D&&(this.responseImpl=D)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Je("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Je("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Je("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ce={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Se=new or(3e4,6e4);function Fe(b,g){return b.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:b.tenantId}):g}function Be(b,g,v,D){return ut.apply(this,arguments)}function ut(){return(ut=(0,l.Z)(function*(b,g,v,D,M={}){return it(b,M,(0,l.Z)(function*(){let O={},Y={};D&&("GET"===g?Y=D:O={body:JSON.stringify(D)});const ce=(0,B.xO)(Object.assign({key:b.config.apiKey},Y)).slice(1),Ye=yield b._getAdditionalHeaders();return Ye["Content-Type"]="application/json",b.languageCode&&(Ye["X-Firebase-Locale"]=b.languageCode),De.fetch()(xt(b,b.config.apiHost,v,ce),Object.assign({method:g,headers:Ye,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function it(b,g,v){return di.apply(this,arguments)}function di(){return(di=(0,l.Z)(function*(b,g,v){b._canInitEmulator=!1;const D=Object.assign(Object.assign({},Ce),g);try{const M=new Kn(b),O=yield Promise.race([v(),M.promise]);M.clearNetworkTimeout();const Y=yield O.json();if("needConfirmation"in Y)throw Qn(b,"account-exists-with-different-credential",Y);if(O.ok&&!("errorMessage"in Y))return Y;{const ce=O.ok?Y.errorMessage:Y.error.message,[Ye,Xe]=ce.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ye)throw Qn(b,"credential-already-in-use",Y);if("EMAIL_EXISTS"===Ye)throw Qn(b,"email-already-in-use",Y);if("USER_DISABLED"===Ye)throw Qn(b,"user-disabled",Y);const Et=D[Ye]||Ye.toLowerCase().replace(/[_\s]+/g,"-");if(Xe)throw Pe(b,Et,Xe);xe(b,Et)}}catch(M){if(M instanceof B.ZR)throw M;xe(b,"network-request-failed",{message:String(M)})}})).apply(this,arguments)}function Pt(b,g,v,D){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,l.Z)(function*(b,g,v,D,M={}){const O=yield Be(b,g,v,D,M);return"mfaPendingCredential"in O&&xe(b,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function xt(b,g,v,D){const M=`${g}${v}?${D}`;return b.config.emulator?me(b.config,M):`${b.config.apiScheme}://${M}`}class Kn{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((v,D)=>{this.timer=setTimeout(()=>D(fe(this.auth,"network-request-failed")),Se.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Qn(b,g,v){const D={appName:b.name};v.email&&(D.email=v.email),v.phoneNumber&&(D.phoneNumber=v.phoneNumber);const M=fe(b,g,D);return M.customData._tokenResponse=v,M}function Bn(){return(Bn=(0,l.Z)(function*(b,g){return Be(b,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function $r(){return($r=(0,l.Z)(function*(b,g){return Be(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ai(){return(Ai=(0,l.Z)(function*(b,g){return Be(b,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function zr(b){if(b)try{const g=new Date(Number(b));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function Gt(){return(Gt=(0,l.Z)(function*(b,g=!1){const v=(0,B.m9)(b),D=yield v.getIdToken(g),M=Xt(D);X(M&&M.exp&&M.auth_time&&M.iat,v.auth,"internal-error");const O="object"==typeof M.firebase?M.firebase:void 0,Y=O?.sign_in_provider;return{claims:M,token:D,authTime:zr(Yt(M.auth_time)),issuedAtTime:zr(Yt(M.iat)),expirationTime:zr(Yt(M.exp)),signInProvider:Y||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function Yt(b){return 1e3*Number(b)}function Xt(b){const[g,v,D]=b.split(".");if(void 0===g||void 0===v||void 0===D)return pe("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,B.tV)(v);return M?JSON.parse(M):(pe("Failed to decode base64 JWT payload"),null)}catch(M){return pe("Caught error parsing JWT payload as JSON",M?.toString()),null}}function hi(b,g){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,l.Z)(function*(b,g,v=!1){if(v)return g;try{return yield g}catch(D){throw D instanceof B.ZR&&function Vn({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}(D)&&b.auth.currentUser===b&&(yield b.auth.signOut()),D}})).apply(this,arguments)}class Ci{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var v;if(g){const D=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),D}{this.errorBackoff=3e4;const M=(null!==(v=this.user.stsTokenManager.expirationTime)&&void 0!==v?v:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(g=!1){var v=this;if(!this.isRunning)return;const D=this.getInterval(g);this.timerId=setTimeout((0,l.Z)(function*(){yield v.iteration()}),D)}iteration(){var g=this;return(0,l.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(v){return void("auth/network-request-failed"===v?.code&&g.schedule(!0))}g.schedule()})()}}class vo{constructor(g,v){this.createdAt=g,this.lastLoginAt=v,this._initializeTime()}_initializeTime(){this.lastSignInTime=zr(this.lastLoginAt),this.creationTime=zr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function En(b){return Fr.apply(this,arguments)}function Fr(){return Fr=(0,l.Z)(function*(b){var g;const v=b.auth,D=yield b.getIdToken(),M=yield hi(b,function ss(b,g){return Ai.apply(this,arguments)}(v,{idToken:D}));X(M?.users.length,v,"internal-error");const O=M.users[0];b._notifyReloadListener(O);const Y=null!==(g=O.providerUserInfo)&&void 0!==g&&g.length?function Bo(b){return b.map(g=>{var{providerId:v}=g,D=(0,he._T)(g,["providerId"]);return{providerId:v,uid:D.rawId||"",displayName:D.displayName||null,email:D.email||null,phoneNumber:D.phoneNumber||null,photoURL:D.photoUrl||null}})}(O.providerUserInfo):[],ce=function yo(b,g){return[...b.filter(D=>!g.some(M=>M.providerId===D.providerId)),...g]}(b.providerData,Y),Et=!!b.isAnonymous&&!(b.email&&O.passwordHash||ce?.length),It={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:ce,metadata:new vo(O.createdAt,O.lastLoginAt),isAnonymous:Et};Object.assign(b,It)}),Fr.apply(this,arguments)}function os(){return(os=(0,l.Z)(function*(b){const g=(0,B.m9)(b);yield En(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function wo(){return(wo=(0,l.Z)(function*(b,g){const v=yield it(b,{},(0,l.Z)(function*(){const D=(0,B.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:M,apiKey:O}=b.config,Y=xt(b,M,"/v1/token",`key=${O}`),ce=yield b._getAdditionalHeaders();return ce["Content-Type"]="application/x-www-form-urlencoded",De.fetch()(Y,{method:"POST",headers:ce,body:D})}));return{accessToken:v.access_token,expiresIn:v.expires_in,refreshToken:v.refresh_token}})).apply(this,arguments)}class Me{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){X(g.idToken,"internal-error"),X(typeof g.idToken<"u","internal-error"),X(typeof g.refreshToken<"u","internal-error");const v="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function Jt(b){const g=Xt(b);return X(g,"internal-error"),X(typeof g.exp<"u","internal-error"),X(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,v)}getToken(g,v=!1){var D=this;return(0,l.Z)(function*(){return X(!D.accessToken||D.refreshToken,g,"user-token-expired"),v||!D.accessToken||D.isExpired?D.refreshToken?(yield D.refresh(g,D.refreshToken),D.accessToken):null:D.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,v){var D=this;return(0,l.Z)(function*(){const{accessToken:M,refreshToken:O,expiresIn:Y}=yield function Lr(b,g){return wo.apply(this,arguments)}(g,v);D.updateTokensAndExpiration(M,O,Number(Y))})()}updateTokensAndExpiration(g,v,D){this.refreshToken=v||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*D}static fromJSON(g,v){const{refreshToken:D,accessToken:M,expirationTime:O}=v,Y=new Me;return D&&(X("string"==typeof D,"internal-error",{appName:g}),Y.refreshToken=D),M&&(X("string"==typeof M,"internal-error",{appName:g}),Y.accessToken=M),O&&(X("number"==typeof O,"internal-error",{appName:g}),Y.expirationTime=O),Y}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Me,this.toJSON())}_performRefresh(){return Je("not implemented")}}function Q(b,g){X("string"==typeof b||typeof b>"u","internal-error",{appName:g})}class Ie{constructor(g){var{uid:v,auth:D,stsTokenManager:M}=g,O=(0,he._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ci(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=v,this.auth=D,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new vo(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(g){var v=this;return(0,l.Z)(function*(){const D=yield hi(v,v.stsTokenManager.getToken(v.auth,g));return X(D,v.auth,"internal-error"),v.accessToken!==D&&(v.accessToken=D,yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)),D})()}getIdTokenResult(g){return function Ra(b){return Gt.apply(this,arguments)}(this,g)}reload(){return function Tn(b){return os.apply(this,arguments)}(this)}_assign(g){this!==g&&(X(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(v=>Object.assign({},v)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){const v=new Ie(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}));return v.metadata._copy(this.metadata),v}_onReload(g){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,v=!1){var D=this;return(0,l.Z)(function*(){let M=!1;g.idToken&&g.idToken!==D.stsTokenManager.accessToken&&(D.stsTokenManager.updateFromServerResponse(g),M=!0),v&&(yield En(D)),yield D.auth._persistUserIfCurrent(D),M&&D.auth._notifyListenersIfCurrent(D)})()}delete(){var g=this;return(0,l.Z)(function*(){const v=yield g.getIdToken();return yield hi(g,function Ei(b,g){return Bn.apply(this,arguments)}(g.auth,{idToken:v})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,v){var D,M,O,Y,ce,Ye,Xe,Et;const It=null!==(D=v.displayName)&&void 0!==D?D:void 0,Si=null!==(M=v.email)&&void 0!==M?M:void 0,no=null!==(O=v.phoneNumber)&&void 0!==O?O:void 0,cd=null!==(Y=v.photoURL)&&void 0!==Y?Y:void 0,Wc=null!==(ce=v.tenantId)&&void 0!==ce?ce:void 0,ud=null!==(Ye=v._redirectEventId)&&void 0!==Ye?Ye:void 0,o_=null!==(Xe=v.createdAt)&&void 0!==Xe?Xe:void 0,zh=null!==(Et=v.lastLoginAt)&&void 0!==Et?Et:void 0,{uid:dd,emailVerified:e0,isAnonymous:t0,providerData:Wl,stsTokenManager:a_}=v;X(dd&&a_,g,"internal-error");const n0=Me.fromJSON(this.name,a_);X("string"==typeof dd,g,"internal-error"),Q(It,g.name),Q(Si,g.name),X("boolean"==typeof e0,g,"internal-error"),X("boolean"==typeof t0,g,"internal-error"),Q(no,g.name),Q(cd,g.name),Q(Wc,g.name),Q(ud,g.name),Q(o_,g.name),Q(zh,g.name);const qc=new Ie({uid:dd,auth:g,email:Si,emailVerified:e0,displayName:It,isAnonymous:t0,photoURL:cd,phoneNumber:no,tenantId:Wc,stsTokenManager:n0,createdAt:o_,lastLoginAt:zh});return Wl&&Array.isArray(Wl)&&(qc.providerData=Wl.map(hd=>Object.assign({},hd))),ud&&(qc._redirectEventId=ud),qc}static _fromIdTokenResponse(g,v,D=!1){return(0,l.Z)(function*(){const M=new Me;M.updateFromServerResponse(v);const O=new Ie({uid:v.localId,auth:g,stsTokenManager:M,isAnonymous:D});return yield En(O),O})()}}const et=new Map;function dt(b){kt(b instanceof Function,"Expected a class definition");let g=et.get(b);return g?(kt(g instanceof b,"Instance stored in cache mismatched with class"),g):(g=new b,et.set(b,g),g)}const xn=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,l.Z)(function*(){return!0})()}_set(v,D){var M=this;return(0,l.Z)(function*(){M.storage[v]=D})()}_get(v){var D=this;return(0,l.Z)(function*(){const M=D.storage[v];return void 0===M?null:M})()}_remove(v){var D=this;return(0,l.Z)(function*(){delete D.storage[v]})()}_addListener(v,D){}_removeListener(v,D){}}return b.type="NONE",b})();function q(b,g,v){return`firebase:${b}:${g}:${v}`}class W{constructor(g,v,D){this.persistence=g,this.auth=v,this.userKey=D;const{config:M,name:O}=this.auth;this.fullUserKey=q(this.userKey,M.apiKey,O),this.fullPersistenceKey=q("persistence",M.apiKey,O),this.boundEventHandler=v._onStorageEvent.bind(v),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,l.Z)(function*(){const v=yield g.persistence._get(g.fullUserKey);return v?Ie._fromJSON(g.auth,v):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var v=this;return(0,l.Z)(function*(){if(v.persistence===g)return;const D=yield v.getCurrentUser();return yield v.removeCurrentUser(),v.persistence=g,D?v.setCurrentUser(D):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,v,D="authUser"){return(0,l.Z)(function*(){if(!v.length)return new W(dt(xn),g,D);const M=(yield Promise.all(v.map(function(){var Xe=(0,l.Z)(function*(Et){if(yield Et._isAvailable())return Et});return function(Et){return Xe.apply(this,arguments)}}()))).filter(Xe=>Xe);let O=M[0]||dt(xn);const Y=q(D,g.config.apiKey,g.name);let ce=null;for(const Xe of v)try{const Et=yield Xe._get(Y);if(Et){const It=Ie._fromJSON(g,Et);Xe!==O&&(ce=It),O=Xe;break}}catch{}const Ye=M.filter(Xe=>Xe._shouldAllowMigration);return O._shouldAllowMigration&&Ye.length?(O=Ye[0],ce&&(yield O._set(Y,ce.toJSON())),yield Promise.all(v.map(function(){var Xe=(0,l.Z)(function*(Et){if(Et!==O)try{yield Et._remove(Y)}catch{}});return function(Et){return Xe.apply(this,arguments)}}())),new W(O,g,D)):new W(O,g,D)})()}}function ee(b){const g=b.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(nn(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Le(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Br(g))return"Blackberry";if(sn(g))return"Webos";if(ye(g))return"Safari";if((g.includes("chrome/")||wt(g))&&!g.includes("edge/"))return"Chrome";if(Kt(g))return"Android";{const D=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===D?.length)return D[1]}return"Other"}function Le(b=(0,B.z$)()){return/firefox\//i.test(b)}function ye(b=(0,B.z$)()){const g=b.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function wt(b=(0,B.z$)()){return/crios\//i.test(b)}function nn(b=(0,B.z$)()){return/iemobile/i.test(b)}function Kt(b=(0,B.z$)()){return/android/i.test(b)}function Br(b=(0,B.z$)()){return/blackberry/i.test(b)}function sn(b=(0,B.z$)()){return/webos/i.test(b)}function ji(b=(0,B.z$)()){return/iphone|ipad|ipod/i.test(b)||/macintosh/i.test(b)&&/mobile/i.test(b)}function El(b=(0,B.z$)()){return ji(b)||Kt(b)||sn(b)||Br(b)||/windows phone/i.test(b)||nn(b)}function bo(b,g=[]){let v;switch(b){case"Browser":v=ee((0,B.z$)());break;case"Worker":v=`${ee((0,B.z$)())}-${b}`;break;default:v=b}const D=g.length?g.join(","):"FirebaseCore-web";return`${v}/JsCore/${ie.SDK_VERSION}/${D}`}function Zs(){return(Zs=(0,l.Z)(function*(b){return(yield Be(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ks(b,g){return vn.apply(this,arguments)}function vn(){return(vn=(0,l.Z)(function*(b,g){return Be(b,"GET","/v2/recaptchaConfig",Fe(b,g))})).apply(this,arguments)}function aa(b){return void 0!==b&&void 0!==b.getResponse}function Cl(b){return void 0!==b&&void 0!==b.enterprise}class mc{constructor(g){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===g.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=g.recaptchaKey.split("/")[3],this.emailPasswordEnabled=g.recaptchaEnforcementState.some(v=>"EMAIL_PASSWORD_PROVIDER"===v.provider&&"OFF"!==v.enforcementState)}}function Ls(b){return new Promise((g,v)=>{const D=document.createElement("script");D.setAttribute("src",b),D.onload=g,D.onerror=M=>{const O=fe("internal-error");O.customData=M,v(O)},D.type="text/javascript",D.charset="UTF-8",function Qf(){var b,g;return null!==(g=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==g?g:document}().appendChild(D)})}function Tl(b){return`__${b}${Math.floor(1e6*Math.random())}`}class oh{constructor(g){this.type="recaptcha-enterprise",this.auth=Gi(g)}verify(g="verify",v=!1){var D=this;return(0,l.Z)(function*(){function O(){return O=(0,l.Z)(function*(ce){if(!v){if(null==ce.tenantId&&null!=ce._agentRecaptchaConfig)return ce._agentRecaptchaConfig.siteKey;if(null!=ce.tenantId&&void 0!==ce._tenantRecaptchaConfigs[ce.tenantId])return ce._tenantRecaptchaConfigs[ce.tenantId].siteKey}return new Promise(function(){var Ye=(0,l.Z)(function*(Xe,Et){Ks(ce,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(It=>{if(void 0!==It.recaptchaKey){const Si=new mc(It);return null==ce.tenantId?ce._agentRecaptchaConfig=Si:ce._tenantRecaptchaConfigs[ce.tenantId]=Si,Xe(Si.siteKey)}Et(new Error("recaptcha Enterprise site key undefined"))}).catch(It=>{Et(It)})});return function(Xe,Et){return Ye.apply(this,arguments)}}())}),O.apply(this,arguments)}function Y(ce,Ye,Xe){const Et=window.grecaptcha;Cl(Et)?Et.enterprise.ready(()=>{Et.enterprise.execute(ce,{action:g}).then(It=>{Ye(It)}).catch(()=>{Ye("NO_RECAPTCHA")})}):Xe(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ce,Ye)=>{(function M(ce){return O.apply(this,arguments)})(D.auth).then(Xe=>{if(!v&&Cl(window.grecaptcha))Y(Xe,ce,Ye);else{if(typeof window>"u")return void Ye(new Error("RecaptchaVerifier is only supported in browser"));Ls("https://www.google.com/recaptcha/enterprise.js?render="+Xe).then(()=>{Y(Xe,ce,Ye)}).catch(Et=>{Ye(Et)})}}).catch(Xe=>{Ye(Xe)})})})()}}function Bs(b,g,v){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,l.Z)(function*(b,g,v,D=!1){const M=new oh(b);let O;try{O=yield M.verify(v)}catch{O=yield M.verify(v,!0)}const Y=Object.assign({},g);return Object.assign(Y,D?{captchaResp:O}:{captchaResponse:O}),Object.assign(Y,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Y,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Y})).apply(this,arguments)}class lr{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,v){const D=O=>new Promise((Y,ce)=>{try{Y(g(O))}catch(Ye){ce(Ye)}});D.onAbort=v,this.queue.push(D);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(g){var v=this;return(0,l.Z)(function*(){if(v.auth.currentUser===g)return;const D=[];try{for(const M of v.queue)yield M(g),M.onAbort&&D.push(M.onAbort)}catch(M){D.reverse();for(const O of D)try{O()}catch{}throw v.auth._errorFactory.create("login-blocked",{originalMessage:M?.message})}})()}}class ah{constructor(g,v,D,M){this.app=g,this.heartbeatServiceProvider=v,this.appCheckServiceProvider=D,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Mi(this),this.idTokenSubscription=new Mi(this),this.beforeStateQueue=new lr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ot,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(g,v){var D=this;return v&&(this._popupRedirectResolver=dt(v)),this._initializationPromise=this.queue((0,l.Z)(function*(){var M,O;if(!D._deleted&&(D.persistenceManager=yield W.create(D,g),!D._deleted)){if(null!==(M=D._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield D._popupRedirectResolver._initialize(D)}catch{}yield D.initializeCurrentUser(v),D.lastNotifiedUid=(null===(O=D.currentUser)||void 0===O?void 0:O.uid)||null,!D._deleted&&(D._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,l.Z)(function*(){if(g._deleted)return;const v=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||v){if(g.currentUser&&v&&g.currentUser.uid===v.uid)return g._currentUser._assign(v),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(v,!0)}})()}initializeCurrentUser(g){var v=this;return(0,l.Z)(function*(){var D;const M=yield v.assertedPersistence.getCurrentUser();let O=M,Y=!1;if(g&&v.config.authDomain){yield v.getOrInitRedirectPersistenceManager();const ce=null===(D=v.redirectUser)||void 0===D?void 0:D._redirectEventId,Ye=O?._redirectEventId,Xe=yield v.tryRedirectSignIn(g);(!ce||ce===Ye)&&Xe?.user&&(O=Xe.user,Y=!0)}if(!O)return v.directlySetCurrentUser(null);if(!O._redirectEventId){if(Y)try{yield v.beforeStateQueue.runMiddleware(O)}catch(ce){O=M,v._popupRedirectResolver._overrideRedirectResult(v,()=>Promise.reject(ce))}return O?v.reloadAndSetCurrentUserOrClear(O):v.directlySetCurrentUser(null)}return X(v._popupRedirectResolver,v,"argument-error"),yield v.getOrInitRedirectPersistenceManager(),v.redirectUser&&v.redirectUser._redirectEventId===O._redirectEventId?v.directlySetCurrentUser(O):v.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(g){var v=this;return(0,l.Z)(function*(){let D=null;try{D=yield v._popupRedirectResolver._completeRedirectFn(v,g,!0)}catch{yield v._setRedirectUser(null)}return D})()}reloadAndSetCurrentUserOrClear(g){var v=this;return(0,l.Z)(function*(){try{yield En(g)}catch(D){if("auth/network-request-failed"!==D?.code)return v.directlySetCurrentUser(null)}return v.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function ui(){if(typeof navigator>"u")return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var g=this;return(0,l.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var v=this;return(0,l.Z)(function*(){const D=g?(0,B.m9)(g):null;return D&&X(D.auth.config.apiKey===v.config.apiKey,v,"invalid-user-token"),v._updateCurrentUser(D&&D._clone(v))})()}_updateCurrentUser(g,v=!1){var D=this;return(0,l.Z)(function*(){if(!D._deleted)return g&&X(D.tenantId===g.tenantId,D,"tenant-id-mismatch"),v||(yield D.beforeStateQueue.runMiddleware(g)),D.queue((0,l.Z)(function*(){yield D.directlySetCurrentUser(g),D.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,l.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var v=this;return this.queue((0,l.Z)(function*(){yield v.assertedPersistence.setPersistence(dt(g))}))}initializeRecaptchaConfig(){var g=this;return(0,l.Z)(function*(){const v=yield Ks(g,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),D=new mc(v);null==g.tenantId?g._agentRecaptchaConfig=D:g._tenantRecaptchaConfigs[g.tenantId]=D,D.emailPasswordEnabled&&new oh(g).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new B.LL("auth","Firebase",g())}onAuthStateChanged(g,v,D){return this.registerStateListener(this.authStateSubscription,g,v,D)}beforeAuthStateChanged(g,v){return this.beforeStateQueue.pushCallback(g,v)}onIdTokenChanged(g,v,D){return this.registerStateListener(this.idTokenSubscription,g,v,D)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,v){var D=this;return(0,l.Z)(function*(){const M=yield D.getOrInitRedirectPersistenceManager(v);return null===g?M.removeCurrentUser():M.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var v=this;return(0,l.Z)(function*(){if(!v.redirectPersistenceManager){const D=g&&dt(g)||v._popupRedirectResolver;X(D,v,"argument-error"),v.redirectPersistenceManager=yield W.create(v,[dt(D._redirectPersistence)],"redirectUser"),v.redirectUser=yield v.redirectPersistenceManager.getCurrentUser()}return v.redirectPersistenceManager})()}_redirectUserForId(g){var v=this;return(0,l.Z)(function*(){var D,M;return v._isInitialized&&(yield v.queue((0,l.Z)(function*(){}))),(null===(D=v._currentUser)||void 0===D?void 0:D._redirectEventId)===g?v._currentUser:(null===(M=v.redirectUser)||void 0===M?void 0:M._redirectEventId)===g?v.redirectUser:null})()}_persistUserIfCurrent(g){var v=this;return(0,l.Z)(function*(){if(g===v.currentUser)return v.queue((0,l.Z)(function*(){return v.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,v;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const D=null!==(v=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==v?v:null;this.lastNotifiedUid!==D&&(this.lastNotifiedUid=D,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,v,D,M){if(this._deleted)return()=>{};const O="function"==typeof v?v:v.next.bind(v),Y=this._isInitialized?Promise.resolve():this._initializationPromise;return X(Y,this,"internal-error"),Y.then(()=>O(this.currentUser)),"function"==typeof v?g.addObserver(v,D,M):g.addObserver(v)}directlySetCurrentUser(g){var v=this;return(0,l.Z)(function*(){v.currentUser&&v.currentUser!==g&&v._currentUser._stopProactiveRefresh(),g&&v.isProactiveRefreshEnabled&&g._startProactiveRefresh(),v.currentUser=g,g?yield v.assertedPersistence.setCurrentUser(g):yield v.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=bo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,l.Z)(function*(){var v;const D={"X-Client-Version":g.clientVersion};g.app.options.appId&&(D["X-Firebase-gmpid"]=g.app.options.appId);const M=yield null===(v=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getHeartbeatsHeader();M&&(D["X-Firebase-Client"]=M);const O=yield g._getAppCheckToken();return O&&(D["X-Firebase-AppCheck"]=O),D})()}_getAppCheckToken(){var g=this;return(0,l.Z)(function*(){var v;const D=yield null===(v=g.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getToken();return D?.error&&function Nt(b,...g){Rt.logLevel<=ve.in.WARN&&Rt.warn(`Auth (${ie.SDK_VERSION}): ${b}`,...g)}(`Error while retrieving App Check token: ${D.error}`),D?.token})()}}function Gi(b){return(0,B.m9)(b)}class Mi{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,B.ne)(v=>this.observer=v)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ka(b){const g=b.indexOf(":");return g<0?"":b.substr(0,g+1)}function Jf(b){if(!b)return null;const g=Number(b);return isNaN(g)?null:g}class Pa{constructor(g,v){this.providerId=g,this.signInMethod=v}toJSON(){return Je("not implemented")}_getIdTokenResponse(g){return Je("not implemented")}_linkToIdToken(g,v){return Je("not implemented")}_getReauthenticationResolver(g){return Je("not implemented")}}function Xf(b,g){return Do.apply(this,arguments)}function Do(){return(Do=(0,l.Z)(function*(b,g){return Be(b,"POST","/v1/accounts:resetPassword",Fe(b,g))})).apply(this,arguments)}function Qi(b,g){return ep.apply(this,arguments)}function ep(){return(ep=(0,l.Z)(function*(b,g){return Be(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Au(){return(Au=(0,l.Z)(function*(b,g){return Be(b,"POST","/v1/accounts:update",Fe(b,g))})).apply(this,arguments)}function Vr(b,g){return lh.apply(this,arguments)}function lh(){return(lh=(0,l.Z)(function*(b,g){return Pt(b,"POST","/v1/accounts:signInWithPassword",Fe(b,g))})).apply(this,arguments)}function Mu(b,g){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,l.Z)(function*(b,g){return Be(b,"POST","/v1/accounts:sendOobCode",Fe(b,g))})).apply(this,arguments)}function Nu(){return(Nu=(0,l.Z)(function*(b,g){return Mu(b,g)})).apply(this,arguments)}function Sl(b,g){return ch.apply(this,arguments)}function ch(){return(ch=(0,l.Z)(function*(b,g){return Mu(b,g)})).apply(this,arguments)}function yn(b,g){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,l.Z)(function*(b,g){return Mu(b,g)})).apply(this,arguments)}function la(){return(la=(0,l.Z)(function*(b,g){return Mu(b,g)})).apply(this,arguments)}function _c(){return(_c=(0,l.Z)(function*(b,g){return Pt(b,"POST","/v1/accounts:signInWithEmailLink",Fe(b,g))})).apply(this,arguments)}function vc(){return(vc=(0,l.Z)(function*(b,g){return Pt(b,"POST","/v1/accounts:signInWithEmailLink",Fe(b,g))})).apply(this,arguments)}class xu extends Pa{constructor(g,v,D,M=null){super("password",D),this._email=g,this._password=v,this._tenantId=M}static _fromEmailAndPassword(g,v){return new xu(g,v,"password")}static _fromEmailAndCode(g,v,D=null){return new xu(g,v,"emailLink",D)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g;if(v?.email&&v?.password){if("password"===v.signInMethod)return this._fromEmailAndPassword(v.email,v.password);if("emailLink"===v.signInMethod)return this._fromEmailAndCode(v.email,v.password,v.tenantId)}return null}_getIdTokenResponse(g){var v=this;return(0,l.Z)(function*(){var D;switch(v.signInMethod){case"password":const M={returnSecureToken:!0,email:v._email,password:v._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(D=g._getRecaptchaConfig())&&void 0!==D&&D.emailPasswordEnabled){const O=yield Bs(g,M,"signInWithPassword");return Vr(g,O)}return Vr(g,M).catch(function(){var O=(0,l.Z)(function*(Y){if("auth/missing-recaptcha-token"===Y.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const ce=yield Bs(g,M,"signInWithPassword");return Vr(g,ce)}return Promise.reject(Y)});return function(Y){return O.apply(this,arguments)}}());case"emailLink":return function qr(b,g){return _c.apply(this,arguments)}(g,{email:v._email,oobCode:v._password});default:xe(g,"internal-error")}})()}_linkToIdToken(g,v){var D=this;return(0,l.Z)(function*(){switch(D.signInMethod){case"password":return Qi(g,{idToken:v,returnSecureToken:!0,email:D._email,password:D._password});case"emailLink":return function Sm(b,g){return vc.apply(this,arguments)}(g,{idToken:v,email:D._email,oobCode:D._password});default:xe(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Us(b,g){return fi.apply(this,arguments)}function fi(){return(fi=(0,l.Z)(function*(b,g){return Pt(b,"POST","/v1/accounts:signInWithIdp",Fe(b,g))})).apply(this,arguments)}class zt extends Pa{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const v=new zt(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(v.idToken=g.idToken),g.accessToken&&(v.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(v.nonce=g.nonce),g.pendingToken&&(v.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(v.accessToken=g.oauthToken,v.secret=g.oauthTokenSecret):xe("argument-error"),v}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g,{providerId:D,signInMethod:M}=v,O=(0,he._T)(v,["providerId","signInMethod"]);if(!D||!M)return null;const Y=new zt(D,M);return Y.idToken=O.idToken||void 0,Y.accessToken=O.accessToken||void 0,Y.secret=O.secret,Y.nonce=O.nonce,Y.pendingToken=O.pendingToken||null,Y}_getIdTokenResponse(g){return Us(g,this.buildRequest())}_linkToIdToken(g,v){const D=this.buildRequest();return D.idToken=v,Us(g,D)}_getReauthenticationResolver(g){const v=this.buildRequest();return v.autoCreate=!1,Us(g,v)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const v={};this.idToken&&(v.id_token=this.idToken),this.accessToken&&(v.access_token=this.accessToken),this.secret&&(v.oauth_token_secret=this.secret),v.providerId=this.providerId,this.nonce&&!this.pendingToken&&(v.nonce=this.nonce),g.postBody=(0,B.xO)(v)}return g}}function Yr(){return(Yr=(0,l.Z)(function*(b,g){return Be(b,"POST","/v1/accounts:sendVerificationCode",Fe(b,g))})).apply(this,arguments)}function Ji(){return(Ji=(0,l.Z)(function*(b,g){return Pt(b,"POST","/v1/accounts:signInWithPhoneNumber",Fe(b,g))})).apply(this,arguments)}function zn(){return(zn=(0,l.Z)(function*(b,g){const v=yield Pt(b,"POST","/v1/accounts:signInWithPhoneNumber",Fe(b,g));if(v.temporaryProof)throw Qn(b,"account-exists-with-different-credential",v);return v})).apply(this,arguments)}const Vo={USER_NOT_FOUND:"user-not-found"};function Wt(){return(Wt=(0,l.Z)(function*(b,g){return Pt(b,"POST","/v1/accounts:signInWithPhoneNumber",Fe(b,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Vo)})).apply(this,arguments)}class Dr extends Pa{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,v){return new Dr({verificationId:g,verificationCode:v})}static _fromTokenResponse(g,v){return new Dr({phoneNumber:g,temporaryProof:v})}_getIdTokenResponse(g){return function La(b,g){return Ji.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,v){return function yc(b,g){return zn.apply(this,arguments)}(g,Object.assign({idToken:v},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Al(b,g){return Wt.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:v,verificationId:D,verificationCode:M}=this.params;return g&&v?{temporaryProof:g,phoneNumber:v}:{sessionInfo:D,code:M}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:v,verificationCode:D,phoneNumber:M,temporaryProof:O}=g;return D||v||M||O?new Dr({verificationId:v,verificationCode:D,phoneNumber:M,temporaryProof:O}):null}}class gi{constructor(g){var v,D,M,O,Y,ce;const Ye=(0,B.zd)((0,B.pd)(g)),Xe=null!==(v=Ye.apiKey)&&void 0!==v?v:null,Et=null!==(D=Ye.oobCode)&&void 0!==D?D:null,It=function np(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=Ye.mode)&&void 0!==M?M:null);X(Xe&&Et&&It,"argument-error"),this.apiKey=Xe,this.operation=It,this.code=Et,this.continueUrl=null!==(O=Ye.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(Y=Ye.languageCode)&&void 0!==Y?Y:null,this.tenantId=null!==(ce=Ye.tenantId)&&void 0!==ce?ce:null}static parseLink(g){const v=function Uo(b){const g=(0,B.zd)((0,B.pd)(b)).link,v=g?(0,B.zd)((0,B.pd)(g)).deep_link_id:null,D=(0,B.zd)((0,B.pd)(b)).deep_link_id;return(D?(0,B.zd)((0,B.pd)(D)).link:null)||D||v||g||b}(g);try{return new gi(v)}catch{return null}}}let Ba=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(v,D){return xu._fromEmailAndPassword(v,D)}static credentialWithLink(v,D){const M=gi.parseLink(D);return X(M,"argument-error"),xu._fromEmailAndCode(v,M.code,M.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class cr{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Ho extends cr{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class jo extends Ho{static credentialFromJSON(g){const v="string"==typeof g?JSON.parse(g):g;return X("providerId"in v&&"signInMethod"in v,"argument-error"),zt._fromParams(v)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return X(g.idToken||g.accessToken,"argument-error"),zt._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return jo.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return jo.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:D,oauthTokenSecret:M,pendingToken:O,nonce:Y,providerId:ce}=g;if(!D&&!M&&!v&&!O||!ce)return null;try{return new jo(ce)._credential({idToken:v,accessToken:D,nonce:Y,pendingToken:O})}catch{return null}}}let ca=(()=>{class b extends Ho{constructor(){super("facebook.com")}static credential(v){return zt._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return b.credentialFromTaggedObject(v)}static credentialFromError(v){return b.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return b.credential(v.oauthAccessToken)}catch{return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),Hs=(()=>{class b extends Ho{constructor(){super("google.com"),this.addScope("profile")}static credential(v,D){return zt._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:v,accessToken:D})}static credentialFromResult(v){return b.credentialFromTaggedObject(v)}static credentialFromError(v){return b.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:D,oauthAccessToken:M}=v;if(!D&&!M)return null;try{return b.credential(D,M)}catch{return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),wc=(()=>{class b extends Ho{constructor(){super("github.com")}static credential(v){return zt._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return b.credentialFromTaggedObject(v)}static credentialFromError(v){return b.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return b.credential(v.oauthAccessToken)}catch{return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class ln extends Pa{constructor(g,v){super(g,g),this.pendingToken=v}_getIdTokenResponse(g){return Us(g,this.buildRequest())}_linkToIdToken(g,v){const D=this.buildRequest();return D.idToken=v,Us(g,D)}_getReauthenticationResolver(g){const v=this.buildRequest();return v.autoCreate=!1,Us(g,v)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g,{providerId:D,signInMethod:M,pendingToken:O}=v;return D&&M&&O&&D===M?new ln(D,O):null}static _create(g,v){return new ln(g,v)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ml extends cr{constructor(g){X(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Ml.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Ml.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const v=ln.fromJSON(g);return X(v,"argument-error"),v}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:v,providerId:D}=g;if(!v||!D)return null;try{return ln._create(D,v)}catch{return null}}}let Ru=(()=>{class b extends Ho{constructor(){super("twitter.com")}static credential(v,D){return zt._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:v,oauthTokenSecret:D})}static credentialFromResult(v){return b.credentialFromTaggedObject(v)}static credentialFromError(v){return b.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthAccessToken:D,oauthTokenSecret:M}=v;if(!D||!M)return null;try{return b.credential(D,M)}catch{return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function ur(b,g){return Va.apply(this,arguments)}function Va(){return(Va=(0,l.Z)(function*(b,g){return Pt(b,"POST","/v1/accounts:signUp",Fe(b,g))})).apply(this,arguments)}class dr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,v,D,M=!1){return(0,l.Z)(function*(){const O=yield Ie._fromIdTokenResponse(g,D,M),Y=da(D);return new dr({user:O,providerId:Y,_tokenResponse:D,operationType:v})})()}static _forOperation(g,v,D){return(0,l.Z)(function*(){yield g._updateTokensIfNecessary(D,!0);const M=da(D);return new dr({user:g,providerId:M,_tokenResponse:D,operationType:v})})()}}function da(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function Am(){return(Am=(0,l.Z)(function*(b){var g;const v=Gi(b);if(yield v._initializationPromise,null!==(g=v.currentUser)&&void 0!==g&&g.isAnonymous)return new dr({user:v.currentUser,providerId:null,operationType:"signIn"});const D=yield ur(v,{returnSecureToken:!0}),M=yield dr._fromIdTokenResponse(v,"signIn",D,!0);return yield v._updateCurrentUser(M.user),M})).apply(this,arguments)}class hr extends B.ZR{constructor(g,v,D,M){var O;super(v.code,v.message),this.operationType=D,this.user=M,Object.setPrototypeOf(this,hr.prototype),this.customData={appName:g.name,tenantId:null!==(O=g.tenantId)&&void 0!==O?O:void 0,_serverResponse:v.customData._serverResponse,operationType:D}}static _fromErrorAndOperation(g,v,D,M){return new hr(g,v,D,M)}}function Ur(b,g,v,D){return("reauthenticate"===g?v._getReauthenticationResolver(b):v._getIdTokenResponse(b)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?hr._fromErrorAndOperation(b,O,g,D):O})}function Ou(b){return new Set(b.map(({providerId:g})=>g).filter(g=>!!g))}function Ts(){return Ts=(0,l.Z)(function*(b,g){const v=(0,B.m9)(b);yield xl(!0,v,g);const{providerUserInfo:D}=yield function ar(b,g){return $r.apply(this,arguments)}(v.auth,{idToken:yield v.getIdToken(),deleteProvider:[g]}),M=Ou(D||[]);return v.providerData=v.providerData.filter(O=>M.has(O.providerId)),M.has("phone")||(v.phoneNumber=null),yield v.auth._persistUserIfCurrent(v),v}),Ts.apply(this,arguments)}function cs(b,g){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,l.Z)(function*(b,g,v=!1){const D=yield hi(b,g._linkToIdToken(b.auth,yield b.getIdToken()),v);return dr._forOperation(b,"link",D)})).apply(this,arguments)}function xl(b,g,v){return dh.apply(this,arguments)}function dh(){return(dh=(0,l.Z)(function*(b,g,v){yield En(g);const M=!1===b?"provider-already-linked":"no-such-provider";X(Ou(g.providerData).has(v)===b,g.auth,M)})).apply(this,arguments)}function Iy(b,g){return ku.apply(this,arguments)}function ku(){return(ku=(0,l.Z)(function*(b,g,v=!1){const{auth:D}=b,M="reauthenticate";try{const O=yield hi(b,Ur(D,M,g,b),v);X(O.idToken,D,"internal-error");const Y=Xt(O.idToken);X(Y,D,"internal-error");const{sub:ce}=Y;return X(b.uid===ce,D,"user-mismatch"),dr._forOperation(b,M,O)}catch(O){throw"auth/user-not-found"===O?.code&&xe(D,"user-mismatch"),O}})).apply(this,arguments)}function hh(b,g){return ip.apply(this,arguments)}function ip(){return(ip=(0,l.Z)(function*(b,g,v=!1){const D="signIn",M=yield Ur(b,D,g),O=yield dr._fromIdTokenResponse(b,D,M);return v||(yield b._updateCurrentUser(O.user)),O})).apply(this,arguments)}function fh(b,g){return rp.apply(this,arguments)}function rp(){return(rp=(0,l.Z)(function*(b,g){return hh(Gi(b),g)})).apply(this,arguments)}function Sy(b,g){return mi.apply(this,arguments)}function mi(){return(mi=(0,l.Z)(function*(b,g){const v=(0,B.m9)(b);return yield xl(!1,v,g.providerId),cs(v,g)})).apply(this,arguments)}function Ay(b,g){return Mm.apply(this,arguments)}function Mm(){return(Mm=(0,l.Z)(function*(b,g){return Iy((0,B.m9)(b),g)})).apply(this,arguments)}function Nm(){return(Nm=(0,l.Z)(function*(b,g){return Pt(b,"POST","/v1/accounts:signInWithCustomToken",Fe(b,g))})).apply(this,arguments)}function Go(){return Go=(0,l.Z)(function*(b,g){const v=Gi(b),D=yield function pD(b,g){return Nm.apply(this,arguments)}(v,{token:g,returnSecureToken:!0}),M=yield dr._fromIdTokenResponse(v,"signIn",D);return yield v._updateCurrentUser(M.user),M}),Go.apply(this,arguments)}class ph{constructor(g,v){this.factorId=g,this.uid=v.mfaEnrollmentId,this.enrollmentTime=new Date(v.enrolledAt).toUTCString(),this.displayName=v.displayName}static _fromServerResponse(g,v){return"phoneInfo"in v?Rl._fromServerResponse(g,v):"totpInfo"in v?gh._fromServerResponse(g,v):xe(g,"internal-error")}}class Rl extends ph{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,v){return new Rl(v)}}class gh extends ph{constructor(g){super("totp",g)}static _fromServerResponse(g,v){return new gh(v)}}function bc(b,g,v){var D;X((null===(D=v.url)||void 0===D?void 0:D.length)>0,b,"invalid-continue-uri"),X(typeof v.dynamicLinkDomain>"u"||v.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),g.continueUrl=v.url,g.dynamicLinkDomain=v.dynamicLinkDomain,g.canHandleCodeInApp=v.handleCodeInApp,v.iOS&&(X(v.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),g.iOSBundleId=v.iOS.bundleId),v.android&&(X(v.android.packageName.length>0,b,"missing-android-pkg-name"),g.androidInstallApp=v.android.installApp,g.androidMinimumVersionCode=v.android.minimumVersion,g.androidPackageName=v.android.packageName)}function Dc(){return Dc=(0,l.Z)(function*(b,g,v){var D;const M=Gi(b),O={requestType:"PASSWORD_RESET",email:g,clientType:"CLIENT_TYPE_WEB"};if(null!==(D=M._getRecaptchaConfig())&&void 0!==D&&D.emailPasswordEnabled){const Y=yield Bs(M,O,"getOobCode",!0);v&&bc(M,Y,v),yield Sl(M,Y)}else v&&bc(M,O,v),yield Sl(M,O).catch(function(){var Y=(0,l.Z)(function*(ce){if("auth/missing-recaptcha-token"!==ce.code)return Promise.reject(ce);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Ye=yield Bs(M,O,"getOobCode",!0);v&&bc(M,Ye,v),yield Sl(M,Ye)}});return function(ce){return Y.apply(this,arguments)}}())}),Dc.apply(this,arguments)}function Eo(){return(Eo=(0,l.Z)(function*(b,g,v){yield Xf((0,B.m9)(b),{oobCode:g,newPassword:v})})).apply(this,arguments)}function js(){return js=(0,l.Z)(function*(b,g){yield function Vs(b,g){return Au.apply(this,arguments)}((0,B.m9)(b),{oobCode:g})}),js.apply(this,arguments)}function Xi(b,g){return ja.apply(this,arguments)}function ja(){return(ja=(0,l.Z)(function*(b,g){const v=(0,B.m9)(b),D=yield Xf(v,{oobCode:g}),M=D.requestType;switch(X(M,v,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":X(D.newEmail,v,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":X(D.mfaInfo,v,"internal-error");default:X(D.email,v,"internal-error")}let O=null;return D.mfaInfo&&(O=ph._fromServerResponse(Gi(v),D.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.newEmail:D.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.email:D.newEmail)||null,multiFactorInfo:O},operation:M}})).apply(this,arguments)}function Ga(){return(Ga=(0,l.Z)(function*(b,g){const{data:v}=yield Xi((0,B.m9)(b),g);return v.email})).apply(this,arguments)}function Ec(){return Ec=(0,l.Z)(function*(b,g,v){var D;const M=Gi(b),O={returnSecureToken:!0,email:g,password:v,clientType:"CLIENT_TYPE_WEB"};let Y;if(null!==(D=M._getRecaptchaConfig())&&void 0!==D&&D.emailPasswordEnabled){const Xe=yield Bs(M,O,"signUpPassword");Y=ur(M,Xe)}else Y=ur(M,O).catch(function(){var Xe=(0,l.Z)(function*(Et){if("auth/missing-recaptcha-token"===Et.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const It=yield Bs(M,O,"signUpPassword");return ur(M,It)}return Promise.reject(Et)});return function(Et){return Xe.apply(this,arguments)}}());const ce=yield Y.catch(Xe=>Promise.reject(Xe)),Ye=yield dr._fromIdTokenResponse(M,"signIn",ce);return yield M._updateCurrentUser(Ye.user),Ye}),Ec.apply(this,arguments)}function Cc(){return Cc=(0,l.Z)(function*(b,g,v){var D;const M=Gi(b),O={requestType:"EMAIL_SIGNIN",email:g,clientType:"CLIENT_TYPE_WEB"};function Y(ce,Ye){X(Ye.handleCodeInApp,M,"argument-error"),Ye&&bc(M,ce,Ye)}if(null!==(D=M._getRecaptchaConfig())&&void 0!==D&&D.emailPasswordEnabled){const ce=yield Bs(M,O,"getOobCode",!0);Y(ce,v),yield yn(M,ce)}else Y(O,v),yield yn(M,O).catch(function(){var ce=(0,l.Z)(function*(Ye){if("auth/missing-recaptcha-token"!==Ye.code)return Promise.reject(Ye);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Xe=yield Bs(M,O,"getOobCode",!0);Y(Xe,v),yield yn(M,Xe)}});return function(Ye){return ce.apply(this,arguments)}}())}),Cc.apply(this,arguments)}function _h(){return(_h=(0,l.Z)(function*(b,g,v){const D=(0,B.m9)(b),M=Ba.credentialWithLink(g,v||Nn());return X(M._tenantId===(D.tenantId||null),D,"tenant-id-mismatch"),fh(D,M)})).apply(this,arguments)}function yh(){return(yh=(0,l.Z)(function*(b,g){return Be(b,"POST","/v1/accounts:createAuthUri",Fe(b,g))})).apply(this,arguments)}function $a(){return $a=(0,l.Z)(function*(b,g){const D={identifier:g,continueUri:Zn()?Nn():"http://localhost"},{signinMethods:M}=yield function vh(b,g){return yh.apply(this,arguments)}((0,B.m9)(b),D);return M||[]}),$a.apply(this,arguments)}function Ic(){return Ic=(0,l.Z)(function*(b,g){const v=(0,B.m9)(b),M={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};g&&bc(v.auth,M,g);const{email:O}=yield function tp(b,g){return Nu.apply(this,arguments)}(v.auth,M);O!==b.email&&(yield b.reload())}),Ic.apply(this,arguments)}function Pu(){return Pu=(0,l.Z)(function*(b,g,v){const D=(0,B.m9)(b),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:g};v&&bc(D.auth,O,v);const{email:Y}=yield function Wr(b,g){return la.apply(this,arguments)}(D.auth,O);Y!==b.email&&(yield b.reload())}),Pu.apply(this,arguments)}function up(){return(up=(0,l.Z)(function*(b,g){return Be(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function wh(){return wh=(0,l.Z)(function*(b,{displayName:g,photoURL:v}){if(void 0===g&&void 0===v)return;const D=(0,B.m9)(b),O={idToken:yield D.getIdToken(),displayName:g,photoUrl:v,returnSecureToken:!0},Y=yield hi(D,function My(b,g){return up.apply(this,arguments)}(D.auth,O));D.displayName=Y.displayName||null,D.photoURL=Y.photoUrl||null;const ce=D.providerData.find(({providerId:Ye})=>"password"===Ye);ce&&(ce.displayName=D.displayName,ce.photoURL=D.photoURL),yield D._updateTokensIfNecessary(Y)}),wh.apply(this,arguments)}function xm(b,g,v){return kl.apply(this,arguments)}function kl(){return(kl=(0,l.Z)(function*(b,g,v){const{auth:D}=b,O={idToken:yield b.getIdToken(),returnSecureToken:!0};g&&(O.email=g),v&&(O.password=v);const Y=yield hi(b,Qi(D,O));yield b._updateTokensIfNecessary(Y,!0)})).apply(this,arguments)}class Pl{constructor(g,v,D={}){this.isNewUser=g,this.providerId=v,this.profile=D}}class Sc extends Pl{constructor(g,v,D,M){super(g,v,D),this.username=M}}class bh extends Pl{constructor(g,v){super(g,"facebook.com",v)}}class hp extends Sc{constructor(g,v){super(g,"github.com",v,"string"==typeof v?.login?v?.login:null)}}class Lu extends Pl{constructor(g,v){super(g,"google.com",v)}}class Ac extends Sc{constructor(g,v,D){super(g,"twitter.com",v,D)}}function Rm(b){const{user:g,_tokenResponse:v}=b;return g.isAnonymous&&!v?{providerId:null,isNewUser:!1,profile:null}:function xy(b){var g,v;if(!b)return null;const{providerId:D}=b,M=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},O=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!D&&b?.idToken){const Y=null===(v=null===(g=Xt(b.idToken))||void 0===g?void 0:g.firebase)||void 0===v?void 0:v.sign_in_provider;if(Y)return new Pl(O,"anonymous"!==Y&&"custom"!==Y?Y:null)}if(!D)return null;switch(D){case"facebook.com":return new bh(O,M);case"github.com":return new hp(O,M);case"google.com":return new Lu(O,M);case"twitter.com":return new Ac(O,M,b.screenName||null);case"custom":case"anonymous":return new Pl(O,null);default:return new Pl(O,D,M)}}(v)}class Co{constructor(g,v,D){this.type=g,this.credential=v,this.auth=D}static _fromIdtoken(g,v){return new Co("enroll",g,v)}static _fromMfaPendingCredential(g){return new Co("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var v,D;if(g?.multiFactorSession){if(null!==(v=g.multiFactorSession)&&void 0!==v&&v.pendingCredential)return Co._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(D=g.multiFactorSession)&&void 0!==D&&D.idToken)return Co._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Wa{constructor(g,v,D){this.session=g,this.hints=v,this.signInResolver=D}static _fromError(g,v){const D=Gi(g),M=v.customData._serverResponse,O=(M.mfaInfo||[]).map(ce=>ph._fromServerResponse(D,ce));X(M.mfaPendingCredential,D,"internal-error");const Y=Co._fromMfaPendingCredential(M.mfaPendingCredential);return new Wa(Y,O,function(){var ce=(0,l.Z)(function*(Ye){const Xe=yield Ye._process(D,Y);delete M.mfaInfo,delete M.mfaPendingCredential;const Et=Object.assign(Object.assign({},M),{idToken:Xe.idToken,refreshToken:Xe.refreshToken});switch(v.operationType){case"signIn":const It=yield dr._fromIdTokenResponse(D,v.operationType,Et);return yield D._updateCurrentUser(It.user),It;case"reauthenticate":return X(v.user,D,"internal-error"),dr._forOperation(v.user,v.operationType,Et);default:xe(D,"internal-error")}});return function(Ye){return ce.apply(this,arguments)}}())}resolveSignIn(g){var v=this;return(0,l.Z)(function*(){return v.signInResolver(g)})()}}class Un{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(v=>{v.mfaInfo&&(this.enrolledFactors=v.mfaInfo.map(D=>ph._fromServerResponse(g.auth,D)))})}static _fromUser(g){return new Un(g)}getSession(){var g=this;return(0,l.Z)(function*(){return Co._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,v){var D=this;return(0,l.Z)(function*(){const M=g,O=yield D.getSession(),Y=yield hi(D.user,M._process(D.user.auth,O,v));return yield D.user._updateTokensIfNecessary(Y),D.user.reload()})()}unenroll(g){var v=this;return(0,l.Z)(function*(){const D="string"==typeof g?g:g.uid,M=yield v.user.getIdToken();try{const O=yield hi(v.user,function gp(b,g){return Be(b,"POST","/v2/accounts/mfaEnrollment:withdraw",Fe(b,g))}(v.user.auth,{idToken:M,mfaEnrollmentId:D}));v.enrolledFactors=v.enrolledFactors.filter(({uid:Y})=>Y!==D),yield v.user._updateTokensIfNecessary(O),yield v.user.reload()}catch(O){throw O}})()}}const fa=new WeakMap,Cr="__sak";class Lm{constructor(g,v){this.storageRetriever=g,this.type=v}_isAvailable(){try{return this.storage?(this.storage.setItem(Cr,"1"),this.storage.removeItem(Cr),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,v){return this.storage.setItem(g,JSON.stringify(v)),Promise.resolve()}_get(g){const v=this.storage.getItem(g);return Promise.resolve(v?JSON.parse(v):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Fl=(()=>{class b extends Lm{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(v,D)=>this.onStorageEvent(v,D),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Th(){const b=(0,B.z$)();return ye(b)||ji(b)}()&&function rh(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=El(),this._shouldAllowMigration=!0}forAllChangedKeys(v){for(const D of Object.keys(this.listeners)){const M=this.storage.getItem(D),O=this.localCache[D];M!==O&&v(D,O,M)}}onStorageEvent(v,D=!1){if(!v.key)return void this.forAllChangedKeys((ce,Ye,Xe)=>{this.notifyListeners(ce,Xe)});const M=v.key;if(D?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ce=this.storage.getItem(M);if(v.newValue!==ce)null!==v.newValue?this.storage.setItem(M,v.newValue):this.storage.removeItem(M);else if(this.localCache[M]===v.newValue&&!D)return}const O=()=>{const ce=this.storage.getItem(M);!D&&this.localCache[M]===ce||this.notifyListeners(M,ce)},Y=this.storage.getItem(M);!function sa(){return(0,B.w1)()&&10===document.documentMode}()||Y===v.newValue||v.newValue===v.oldValue?O():setTimeout(O,10)}notifyListeners(v,D){this.localCache[v]=D;const M=this.listeners[v];if(M)for(const O of Array.from(M))O(D&&JSON.parse(D))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((v,D,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:v,oldValue:D,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(v,D){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[v]||(this.listeners[v]=new Set,this.localCache[v]=this.storage.getItem(v)),this.listeners[v].add(D)}_removeListener(v,D){this.listeners[v]&&(this.listeners[v].delete(D),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(v,D){var M=()=>super._set,O=this;return(0,l.Z)(function*(){yield M().call(O,v,D),O.localCache[v]=JSON.stringify(D)})()}_get(v){var D=()=>super._get,M=this;return(0,l.Z)(function*(){const O=yield D().call(M,v);return M.localCache[v]=JSON.stringify(O),O})()}_remove(v){var D=()=>super._remove,M=this;return(0,l.Z)(function*(){yield D().call(M,v),delete M.localCache[v]})()}}return b.type="LOCAL",b})(),ds=(()=>{class b extends Lm{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(v,D){}_removeListener(v,D){}}return b.type="SESSION",b})();let Ih=(()=>{class b{constructor(v){this.eventTarget=v,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(v){const D=this.receivers.find(O=>O.isListeningto(v));if(D)return D;const M=new b(v);return this.receivers.push(M),M}isListeningto(v){return this.eventTarget===v}handleEvent(v){var D=this;return(0,l.Z)(function*(){const M=v,{eventId:O,eventType:Y,data:ce}=M.data,Ye=D.handlersMap[Y];if(!Ye?.size)return;M.ports[0].postMessage({status:"ack",eventId:O,eventType:Y});const Xe=Array.from(Ye).map(function(){var It=(0,l.Z)(function*(Si){return Si(M.origin,ce)});return function(Si){return It.apply(this,arguments)}}()),Et=yield function Um(b){return Promise.all(b.map(function(){var g=(0,l.Z)(function*(v){try{return{fulfilled:!0,value:yield v}}catch(D){return{fulfilled:!1,reason:D}}});return function(v){return g.apply(this,arguments)}}()))}(Xe);M.ports[0].postMessage({status:"done",eventId:O,eventType:Y,response:Et})})()}_subscribe(v,D){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[v]||(this.handlersMap[v]=new Set),this.handlersMap[v].add(D)}_unsubscribe(v,D){this.handlersMap[v]&&D&&this.handlersMap[v].delete(D),(!D||0===this.handlersMap[v].size)&&delete this.handlersMap[v],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function Vu(b="",g=10){let v="";for(let D=0;D<g;D++)v+=Math.floor(10*Math.random());return b+v}class Oy{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,v,D=50){var M=this;return(0,l.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let Y,ce;return new Promise((Ye,Xe)=>{const Et=Vu("",20);O.port1.start();const It=setTimeout(()=>{Xe(new Error("unsupported_event"))},D);ce={messageChannel:O,onMessage(Si){const no=Si;if(no.data.eventId===Et)switch(no.data.status){case"ack":clearTimeout(It),Y=setTimeout(()=>{Xe(new Error("timeout"))},3e3);break;case"done":clearTimeout(Y),Ye(no.data.response);break;default:clearTimeout(It),clearTimeout(Y),Xe(new Error("invalid_response"))}}},M.handlers.add(ce),O.port1.addEventListener("message",ce.onMessage),M.target.postMessage({eventType:g,eventId:Et,data:v},[O.port2])}).finally(()=>{ce&&M.removeMessageHandler(ce)})})()}}function ri(){return window}function qt(){return typeof ri().WorkerGlobalScope<"u"&&"function"==typeof ri().importScripts}function _p(){return(_p=(0,l.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const vp="firebaseLocalStorageDb",To="firebaseLocalStorage",Hu="fbase_key";class ju{constructor(g){this.request=g}toPromise(){return new Promise((g,v)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{v(this.request.error)})})}}function Gu(b,g){return b.transaction([To],g?"readwrite":"readonly").objectStore(To)}function Sh(){const b=indexedDB.open(vp,1);return new Promise((g,v)=>{b.addEventListener("error",()=>{v(b.error)}),b.addEventListener("upgradeneeded",()=>{const D=b.result;try{D.createObjectStore(To,{keyPath:Hu})}catch(M){v(M)}}),b.addEventListener("success",(0,l.Z)(function*(){const D=b.result;D.objectStoreNames.contains(To)?g(D):(D.close(),yield function Py(){const b=indexedDB.deleteDatabase(vp);return new ju(b).toPromise()}(),g(yield Sh()))}))})}function Ue(b,g,v){return gn.apply(this,arguments)}function gn(){return(gn=(0,l.Z)(function*(b,g,v){const D=Gu(b,!0).put({[Hu]:g,value:v});return new ju(D).toPromise()})).apply(this,arguments)}function $u(){return($u=(0,l.Z)(function*(b,g){const v=Gu(b,!1).get(g),D=yield new ju(v).toPromise();return void 0===D?null:D.value})).apply(this,arguments)}function gr(b,g){const v=Gu(b,!0).delete(g);return new ju(v).toPromise()}const Za=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var v=this;return(0,l.Z)(function*(){return v.db||(v.db=yield Sh()),v.db})()}_withRetries(v){var D=this;return(0,l.Z)(function*(){let M=0;for(;;)try{const O=yield D._openDb();return yield v(O)}catch(O){if(M++>3)throw O;D.db&&(D.db.close(),D.db=void 0)}})()}initializeServiceWorkerMessaging(){var v=this;return(0,l.Z)(function*(){return qt()?v.initializeReceiver():v.initializeSender()})()}initializeReceiver(){var v=this;return(0,l.Z)(function*(){v.receiver=Ih._getInstance(function pr(){return qt()?self:null}()),v.receiver._subscribe("keyChanged",function(){var D=(0,l.Z)(function*(M,O){return{keyProcessed:(yield v._poll()).includes(O.key)}});return function(M,O){return D.apply(this,arguments)}}()),v.receiver._subscribe("ping",function(){var D=(0,l.Z)(function*(M,O){return["keyChanged"]});return function(M,O){return D.apply(this,arguments)}}())})()}initializeSender(){var v=this;return(0,l.Z)(function*(){var D,M;if(v.activeServiceWorker=yield function mp(){return _p.apply(this,arguments)}(),!v.activeServiceWorker)return;v.sender=new Oy(v.activeServiceWorker);const O=yield v.sender._send("ping",{},800);O&&null!==(D=O[0])&&void 0!==D&&D.fulfilled&&null!==(M=O[0])&&void 0!==M&&M.value.includes("keyChanged")&&(v.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(v){var D=this;return(0,l.Z)(function*(){if(D.sender&&D.activeServiceWorker&&function Uu(){var b;return(null===(b=navigator?.serviceWorker)||void 0===b?void 0:b.controller)||null}()===D.activeServiceWorker)try{yield D.sender._send("keyChanged",{key:v},D.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,l.Z)(function*(){try{if(!indexedDB)return!1;const v=yield Sh();return yield Ue(v,Cr,"1"),yield gr(v,Cr),!0}catch{}return!1})()}_withPendingWrite(v){var D=this;return(0,l.Z)(function*(){D.pendingWrites++;try{yield v()}finally{D.pendingWrites--}})()}_set(v,D){var M=this;return(0,l.Z)(function*(){return M._withPendingWrite((0,l.Z)(function*(){return yield M._withRetries(O=>Ue(O,v,D)),M.localCache[v]=D,M.notifyServiceWorker(v)}))})()}_get(v){var D=this;return(0,l.Z)(function*(){const M=yield D._withRetries(O=>function Js(b,g){return $u.apply(this,arguments)}(O,v));return D.localCache[v]=M,M})()}_remove(v){var D=this;return(0,l.Z)(function*(){return D._withPendingWrite((0,l.Z)(function*(){return yield D._withRetries(M=>gr(M,v)),delete D.localCache[v],D.notifyServiceWorker(v)}))})()}_poll(){var v=this;return(0,l.Z)(function*(){const D=yield v._withRetries(Y=>{const ce=Gu(Y,!1).getAll();return new ju(ce).toPromise()});if(!D)return[];if(0!==v.pendingWrites)return[];const M=[],O=new Set;for(const{fbase_key:Y,value:ce}of D)O.add(Y),JSON.stringify(v.localCache[Y])!==JSON.stringify(ce)&&(v.notifyListeners(Y,ce),M.push(Y));for(const Y of Object.keys(v.localCache))v.localCache[Y]&&!O.has(Y)&&(v.notifyListeners(Y,null),M.push(Y));return M})()}notifyListeners(v,D){this.localCache[v]=D;const M=this.listeners[v];if(M)for(const O of Array.from(M))O(D)}startPolling(){var v=this;this.stopPolling(),this.pollTimer=setInterval((0,l.Z)(function*(){return v._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(v,D){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[v]||(this.listeners[v]=new Set,this._get(v)),this.listeners[v].add(D)}_removeListener(v,D){this.listeners[v]&&(this.listeners[v].delete(D),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})(),Is=1e12;class yp{constructor(g){this.auth=g,this.counter=Is,this._widgets=new Map}render(g,v){const D=this.counter;return this._widgets.set(D,new Ka(g,this.auth.name,v||{})),this.counter++,D}reset(g){var v;const D=g||Is;null===(v=this._widgets.get(D))||void 0===v||v.delete(),this._widgets.delete(D)}getResponse(g){var v;return(null===(v=this._widgets.get(g||Is))||void 0===v?void 0:v.getResponse())||""}execute(g){var v=this;return(0,l.Z)(function*(){var D;return null===(D=v._widgets.get(g||Is))||void 0===D||D.execute(),""})()}}class Ka{constructor(g,v,D){this.params=D,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof g?document.getElementById(g):g;X(M,"argument-error",{appName:v}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Io(b){const g=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let D=0;D<b;D++)g.push(v.charAt(Math.floor(62*Math.random())));return g.join("")}(50);const{callback:g,"expired-callback":v}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,v)try{v()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Nh=Tl("rcb"),xh=new or(3e4,6e4);class Fy{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=ri().grecaptcha)||void 0===g||!g.render)}load(g,v=""){return X(function qu(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}(v),g,"argument-error"),this.shouldResolveImmediately(v)&&aa(ri().grecaptcha)?Promise.resolve(ri().grecaptcha):new Promise((D,M)=>{const O=ri().setTimeout(()=>{M(fe(g,"network-request-failed"))},xh.get());ri()[Nh]=()=>{ri().clearTimeout(O),delete ri()[Nh];const ce=ri().grecaptcha;if(!ce||!aa(ce))return void M(fe(g,"internal-error"));const Ye=ce.render;ce.render=(Xe,Et)=>{const It=Ye(Xe,Et);return this.counter++,It},this.hostLanguage=v,D(ce)},Ls(`https://www.google.com/recaptcha/api.js??${(0,B.xO)({onload:Nh,render:"explicit",hl:v})}`).catch(()=>{clearTimeout(O),M(fe(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var v;return!(null===(v=ri().grecaptcha)||void 0===v||!v.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class wp{load(g){return(0,l.Z)(function*(){return new yp(g)})()}clearedOneInstance(){}}const Yu="recaptcha",bp={theme:"light",type:"image"};class Dp{constructor(g,v=Object.assign({},bp),D){this.parameters=v,this.type=Yu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Gi(D),this.isInvisible="invisible"===this.parameters.size,X(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof g?document.getElementById(g):g;X(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new wp:new Fy,this.validateStartingState()}verify(){var g=this;return(0,l.Z)(function*(){g.assertNotDestroyed();const v=yield g.render(),D=g.getAssertedRecaptcha();return D.getResponse(v)||new Promise(O=>{const Y=ce=>{ce&&(g.tokenChangeListeners.delete(Y),O(ce))};g.tokenChangeListeners.add(Y),g.isInvisible&&D.execute(v)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){X(!this.parameters.sitekey,this.auth,"argument-error"),X(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),X(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return v=>{if(this.tokenChangeListeners.forEach(D=>D(v)),"function"==typeof g)g(v);else if("string"==typeof g){const D=ri()[g];"function"==typeof D&&D(v)}}}assertNotDestroyed(){X(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,l.Z)(function*(){if(yield g.init(),!g.widgetId){let v=g.container;if(!g.isInvisible){const D=document.createElement("div");v.appendChild(D),v=D}g.widgetId=g.getAssertedRecaptcha().render(v,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,l.Z)(function*(){X(Zn()&&!qt(),g.auth,"internal-error"),yield function jm(){let b=null;return new Promise(g=>{"complete"!==document.readyState?(b=()=>g(),window.addEventListener("load",b)):g()}).catch(g=>{throw b&&window.removeEventListener("load",b),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const v=yield function oa(b){return Zs.apply(this,arguments)}(g.auth);X(v,g.auth,"internal-error"),g.parameters.sitekey=v})()}getAssertedRecaptcha(){return X(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class si{constructor(g,v){this.verificationId=g,this.onConfirmation=v}confirm(g){const v=Dr._fromVerification(this.verificationId,g);return this.onConfirmation(v)}}function Mt(){return(Mt=(0,l.Z)(function*(b,g,v){const D=Gi(b),M=yield Jn(D,g,(0,B.m9)(v));return new si(M,O=>fh(D,O))})).apply(this,arguments)}function Hn(){return(Hn=(0,l.Z)(function*(b,g,v){const D=(0,B.m9)(b);yield xl(!1,D,"phone");const M=yield Jn(D.auth,g,(0,B.m9)(v));return new si(M,O=>Sy(D,O))})).apply(this,arguments)}function Qa(){return(Qa=(0,l.Z)(function*(b,g,v){const D=(0,B.m9)(b),M=yield Jn(D.auth,g,(0,B.m9)(v));return new si(M,O=>Ay(D,O))})).apply(this,arguments)}function Jn(b,g,v){return at.apply(this,arguments)}function at(){return at=(0,l.Z)(function*(b,g,v){var D;const M=yield v.verify();try{let O;if(X("string"==typeof M,b,"argument-error"),X(v.type===Yu,b,"argument-error"),O="string"==typeof g?{phoneNumber:g}:g,"session"in O){const Y=O.session;if("phoneNumber"in O)return X("enroll"===Y.type,b,"internal-error"),(yield function Nc(b,g){return Be(b,"POST","/v2/accounts/mfaEnrollment:start",Fe(b,g))}(b,{idToken:Y.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{X("signin"===Y.type,b,"internal-error");const ce=(null===(D=O.multiFactorHint)||void 0===D?void 0:D.uid)||O.multiFactorUid;return X(ce,b,"missing-multi-factor-info"),(yield function Ah(b,g){return Be(b,"POST","/v2/accounts/mfaSignIn:start",Fe(b,g))}(b,{mfaPendingCredential:Y.credential,mfaEnrollmentId:ce,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Y}=yield function pi(b,g){return Yr.apply(this,arguments)}(b,{phoneNumber:O.phoneNumber,recaptchaToken:M});return Y}}finally{v._reset()}}),at.apply(this,arguments)}function Xn(){return(Xn=(0,l.Z)(function*(b,g){yield cs((0,B.m9)(b),g)})).apply(this,arguments)}let Ar=(()=>{class b{constructor(v){this.providerId=b.PROVIDER_ID,this.auth=Gi(v)}verifyPhoneNumber(v,D){return Jn(this.auth,v,(0,B.m9)(D))}static credential(v,D){return Dr._fromVerification(v,D)}static credentialFromResult(v){return b.credentialFromTaggedObject(v)}static credentialFromError(v){return b.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{phoneNumber:D,temporaryProof:M}=v;return D&&M?Dr._fromTokenResponse(D,M):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function ga(b,g){return g?dt(g):(X(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class Gs extends Pa{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Us(g,this._buildIdpRequest())}_linkToIdToken(g,v){return Us(g,this._buildIdpRequest(v))}_getReauthenticationResolver(g){return Us(g,this._buildIdpRequest())}_buildIdpRequest(g){const v={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(v.idToken=g),v}}function xc(b){return hh(b.auth,new Gs(b),b.bypassAuthState)}function $i(b){const{auth:g,user:v}=b;return X(v,g,"internal-error"),Iy(v,new Gs(b),b.bypassAuthState)}function _i(b){return fn.apply(this,arguments)}function fn(){return(fn=(0,l.Z)(function*(b){const{auth:g,user:v}=b;return X(v,g,"internal-error"),cs(v,new Gs(b),b.bypassAuthState)})).apply(this,arguments)}class er{constructor(g,v,D,M,O=!1){this.auth=g,this.resolver=D,this.user=M,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(v)?v:[v]}execute(){var g=this;return new Promise(function(){var v=(0,l.Z)(function*(D,M){g.pendingPromise={resolve:D,reject:M};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(O){g.reject(O)}});return function(D,M){return v.apply(this,arguments)}}())}onAuthEvent(g){var v=this;return(0,l.Z)(function*(){const{urlResponse:D,sessionId:M,postBody:O,tenantId:Y,error:ce,type:Ye}=g;if(ce)return void v.reject(ce);const Xe={auth:v.auth,requestUri:D,sessionId:M,tenantId:Y||void 0,postBody:O||void 0,user:v.user,bypassAuthState:v.bypassAuthState};try{v.resolve(yield v.getIdpTask(Ye)(Xe))}catch(Et){v.reject(Et)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return xc;case"linkViaPopup":case"linkViaRedirect":return _i;case"reauthViaPopup":case"reauthViaRedirect":return $i;default:xe(this.auth,"internal-error")}}resolve(g){kt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){kt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const jn=new or(2e3,1e4);function Bl(){return(Bl=(0,l.Z)(function*(b,g,v){const D=Gi(b);We(b,g,cr);const M=ga(D,v);return new Rc(D,"signInViaPopup",g,M).executeNotNull()})).apply(this,arguments)}function Wo(){return(Wo=(0,l.Z)(function*(b,g,v){const D=(0,B.m9)(b);We(D.auth,g,cr);const M=ga(D.auth,v);return new Rc(D.auth,"reauthViaPopup",g,M,D).executeNotNull()})).apply(this,arguments)}function Zr(){return(Zr=(0,l.Z)(function*(b,g,v){const D=(0,B.m9)(b);We(D.auth,g,cr);const M=ga(D.auth,v);return new Rc(D.auth,"linkViaPopup",g,M,D).executeNotNull()})).apply(this,arguments)}let Rc=(()=>{class b extends er{constructor(v,D,M,O,Y){super(v,D,O,Y),this.provider=M,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var v=this;return(0,l.Z)(function*(){const D=yield v.execute();return X(D,v.auth,"internal-error"),D})()}onExecution(){var v=this;return(0,l.Z)(function*(){kt(1===v.filter.length,"Popup operations only handle one event");const D=Vu();v.authWindow=yield v.resolver._openPopup(v.auth,v.provider,v.filter[0],D),v.authWindow.associatedEvent=D,v.resolver._originValidation(v.auth).catch(M=>{v.reject(M)}),v.resolver._isIframeWebStorageSupported(v.auth,M=>{M||v.reject(fe(v.auth,"web-storage-unsupported"))}),v.pollUserCancellation()})()}get eventId(){var v;return(null===(v=this.authWindow)||void 0===v?void 0:v.associatedEvent)||null}cancel(){this.reject(fe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const v=()=>{var D,M;this.pollId=null!==(M=null===(D=this.authWindow)||void 0===D?void 0:D.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(fe(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(v,jn.get())};v()}}return b.currentPopupAction=null,b})();const So="pendingRedirect",dn=new Map;class Gm extends er{constructor(g,v,D=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],v,void 0,D),this.eventId=null}execute(){var g=()=>super.execute,v=this;return(0,l.Z)(function*(){let D=dn.get(v.auth._key());if(!D){try{const O=(yield function Oc(b,g){return Ku.apply(this,arguments)}(v.resolver,v.auth))?yield g().call(v):null;D=()=>Promise.resolve(O)}catch(M){D=()=>Promise.reject(M)}dn.set(v.auth._key(),D)}return v.bypassAuthState||dn.set(v.auth._key(),()=>Promise.resolve(null)),D()})()}onAuthEvent(g){var v=()=>super.onAuthEvent,D=this;return(0,l.Z)(function*(){if("signInViaRedirect"===g.type)return v().call(D,g);if("unknown"!==g.type){if(g.eventId){const M=yield D.auth._redirectUserForId(g.eventId);if(M)return D.user=M,v().call(D,g);D.resolve(null)}}else D.resolve(null)})()}onExecution(){return(0,l.Z)(function*(){})()}cleanUp(){}}function Ku(){return(Ku=(0,l.Z)(function*(b,g){const v=kc(g),D=_D(b);if(!(yield D._isAvailable()))return!1;const M="true"===(yield D._get(v));return yield D._remove(v),M})).apply(this,arguments)}function Ly(b,g){return Ep.apply(this,arguments)}function Ep(){return(Ep=(0,l.Z)(function*(b,g){return _D(b)._set(kc(g),"true")})).apply(this,arguments)}function $m(b,g){dn.set(b._key(),g)}function _D(b){return dt(b._redirectPersistence)}function kc(b){return q(So,b.config.apiKey,b.name)}function Vl(b,g,v){return function By(b,g,v){return Ul.apply(this,arguments)}(b,g,v)}function Ul(){return(Ul=(0,l.Z)(function*(b,g,v){const D=Gi(b);We(b,g,cr),yield D._initializationPromise;const M=ga(D,v);return yield Ly(M,D),M._openRedirect(D,g,"signInViaRedirect")})).apply(this,arguments)}function Tp(b,g,v){return function Rh(b,g,v){return zm.apply(this,arguments)}(b,g,v)}function zm(){return(zm=(0,l.Z)(function*(b,g,v){const D=(0,B.m9)(b);We(D.auth,g,cr),yield D.auth._initializationPromise;const M=ga(D.auth,v);yield Ly(M,D.auth);const O=yield Hr(D);return M._openRedirect(D.auth,g,"reauthViaRedirect",O)})).apply(this,arguments)}function Wm(b,g,v){return function Vy(b,g,v){return Ip.apply(this,arguments)}(b,g,v)}function Ip(){return(Ip=(0,l.Z)(function*(b,g,v){const D=(0,B.m9)(b);We(D.auth,g,cr),yield D.auth._initializationPromise;const M=ga(D.auth,v);yield xl(!1,D,g.providerId),yield Ly(M,D.auth);const O=yield Hr(D);return M._openRedirect(D.auth,g,"linkViaRedirect",O)})).apply(this,arguments)}function oi(){return(oi=(0,l.Z)(function*(b,g){return yield Gi(b)._initializationPromise,mr(b,g,!1)})).apply(this,arguments)}function mr(b,g){return L.apply(this,arguments)}function L(){return(L=(0,l.Z)(function*(b,g,v=!1){const D=Gi(b),M=ga(D,g),Y=yield new Gm(D,M,v).execute();return Y&&!v&&(delete Y.user._redirectEventId,yield D._persistUserIfCurrent(Y.user),yield D._setRedirectUser(null,g)),Y})).apply(this,arguments)}function Hr(b){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,l.Z)(function*(b){const g=Vu(`${b.uid}:::`);return b._redirectEventId=g,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),g})).apply(this,arguments)}class Qu{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let v=!1;return this.consumers.forEach(D=>{this.isEventForConsumer(g,D)&&(v=!0,this.sendToConsumer(g,D),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Ja(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Pc(b);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,v||(this.queuedRedirectEvent=g,v=!0)),v}sendToConsumer(g,v){var D;if(g.error&&!Pc(g)){const M=(null===(D=g.error.code)||void 0===D?void 0:D.split("auth/")[1])||"internal-error";v.onError(fe(this.auth,M))}else v.onAuthEvent(g)}isEventForConsumer(g,v){const D=null===v.eventId||!!g.eventId&&g.eventId===v.eventId;return v.filter.includes(g.type)&&D}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ei(g))}saveEventToCache(g){this.cachedEventUids.add(ei(g)),this.lastProcessedEventTime=Date.now()}}function ei(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(g=>g).join("-")}function Pc({type:b,error:g}){return"unknown"===b&&"auth/no-auth-event"===g?.code}function Ju(b){return Sp.apply(this,arguments)}function Sp(){return(Sp=(0,l.Z)(function*(b,g={}){return Be(b,"GET","/v1/projects",g)})).apply(this,arguments)}const Oh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xa=/^https?/;function qo(){return(qo=(0,l.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:g}=yield Ju(b);for(const v of g)try{if(kh(v))return}catch{}xe(b,"unauthorized-domain")})).apply(this,arguments)}function kh(b){const g=Nn(),{protocol:v,hostname:D}=new URL(g);if(b.startsWith("chrome-extension://")){const Y=new URL(b);return""===Y.hostname&&""===D?"chrome-extension:"===v&&b.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===v&&Y.hostname===D}if(!Xa.test(v))return!1;if(Oh.test(b))return D===b;const M=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(D)}const Fc=new or(3e4,6e4);function Mp(){const b=ri().___jsl;if(b?.H)for(const g of Object.keys(b.H))if(b.H[g].r=b.H[g].r||[],b.H[g].L=b.H[g].L||[],b.H[g].r=[...b.H[g].L],b.CP)for(let v=0;v<b.CP.length;v++)b.CP[v]=null}let el=null;const Lc=new or(5e3,15e3),Ph="__/auth/iframe",jl="emulator/auth/iframe",Bc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Gl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Vc(b){const g=b.config;X(g.authDomain,b,"auth-domain-config-required");const v=g.emulator?me(g,jl):`https://${b.config.authDomain}/${Ph}`,D={apiKey:g.apiKey,appName:b.name,v:ie.SDK_VERSION},M=Gl.get(b.config.apiHost);M&&(D.eid=M);const O=b._getFrameworks();return O.length&&(D.fw=O.join(",")),`${v}?${(0,B.xO)(D).slice(1)}`}function S(){return S=(0,l.Z)(function*(b){const g=yield function Mo(b){return el=el||function mn(b){return new Promise((g,v)=>{var D,M,O;function Y(){Mp(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Mp(),v(fe(b,"network-request-failed"))},timeout:Fc.get()})}if(null!==(M=null===(D=ri().gapi)||void 0===D?void 0:D.iframes)&&void 0!==M&&M.Iframe)g(gapi.iframes.getContext());else{if(null===(O=ri().gapi)||void 0===O||!O.load){const ce=Tl("iframefcb");return ri()[ce]=()=>{gapi.load?Y():v(fe(b,"network-request-failed"))},Ls(`https://apis.google.com/js/api.js?onload=${ce}`).catch(Ye=>v(Ye))}Y()}}).catch(g=>{throw el=null,g})}(b),el}(b),v=ri().gapi;return X(v,b,"internal-error"),g.open({where:document.body,url:Vc(b),messageHandlersFilter:v.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Bc,dontclear:!0},D=>new Promise(function(){var M=(0,l.Z)(function*(O,Y){yield D.restyle({setHideOnLeave:!1});const ce=fe(b,"network-request-failed"),Ye=ri().setTimeout(()=>{Y(ce)},Lc.get());function Xe(){ri().clearTimeout(Ye),O(D)}D.ping(Xe).then(Xe,()=>{Y(ce)})});return function(O,Y){return M.apply(this,arguments)}}()))}),S.apply(this,arguments)}const R={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ht{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const en="__/auth/handler",tn="emulator/auth/handler",tr=encodeURIComponent("fac");function zi(b,g,v,D,M,O){return _a.apply(this,arguments)}function _a(){return(_a=(0,l.Z)(function*(b,g,v,D,M,O){X(b.config.authDomain,b,"auth-domain-config-required"),X(b.config.apiKey,b,"invalid-api-key");const Y={apiKey:b.config.apiKey,appName:b.name,authType:v,redirectUrl:D,v:ie.SDK_VERSION,eventId:M};if(g instanceof cr){g.setDefaultLanguage(b.languageCode),Y.providerId=g.providerId||"",(0,B.xb)(g.getCustomParameters())||(Y.customParameters=JSON.stringify(g.getCustomParameters()));for(const[Et,It]of Object.entries(O||{}))Y[Et]=It}if(g instanceof Ho){const Et=g.getScopes().filter(It=>""!==It);Et.length>0&&(Y.scopes=Et.join(","))}b.tenantId&&(Y.tid=b.tenantId);const ce=Y;for(const Et of Object.keys(ce))void 0===ce[Et]&&delete ce[Et];const Ye=yield b._getAppCheckToken(),Xe=Ye?`#${tr}=${encodeURIComponent(Ye)}`:"";return`${function Ii({config:b}){return b.emulator?me(b,tn):`https://${b.authDomain}/${en}`}(b)}?${(0,B.xO)(ce).slice(1)}${Xe}`})).apply(this,arguments)}const Xs="webStorageSupport",eo=class Kr{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ds,this._completeRedirectFn=mr,this._overrideRedirectResult=$m}_openPopup(g,v,D,M){var O=this;return(0,l.Z)(function*(){var Y;kt(null===(Y=O.eventManagers[g._key()])||void 0===Y?void 0:Y.manager,"_initialize() not called before _openPopup()");const ce=yield zi(g,v,D,Nn(),M);return function lt(b,g,v,D=500,M=600){const O=Math.max((window.screen.availHeight-M)/2,0).toString(),Y=Math.max((window.screen.availWidth-D)/2,0).toString();let ce="";const Ye=Object.assign(Object.assign({},R),{width:D.toString(),height:M.toString(),top:O,left:Y}),Xe=(0,B.z$)().toLowerCase();v&&(ce=wt(Xe)?"_blank":v),Le(Xe)&&(g=g||"http://localhost",Ye.scrollbars="yes");const Et=Object.entries(Ye).reduce((Si,[no,cd])=>`${Si}${no}=${cd},`,"");if(function br(b=(0,B.z$)()){var g;return ji(b)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(Xe)&&"_self"!==ce)return function Ot(b,g){const v=document.createElement("a");v.href=b,v.target=g;const D=document.createEvent("MouseEvent");D.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),v.dispatchEvent(D)}(g||"",ce),new ht(null);const It=window.open(g||"",ce,Et);X(It,b,"popup-blocked");try{It.focus()}catch{}return new ht(It)}(g,ce,Vu())})()}_openRedirect(g,v,D,M){var O=this;return(0,l.Z)(function*(){return yield O._originValidation(g),function ky(b){ri().location.href=b}(yield zi(g,v,D,Nn(),M)),new Promise(()=>{})})()}_initialize(g){const v=g._key();if(this.eventManagers[v]){const{manager:M,promise:O}=this.eventManagers[v];return M?Promise.resolve(M):(kt(O,"If manager is not set, promise should be"),O)}const D=this.initAndGetManager(g);return this.eventManagers[v]={promise:D},D.catch(()=>{delete this.eventManagers[v]}),D}initAndGetManager(g){var v=this;return(0,l.Z)(function*(){const D=yield function C(b){return S.apply(this,arguments)}(g),M=new Qu(g);return D.register("authEvent",O=>(X(O?.authEvent,g,"invalid-auth-event"),{status:M.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),v.eventManagers[g._key()]={manager:M},v.iframes[g._key()]=D,M})()}_isIframeWebStorageSupported(g,v){this.iframes[g._key()].send(Xs,{type:Xs},M=>{var O;const Y=null===(O=M?.[0])||void 0===O?void 0:O[Xs];void 0!==Y&&v(!!Y),xe(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const v=g._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function Ap(b){return qo.apply(this,arguments)}(g)),this.originValidationPromises[v]}get _shouldInitProactively(){return El()||ye()||ji()}};class Qr{constructor(g){this.factorId=g}_process(g,v,D){switch(v.type){case"enroll":return this._finalizeEnroll(g,v.credential,D);case"signin":return this._finalizeSignIn(g,v.credential);default:return Je("unexpected MultiFactorSessionType")}}}class $l extends Qr{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new $l(g)}_finalizeEnroll(g,v,D){return function Fm(b,g){return Be(b,"POST","/v2/accounts/mfaEnrollment:finalize",Fe(b,g))}(g,{idToken:v,displayName:D,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,v){return function Hm(b,g){return Be(b,"POST","/v2/accounts/mfaSignIn:finalize",Fe(b,g))}(g,{mfaPendingCredential:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Np=(()=>{class b{constructor(){}static assertion(v){return $l._fromCredential(v)}}return b.FACTOR_ID="phone",b})();var Uy="@firebase/auth";class fs{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var v=this;return(0,l.Z)(function*(){return v.assertAuthConfigured(),yield v.auth._initializationPromise,v.auth.currentUser?{accessToken:yield v.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const v=this.auth.onIdTokenChanged(D=>{g(D?.stsTokenManager.accessToken||null)});this.internalListeners.set(g,v),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const v=this.internalListeners.get(g);v&&(this.internalListeners.delete(g),v(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function zl(){return window}(0,B.Pz)("authIdTokenMaxAge"),function Uc(b){(0,ie._registerComponent)(new Ae.wA("auth",(g,{options:v})=>{const D=g.getProvider("app").getImmediate(),M=g.getProvider("heartbeat"),O=g.getProvider("app-check-internal"),{apiKey:Y,authDomain:ce}=D.options;X(Y&&!Y.includes(":"),"invalid-api-key",{appName:D.name});const Ye={apiKey:Y,authDomain:ce,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bo(b)},Xe=new ah(D,M,O,Ye);return function Im(b,g){const v=g?.persistence||[],D=(Array.isArray(v)?v:[v]).map(dt);g?.errorMap&&b._updateErrorMap(g.errorMap),b._initializeWithPersistence(D,g?.popupRedirectResolver)}(Xe,v),Xe},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,v,D)=>{g.getProvider("auth-internal").initialize()})),(0,ie._registerComponent)(new Ae.wA("auth-internal",g=>{const v=Gi(g.getProvider("auth").getImmediate());return new fs(v)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ie.registerVersion)(Uy,"0.23.2",function Lh(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(b)),(0,ie.registerVersion)(Uy,"0.23.2","esm2017")}("Browser");function Bh(){return Bh=(0,l.Z)(function*(b,g,v){var D;const{BuildInfo:M}=zl();kt(g.sessionId,"AuthEvent did not contain a session ID");const O=yield function $y(b){return Vh.apply(this,arguments)}(g.sessionId),Y={};return ji()?Y.ibi=M.packageName:Kt()?Y.apn=M.packageName:xe(b,"operation-not-supported-in-this-environment"),M.displayName&&(Y.appDisplayName=M.displayName),Y.sessionId=O,zi(b,v,g.type,void 0,null!==(D=g.eventId)&&void 0!==D?D:void 0,Y)}),Bh.apply(this,arguments)}function Ym(){return(Ym=(0,l.Z)(function*(b){const{BuildInfo:g}=zl(),v={};ji()?v.iosBundleId=g.packageName:Kt()?v.androidPackageName=g.packageName:xe(b,"operation-not-supported-in-this-environment"),yield Ju(b,v)})).apply(this,arguments)}function ed(){return(ed=(0,l.Z)(function*(b,g,v){const{cordova:D}=zl();let M=()=>{};try{yield new Promise((O,Y)=>{let ce=null;function Ye(){var It;O();const Si=null===(It=D.plugins.browsertab)||void 0===It?void 0:It.close;"function"==typeof Si&&Si(),"function"==typeof v?.close&&v.close()}function Xe(){ce||(ce=window.setTimeout(()=>{Y(fe(b,"redirect-cancelled-by-user"))},2e3))}function Et(){"visible"===document?.visibilityState&&Xe()}g.addPassiveListener(Ye),document.addEventListener("resume",Xe,!1),Kt()&&document.addEventListener("visibilitychange",Et,!1),M=()=>{g.removePassiveListener(Ye),document.removeEventListener("resume",Xe,!1),document.removeEventListener("visibilitychange",Et,!1),ce&&window.clearTimeout(ce)}})}finally{M()}})).apply(this,arguments)}function Vh(){return(Vh=(0,l.Z)(function*(b){const g=function Hc(b){if(kt(/[0-9a-zA-Z]+/.test(b),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(b);const g=new ArrayBuffer(b.length),v=new Uint8Array(g);for(let D=0;D<b.length;D++)v[D]=b.charCodeAt(D);return v}(b),v=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(v)).map(M=>M.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class zy extends Qu{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(v=>v(g)),super.onEvent(g)}initialized(){var g=this;return(0,l.Z)(function*(){yield g.initPromise})()}}function nd(b){return Qm.apply(this,arguments)}function Qm(){return(Qm=(0,l.Z)(function*(b){const g=yield Fp()._get(Xm(b));return g&&(yield Fp()._remove(Xm(b))),g})).apply(this,arguments)}function Jm(){const b=[];for(let v=0;v<20;v++){const D=Math.floor(62*Math.random());b.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(D))}return b.join("")}function Fp(){return dt(Fl)}function Xm(b){return q("authEvent",b.config.apiKey,b.name)}function Lp(b){if(!b?.includes("?"))return{};const[g,...v]=b.split("?");return(0,B.zd)(v.join("?"))}const t_=class DD{constructor(){this._redirectPersistence=ds,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=mr,this._overrideRedirectResult=$m}_initialize(g){var v=this;return(0,l.Z)(function*(){const D=g._key();let M=v.eventManagers.get(D);return M||(M=new zy(g),v.eventManagers.set(D,M),v.attachCallbackListeners(g,M)),M})()}_openPopup(g){xe(g,"operation-not-supported-in-this-environment")}_openRedirect(g,v,D,M){var O=this;return(0,l.Z)(function*(){!function wD(b){var g,v,D,M,O,Y,ce,Ye,Xe,Et;const It=zl();X("function"==typeof(null===(g=It?.universalLinks)||void 0===g?void 0:g.subscribe),b,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),X(typeof(null===(v=It?.BuildInfo)||void 0===v?void 0:v.packageName)<"u",b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),X("function"==typeof(null===(O=null===(M=null===(D=It?.cordova)||void 0===D?void 0:D.plugins)||void 0===M?void 0:M.browsertab)||void 0===O?void 0:O.openUrl),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),X("function"==typeof(null===(Ye=null===(ce=null===(Y=It?.cordova)||void 0===Y?void 0:Y.plugins)||void 0===ce?void 0:ce.browsertab)||void 0===Ye?void 0:Ye.isAvailable),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),X("function"==typeof(null===(Et=null===(Xe=It?.cordova)||void 0===Xe?void 0:Xe.InAppBrowser)||void 0===Et?void 0:Et.open),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const Y=yield O._initialize(g);yield Y.initialized(),Y.resetRedirect(),function Cp(){dn.clear()}(),yield O._originValidation(g);const ce=function Km(b,g,v=null){return{type:g,eventId:v,urlResponse:null,sessionId:Jm(),postBody:null,tenantId:b.tenantId,error:fe(b,"no-auth-event")}}(g,D,M);yield function td(b,g){return Fp()._set(Xm(b),g)}(g,ce);const Ye=yield function Gy(b,g,v){return Bh.apply(this,arguments)}(g,ce,v),Xe=yield function Pp(b){const{cordova:g}=zl();return new Promise(v=>{g.plugins.browsertab.isAvailable(D=>{let M=null;D?g.plugins.browsertab.openUrl(b):M=g.InAppBrowser.open(b,function In(b=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}()?"_blank":"_system","location=yes"),v(M)})})}(Ye);return function yD(b,g,v){return ed.apply(this,arguments)}(g,Y,Xe)})()}_isIframeWebStorageSupported(g,v){throw new Error("Method not implemented.")}_originValidation(g){const v=g._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function kp(b){return Ym.apply(this,arguments)}(g)),this.originValidationPromises[v]}attachCallbackListeners(g,v){const{universalLinks:D,handleOpenURL:M,BuildInfo:O}=zl(),Y=setTimeout((0,l.Z)(function*(){yield nd(g),v.onEvent(qy())}),500),ce=function(){var Et=(0,l.Z)(function*(It){clearTimeout(Y);const Si=yield nd(g);let no=null;Si&&It?.url&&(no=function bD(b,g){var v,D;const M=function JS(b){const g=Lp(b),v=g.link?decodeURIComponent(g.link):void 0,D=Lp(v).link,M=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return Lp(M).link||M||D||v||b}(g);if(M.includes("/__/auth/callback")){const O=Lp(M),Y=O.firebaseError?function Wy(b){try{return JSON.parse(b)}catch{return null}}(decodeURIComponent(O.firebaseError)):null,ce=null===(D=null===(v=Y?.code)||void 0===v?void 0:v.split("auth/"))||void 0===D?void 0:D[1],Ye=ce?fe(ce):null;return Ye?{type:b.type,eventId:b.eventId,tenantId:b.tenantId,error:Ye,urlResponse:null,sessionId:null,postBody:null}:{type:b.type,eventId:b.eventId,tenantId:b.tenantId,sessionId:b.sessionId,urlResponse:M,postBody:null}}return null}(Si,It.url)),v.onEvent(no||qy())});return function(Si){return Et.apply(this,arguments)}}();typeof D<"u"&&"function"==typeof D.subscribe&&D.subscribe(null,ce);const Ye=M,Xe=`${O.packageName.toLowerCase()}://`;zl().handleOpenURL=function(){var Et=(0,l.Z)(function*(It){if(It.toLowerCase().startsWith(Xe)&&ce({url:It}),"function"==typeof Ye)try{Ye(It)}catch(Si){console.error(Si)}});return function(It){return Et.apply(this,arguments)}}()}};function qy(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:fe("no-auth-event")}}function id(){var b;return(null===(b=self?.location)||void 0===b?void 0:b.protocol)||null}function Hh(b=(0,B.z$)()){return!("file:"!==id()&&"ionic:"!==id()&&"capacitor:"!==id()||!b.toLowerCase().match(/iphone|ipad|ipod|android/))}function e1(){try{const b=self.localStorage,g=Vu();if(b)return b.setItem(g,"1"),b.removeItem(g),!function XS(b=(0,B.z$)()){return function jh(){return(0,B.w1)()&&11===document?.documentMode}()||function RO(b=(0,B.z$)()){return/Edge\/\d+/.test(b)}(b)}()||(0,B.hl)()}catch{return Zy()&&(0,B.hl)()}return!1}function Zy(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ky(){return(function Uh(){return"http:"===id()||"https:"===id()}()||(0,B.ru)()||Hh())&&!function xO(){return(0,B.b$)()||(0,B.UG)()}()&&e1()&&!Zy()}function TD(){return Hh()&&typeof document<"u"}function rd(){return(rd=(0,l.Z)(function*(){return!!TD()&&new Promise(b=>{const g=setTimeout(()=>{b(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),b(!0)})})})).apply(this,arguments)}const to={LOCAL:"local",NONE:"none",SESSION:"session"},Gh=X,sd="persistence";function jc(b){return od.apply(this,arguments)}function od(){return(od=(0,l.Z)(function*(b){yield b._initializationPromise;const g=Gc(),v=q(sd,b.config.apiKey,b.name);g&&g.setItem(v,b._getPersistence())})).apply(this,arguments)}function Gc(){var b;try{return(null===(b=function ID(){return typeof window<"u"?window:null}())||void 0===b?void 0:b.sessionStorage)||null}catch{return null}}const i_=X;class va{constructor(){this.browserResolver=dt(eo),this.cordovaResolver=dt(t_),this.underlyingResolver=null,this._redirectPersistence=ds,this._completeRedirectFn=mr,this._overrideRedirectResult=$m}_initialize(g){var v=this;return(0,l.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,v,D,M){var O=this;return(0,l.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openPopup(g,v,D,M)})()}_openRedirect(g,v,D,M){var O=this;return(0,l.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openRedirect(g,v,D,M)})()}_isIframeWebStorageSupported(g,v){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,v)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return TD()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return i_(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,l.Z)(function*(){if(g.underlyingResolver)return;const v=yield function n_(){return rd.apply(this,arguments)}();g.underlyingResolver=v?g.cordovaResolver:g.browserResolver})()}}function Bp(b){return b.unwrap()}function $h(b){return Qy(b)}function Qy(b){const{_tokenResponse:g}=b instanceof B.ZR?b.customData:b;if(!g)return null;if(!(b instanceof B.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return Ar.credentialFromResult(b);const v=g.providerId;if(!v||v===we.PASSWORD)return null;let D;switch(v){case we.GOOGLE:D=Hs;break;case we.FACEBOOK:D=ca;break;case we.GITHUB:D=wc;break;case we.TWITTER:D=Ru;break;default:const{oauthIdToken:M,oauthAccessToken:O,oauthTokenSecret:Y,pendingToken:ce,nonce:Ye}=g;return O||Y||M||ce?ce?v.startsWith("saml.")?ln._create(v,ce):zt._fromParams({providerId:v,signInMethod:v,pendingToken:ce,idToken:M,accessToken:O}):new jo(v).credential({idToken:M,accessToken:O,rawNonce:Ye}):null}return b instanceof B.ZR?D.credentialFromError(b):D.credentialFromResult(b)}function Mr(b,g){return g.catch(v=>{throw v instanceof B.ZR&&function ld(b,g){var v;const D=null===(v=g.customData)||void 0===v?void 0:v._tokenResponse;if("auth/multi-factor-auth-required"===g?.code)g.resolver=new AD(b,function fp(b,g){var v;const D=(0,B.m9)(b),M=g;return X(g.customData.operationType,D,"argument-error"),X(null===(v=M.customData._serverResponse)||void 0===v?void 0:v.mfaPendingCredential,D,"argument-error"),Wa._fromError(D,M)}(b,g));else if(D){const M=Qy(g),O=g;M&&(O.credential=M,O.tenantId=D.tenantId||void 0,O.email=D.email||void 0,O.phoneNumber=D.phoneNumber||void 0)}}(b,v),v}).then(v=>{const M=v.user;return{operationType:v.operationType,credential:$h(v),additionalUserInfo:Rm(v),user:xi.getOrCreate(M)}})}function Up(b,g){return r_.apply(this,arguments)}function r_(){return(r_=(0,l.Z)(function*(b,g){const v=yield g;return{verificationId:v.verificationId,confirm:D=>Mr(b,v.confirm(D))}})).apply(this,arguments)}class AD{constructor(g,v){this.resolver=v,this.auth=function Vp(b){return b.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return Mr(Bp(this.auth),this.resolver.resolveSignIn(g))}}class xi{constructor(g){this._delegate=g,this.multiFactor=function qa(b){const g=(0,B.m9)(b);return fa.has(g)||fa.set(g,Un._fromUser(g)),fa.get(g)}(g)}static getOrCreate(g){return xi.USER_MAP.has(g)||xi.USER_MAP.set(g,new xi(g)),xi.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var v=this;return(0,l.Z)(function*(){return Mr(v.auth,Sy(v._delegate,g))})()}linkWithPhoneNumber(g,v){var D=this;return(0,l.Z)(function*(){return Up(D.auth,function Ti(b,g,v){return Hn.apply(this,arguments)}(D._delegate,g,v))})()}linkWithPopup(g){var v=this;return(0,l.Z)(function*(){return Mr(v.auth,function ma(b,g,v){return Zr.apply(this,arguments)}(v._delegate,g,va))})()}linkWithRedirect(g){var v=this;return(0,l.Z)(function*(){return yield jc(Gi(v.auth)),Wm(v._delegate,g,va)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var v=this;return(0,l.Z)(function*(){return Mr(v.auth,Ay(v._delegate,g))})()}reauthenticateWithPhoneNumber(g,v){return Up(this.auth,function Sr(b,g,v){return Qa.apply(this,arguments)}(this._delegate,g,v))}reauthenticateWithPopup(g){return Mr(this.auth,function Zu(b,g,v){return Wo.apply(this,arguments)}(this._delegate,g,va))}reauthenticateWithRedirect(g){var v=this;return(0,l.Z)(function*(){return yield jc(Gi(v.auth)),Tp(v._delegate,g,va)})()}sendEmailVerification(g){return function ha(b,g){return Ic.apply(this,arguments)}(this._delegate,g)}unlink(g){var v=this;return(0,l.Z)(function*(){return yield function Ua(b,g){return Ts.apply(this,arguments)}(v._delegate,g),v})()}updateEmail(g){return function dp(b,g){return xm((0,B.m9)(b),g,null)}(this._delegate,g)}updatePassword(g){return function Fu(b,g){return xm((0,B.m9)(b),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function $o(b,g){return Xn.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function Ny(b,g){return wh.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,v){return function cp(b,g,v){return Pu.apply(this,arguments)}(this._delegate,g,v)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}xi.USER_MAP=new WeakMap;const $c=X;let Hp=(()=>{class b{constructor(v,D){if(this.app=v,D.isInitialized())return this._delegate=D.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:M}=v.options;$c(M,"invalid-api-key",{appName:v.name}),$c(M,"invalid-api-key",{appName:v.name});const O=typeof window<"u"?va:void 0;this._delegate=D.initialize({options:{persistence:Jr(M,v.name),popupRedirectResolver:O}}),this._delegate._updateErrorMap(st),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?xi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(v){this._delegate.languageCode=v}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(v){this._delegate.tenantId=v}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(v,D){!function ls(b,g,v){const D=Gi(b);X(D._canInitEmulator,D,"emulator-config-failed"),X(/^https?:\/\//.test(g),D,"invalid-emulator-scheme");const M=!!v?.disableWarnings,O=ka(g),{host:Y,port:ce}=function Su(b){const g=ka(b),v=/(\/\/)?([^?#/]+)/.exec(b.substr(g.length));if(!v)return{host:"",port:null};const D=v[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(D);if(M){const O=M[1];return{host:O,port:Jf(D.substr(O.length+1))}}{const[O,Y]=D.split(":");return{host:O,port:Jf(Y)}}}(g);D.config.emulator={url:`${O}//${Y}${null===ce?"":`:${ce}`}/`},D.settings.appVerificationDisabledForTesting=!0,D.emulatorConfig=Object.freeze({host:Y,port:ce,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function Cy(){function b(){const g=document.createElement("p"),v=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",v.position="fixed",v.width="100%",v.backgroundColor="#ffffff",v.border=".1em solid #000000",v.color="#b50000",v.bottom="0px",v.left="0px",v.margin="0px",v.zIndex="10000",v.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}(this._delegate,v,D)}applyActionCode(v){return function op(b,g){return js.apply(this,arguments)}(this._delegate,v)}checkActionCode(v){return Xi(this._delegate,v)}confirmPasswordReset(v,D){return function Ha(b,g,v){return Eo.apply(this,arguments)}(this._delegate,v,D)}createUserWithEmailAndPassword(v,D){var M=this;return(0,l.Z)(function*(){return Mr(M._delegate,function mh(b,g,v){return Ec.apply(this,arguments)}(M._delegate,v,D))})()}fetchProvidersForEmail(v){return this.fetchSignInMethodsForEmail(v)}fetchSignInMethodsForEmail(v){return function Tc(b,g){return $a.apply(this,arguments)}(this._delegate,v)}isSignInWithEmailLink(v){return function lp(b,g){const v=gi.parseLink(g);return"EMAIL_SIGNIN"===v?.operation}(0,v)}getRedirectResult(){var v=this;return(0,l.Z)(function*(){$c(Ky(),v._delegate,"operation-not-supported-in-this-environment");const D=yield function Ee(b,g){return oi.apply(this,arguments)}(v._delegate,va);return D?Mr(v._delegate,Promise.resolve(D)):{credential:null,user:null}})()}addFrameworkForLogging(v){!function NO(b,g){Gi(b)._logFramework(g)}(this._delegate,v)}onAuthStateChanged(v,D,M){const{next:O,error:Y,complete:ce}=jp(v,D,M);return this._delegate.onAuthStateChanged(O,Y,ce)}onIdTokenChanged(v,D,M){const{next:O,error:Y,complete:ce}=jp(v,D,M);return this._delegate.onIdTokenChanged(O,Y,ce)}sendSignInLinkToEmail(v,D){return function Ol(b,g,v){return Cc.apply(this,arguments)}(this._delegate,v,D)}sendPasswordResetEmail(v,D){return function gD(b,g,v){return Dc.apply(this,arguments)}(this._delegate,v,D||void 0)}setPersistence(v){var D=this;return(0,l.Z)(function*(){let M;switch(function SD(b,g){Gh(Object.values(to).includes(g),b,"invalid-persistence-type"),(0,B.b$)()?Gh(g!==to.SESSION,b,"unsupported-persistence-type"):(0,B.UG)()?Gh(g===to.NONE,b,"unsupported-persistence-type"):Zy()?Gh(g===to.NONE||g===to.LOCAL&&(0,B.hl)(),b,"unsupported-persistence-type"):Gh(g===to.NONE||e1(),b,"unsupported-persistence-type")}(D._delegate,v),v){case to.SESSION:M=ds;break;case to.LOCAL:M=(yield dt(Za)._isAvailable())?Za:Fl;break;case to.NONE:M=xn;break;default:return xe("argument-error",{appName:D._delegate.name})}return D._delegate.setPersistence(M)})()}signInAndRetrieveDataWithCredential(v){return this.signInWithCredential(v)}signInAnonymously(){return Mr(this._delegate,function Er(b){return Am.apply(this,arguments)}(this._delegate))}signInWithCredential(v){return Mr(this._delegate,fh(this._delegate,v))}signInWithCustomToken(v){return Mr(this._delegate,function sp(b,g){return Go.apply(this,arguments)}(this._delegate,v))}signInWithEmailAndPassword(v,D){return Mr(this._delegate,function ap(b,g,v){return fh((0,B.m9)(b),Ba.credential(g,v))}(this._delegate,v,D))}signInWithEmailLink(v,D){return Mr(this._delegate,function fr(b,g,v){return _h.apply(this,arguments)}(this._delegate,v,D))}signInWithPhoneNumber(v,D){return Up(this._delegate,function Qt(b,g,v){return Mt.apply(this,arguments)}(this._delegate,v,D))}signInWithPopup(v){var D=this;return(0,l.Z)(function*(){return $c(Ky(),D._delegate,"operation-not-supported-in-this-environment"),Mr(D._delegate,function zo(b,g,v){return Bl.apply(this,arguments)}(D._delegate,v,va))})()}signInWithRedirect(v){var D=this;return(0,l.Z)(function*(){return $c(Ky(),D._delegate,"operation-not-supported-in-this-environment"),yield jc(D._delegate),Vl(D._delegate,v,va)})()}updateCurrentUser(v){return this._delegate.updateCurrentUser(v)}verifyPasswordResetCode(v){return function us(b,g){return Ga.apply(this,arguments)}(this._delegate,v)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return b.Persistence=to,b})();function jp(b,g,v){let D=b;"function"!=typeof b&&({next:D,error:g,complete:v}=b);const M=D;return{next:Y=>M(Y&&xi.getOrCreate(Y)),error:g,complete:v}}function Jr(b,g){const v=function ad(b,g){const v=Gc();if(!v)return[];const D=q(sd,b,g);switch(v.getItem(D)){case to.NONE:return[xn];case to.LOCAL:return[Za,ds];case to.SESSION:return[ds];default:return[]}}(b,g);if(typeof self<"u"&&!v.includes(Za)&&v.push(Za),typeof window<"u")for(const D of[Fl,ds])v.includes(D)||v.push(D);return v.includes(xn)||v.push(xn),v}class zc{constructor(){this.providerId="phone",this._delegate=new Ar(Bp(ne.Z.auth()))}static credential(g,v){return Ar.credential(g,v)}verifyPhoneNumber(g,v){return this._delegate.verifyPhoneNumber(g,v)}unwrap(){return this._delegate}}zc.PHONE_SIGN_IN_METHOD=Ar.PHONE_SIGN_IN_METHOD,zc.PROVIDER_ID=Ar.PROVIDER_ID;const Jy=X;class Xy{constructor(g,v,D=ne.Z.app()){var M;Jy(null===(M=D.options)||void 0===M?void 0:M.apiKey,"invalid-api-key",{appName:D.name}),this._delegate=new Dp(g,v,D.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function s_(b){b.INTERNAL.registerComponent(new Ae.wA("auth-compat",g=>{const v=g.getProvider("app-compat").getImmediate(),D=g.getProvider("auth");return new Hp(v,D)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ba,FacebookAuthProvider:ca,GithubAuthProvider:wc,GoogleAuthProvider:Hs,OAuthProvider:jo,SAMLAuthProvider:Ml,PhoneAuthProvider:zc,PhoneMultiFactorGenerator:Np,RecaptchaVerifier:Xy,TwitterAuthProvider:Ru,Auth:Hp,AuthCredential:Pa,Error:B.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),b.registerVersion("@firebase/auth-compat","0.4.2")}(ne.Z)},4303:(Ct,Ne,F)=>{F.r(Ne),F.d(Ne,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>Qn,_DEFAULT_ENTRY_NAME:()=>me,_addComponent:()=>Fe,_addOrOverwriteComponent:()=>Be,_apps:()=>Ce,_clearComponents:()=>Pt,_components:()=>Se,_getProvider:()=>it,_registerComponent:()=>ut,_removeServiceInstance:()=>di,deleteApp:()=>$r,getApp:()=>Bn,getApps:()=>ar,initializeApp:()=>Ei,onLog:()=>zr,registerVersion:()=>Ai,setLogLevel:()=>_o});var l=F(5861),ne=F(4537),B=F(7879),ie=F(9058),he=F(1878);class ve{constructor(Q){this.container=Q}getPlatformInfoString(){return this.container.getProviders().map(Ie=>{if(function Ae(Me){const Q=Me.getComponent();return"VERSION"===Q?.type}(Ie)){const et=Ie.getImmediate();return`${et.library}/${et.version}`}return null}).filter(Ie=>Ie).join(" ")}}const He="@firebase/app",$=new B.Yd("@firebase/app"),me="[DEFAULT]",De={[He]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ce=new Map,Se=new Map;function Fe(Me,Q){try{Me.container.addComponent(Q)}catch(Ie){$.debug(`Component ${Q.name} failed to register with FirebaseApp ${Me.name}`,Ie)}}function Be(Me,Q){Me.container.addOrOverwriteComponent(Q)}function ut(Me){const Q=Me.name;if(Se.has(Q))return $.debug(`There were multiple attempts to register component ${Q}.`),!1;Se.set(Q,Me);for(const Ie of Ce.values())Fe(Ie,Me);return!0}function it(Me,Q){const Ie=Me.container.getProvider("heartbeat").getImmediate({optional:!0});return Ie&&Ie.triggerHeartbeat(),Me.container.getProvider(Q)}function di(Me,Q,Ie=me){it(Me,Q).clearInstance(Ie)}function Pt(){Se.clear()}const xt=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Kn{constructor(Q,Ie,et){this._isDeleted=!1,this._options=Object.assign({},Q),this._config=Object.assign({},Ie),this._name=Ie.name,this._automaticDataCollectionEnabled=Ie.automaticDataCollectionEnabled,this._container=et,this.container.addComponent(new ne.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Q){this.checkDestroyed(),this._automaticDataCollectionEnabled=Q}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Q){this._isDeleted=Q}checkDestroyed(){if(this.isDeleted)throw xt.create("app-deleted",{appName:this._name})}}const Qn="10.4.0";function Ei(Me,Q={}){let Ie=Me;"object"!=typeof Q&&(Q={name:Q});const et=Object.assign({name:me,automaticDataCollectionEnabled:!1},Q),dt=et.name;if("string"!=typeof dt||!dt)throw xt.create("bad-app-name",{appName:String(dt)});if(Ie||(Ie=(0,ie.aH)()),!Ie)throw xt.create("no-options");const Ft=Ce.get(dt);if(Ft){if((0,ie.vZ)(Ie,Ft.options)&&(0,ie.vZ)(et,Ft.config))return Ft;throw xt.create("duplicate-app",{appName:dt})}const xn=new ne.H0(dt);for(const W of Se.values())xn.addComponent(W);const q=new Kn(Ie,et,xn);return Ce.set(dt,q),q}function Bn(Me=me){const Q=Ce.get(Me);if(!Q&&Me===me&&(0,ie.aH)())return Ei();if(!Q)throw xt.create("no-app",{appName:Me});return Q}function ar(){return Array.from(Ce.values())}function $r(Me){return ss.apply(this,arguments)}function ss(){return(ss=(0,l.Z)(function*(Me){const Q=Me.name;Ce.has(Q)&&(Ce.delete(Q),yield Promise.all(Me.container.getProviders().map(Ie=>Ie.delete())),Me.isDeleted=!0)})).apply(this,arguments)}function Ai(Me,Q,Ie){var et;let dt=null!==(et=De[Me])&&void 0!==et?et:Me;Ie&&(dt+=`-${Ie}`);const Ft=dt.match(/\s|\//),xn=Q.match(/\s|\//);if(Ft||xn){const q=[`Unable to register library "${dt}" with version "${Q}":`];return Ft&&q.push(`library name "${dt}" contains illegal characters (whitespace or "/")`),Ft&&xn&&q.push("and"),xn&&q.push(`version name "${Q}" contains illegal characters (whitespace or "/")`),void $.warn(q.join(" "))}ut(new ne.wA(`${dt}-version`,()=>({library:dt,version:Q}),"VERSION"))}function zr(Me,Q){if(null!==Me&&"function"!=typeof Me)throw xt.create("invalid-log-argument");(0,B.Am)(Me,Q)}function _o(Me){(0,B.Ub)(Me)}const Ra="firebase-heartbeat-database",Gt=1,Yt="firebase-heartbeat-store";let Xt=null;function Jt(){return Xt||(Xt=(0,he.X3)(Ra,Gt,{upgrade:(Me,Q)=>{0===Q&&Me.createObjectStore(Yt)}}).catch(Me=>{throw xt.create("idb-open",{originalErrorMessage:Me.message})})),Xt}function Hi(){return(Hi=(0,l.Z)(function*(Me){try{return yield(yield Jt()).transaction(Yt).objectStore(Yt).get(vo(Me))}catch(Q){if(Q instanceof ie.ZR)$.warn(Q.message);else{const Ie=xt.create("idb-get",{originalErrorMessage:Q?.message});$.warn(Ie.message)}}})).apply(this,arguments)}function Vn(Me,Q){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,l.Z)(function*(Me,Q){try{const et=(yield Jt()).transaction(Yt,"readwrite");yield et.objectStore(Yt).put(Q,vo(Me)),yield et.done}catch(Ie){if(Ie instanceof ie.ZR)$.warn(Ie.message);else{const et=xt.create("idb-set",{originalErrorMessage:Ie?.message});$.warn(et.message)}}})).apply(this,arguments)}function vo(Me){return`${Me.name}!${Me.options.appId}`}class Tn{constructor(Q){this.container=Q,this._heartbeatsCache=null;const Ie=this.container.getProvider("app").getImmediate();this._storage=new Bo(Ie),this._heartbeatsCachePromise=this._storage.read().then(et=>(this._heartbeatsCache=et,et))}triggerHeartbeat(){var Q=this;return(0,l.Z)(function*(){const et=Q.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),dt=os();if(null===Q._heartbeatsCache&&(Q._heartbeatsCache=yield Q._heartbeatsCachePromise),Q._heartbeatsCache.lastSentHeartbeatDate!==dt&&!Q._heartbeatsCache.heartbeats.some(Ft=>Ft.date===dt))return Q._heartbeatsCache.heartbeats.push({date:dt,agent:et}),Q._heartbeatsCache.heartbeats=Q._heartbeatsCache.heartbeats.filter(Ft=>{const xn=new Date(Ft.date).valueOf();return Date.now()-xn<=2592e6}),Q._storage.overwrite(Q._heartbeatsCache)})()}getHeartbeatsHeader(){var Q=this;return(0,l.Z)(function*(){if(null===Q._heartbeatsCache&&(yield Q._heartbeatsCachePromise),null===Q._heartbeatsCache||0===Q._heartbeatsCache.heartbeats.length)return"";const Ie=os(),{heartbeatsToSend:et,unsentEntries:dt}=function yo(Me,Q=1024){const Ie=[];let et=Me.slice();for(const dt of Me){const Ft=Ie.find(xn=>xn.agent===dt.agent);if(Ft){if(Ft.dates.push(dt.date),Lr(Ie)>Q){Ft.dates.pop();break}}else if(Ie.push({agent:dt.agent,dates:[dt.date]}),Lr(Ie)>Q){Ie.pop();break}et=et.slice(1)}return{heartbeatsToSend:Ie,unsentEntries:et}}(Q._heartbeatsCache.heartbeats),Ft=(0,ie.L)(JSON.stringify({version:2,heartbeats:et}));return Q._heartbeatsCache.lastSentHeartbeatDate=Ie,dt.length>0?(Q._heartbeatsCache.heartbeats=dt,yield Q._storage.overwrite(Q._heartbeatsCache)):(Q._heartbeatsCache.heartbeats=[],Q._storage.overwrite(Q._heartbeatsCache)),Ft})()}}function os(){return(new Date).toISOString().substring(0,10)}class Bo{constructor(Q){this.app=Q,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,l.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Q=this;return(0,l.Z)(function*(){return(yield Q._canUseIndexedDBPromise)&&(yield function hi(Me){return Hi.apply(this,arguments)}(Q.app))||{heartbeats:[]}})()}overwrite(Q){var Ie=this;return(0,l.Z)(function*(){var et;if(yield Ie._canUseIndexedDBPromise){const Ft=yield Ie.read();return Vn(Ie.app,{lastSentHeartbeatDate:null!==(et=Q.lastSentHeartbeatDate)&&void 0!==et?et:Ft.lastSentHeartbeatDate,heartbeats:Q.heartbeats})}})()}add(Q){var Ie=this;return(0,l.Z)(function*(){var et;if(yield Ie._canUseIndexedDBPromise){const Ft=yield Ie.read();return Vn(Ie.app,{lastSentHeartbeatDate:null!==(et=Q.lastSentHeartbeatDate)&&void 0!==et?et:Ft.lastSentHeartbeatDate,heartbeats:[...Ft.heartbeats,...Q.heartbeats]})}})()}}function Lr(Me){return(0,ie.L)(JSON.stringify({version:2,heartbeats:Me})).length}!function wo(Me){ut(new ne.wA("platform-logger",Q=>new ve(Q),"PRIVATE")),ut(new ne.wA("heartbeat",Q=>new Tn(Q),"PRIVATE")),Ai(He,"0.9.19",Me),Ai(He,"0.9.19","esm2017"),Ai("fire-js","")}("")},4537:(Ct,Ne,F)=>{F.d(Ne,{H0:()=>He,wA:()=>B,zt:()=>he});var l=F(5861),ne=F(9058);class B{constructor($,Z,ae){this.name=$,this.instanceFactory=Z,this.type=ae,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const ie="[DEFAULT]";class he{constructor($,Z){this.name=$,this.container=Z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const Z=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(Z)){const ae=new ne.BH;if(this.instancesDeferred.set(Z,ae),this.isInitialized(Z)||this.shouldAutoInitialize())try{const Ze=this.getOrInitializeService({instanceIdentifier:Z});Ze&&ae.resolve(Ze)}catch{}}return this.instancesDeferred.get(Z).promise}getImmediate($){var Z;const ae=this.normalizeInstanceIdentifier($?.identifier),Ze=null!==(Z=$?.optional)&&void 0!==Z&&Z;if(!this.isInitialized(ae)&&!this.shouldAutoInitialize()){if(Ze)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ae})}catch(Ve){if(Ze)return null;throw Ve}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function Ae(we){return"EAGER"===we.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:ie})}catch{}for(const[Z,ae]of this.instancesDeferred.entries()){const Ze=this.normalizeInstanceIdentifier(Z);try{const Ve=this.getOrInitializeService({instanceIdentifier:Ze});ae.resolve(Ve)}catch{}}}}clearInstance($=ie){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,l.Z)(function*(){const Z=Array.from($.instances.values());yield Promise.all([...Z.filter(ae=>"INTERNAL"in ae).map(ae=>ae.INTERNAL.delete()),...Z.filter(ae=>"_delete"in ae).map(ae=>ae._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=ie){return this.instances.has($)}getOptions($=ie){return this.instancesOptions.get($)||{}}initialize($={}){const{options:Z={}}=$,ae=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(ae))throw Error(`${this.name}(${ae}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ze=this.getOrInitializeService({instanceIdentifier:ae,options:Z});for(const[Ve,st]of this.instancesDeferred.entries())ae===this.normalizeInstanceIdentifier(Ve)&&st.resolve(Ze);return Ze}onInit($,Z){var ae;const Ze=this.normalizeInstanceIdentifier(Z),Ve=null!==(ae=this.onInitCallbacks.get(Ze))&&void 0!==ae?ae:new Set;Ve.add($),this.onInitCallbacks.set(Ze,Ve);const st=this.instances.get(Ze);return st&&$(st,Ze),()=>{Ve.delete($)}}invokeOnInitCallbacks($,Z){const ae=this.onInitCallbacks.get(Z);if(ae)for(const Ze of ae)try{Ze($,Z)}catch{}}getOrInitializeService({instanceIdentifier:$,options:Z={}}){let ae=this.instances.get($);if(!ae&&this.component&&(ae=this.component.instanceFactory(this.container,{instanceIdentifier:(we=$,we===ie?void 0:we),options:Z}),this.instances.set($,ae),this.instancesOptions.set($,Z),this.invokeOnInitCallbacks(ae,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,ae)}catch{}var we;return ae||null}normalizeInstanceIdentifier($=ie){return this.component?this.component.multipleInstances?$:ie:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class He{constructor($){this.name=$,this.providers=new Map}addComponent($){const Z=this.getProvider($.name);if(Z.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);Z.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const Z=new he($,this);return this.providers.set($,Z),Z}getProviders(){return Array.from(this.providers.values())}}},7879:(Ct,Ne,F)=>{F.d(Ne,{Am:()=>we,Ub:()=>He,Yd:()=>Ae,in:()=>ne});const l=[];var ne=function($){return $[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",$}(ne||{});const B={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},ie=ne.INFO,he={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},ve=($,Z,...ae)=>{if(Z<$.logLevel)return;const Ze=(new Date).toISOString(),Ve=he[Z];if(!Ve)throw new Error(`Attempted to log a message with an invalid logType (value: ${Z})`);console[Ve](`[${Ze}]  ${$.name}:`,...ae)};class Ae{constructor(Z){this.name=Z,this._logLevel=ie,this._logHandler=ve,this._userLogHandler=null,l.push(this)}get logLevel(){return this._logLevel}set logLevel(Z){if(!(Z in ne))throw new TypeError(`Invalid value "${Z}" assigned to \`logLevel\``);this._logLevel=Z}setLogLevel(Z){this._logLevel="string"==typeof Z?B[Z]:Z}get logHandler(){return this._logHandler}set logHandler(Z){if("function"!=typeof Z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Z}get userLogHandler(){return this._userLogHandler}set userLogHandler(Z){this._userLogHandler=Z}debug(...Z){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...Z),this._logHandler(this,ne.DEBUG,...Z)}log(...Z){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...Z),this._logHandler(this,ne.VERBOSE,...Z)}info(...Z){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...Z),this._logHandler(this,ne.INFO,...Z)}warn(...Z){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...Z),this._logHandler(this,ne.WARN,...Z)}error(...Z){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...Z),this._logHandler(this,ne.ERROR,...Z)}}function He($){l.forEach(Z=>{Z.setLogLevel($)})}function we($,Z){for(const ae of l){let Ze=null;Z&&Z.level&&(Ze=B[Z.level]),ae.userLogHandler=null===$?null:(Ve,st,...$e)=>{const ot=$e.map(ze=>{if(null==ze)return null;if("string"==typeof ze)return ze;if("number"==typeof ze||"boolean"==typeof ze)return ze.toString();if(ze instanceof Error)return ze.message;try{return JSON.stringify(ze)}catch{return null}}).filter(ze=>ze).join(" ");st>=(Ze??Ve.logLevel)&&$({level:ne[st].toLowerCase(),message:ot,args:$e,type:Ve.name})}}}},1878:(Ct,Ne,F)=>{F.d(Ne,{X3:()=>Nt});var l=F(5861);const ne=(ge,X)=>X.some(Je=>ge instanceof Je);let B,ie;const Ae=new WeakMap,He=new WeakMap,we=new WeakMap,$=new WeakMap,Z=new WeakMap;let Ve={get(ge,X,Je){if(ge instanceof IDBTransaction){if("done"===X)return He.get(ge);if("objectStoreNames"===X)return ge.objectStoreNames||we.get(ge);if("store"===X)return Je.objectStoreNames[1]?void 0:Je.objectStore(Je.objectStoreNames[0])}return ze(ge[X])},set:(ge,X,Je)=>(ge[X]=Je,!0),has:(ge,X)=>ge instanceof IDBTransaction&&("done"===X||"store"===X)||X in ge};function ot(ge){return"function"==typeof ge?function $e(ge){return ge!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ve(){return ie||(ie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ge)?function(...X){return ge.apply(Rt(this),X),ze(Ae.get(this))}:function(...X){return ze(ge.apply(Rt(this),X))}:function(X,...Je){const kt=ge.call(Rt(this),X,...Je);return we.set(kt,X.sort?X.sort():[X]),ze(kt)}}(ge):(ge instanceof IDBTransaction&&function Ze(ge){if(He.has(ge))return;const X=new Promise((Je,kt)=>{const Nn=()=>{ge.removeEventListener("complete",Zn),ge.removeEventListener("error",Wn),ge.removeEventListener("abort",Wn)},Zn=()=>{Je(),Nn()},Wn=()=>{kt(ge.error||new DOMException("AbortError","AbortError")),Nn()};ge.addEventListener("complete",Zn),ge.addEventListener("error",Wn),ge.addEventListener("abort",Wn)});He.set(ge,X)}(ge),ne(ge,function he(){return B||(B=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ge,Ve):ge)}function ze(ge){if(ge instanceof IDBRequest)return function ae(ge){const X=new Promise((Je,kt)=>{const Nn=()=>{ge.removeEventListener("success",Zn),ge.removeEventListener("error",Wn)},Zn=()=>{Je(ze(ge.result)),Nn()},Wn=()=>{kt(ge.error),Nn()};ge.addEventListener("success",Zn),ge.addEventListener("error",Wn)});return X.then(Je=>{Je instanceof IDBCursor&&Ae.set(Je,ge)}).catch(()=>{}),Z.set(X,ge),X}(ge);if($.has(ge))return $.get(ge);const X=ot(ge);return X!==ge&&($.set(ge,X),Z.set(X,ge)),X}const Rt=ge=>Z.get(ge);function Nt(ge,X,{blocked:Je,upgrade:kt,blocking:Nn,terminated:Zn}={}){const Wn=indexedDB.open(ge,X),ci=ze(Wn);return kt&&Wn.addEventListener("upgradeneeded",ui=>{kt(ze(Wn.result),ui.oldVersion,ui.newVersion,ze(Wn.transaction),ui)}),Je&&Wn.addEventListener("blocked",ui=>Je(ui.oldVersion,ui.newVersion,ui)),ci.then(ui=>{Zn&&ui.addEventListener("close",()=>Zn()),Nn&&ui.addEventListener("versionchange",or=>Nn(or.oldVersion,or.newVersion,or))}).catch(()=>{}),ci}const xe=["get","getKey","getAll","getAllKeys","count"],fe=["put","add","delete","clear"],Pe=new Map;function We(ge,X){if(!(ge instanceof IDBDatabase)||X in ge||"string"!=typeof X)return;if(Pe.get(X))return Pe.get(X);const Je=X.replace(/FromIndex$/,""),kt=X!==Je,Nn=fe.includes(Je);if(!(Je in(kt?IDBIndex:IDBObjectStore).prototype)||!Nn&&!xe.includes(Je))return;const Zn=function(){var Wn=(0,l.Z)(function*(ci,...ui){const or=this.transaction(ci,Nn?"readwrite":"readonly");let me=or.store;return kt&&(me=me.index(ui.shift())),(yield Promise.all([me[Je](...ui),Nn&&or.done]))[0]});return function(ui){return Wn.apply(this,arguments)}}();return Pe.set(X,Zn),Zn}!function st(ge){Ve=ge(Ve)}(ge=>({...ge,get:(X,Je,kt)=>We(X,Je)||ge.get(X,Je,kt),has:(X,Je)=>!!We(X,Je)||ge.has(X,Je)}))},5861:(Ct,Ne,F)=>{function l(B,ie,he,ve,Ae,He,we){try{var $=B[He](we),Z=$.value}catch(ae){return void he(ae)}$.done?ie(Z):Promise.resolve(Z).then(ve,Ae)}function ne(B){return function(){var ie=this,he=arguments;return new Promise(function(ve,Ae){var He=B.apply(ie,he);function we(Z){l(He,ve,Ae,we,$,"next",Z)}function $(Z){l(He,ve,Ae,we,$,"throw",Z)}we(void 0)})}}F.d(Ne,{Z:()=>ne})},7582:(Ct,Ne,F)=>{F.d(Ne,{FC:()=>xe,KL:()=>Pe,_T:()=>ie,mG:()=>ae,pi:()=>B,qq:()=>pe});var B=function(){return B=Object.assign||function(De){for(var Ce,Se=1,Fe=arguments.length;Se<Fe;Se++)for(var Be in Ce=arguments[Se])Object.prototype.hasOwnProperty.call(Ce,Be)&&(De[Be]=Ce[Be]);return De},B.apply(this,arguments)};function ie(me,De){var Ce={};for(var Se in me)Object.prototype.hasOwnProperty.call(me,Se)&&De.indexOf(Se)<0&&(Ce[Se]=me[Se]);if(null!=me&&"function"==typeof Object.getOwnPropertySymbols){var Fe=0;for(Se=Object.getOwnPropertySymbols(me);Fe<Se.length;Fe++)De.indexOf(Se[Fe])<0&&Object.prototype.propertyIsEnumerable.call(me,Se[Fe])&&(Ce[Se[Fe]]=me[Se[Fe]])}return Ce}function ae(me,De,Ce,Se){return new(Ce||(Ce=Promise))(function(Be,ut){function it(Dn){try{Pt(Se.next(Dn))}catch(xt){ut(xt)}}function di(Dn){try{Pt(Se.throw(Dn))}catch(xt){ut(xt)}}function Pt(Dn){Dn.done?Be(Dn.value):function Fe(Be){return Be instanceof Ce?Be:new Ce(function(ut){ut(Be)})}(Dn.value).then(it,di)}Pt((Se=Se.apply(me,De||[])).next())})}function pe(me){return this instanceof pe?(this.v=me,this):new pe(me)}function xe(me,De,Ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Fe,Se=Ce.apply(me,De||[]),Be=[];return Fe={},ut("next"),ut("throw"),ut("return"),Fe[Symbol.asyncIterator]=function(){return this},Fe;function ut(Kn){Se[Kn]&&(Fe[Kn]=function(Qn){return new Promise(function(Ei,Bn){Be.push([Kn,Qn,Ei,Bn])>1||it(Kn,Qn)})})}function it(Kn,Qn){try{!function di(Kn){Kn.value instanceof pe?Promise.resolve(Kn.value.v).then(Pt,Dn):xt(Be[0][2],Kn)}(Se[Kn](Qn))}catch(Ei){xt(Be[0][3],Ei)}}function Pt(Kn){it("next",Kn)}function Dn(Kn){it("throw",Kn)}function xt(Kn,Qn){Kn(Qn),Be.shift(),Be.length&&it(Be[0][0],Be[0][1])}}function Pe(me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ce,De=me[Symbol.asyncIterator];return De?De.call(me):(me=function $e(me){var De="function"==typeof Symbol&&Symbol.iterator,Ce=De&&me[De],Se=0;if(Ce)return Ce.call(me);if(me&&"number"==typeof me.length)return{next:function(){return me&&Se>=me.length&&(me=void 0),{value:me&&me[Se++],done:!me}}};throw new TypeError(De?"Object is not iterable.":"Symbol.iterator is not defined.")}(me),Ce={},Se("next"),Se("throw"),Se("return"),Ce[Symbol.asyncIterator]=function(){return this},Ce);function Se(Be){Ce[Be]=me[Be]&&function(ut){return new Promise(function(it,di){!function Fe(Be,ut,it,di){Promise.resolve(di).then(function(Pt){Be({value:Pt,done:it})},ut)}(it,di,(ut=me[Be](ut)).done,ut.value)})}}}"function"==typeof SuppressedError&&SuppressedError}},Ct=>{Ct(Ct.s=5121)}]);