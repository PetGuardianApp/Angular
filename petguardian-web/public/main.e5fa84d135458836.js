"use strict";(self.webpackChunkpetguardian_web=self.webpackChunkpetguardian_web||[]).push([[179],{6304:(Ct,xe,L)=>{L.d(xe,{Dh:()=>je,GT:()=>_e,cc:()=>Ue,hO:()=>Ze,on:()=>$,pX:()=>he,xv:()=>we});var a=L(5879),ie=L(120),V=L(2793);Ct=L.hmd(Ct);const re=["ngOnDestroy"],he=(ze,Rt,Nt,pe={})=>new Proxy(ze,{get:(Re,fe)=>Nt.runOutsideAngular(()=>{var Pe;if(ze[fe])return!(null===(Pe=pe?.spy)||void 0===Pe)&&Pe.get&&pe.spy.get(fe,ze[fe]),ze[fe];if(re.indexOf(fe)>-1)return()=>{};const We=Rt.toPromise().then(ge=>{const X=ge&&ge[fe];return"function"==typeof X?X.bind(ge):X&&X.then?X.then(Je=>Nt.run(()=>Je)):Nt.run(()=>X)});return new Proxy(()=>{},{get:(ge,X)=>We[X],apply:(ge,X,Je)=>We.then(kt=>{var Nn;const Kn=kt&&kt(...Je);return!(null===(Nn=pe?.spy)||void 0===Nn)&&Nn.apply&&pe.spy.apply(fe,Je,Kn),Kn})})})}),_e=(ze,Rt)=>{Rt.forEach(Nt=>{Object.getOwnPropertyNames(Nt.prototype||Nt).forEach(pe=>{Object.defineProperty(ze.prototype,pe,Object.getOwnPropertyDescriptor(Nt.prototype||Nt,pe))})})};class Ae{constructor(Rt){return Rt}}const je=new a.OlP("angularfire2.app.options"),we=new a.OlP("angularfire2.app.name");function $(ze,Rt,Nt){const Re="object"==typeof Nt&&Nt||{};Re.name=Re.name||"string"==typeof Nt&&Nt||"[DEFAULT]";const Pe=ie.Z.apps.filter(We=>We&&We.name===Re.name)[0]||Rt.runOutsideAngular(()=>ie.Z.initializeApp(ze,Re));try{JSON.stringify(ze)!==JSON.stringify(Pe.options)&&Z("error",`${Pe.name} Firebase App already initialized with different options${Ct.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ae(Pe)}const Z=(ze,...Rt)=>{(0,a.X6Q)()&&typeof console<"u"&&console[ze](...Rt)},le={provide:Ae,useFactory:$,deps:[je,a.R0b,[new a.FiY,we]]};let Ze=(()=>{class ze{constructor(Nt){ie.Z.registerVersion("angularfire",V.q4.full,"core"),ie.Z.registerVersion("angularfire",V.q4.full,"app-compat"),ie.Z.registerVersion("angular",a.q4F.full,Nt.toString())}static initializeApp(Nt,pe){return{ngModule:ze,providers:[{provide:je,useValue:Nt},{provide:we,useValue:pe}]}}}return ze.\u0275fac=function(Nt){return new(Nt||ze)(a.LFG(a.Lbi))},ze.\u0275mod=a.oAB({type:ze}),ze.\u0275inj=a.cJS({providers:[le]}),ze})();function Ue(ze,Rt,Nt,pe,Re){const[,fe,Pe]=globalThis.\u0275AngularfireInstanceCache.find(We=>We[0]===ze)||[];if(fe)return function at(ze,Rt){try{return ze.toString()===Rt.toString()}catch{return ze===Rt}}(Re,Pe)||(lt("error",`${Rt} was already initialized on the ${Nt} Firebase App with different settings.${$e?" You may need to reload as Firebase is not HMR aware.":""}`),lt("warn",{is:Re,was:Pe})),fe;{const We=pe();return globalThis.\u0275AngularfireInstanceCache.push([ze,We,Re]),We}}const $e=!!Ct.hot,lt=(ze,...Rt)=>{(0,a.X6Q)()&&typeof console<"u"&&console[ze](...Rt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2793:(Ct,xe,L)=>{L.d(xe,{q4:()=>B,iC:()=>jl,fc:()=>Lc,HU:()=>Np,vb:()=>Mp,JM:()=>el});var a=L(5879),ie=L(4097),V=L(5861),re=L(4303),he=L(9058),_e=L(4537),Ae=L(7879);const je=(T,S)=>S.some(R=>T instanceof R);let we,$;const Ze=new WeakMap,Ue=new WeakMap,at=new WeakMap,$e=new WeakMap,lt=new WeakMap;let Nt={get(T,S,R){if(T instanceof IDBTransaction){if("done"===S)return Ue.get(T);if("objectStoreNames"===S)return T.objectStoreNames||at.get(T);if("store"===S)return R.objectStoreNames[1]?void 0:R.objectStore(R.objectStoreNames[0])}return Pe(T[S])},set:(T,S,R)=>(T[S]=R,!0),has:(T,S)=>T instanceof IDBTransaction&&("done"===S||"store"===S)||S in T};function fe(T){return"function"==typeof T?function Re(T){return T!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function le(){return $||($=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(T)?function(...S){return T.apply(We(this),S),Pe(Ze.get(this))}:function(...S){return Pe(T.apply(We(this),S))}:function(S,...R){const H=T.call(We(this),S,...R);return at.set(H,S.sort?S.sort():[S]),Pe(H)}}(T):(T instanceof IDBTransaction&&function Rt(T){if(Ue.has(T))return;const S=new Promise((R,H)=>{const J=()=>{T.removeEventListener("complete",se),T.removeEventListener("error",Te),T.removeEventListener("abort",Te)},se=()=>{R(),J()},Te=()=>{H(T.error||new DOMException("AbortError","AbortError")),J()};T.addEventListener("complete",se),T.addEventListener("error",Te),T.addEventListener("abort",Te)});Ue.set(T,S)}(T),je(T,function Z(){return we||(we=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(T,Nt):T)}function Pe(T){if(T instanceof IDBRequest)return function ze(T){const S=new Promise((R,H)=>{const J=()=>{T.removeEventListener("success",se),T.removeEventListener("error",Te)},se=()=>{R(Pe(T.result)),J()},Te=()=>{H(T.error),J()};T.addEventListener("success",se),T.addEventListener("error",Te)});return S.then(R=>{R instanceof IDBCursor&&Ze.set(R,T)}).catch(()=>{}),lt.set(S,T),S}(T);if($e.has(T))return $e.get(T);const S=fe(T);return S!==T&&($e.set(T,S),lt.set(S,T)),S}const We=T=>lt.get(T),Je=["get","getKey","getAll","getAllKeys","count"],kt=["put","add","delete","clear"],Nn=new Map;function Kn(T,S){if(!(T instanceof IDBDatabase)||S in T||"string"!=typeof S)return;if(Nn.get(S))return Nn.get(S);const R=S.replace(/FromIndex$/,""),H=S!==R,J=kt.includes(R);if(!(R in(H?IDBIndex:IDBObjectStore).prototype)||!J&&!Je.includes(R))return;const se=function(){var Te=(0,V.Z)(function*(ht,...ct){const Ot=this.transaction(ht,J?"readwrite":"readonly");let en=Ot.store;return H&&(en=en.index(ct.shift())),(yield Promise.all([en[R](...ct),J&&Ot.done]))[0]});return function(ct){return Te.apply(this,arguments)}}();return Nn.set(S,se),se}!function pe(T){Nt=T(Nt)}(T=>({...T,get:(S,R,H)=>Kn(S,R)||T.get(S,R,H),has:(S,R)=>!!Kn(S,R)||T.has(S,R)}));const Wn="@firebase/installations",ci="0.6.4",ui=1e4,ar=`w:${ci}`,me="FIS_v2",De="https://firebaseinstallations.googleapis.com/v1",Ce=36e5,ut=new he.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function it(T){return T instanceof he.ZR&&T.code.includes("request-failed")}function di({projectId:T}){return`${De}/projects/${T}/installations`}function Pt(T){return{token:T.token,requestStatus:2,expiresIn:lr(T.expiresIn),creationTime:Date.now()}}function Dn(T,S){return xt.apply(this,arguments)}function xt(){return(xt=(0,V.Z)(function*(T,S){const H=(yield S.json()).error;return ut.create("request-failed",{requestName:T,serverCode:H.code,serverMessage:H.message,serverStatus:H.status})})).apply(this,arguments)}function Qn({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function Ci(T){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,V.Z)(function*(T){const S=yield T();return S.status>=500&&S.status<600?T():S})).apply(this,arguments)}function lr(T){return Number(T.replace("s","000"))}function Ai(){return(Ai=(0,V.Z)(function*({appConfig:T,heartbeatServiceProvider:S},{fid:R}){const H=di(T),J=Qn(T),se=S.getImmediate({optional:!0});if(se){const Ot=yield se.getHeartbeatsHeader();Ot&&J.append("x-firebase-client",Ot)}const ht={method:"POST",headers:J,body:JSON.stringify({fid:R,authVersion:me,appId:T.appId,sdkVersion:ar})},ct=yield Ci(()=>fetch(H,ht));if(ct.ok){const Ot=yield ct.json();return{fid:Ot.fid||R,registrationStatus:2,refreshToken:Ot.refreshToken,authToken:Pt(Ot.authToken)}}throw yield Dn("Create Installation",ct)})).apply(this,arguments)}function zr(T){return new Promise(S=>{setTimeout(S,T)})}const Ra=/^[cdef][\w-]{21}$/,Gt="";function Yt(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const R=function Xt(T){return function _o(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return Ra.test(R)?R:Gt}catch{return Gt}}function Jt(T){return`${T.appName}!${T.appId}`}const hi=new Map;function Hi(T,S){const R=Jt(T);vo(R,S),function En(T,S){const R=function Tn(){return!Fr&&"BroadcastChannel"in self&&(Fr=new BroadcastChannel("[Firebase] FID Change"),Fr.onmessage=T=>{vo(T.data.key,T.data.fid)}),Fr}();R&&R.postMessage({key:T,fid:S}),function os(){0===hi.size&&Fr&&(Fr.close(),Fr=null)}()}(R,S)}function vo(T,S){const R=hi.get(T);if(R)for(const H of R)H(S)}let Fr=null;const yo="firebase-installations-database",Vo=1,Lr="firebase-installations-store";let wo=null;function Me(){return wo||(wo=function ge(T,S,{blocked:R,upgrade:H,blocking:J,terminated:se}={}){const Te=indexedDB.open(T,S),ht=Pe(Te);return H&&Te.addEventListener("upgradeneeded",ct=>{H(Pe(Te.result),ct.oldVersion,ct.newVersion,Pe(Te.transaction))}),R&&Te.addEventListener("blocked",()=>R()),ht.then(ct=>{se&&ct.addEventListener("close",()=>se()),J&&ct.addEventListener("versionchange",()=>J())}).catch(()=>{}),ht}(yo,Vo,{upgrade:(T,S)=>{0===S&&T.createObjectStore(Lr)}})),wo}function Q(T,S){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,V.Z)(function*(T,S){const R=Jt(T),J=(yield Me()).transaction(Lr,"readwrite"),se=J.objectStore(Lr),Te=yield se.get(R);return yield se.put(S,R),yield J.done,(!Te||Te.fid!==S.fid)&&Hi(T,S.fid),S})).apply(this,arguments)}function et(T){return dt.apply(this,arguments)}function dt(){return(dt=(0,V.Z)(function*(T){const S=Jt(T),H=(yield Me()).transaction(Lr,"readwrite");yield H.objectStore(Lr).delete(S),yield H.done})).apply(this,arguments)}function Ft(T,S){return xn.apply(this,arguments)}function xn(){return(xn=(0,V.Z)(function*(T,S){const R=Jt(T),J=(yield Me()).transaction(Lr,"readwrite"),se=J.objectStore(Lr),Te=yield se.get(R),ht=S(Te);return void 0===ht?yield se.delete(R):yield se.put(ht,R),yield J.done,ht&&(!Te||Te.fid!==ht.fid)&&Hi(T,ht.fid),ht})).apply(this,arguments)}function q(T){return W.apply(this,arguments)}function W(){return W=(0,V.Z)(function*(T){let S;const R=yield Ft(T.appConfig,H=>{const J=function ne(T){return sn(T||{fid:Yt(),registrationStatus:0})}(H),se=function Le(T,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(ut.create("app-offline"))};const R={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},H=function ye(T,S){return wt.apply(this,arguments)}(T,R);return{installationEntry:R,registrationPromise:H}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:nn(T)}:{installationEntry:S}}(T,J);return S=se.registrationPromise,se.installationEntry});return R.fid===Gt?{installationEntry:yield S}:{installationEntry:R,registrationPromise:S}}),W.apply(this,arguments)}function wt(){return wt=(0,V.Z)(function*(T,S){try{const R=yield function ss(T,S){return Ai.apply(this,arguments)}(T,S);return Q(T.appConfig,R)}catch(R){throw it(R)&&409===R.customData.serverCode?yield et(T.appConfig):yield Q(T.appConfig,{fid:S.fid,registrationStatus:0}),R}}),wt.apply(this,arguments)}function nn(T){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,V.Z)(function*(T){let S=yield Br(T.appConfig);for(;1===S.registrationStatus;)yield zr(100),S=yield Br(T.appConfig);if(0===S.registrationStatus){const{installationEntry:R,registrationPromise:H}=yield q(T);return H||R}return S})).apply(this,arguments)}function Br(T){return Ft(T,S=>{if(!S)throw ut.create("installation-not-found");return sn(S)})}function sn(T){return function ji(T){return 1===T.registrationStatus&&T.registrationTime+ui<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function br(){return(br=(0,V.Z)(function*({appConfig:T,heartbeatServiceProvider:S},R){const H=function oa(T,{fid:S}){return`${di(T)}/${S}/authTokens:generate`}(T,R),J=function Jn(T,{refreshToken:S}){const R=Qn(T);return R.append("Authorization",function $r(T){return`${me} ${T}`}(S)),R}(T,R),se=S.getImmediate({optional:!0});if(se){const Ot=yield se.getHeartbeatsHeader();Ot&&J.append("x-firebase-client",Ot)}const ht={method:"POST",headers:J,body:JSON.stringify({installation:{sdkVersion:ar,appId:T.appId}})},ct=yield Ci(()=>fetch(H,ht));if(ct.ok)return Pt(yield ct.json());throw yield Dn("Generate Auth Token",ct)})).apply(this,arguments)}function Cl(T){return sh.apply(this,arguments)}function sh(){return sh=(0,V.Z)(function*(T,S=!1){let R;const H=yield Ft(T.appConfig,se=>{if(!la(se))throw ut.create("not-registered");const Te=se.authToken;if(!S&&function Tl(T){return 2===T.requestStatus&&!function mc(T){const S=Date.now();return S<T.creationTime||T.creationTime+T.expiresIn<S+Ce}(T)}(Te))return se;if(1===Te.requestStatus)return R=function bo(T,S){return aa.apply(this,arguments)}(T,S),se;{if(!navigator.onLine)throw ut.create("app-offline");const ht=function Jf(T){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:S})}(se);return R=function Ks(T,S){return vn.apply(this,arguments)}(T,ht),ht}});return R?yield R:H.authToken}),sh.apply(this,arguments)}function aa(){return(aa=(0,V.Z)(function*(T,S){let R=yield Zs(T.appConfig);for(;1===R.authToken.requestStatus;)yield zr(100),R=yield Zs(T.appConfig);const H=R.authToken;return 0===H.requestStatus?Cl(T,S):H})).apply(this,arguments)}function Zs(T){return Ft(T,S=>{if(!la(S))throw ut.create("not-registered");return function Bs(T){return 1===T.requestStatus&&T.requestTime+ui<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function vn(){return vn=(0,V.Z)(function*(T,S){try{const R=yield function In(T,S){return br.apply(this,arguments)}(T,S),H=Object.assign(Object.assign({},S),{authToken:R});return yield Q(T.appConfig,H),R}catch(R){if(!it(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const H=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield Q(T.appConfig,H)}else yield et(T.appConfig);throw R}}),vn.apply(this,arguments)}function la(T){return void 0!==T&&2===T.registrationStatus}function Il(){return(Il=(0,V.Z)(function*(T){const S=T,{installationEntry:R,registrationPromise:H}=yield q(S);return H?H.catch(console.error):Cl(S).catch(console.error),R.fid})).apply(this,arguments)}function as(){return as=(0,V.Z)(function*(T,S=!1){const R=T;return yield function ah(T){return Vs.apply(this,arguments)}(R),(yield Cl(R,S)).token}),as.apply(this,arguments)}function Vs(){return(Vs=(0,V.Z)(function*(T){const{registrationPromise:S}=yield q(T);S&&(yield S)})).apply(this,arguments)}function Pa(T){return ut.create("missing-app-config-values",{valueName:T})}const Su="installations",Ay=T=>{const S=T.getProvider("app").getImmediate(),R=function ls(T){if(!T||!T.options)throw Pa("App Configuration");if(!T.name)throw Pa("App Name");const S=["projectId","apiKey","appId"];for(const R of S)if(!T.options[R])throw Pa(R);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(S);return{app:S,appConfig:R,heartbeatServiceProvider:(0,re._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},Fa=T=>{const S=T.getProvider("app").getImmediate(),R=(0,re._getProvider)(S,Su).getImmediate();return{getId:()=>function Oa(T){return Il.apply(this,arguments)}(R),getToken:J=>function oh(T){return as.apply(this,arguments)}(R,J)}};(function ep(){(0,re._registerComponent)(new _e.wA(Su,Ay,"PUBLIC")),(0,re._registerComponent)(new _e.wA("installations-internal",Fa,"PRIVATE"))})(),(0,re.registerVersion)(Wn,ci),(0,re.registerVersion)(Wn,ci,"esm2017");const Do="@firebase/remote-config",Vr=new he.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class zt{constructor(S,R,H,J){this.client=S,this.storage=R,this.storageCache=H,this.logger=J}isCachedDataFresh(S,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const H=Date.now()-R,J=H<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${H}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${J}.`),J}fetch(S){var R=this;return(0,V.Z)(function*(){const[H,J]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(J&&R.isCachedDataFresh(S.cacheMaxAgeMillis,H))return J;S.eTag=J&&J.eTag;const se=yield R.client.fetch(S),Te=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===se.status&&Te.push(R.storage.setLastSuccessfulFetchResponse(se)),yield Promise.all(Te),se})()}}function pi(T=navigator){return T.languages&&T.languages[0]||T.language}class Yr{constructor(S,R,H,J,se,Te){this.firebaseInstallations=S,this.sdkVersion=R,this.namespace=H,this.projectId=J,this.apiKey=se,this.appId=Te}fetch(S){var R=this;return(0,V.Z)(function*(){const[H,J]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),Te=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,ht={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},ct={sdk_version:R.sdkVersion,app_instance_id:H,app_instance_id_token:J,app_id:R.appId,language_code:pi()},Ot={method:"POST",headers:ht,body:JSON.stringify(ct)},en=fetch(Te,Ot),tn=new Promise((Kr,eo)=>{S.signal.addEventListener(()=>{const Qr=new Error("The operation was aborted.");Qr.name="AbortError",eo(Qr)})});let nr;try{yield Promise.race([en,tn]),nr=yield en}catch(Kr){let eo="fetch-client-network";throw"AbortError"===Kr?.name&&(eo="fetch-timeout"),Vr.create(eo,{originalErrorMessage:Kr?.message})}let zi=nr.status;const va=nr.headers.get("ETag")||void 0;let Ii,Xs;if(200===nr.status){let Kr;try{Kr=yield nr.json()}catch(eo){throw Vr.create("fetch-client-parse",{originalErrorMessage:eo?.message})}Ii=Kr.entries,Xs=Kr.state}if("INSTANCE_STATE_UNSPECIFIED"===Xs?zi=500:"NO_CHANGE"===Xs?zi=304:("NO_TEMPLATE"===Xs||"EMPTY_CONFIG"===Xs)&&(Ii={}),304!==zi&&200!==zi)throw Vr.create("fetch-status",{httpStatus:zi});return{status:zi,eTag:va,config:Ii}})()}}class yc{constructor(S,R){this.client=S,this.storage=R}fetch(S){var R=this;return(0,V.Z)(function*(){const H=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(S,H)})()}attemptFetch(S,{throttleEndTimeMillis:R,backoffCount:H}){var J=this;return(0,V.Z)(function*(){yield function Ba(T,S){return new Promise((R,H)=>{const J=Math.max(S-Date.now(),0),se=setTimeout(R,J);T.addEventListener(()=>{clearTimeout(se),H(Vr.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,R);try{const se=yield J.client.fetch(S);return yield J.storage.deleteThrottleMetadata(),se}catch(se){if(!function Xi(T){if(!(T instanceof he.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}(se))throw se;const Te={throttleEndTimeMillis:Date.now()+(0,he.$s)(H),backoffCount:H+1};return yield J.storage.setThrottleMetadata(Te),J.attemptFetch(S,Te)}})()}}class Al{constructor(S,R,H,J,se){this.app=S,this._client=R,this._storageCache=H,this._storage=J,this._logger=se,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Wt(T,S){const R=T.target.error||void 0;return Vr.create(S,{originalErrorMessage:R&&R?.message})}const Dr="app_namespace_store";class dh{constructor(S,R,H,J=function gi(){return new Promise((T,S)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=H=>{S(Wt(H,"storage-open"))},R.onsuccess=H=>{T(H.target.result)},R.onupgradeneeded=H=>{0===H.oldVersion&&H.target.result.createObjectStore(Dr,{keyPath:"compositeKey"})}}catch(R){S(Vr.create("storage-open",{originalErrorMessage:R?.message}))}})}()){this.appId=S,this.appName=R,this.namespace=H,this.openDbPromise=J}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var R=this;return(0,V.Z)(function*(){const H=yield R.openDbPromise;return new Promise((J,se)=>{const ht=H.transaction([Dr],"readonly").objectStore(Dr),ct=R.createCompositeKey(S);try{const Ot=ht.get(ct);Ot.onerror=en=>{se(Wt(en,"storage-get"))},Ot.onsuccess=en=>{const tn=en.target.result;J(tn?tn.value:void 0)}}catch(Ot){se(Vr.create("storage-get",{originalErrorMessage:Ot?.message}))}})})()}set(S,R){var H=this;return(0,V.Z)(function*(){const J=yield H.openDbPromise;return new Promise((se,Te)=>{const ct=J.transaction([Dr],"readwrite").objectStore(Dr),Ot=H.createCompositeKey(S);try{const en=ct.put({compositeKey:Ot,value:R});en.onerror=tn=>{Te(Wt(tn,"storage-set"))},en.onsuccess=()=>{se()}}catch(en){Te(Vr.create("storage-set",{originalErrorMessage:en?.message}))}})})()}delete(S){var R=this;return(0,V.Z)(function*(){const H=yield R.openDbPromise;return new Promise((J,se)=>{const ht=H.transaction([Dr],"readwrite").objectStore(Dr),ct=R.createCompositeKey(S);try{const Ot=ht.delete(ct);Ot.onerror=en=>{se(Wt(en,"storage-delete"))},Ot.onsuccess=()=>{J()}}catch(Ot){se(Vr.create("storage-delete",{originalErrorMessage:Ot?.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class Va{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,V.Z)(function*(){const R=S.storage.getLastFetchStatus(),H=S.storage.getLastSuccessfulFetchTimestampMillis(),J=S.storage.getActiveConfig(),se=yield R;se&&(S.lastFetchStatus=se);const Te=yield H;Te&&(S.lastSuccessfulFetchTimestampMillis=Te);const ht=yield J;ht&&(S.activeConfig=ht)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function ua(){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,V.Z)(function*(){if(!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch{return!1}})).apply(this,arguments)}!function cr(){(0,re._registerComponent)(new _e.wA("remote-config",function T(S,{instanceIdentifier:R}){const H=S.getProvider("app").getImmediate(),J=S.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Vr.create("registration-window");if(!(0,he.hl)())throw Vr.create("indexed-db-unavailable");const{projectId:se,apiKey:Te,appId:ht}=H.options;if(!se)throw Vr.create("registration-project-id");if(!Te)throw Vr.create("registration-api-key");if(!ht)throw Vr.create("registration-app-id");const ct=new dh(ht,H.name,R=R||"firebase"),Ot=new Va(ct),en=new Ae.Yd(Do);en.logLevel=Ae.in.ERROR;const tn=new Yr(J,re.SDK_VERSION,R,se,Te,ht),nr=new yc(tn,ct),zi=new zt(nr,ct,Ot,en),va=new Al(H,zi,Ot,ct,en);return function Wr(T){const S=(0,he.m9)(T);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(va),va},"PUBLIC").setMultipleInstances(!0)),(0,re.registerVersion)(Do,"0.4.4"),(0,re.registerVersion)(Do,"0.4.4","esm2017")}();const wc=(T,S)=>S.some(R=>T instanceof R);let da,ln;const Ru=new WeakMap,ur=new WeakMap,Ua=new WeakMap,dr=new WeakMap,ha=new WeakMap;let hr={get(T,S,R){if(T instanceof IDBTransaction){if("done"===S)return ur.get(T);if("objectStoreNames"===S)return T.objectStoreNames||Ua.get(T);if("store"===S)return R.objectStoreNames[1]?void 0:R.objectStore(R.objectStoreNames[0])}return Is(T[S])},set:(T,S,R)=>(T[S]=R,!0),has:(T,S)=>T instanceof IDBTransaction&&("done"===S||"store"===S)||S in T};function Ha(T){return"function"==typeof T?function Ou(T){return T!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ml(){return ln||(ln=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(T)?function(...S){return T.apply(cs(this),S),Is(Ru.get(this))}:function(...S){return Is(T.apply(cs(this),S))}:function(S,...R){const H=T.call(cs(this),S,...R);return Ua.set(H,S.sort?S.sort():[S]),Is(H)}}(T):(T instanceof IDBTransaction&&function xm(T){if(ur.has(T))return;const S=new Promise((R,H)=>{const J=()=>{T.removeEventListener("complete",se),T.removeEventListener("error",Te),T.removeEventListener("abort",Te)},se=()=>{R(),J()},Te=()=>{H(T.error||new DOMException("AbortError","AbortError")),J()};T.addEventListener("complete",se),T.addEventListener("error",Te),T.addEventListener("abort",Te)});ur.set(T,S)}(T),wc(T,function My(){return da||(da=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(T,hr):T)}function Is(T){if(T instanceof IDBRequest)return function Er(T){const S=new Promise((R,H)=>{const J=()=>{T.removeEventListener("success",se),T.removeEventListener("error",Te)},se=()=>{R(Is(T.result)),J()},Te=()=>{H(T.error),J()};T.addEventListener("success",se),T.addEventListener("error",Te)});return S.then(R=>{R instanceof IDBCursor&&Ru.set(R,T)}).catch(()=>{}),ha.set(S,T),S}(T);if(dr.has(T))return dr.get(T);const S=Ha(T);return S!==T&&(dr.set(T,S),ha.set(S,T)),S}const cs=T=>ha.get(T);function Nl(T,S,{blocked:R,upgrade:H,blocking:J,terminated:se}={}){const Te=indexedDB.open(T,S),ht=Is(Te);return H&&Te.addEventListener("upgradeneeded",ct=>{H(Is(Te.result),ct.oldVersion,ct.newVersion,Is(Te.transaction))}),R&&Te.addEventListener("blocked",()=>R()),ht.then(ct=>{se&&ct.addEventListener("close",()=>se()),J&&ct.addEventListener("versionchange",()=>J())}).catch(()=>{}),ht}function xl(T,{blocked:S}={}){const R=indexedDB.deleteDatabase(T);return S&&R.addEventListener("blocked",()=>S()),Is(R).then(()=>{})}const hh=["get","getKey","getAll","getAllKeys","count"],Ny=["put","add","delete","clear"],ku=new Map;function fh(T,S){if(!(T instanceof IDBDatabase)||S in T||"string"!=typeof S)return;if(ku.get(S))return ku.get(S);const R=S.replace(/FromIndex$/,""),H=S!==R,J=Ny.includes(R);if(!(R in(H?IDBIndex:IDBObjectStore).prototype)||!J&&!hh.includes(R))return;const se=function(){var Te=(0,V.Z)(function*(ht,...ct){const Ot=this.transaction(ht,J?"readwrite":"readonly");let en=Ot.store;return H&&(en=en.index(ct.shift())),(yield Promise.all([en[R](...ct),J&&Ot.done]))[0]});return function(ct){return Te.apply(this,arguments)}}();return ku.set(S,se),se}!function Ur(T){hr=T(hr)}(T=>({...T,get:(S,R,H)=>fh(S,R)||T.get(S,R,H),has:(S,R)=>!!fh(S,R)||T.has(S,R)}));const rp="/firebase-messaging-sw.js",ph="/firebase-cloud-messaging-push-scope",sp="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",xy="https://fcmregistrations.googleapis.com/v1",mi="google.c.a.c_id",Ry="google.c.a.c_l",Rm="google.c.a.ts";var op=function(T){return T.PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",T}(op||{});function $o(T){const S=new Uint8Array(T);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function gh(T){const R=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),H=atob(R),J=new Uint8Array(H.length);for(let se=0;se<H.length;++se)J[se]=H.charCodeAt(se);return J}const Rl="fcm_token_details_db",mh=5,bc="fcm_token_object_Store";function Dc(){return Dc=(0,V.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(se=>se.name).includes(Rl))return null;let S=null;return(yield Nl(Rl,mh,{upgrade:(H=(0,V.Z)(function*(J,se,Te,ht){var ct;if(se<2||!J.objectStoreNames.contains(bc))return;const Ot=ht.objectStore(bc),en=yield Ot.index("fcmSenderId").get(T);if(yield Ot.clear(),en)if(2===se){const tn=en;if(!tn.auth||!tn.p256dh||!tn.endpoint)return;S={token:tn.fcmToken,createTime:null!==(ct=tn.createTime)&&void 0!==ct?ct:Date.now(),subscriptionOptions:{auth:tn.auth,p256dh:tn.p256dh,endpoint:tn.endpoint,swScope:tn.swScope,vapidKey:"string"==typeof tn.vapidKey?tn.vapidKey:$o(tn.vapidKey)}}}else if(3===se){const tn=en;S={token:tn.fcmToken,createTime:tn.createTime,subscriptionOptions:{auth:$o(tn.auth),p256dh:$o(tn.p256dh),endpoint:tn.endpoint,swScope:tn.swScope,vapidKey:$o(tn.vapidKey)}}}else if(4===se){const tn=en;S={token:tn.fcmToken,createTime:tn.createTime,subscriptionOptions:{auth:$o(tn.auth),p256dh:$o(tn.p256dh),endpoint:tn.endpoint,swScope:tn.swScope,vapidKey:$o(tn.vapidKey)}}}}),function(se,Te,ht,ct){return H.apply(this,arguments)})})).close(),yield xl(Rl),yield xl("fcm_vapid_details_db"),yield xl("undefined"),function ja(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:S}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}(S)?S:null;var H}),Dc.apply(this,arguments)}const Eo="firebase-messaging-database",ap=1,js="firebase-messaging-store";let er=null;function Ga(){return er||(er=Nl(Eo,ap,{upgrade:(T,S)=>{0===S&&T.createObjectStore(js)}})),er}function us(T){return $a.apply(this,arguments)}function $a(){return $a=(0,V.Z)(function*(T){const S=Cc(T),H=yield(yield Ga()).transaction(js).objectStore(js).get(S);if(H)return H;{const J=yield function DD(T){return Dc.apply(this,arguments)}(T.appConfig.senderId);if(J)return yield _h(T,J),J}}),$a.apply(this,arguments)}function _h(T,S){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,V.Z)(function*(T,S){const R=Cc(T),J=(yield Ga()).transaction(js,"readwrite");return yield J.objectStore(js).put(S,R),yield J.done,S})).apply(this,arguments)}function Ol(){return(Ol=(0,V.Z)(function*(T){const S=Cc(T),H=(yield Ga()).transaction(js,"readwrite");yield H.objectStore(js).delete(S),yield H.done})).apply(this,arguments)}function Cc({appConfig:T}){return T.appId}const fr=new he.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function vh(T,S){return yh.apply(this,arguments)}function yh(){return(yh=(0,V.Z)(function*(T,S){const R=yield up(T),H=Oy(S),J={method:"POST",headers:R,body:JSON.stringify(H)};let se;try{se=yield(yield fetch(Ic(T.appConfig),J)).json()}catch(Te){throw fr.create("token-subscribe-failed",{errorInfo:Te?.toString()})}if(se.error)throw fr.create("token-subscribe-failed",{errorInfo:se.error.message});if(!se.token)throw fr.create("token-subscribe-no-token");return se.token})).apply(this,arguments)}function Tc(){return(Tc=(0,V.Z)(function*(T,S){const R=yield up(T),H=Oy(S.subscriptionOptions),J={method:"PATCH",headers:R,body:JSON.stringify(H)};let se;try{se=yield(yield fetch(`${Ic(T.appConfig)}/${S.token}`,J)).json()}catch(Te){throw fr.create("token-update-failed",{errorInfo:Te?.toString()})}if(se.error)throw fr.create("token-update-failed",{errorInfo:se.error.message});if(!se.token)throw fr.create("token-update-no-token");return se.token})).apply(this,arguments)}function za(T,S){return fa.apply(this,arguments)}function fa(){return(fa=(0,V.Z)(function*(T,S){const H={method:"DELETE",headers:yield up(T)};try{const se=yield(yield fetch(`${Ic(T.appConfig)}/${S}`,H)).json();if(se.error)throw fr.create("token-unsubscribe-failed",{errorInfo:se.error.message})}catch(J){throw fr.create("token-unsubscribe-failed",{errorInfo:J?.toString()})}})).apply(this,arguments)}function Ic({projectId:T}){return`${xy}/projects/${T}/registrations`}function up(T){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,V.Z)(function*({appConfig:T,installations:S}){const R=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function Oy({p256dh:T,auth:S,endpoint:R,vapidKey:H}){const J={web:{endpoint:R,auth:S,p256dh:T}};return H!==sp&&(J.web.applicationPubKey=H),J}const dp=6048e5;function bh(){return bh=(0,V.Z)(function*(T){const S=yield function Sc(T,S){return Dh.apply(this,arguments)}(T.swRegistration,T.vapidKey),R={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:S.endpoint,auth:$o(S.getKey("auth")),p256dh:$o(S.getKey("p256dh"))},H=yield us(T.firebaseDependencies);if(H){if(function fp(T,S){return S.vapidKey===T.vapidKey&&S.endpoint===T.endpoint&&S.auth===T.auth&&S.p256dh===T.p256dh}(H.subscriptionOptions,R))return Date.now()>=H.createTime+dp?function km(T,S){return kl.apply(this,arguments)}(T,{token:H.token,createTime:Date.now(),subscriptionOptions:R}):H.token;try{yield za(T.firebaseDependencies,H.token)}catch(J){console.warn(J)}return Py(T.firebaseDependencies,R)}return Py(T.firebaseDependencies,R)}),bh.apply(this,arguments)}function Fu(){return Fu=(0,V.Z)(function*(T){const S=yield us(T.firebaseDependencies);S&&(yield za(T.firebaseDependencies,S.token),yield function lp(T){return Ol.apply(this,arguments)}(T.firebaseDependencies));const R=yield T.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()}),Fu.apply(this,arguments)}function kl(){return kl=(0,V.Z)(function*(T,S){try{const R=yield function wh(T,S){return Tc.apply(this,arguments)}(T.firebaseDependencies,S),H=Object.assign(Object.assign({},S),{token:R,createTime:Date.now()});return yield _h(T.firebaseDependencies,H),R}catch(R){throw yield function hp(T){return Fu.apply(this,arguments)}(T),R}}),kl.apply(this,arguments)}function Py(T,S){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,V.Z)(function*(T,S){const H={token:yield vh(T,S),createTime:Date.now(),subscriptionOptions:S};return yield _h(T,H),H.token})).apply(this,arguments)}function Dh(){return(Dh=(0,V.Z)(function*(T,S){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:gh(S)})})).apply(this,arguments)}function Lu(T){const S={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function Ac(T,S){if(!S.notification)return;T.notification={};const R=S.notification.title;R&&(T.notification.title=R);const H=S.notification.body;H&&(T.notification.body=H);const J=S.notification.image;J&&(T.notification.image=J);const se=S.notification.icon;se&&(T.notification.icon=se)}(S,T),function Pm(T,S){S.data&&(T.data=S.data)}(S,T),function Eh(T,S){var R,H,J,se,Te;if(!(S.fcmOptions||null!==(R=S.notification)&&void 0!==R&&R.click_action))return;T.fcmOptions={};const ht=null!==(J=null===(H=S.fcmOptions)||void 0===H?void 0:H.link)&&void 0!==J?J:null===(se=S.notification)||void 0===se?void 0:se.click_action;ht&&(T.fcmOptions.link=ht);const ct=null===(Te=S.fcmOptions)||void 0===Te?void 0:Te.analytics_label;ct&&(T.fcmOptions.analyticsLabel=ct)}(S,T),S}function Ch(T,S){const R=[];for(let H=0;H<T.length;H++)R.push(T.charAt(H)),H<S.length&&R.push(S.charAt(H));return R.join("")}function Th(T){return fr.create("missing-app-config-values",{valueName:T})}Ch("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ch("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Lm{constructor(S,R,H){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const J=function Fm(T){if(!T||!T.options)throw Th("App Configuration Object");if(!T.name)throw Th("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:R}=T;for(const H of S)if(!R[H])throw Th(H);return{appName:T.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:J,installations:R,analyticsProvider:H}}_delete(){return Promise.resolve()}}function Mc(){return(Mc=(0,V.Z)(function*(T){try{T.swRegistration=yield navigator.serviceWorker.register(rp,{scope:ph}),T.swRegistration.update().catch(()=>{})}catch(S){throw fr.create("failed-service-worker-registration",{browserErrorMessage:S?.message})}})).apply(this,arguments)}function Wa(){return(Wa=(0,V.Z)(function*(T,S){if(!S&&!T.swRegistration&&(yield function Bu(T){return Mc.apply(this,arguments)}(T)),S||!T.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw fr.create("invalid-sw-registration");T.swRegistration=S}})).apply(this,arguments)}function qa(){return(qa=(0,V.Z)(function*(T,S){S?T.vapidKey=S:T.vapidKey||(T.vapidKey=sp)})).apply(this,arguments)}function Nc(){return Nc=(0,V.Z)(function*(T,S){if(!navigator)throw fr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw fr.create("permission-blocked");return yield function Co(T,S){return qa.apply(this,arguments)}(T,S?.vapidKey),yield function Bm(T,S){return Wa.apply(this,arguments)}(T,S?.serviceWorkerRegistration),function ky(T){return bh.apply(this,arguments)}(T)}),Nc.apply(this,arguments)}function Qs(){return(Qs=(0,V.Z)(function*(T,S,R){const H=function gp(T){switch(T){case op.NOTIFICATION_CLICKED:return"notification_open";case op.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(S);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(H,{message_id:R[mi],message_name:R[Ry],message_time:R[Rm],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Hn(){return Hn=(0,V.Z)(function*(T,S){const R=S.data;if(!R.isFirebaseMessaging)return;T.onMessageHandler&&R.messageType===op.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(Lu(R)):T.onMessageHandler.next(Lu(R)));const H=R.data;(function Fy(T){return"object"==typeof T&&!!T&&mi in T})(H)&&"1"===H["google.c.a.e"]&&(yield function Vm(T,S,R){return Qs.apply(this,arguments)}(T,R.messageType,H))}),Hn.apply(this,arguments)}const pa="@firebase/messaging",Cr=T=>{const S=new Lm(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function mp(T,S){return Hn.apply(this,arguments)}(S,R)),S},Um=T=>{const S=T.getProvider("messaging").getImmediate();return{getToken:H=>function pp(T,S){return Nc.apply(this,arguments)}(S,H)}};function Za(){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,V.Z)(function*(){try{yield(0,he.eu)()}catch{return!1}return typeof window<"u"&&(0,he.hl)()&&(0,he.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ih(){(0,re._registerComponent)(new _e.wA("messaging",Cr,"PUBLIC")),(0,re._registerComponent)(new _e.wA("messaging-internal",Um,"PRIVATE")),(0,re.registerVersion)(pa,"0.12.4"),(0,re.registerVersion)(pa,"0.12.4","esm2017")}();const ri="analytics",By="firebase_id",qt="origin",_p=6e4,vp="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Uu="https://www.googletagmanager.com/gtag/js",pr=new Ae.Yd("@firebase/analytics"),Ir=new he.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function To(T){if(!T.startsWith(Uu)){const S=Ir.create("invalid-gtag-resource",{gtagURL:T});return pr.warn(S.message),""}return T}function Hu(T){return Promise.all(T.map(S=>S.catch(R=>R)))}function He(){return(He=(0,V.Z)(function*(T,S,R,H,J,se){const Te=H[J];try{if(Te)yield S[Te];else{const ct=(yield Hu(R)).find(Ot=>Ot.measurementId===J);ct&&(yield S[ct.appId])}}catch(ht){pr.error(ht)}T("config",J,se)})).apply(this,arguments)}function Js(){return(Js=(0,V.Z)(function*(T,S,R,H,J){try{let se=[];if(J&&J.send_to){let Te=J.send_to;Array.isArray(Te)||(Te=[Te]);const ht=yield Hu(R);for(const ct of Te){const Ot=ht.find(tn=>tn.measurementId===ct),en=Ot&&S[Ot.appId];if(!en){se=[];break}se.push(en)}}0===se.length&&(se=Object.values(S)),yield Promise.all(se),T("event",H,J||{})}catch(se){pr.error(se)}})).apply(this,arguments)}const Ll=30,Mh=new class Ka{constructor(S={},R=1e3){this.throttleMetadata=S,this.intervalMillis=R}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,R){this.throttleMetadata[S]=R}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function $m(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function Nh(){return(Nh=(0,V.Z)(function*(T){var S;const{appId:R,apiKey:H}=T,J={method:"GET",headers:$m(H)},se=vp.replace("{app-id}",R),Te=yield fetch(se,J);if(200!==Te.status&&304!==Te.status){let ht="";try{const ct=yield Te.json();null!==(S=ct.error)&&void 0!==S&&S.message&&(ht=ct.error.message)}catch{}throw Ir.create("config-fetch-failed",{httpStatus:Te.status,responseMessage:ht})}return Te.json()})).apply(this,arguments)}function Ss(){return(Ss=(0,V.Z)(function*(T,S=Mh,R){const{appId:H,apiKey:J,measurementId:se}=T.options;if(!H)throw Ir.create("no-app-id");if(!J){if(se)return{measurementId:se,appId:H};throw Ir.create("no-api-key")}const Te=S.getThrottleMetadata(H)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ht=new Rh;return setTimeout((0,V.Z)(function*(){ht.abort()}),void 0!==R?R:_p),wp({appId:H,apiKey:J,measurementId:se},Te,ht,S)})).apply(this,arguments)}function wp(T,S,R){return Qa.apply(this,arguments)}function Qa(){return Qa=(0,V.Z)(function*(T,{throttleEndTimeMillis:S,backoffCount:R},H,J=Mh){var se;const{appId:Te,measurementId:ht}=T;try{yield function Io(T,S){return new Promise((R,H)=>{const J=Math.max(S-Date.now(),0),se=setTimeout(R,J);T.addEventListener(()=>{clearTimeout(se),H(Ir.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(H,S)}catch(ct){if(ht)return pr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ht} provided in the "measurementId" field in the local Firebase config. [${ct?.message}]`),{appId:Te,measurementId:ht};throw ct}try{const ct=yield function ED(T){return Nh.apply(this,arguments)}(T);return J.deleteThrottleMetadata(Te),ct}catch(ct){const Ot=ct;if(!function xh(T){if(!(T instanceof he.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}(Ot)){if(J.deleteThrottleMetadata(Te),ht)return pr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ht} provided in the "measurementId" field in the local Firebase config. [${Ot?.message}]`),{appId:Te,measurementId:ht};throw ct}const en=503===Number(null===(se=Ot?.customData)||void 0===se?void 0:se.httpStatus)?(0,he.$s)(R,J.intervalMillis,Ll):(0,he.$s)(R,J.intervalMillis),tn={throttleEndTimeMillis:Date.now()+en,backoffCount:R+1};return J.setThrottleMetadata(Te,tn),pr.debug(`Calling attemptFetch again in ${en} millis`),wp(T,tn,H,J)}}),Qa.apply(this,arguments)}class Rh{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}let Wu,Sr;function qu(){return(qu=(0,V.Z)(function*(T,S,R,H,J){if(J&&J.global)T("event",R,H);else{const se=yield S;T("event",R,Object.assign(Object.assign({},H),{send_to:se}))}})).apply(this,arguments)}function zo(){return(zo=(0,V.Z)(function*(){if(!(0,he.hl)())return pr.warn(Ir.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,he.eu)()}catch(T){return pr.warn(Ir.create("indexeddb-unavailable",{errorInfo:T?.toString()}).message),!1}return!0})).apply(this,arguments)}function Ar(){return Ar=(0,V.Z)(function*(T,S,R,H,J,se,Te){var ht;const ct=function hs(T){return Ss.apply(this,arguments)}(T);ct.then(zi=>{R[zi.measurementId]=zi.appId,T.options.measurementId&&zi.measurementId!==T.options.measurementId&&pr.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${zi.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(zi=>pr.error(zi)),S.push(ct);const Ot=function rt(){return zo.apply(this,arguments)}().then(zi=>{if(zi)return H.getId()}),[en,tn]=yield Promise.all([ct,Ot]);(function zu(T){const S=window.document.getElementsByTagName("script");for(const R of Object.values(S))if(R.src&&R.src.includes(Uu)&&R.src.includes(T))return R;return null})(se)||function Gu(T,S){const R=function ju(T,S){let R;return window.trustedTypes&&(R=window.trustedTypes.createPolicy(T,S)),R}("firebase-js-sdk-policy",{createScriptURL:To}),H=document.createElement("script"),J=`${Uu}?l=${T}&id=${S}`;H.src=R?R?.createScriptURL(J):J,H.async=!0,document.head.appendChild(H)}(se,en.measurementId),Sr&&(J("consent","default",Sr),function Ja(T){Sr=T}(void 0)),J("js",new Date);const nr=null!==(ht=Te?.config)&&void 0!==ht?ht:{};return nr[qt]="firebase",nr.update=!0,null!=tn&&(nr[By]=tn),J("config",en.measurementId,nr),Wu&&(J("set",Wu),function qn(T){Wu=T}(void 0)),en.measurementId}),Ar.apply(this,arguments)}class ma{constructor(S){this.app=S}_delete(){return delete Gs[this.app.options.appId],Promise.resolve()}}let Gs={},xc=[];const $i={};let tr,jn,_i="dataLayer",Wo=!1;function qo(T,S,R){!function Zu(){const T=[];if((0,he.ru)()&&T.push("This is a browser extension environment."),(0,he.zI)()||T.push("Cookies are not available."),T.length>0){const S=T.map((H,J)=>`(${J+1}) ${H}`).join(" "),R=Ir.create("invalid-analytics-context",{errorInfo:S});pr.warn(R.message)}}();const H=T.options.appId;if(!H)throw Ir.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw Ir.create("no-api-key");pr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Gs[H])throw Ir.create("already-exists",{id:H});if(!Wo){!function Vy(T){let S=[];Array.isArray(window[T])?S=window[T]:window[T]=S}(_i);const{wrappedGtag:se,gtagCore:Te}=function gr(T,S,R,H,J){let se=function(...Te){window[H].push(arguments)};return window[J]&&"function"==typeof window[J]&&(se=window[J]),window[J]=function $u(T,S,R,H){function se(){return se=(0,V.Z)(function*(Te,...ht){try{if("event"===Te){const[ct,Ot]=ht;yield function gn(T,S,R,H,J){return Js.apply(this,arguments)}(T,S,R,ct,Ot)}else if("config"===Te){const[ct,Ot]=ht;yield function Ah(T,S,R,H,J,se){return He.apply(this,arguments)}(T,S,R,H,ct,Ot)}else if("consent"===Te){const[ct]=ht;T("consent","update",ct)}else if("get"===Te){const[ct,Ot,en]=ht;T("get",ct,Ot,en)}else if("set"===Te){const[ct]=ht;T("set",ct)}else T(Te,...ht)}catch(ct){pr.error(ct)}}),se.apply(this,arguments)}return function J(Te){return se.apply(this,arguments)}}(se,T,S,R),{gtagCore:se,wrappedGtag:window[J]}}(Gs,xc,$i,_i,"gtag");jn=se,tr=Te,Wo=!0}return Gs[H]=function Xn(T,S,R,H,J,se,Te){return Ar.apply(this,arguments)}(T,xc,$i,S,tr,_i,R),new ma(T)}function Rc(){return So.apply(this,arguments)}function So(){return(So=(0,V.Z)(function*(){if((0,he.ru)()||!(0,he.zI)()||!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch{return!1}})).apply(this,arguments)}const kc="@firebase/analytics";!function jy(){(0,re._registerComponent)(new _e.wA(ri,(S,{options:R})=>qo(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,re._registerComponent)(new _e.wA("analytics-internal",function T(S){try{const R=S.getProvider(ri).getImmediate();return{logEvent:(H,J,se)=>function qm(T,S,R,H){T=(0,he.m9)(T),function Uy(T,S,R,H,J){return qu.apply(this,arguments)}(jn,Gs[T.app.options.appId],S,R,H).catch(J=>pr.error(J))}(R,H,J,se)}}catch(R){throw Ir.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,re.registerVersion)(kc,"0.10.0"),(0,re.registerVersion)(kc,"0.10.0","esm2017")}();var Ul=L(1954),Oh=L(2631);const Zm=new class Ym extends Oh.v{}(class Ip extends Ul.o{constructor(S,R){super(S,R),this.scheduler=S,this.work=R}schedule(S,R=0){return R>0?super.schedule(S,R):(this.delay=R,this.state=S,this.scheduler.flush(this),this)}execute(S,R){return R>0||this.closed?super.execute(S,R):this._execute(S,R)}requestAsyncId(S,R,H=0){return null!=H&&H>0||null==H&&this.delay>0?super.requestAsyncId(S,R,H):(S.flush(this),0)}});var Sp=L(6321),Ee=L(9397),oi=L(3093),mr=L(5137);const B=new a.GfV("7.6.1"),Hr="__angularfire_symbol__analyticsIsSupportedValue",Ao="__angularfire_symbol__analyticsIsSupported",Hl="__angularfire_symbol__remoteConfigIsSupportedValue",Qu="__angularfire_symbol__remoteConfigIsSupported",ei="__angularfire_symbol__messagingIsSupportedValue",Pc="__angularfire_symbol__messagingIsSupported";function el(T,S,R){if(S){if(1===S.length)return S[0];const se=S.filter(Te=>Te.app===R);if(1===se.length)return se[0]}return R.container.getProvider(T).getImmediate({optional:!0})}globalThis[Ao]||(globalThis[Ao]=Rc().then(T=>globalThis[Hr]=T).catch(()=>globalThis[Hr]=!1)),globalThis[Pc]||(globalThis[Pc]=Za().then(T=>globalThis[ei]=T).catch(()=>globalThis[ei]=!1)),globalThis[Qu]||(globalThis[Qu]=ua().then(T=>globalThis[Hl]=T).catch(()=>globalThis[Hl]=!1));const Mp=(T,S)=>{const R=S?[S]:(0,ie.C6)(),H=[];return R.forEach(J=>{J.container.getProvider(T).instances.forEach(Te=>{H.includes(Te)||H.push(Te)})}),H};function Yo(){}class Ph{constructor(S,R=Zm){this.zone=S,this.delegate=R}now(){return this.delegate.now()}schedule(S,R,H){const J=this.zone;return this.delegate.schedule(function(Te){J.runGuarded(()=>{S.apply(this,[Te])})},R,H)}}class Fc{constructor(S){this.zone=S,this.task=null}call(S,R){const H=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Yo,{},Yo,Yo)),R.pipe((0,Ee.b)({next:H,complete:H,error:H})).subscribe(S).add(H)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Np=(()=>{class T{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new Ph(Zone.current)),this.insideAngular=R.run(()=>new Ph(Zone.current,Sp.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(R){return new(R||T)(a.LFG(a.R0b))},T.\u0275prov=a.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function mn(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function Lc(T){return T.pipe((0,oi.Q)(mn().outsideAngular))}function jl(T){return mn(),function Bc(T){return function(R){return(R=R.lift(new Fc(T.ngZone))).pipe((0,mr.R)(T.outsideAngular),(0,oi.Q)(T.insideAngular))}}(mn())(T)}},9058:(Ct,xe,L)=>{L.d(xe,{$s:()=>et,BH:()=>fe,DV:()=>lr,Dv:()=>vo,G6:()=>ar,GJ:()=>Ci,L:()=>we,LL:()=>Ve,Pz:()=>Re,Sg:()=>Pe,UG:()=>X,UI:()=>ss,US:()=>_e,Wj:()=>Tn,Wl:()=>Pt,Yr:()=>ui,ZB:()=>le,ZR:()=>Fe,aH:()=>pe,b$:()=>Nn,cI:()=>di,dS:()=>yo,eu:()=>De,g5:()=>V,gK:()=>En,gQ:()=>Xt,h$:()=>je,hl:()=>me,hu:()=>ie,jU:()=>Je,lb:()=>os,m9:()=>xn,ne:()=>Jt,p$:()=>Z,pd:()=>Yt,r3:()=>Vn,ru:()=>kt,tV:()=>$,uI:()=>ge,ug:()=>Vo,vZ:()=>Ai,w1:()=>Wn,w9:()=>Jn,xO:()=>Ra,xb:()=>$r,z$:()=>We,zI:()=>Ce,zd:()=>Gt});const a={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},ie=function(q,W){if(!q)throw V(W)},V=function(q){return new Error("Firebase Database ("+a.SDK_VERSION+") INTERNAL ASSERT FAILED: "+q)},re=function(q){const W=[];let ne=0;for(let Le=0;Le<q.length;Le++){let ye=q.charCodeAt(Le);ye<128?W[ne++]=ye:ye<2048?(W[ne++]=ye>>6|192,W[ne++]=63&ye|128):55296==(64512&ye)&&Le+1<q.length&&56320==(64512&q.charCodeAt(Le+1))?(ye=65536+((1023&ye)<<10)+(1023&q.charCodeAt(++Le)),W[ne++]=ye>>18|240,W[ne++]=ye>>12&63|128,W[ne++]=ye>>6&63|128,W[ne++]=63&ye|128):(W[ne++]=ye>>12|224,W[ne++]=ye>>6&63|128,W[ne++]=63&ye|128)}return W},_e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(q,W){if(!Array.isArray(q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ne=W?this.byteToCharMapWebSafe_:this.byteToCharMap_,Le=[];for(let ye=0;ye<q.length;ye+=3){const wt=q[ye],nn=ye+1<q.length,Kt=nn?q[ye+1]:0,Br=ye+2<q.length,sn=Br?q[ye+2]:0;let br=(15&Kt)<<2|sn>>6,oa=63&sn;Br||(oa=64,nn||(br=64)),Le.push(ne[wt>>2],ne[(3&wt)<<4|Kt>>4],ne[br],ne[oa])}return Le.join("")},encodeString(q,W){return this.HAS_NATIVE_SUPPORT&&!W?btoa(q):this.encodeByteArray(re(q),W)},decodeString(q,W){return this.HAS_NATIVE_SUPPORT&&!W?atob(q):function(q){const W=[];let ne=0,Le=0;for(;ne<q.length;){const ye=q[ne++];if(ye<128)W[Le++]=String.fromCharCode(ye);else if(ye>191&&ye<224){const wt=q[ne++];W[Le++]=String.fromCharCode((31&ye)<<6|63&wt)}else if(ye>239&&ye<365){const Br=((7&ye)<<18|(63&q[ne++])<<12|(63&q[ne++])<<6|63&q[ne++])-65536;W[Le++]=String.fromCharCode(55296+(Br>>10)),W[Le++]=String.fromCharCode(56320+(1023&Br))}else{const wt=q[ne++],nn=q[ne++];W[Le++]=String.fromCharCode((15&ye)<<12|(63&wt)<<6|63&nn)}}return W.join("")}(this.decodeStringToByteArray(q,W))},decodeStringToByteArray(q,W){this.init_();const ne=W?this.charToByteMapWebSafe_:this.charToByteMap_,Le=[];for(let ye=0;ye<q.length;){const wt=ne[q.charAt(ye++)],Kt=ye<q.length?ne[q.charAt(ye)]:0;++ye;const sn=ye<q.length?ne[q.charAt(ye)]:64;++ye;const In=ye<q.length?ne[q.charAt(ye)]:64;if(++ye,null==wt||null==Kt||null==sn||null==In)throw new Ae;Le.push(wt<<2|Kt>>4),64!==sn&&(Le.push(Kt<<4&240|sn>>2),64!==In&&Le.push(sn<<6&192|In))}return Le},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let q=0;q<this.ENCODED_VALS.length;q++)this.byteToCharMap_[q]=this.ENCODED_VALS.charAt(q),this.charToByteMap_[this.byteToCharMap_[q]]=q,this.byteToCharMapWebSafe_[q]=this.ENCODED_VALS_WEBSAFE.charAt(q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[q]]=q,q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(q)]=q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(q)]=q)}}};class Ae extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const je=function(q){const W=re(q);return _e.encodeByteArray(W,!0)},we=function(q){return je(q).replace(/\./g,"")},$=function(q){try{return _e.decodeString(q,!0)}catch(W){console.error("base64Decode failed: ",W)}return null};function Z(q){return le(void 0,q)}function le(q,W){if(!(W instanceof Object))return W;switch(W.constructor){case Date:return new Date(W.getTime());case Object:void 0===q&&(q={});break;case Array:q=[];break;default:return W}for(const ne in W)!W.hasOwnProperty(ne)||!Ze(ne)||(q[ne]=le(q[ne],W[ne]));return q}function Ze(q){return"__proto__"!==q}const ze=()=>{try{return function Ue(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const q=process.env.__FIREBASE_DEFAULTS__;return q?JSON.parse(q):void 0})()||(()=>{if(typeof document>"u")return;let q;try{q=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const W=q&&$(q[1]);return W&&JSON.parse(W)})()}catch(q){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${q}`)}},pe=()=>{var q;return null===(q=ze())||void 0===q?void 0:q.config},Re=q=>{var W;return null===(W=ze())||void 0===W?void 0:W[`_${q}`]};class fe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((W,ne)=>{this.resolve=W,this.reject=ne})}wrapCallback(W){return(ne,Le)=>{ne?this.reject(ne):this.resolve(Le),"function"==typeof W&&(this.promise.catch(()=>{}),1===W.length?W(ne):W(ne,Le))}}}function Pe(q,W){if(q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Le=W||"demo-project",ye=q.iat||0,wt=q.sub||q.user_id;if(!wt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const nn=Object.assign({iss:`https://securetoken.google.com/${Le}`,aud:Le,iat:ye,exp:ye+3600,auth_time:ye,sub:wt,user_id:wt,firebase:{sign_in_provider:"custom",identities:{}}},q);return[we(JSON.stringify({alg:"none",type:"JWT"})),we(JSON.stringify(nn)),""].join(".")}function We(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ge(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function X(){var q;const W=null===(q=ze())||void 0===q?void 0:q.forceEnvironment;if("node"===W)return!0;if("browser"===W)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Je(){return"object"==typeof self&&self.self===self}function kt(){const q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof q&&void 0!==q.id}function Nn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Wn(){const q=We();return q.indexOf("MSIE ")>=0||q.indexOf("Trident/")>=0}function ui(){return!0===a.NODE_CLIENT||!0===a.NODE_ADMIN}function ar(){return!X()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function me(){try{return"object"==typeof indexedDB}catch{return!1}}function De(){return new Promise((q,W)=>{try{let ne=!0;const Le="validate-browser-context-for-indexeddb-analytics-module",ye=self.indexedDB.open(Le);ye.onsuccess=()=>{ye.result.close(),ne||self.indexedDB.deleteDatabase(Le),q(!0)},ye.onupgradeneeded=()=>{ne=!1},ye.onerror=()=>{var wt;W((null===(wt=ye.error)||void 0===wt?void 0:wt.message)||"")}}catch(ne){W(ne)}})}function Ce(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Fe extends Error{constructor(W,ne,Le){super(ne),this.code=W,this.customData=Le,this.name="FirebaseError",Object.setPrototypeOf(this,Fe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ve.prototype.create)}}class Ve{constructor(W,ne,Le){this.service=W,this.serviceName=ne,this.errors=Le}create(W,...ne){const Le=ne[0]||{},ye=`${this.service}/${W}`,wt=this.errors[W],nn=wt?function ut(q,W){return q.replace(it,(ne,Le)=>{const ye=W[Le];return null!=ye?String(ye):`<${Le}?>`})}(wt,Le):"Error";return new Fe(ye,`${this.serviceName}: ${nn} (${ye}).`,Le)}}const it=/\{\$([^}]+)}/g;function di(q){return JSON.parse(q)}function Pt(q){return JSON.stringify(q)}const Dn=function(q){let W={},ne={},Le={},ye="";try{const wt=q.split(".");W=di($(wt[0])||""),ne=di($(wt[1])||""),ye=wt[2],Le=ne.d||{},delete ne.d}catch{}return{header:W,claims:ne,data:Le,signature:ye}},Jn=function(q){const ne=Dn(q).claims;return!!ne&&"object"==typeof ne&&ne.hasOwnProperty("iat")},Ci=function(q){const W=Dn(q).claims;return"object"==typeof W&&!0===W.admin};function Vn(q,W){return Object.prototype.hasOwnProperty.call(q,W)}function lr(q,W){if(Object.prototype.hasOwnProperty.call(q,W))return q[W]}function $r(q){for(const W in q)if(Object.prototype.hasOwnProperty.call(q,W))return!1;return!0}function ss(q,W,ne){const Le={};for(const ye in q)Object.prototype.hasOwnProperty.call(q,ye)&&(Le[ye]=W.call(ne,q[ye],ye,q));return Le}function Ai(q,W){if(q===W)return!0;const ne=Object.keys(q),Le=Object.keys(W);for(const ye of ne){if(!Le.includes(ye))return!1;const wt=q[ye],nn=W[ye];if(zr(wt)&&zr(nn)){if(!Ai(wt,nn))return!1}else if(wt!==nn)return!1}for(const ye of Le)if(!ne.includes(ye))return!1;return!0}function zr(q){return null!==q&&"object"==typeof q}function Ra(q){const W=[];for(const[ne,Le]of Object.entries(q))Array.isArray(Le)?Le.forEach(ye=>{W.push(encodeURIComponent(ne)+"="+encodeURIComponent(ye))}):W.push(encodeURIComponent(ne)+"="+encodeURIComponent(Le));return W.length?"&"+W.join("&"):""}function Gt(q){const W={};return q.replace(/^\?/,"").split("&").forEach(Le=>{if(Le){const[ye,wt]=Le.split("=");W[decodeURIComponent(ye)]=decodeURIComponent(wt)}}),W}function Yt(q){const W=q.indexOf("?");if(!W)return"";const ne=q.indexOf("#",W);return q.substring(W,ne>0?ne:void 0)}class Xt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let W=1;W<this.blockSize;++W)this.pad_[W]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(W,ne){ne||(ne=0);const Le=this.W_;if("string"==typeof W)for(let In=0;In<16;In++)Le[In]=W.charCodeAt(ne)<<24|W.charCodeAt(ne+1)<<16|W.charCodeAt(ne+2)<<8|W.charCodeAt(ne+3),ne+=4;else for(let In=0;In<16;In++)Le[In]=W[ne]<<24|W[ne+1]<<16|W[ne+2]<<8|W[ne+3],ne+=4;for(let In=16;In<80;In++){const br=Le[In-3]^Le[In-8]^Le[In-14]^Le[In-16];Le[In]=4294967295&(br<<1|br>>>31)}let sn,ji,ye=this.chain_[0],wt=this.chain_[1],nn=this.chain_[2],Kt=this.chain_[3],Br=this.chain_[4];for(let In=0;In<80;In++){In<40?In<20?(sn=Kt^wt&(nn^Kt),ji=1518500249):(sn=wt^nn^Kt,ji=1859775393):In<60?(sn=wt&nn|Kt&(wt|nn),ji=2400959708):(sn=wt^nn^Kt,ji=3395469782);const br=(ye<<5|ye>>>27)+sn+Br+ji+Le[In]&4294967295;Br=Kt,Kt=nn,nn=4294967295&(wt<<30|wt>>>2),wt=ye,ye=br}this.chain_[0]=this.chain_[0]+ye&4294967295,this.chain_[1]=this.chain_[1]+wt&4294967295,this.chain_[2]=this.chain_[2]+nn&4294967295,this.chain_[3]=this.chain_[3]+Kt&4294967295,this.chain_[4]=this.chain_[4]+Br&4294967295}update(W,ne){if(null==W)return;void 0===ne&&(ne=W.length);const Le=ne-this.blockSize;let ye=0;const wt=this.buf_;let nn=this.inbuf_;for(;ye<ne;){if(0===nn)for(;ye<=Le;)this.compress_(W,ye),ye+=this.blockSize;if("string"==typeof W){for(;ye<ne;)if(wt[nn]=W.charCodeAt(ye),++nn,++ye,nn===this.blockSize){this.compress_(wt),nn=0;break}}else for(;ye<ne;)if(wt[nn]=W[ye],++nn,++ye,nn===this.blockSize){this.compress_(wt),nn=0;break}}this.inbuf_=nn,this.total_+=ne}digest(){const W=[];let ne=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ye=this.blockSize-1;ye>=56;ye--)this.buf_[ye]=255&ne,ne/=256;this.compress_(this.buf_);let Le=0;for(let ye=0;ye<5;ye++)for(let wt=24;wt>=0;wt-=8)W[Le]=this.chain_[ye]>>wt&255,++Le;return W}}function Jt(q,W){const ne=new hi(q,W);return ne.subscribe.bind(ne)}class hi{constructor(W,ne){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ne,this.task.then(()=>{W(this)}).catch(Le=>{this.error(Le)})}next(W){this.forEachObserver(ne=>{ne.next(W)})}error(W){this.forEachObserver(ne=>{ne.error(W)}),this.close(W)}complete(){this.forEachObserver(W=>{W.complete()}),this.close()}subscribe(W,ne,Le){let ye;if(void 0===W&&void 0===ne&&void 0===Le)throw new Error("Missing Observer.");ye=function Un(q,W){if("object"!=typeof q||null===q)return!1;for(const ne of W)if(ne in q&&"function"==typeof q[ne])return!0;return!1}(W,["next","error","complete"])?W:{next:W,error:ne,complete:Le},void 0===ye.next&&(ye.next=Ti),void 0===ye.error&&(ye.error=Ti),void 0===ye.complete&&(ye.complete=Ti);const wt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ye.error(this.finalError):ye.complete()}catch{}}),this.observers.push(ye),wt}unsubscribeOne(W){void 0===this.observers||void 0===this.observers[W]||(delete this.observers[W],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(W){if(!this.finalized)for(let ne=0;ne<this.observers.length;ne++)this.sendOne(ne,W)}sendOne(W,ne){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[W])try{ne(this.observers[W])}catch(Le){typeof console<"u"&&console.error&&console.error(Le)}})}close(W){this.finalized||(this.finalized=!0,void 0!==W&&(this.finalError=W),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ti(){}const vo=function(q,W,ne,Le){let ye;if(Le<W?ye="at least "+W:Le>ne&&(ye=0===ne?"none":"no more than "+ne),ye)throw new Error(q+" failed: Was called with "+Le+(1===Le?" argument.":" arguments.")+" Expects "+ye+".")};function En(q,W){return`${q} failed: ${W} argument `}function Tn(q,W,ne,Le){if((!Le||ne)&&"function"!=typeof ne)throw new Error(En(q,W)+"must be a valid function.")}function os(q,W,ne,Le){if((!Le||ne)&&("object"!=typeof ne||null===ne))throw new Error(En(q,W)+"must be a valid context object.")}const yo=function(q){const W=[];let ne=0;for(let Le=0;Le<q.length;Le++){let ye=q.charCodeAt(Le);if(ye>=55296&&ye<=56319){const wt=ye-55296;Le++,ie(Le<q.length,"Surrogate pair missing trail surrogate."),ye=65536+(wt<<10)+(q.charCodeAt(Le)-56320)}ye<128?W[ne++]=ye:ye<2048?(W[ne++]=ye>>6|192,W[ne++]=63&ye|128):ye<65536?(W[ne++]=ye>>12|224,W[ne++]=ye>>6&63|128,W[ne++]=63&ye|128):(W[ne++]=ye>>18|240,W[ne++]=ye>>12&63|128,W[ne++]=ye>>6&63|128,W[ne++]=63&ye|128)}return W},Vo=function(q){let W=0;for(let ne=0;ne<q.length;ne++){const Le=q.charCodeAt(ne);Le<128?W++:Le<2048?W+=2:Le>=55296&&Le<=56319?(W+=4,ne++):W+=3}return W},wo=1e3,Me=2,Q=144e5,Ie=.5;function et(q,W=wo,ne=Me){const Le=W*Math.pow(ne,q),ye=Math.round(Ie*Le*(Math.random()-.5)*2);return Math.min(Q,Le+ye)}function xn(q){return q&&q._delegate?q._delegate:q}},4989:(Ct,xe,L)=>{var a=L(5879);let ie=null;function V(){return ie}class he{}const _e=new a.OlP("DocumentToken");let Ae=(()=>{class n{historyGo(e){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=a.Yz7({token:n,factory:function(){return(0,a.f3M)(we)},providedIn:"platform"})}return n})();const je=new a.OlP("Location Initialized");let we=(()=>{class n extends Ae{constructor(){super(),this._doc=(0,a.f3M)(_e),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return V().getBaseHref(this._doc)}onPopState(e){const i=V().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=V().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){this._history.pushState(e,i,r)}replaceState(e,i,r){this._history.replaceState(e,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=a.Yz7({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function $(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function Z(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function le(n){return n&&"?"!==n[0]?"?"+n:n}let Ze=(()=>{class n{historyGo(e){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=a.Yz7({token:n,factory:function(){return(0,a.f3M)(at)},providedIn:"root"})}return n})();const Ue=new a.OlP("appBaseHref");let at=(()=>{class n extends Ze{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,a.f3M)(_e).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return $(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+le(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){const l=this.prepareExternalUrl(r+le(s));this._platformLocation.pushState(e,i,l)}replaceState(e,i,r,s){const l=this.prepareExternalUrl(r+le(s));this._platformLocation.replaceState(e,i,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static#e=this.\u0275fac=function(i){return new(i||n)(a.LFG(Ae),a.LFG(Ue,8))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$e=(()=>{class n extends Ze{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=$(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,s){let l=this.prepareExternalUrl(r+le(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(e,i,l)}replaceState(e,i,r,s){let l=this.prepareExternalUrl(r+le(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static#e=this.\u0275fac=function(i){return new(i||n)(a.LFG(Ae),a.LFG(Ue,8))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac})}return n})(),lt=(()=>{class n{constructor(e){this._subject=new a.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._basePath=function pe(n){if(new RegExp("^(https?:)?//").test(n)){const[,e]=n.split(/\/\/[^\/]+/);return e}return n}(Z(Nt(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+le(i))}normalize(e){return n.stripTrailingSlash(function Rt(n,t){if(!n||!t.startsWith(n))return t;const e=t.substring(n.length);return""===e||["/",";","?","#"].includes(e[0])?e:t}(this._basePath,Nt(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+le(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+le(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}static#e=this.normalizeQueryParams=le;static#t=this.joinWithSlash=$;static#n=this.stripTrailingSlash=Z;static#i=this.\u0275fac=function(i){return new(i||n)(a.LFG(Ze))};static#r=this.\u0275prov=a.Yz7({token:n,factory:function(){return function ze(){return new lt((0,a.LFG)(Ze))}()},providedIn:"root"})}return n})();function Nt(n){return n.replace(/\/index.html$/,"")}var Pe=function(n){return n[n.Zero=0]="Zero",n[n.One=1]="One",n[n.Two=2]="Two",n[n.Few=3]="Few",n[n.Many=4]="Many",n[n.Other=5]="Other",n}(Pe||{}),We=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(We||{}),ge=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(ge||{}),X=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(X||{}),Je=function(n){return n[n.Decimal=0]="Decimal",n[n.Group=1]="Group",n[n.List=2]="List",n[n.PercentSign=3]="PercentSign",n[n.PlusSign=4]="PlusSign",n[n.MinusSign=5]="MinusSign",n[n.Exponential=6]="Exponential",n[n.SuperscriptingExponent=7]="SuperscriptingExponent",n[n.PerMille=8]="PerMille",n[n.Infinity=9]="Infinity",n[n.NaN=10]="NaN",n[n.TimeSeparator=11]="TimeSeparator",n[n.CurrencyDecimal=12]="CurrencyDecimal",n[n.CurrencyGroup=13]="CurrencyGroup",n}(Je||{});function De(n,t){return Vn((0,a.cg1)(n)[a.wAp.DateFormat],t)}function Ce(n,t){return Vn((0,a.cg1)(n)[a.wAp.TimeFormat],t)}function Se(n,t){return Vn((0,a.cg1)(n)[a.wAp.DateTimeFormat],t)}function Fe(n,t){const e=(0,a.cg1)(n),i=e[a.wAp.NumberSymbols][t];if(typeof i>"u"){if(t===Je.CurrencyDecimal)return e[a.wAp.NumberSymbols][Je.Decimal];if(t===Je.CurrencyGroup)return e[a.wAp.NumberSymbols][Je.Group]}return i}const Dn=a.kL8;function xt(n){if(!n[a.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[a.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Vn(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new Error("Locale data API: locale data undefined")}function lr(n){const[t,e]=n.split(":");return{hours:+t,minutes:+e}}const zr=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,_o={},Ra=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Gt=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(Gt||{}),Yt=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(Yt||{}),Xt=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(Xt||{});function Jt(n,t,e,i){let r=function W(n){if(Le(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[r,s=1,l=1]=n.split("-").map(d=>+d);return hi(r,s-1,l)}const e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let i;if(i=n.match(zr))return function ne(n){const t=new Date(0);let e=0,i=0;const r=n[8]?t.setUTCFullYear:t.setFullYear,s=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));const l=Number(n[4]||0)-e,d=Number(n[5]||0)-i,f=Number(n[6]||0),m=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(t,l,d,f,m),t}(i)}const t=new Date(n);if(!Le(t))throw new Error(`Unable to convert "${n}" into a date`);return t}(n);t=Hi(e,t)||t;let d,l=[];for(;t;){if(d=Ra.exec(t),!d){l.push(t);break}{l=l.concat(d.slice(1));const y=l.pop();if(!y)break;t=y}}let f=r.getTimezoneOffset();i&&(f=Ft(i,f),r=function q(n,t,e){const i=e?-1:1,r=n.getTimezoneOffset();return function xn(n,t){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+t),n}(n,i*(Ft(t,r)-r))}(r,i,!0));let m="";return l.forEach(y=>{const C=function dt(n){if(et[n])return et[n];let t;switch(n){case"G":case"GG":case"GGG":t=Tn(Xt.Eras,ge.Abbreviated);break;case"GGGG":t=Tn(Xt.Eras,ge.Wide);break;case"GGGGG":t=Tn(Xt.Eras,ge.Narrow);break;case"y":t=En(Yt.FullYear,1,0,!1,!0);break;case"yy":t=En(Yt.FullYear,2,0,!0,!0);break;case"yyy":t=En(Yt.FullYear,3,0,!1,!0);break;case"yyyy":t=En(Yt.FullYear,4,0,!1,!0);break;case"Y":t=Ie(1);break;case"YY":t=Ie(2,!0);break;case"YYY":t=Ie(3);break;case"YYYY":t=Ie(4);break;case"M":case"L":t=En(Yt.Month,1,1);break;case"MM":case"LL":t=En(Yt.Month,2,1);break;case"MMM":t=Tn(Xt.Months,ge.Abbreviated);break;case"MMMM":t=Tn(Xt.Months,ge.Wide);break;case"MMMMM":t=Tn(Xt.Months,ge.Narrow);break;case"LLL":t=Tn(Xt.Months,ge.Abbreviated,We.Standalone);break;case"LLLL":t=Tn(Xt.Months,ge.Wide,We.Standalone);break;case"LLLLL":t=Tn(Xt.Months,ge.Narrow,We.Standalone);break;case"w":t=Q(1);break;case"ww":t=Q(2);break;case"W":t=Q(1,!0);break;case"d":t=En(Yt.Date,1);break;case"dd":t=En(Yt.Date,2);break;case"c":case"cc":t=En(Yt.Day,1);break;case"ccc":t=Tn(Xt.Days,ge.Abbreviated,We.Standalone);break;case"cccc":t=Tn(Xt.Days,ge.Wide,We.Standalone);break;case"ccccc":t=Tn(Xt.Days,ge.Narrow,We.Standalone);break;case"cccccc":t=Tn(Xt.Days,ge.Short,We.Standalone);break;case"E":case"EE":case"EEE":t=Tn(Xt.Days,ge.Abbreviated);break;case"EEEE":t=Tn(Xt.Days,ge.Wide);break;case"EEEEE":t=Tn(Xt.Days,ge.Narrow);break;case"EEEEEE":t=Tn(Xt.Days,ge.Short);break;case"a":case"aa":case"aaa":t=Tn(Xt.DayPeriods,ge.Abbreviated);break;case"aaaa":t=Tn(Xt.DayPeriods,ge.Wide);break;case"aaaaa":t=Tn(Xt.DayPeriods,ge.Narrow);break;case"b":case"bb":case"bbb":t=Tn(Xt.DayPeriods,ge.Abbreviated,We.Standalone,!0);break;case"bbbb":t=Tn(Xt.DayPeriods,ge.Wide,We.Standalone,!0);break;case"bbbbb":t=Tn(Xt.DayPeriods,ge.Narrow,We.Standalone,!0);break;case"B":case"BB":case"BBB":t=Tn(Xt.DayPeriods,ge.Abbreviated,We.Format,!0);break;case"BBBB":t=Tn(Xt.DayPeriods,ge.Wide,We.Format,!0);break;case"BBBBB":t=Tn(Xt.DayPeriods,ge.Narrow,We.Format,!0);break;case"h":t=En(Yt.Hours,1,-12);break;case"hh":t=En(Yt.Hours,2,-12);break;case"H":t=En(Yt.Hours,1);break;case"HH":t=En(Yt.Hours,2);break;case"m":t=En(Yt.Minutes,1);break;case"mm":t=En(Yt.Minutes,2);break;case"s":t=En(Yt.Seconds,1);break;case"ss":t=En(Yt.Seconds,2);break;case"S":t=En(Yt.FractionalSeconds,1);break;case"SS":t=En(Yt.FractionalSeconds,2);break;case"SSS":t=En(Yt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=yo(Gt.Short);break;case"ZZZZZ":t=yo(Gt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=yo(Gt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=yo(Gt.Long);break;default:return null}return et[n]=t,t}(y);m+=C?C(r,e,f):"''"===y?"'":y.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),m}function hi(n,t,e){const i=new Date(0);return i.setFullYear(n,t,e),i.setHours(0,0,0),i}function Hi(n,t){const e=function Nn(n){return(0,a.cg1)(n)[a.wAp.LocaleId]}(n);if(_o[e]=_o[e]||{},_o[e][t])return _o[e][t];let i="";switch(t){case"shortDate":i=De(n,X.Short);break;case"mediumDate":i=De(n,X.Medium);break;case"longDate":i=De(n,X.Long);break;case"fullDate":i=De(n,X.Full);break;case"shortTime":i=Ce(n,X.Short);break;case"mediumTime":i=Ce(n,X.Medium);break;case"longTime":i=Ce(n,X.Long);break;case"fullTime":i=Ce(n,X.Full);break;case"short":const r=Hi(n,"shortTime"),s=Hi(n,"shortDate");i=Un(Se(n,X.Short),[r,s]);break;case"medium":const l=Hi(n,"mediumTime"),d=Hi(n,"mediumDate");i=Un(Se(n,X.Medium),[l,d]);break;case"long":const f=Hi(n,"longTime"),m=Hi(n,"longDate");i=Un(Se(n,X.Long),[f,m]);break;case"full":const y=Hi(n,"fullTime"),C=Hi(n,"fullDate");i=Un(Se(n,X.Full),[y,C])}return i&&(_o[e][t]=i),i}function Un(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,i){return null!=t&&i in t?t[i]:e})),n}function Ti(n,t,e="-",i,r){let s="";(n<0||r&&n<=0)&&(r?n=1-n:(n=-n,s=e));let l=String(n);for(;l.length<t;)l="0"+l;return i&&(l=l.slice(l.length-t)),s+l}function En(n,t,e=0,i=!1,r=!1){return function(s,l){let d=function Fr(n,t){switch(n){case Yt.FullYear:return t.getFullYear();case Yt.Month:return t.getMonth();case Yt.Date:return t.getDate();case Yt.Hours:return t.getHours();case Yt.Minutes:return t.getMinutes();case Yt.Seconds:return t.getSeconds();case Yt.FractionalSeconds:return t.getMilliseconds();case Yt.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((e>0||d>-e)&&(d+=e),n===Yt.Hours)0===d&&-12===e&&(d=12);else if(n===Yt.FractionalSeconds)return function vo(n,t){return Ti(n,3).substring(0,t)}(d,t);const f=Fe(l,Je.MinusSign);return Ti(d,t,f,i,r)}}function Tn(n,t,e=We.Format,i=!1){return function(r,s){return function os(n,t,e,i,r,s){switch(e){case Xt.Months:return function ci(n,t,e){const i=(0,a.cg1)(n),s=Vn([i[a.wAp.MonthsFormat],i[a.wAp.MonthsStandalone]],t);return Vn(s,e)}(t,r,i)[n.getMonth()];case Xt.Days:return function Wn(n,t,e){const i=(0,a.cg1)(n),s=Vn([i[a.wAp.DaysFormat],i[a.wAp.DaysStandalone]],t);return Vn(s,e)}(t,r,i)[n.getDay()];case Xt.DayPeriods:const l=n.getHours(),d=n.getMinutes();if(s){const m=function Qn(n){const t=(0,a.cg1)(n);return xt(t),(t[a.wAp.ExtraData][2]||[]).map(i=>"string"==typeof i?lr(i):[lr(i[0]),lr(i[1])])}(t),y=function Jn(n,t,e){const i=(0,a.cg1)(n);xt(i);const s=Vn([i[a.wAp.ExtraData][0],i[a.wAp.ExtraData][1]],t)||[];return Vn(s,e)||[]}(t,r,i),C=m.findIndex(A=>{if(Array.isArray(A)){const[x,P]=A,F=l>=x.hours&&d>=x.minutes,U=l<P.hours||l===P.hours&&d<P.minutes;if(x.hours<P.hours){if(F&&U)return!0}else if(F||U)return!0}else if(A.hours===l&&A.minutes===d)return!0;return!1});if(-1!==C)return y[C]}return function Kn(n,t,e){const i=(0,a.cg1)(n),s=Vn([i[a.wAp.DayPeriodsFormat],i[a.wAp.DayPeriodsStandalone]],t);return Vn(s,e)}(t,r,i)[l<12?0:1];case Xt.Eras:return function ui(n,t){return Vn((0,a.cg1)(n)[a.wAp.Eras],t)}(t,i)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${e}`)}}(r,s,n,t,e,i)}}function yo(n){return function(t,e,i){const r=-1*i,s=Fe(e,Je.MinusSign),l=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case Gt.Short:return(r>=0?"+":"")+Ti(l,2,s)+Ti(Math.abs(r%60),2,s);case Gt.ShortGMT:return"GMT"+(r>=0?"+":"")+Ti(l,1,s);case Gt.Long:return"GMT"+(r>=0?"+":"")+Ti(l,2,s)+":"+Ti(Math.abs(r%60),2,s);case Gt.Extended:return 0===i?"Z":(r>=0?"+":"")+Ti(l,2,s)+":"+Ti(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}const Vo=0,Lr=4;function Me(n){return hi(n.getFullYear(),n.getMonth(),n.getDate()+(Lr-n.getDay()))}function Q(n,t=!1){return function(e,i){let r;if(t){const s=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,l=e.getDate();r=1+Math.floor((l+s)/7)}else{const s=Me(e),l=function wo(n){const t=hi(n,Vo,1).getDay();return hi(n,0,1+(t<=Lr?Lr:Lr+7)-t)}(s.getFullYear()),d=s.getTime()-l.getTime();r=1+Math.round(d/6048e5)}return Ti(r,n,Fe(i,Je.MinusSign))}}function Ie(n,t=!1){return function(e,i){return Ti(Me(e).getFullYear(),n,Fe(i,Je.MinusSign),t)}}const et={};function Ft(n,t){n=n.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function Le(n){return n instanceof Date&&!isNaN(n.valueOf())}let Tl=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=a.Yz7({token:n,factory:function(i){let r=null;return i?r=new i:(s=a.LFG(a.soG),r=new Jf(s)),r;var s},providedIn:"root"})}return n})();let Jf=(()=>{class n extends Tl{constructor(e){super(),this.locale=e}getPluralCategory(e,i){switch(Dn(i||this.locale)(e)){case Pe.Zero:return"zero";case Pe.One:return"one";case Pe.Two:return"two";case Pe.Few:return"few";case Pe.Many:return"many";default:return"other"}}static#e=this.\u0275fac=function(i){return new(i||n)(a.LFG(a.soG))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac})}return n})();function Bs(n,t,e){return(0,a.dwT)(n,t,e)}function Oa(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[r,s]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}const Il=/\s+/,oh=[];let as=(()=>{class n{constructor(e,i,r,s){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this.initialClasses=oh,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(Il):oh}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(Il):e}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const i of e)this._updateState(i,!0);else if(null!=e)for(const i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){const r=this.stateMap.get(e);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const i=e[0],r=e[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(e,i){(e=e.trim()).length>0&&e.split(Il).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static#e=this.\u0275fac=function(i){return new(i||n)(a.Y36(a.ZZ4),a.Y36(a.aQg),a.Y36(a.SBq),a.Y36(a.Qsj))};static#t=this.\u0275dir=a.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class ka{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Qi=(()=>{class n{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,s,l)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new ka(r.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)i.remove(null===s?void 0:s);else if(null!==s){const d=i.get(s);i.move(d,l),lh(d,r)}});for(let r=0,s=i.length;r<s;r++){const d=i.get(r).context;d.index=r,d.count=s,d.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{lh(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(a.Y36(a.s_b),a.Y36(a.Rgc),a.Y36(a.ZZ4))};static#t=this.\u0275dir=a.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function lh(n,t){n.context.$implicit=t.item}let Mi=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new Sy,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Mm("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Mm("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(a.Y36(a.s_b),a.Y36(a.Rgc))};static#t=this.\u0275dir=a.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class Sy{constructor(){this.$implicit=null,this.ngIf=null}}function Mm(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,a.AaK)(t)}'.`)}class ls{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let Pa=(()=>{class n{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews.push(e)}_matchCase(e){const i=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(e){if(this._defaultViews.length>0&&e!==this._defaultUsed){this._defaultUsed=e;for(const i of this._defaultViews)i.enforceState(e)}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=a.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0})}return n})(),Su=(()=>{class n{constructor(e,i,r){this.ngSwitch=r,r._addCase(),this._view=new ls(e,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static#e=this.\u0275fac=function(i){return new(i||n)(a.Y36(a.s_b),a.Y36(a.Rgc),a.Y36(Pa,9))};static#t=this.\u0275dir=a.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0})}return n})(),Do=(()=>{class n{constructor(e,i,r){this._ngEl=e,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,i){const[r,s]=e.split("."),l=-1===r.indexOf("-")?void 0:a.JOm.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,l):this._renderer.removeStyle(this._ngEl.nativeElement,r,l)}_applyChanges(e){e.forEachRemovedItem(i=>this._setStyle(i.key,null)),e.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),e.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}static#e=this.\u0275fac=function(i){return new(i||n)(a.Y36(a.SBq),a.Y36(a.aQg),a.Y36(a.Qsj))};static#t=this.\u0275dir=a.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}return n})(),Ji=(()=>{class n{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:l}=this;this._viewRef=i.createEmbeddedView(r,s,l?{injector:l}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}static#e=this.\u0275fac=function(i){return new(i||n)(a.Y36(a.s_b))};static#t=this.\u0275dir=a.lG2({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[a.TTD]})}return n})();function Us(n,t){return new a.vHH(2100,!1)}class Au{createSubscription(t,e){return(0,a.rg0)(()=>t.subscribe({next:e,error:i=>{throw i}}))}dispose(t){(0,a.rg0)(()=>t.unsubscribe())}}class Vr{createSubscription(t,e){return t.then(e,i=>{throw i})}dispose(t){}}const ch=new Vr,Mu=new Au;let La=(()=>{class n{constructor(e){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,i=>this._updateLatestValue(e,i))}_selectStrategy(e){if((0,a.QGY)(e))return ch;if((0,a.F4k)(e))return Mu;throw Us()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,i){e===this._obj&&(this._latestValue=i,this._ref.markForCheck())}static#e=this.\u0275fac=function(i){return new(i||n)(a.Y36(a.sBO,16))};static#t=this.\u0275pipe=a.Yjl({name:"async",type:n,pure:!1,standalone:!0})}return n})();const qr=/#/g;let _c=(()=>{class n{constructor(e){this._localization=e}transform(e,i,r){if(null==e)return"";if("object"!=typeof i||null===i)throw Us();return i[function mc(n,t,e,i){let r=`=${n}`;if(t.indexOf(r)>-1||(r=e.getPluralCategory(n,i),t.indexOf(r)>-1))return r;if(t.indexOf("other")>-1)return"other";throw new Error(`No plural message found for value "${n}"`)}(e,Object.keys(i),this._localization,r)].replace(qr,e.toString())}static#e=this.\u0275fac=function(i){return new(i||n)(a.Y36(Tl,16))};static#t=this.\u0275pipe=a.Yjl({name:"i18nPlural",type:n,pure:!0,standalone:!0})}return n})(),Xi=(()=>{class n{transform(e,i,r){if(null==e)return null;if(!this.supports(e))throw Us();return e.slice(i,r)}supports(e){return"string"==typeof e||Array.isArray(e)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275pipe=a.Yjl({name:"slice",type:n,pure:!1,standalone:!0})}return n})(),zn=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=a.oAB({type:n});static#n=this.\u0275inj=a.cJS({})}return n})();const Uo="browser";function Ho(n){return"server"===n}let cr=(()=>{class n{static#e=this.\u0275prov=(0,a.Yz7)({token:n,providedIn:"root",factory:()=>new jo((0,a.LFG)(_e),window)})}return n})();class jo{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function Go(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const l=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(l)return l}r=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){this.supportsScrolling()&&(this.window.history.scrollRestoration=t)}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Ts{}class fp extends he{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Lu extends fp{static makeCurrent(){!function re(n){ie||(ie=n)}(new Lu)}onAndCancel(t,e,i){return t.addEventListener(e,i),()=>{t.removeEventListener(e,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function Pm(){return Ac=Ac||document.querySelector("base"),Ac?Ac.getAttribute("href"):null}();return null==e?null:function Fy(n){Eh=Eh||document.createElement("a"),Eh.setAttribute("href",n);const t=Eh.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Ac=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Oa(document.cookie,t)}}let Eh,Ac=null,Fm=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac})}return n})();const Th=new a.OlP("EventManagerPlugins");let Lm=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(s=>s.supports(e)),!i)throw new a.vHH(5101,!1);return this._eventNameToPlugin.set(e,i),i}static#e=this.\u0275fac=function(i){return new(i||n)(a.LFG(Th),a.LFG(a.R0b))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac})}return n})();class Bu{constructor(t){this._doc=t}}const Mc="ng-app-id";let Bm=(()=>{class n{constructor(e,i,r,s={}){this.doc=e,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ho(s),this.resetHostNodes()}addStyles(e){for(const i of e)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(e){for(const i of e)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const e=this.styleNodesInDOM;e&&(e.forEach(i=>i.remove()),e.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(const i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){const i=this.styleRef;i.get(e)?.elements?.forEach(r=>r.remove()),i.delete(e)}collectServerRenderedStyles(){const e=this.doc.head?.querySelectorAll(`style[${Mc}="${this.appId}"]`);if(e?.length){const i=new Map;return e.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(e,i){const r=this.styleRef;if(r.has(e)){const s=r.get(e);return s.usage+=i,s.usage}return r.set(e,{usage:i,elements:[]}),i}getStyleElement(e,i){const r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===e)return r.delete(i),s.removeAttribute(Mc),s;{const l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=i,this.platformIsServer&&l.setAttribute(Mc,this.appId),l}}addStyleToHost(e,i){const r=this.getStyleElement(e,i);e.appendChild(r);const s=this.styleRef,l=s.get(i)?.elements;l?l.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||n)(a.LFG(_e),a.LFG(a.AFp),a.LFG(a.Ojb,8),a.LFG(a.Lbi))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac})}return n})();const Wa={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Co=/%COMP%/g,Qs=new a.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Hn(n,t){return t.map(e=>e.replace(Co,n))}let pa=(()=>{class n{constructor(e,i,r,s,l,d,f,m=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=l,this.platformId=d,this.ngZone=f,this.nonce=m,this.rendererByCompId=new Map,this.platformIsServer=Ho(d),this.defaultRenderer=new Ya(e,l,f,this.platformIsServer)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===a.ifc.ShadowDom&&(i={...i,encapsulation:a.ifc.Emulated});const r=this.getOrCreateRenderer(e,i);return r instanceof Hm?r.applyToHost(e):r instanceof Tr&&r.applyStyles(),r}getOrCreateRenderer(e,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const l=this.doc,d=this.ngZone,f=this.eventManager,m=this.sharedStylesHost,y=this.removeStylesOnCompDestroy,C=this.platformIsServer;switch(i.encapsulation){case a.ifc.Emulated:s=new Hm(f,m,i,this.appId,y,l,d,C);break;case a.ifc.ShadowDom:return new Za(f,m,e,i,l,d,this.nonce,C);default:s=new Tr(f,m,i,y,l,d,C)}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||n)(a.LFG(Lm),a.LFG(Bm),a.LFG(a.AFp),a.LFG(Qs),a.LFG(_e),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(a.Ojb))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac})}return n})();class Ya{constructor(t,e,i,r){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(Wa[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(Ih(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(Ih(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?this.doc.querySelector(t):t;if(!i)throw new a.vHH(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;const s=Wa[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const r=Wa[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(a.JOm.DashCase|a.JOm.Important)?t.style.setProperty(e,i,r&a.JOm.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&a.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){if("string"==typeof t&&!(t=V().getGlobalEventTarget(this.doc,t)))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(i))}decoratePreventDefault(t){return e=>{if("__ngUnwrap__"===e)return t;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))&&e.preventDefault()}}}function Ih(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Za extends Ya{constructor(t,e,i,r,s,l,d,f){super(t,s,l,f),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const m=Hn(r.id,r.styles);for(const y of m){const C=document.createElement("style");d&&C.setAttribute("nonce",d),C.textContent=y,this.shadowRoot.appendChild(C)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Tr extends Ya{constructor(t,e,i,r,s,l,d,f){super(t,s,l,d),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=f?Hn(f,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Hm extends Tr{constructor(t,e,i,r,s,l,d,f){const m=r+"-"+i.id;super(t,e,i,s,l,d,f,m),this.contentAttr=function gp(n){return"_ngcontent-%COMP%".replace(Co,n)}(m),this.hostAttr=function mp(n){return"_nghost-%COMP%".replace(Co,n)}(m)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}let Fl=(()=>{class n extends Bu{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}static#e=this.\u0275fac=function(i){return new(i||n)(a.LFG(_e))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac})}return n})();const jm=["alt","control","meta","shift"],ds={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Gm={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Sh=(()=>{class n extends Bu{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,r){const s=n.parseEventName(i),l=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>V().onAndCancel(e,s.domEventName,l))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let l="",d=i.indexOf("code");if(d>-1&&(i.splice(d,1),l="code."),jm.forEach(m=>{const y=i.indexOf(m);y>-1&&(i.splice(y,1),l+=m+".")}),l+=s,0!=i.length||0===s.length)return null;const f={};return f.domEventName=r,f.fullKey=l,f}static matchEventFullKeyCode(e,i){let r=ds[e.key]||e.key,s="";return i.indexOf("code.")>-1&&(r=e.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),jm.forEach(l=>{l!==r&&(0,Gm[l])(e)&&(s+=l+".")}),s+=r,s===i)}static eventCallback(e,i,r){return s=>{n.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}static#e=this.\u0275fac=function(i){return new(i||n)(a.LFG(_e))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac})}return n})();const pr=(0,a.eFA)(a._c5,"browser",[{provide:a.Lbi,useValue:Uo},{provide:a.g9A,useValue:function qt(){Lu.makeCurrent()},multi:!0},{provide:_e,useFactory:function vp(){return(0,a.RDi)(document),document},deps:[]}]),yp=new a.OlP(""),Ir=[{provide:a.rWj,useClass:class Ch{addToWindow(t){a.dqk.getAngularTestability=(i,r=!0)=>{const s=t.findTestabilityInTree(i,r);if(null==s)throw new a.vHH(5103,!1);return s},a.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),a.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),a.dqk.frameworkStabilizers||(a.dqk.frameworkStabilizers=[]),a.dqk.frameworkStabilizers.push(i=>{const r=a.dqk.getAllAngularTestabilities();let s=r.length,l=!1;const d=function(f){l=l||f,s--,0==s&&i(l)};r.forEach(f=>{f.whenStable(d)})})}findTestabilityInTree(t,e,i){return null==e?null:t.getTestability(e)??(i?V().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:a.lri,useClass:a.dDg,deps:[a.R0b,a.eoX,a.rWj]},{provide:a.dDg,useClass:a.dDg,deps:[a.R0b,a.eoX,a.rWj]}],To=[{provide:a.zSh,useValue:"root"},{provide:a.qLn,useFactory:function _p(){return new a.qLn},deps:[]},{provide:Th,useClass:Fl,multi:!0,deps:[_e,a.R0b,a.Lbi]},{provide:Th,useClass:Sh,multi:!0,deps:[_e]},pa,Bm,Lm,{provide:a.FYo,useExisting:pa},{provide:Ts,useClass:Fm,deps:[]},[]];let Hu=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:a.AFp,useValue:e.appId}]}}static#e=this.\u0275fac=function(i){return new(i||n)(a.LFG(yp,12))};static#t=this.\u0275mod=a.oAB({type:n});static#n=this.\u0275inj=a.cJS({providers:[...To,...Ir],imports:[zn,a.hGG]})}return n})(),He=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static#e=this.\u0275fac=function(i){return new(i||n)(a.LFG(_e))};static#t=this.\u0275prov=a.Yz7({token:n,factory:function(i){let r=null;return r=i?new i:function Ah(){return new He((0,a.LFG)(_e))}(),r},providedIn:"root"})}return n})();typeof window<"u"&&window;let Io=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=a.Yz7({token:n,factory:function(i){let r=null;return r=i?new(i||n):a.LFG(Rh),r},providedIn:"root"})}return n})(),Rh=(()=>{class n extends Io{constructor(e){super(),this._doc=e}sanitize(e,i){if(null==i)return null;switch(e){case a.q3G.NONE:return i;case a.q3G.HTML:return(0,a.qzn)(i,"HTML")?(0,a.z3N)(i):(0,a.EiD)(this._doc,String(i)).toString();case a.q3G.STYLE:return(0,a.qzn)(i,"Style")?(0,a.z3N)(i):i;case a.q3G.SCRIPT:if((0,a.qzn)(i,"Script"))return(0,a.z3N)(i);throw new a.vHH(5200,!1);case a.q3G.URL:return(0,a.qzn)(i,"URL")?(0,a.z3N)(i):(0,a.mCW)(String(i));case a.q3G.RESOURCE_URL:if((0,a.qzn)(i,"ResourceURL"))return(0,a.z3N)(i);throw new a.vHH(5201,!1);default:throw new a.vHH(5202,!1)}}bypassSecurityTrustHtml(e){return(0,a.JVY)(e)}bypassSecurityTrustStyle(e){return(0,a.L6k)(e)}bypassSecurityTrustScript(e){return(0,a.eBb)(e)}bypassSecurityTrustUrl(e){return(0,a.LAX)(e)}bypassSecurityTrustResourceUrl(e){return(0,a.pB0)(e)}static#e=this.\u0275fac=function(i){return new(i||n)(a.LFG(_e))};static#t=this.\u0275prov=a.Yz7({token:n,factory:function(i){let r=null;return r=i?new i:function xh(n){return new Rh(n.get(_e))}(a.LFG(a.zs3)),r},providedIn:"root"})}return n})();var si=L(6304),Qt=L(8645),At=L(2096),bi=L(5592),Rn=L(2459),Sr=L(3019),Ja=L(3093),qn=L(4664),rt=L(7398),zo=L(4552);class Xn extends Qt.x{constructor(t=1/0,e=1/0,i=zo.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:l}=this;e||(i.push(t),!r&&i.push(s.now()+l)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let l=0;l<s.length&&!t.closed;l+=i?1:2)t.next(s[l]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*t;if(t<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const l=e.now();let d=0;for(let f=1;f<i.length&&i[f]<=l;f+=2)d=f;d&&i.splice(0,d+1)}}}var Ar=L(3020);function ma(n,t,e){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=n):i=n??1/0,(0,Ar.B)({connector:()=>new Xn(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}const xc=(0,L(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var $i=L(9360),_i=L(8251);function dn(n,t){return(0,$i.e)((e,i)=>{let r=0;e.subscribe((0,_i.x)(i,s=>n.call(t,s,r++)&&i.next(s)))})}var tr=L(6232);function jn(n){return n<=0?()=>tr.E:(0,$i.e)((t,e)=>{let i=0;t.subscribe((0,_i.x)(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function Wo(n){return(0,$i.e)((t,e)=>{let i=!1;t.subscribe((0,_i.x)(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function Bl(n=Zu){return(0,$i.e)((t,e)=>{let i=!1;t.subscribe((0,_i.x)(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function Zu(){return new xc}var qo=L(2737);function _a(n,t){const e=arguments.length>=2;return i=>i.pipe(n?dn((r,s)=>n(r,s,i)):qo.y,jn(1),e?Wo(t):Bl(()=>new xc))}var Zr=L(4674);function Rc(n,t){return(0,Zr.m)(t)?(0,qn.w)(()=>n,t):(0,qn.w)(()=>n)}var So=L(5137),hn=L(2793);L(4097);var Ee=L(5861),oi=L(4303),mr=L(4537),B=L(9058),Hr=L(7879);const Ao=new Map,Hl={activated:!1,tokenObservers:[]},Qu={initialized:!1,enabled:!1};function ei(n){return Ao.get(n)||Object.assign({},Hl)}function Xa(){return Qu}const Ju="https://content-firebaseappcheck.googleapis.com/v1",el="exchangeDebugToken",Mp={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Ph{constructor(t,e,i,r,s){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,Ee.Z)(function*(){e.stop();try{e.pending=new B.BH,yield function Fc(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new B.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(i){e.retryPolicy(i)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const mn=new B.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Mo(n){if(!ei(n).activated)throw mn.create("use-before-activation",{appName:n.name})}function jl(n,t){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,Ee.Z)(function*({url:n,body:t},e){const i={"Content-Type":"application/json"},r=e.getImmediate({optional:!0});if(r){const C=yield r.getHeartbeatsHeader();C&&(i["X-Firebase-Client"]=C)}const s={method:"POST",body:JSON.stringify(t),headers:i};let l,d;try{l=yield fetch(n,s)}catch(C){throw mn.create("fetch-network-error",{originalErrorMessage:C?.message})}if(200!==l.status)throw mn.create("fetch-status-error",{httpStatus:l.status});try{d=yield l.json()}catch(C){throw mn.create("fetch-parse-error",{originalErrorMessage:C?.message})}const f=d.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw mn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});const m=1e3*Number(f[1]),y=Date.now();return{token:d.token,expireTimeMillis:y+m,issuedAtTimeMillis:y}})).apply(this,arguments)}function T(n,t){const{projectId:e,appId:i,apiKey:r}=n.options;return{url:`${Ju}/projects/${e}/apps/${i}:${el}?key=${r}`,body:{debug_token:t}}}const S="firebase-app-check-database",R=1,H="firebase-app-check-store";let se=null;function nr(){return(nr=(0,Ee.Z)(function*(n,t){const i=(yield function Te(){return se||(se=new Promise((n,t)=>{try{const e=indexedDB.open(S,R);e.onsuccess=i=>{n(i.target.result)},e.onerror=i=>{var r;t(mn.create("storage-open",{originalErrorMessage:null===(r=i.target.error)||void 0===r?void 0:r.message}))},e.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(H,{keyPath:"compositeKey"})}}catch(e){t(mn.create("storage-open",{originalErrorMessage:e?.message}))}}),se)}()).transaction(H,"readwrite"),s=i.objectStore(H).put({compositeKey:n,value:t});return new Promise((l,d)=>{s.onsuccess=f=>{l()},i.onerror=f=>{var m;d(mn.create("storage-set",{originalErrorMessage:null===(m=f.target.error)||void 0===m?void 0:m.message}))}})})).apply(this,arguments)}const Xs=new Hr.Yd("@firebase/app-check");function Qr(n,t){return(0,B.hl)()?function ct(n,t){return function tn(n,t){return nr.apply(this,arguments)}(function Ii(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{Xs.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function Lh(){return Xa().enabled}function nl(){return Rp.apply(this,arguments)}function Rp(){return(Rp=(0,Ee.Z)(function*(){const n=Xa();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const $y={error:"UNKNOWN_ERROR"};function TD(n){return B.US.encodeString(JSON.stringify(n),!1)}function fs(n){return Bh.apply(this,arguments)}function Bh(){return(Bh=(0,Ee.Z)(function*(n,t=!1){const e=n.app;Mo(e);const i=ei(e);let s,r=i.token;if(r&&!Xu(r)&&(i.token=void 0,r=void 0),!r){const f=yield i.cachedTokenPromise;f&&(Xu(f)?r=f:yield Qr(e,void 0))}if(!t&&r&&Xu(r))return{token:r.token};let d,l=!1;if(Lh()){i.exchangeTokenPromise||(i.exchangeTokenPromise=jl(T(e,yield nl()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),l=!0);const f=yield i.exchangeTokenPromise;return yield Qr(e,f),i.token=f,{token:f.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),l=!0),r=yield ei(e).exchangeTokenPromise}catch(f){"appCheck/throttled"===f.code?Xs.warn(f.message):Xs.error(f),s=f}return r?s?d=Xu(r)?{token:r.token,internalError:s}:qy(s):(d={token:r.token},i.token=r,yield Qr(e,r)):d=qy(s),l&&function zl(n,t){const e=ei(n).tokenObservers;for(const i of e)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch{}}(e,d),d})).apply(this,arguments)}function Uc(n){return zy.apply(this,arguments)}function zy(){return(zy=(0,Ee.Z)(function*(n){const t=n.app;Mo(t);const{provider:e}=ei(t);if(Lh()){const i=yield nl(),{token:r}=yield jl(T(t,i),n.heartbeatServiceProvider);return{token:r}}{const{token:i}=yield e.getToken();return{token:i}}})).apply(this,arguments)}function kp(n,t){const e=ei(n),i=e.tokenObservers.filter(r=>r.next!==t);0===i.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),e.tokenObservers=i}function Wy(n){const{app:t}=n,e=ei(t);let i=e.tokenRefresher;i||(i=function l1(n){const{app:t}=n;return new Ph((0,Ee.Z)(function*(){let i;if(i=ei(t).token?yield fs(n,!0):yield fs(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const e=ei(t);if(e.token){let i=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,e.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},Mp.RETRIAL_MIN_WAIT,Mp.RETRIAL_MAX_WAIT)}(n),e.tokenRefresher=i),!i.isRunning()&&e.isTokenAutoRefreshEnabled&&i.start()}function Xu(n){return n.expireTimeMillis-Date.now()>0}function qy(n){return{token:TD($y),error:n}}class Vh{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=ei(this.app);for(const e of t)kp(this.app,e.next);return Promise.resolve()}}const ND="app-check-internal";!function xD(){(0,oi._registerComponent)(new mr.wA("app-check",n=>function Pp(n,t){return new Vh(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(ND).initialize()})),(0,oi._registerComponent)(new mr.wA(ND,n=>function Qm(n){return{getToken:t=>fs(n,t),getLimitedUseToken:()=>Uc(n),addTokenListener:t=>function Op(n,t,e,i){const{app:r}=n,s=ei(r);if(s.tokenObservers=[...s.tokenObservers,{next:e,error:i,type:t}],s.token&&Xu(s.token)){const d=s.token;Promise.resolve().then(()=>{e({token:d.token}),Wy(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Wy(n))}(n,"INTERNAL",t),removeTokenListener:t=>kp(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,oi.registerVersion)("@firebase/app-check","0.8.0")}();class jh{constructor(){return(0,hn.vb)("app-check")}}typeof window<"u"&&window;var jc=L(120);const ad=new a.OlP("angularfire2.auth.use-emulator"),Gc=new a.OlP("angularfire2.auth.settings"),o_=new a.OlP("angularfire2.auth.tenant-id"),ya=new a.OlP("angularfire2.auth.langugage-code"),Vp=new a.OlP("angularfire2.auth.use-device-language"),Up=new a.OlP("angularfire.auth.persistence"),zh=(n,t,e,i,r,s,l,d)=>(0,si.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const f=t.runOutsideAngular(()=>n.auth());if(e&&f.useEmulator(...e),i&&(f.tenantId=i),f.languageCode=r,s&&f.useDeviceLanguage(),l)for(const[m,y]of Object.entries(l))f.settings[m]=y;return d&&f.setPersistence(d),f},[e,i,r,s,l,d]);let ld=(()=>{class n{constructor(e,i,r,s,l,d,f,m,y,C,A,x){const P=new Qt.x,F=(0,At.of)(void 0).pipe((0,Ja.Q)(l.outsideAngular),(0,qn.w)(()=>s.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,8977)))),(0,rt.U)(()=>(0,si.on)(e,s,i)),(0,rt.U)(U=>zh(U,s,d,m,y,C,f,A)),ma({bufferSize:1,refCount:!1}));if(Ho(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,At.of)(null);else{F.pipe(_a()).subscribe();const ee=F.pipe((0,qn.w)(ce=>ce.getRedirectResult().then(Ne=>Ne,()=>null)),hn.iC,ma({bufferSize:1,refCount:!1})),oe=F.pipe((0,qn.w)(ce=>new bi.y(Ne=>({unsubscribe:s.runOutsideAngular(()=>ce.onAuthStateChanged(Be=>Ne.next(Be),Be=>Ne.error(Be),()=>Ne.complete()))})))),te=F.pipe((0,qn.w)(ce=>new bi.y(Ne=>({unsubscribe:s.runOutsideAngular(()=>ce.onIdTokenChanged(Be=>Ne.next(Be),Be=>Ne.error(Be),()=>Ne.complete()))}))));this.authState=ee.pipe(Rc(oe),(0,So.R)(l.outsideAngular),(0,Ja.Q)(l.insideAngular)),this.user=ee.pipe(Rc(te),(0,So.R)(l.outsideAngular),(0,Ja.Q)(l.insideAngular)),this.idToken=this.user.pipe((0,qn.w)(ce=>ce?(0,Rn.D)(ce.getIdToken()):(0,At.of)(null))),this.idTokenResult=this.user.pipe((0,qn.w)(ce=>ce?(0,Rn.D)(ce.getIdTokenResult()):(0,At.of)(null))),this.credential=(0,Sr.T)(ee,P,this.authState.pipe(dn(ce=>!ce))).pipe((0,rt.U)(ce=>ce?.user?ce:null),(0,So.R)(l.outsideAngular),(0,Ja.Q)(l.insideAngular))}return(0,si.pX)(this,F,s,{spy:{apply:(U,ee,oe)=>{(U.startsWith("signIn")||U.startsWith("createUser"))&&oe.then(te=>P.next(te))}}})}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(si.Dh),a.LFG(si.xv,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(hn.HU),a.LFG(ad,8),a.LFG(Gc,8),a.LFG(o_,8),a.LFG(ya,8),a.LFG(Vp,8),a.LFG(Up,8),a.LFG(jh,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),t0=(()=>{class n{constructor(){jc.Z.registerVersion("angularfire",hn.q4.full,"auth-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[ld]}),n})();var Mr=L(6321);class a_{constructor(t,e){this._delegate=t,this.firebase=e,(0,oi._addComponent)(t,new mr.wA("app-compat",()=>this,"PUBLIC")),this.container=t.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this._delegate.automaticDataCollectionEnabled=t}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(t=>{this._delegate.checkDestroyed(),t()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,oi.deleteApp)(this._delegate)))}_getService(t,e=oi._DEFAULT_ENTRY_NAME){var i;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(t);return!r.isInitialized()&&"EXPLICIT"===(null===(i=r.getComponent())||void 0===i?void 0:i.instantiationMode)&&r.initialize(),r.getImmediate({identifier:e})}_removeServiceInstance(t,e=oi._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(t).clearInstance(e)}_addComponent(t){(0,oi._addComponent)(this._delegate,t)}_addOrOverwriteComponent(t){(0,oi._addOrOverwriteComponent)(this._delegate,t)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const xi=new B.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Gp=function jp(){const n=function $c(n){const t={},e={__esModule:!0,initializeApp:function s(m,y={}){const C=oi.initializeApp(m,y);if((0,B.r3)(t,C.name))return t[C.name];const A=new n(C,e);return t[C.name]=A,A},app:r,registerVersion:oi.registerVersion,setLogLevel:oi.setLogLevel,onLog:oi.onLog,apps:null,SDK_VERSION:oi.SDK_VERSION,INTERNAL:{registerComponent:function d(m){const y=m.name,C=y.replace("-compat","");if(oi._registerComponent(m)&&"PUBLIC"===m.type){const A=(x=r())=>{if("function"!=typeof x[C])throw xi.create("invalid-app-argument",{appName:y});return x[C]()};void 0!==m.serviceProps&&(0,B.ZB)(A,m.serviceProps),e[C]=A,n.prototype[C]=function(...x){return this._getService.bind(this,y).apply(this,m.multipleInstances?x:[])}}return"PUBLIC"===m.type?e[C]:null},removeApp:function i(m){delete t[m]},useAsService:function f(m,y){return"serverAuth"===y?null:y},modularAPIs:oi}};function r(m){if(!(0,B.r3)(t,m=m||oi._DEFAULT_ENTRY_NAME))throw xi.create("no-app",{appName:m});return t[m]}return e.default=e,Object.defineProperty(e,"apps",{get:function l(){return Object.keys(t).map(m=>t[m])}}),r.App=n,e}(a_);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:jp,extendNamespace:function t(e){(0,B.ZB)(n,e)},createSubscribe:B.ne,ErrorFactory:B.LL,deepExtend:B.ZB}),n}(),Jr=new Hr.Yd("@firebase/app-compat");if((0,B.jU)()&&void 0!==self.firebase){Jr.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const n=self.firebase.SDK_VERSION;n&&n.indexOf("LITE")>=0&&Jr.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const FD=Gp;!function r0(n){(0,oi.registerVersion)("@firebase/app-compat","0.2.19",n)}();const l_="firebasestorage.googleapis.com",b="storageBucket";class M extends B.ZR{constructor(t,e,i=0){super(Y(t),`Firebase Storage: ${e} (${Y(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,M.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Y(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var O=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(O||{});function Y(n){return"storage/"+n}function ue(){return new M(O.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function no(){return new M(O.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function cd(){return new M(O.CANCELED,"User canceled the upload/download.")}function Wh(){return new M(O.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Wl(n){return new M(O.INVALID_ARGUMENT,n)}function u_(){return new M(O.APP_DELETED,"The Firebase app was deleted.")}function a0(n){return new M(O.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function qc(n,t){return new M(O.INVALID_FORMAT,"String does not match format '"+n+"': "+t)}function hd(n){throw new M(O.INTERNAL_ERROR,"Internal error: "+n)}class Xr{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let i;try{i=Xr.makeFromUrl(t,e)}catch{return new Xr(t,"")}if(""===i.path)return i;throw function ud(n){return new M(O.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(t)}static makeFromUrl(t,e){let i=null;const r="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+r+"(/(.*))?$","i");function m(ce){ce.path_=decodeURIComponent(ce.path)}const C=e.replace(/[.]/g,"\\."),te=[{regex:d,indices:{bucket:1,path:3},postModify:function s(ce){"/"===ce.path.charAt(ce.path.length-1)&&(ce.path_=ce.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${C}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:m},{regex:new RegExp(`^https?://${e===l_?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:m}];for(let ce=0;ce<te.length;ce++){const Ne=te[ce],Be=Ne.regex.exec(t);if(Be){let tt=Be[Ne.indices.path];tt||(tt=""),i=new Xr(Be[Ne.indices.bucket],tt),Ne.postModify(i);break}}if(null==i)throw function Wc(n){return new M(O.INVALID_URL,"Invalid URL '"+n+"'.")}(t);return i}}class LD{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function ql(n){return"string"==typeof n||n instanceof String}function UD(n){return l0()&&n instanceof Blob}function l0(){return typeof Blob<"u"&&!(0,B.UG)()}function HD(n,t,e,i){if(i<t)throw Wl(`Invalid value for '${n}'. Expected ${t} or greater.`);if(i>e)throw Wl(`Invalid value for '${n}'. Expected ${e} or less.`)}function fd(n,t,e){let i=t;return null==e&&(i=`https://${t}`),`${e}://${i}/v0${n}`}function d_(n){const t=encodeURIComponent;let e="?";for(const i in n)n.hasOwnProperty(i)&&(e=e+(t(i)+"=")+t(n[i])+"&");return e=e.slice(0,-1),e}var $p=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}($p||{});function jD(n,t){const e=n>=500&&n<600,r=-1!==[408,429].indexOf(n),s=-1!==t.indexOf(n);return e||r||s}class f1{constructor(t,e,i,r,s,l,d,f,m,y,C,A=!0){this.url_=t,this.method_=e,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=l,this.callback_=d,this.errorCallback_=f,this.timeout_=m,this.progressCallback_=y,this.connectionFactory_=C,this.retry=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,P)=>{this.resolve_=x,this.reject_=P,this.start_()})}start_(){const e=(i,r)=>{const s=this.resolve_,l=this.reject_,d=r.connection;if(r.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());!function ZO(n){return void 0!==n}(f)?s():s(f)}catch(f){l(f)}else if(null!==d){const f=ue();f.serverResponse=d.getErrorText(),l(this.errorCallback_?this.errorCallback_(d,f):f)}else l(r.canceled?this.appDelete_?u_():cd():no())};this.canceled_?e(0,new h_(!1,null,!0)):this.backoffId_=function BD(n,t,e){let i=1,r=null,s=null,l=!1,d=0;function f(){return 2===d}let m=!1;function y(...U){m||(m=!0,t.apply(null,U))}function C(U){r=setTimeout(()=>{r=null,n(x,f())},U)}function A(){s&&clearTimeout(s)}function x(U,...ee){if(m)return void A();if(U)return A(),void y.call(null,U,...ee);if(f()||l)return A(),void y.call(null,U,...ee);let te;i<64&&(i*=2),1===d?(d=2,te=0):te=1e3*(i+Math.random()),C(te)}let P=!1;function F(U){P||(P=!0,A(),!m&&(null!==r?(U||(d=2),clearTimeout(r),C(0)):U||(d=1)))}return C(0),s=setTimeout(()=>{l=!0,F(!0)},e),F}((i,r)=>{if(r)return void i(!1,new h_(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const l=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(l),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(l),this.pendingConnection_=null;const d=s.getErrorCode()===$p.NO_ERROR,f=s.getStatus();if(!d||jD(f,this.additionalRetryCodes_)&&this.retry){const y=s.getErrorCode()===$p.ABORT;return void i(!1,new h_(!1,null,y))}const m=-1!==this.successCodes_.indexOf(f);i(!0,new h_(m,s))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function YO(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class h_{constructor(t,e,i){this.wasSuccessCode=t,this.connection=e,this.canceled=!!i}}function u0(...n){const t=function $D(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==t){const e=new t;for(let i=0;i<n.length;i++)e.append(n[i]);return e.getBlob()}if(l0())return new Blob(n);throw new M(O.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const As={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class WD{constructor(t,e){this.data=t,this.contentType=e||null}}function d0(n,t){switch(n){case As.RAW:return new WD(_1(t));case As.BASE64:case As.BASE64URL:return new WD(v1(n,t));case As.DATA_URL:return new WD(function y1(n){const t=new qD(n);return t.base64?v1(As.BASE64,t.rest):function KO(n){let t;try{t=decodeURIComponent(n)}catch{throw qc(As.DATA_URL,"Malformed data URL.")}return _1(t)}(t.rest)}(t),function h0(n){return new qD(n).contentType}(t))}throw ue()}function _1(n){const t=[];for(let e=0;e<n.length;e++){let i=n.charCodeAt(e);i<=127?t.push(i):i<=2047?t.push(192|i>>6,128|63&i):55296==(64512&i)?e<n.length-1&&56320==(64512&n.charCodeAt(e+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++e),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):t.push(239,191,189):56320==(64512&i)?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(t)}function v1(n,t){switch(n){case As.BASE64:{const r=-1!==t.indexOf("-"),s=-1!==t.indexOf("_");if(r||s)throw qc(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case As.BASE64URL:{const r=-1!==t.indexOf("+"),s=-1!==t.indexOf("/");if(r||s)throw qc(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=function zD(n){if(typeof atob>"u")throw function o0(n){return new M(O.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(t)}catch(r){throw r.message.includes("polyfill")?r:qc(n,"Invalid character found")}const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}class qD{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw qc(As.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=e[1]||null;null!=i&&(this.base64=function YD(n,t){return n.length>=t.length&&n.substring(n.length-t.length)===t}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}class io{constructor(t,e){let i=0,r="";UD(t)?(this.data_=t,i=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(t,e){if(UD(this.data_)){const r=function m1(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}(this.data_,t,e);return null===r?null:new io(r)}{const i=new Uint8Array(this.data_.buffer,t,e-t);return new io(i,!0)}}static getBlob(...t){if(l0()){const e=t.map(i=>i instanceof io?i.data_:i);return new io(u0.apply(null,e))}{const e=t.map(l=>ql(l)?d0(As.RAW,l).data:l.data_);let i=0;e.forEach(l=>{i+=l.byteLength});const r=new Uint8Array(i);let s=0;return e.forEach(l=>{for(let d=0;d<l.length;d++)r[s++]=l[d]}),new io(r,!0)}}uploadData(){return this.data_}}function ZD(n){let t;try{t=JSON.parse(n)}catch{return null}return function h1(n){return"object"==typeof n&&!Array.isArray(n)}(t)?t:null}function w1(n){const t=n.lastIndexOf("/",n.length-2);return-1===t?n:n.slice(t+1)}function KD(n,t){return t}class ro{constructor(t,e,i,r){this.server=t,this.local=e||t,this.writable=!!i,this.xform=r||KD}}let Yc=null;function qh(){if(Yc)return Yc;const n=[];n.push(new ro("bucket")),n.push(new ro("generation")),n.push(new ro("metageneration")),n.push(new ro("name","fullPath",!0));const e=new ro("name");e.xform=function t(s,l){return function f0(n){return!ql(n)||n.length<2?n:w1(n)}(l)},n.push(e);const r=new ro("size");return r.xform=function i(s,l){return void 0!==l?Number(l):l},n.push(r),n.push(new ro("timeCreated")),n.push(new ro("updated")),n.push(new ro("md5Hash",null,!0)),n.push(new ro("cacheControl",null,!0)),n.push(new ro("contentDisposition",null,!0)),n.push(new ro("contentEncoding",null,!0)),n.push(new ro("contentLanguage",null,!0)),n.push(new ro("contentType",null,!0)),n.push(new ro("metadata","customMetadata",!0)),Yc=n,Yc}function QD(n,t,e){const i=ZD(t);return null===i?null:function D1(n,t,e){const i={type:"file"},r=e.length;for(let s=0;s<r;s++){const l=e[s];i[l.local]=l.xform(i,t[l.server])}return function b1(n,t){Object.defineProperty(n,"ref",{get:function e(){const s=new Xr(n.bucket,n.fullPath);return t._makeStorageReference(s)}})}(i,n),i}(n,i,e)}function JD(n,t){const e={},i=t.length;for(let r=0;r<i;r++){const s=t[r];s.writable&&(e[s.server]=n[s.local])}return JSON.stringify(e)}const E1="prefixes",C1="items";class ps{constructor(t,e,i,r){this.url=t,this.method=e,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function so(n){if(!n)throw ue()}function p0(n,t){return function e(i,r){const s=QD(n,r,t);return so(null!==s),s}}function zp(n){return function t(e,i){let r;return r=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?function It(){return new M(O.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function Et(){return new M(O.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===e.getStatus()?function Xe(n){return new M(O.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===e.getStatus()?function Si(n){return new M(O.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):i,r.status=e.getStatus(),r.serverResponse=i.serverResponse,r}}function p_(n){const t=zp(n);return function e(i,r){let s=t(i,r);return 404===i.getStatus()&&(s=function Ye(n){return new M(O.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=r.serverResponse,s}}function T1(n,t,e){const r=fd(t.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new ps(r,"GET",p0(n,e),l);return d.errorHandler=p_(t),d}function I1(n,t,e,i,r){const s={};s.prefix=t.isRoot?"":t.path+"/",e&&e.length>0&&(s.delimiter=e),i&&(s.pageToken=i),r&&(s.maxResults=r);const d=fd(t.bucketOnlyServerUrl(),n.host,n._protocol),m=n.maxOperationRetryTime,y=new ps(d,"GET",function ek(n,t){return function e(i,r){const s=function XO(n,t,e){const i=ZD(e);return null===i?null:function JO(n,t,e){const i={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[E1])for(const r of e[E1]){const s=r.replace(/\/$/,""),l=n._makeStorageReference(new Xr(t,s));i.prefixes.push(l)}if(e[C1])for(const r of e[C1]){const s=n._makeStorageReference(new Xr(t,r.name));i.items.push(s)}return i}(n,t,i)}(n,t,r);return so(null!==s),s}}(n,t.bucket),m);return y.urlParams=s,y.errorHandler=zp(t),y}function Yl(n,t,e){const i=Object.assign({},e);return i.fullPath=n.path,i.size=t.size(),i.contentType||(i.contentType=function g0(n,t){return n&&n.contentType||t&&t.type()||"application/octet-stream"}(null,t)),i}class g_{constructor(t,e,i,r){this.current=t,this.total=e,this.finalized=!!i,this.metadata=r||null}}function m0(n,t){let e=null;try{e=n.getResponseHeader("X-Goog-Upload-Status")}catch{so(!1)}return so(!!e&&-1!==(t||["active"]).indexOf(e)),e}const XD={STATE_CHANGED:"state_changed"},Ms={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function M1(n){switch(n){case"running":case"pausing":case"canceling":return Ms.RUNNING;case"paused":return Ms.PAUSED;case"success":return Ms.SUCCESS;case"canceled":return Ms.CANCELED;default:return Ms.ERROR}}class gV{constructor(t,e,i){if(function VD(n){return"function"==typeof n}(t)||null!=e||null!=i)this.next=t,this.error=e??void 0,this.complete=i??void 0;else{const s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Zh(n){return(...t)=>{Promise.resolve().then(()=>n(...t))}}let N1=null;class ok{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=$p.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=$p.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=$p.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,i,r){if(this.sent_)throw hd("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw hd("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw hd("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw hd("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw hd("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}class ak extends ok{initXhr(){this.xhr_.responseType="text"}}function il(){return N1?N1():new ak}class O1{constructor(t,e,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=i,this._mappings=qh(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(O.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(jD(r.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();r=no()}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(O.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,i])=>{switch(this._state){case"running":t(e,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((t,e)=>{const i=function A1(n,t,e,i,r){const s=t.bucketOnlyServerUrl(),l=Yl(t,i,r),d={name:l.fullPath},f=fd(s,n.host,n._protocol),y={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},C=JD(l,e),P=new ps(f,"POST",function x(F){let U;m0(F);try{U=F.getResponseHeader("X-Goog-Upload-URL")}catch{so(!1)}return so(ql(U)),U},n.maxUploadRetryTime);return P.urlParams=d,P.headers=y,P.body=C,P.errorHandler=zp(t),P}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,il,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,i)=>{const r=function fV(n,t,e,i){const f=new ps(e,"POST",function s(m){const y=m0(m,["active","final"]);let C=null;try{C=m.getResponseHeader("X-Goog-Upload-Size-Received")}catch{so(!1)}C||so(!1);const A=Number(C);return so(!isNaN(A)),new g_(A,i.size(),"final"===y)},n.maxUploadRetryTime);return f.headers={"X-Goog-Upload-Command":"query"},f.errorHandler=zp(t),f}(this._ref.storage,this._ref._location,t,this._blob),s=this._ref.storage._makeRequest(r,il,e,i);this._request=s,s.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=262144*this._chunkMultiplier,e=new g_(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let l;try{l=function pV(n,t,e,i,r,s,l,d){const f=new g_(0,0);if(l?(f.current=l.current,f.total=l.total):(f.current=0,f.total=i.size()),i.size()!==f.total)throw function dd(){return new M(O.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const m=f.total-f.current;let y=m;r>0&&(y=Math.min(y,r));const C=f.current;let x="";x=0===y?"finalize":m===y?"upload, finalize":"upload";const P={"X-Goog-Upload-Command":x,"X-Goog-Upload-Offset":`${f.current}`},F=i.slice(C,C+y);if(null===F)throw Wh();const te=new ps(e,"POST",function U(ce,Ne){const Be=m0(ce,["active","final"]),ot=f.current+y,tt=i.size();let _t;return _t="final"===Be?p0(t,s)(ce,Ne):null,new g_(ot,tt,"final"===Be,_t)},t.maxUploadRetryTime);return te.headers=P,te.body=F.uploadData(),te.progressCallback=d||null,te.errorHandler=zp(n),te}(this._ref._location,this._ref.storage,i,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(f){return this._error=f,void this._transition("error")}const d=this._ref.storage._makeRequest(l,il,r,s,!1);this._request=d,d.getPromise().then(f=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(f.current),f.finalized?(this._metadata=f.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const i=T1(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,il,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const i=function Wp(n,t,e,i,r){const s=t.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},f=function d(){let te="";for(let ce=0;ce<2;ce++)te+=Math.random().toString().slice(2);return te}();l["Content-Type"]="multipart/related; boundary="+f;const m=Yl(t,i,r),y=JD(m,e),x=io.getBlob("--"+f+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+y+"\r\n--"+f+"\r\nContent-Type: "+m.contentType+"\r\n\r\n",i,"\r\n--"+f+"--");if(null===x)throw Wh();const P={name:m.fullPath},F=fd(s,n.host,n._protocol),ee=n.maxUploadRetryTime,oe=new ps(F,"POST",p0(n,e),ee);return oe.urlParams=P,oe.headers=l,oe.body=x.uploadData(),oe.errorHandler=zp(t),oe}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,il,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=cd(),this._state=t,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const t=M1(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,i,r){const s=new gV(e||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch(M1(this._state)){case Ms.SUCCESS:Zh(this._resolve.bind(null,this.snapshot))();break;case Ms.CANCELED:case Ms.ERROR:Zh(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(M1(this._state)){case Ms.RUNNING:case Ms.PAUSED:t.next&&Zh(t.next.bind(t,this.snapshot))();break;case Ms.SUCCESS:t.complete&&Zh(t.complete.bind(t))();break;default:t.error&&Zh(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}class Zo{constructor(t,e){this._service=t,this._location=e instanceof Xr?e:Xr.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new Zo(t,e)}get root(){const t=new Xr(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return w1(this._location.path)}get storage(){return this._service}get parent(){const t=function QO(n){if(0===n.length)return null;const t=n.lastIndexOf("/");return-1===t?"":n.slice(0,t)}(this._location.path);if(null===t)return null;const e=new Xr(this._location.bucket,t);return new Zo(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw a0(t)}}function F1(n,t,e){return nE.apply(this,arguments)}function nE(){return(nE=(0,Ee.Z)(function*(n,t,e){const r=yield iE(n,{pageToken:e});t.prefixes.push(...r.prefixes),t.items.push(...r.items),null!=r.nextPageToken&&(yield F1(n,t,r.nextPageToken))})).apply(this,arguments)}function iE(n,t){null!=t&&"number"==typeof t.maxResults&&HD("options.maxResults",1,1e3,t.maxResults);const e=t||{},i=I1(n.storage,n._location,"/",e.pageToken,e.maxResults);return n.storage.makeRequestWithTokens(i,il)}function m_(n){n._throwIfRoot("getDownloadURL");const t=function nk(n,t,e){const r=fd(t.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new ps(r,"GET",function tk(n,t){return function e(i,r){const s=QD(n,r,t);return so(null!==s),function Yh(n,t,e,i){const r=ZD(t);if(null===r||!ql(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const l=encodeURIComponent;return s.split(",").map(m=>{const C=n.fullPath;return fd("/b/"+l(n.bucket)+"/o/"+l(C),e,i)+d_({alt:"media",token:m})})[0]}(s,r,n.host,n._protocol)}}(n,e),l);return d.errorHandler=p_(t),d}(n.storage,n._location,qh());return n.storage.makeRequestWithTokens(t,il).then(e=>{if(null===e)throw function s0(){return new M(O.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return e})}function qp(n,t){const e=function hV(n,t){const e=t.split("/").filter(i=>i.length>0).join("/");return 0===n.length?e:n+"/"+e}(n._location.path,t),i=new Xr(n._location.bucket,e);return new Zo(n.storage,i)}function v0(n,t){if(n instanceof y0){const e=n;if(null==e._bucket)throw function c_(){return new M(O.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+b+"' property when initializing the app?")}();const i=new Zo(e,e._bucket);return null!=t?v0(i,t):i}return void 0!==t?qp(n,t):n}function rE(n,t){if(t&&function L1(n){return/^[A-Za-z]+:\/\//.test(n)}(t)){if(n instanceof y0)return function B1(n,t){return new Zo(n,t)}(n,t);throw Wl("To use ref(service, url), the first argument must be a Storage instance.")}return v0(n,t)}function V1(n,t){const e=t?.[b];return null==e?null:Xr.makeFromBucketSpec(e,n)}class y0{constructor(t,e,i,r,s){this.app=t,this._authProvider=e,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=l_,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Xr.makeFromBucketSpec(r,this._host):V1(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?Xr.makeFromBucketSpec(this._url,t):V1(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){HD("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){HD("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return(0,Ee.Z)(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const e=t._authProvider.getImmediate({optional:!0});if(e){const i=yield e.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var t=this;return(0,Ee.Z)(function*(){const e=t._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Zo(this,t)}_makeRequest(t,e,i,r,s=!0){if(this._deleted)return new LD(u_());{const l=function g1(n,t,e,i,r,s,l=!0){const d=d_(n.urlParams),f=n.url+d,m=Object.assign({},n.headers);return function c0(n,t){t&&(n["X-Firebase-GMPID"]=t)}(m,t),function GD(n,t){null!==t&&t.length>0&&(n.Authorization="Firebase "+t)}(m,e),function p1(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}(m,s),function f_(n,t){null!==t&&(n["X-Firebase-AppCheck"]=t)}(m,i),new f1(f,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,l)}(t,this._appId,i,r,e,this._firebaseVersion,s);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(t,e){var i=this;return(0,Ee.Z)(function*(){const[r,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(t,e,r,s).getPromise()})()}}const __="@firebase/storage";function v_(n,t){return rE(n=(0,B.m9)(n),t)}function G1(n,{instanceIdentifier:t}){const e=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new y0(e,i,r,t,oi.SDK_VERSION)}!function Yp(){(0,oi._registerComponent)(new mr.wA("storage",G1,"PUBLIC").setMultipleInstances(!0)),(0,oi.registerVersion)(__,"0.11.2",""),(0,oi.registerVersion)(__,"0.11.2","esm2017")}();class E0{constructor(t,e,i){this._delegate=t,this.task=e,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class $1{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new E0(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(i=>{if(t)return t(new E0(i,this,this._ref))},e)}on(t,e,i,r){let s;return e&&(s="function"==typeof e?l=>e(new E0(l,this,this._ref)):{next:e.next?l=>e.next(new E0(l,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,s,i||void 0,r||void 0)}}class z1{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new rl(t,this._service))}get items(){return this._delegate.items.map(t=>new rl(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class rl{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=function Zl(n,t){return qp(n,t)}(this._delegate,t);return new rl(e,this.storage)}get root(){return new rl(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new rl(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new $1(function j1(n,t,e){return function P1(n,t,e){return n._throwIfRoot("uploadBytesResumable"),new O1(n,new io(t),e)}(n=(0,B.m9)(n),t,e)}(this._delegate,t,e),this)}putString(t,e=As.RAW,i){this._throwIfRoot("putString");const r=d0(e,t),s=Object.assign({},i);return null==s.contentType&&null!=r.contentType&&(s.contentType=r.contentType),new $1(new O1(this._delegate,new io(r.data,!0),s),this)}listAll(){return function b0(n){return function uk(n){const t={prefixes:[],items:[]};return F1(n,t).then(()=>t)}(n=(0,B.m9)(n))}(this._delegate).then(t=>new z1(t,this.storage))}list(t){return function sE(n,t){return iE(n=(0,B.m9)(n),t)}(this._delegate,t||void 0).then(e=>new z1(e,this.storage))}getMetadata(){return function Kh(n){return function mV(n){n._throwIfRoot("getMetadata");const t=T1(n.storage,n._location,qh());return n.storage.makeRequestWithTokens(t,il)}(n=(0,B.m9)(n))}(this._delegate)}updateMetadata(t){return function fk(n,t){return function _V(n,t){n._throwIfRoot("updateMetadata");const e=function ik(n,t,e,i){const s=fd(t.fullServerUrl(),n.host,n._protocol),d=JD(e,i),m=n.maxOperationRetryTime,y=new ps(s,"PATCH",p0(n,i),m);return y.headers={"Content-Type":"application/json; charset=utf-8"},y.body=d,y.errorHandler=p_(t),y}(n.storage,n._location,t,qh());return n.storage.makeRequestWithTokens(e,il)}(n=(0,B.m9)(n),t)}(this._delegate,t)}getDownloadURL(){return function pk(n){return m_(n=(0,B.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function oE(n){return function Yn(n){n._throwIfRoot("deleteObject");const t=function rk(n,t){const i=fd(t.fullServerUrl(),n.host,n._protocol),d=new ps(i,"DELETE",function l(f,m){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=p_(t),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(t,il)}(n=(0,B.m9)(n))}(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw a0(t)}}class lE{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(W1(t))throw Wl("ref() expected a child path but got a URL, use refFromURL instead.");return new rl(v_(this._delegate,t),this)}refFromURL(t){if(!W1(t))throw Wl("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Xr.makeFromUrl(t,this._delegate.host)}catch{throw Wl("refFromUrl() expected a valid full URL but got an invalid one.")}return new rl(v_(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,i={}){!function D0(n,t,e,i={}){!function U1(n,t,e,i={}){n.host=`${t}:${e}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:(0,B.Sg)(r,n.app.options.projectId))}(n,t,e,i)}(this._delegate,t,e,i)}}function W1(n){return/^[A-Za-z]+:\/\//.test(n)}function gk(n,{instanceIdentifier:t}){const e=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:t});return new lE(e,i)}function vk(n){const t=function _k(n){return new bi.y(t=>{const e=l=>t.next(l);e(n.snapshot);const s=n.on("state_changed",e);return n.then(l=>{e(l),t.complete()},l=>{e(n.snapshot),(l=>{t.error(l)})(l)}),function(){s()}}).pipe(function Hp(n,t=Mr.z){return(0,$i.e)((e,i)=>{let r=null,s=null,l=null;const d=()=>{if(r){r.unsubscribe(),r=null;const m=s;s=null,i.next(m)}};function f(){const m=l+n,y=t.now();if(y<m)return r=this.schedule(void 0,m-y),void i.add(r);d()}e.subscribe((0,_i.x)(i,m=>{s=m,l=t.now(),r||(r=t.schedule(f,n),i.add(r))},()=>{d(),i.complete()},void 0,()=>{s=r=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,rt.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function uE(n){return{getDownloadURL:()=>(0,At.of)(void 0).pipe(hn.fc,(0,qn.w)(()=>n.getDownloadURL()),hn.iC),getMetadata:()=>(0,At.of)(void 0).pipe(hn.fc,(0,qn.w)(()=>n.getMetadata()),hn.iC),delete:()=>(0,Rn.D)(n.delete()),child:t=>uE(n.child(t)),updateMetadata:t=>(0,Rn.D)(n.updateMetadata(t)),put:(t,e)=>vk(n.put(t,e)),putString:(t,e,i)=>vk(n.putString(t,e,i)),list:t=>(0,Rn.D)(n.list(t)),listAll:()=>(0,Rn.D)(n.listAll())}}!function mk(n){const t={TaskState:Ms,TaskEvent:XD,StringFormat:As,Storage:lE,Reference:rl};n.INTERNAL.registerComponent(new mr.wA("storage-compat",gk,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(FD);const C0=new a.OlP("angularfire2.storageBucket"),yk=new a.OlP("angularfire2.storage.maxUploadRetryTime"),dE=new a.OlP("angularfire2.storage.maxOperationRetryTime"),hE=new a.OlP("angularfire2.storage.use-emulator");let Zp=(()=>{class n{constructor(e,i,r,s,l,d,f,m,y,C){const A=(0,si.on)(e,l,i);this.storage=(0,si.cc)(`${A.name}.storage.${r}`,"AngularFireStorage",A.name,()=>{const x=l.runOutsideAngular(()=>A.storage(r||void 0)),P=y;return P&&x.useEmulator(...P),f&&x.setMaxUploadRetryTime(f),m&&x.setMaxOperationRetryTime(m),x},[f,m])}ref(e){return uE(this.storage.ref(e))}refFromURL(e){return uE(this.storage.refFromURL(e))}upload(e,i,r){return uE(this.storage.ref(e)).put(i,r)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(si.Dh),a.LFG(si.xv,8),a.LFG(C0,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(hn.HU),a.LFG(yk,8),a.LFG(dE,8),a.LFG(hE,8),a.LFG(jh,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),fE=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})(),y_=(()=>{class n{constructor(){jc.Z.registerVersion("angularfire",hn.q4.full,"gcs-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[Zp],imports:[fE]}),n})();var pd=L(7537),Zc=L(9940);function Qh(...n){return function Kp(){return(0,pd.J)(1)}()((0,Rn.D)(n,(0,Zc.yG)(n)))}function Kl(...n){const t=(0,Zc.yG)(n);return(0,$i.e)((e,i)=>{(t?Qh(n,e,t):Qh(n,e)).subscribe(i)})}function w_(){return(0,$i.e)((n,t)=>{let e,i=!1;n.subscribe((0,_i.x)(t,r=>{const s=e;e=r,i&&t.next([s,r]),i=!0}))})}function T0(n,t,e,i,r){return(s,l)=>{let d=e,f=t,m=0;s.subscribe((0,_i.x)(l,y=>{const C=m++;f=d?n(f,y,C):(d=!0,y),i&&l.next(f)},r&&(()=>{d&&l.next(f),l.complete()})))}}function Ql(n,t){return(0,$i.e)(T0(n,t,arguments.length>=2,!0))}var bt,I0=L(3997),Z1=(L(8977),L(3399)),gd=L(7592),pE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},wa={},gE=gE||{},un=pE||self;function S0(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function md(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var _E="closure_uid_"+(1e9*Math.random()>>>0),K1=0;function vE(n,t,e){return n.call.apply(n.bind,arguments)}function A0(n,t,e){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(t,r)}}return function(){return n.apply(t,arguments)}}function $s(n,t,e){return($s=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?vE:A0).apply(null,arguments)}function b_(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var i=e.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function gs(n,t){function e(){}e.prototype=t.prototype,n.$=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.ac=function(i,r,s){for(var l=Array(arguments.length-2),d=2;d<arguments.length;d++)l[d-2]=arguments[d];return t.prototype[r].apply(i,l)}}function Kc(){this.s=this.s,this.o=this.o}Kc.prototype.s=!1,Kc.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function mE(n){Object.prototype.hasOwnProperty.call(n,_E)&&n[_E]||(n[_E]=++K1)}(this)},Kc.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Q1=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1};function Jh(n){const t=n.length;if(0<t){const e=Array(t);for(let i=0;i<t;i++)e[i]=n[i];return e}return[]}function J1(n,t){for(let e=1;e<arguments.length;e++){const i=arguments[e];if(S0(i)){const r=n.length||0,s=i.length||0;n.length=r+s;for(let l=0;l<s;l++)n[r+l]=i[l]}else n.push(i)}}function Nr(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}Nr.prototype.h=function(){this.defaultPrevented=!0};var D_=function(){if(!un.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{un.addEventListener("test",()=>{},t),un.removeEventListener("test",()=>{},t)}catch{}return n}();function E_(n){return/^[\s\xa0]*$/.test(n)}function C_(){var n=un.navigator;return n&&(n=n.userAgent)?n:""}function Jl(n){return-1!=C_().indexOf(n)}function yE(n){return yE[" "](n),n}yE[" "]=function(){};var wE,n,X1=Jl("Opera"),Xh=Jl("Trident")||Jl("MSIE"),M0=Jl("Edge"),eA=M0||Xh,N0=Jl("Gecko")&&!(-1!=C_().toLowerCase().indexOf("webkit")&&!Jl("Edge"))&&!(Jl("Trident")||Jl("MSIE"))&&!Jl("Edge"),tA=-1!=C_().toLowerCase().indexOf("webkit")&&!Jl("Edge");function nA(){var n=un.document;return n?n.documentMode:void 0}e:{var x0="",bE=(n=C_(),N0?/rv:([^\);]+)(\)|;)/.exec(n):M0?/Edge\/([\d\.]+)/.exec(n):Xh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):tA?/WebKit\/(\S+)/.exec(n):X1?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(bE&&(x0=bE?bE[1]:""),Xh){var R0=nA();if(null!=R0&&R0>parseFloat(x0)){wE=String(R0);break e}}wE=x0}var EV=un.document&&Xh&&(nA()||parseInt(wE,10))||void 0;function Qp(n,t){if(Nr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(N0){e:{try{yE(t.nodeName);var r=!0;break e}catch{}r=!1}r||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:rA[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Qp.$.h.call(this)}}gs(Qp,Nr);var rA={2:"touch",3:"pen",4:"mouse"};Qp.prototype.h=function(){Qp.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var oo="closure_listenable_"+(1e6*Math.random()|0),sA=0;function CV(n,t,e,i,r){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!i,this.la=r,this.key=++sA,this.fa=this.ia=!1}function Jp(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Xl(n,t,e){for(const i in n)t.call(e,n[i],i,n)}function oA(n){const t={};for(const e in n)t[e]=n[e];return t}const Dk="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function aA(n,t){let e,i;for(let r=1;r<arguments.length;r++){for(e in i=arguments[r],i)n[e]=i[e];for(let s=0;s<Dk.length;s++)e=Dk[s],Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])}}function Xp(n){this.src=n,this.g={},this.h=0}function ba(n,t){var e=t.type;if(e in n.g){var s,i=n.g[e],r=Q1(i,t);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(Jp(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function O0(n,t,e,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.fa&&s.listener==t&&s.capture==!!e&&s.la==i)return r}return-1}Xp.prototype.add=function(n,t,e,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var l=O0(n,t,i,r);return-1<l?(t=n[l],e||(t.ia=!1)):((t=new CV(t,this.src,s,!!i,r)).ia=e,n.push(t)),t};var CE="closure_lm_"+(1e6*Math.random()|0),lA={};function es(n,t,e,i,r){if(i&&i.once)return uA(n,t,e,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)es(n,t[s],e,i,r);return null}return e=P0(e),n&&n[oo]?n.O(t,e,md(i)?!!i.capture:!!i,r):cA(n,t,e,!1,i,r)}function cA(n,t,e,i,r,s){if(!t)throw Error("Invalid event type");var l=md(r)?!!r.capture:!!r,d=SE(n);if(d||(n[CE]=d=new Xp(n)),(e=d.add(t,e,i,l,s)).proxy)return e;if(i=function TE(){const t=hA;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=i,i.src=n,i.listener=e,n.addEventListener)D_||(r=l),void 0===r&&(r=!1),n.addEventListener(t.toString(),i,r);else if(n.attachEvent)n.attachEvent(IE(t.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return e}function uA(n,t,e,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)uA(n,t[s],e,i,r);return null}return e=P0(e),n&&n[oo]?n.P(t,e,md(i)?!!i.capture:!!i,r):cA(n,t,e,!0,i,r)}function dA(n,t,e,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)dA(n,t[s],e,i,r);else i=md(i)?!!i.capture:!!i,e=P0(e),n&&n[oo]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=O0(s=n.g[t],e,i,r))&&(Jp(s[e]),Array.prototype.splice.call(s,e,1),0==s.length&&(delete n.g[t],n.h--))):n&&(n=SE(n))&&(t=n.g[t.toString()],n=-1,t&&(n=O0(t,e,i,r)),(e=-1<n?t[n]:null)&&T_(e))}function T_(n){if("number"!=typeof n&&n&&!n.fa){var t=n.src;if(t&&t[oo])ba(t.i,n);else{var e=n.type,i=n.proxy;t.removeEventListener?t.removeEventListener(e,i,n.capture):t.detachEvent?t.detachEvent(IE(e),i):t.addListener&&t.removeListener&&t.removeListener(i),(e=SE(t))?(ba(e,n),0==e.h&&(e.src=null,t[CE]=null)):Jp(n)}}}function IE(n){return n in lA?lA[n]:lA[n]="on"+n}function hA(n,t){if(n.fa)n=!0;else{t=new Qp(t,this);var e=n.listener,i=n.la||n.src;n.ia&&T_(n),n=e.call(i,t)}return n}function SE(n){return(n=n[CE])instanceof Xp?n:null}var k0="__closure_events_fn_"+(1e9*Math.random()>>>0);function P0(n){return"function"==typeof n?n:(n[k0]||(n[k0]=function(t){return n.handleEvent(t)}),n[k0])}function ms(){Kc.call(this),this.i=new Xp(this),this.S=this,this.J=null}function Ns(n,t){var e,i=n.J;if(i)for(e=[];i;i=i.J)e.push(i);if(n=n.S,i=t.type||t,"string"==typeof t)t=new Nr(t,n);else if(t instanceof Nr)t.target=t.target||n;else{var r=t;aA(t=new Nr(i,n),r)}if(r=!0,e)for(var s=e.length-1;0<=s;s--){var l=t.g=e[s];r=F0(l,i,!0,t)&&r}if(r=F0(l=t.g=n,i,!0,t)&&r,r=F0(l,i,!1,t)&&r,e)for(s=0;s<e.length;s++)r=F0(l=t.g=e[s],i,!1,t)&&r}function F0(n,t,e,i){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var l=t[s];if(l&&!l.fa&&l.capture==e){var d=l.listener,f=l.la||l.src;l.ia&&ba(n.i,l),r=!1!==d.call(f,i)&&r}}return r&&!i.defaultPrevented}gs(ms,Kc),ms.prototype[oo]=!0,ms.prototype.removeEventListener=function(n,t,e,i){dA(this,n,t,e,i)},ms.prototype.N=function(){if(ms.$.N.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],i=0;i<e.length;i++)Jp(e[i]);delete n.g[t],n.h--}}this.J=null},ms.prototype.O=function(n,t,e,i){return this.i.add(String(n),t,!1,e,i)},ms.prototype.P=function(n,t,e,i){return this.i.add(String(n),t,!0,e,i)};var L0=un.JSON.stringify;function Qc(){var n=ng;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var fA=new class eg{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new Ek,n=>n.reset());class Ek{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function pA(n){var t=1;n=n.split(":");const e=[];for(;0<t&&n.length;)e.push(n.shift()),t--;return n.length&&e.push(n.join(":")),e}function gA(n){un.setTimeout(()=>{throw n},0)}let ef,Jc=!1,ng=new class tg{constructor(){this.h=this.g=null}add(t,e){const i=fA.get();i.set(t,e),this.h?this.h.next=i:this.g=i,this.h=i}},AE=()=>{const n=un.Promise.resolve(void 0);ef=()=>{n.then(mA)}};var mA=()=>{for(var n;n=Qc();){try{n.h.call(n.g)}catch(e){gA(e)}var t=fA;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}Jc=!1};function B0(n,t){ms.call(this),this.h=n||1,this.g=t||un,this.j=$s(this.qb,this),this.l=Date.now()}function ME(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function NE(n,t,e){if("function"==typeof n)e&&(n=$s(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=$s(n.handleEvent,n)}return 2147483647<Number(t)?-1:un.setTimeout(n,t||0)}function _A(n){n.g=NE(()=>{n.g=null,n.i&&(n.i=!1,_A(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}gs(B0,ms),(bt=B0.prototype).ga=!1,bt.T=null,bt.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ns(this,"tick"),this.ga&&(ME(this),this.start()))}},bt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},bt.N=function(){B0.$.N.call(this),ME(this),delete this.g};class vA extends Kc{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:_A(this)}N(){super.N(),this.g&&(un.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function V0(n){Kc.call(this),this.h=n,this.g={}}gs(V0,Kc);var yA=[];function Ck(n,t,e,i){Array.isArray(e)||(e&&(yA[0]=e.toString()),e=yA);for(var r=0;r<e.length;r++){var s=es(t,e[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function Tk(n){Xl(n.g,function(t,e){this.g.hasOwnProperty(e)&&T_(t)},n),n.g={}}function I_(){this.g=!0}function Xc(n,t,e,i){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function bA(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var i=e[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var l=1;l<r.length;l++)r[l]=""}}}return L0(e)}catch{return t}}(n,e)+(i?" "+i:"")})}V0.prototype.N=function(){V0.$.N.call(this),Tk(this)},V0.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},I_.prototype.Ea=function(){this.g=!1},I_.prototype.info=function(){};var _d={},DA=null;function S_(){return DA=DA||new ms}function xE(n){Nr.call(this,_d.Ta,n)}function rn(n){const t=S_();Ns(t,new xE(t))}function RE(n,t){Nr.call(this,_d.STAT_EVENT,n),this.stat=t}function zs(n){const t=S_();Ns(t,new RE(t,n))}function tf(n,t){Nr.call(this,_d.Ua,n),this.size=t}function ig(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return un.setTimeout(function(){n()},t)}_d.Ta="serverreachability",gs(xE,Nr),_d.STAT_EVENT="statevent",gs(RE,Nr),_d.Ua="timingevent",gs(tf,Nr);var U0={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},A_={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function vd(){}function rg(){}vd.prototype.h=null;var x_,sg={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function M_(){Nr.call(this,"d")}function N_(){Nr.call(this,"c")}function R_(){}function nf(n,t,e,i){this.l=n,this.j=t,this.m=e,this.W=i||1,this.U=new V0(this),this.P=Ik,this.V=new B0(n=eA?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new EA}function EA(){this.i=null,this.g="",this.h=!1}gs(M_,Nr),gs(N_,Nr),gs(R_,vd),R_.prototype.g=function(){return new XMLHttpRequest},R_.prototype.i=function(){return{}},x_=new R_;var Ik=45e3,OE={},O_={};function kE(n,t,e){n.L=1,n.v=W0(ec(t)),n.s=e,n.S=!0,CA(n,null)}function CA(n,t){n.G=Date.now(),og(n),n.A=ec(n.v);var e=n.A,i=n.W;Array.isArray(i)||(i=[String(i)]),xk(e.i,"t",i),n.C=0,e=n.l.J,n.h=new EA,n.g=qA(n.l,e?t:null,!n.s),0<n.O&&(n.M=new vA($s(n.Pa,n,n.g),n.O)),Ck(n.U,n.g,"readystatechange",n.nb),t=n.I?oA(n.I):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,t)):(n.u="GET",n.g.ha(n.A,n.u,null,t)),rn(),function wA(n,t,e,i,r,s){n.info(function(){if(n.g)if(s)for(var l="",d=s.split("&"),f=0;f<d.length;f++){var m=d[f].split("=");if(1<m.length){var y=m[0];m=m[1];var C=y.split("_");l=2<=C.length&&"type"==C[1]?l+(y+"=")+m+"&":l+(y+"=redacted&")}}else l=null;else l=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+e+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function TA(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function IA(n,t,e){let r,i=!0;for(;!n.J&&n.C<e.length;){if(r=SA(n,e),r==O_){4==t&&(n.o=4,zs(14),i=!1),Xc(n.j,n.m,null,"[Incomplete Response]");break}if(r==OE){n.o=4,zs(15),Xc(n.j,n.m,e,"[Invalid Chunk]"),i=!1;break}Xc(n.j,n.m,r,null),PE(n,r)}TA(n)&&r!=O_&&r!=OE&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,zs(16),i=!1),n.i=n.i&&i,i?0<e.length&&!n.ba&&(n.ba=!0,(t=n.l).g==n&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+e.length),nw(t),t.M=!0,zs(11))):(Xc(n.j,n.m,e,"[Invalid Chunked Response]"),rf(n),xs(n))}function SA(n,t){var e=n.C,i=t.indexOf("\n",e);return-1==i?O_:(e=Number(t.substring(e,i)),isNaN(e)?OE:(i+=1)+e>t.length?O_:(t=t.slice(i,i+e),n.C=i+e,t))}function og(n){n.Y=Date.now()+n.P,AA(n,n.P)}function AA(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=ig($s(n.lb,n),t)}function j0(n){n.B&&(un.clearTimeout(n.B),n.B=null)}function xs(n){0==n.l.H||n.J||Fk(n.l,n)}function rf(n){j0(n);var t=n.M;t&&"function"==typeof t.sa&&t.sa(),n.M=null,ME(n.V),Tk(n.U),n.g&&(t=n.g,n.g=null,t.abort(),t.sa())}function PE(n,t){try{var e=n.l;if(0!=e.H&&(e.g==n||HE(e.i,n)))if(!n.K&&HE(e.i,n)&&3==e.H){try{var i=e.Ja.g.parse(t)}catch{i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!e.u){if(e.g){if(!(e.g.G+3e3<n.G))break e;iw(e),X0(e)}tw(e),zs(18)}}else e.Fa=r[1],0<e.Fa-e.V&&37500>r[2]&&e.G&&0==e.A&&!e.v&&(e.v=ig($s(e.ib,e),6e3));if(1>=OA(e.i)&&e.oa){try{e.oa()}catch{}e.oa=void 0}}else yd(e,11)}else if((n.K||e.g==n)&&iw(e),!E_(t))for(r=e.Ja.g.parse(t),t=0;t<r.length;t++){let m=r[t];if(e.V=m[0],m=m[1],2==e.H)if("c"==m[0]){e.K=m[1],e.pa=m[2];const y=m[3];null!=y&&(e.ra=y,e.l.info("VER="+e.ra));const C=m[4];null!=C&&(e.Ga=C,e.l.info("SVER="+e.Ga));const A=m[5];null!=A&&"number"==typeof A&&0<A&&(e.L=i=1.5*A,e.l.info("backChannelRequestTimeoutMs_="+i)),i=e;const x=n.g;if(x){const P=x.g?x.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(P){var s=i.i;s.g||-1==P.indexOf("spdy")&&-1==P.indexOf("quic")&&-1==P.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(L_(s,s.h),s.h=null))}if(i.F){const F=x.g?x.g.getResponseHeader("X-HTTP-Session-Id"):null;F&&(i.Da=F,Ri(i.I,i.F,F))}}e.H=3,e.h&&e.h.Ba(),e.ca&&(e.S=Date.now()-n.G,e.l.info("Handshake RTT: "+e.S+"ms"));var l=n;if((i=e).wa=z_(i,i.J?i.pa:null,i.Y),l.K){kA(i.i,l);var d=l,f=i.L;f&&d.setTimeout(f),d.B&&(j0(d),og(d)),i.g=l}else WA(i);0<e.j.length&&ew(e)}else"stop"!=m[0]&&"close"!=m[0]||yd(e,7);else 3==e.H&&("stop"==m[0]||"close"==m[0]?"stop"==m[0]?yd(e,7):j_(e):"noop"!=m[0]&&e.h&&e.h.Aa(m),e.A=0)}rn()}catch{}}function LE(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if(S0(n)||"string"==typeof n)Array.prototype.forEach.call(n,t,void 0);else for(var e=function FE(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(S0(n)||"string"==typeof n){var t=[];n=n.length;for(var e=0;e<n;e++)t.push(e);return t}t=[],e=0;for(const i in n)t[e++]=i;return t}}}(n),i=function SV(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(S0(n)){for(var t=[],e=n.length,i=0;i<e;i++)t.push(n[i]);return t}for(i in t=[],e=0,n)t[e++]=n[i];return t}(n),r=i.length,s=0;s<r;s++)t.call(void 0,i[s],e&&e[s],n)}(bt=nf.prototype).setTimeout=function(n){this.P=n},bt.nb=function(n){n=n.target;const t=this.M;t&&3==nc(n)?t.l():this.Pa(n)},bt.Pa=function(n){try{if(n==this.g)e:{const y=nc(this.g);var t=this.g.Ia();if(this.g.da(),!(3>y)&&(3!=y||eA||this.g&&(this.h.h||this.g.ja()||jA(this.g)))){this.J||4!=y||7==t||rn(),j0(this);var e=this.g.da();this.ca=e;t:if(TA(this)){var i=jA(this.g);n="";var r=i.length,s=4==nc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){rf(this),xs(this);var l="";break t}this.h.i=new un.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,n+=this.h.i.decode(i[t],{stream:s&&t==r-1});i.splice(0,r),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==e,function TV(n,t,e,i,r,s,l){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+e+"\n"+s+" "+l})}(this.j,this.u,this.A,this.m,this.W,y,e),this.i){if(this.aa&&!this.K){t:{if(this.g){var d,f=this.g;if((d=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E_(d)){var m=d;break t}}m=null}if(!(e=m)){this.i=!1,this.o=3,zs(12),rf(this),xs(this);break e}Xc(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,PE(this,e)}this.S?(IA(this,y,l),eA&&this.i&&3==y&&(Ck(this.U,this.V,"tick",this.mb),this.V.start())):(Xc(this.j,this.m,l,null),PE(this,l)),4==y&&rf(this),this.i&&!this.J&&(4==y?Fk(this.l,this):(this.i=!1,og(this)))}else(function kk(n){const t={};n=(n.g&&2<=nc(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<n.length;i++){if(E_(n[i]))continue;var e=pA(n[i]);const r=e[0];if("string"!=typeof(e=e[1]))continue;e=e.trim();const s=t[r]||[];t[r]=s,s.push(e)}!function EE(n,t){for(const e in n)t.call(void 0,n[e],e,n)}(t,function(i){return i.join(", ")})})(this.g),400==e&&0<l.indexOf("Unknown SID")?(this.o=3,zs(12)):(this.o=0,zs(13)),rf(this),xs(this)}}}catch{}},bt.mb=function(){if(this.g){var n=nc(this.g),t=this.g.ja();this.C<t.length&&(j0(this),IA(this,n,t),this.i&&4!=n&&og(this))}},bt.cancel=function(){this.J=!0,rf(this)},bt.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function IV(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.L&&(rn(),zs(17)),rf(this),this.o=2,xs(this)):AA(this,this.Y-n)};var MA=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sf(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof sf){this.h=n.h,G0(this,n.j),this.s=n.s,this.g=n.g,$0(this,n.m),this.l=n.l;var t=n.i,e=new ag;e.i=t.i,t.g&&(e.g=new Map(t.g),e.h=t.h),z0(this,e),this.o=n.o}else n&&(t=String(n).match(MA))?(this.h=!1,G0(this,t[1]||"",!0),this.s=k_(t[2]||""),this.g=k_(t[3]||"",!0),$0(this,t[4]),this.l=k_(t[5]||"",!0),z0(this,t[6]||"",!0),this.o=k_(t[7]||"")):(this.h=!1,this.i=new ag(null,this.h))}function ec(n){return new sf(n)}function G0(n,t,e){n.j=e?k_(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function $0(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function z0(n,t,e){t instanceof ag?(n.i=t,function xA(n,t){t&&!n.j&&(eu(n),n.i=null,n.g.forEach(function(e,i){var r=i.toLowerCase();i!=r&&(F_(this,i),xk(this,r,e))},n)),n.j=t}(n.i,n.h)):(e||(t=P_(t,NA)),n.i=new ag(t,n.h))}function Ri(n,t,e){n.i.set(t,e)}function W0(n){return Ri(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function k_(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function P_(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,Ak),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Ak(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}sf.prototype.toString=function(){var n=[],t=this.j;t&&n.push(P_(t,sl,!0),":");var e=this.g;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(P_(t,sl,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.g&&"/"!=e.charAt(0)&&n.push("/"),n.push(P_(e,"/"==e.charAt(0)?Mk:BE,!0))),(e=this.i.toString())&&n.push("?",e),(e=this.o)&&n.push("#",P_(e,Nk)),n.join("")};var sl=/[#\/\?@]/g,BE=/[#\?:]/g,Mk=/[#\?]/g,NA=/[#\?@]/g,Nk=/#/g;function ag(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function eu(n){n.g||(n.g=new Map,n.h=0,n.i&&function Sk(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var i=n[e].indexOf("="),r=null;if(0<=i){var s=n[e].substring(0,i);r=n[e].substring(i+1)}else s=n[e];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function F_(n,t){eu(n),t=af(n,t),n.g.has(t)&&(n.i=null,n.h-=n.g.get(t).length,n.g.delete(t))}function q0(n,t){return eu(n),t=af(n,t),n.g.has(t)}function xk(n,t,e){F_(n,t),0<e.length&&(n.i=null,n.g.set(af(n,t),Jh(e)),n.h+=e.length)}function af(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function VE(n){this.l=n||UE,n=un.PerformanceNavigationTiming?0<(n=un.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(un.g&&un.g.Ka&&un.g.Ka()&&un.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(bt=ag.prototype).add=function(n,t){eu(this),this.i=null,n=af(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},bt.forEach=function(n,t){eu(this),this.g.forEach(function(e,i){e.forEach(function(r){n.call(t,r,i,this)},this)},this)},bt.ta=function(){eu(this);const n=Array.from(this.g.values()),t=Array.from(this.g.keys()),e=[];for(let i=0;i<t.length;i++){const r=n[i];for(let s=0;s<r.length;s++)e.push(t[i])}return e},bt.Z=function(n){eu(this);let t=[];if("string"==typeof n)q0(this,n)&&(t=t.concat(this.g.get(af(this,n))));else{n=Array.from(this.g.values());for(let e=0;e<n.length;e++)t=t.concat(n[e])}return t},bt.set=function(n,t){return eu(this),this.i=null,q0(this,n=af(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},bt.get=function(n,t){return n&&0<(n=this.Z(n)).length?String(n[0]):t},bt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],t=Array.from(this.g.keys());for(var e=0;e<t.length;e++){var i=t[e];const s=encodeURIComponent(String(i)),l=this.Z(i);for(i=0;i<l.length;i++){var r=s;""!==l[i]&&(r+="="+encodeURIComponent(String(l[i]))),n.push(r)}}return this.i=n.join("&")};var UE=10;function tc(n){return!!n.h||!!n.g&&n.g.size>=n.j}function OA(n){return n.h?1:n.g?n.g.size:0}function HE(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function L_(n,t){n.g?n.g.add(t):n.h=t}function kA(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function jE(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.F);return t}return Jh(n.i)}VE.prototype.cancel=function(){if(this.i=jE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var Rk=class{stringify(n){return un.JSON.stringify(n,void 0)}parse(n){return un.JSON.parse(n,void 0)}};function Y0(){this.g=new Rk}function B_(n,t,e){const i=e||"";try{LE(n,function(r,s){let l=r;md(r)&&(l=L0(r)),t.push(i+s+"="+encodeURIComponent(l))})}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function lf(n,t,e,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch{}}function Z0(n){this.l=n.fc||null,this.j=n.ob||!1}function K0(n,t){ms.call(this),this.F=n,this.u=t,this.m=void 0,this.readyState=Q0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}gs(Z0,vd),Z0.prototype.g=function(){return new K0(this.l,this.j)},Z0.prototype.i=function(n){return function(){return n}}({}),gs(K0,ms);var Q0=0;function GE(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function V_(n){n.readyState=4,n.l=null,n.j=null,n.A=null,U_(n)}function U_(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(bt=K0.prototype).open=function(n,t){if(this.readyState!=Q0)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,U_(this)},bt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.F||un).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},bt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,V_(this)),this.readyState=Q0},bt.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,U_(this)),this.g&&(this.readyState=3,U_(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof un.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;GE(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},bt.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?V_(this):U_(this),3==this.readyState&&GE(this)}},bt.Za=function(n){this.g&&(this.response=this.responseText=n,V_(this))},bt.Ya=function(n){this.g&&(this.response=n,V_(this))},bt.ka=function(){this.g&&V_(this)},bt.setRequestHeader=function(n,t){this.v.append(n,t)},bt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},bt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(K0.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var FA=un.JSON.parse;function ir(n){ms.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=lg,this.L=this.M=!1}gs(ir,ms);var lg="",Ok=/^https?$/i,LA=["POST","PUT"];function VA(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,UA(n),J0(n)}function UA(n){n.F||(n.F=!0,Ns(n,"complete"),Ns(n,"error"))}function cg(n){if(n.h&&typeof gE<"u"&&(!n.C[1]||4!=nc(n)||2!=n.da()))if(n.v&&4==nc(n))NE(n.La,0,n);else if(Ns(n,"readystatechange"),4==nc(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var i;if(i=0===l){var r=String(n.I).match(MA)[1]||null;!r&&un.self&&un.self.location&&(r=un.self.location.protocol.slice(0,-1)),i=!Ok.test(r?r.toLowerCase():"")}e=i}if(e)Ns(n,"complete"),Ns(n,"success");else{n.m=6;try{var s=2<nc(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",UA(n)}}finally{J0(n)}}}function J0(n,t){if(n.g){HA(n);const e=n.g,i=n.C[0]?()=>{}:null;n.g=null,n.C=null,t||Ns(n,"ready");try{e.onreadystatechange=i}catch{}}}function HA(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(un.clearTimeout(n.A),n.A=null)}function nc(n){return n.g?n.g.readyState:0}function jA(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case lg:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function GA(n){let t="";return Xl(n,function(e,i){t+=i,t+=":",t+=e,t+="\r\n"}),t}function $E(n,t,e){e:{for(i in e){var i=!1;break e}i=!0}i||(e=GA(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):Ri(n,t,e))}function H_(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function zE(n){this.Ga=0,this.j=[],this.l=new I_,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=H_("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=H_("baseRetryDelayMs",5e3,n),this.hb=H_("retryDelaySeedMs",1e4,n),this.eb=H_("forwardChannelMaxRetries",2,n),this.xa=H_("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new VE(n&&n.concurrentRequestLimit),this.Ja=new Y0,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function j_(n){if(G_(n),3==n.H){var t=n.W++,e=ec(n.I);if(Ri(e,"SID",n.K),Ri(e,"RID",t),Ri(e,"TYPE","terminate"),$_(n,e),(t=new nf(n,n.l,t)).L=2,t.v=W0(ec(e)),e=!1,un.navigator&&un.navigator.sendBeacon)try{e=un.navigator.sendBeacon(t.v.toString(),"")}catch{}!e&&un.Image&&((new Image).src=t.v,e=!0),e||(t.g=qA(t.l,null),t.g.ha(t.v)),t.G=Date.now(),og(t)}Lk(n)}function X0(n){n.g&&(nw(n),n.g.cancel(),n.g=null)}function G_(n){X0(n),n.u&&(un.clearTimeout(n.u),n.u=null),iw(n),n.i.cancel(),n.m&&("number"==typeof n.m&&un.clearTimeout(n.m),n.m=null)}function ew(n){if(!tc(n.i)&&!n.m){n.m=!0;var t=n.Na;ef||AE(),Jc||(ef(),Jc=!0),ng.add(t,n),n.C=0}}function $A(n,t){var e;e=t?t.m:n.W++;const i=ec(n.I);Ri(i,"SID",n.K),Ri(i,"RID",e),Ri(i,"AID",n.V),$_(n,i),n.o&&n.s&&$E(i,n.o,n.s),e=new nf(n,n.l,e,n.C+1),null===n.o&&(e.I=n.s),t&&(n.j=t.F.concat(n.j)),t=zA(n,e,1e3),e.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),L_(n.i,e),kE(e,i,t)}function $_(n,t){n.na&&Xl(n.na,function(e,i){Ri(t,i,e)}),n.h&&LE({},function(e,i){Ri(t,i,e)})}function zA(n,t,e){e=Math.min(n.j.length,e);var i=n.h?$s(n.h.Va,n.h,n):null;e:{var r=n.j;let s=-1;for(;;){const l=["count="+e];-1==s?0<e?(s=r[0].g,l.push("ofs="+s)):s=0:l.push("ofs="+s);let d=!0;for(let f=0;f<e;f++){let m=r[f].g;const y=r[f].map;if(m-=s,0>m)s=Math.max(0,r[f].g-100),d=!1;else try{B_(y,l,"req"+m+"_")}catch{i&&i(y)}}if(d){i=l.join("&");break e}}}return n=n.j.splice(0,e),t.F=n,i}function WA(n){if(!n.g&&!n.u){n.ba=1;var t=n.Ma;ef||AE(),Jc||(ef(),Jc=!0),ng.add(t,n),n.A=0}}function tw(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=ig($s(n.Ma,n),qE(n,n.A)),n.A++,0))}function nw(n){null!=n.B&&(un.clearTimeout(n.B),n.B=null)}function WE(n){n.g=new nf(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var t=ec(n.wa);Ri(t,"RID","rpc"),Ri(t,"SID",n.K),Ri(t,"AID",n.V),Ri(t,"CI",n.G?"0":"1"),!n.G&&n.qa&&Ri(t,"TO",n.qa),Ri(t,"TYPE","xmlhttp"),$_(n,t),n.o&&n.s&&$E(t,n.o,n.s),n.L&&n.g.setTimeout(n.L);var e=n.g;n=n.pa,e.L=1,e.v=W0(ec(t)),e.s=null,e.S=!0,CA(e,n)}function iw(n){null!=n.v&&(un.clearTimeout(n.v),n.v=null)}function Fk(n,t){var e=null;if(n.g==t){iw(n),nw(n),n.g=null;var i=2}else{if(!HE(n.i,t))return;e=t.F,kA(n.i,t),i=1}if(0!=n.H)if(t.i)if(1==i){e=t.s?t.s.length:0,t=Date.now()-t.G;var r=n.C;Ns(i=S_(),new tf(i,e)),ew(n)}else WA(n);else if(3==(r=t.o)||0==r&&0<t.ca||!(1==i&&function Pk(n,t){return!(OA(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=t.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=ig($s(n.Na,n,t),qE(n,n.C)),n.C++,0)))}(n,t)||2==i&&tw(n)))switch(e&&0<e.length&&(t=n.i,t.i=t.i.concat(e)),r){case 1:yd(n,5);break;case 4:yd(n,10);break;case 3:yd(n,6);break;default:yd(n,2)}}function qE(n,t){let e=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(e*=2),e*t}function yd(n,t){if(n.l.info("Error code "+t),2==t){var e=null;n.h&&(e=null);var i=$s(n.pb,n);e||(e=new sf("//www.google.com/images/cleardot.gif"),un.location&&"http"==un.location.protocol||G0(e,"https"),W0(e)),function PA(n,t){const e=new I_;if(un.Image){const i=new Image;i.onload=b_(lf,e,i,"TestLoadImage: loaded",!0,t),i.onerror=b_(lf,e,i,"TestLoadImage: error",!1,t),i.onabort=b_(lf,e,i,"TestLoadImage: abort",!1,t),i.ontimeout=b_(lf,e,i,"TestLoadImage: timeout",!1,t),un.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else t(!1)}(e.toString(),i)}else zs(2);n.H=0,n.h&&n.h.za(t),Lk(n),G_(n)}function Lk(n){if(n.H=0,n.ma=[],n.h){const t=jE(n.i);(0!=t.length||0!=n.j.length)&&(J1(n.ma,t),J1(n.ma,n.j),n.i.i.length=0,Jh(n.j),n.j.length=0),n.h.ya()}}function z_(n,t,e){var i=e instanceof sf?ec(e):new sf(e);if(""!=i.g)t&&(i.g=t+"."+i.g),$0(i,i.m);else{var r=un.location;i=r.protocol,t=t?t+"."+r.hostname:r.hostname,r=+r.port;var s=new sf(null);i&&G0(s,i),t&&(s.g=t),r&&$0(s,r),e&&(s.l=e),i=s}return t=n.Da,(e=n.F)&&t&&Ri(i,e,t),Ri(i,"VER",n.ra),$_(n,i),i}function qA(n,t,e){if(t&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new ir(e&&n.Ha&&!n.va?new Z0({ob:!0}):n.va)).Oa(n.J),t}function YA(){}function ug(){if(Xh&&!(10<=Number(EV)))throw Error("Environmental error: no available transport.")}function Ko(n,t){ms.call(this),this.g=new zE(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(n?n["X-WebChannel-Client-Profile"]=t.Ca:n={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=n,(n=t&&t.cc)&&!E_(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!E_(t)&&(this.g.F=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new xr(this)}function ol(n){M_.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function dg(){N_.call(this),this.status=1}function xr(n){this.g=n}function No(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function xo(n,t,e){e||(e=0);var i=Array(16);if("string"==typeof t)for(var r=0;16>r;++r)i[r]=t.charCodeAt(e++)|t.charCodeAt(e++)<<8|t.charCodeAt(e++)<<16|t.charCodeAt(e++)<<24;else for(r=0;16>r;++r)i[r]=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24;var s=n.g[3],l=(t=n.g[0])+(s^(e=n.g[1])&((r=n.g[2])^s))+i[0]+3614090360&4294967295;l=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=e+(l<<7&4294967295|l>>>25))+((l=s+(r^t&(e^r))+i[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=r+(e^s&(t^e))+i[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=e+(t^r&(s^t))+i[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=t+(s^e&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=s+(r^t&(e^r))+i[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=r+(e^s&(t^e))+i[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=e+(t^r&(s^t))+i[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=t+(s^e&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=s+(r^t&(e^r))+i[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=r+(e^s&(t^e))+i[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=e+(t^r&(s^t))+i[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=t+(s^e&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=s+(r^t&(e^r))+i[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=r+(e^s&(t^e))+i[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=e+(t^r&(s^t))+i[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=t+(r^s&(e^r))+i[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=s+(e^r&(t^e))+i[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=r+(t^e&(s^t))+i[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=e+(s^t&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=t+(r^s&(e^r))+i[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=s+(e^r&(t^e))+i[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=r+(t^e&(s^t))+i[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=e+(s^t&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=t+(r^s&(e^r))+i[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=s+(e^r&(t^e))+i[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=r+(t^e&(s^t))+i[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=e+(s^t&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=t+(r^s&(e^r))+i[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=s+(e^r&(t^e))+i[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=r+(t^e&(s^t))+i[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=e+(s^t&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=t+(e^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=s+(t^e^r)+i[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=r+(s^t^e)+i[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=e+(r^s^t)+i[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=t+(e^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=s+(t^e^r)+i[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=r+(s^t^e)+i[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=e+(r^s^t)+i[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=t+(e^r^s)+i[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=s+(t^e^r)+i[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=r+(s^t^e)+i[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=e+(r^s^t)+i[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=t+(e^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=s+(t^e^r)+i[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=r+(s^t^e)+i[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=e+(r^s^t)+i[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=t+(r^(e|~s))+i[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=s+(e^(t|~r))+i[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=r+(t^(s|~e))+i[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=e+(s^(r|~t))+i[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=t+(r^(e|~s))+i[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=s+(e^(t|~r))+i[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=r+(t^(s|~e))+i[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=e+(s^(r|~t))+i[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=t+(r^(e|~s))+i[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=s+(e^(t|~r))+i[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=r+(t^(s|~e))+i[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=e+(s^(r|~t))+i[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((s=(t=e+((l=t+(r^(e|~s))+i[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=s+(e^(t|~r))+i[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((r=s+((l=r+(t^(s|~e))+i[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~t))+i[9]+3951481745&4294967295,n.g[0]=n.g[0]+t&4294967295,n.g[1]=n.g[1]+(r+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+r&4294967295,n.g[3]=n.g[3]+s&4294967295}function Zn(n,t){this.h=t;for(var e=[],i=!0,r=n.length-1;0<=r;r--){var s=0|n[r];i&&s==t||(e[r]=s,i=!1)}this.g=e}(bt=ir.prototype).Oa=function(n){this.M=n},bt.ha=function(n,t,e,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);t=t?t.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():x_.g(),this.C=function H0(n){return n.h||(n.h=n.i())}(this.u?this.u:x_),this.g.onreadystatechange=$s(this.La,this);try{this.G=!0,this.g.open(t,String(n),!0),this.G=!1}catch(s){return void VA(this,s)}if(n=e||"",e=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)e.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const s of i.keys())e.set(s,i.get(s))}i=Array.from(e.keys()).find(s=>"content-type"==s.toLowerCase()),r=un.FormData&&n instanceof un.FormData,!(0<=Q1(LA,t))||i||r||e.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,l]of e)this.g.setRequestHeader(s,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{HA(this),0<this.B&&((this.L=function BA(n){return Xh&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$s(this.ua,this)):this.A=NE(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){VA(this,s)}},bt.ua=function(){typeof gE<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ns(this,"timeout"),this.abort(8))},bt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ns(this,"complete"),Ns(this,"abort"),J0(this))},bt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),J0(this,!0)),ir.$.N.call(this)},bt.La=function(){this.s||(this.G||this.v||this.l?cg(this):this.kb())},bt.kb=function(){cg(this)},bt.isActive=function(){return!!this.g},bt.da=function(){try{return 2<nc(this)?this.g.status:-1}catch{return-1}},bt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},bt.Wa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),FA(t)}},bt.Ia=function(){return this.m},bt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(bt=zE.prototype).ra=8,bt.H=1,bt.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const r=new nf(this,this.l,n);let s=this.s;if(this.U&&(s?(s=oA(s),aA(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)e:{for(var t=0,e=0;e<this.j.length;e++){var i=this.j[e];if(void 0===(i="__data__"in i.map&&"string"==typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=e;break e}if(4096===t||e===this.j.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=zA(this,r,t),Ri(e=ec(this.I),"RID",n),Ri(e,"CVER",22),this.F&&Ri(e,"X-HTTP-Session-Id",this.F),$_(this,e),s&&(this.O?t="headers="+encodeURIComponent(String(GA(s)))+"&"+t:this.o&&$E(e,this.o,s)),L_(this.i,r),this.bb&&Ri(e,"TYPE","init"),this.P?(Ri(e,"$req",t),Ri(e,"SID","null"),r.aa=!0,kE(r,e,null)):kE(r,e,t),this.H=2}}else 3==this.H&&(n?$A(this,n):0==this.j.length||tc(this.i)||$A(this))},bt.Ma=function(){if(this.u=null,WE(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=ig($s(this.jb,this),n)}},bt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,zs(10),X0(this),WE(this))},bt.ib=function(){null!=this.v&&(this.v=null,X0(this),tw(this),zs(19))},bt.pb=function(n){n?(this.l.info("Successfully pinged google.com"),zs(2)):(this.l.info("Failed to ping google.com"),zs(1))},bt.isActive=function(){return!!this.h&&this.h.isActive(this)},(bt=YA.prototype).Ba=function(){},bt.Aa=function(){},bt.za=function(){},bt.ya=function(){},bt.isActive=function(){return!0},bt.Va=function(){},ug.prototype.g=function(n,t){return new Ko(n,t)},gs(Ko,ms),Ko.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,t=this.l,e=this.h||void 0;zs(0),n.Y=t,n.na=e||{},n.G=n.aa,n.I=z_(n,null,n.Y),ew(n)},Ko.prototype.close=function(){j_(this.g)},Ko.prototype.u=function(n){var t=this.g;if("string"==typeof n){var e={};e.__data__=n,n=e}else this.v&&((e={}).__data__=L0(n),n=e);t.j.push(new class{constructor(n,t){this.g=n,this.map=t}}(t.fb++,n)),3==t.H&&ew(t)},Ko.prototype.N=function(){this.g.h=null,delete this.j,j_(this.g),delete this.g,Ko.$.N.call(this)},gs(ol,M_),gs(dg,N_),gs(xr,YA),xr.prototype.Ba=function(){Ns(this.g,"a")},xr.prototype.Aa=function(n){Ns(this.g,new ol(n))},xr.prototype.za=function(n){Ns(this.g,new dg)},xr.prototype.ya=function(){Ns(this.g,"b")},gs(No,function cf(){this.blockSize=-1}),No.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},No.prototype.j=function(n,t){void 0===t&&(t=n.length);for(var e=t-this.blockSize,i=this.m,r=this.h,s=0;s<t;){if(0==r)for(;s<=e;)xo(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<t;)if(i[r++]=n.charCodeAt(s++),r==this.blockSize){xo(this,i),r=0;break}}else for(;s<t;)if(i[r++]=n[s++],r==this.blockSize){xo(this,i),r=0;break}}this.h=r,this.i+=t},No.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var t=1;t<n.length-8;++t)n[t]=0;var e=8*this.i;for(t=n.length-8;t<n.length;++t)n[t]=255&e,e/=256;for(this.j(n),n=Array(16),t=e=0;4>t;++t)for(var i=0;32>i;i+=8)n[e++]=this.g[t]>>>i&255;return n};var hg={};function wd(n){return-128<=n&&128>n?function bk(n,t){var e=hg;return Object.prototype.hasOwnProperty.call(e,n)?e[n]:e[n]=t(n)}(n,function(t){return new Zn([0|t],0>t?-1:0)}):new Zn([0|n],0>n?-1:0)}function ao(n){if(isNaN(n)||!isFinite(n))return al;if(0>n)return _s(ao(-n));for(var t=[],e=1,i=0;n>=e;i++)t[i]=n/e|0,e*=bd;return new Zn(t,0)}var bd=4294967296,al=wd(0),Dd=wd(1),df=wd(16777216);function Ro(n){if(0!=n.h)return!1;for(var t=0;t<n.g.length;t++)if(0!=n.g[t])return!1;return!0}function Qo(n){return-1==n.h}function _s(n){for(var t=n.g.length,e=[],i=0;i<t;i++)e[i]=~n.g[i];return new Zn(e,~n.h).add(Dd)}function W_(n,t){return n.add(_s(t))}function q_(n,t){for(;(65535&n[t])!=n[t];)n[t+1]+=n[t]>>>16,n[t]&=65535,t++}function fg(n,t){this.g=n,this.h=t}function Y_(n,t){if(Ro(t))throw Error("division by zero");if(Ro(n))return new fg(al,al);if(Qo(n))return t=Y_(_s(n),t),new fg(_s(t.g),_s(t.h));if(Qo(t))return t=Y_(n,_s(t)),new fg(_s(t.g),t.h);if(30<n.g.length){if(Qo(n)||Qo(t))throw Error("slowDivide_ only works with positive integers.");for(var e=Dd,i=t;0>=i.X(n);)e=YE(e),i=YE(i);var r=hf(e,1),s=hf(i,1);for(i=hf(i,2),e=hf(e,2);!Ro(i);){var l=s.add(i);0>=l.X(n)&&(r=r.add(e),s=l),i=hf(i,1),e=hf(e,1)}return t=W_(n,r.R(t)),new fg(r,t)}for(r=al;0<=n.X(t);){for(e=Math.max(1,Math.floor(n.ea()/t.ea())),i=48>=(i=Math.ceil(Math.log(e)/Math.LN2))?1:Math.pow(2,i-48),l=(s=ao(e)).R(t);Qo(l)||0<l.X(n);)l=(s=ao(e-=i)).R(t);Ro(s)&&(s=Dd),r=r.add(s),n=W_(n,l)}return new fg(r,n)}function YE(n){for(var t=n.g.length+1,e=[],i=0;i<t;i++)e[i]=n.D(i)<<1|n.D(i-1)>>>31;return new Zn(e,n.h)}function hf(n,t){var e=t>>5;t%=32;for(var i=n.g.length-e,r=[],s=0;s<i;s++)r[s]=0<t?n.D(s+e)>>>t|n.D(s+e+1)<<32-t:n.D(s+e);return new Zn(r,n.h)}(bt=Zn.prototype).ea=function(){if(Qo(this))return-_s(this).ea();for(var n=0,t=1,e=0;e<this.g.length;e++){var i=this.D(e);n+=(0<=i?i:bd+i)*t,t*=bd}return n},bt.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Ro(this))return"0";if(Qo(this))return"-"+_s(this).toString(n);for(var t=ao(Math.pow(n,6)),e=this,i="";;){var r=Y_(e,t).g,s=((0<(e=W_(e,r.R(t))).g.length?e.g[0]:e.h)>>>0).toString(n);if(Ro(e=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},bt.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},bt.X=function(n){return Qo(n=W_(this,n))?-1:Ro(n)?0:1},bt.abs=function(){return Qo(this)?_s(this):this},bt.add=function(n){for(var t=Math.max(this.g.length,n.g.length),e=[],i=0,r=0;r<=t;r++){var s=i+(65535&this.D(r))+(65535&n.D(r)),l=(s>>>16)+(this.D(r)>>>16)+(n.D(r)>>>16);i=l>>>16,e[r]=(l&=65535)<<16|(s&=65535)}return new Zn(e,-2147483648&e[e.length-1]?-1:0)},bt.R=function(n){if(Ro(this)||Ro(n))return al;if(Qo(this))return Qo(n)?_s(this).R(_s(n)):_s(_s(this).R(n));if(Qo(n))return _s(this.R(_s(n)));if(0>this.X(df)&&0>n.X(df))return ao(this.ea()*n.ea());for(var t=this.g.length+n.g.length,e=[],i=0;i<2*t;i++)e[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<n.g.length;r++){var s=this.D(i)>>>16,l=65535&this.D(i),d=n.D(r)>>>16,f=65535&n.D(r);e[2*i+2*r]+=l*f,q_(e,2*i+2*r),e[2*i+2*r+1]+=s*f,q_(e,2*i+2*r+1),e[2*i+2*r+1]+=l*d,q_(e,2*i+2*r+1),e[2*i+2*r+2]+=s*d,q_(e,2*i+2*r+2)}for(i=0;i<t;i++)e[i]=e[2*i+1]<<16|e[2*i];for(i=t;i<2*t;i++)e[i]=0;return new Zn(e,0)},bt.gb=function(n){return Y_(this,n).h},bt.and=function(n){for(var t=Math.max(this.g.length,n.g.length),e=[],i=0;i<t;i++)e[i]=this.D(i)&n.D(i);return new Zn(e,this.h&n.h)},bt.or=function(n){for(var t=Math.max(this.g.length,n.g.length),e=[],i=0;i<t;i++)e[i]=this.D(i)|n.D(i);return new Zn(e,this.h|n.h)},bt.xor=function(n){for(var t=Math.max(this.g.length,n.g.length),e=[],i=0;i<t;i++)e[i]=this.D(i)^n.D(i);return new Zn(e,this.h^n.h)},ug.prototype.createWebChannel=ug.prototype.g,Ko.prototype.send=Ko.prototype.u,Ko.prototype.open=Ko.prototype.m,Ko.prototype.close=Ko.prototype.close,U0.NO_ERROR=0,U0.TIMEOUT=8,U0.HTTP_ERROR=6,A_.COMPLETE="complete",rg.EventType=sg,sg.OPEN="a",sg.CLOSE="b",sg.ERROR="c",sg.MESSAGE="d",ms.prototype.listen=ms.prototype.O,ir.prototype.listenOnce=ir.prototype.P,ir.prototype.getLastError=ir.prototype.Sa,ir.prototype.getLastErrorCode=ir.prototype.Ia,ir.prototype.getStatus=ir.prototype.da,ir.prototype.getResponseJson=ir.prototype.Wa,ir.prototype.getResponseText=ir.prototype.ja,ir.prototype.send=ir.prototype.ha,ir.prototype.setWithCredentials=ir.prototype.Oa,No.prototype.digest=No.prototype.l,No.prototype.reset=No.prototype.reset,No.prototype.update=No.prototype.j,Zn.prototype.add=Zn.prototype.add,Zn.prototype.multiply=Zn.prototype.R,Zn.prototype.modulo=Zn.prototype.gb,Zn.prototype.compare=Zn.prototype.X,Zn.prototype.toNumber=Zn.prototype.ea,Zn.prototype.toString=Zn.prototype.toString,Zn.prototype.getBits=Zn.prototype.D,Zn.fromNumber=ao,Zn.fromString=function uf(n,t){if(0==n.length)throw Error("number format error: empty string");if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if("-"==n.charAt(0))return _s(uf(n.substring(1),t));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var e=ao(Math.pow(t,8)),i=al,r=0;r<n.length;r+=8){var s=Math.min(8,n.length-r),l=parseInt(n.substring(r,r+s),t);8>s?(s=ao(Math.pow(t,s)),i=i.R(s).add(ao(l))):i=(i=i.R(e)).add(ao(l))}return i};var ZA=wa.createWebChannelTransport=function(){return new ug},ZE=wa.getStatEventTarget=function(){return S_()},KE=wa.ErrorCode=U0,AV=wa.EventType=A_,MV=wa.Event=_d,KA=wa.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Bk=wa.FetchXmlHttpFactory=Z0,QE=wa.WebChannel=rg,Vk=wa.XhrIo=ir,NV=wa.Md5=No,pg=wa.Integer=Zn;const QA="@firebase/firestore";class vs{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}vs.UNAUTHENTICATED=new vs(null),vs.GOOGLE_CREDENTIALS=new vs("google-credentials-uid"),vs.FIRST_PARTY=new vs("first-party-uid"),vs.MOCK_USER=new vs("mock-user");let Ed="9.23.0";const Da=new Hr.Yd("@firebase/firestore");function Z_(){return Da.logLevel}function Ke(n,...t){if(Da.logLevel<=Hr.in.DEBUG){const e=t.map(JE);Da.debug(`Firestore (${Ed}): ${n}`,...e)}}function Oi(n,...t){if(Da.logLevel<=Hr.in.ERROR){const e=t.map(JE);Da.error(`Firestore (${Ed}): ${n}`,...e)}}function Jo(n,...t){if(Da.logLevel<=Hr.in.WARN){const e=t.map(JE);Da.warn(`Firestore (${Ed}): ${n}`,...e)}}function JE(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Dt(n="Unexpected state"){const t=`FIRESTORE (${Ed}) INTERNAL ASSERTION FAILED: `+n;throw Oi(t),new Error(t)}function Lt(n,t){n||Dt()}function yt(n,t){return n}const be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ge extends B.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class _r{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class K_{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class xV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(vs.UNAUTHENTICATED))}shutdown(){}}class Hk{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class jk{constructor(t){this.t=t,this.currentUser=vs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var i=this;let r=this.i;const s=m=>this.i!==r?(r=this.i,e(m)):Promise.resolve();let l=new _r;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new _r,t.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const m=l;t.enqueueRetryable((0,Ee.Z)(function*(){yield m.promise,yield s(i.currentUser)}))},f=m=>{Ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(m=>f(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(Ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new _r)}},0),d()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(Ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Lt("string"==typeof i.accessToken),new K_(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Lt(null===t||"string"==typeof t),new vs(t)}}class XE{constructor(t,e,i){this.h=t,this.l=e,this.m=i,this.type="FirstParty",this.user=vs.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const t=this.p();return t&&this.g.set("Authorization",t),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Gk{constructor(t,e,i){this.h=t,this.l=e,this.m=i}getToken(){return Promise.resolve(new XE(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable(()=>e(vs.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class eC{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $k{constructor(t){this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(t,e){const i=s=>{null!=s.error&&Ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const l=s.token!==this.T;return this.T=s.token,Ke("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{Ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?r(s):Ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Lt("string"==typeof e.token),this.T=e.token,new eC(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function JA(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}class tC{static A(){const e=62*Math.floor(256/62);let i="";for(;i.length<20;){const r=JA(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<e&&(i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(r[s]%62))}return i}}function on(n,t){return n<t?-1:n>t?1:0}function gg(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}function XA(n){return n+"\0"}class Wi{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ge(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ge(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ge(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ge(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Wi.fromMillis(Date.now())}static fromDate(t){return Wi.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new Wi(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?on(this.nanoseconds,t.nanoseconds):on(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Bt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Bt(t)}static min(){return new Bt(new Wi(0,0))}static max(){return new Bt(new Wi(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ff{constructor(t,e,i){void 0===e?e=0:e>t.length&&Dt(),void 0===i?i=t.length-e:i>t.length-e&&Dt(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return 0===ff.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof ff?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const s=t.get(r),l=e.get(r);if(s<l)return-1;if(s>l)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class On extends ff{construct(t,e,i){return new On(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Ge(be.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new On(e)}static emptyPath(){return new On([])}}const zk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ki extends ff{construct(t,e,i){return new ki(t,e,i)}static isValidIdentifier(t){return zk.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ki.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ki(["__name__"])}static fromServerFormat(t){const e=[];let i="",r=0;const s=()=>{if(0===i.length)throw new Ge(be.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let l=!1;for(;r<t.length;){const d=t[r];if("\\"===d){if(r+1===t.length)throw new Ge(be.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const f=t[r+1];if("\\"!==f&&"."!==f&&"`"!==f)throw new Ge(be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=f,r+=2}else"`"===d?(l=!l,r++):"."!==d||l?(i+=d,r++):(s(),r++)}if(s(),l)throw new Ge(be.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ki(e)}static emptyPath(){return new ki([])}}class ft{constructor(t){this.path=t}static fromPath(t){return new ft(On.fromString(t))}static fromName(t){return new ft(On.fromString(t).popFirst(5))}static empty(){return new ft(On.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===On.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return On.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ft(new On(t.slice()))}}class mg{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}}function sw(n){return n.fields.find(t=>2===t.kind)}function pf(n){return n.fields.filter(t=>2!==t.kind)}mg.UNKNOWN_ID=-1;class ow{constructor(t,e){this.fieldPath=t,this.kind=e}}class Cd{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new Cd(0,Xo.min())}}function nC(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Bt.fromTimestamp(1e9===i?new Wi(e+1,0):new Wi(e,i));return new Xo(r,ft.empty(),t)}function iC(n){return new Xo(n.readTime,n.key,-1)}class Xo{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new Xo(Bt.min(),ft.empty(),-1)}static max(){return new Xo(Bt.max(),ft.empty(),-1)}}function rC(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=ft.comparator(n.documentKey,t.documentKey),0!==e?e:on(n.largestBatchId,t.largestBatchId))}const sC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function tu(n){return Q_.apply(this,arguments)}function Q_(){return Q_=(0,Ee.Z)(function*(n){if(n.code!==be.FAILED_PRECONDITION||n.message!==sC)throw n;Ke("LocalStore","Unexpectedly lost primary lease")}),Q_.apply(this,arguments)}class ve{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Dt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new ve((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof ve?e:ve.resolve(e)}catch(e){return ve.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):ve.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):ve.reject(e)}static resolve(t){return new ve((e,i)=>{e(t)})}static reject(t){return new ve((e,i)=>{i(t)})}static waitFor(t){return new ve((e,i)=>{let r=0,s=0,l=!1;t.forEach(d=>{++r,d.next(()=>{++s,l&&s===r&&e()},f=>i(f))}),l=!0,s===r&&e()})}static or(t){let e=ve.resolve(!1);for(const i of t)e=e.next(r=>r?ve.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,s)=>{i.push(e.call(this,r,s))}),this.waitFor(i)}static mapArray(t,e){return new ve((i,r)=>{const s=t.length,l=new Array(s);let d=0;for(let f=0;f<s;f++){const m=f;e(t[m]).next(y=>{l[m]=y,++d,d===s&&i(l)},y=>r(y))}})}static doWhile(t,e){return new ve((i,r)=>{const s=()=>{!0===t()?e().next(()=>{s()},r):i()};s()})}}class cw{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.v=new _r,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{e.error?this.v.reject(new _g(t,e.error)):this.v.resolve()},this.transaction.onerror=i=>{const r=J_(i.target.error);this.v.reject(new _g(t,r))}}static open(t,e,i,r){try{return new cw(e,t.transaction(r,i))}catch(s){throw new _g(e,s)}}get R(){return this.v.promise}abort(t){t&&this.v.reject(t),this.aborted||(Ke("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new qk(e)}}class Ea{constructor(t,e,i){this.name=t,this.version=e,this.V=i,12.2===Ea.S((0,B.z$)())&&Oi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return Ke("SimpleDb","Removing database:",t),Td(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!(0,B.hl)())return!1;if(Ea.C())return!0;const t=(0,B.z$)(),e=Ea.S(t),i=0<e&&e<10,r=Ea.N(t),s=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||s)}static C(){var t;return typeof process<"u"&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.k)}static M(t,e){return t.store(e)}static S(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static N(t){const e=t.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}$(t){var e=this;return(0,Ee.Z)(function*(){return e.db||(Ke("SimpleDb","Opening database:",e.name),e.db=yield new Promise((i,r)=>{const s=indexedDB.open(e.name,e.version);s.onsuccess=l=>{i(l.target.result)},s.onblocked=()=>{r(new _g(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=l=>{const d=l.target.error;r("VersionError"===d.name?new Ge(be.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Ge(be.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new _g(t,d))},s.onupgradeneeded=l=>{Ke("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',l.oldVersion),e.V.O(l.target.result,s.transaction,l.oldVersion,e.version).next(()=>{Ke("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.F&&(e.db.onversionchange=i=>e.F(i)),e.db})()}B(t){this.F=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,i,r){var s=this;return(0,Ee.Z)(function*(){const l="readonly"===e;let d=0;for(;;){++d;try{s.db=yield s.$(t);const f=cw.open(s.db,t,l?"readonly":"readwrite",i),m=r(f).next(y=>(f.P(),y)).catch(y=>(f.abort(y),ve.reject(y))).toPromise();return m.catch(()=>{}),yield f.R,m}catch(f){const m=f,y="FirebaseError"!==m.name&&d<3;if(Ke("SimpleDb","Transaction failed with error:",m.message,"Retrying:",y),s.close(),!y)return Promise.reject(m)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class eM{constructor(t){this.L=t,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(t){this.L=t}done(){this.q=!0}G(t){this.U=t}delete(){return Td(this.L.delete())}}class _g extends Ge{constructor(t,e){super(be.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function nu(n){return"IndexedDbTransactionError"===n.name}class qk{constructor(t){this.store=t}put(t,e){let i;return void 0!==e?(Ke("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):(Ke("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),Td(i)}add(t){return Ke("SimpleDb","ADD",this.store.name,t,t),Td(this.store.add(t))}get(t){return Td(this.store.get(t)).next(e=>(void 0===e&&(e=null),Ke("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return Ke("SimpleDb","DELETE",this.store.name,t),Td(this.store.delete(t))}count(){return Ke("SimpleDb","COUNT",this.store.name),Td(this.store.count())}j(t,e){const i=this.options(t,e);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.W(r,(l,d)=>{s.push(d)}).next(()=>s)}{const r=this.store.getAll(i.range);return new ve((s,l)=>{r.onerror=d=>{l(d.target.error)},r.onsuccess=d=>{s(d.target.result)}})}}H(t,e){const i=this.store.getAll(t,null===e?void 0:e);return new ve((r,s)=>{i.onerror=l=>{s(l.target.error)},i.onsuccess=l=>{r(l.target.result)}})}J(t,e){Ke("SimpleDb","DELETE ALL",this.store.name);const i=this.options(t,e);i.Y=!1;const r=this.cursor(i);return this.W(r,(s,l,d)=>d.delete())}X(t,e){let i;e?i=t:(i={},e=t);const r=this.cursor(i);return this.W(r,e)}Z(t){const e=this.cursor({});return new ve((i,r)=>{e.onerror=s=>{const l=J_(s.target.error);r(l)},e.onsuccess=s=>{const l=s.target.result;l?t(l.primaryKey,l.value).next(d=>{d?l.continue():i()}):i()}})}W(t,e){const i=[];return new ve((r,s)=>{t.onerror=l=>{s(l.target.error)},t.onsuccess=l=>{const d=l.target.result;if(!d)return void r();const f=new eM(d),m=e(d.primaryKey,d.value,f);if(m instanceof ve){const y=m.catch(C=>(f.done(),ve.reject(C)));i.push(y)}f.isDone?r():null===f.K?d.continue():d.continue(f.K)}}).next(()=>ve.waitFor(i))}options(t,e){let i;return void 0!==t&&("string"==typeof t?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.Y?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Td(n){return new ve((t,e)=>{n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{const r=J_(i.target.error);e(r)}})}let oC=!1;function J_(n){const t=Ea.S((0,B.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const i=new Ge("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return oC||(oC=!0,setTimeout(()=>{throw i},0)),i}}return n}class uw{constructor(t,e){this.asyncQueue=t,this.tt=e,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(t){var e=this;Ke("IndexBackiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,Ee.Z)(function*(){e.task=null;try{Ke("IndexBackiller",`Documents written: ${yield e.tt.nt()}`)}catch(i){nu(i)?Ke("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield tu(i)}yield e.et(6e4)}))}}class tM{constructor(t,e){this.localStore=t,this.persistence=e}nt(t=50){var e=this;return(0,Ee.Z)(function*(){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>e.st(i,t))})()}st(t,e){const i=new Set;let r=e,s=!0;return ve.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(l=>{if(null!==l&&!i.has(l))return Ke("IndexBackiller",`Processing collection: ${l}`),this.it(t,l,r).next(d=>{r-=d,i.add(l)});s=!1})).next(()=>e-r)}it(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(r=>this.localStore.localDocuments.getNextDocuments(t,e,r,i).next(s=>{const l=s.changes;return this.localStore.indexManager.updateIndexEntries(t,l).next(()=>this.rt(r,s)).next(d=>(Ke("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(t,e,d))).next(()=>l.size)}))}rt(t,e){let i=t;return e.changes.forEach((r,s)=>{const l=iC(s);rC(l,i)>0&&(i=l)}),new Xo(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}let Oo=(()=>{class n{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=r=>this.ot(r),this.ut=r=>i.writeSequenceNumber(r))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}return n.ct=-1,n})();function vg(n){return null==n}function yg(n){return 0===n&&1/n==-1/0}function aC(n){return"number"==typeof n&&Number.isInteger(n)&&!yg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Rs(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=lC(t)),t=nM(n.get(e),t);return lC(t)}function nM(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=s}}return e}function lC(n){return n+"\x01\x01"}function ea(n){const t=n.length;if(Lt(t>=2),2===t)return Lt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),On.emptyPath();const e=t-2,i=[];let r="";for(let s=0;s<t;){const l=n.indexOf("\x01",s);switch((l<0||l>e)&&Dt(),n.charAt(l+1)){case"\x01":const d=n.substring(s,l);let f;0===r.length?f=d:(r+=d,f=r,r=""),i.push(f);break;case"\x10":r+=n.substring(s,l),r+="\0";break;case"\x11":r+=n.substring(s,l+1);break;default:Dt()}s=l+2}return new On(i)}const iu=["userId","batchId"];function dw(n,t){return[n,Rs(t)]}function iM(n,t,e){return[n,Rs(t),e]}const cC={},gf=["prefixPath","collectionGroup","readTime","documentId"],uC=["prefixPath","collectionGroup","documentId"],Yk=["collectionGroup","readTime","prefixPath","documentId"],dC=["canonicalId","targetId"],OV=["targetId","path"],kV=["path","targetId"],Zk=["collectionId","parent"],Kk=["indexId","uid"],rM=["uid","sequenceNumber"],Qk=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ts=["indexId","uid","orderedDocumentKey"],sM=["userId","collectionPath","documentId"],Jk=["userId","collectionPath","largestBatchId"],Xk=["userId","collectionGroup","largestBatchId"],hC=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],eP=[...hC,"documentOverlays"],fC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],pC=fC,wg=[...pC,"indexConfiguration","indexState","indexEntries"];class gC extends lw{constructor(t,e){super(),this.ht=t,this.currentSequenceNumber=e}}function ys(n,t){const e=yt(n);return Ea.M(e.ht,t)}function mC(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Id(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function _C(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}class Pi{constructor(t,e){this.comparator=t,this.root=e||ns.EMPTY}insert(t,e){return new Pi(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,ns.BLACK,null,null))}remove(t){return new Pi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ns.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(0===i)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(0===r)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new bg(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new bg(this.root,t,this.comparator,!1)}getReverseIterator(){return new bg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new bg(this.root,t,this.comparator,!0)}}class bg{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(0===s){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ns{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=i??ns.RED,this.left=r??ns.EMPTY,this.right=s??ns.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new ns(t??this.key,e??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):0===s?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ns.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return ns.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ns.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ns.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Dt();const t=this.left.check();if(t!==this.right.check())throw Dt();return t+(this.isRed()?0:1)}}ns.EMPTY=null,ns.RED=!0,ns.BLACK=!1,ns.EMPTY=new class{constructor(){this.size=0}get key(){throw Dt()}get value(){throw Dt()}get color(){throw Dt()}get left(){throw Dt()}get right(){throw Dt()}copy(n,t,e,i,r){return this}insert(n,t,e){return new ns(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Gn{constructor(t){this.comparator=t,this.data=new Pi(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new oM(this.data.getIterator())}getIteratorFrom(t){return new oM(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof Gn)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Gn(this.comparator);return e.data=t,e}}class oM{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function mf(n){return n.hasNext()?n.getNext():void 0}class rr{constructor(t){this.fields=t,t.sort(ki.comparator)}static empty(){return new rr([])}unionWith(t){let e=new Gn(ki.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new rr(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return gg(this.fields,t.fields,(e,i)=>e.isEqual(i))}}class Ca extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class jr{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new Ca("Invalid base64 string: "+r):r}}(t);return new jr(e)}static fromUint8Array(t){const e=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(t);return new jr(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return on(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}jr.EMPTY_BYTE_STRING=new jr("");const aM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sd(n){if(Lt(!!n),"string"==typeof n){let t=0;const e=aM.exec(n);if(Lt(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:vr(n.seconds),nanos:vr(n.nanos)}}function vr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ru(n){return"string"==typeof n?jr.fromBase64String(n):jr.fromUint8Array(n)}function hw(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=n?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function Dg(n){const t=n.mapValue.fields.__previous_value__;return hw(t)?Dg(t):t}function su(n){const t=Sd(n.mapValue.fields.__local_write_time__.timestampValue);return new Wi(t.seconds,t.nanos)}class tP{constructor(t,e,i,r,s,l,d,f,m){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=m}}class ou{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new ou("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof ou&&t.projectId===this.projectId&&t.database===this.database}}const Ad={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},fw={nullValue:"NULL_VALUE"};function au(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?hw(n)?4:bC(n)?9007199254740991:10:Dt()}function cl(n,t){if(n===t)return!0;const e=au(n);if(e!==au(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return su(n).isEqual(su(t));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=Sd(i.timestampValue),l=Sd(r.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return r=t,ru(n.bytesValue).isEqual(ru(r.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,r){return vr(i.geoPointValue.latitude)===vr(r.geoPointValue.latitude)&&vr(i.geoPointValue.longitude)===vr(r.geoPointValue.longitude)}(n,t);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return vr(i.integerValue)===vr(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=vr(i.doubleValue),l=vr(r.doubleValue);return s===l?yg(s)===yg(l):isNaN(s)&&isNaN(l)}return!1}(n,t);case 9:return gg(n.arrayValue.values||[],t.arrayValue.values||[],cl);case 10:return function(i,r){const s=i.mapValue.fields||{},l=r.mapValue.fields||{};if(mC(s)!==mC(l))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(void 0===l[d]||!cl(s[d],l[d])))return!1;return!0}(n,t);default:return Dt()}var r}function Md(n,t){return void 0!==(n.values||[]).find(e=>cl(e,t))}function Nd(n,t){if(n===t)return 0;const e=au(n),i=au(t);if(e!==i)return on(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return on(n.booleanValue,t.booleanValue);case 2:return function(r,s){const l=vr(r.integerValue||r.doubleValue),d=vr(s.integerValue||s.doubleValue);return l<d?-1:l>d?1:l===d?0:isNaN(l)?isNaN(d)?0:-1:1}(n,t);case 3:return vC(n.timestampValue,t.timestampValue);case 4:return vC(su(n),su(t));case 5:return on(n.stringValue,t.stringValue);case 6:return function(r,s){const l=ru(r),d=ru(s);return l.compareTo(d)}(n.bytesValue,t.bytesValue);case 7:return function(r,s){const l=r.split("/"),d=s.split("/");for(let f=0;f<l.length&&f<d.length;f++){const m=on(l[f],d[f]);if(0!==m)return m}return on(l.length,d.length)}(n.referenceValue,t.referenceValue);case 8:return function(r,s){const l=on(vr(r.latitude),vr(s.latitude));return 0!==l?l:on(vr(r.longitude),vr(s.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(r,s){const l=r.values||[],d=s.values||[];for(let f=0;f<l.length&&f<d.length;++f){const m=Nd(l[f],d[f]);if(m)return m}return on(l.length,d.length)}(n.arrayValue,t.arrayValue);case 10:return function(r,s){if(r===Ad.mapValue&&s===Ad.mapValue)return 0;if(r===Ad.mapValue)return 1;if(s===Ad.mapValue)return-1;const l=r.fields||{},d=Object.keys(l),f=s.fields||{},m=Object.keys(f);d.sort(),m.sort();for(let y=0;y<d.length&&y<m.length;++y){const C=on(d[y],m[y]);if(0!==C)return C;const A=Nd(l[d[y]],f[m[y]]);if(0!==A)return A}return on(d.length,m.length)}(n.mapValue,t.mapValue);default:throw Dt()}}function vC(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return on(n,t);const e=Sd(n),i=Sd(t),r=on(e.seconds,i.seconds);return 0!==r?r:on(e.nanos,i.nanos)}function _f(n){return pw(n)}function pw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=Sd(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ru(n.bytesValue).toBase64():"referenceValue"in n?ft.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const l of i.values||[])s?s=!1:r+=",",r+=pw(l);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",l=!0;for(const d of r)l?l=!1:s+=",",s+=`${d}:${pw(i.fields[d])}`;return s+"}"}(n.mapValue):Dt();var t}function vf(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function X_(n){return!!n&&"integerValue"in n}function xd(n){return!!n&&"arrayValue"in n}function yC(n){return!!n&&"nullValue"in n}function wC(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ev(n){return!!n&&"mapValue"in n}function Eg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return Id(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=Eg(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Eg(n.arrayValue.values[e]);return t}return Object.assign({},n)}function bC(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function lM(n){return"nullValue"in n?fw:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?vf(ou.empty(),ft.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Dt()}function cM(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?vf(ou.empty(),ft.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ad:Dt()}function DC(n,t){const e=Nd(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function uM(n,t){const e=Nd(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}class Os{constructor(t){this.value=t}static empty(){return new Os({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!ev(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Eg(e)}setAll(t){let e=ki.emptyPath(),i={},r=[];t.forEach((l,d)=>{if(!e.isImmediateParentOf(d)){const f=this.getFieldsMap(e);this.applyChanges(f,i,r),i={},r=[],e=d.popLast()}l?i[d.lastSegment()]=Eg(l):r.push(d.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,i,r)}delete(t){const e=this.field(t.popLast());ev(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return cl(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];ev(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){Id(e,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new Os(Eg(this.value))}}function dM(n){const t=[];return Id(n.fields,(e,i)=>{const r=new ki([e]);if(ev(i)){const s=dM(i.mapValue).fields;if(0===s.length)t.push(r);else for(const l of s)t.push(r.child(l))}else t.push(r)}),new rr(t)}class Fi{constructor(t,e,i,r,s,l,d){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=s,this.data=l,this.documentState=d}static newInvalidDocument(t){return new Fi(t,0,Bt.min(),Bt.min(),Bt.min(),Os.empty(),0)}static newFoundDocument(t,e,i,r){return new Fi(t,1,e,Bt.min(),i,r,0)}static newNoDocument(t,e){return new Fi(t,2,e,Bt.min(),Bt.min(),Os.empty(),0)}static newUnknownDocument(t,e){return new Fi(t,3,e,Bt.min(),Bt.min(),Os.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Bt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Os.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Os.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Bt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Fi&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Fi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Rd{constructor(t,e){this.position=t,this.inclusive=e}}function hM(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const s=t[r],l=n.position[r];if(i=s.field.isKeyField()?ft.comparator(ft.fromName(l.referenceValue),e.key):Nd(l,e.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function fM(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!cl(n.position[e],t.position[e]))return!1;return!0}class Cg{constructor(t,e="asc"){this.field=t,this.dir=e}}function nP(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}class pM{}class kn extends pM{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,i):new _M(t,e,i):"array-contains"===e?new wM(t,i):"in"===e?new MC(t,i):"not-in"===e?new bM(t,i):"array-contains-any"===e?new NC(t,i):new kn(t,e,i)}static createKeyFieldInFilter(t,e,i){return"in"===e?new vM(t,i):new yM(t,i)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(Nd(e,this.value)):null!==e&&au(this.value)===au(e)&&this.matchesComparison(Nd(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Dt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ai extends pM{constructor(t,e){super(),this.filters=t,this.op=e,this.lt=null}static create(t,e){return new ai(t,e)}matches(t){return Tg(this)?void 0===this.filters.find(e=>!e.matches(t)):void 0!==this.filters.find(e=>e.matches(t))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const t=this.ft(e=>e.isInequality());return null!==t?t.field:null}ft(t){for(const e of this.getFlattenedFilters())if(t(e))return e;return null}}function Tg(n){return"and"===n.op}function EC(n){return"or"===n.op}function CC(n){return gM(n)&&Tg(n)}function gM(n){for(const t of n.filters)if(t instanceof ai)return!1;return!0}function TC(n){if(n instanceof kn)return n.field.canonicalString()+n.op.toString()+_f(n.value);if(CC(n))return n.filters.map(t=>TC(t)).join(",");{const t=n.filters.map(e=>TC(e)).join(",");return`${n.op}(${t})`}}function mM(n,t){return n instanceof kn?(e=n,(i=t)instanceof kn&&e.op===i.op&&e.field.isEqual(i.field)&&cl(e.value,i.value)):n instanceof ai?function(e,i){return i instanceof ai&&e.op===i.op&&e.filters.length===i.filters.length&&e.filters.reduce((r,s,l)=>r&&mM(s,i.filters[l]),!0)}(n,t):void Dt();var e,i}function IC(n,t){const e=n.filters.concat(t);return ai.create(e,n.op)}function SC(n){return n instanceof kn?`${(t=n).field.canonicalString()} ${t.op} ${_f(t.value)}`:n instanceof ai?function(t){return t.op.toString()+" {"+t.getFilters().map(SC).join(" ,")+"}"}(n):"Filter";var t}class _M extends kn{constructor(t,e,i){super(t,e,i),this.key=ft.fromName(i.referenceValue)}matches(t){const e=ft.comparator(t.key,this.key);return this.matchesComparison(e)}}class vM extends kn{constructor(t,e){super(t,"in",e),this.keys=AC(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class yM extends kn{constructor(t,e){super(t,"not-in",e),this.keys=AC(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function AC(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(i=>ft.fromName(i.referenceValue))}class wM extends kn{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return xd(e)&&Md(e.arrayValue,this.value)}}class MC extends kn{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Md(this.value.arrayValue,e)}}class bM extends kn{constructor(t,e){super(t,"not-in",e)}matches(t){if(Md(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Md(this.value.arrayValue,e)}}class NC extends kn{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!xd(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>Md(this.value.arrayValue,i))}}class xC{constructor(t,e=null,i=[],r=[],s=null,l=null,d=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=l,this.endAt=d,this.dt=null}}function lu(n,t=null,e=[],i=[],r=null,s=null,l=null){return new xC(n,t,e,i,r,s,l)}function yf(n){const t=yt(n);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>TC(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),vg(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>_f(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>_f(i)).join(",")),t.dt=e}return t.dt}function tv(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!nP(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!mM(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!fM(n.startAt,t.startAt)&&fM(n.endAt,t.endAt)}function cu(n){return ft.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function mw(n,t){return n.filters.filter(e=>e instanceof kn&&e.field.isEqual(t))}function _w(n,t,e){let i=fw,r=!0;for(const s of mw(n,t)){let l=fw,d=!0;switch(s.op){case"<":case"<=":l=lM(s.value);break;case"==":case"in":case">=":l=s.value;break;case">":l=s.value,d=!1;break;case"!=":case"not-in":l=fw}DC({value:i,inclusive:r},{value:l,inclusive:d})<0&&(i=l,r=d)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const l=e.position[s];DC({value:i,inclusive:r},{value:l,inclusive:e.inclusive})<0&&(i=l,r=e.inclusive);break}return{value:i,inclusive:r}}function iP(n,t,e){let i=Ad,r=!0;for(const s of mw(n,t)){let l=Ad,d=!0;switch(s.op){case">=":case">":l=cM(s.value),d=!1;break;case"==":case"in":case"<=":l=s.value;break;case"<":l=s.value,d=!1;break;case"!=":case"not-in":l=Ad}uM({value:i,inclusive:r},{value:l,inclusive:d})>0&&(i=l,r=d)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const l=e.position[s];uM({value:i,inclusive:r},{value:l,inclusive:e.inclusive})>0&&(i=l,r=e.inclusive);break}return{value:i,inclusive:r}}class ic{constructor(t,e=null,i=[],r=[],s=null,l="F",d=null,f=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=l,this.startAt=d,this.endAt=f,this.wt=null,this._t=null}}function RC(n,t,e,i,r,s,l,d){return new ic(n,t,e,i,r,s,l,d)}function nv(n){return new ic(n)}function wf(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function OC(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function vw(n){for(const t of n.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function kC(n){return null!==n.collectionGroup}function Ta(n){const t=yt(n);if(null===t.wt){t.wt=[];const e=vw(t),i=OC(t);if(null!==e&&null===i)e.isKeyField()||t.wt.push(new Cg(e)),t.wt.push(new Cg(ki.keyField(),"asc"));else{let r=!1;for(const s of t.explicitOrderBy)t.wt.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new Cg(ki.keyField(),s))}}}return t.wt}function lo(n){const t=yt(n);if(!t._t)if("F"===t.limitType)t._t=lu(t.path,t.collectionGroup,Ta(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const s of Ta(t))e.push(new Cg(s.field,"desc"===s.dir?"asc":"desc"));const i=t.endAt?new Rd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Rd(t.startAt.position,t.startAt.inclusive):null;t._t=lu(t.path,t.collectionGroup,e,t.filters,t.limit,i,r)}return t._t}function Ig(n,t){t.getFirstInequalityField(),vw(n);const e=n.filters.concat([t]);return new ic(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function bf(n,t,e){return new ic(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function ws(n,t){return tv(lo(n),lo(t))&&n.limitType===t.limitType}function rP(n){return`${yf(lo(n))}|lt:${n.limitType}`}function yw(n){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(i=>SC(i)).join(", ")}]`),vg(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(i=>{return`${(r=i).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>_f(i)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>_f(i)).join(",")),`Target(${e})`}(lo(n))}; limitType=${n.limitType})`}function Sg(n,t){return t.isFoundDocument()&&function(e,i){const r=i.key.path;return null!==e.collectionGroup?i.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):ft.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}(n,t)&&function(e,i){for(const r of Ta(e))if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,t)&&function(e,i){for(const r of e.filters)if(!r.matches(i))return!1;return!0}(n,t)&&(i=t,!((e=n).startAt&&!function(r,s,l){const d=hM(r,s,l);return r.inclusive?d<=0:d<0}(e.startAt,Ta(e),i)||e.endAt&&!function(r,s,l){const d=hM(r,s,l);return r.inclusive?d>=0:d>0}(e.endAt,Ta(e),i)));var e,i}function DM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function PC(n){return(t,e)=>{let i=!1;for(const r of Ta(n)){const s=EM(r,t,e);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function EM(n,t,e){const i=n.field.isKeyField()?ft.comparator(t.key,e.key):function(r,s,l){const d=s.data.field(r),f=l.data.field(r);return null!==d&&null!==f?Nd(d,f):Dt()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Dt()}}class rc{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,t))return s}has(t){return void 0!==this.get(t)}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(void 0===r)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return 1===i.length?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Id(this.inner,(e,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return _C(this.inner)}size(){return this.innerSize}}const CM=new Pi(ft.comparator);function ko(){return CM}const TM=new Pi(ft.comparator);function iv(...n){let t=TM;for(const e of n)t=t.insert(e.key,e);return t}function Ag(n){let t=TM;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function sc(){return rv()}function IM(){return rv()}function rv(){return new rc(n=>n.toString(),(n,t)=>n.isEqual(t))}const ww=new Pi(ft.comparator),SM=new Gn(ft.comparator);function fn(...n){let t=SM;for(const e of n)t=t.add(e);return t}const AM=new Gn(on);function FC(){return AM}function Mg(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yg(t)?"-0":t}}function Ng(n){return{integerValue:""+n}}function MM(n,t){return aC(t)?Ng(t):Mg(n,t)}class bw{constructor(){this._=void 0}}function sP(n,t,e){return n instanceof Df?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&hw(r)&&(r=Dg(r)),r&&(s.fields.__previous_value__=r),{mapValue:s}}(e,t):n instanceof Ef?BC(n,t):n instanceof Cf?xM(n,t):function(i,r){const s=LC(i,r),l=oP(s)+oP(i.gt);return X_(s)&&X_(i.gt)?Ng(l):Mg(i.serializer,l)}(n,t)}function NM(n,t,e){return n instanceof Ef?BC(n,t):n instanceof Cf?xM(n,t):e}function LC(n,t){return n instanceof sv?X_(e=t)||(i=e)&&"doubleValue"in i?t:{integerValue:0}:null;var i,e}class Df extends bw{}class Ef extends bw{constructor(t){super(),this.elements=t}}function BC(n,t){const e=aP(t);for(const i of n.elements)e.some(r=>cl(r,i))||e.push(i);return{arrayValue:{values:e}}}class Cf extends bw{constructor(t){super(),this.elements=t}}function xM(n,t){let e=aP(t);for(const i of n.elements)e=e.filter(r=>!cl(r,i));return{arrayValue:{values:e}}}class sv extends bw{constructor(t,e){super(),this.serializer=t,this.gt=e}}function oP(n){return vr(n.integerValue||n.doubleValue)}function aP(n){return xd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Dw{constructor(t,e){this.field=t,this.transform=e}}class Ew{constructor(t,e){this.version=t,this.transformResults=e}}class qi{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new qi}static exists(t){return new qi(void 0,t)}static updateTime(t){return new qi(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Cw(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class ov{}function xg(n,t){if(!n.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return n.isNoDocument()?new oc(n.key,qi.none()):new lv(n.key,n.data,qi.none());{const e=n.data,i=Os.empty();let r=new Gn(ki.comparator);for(let s of t.fields)if(!r.has(s)){let l=e.field(s);null===l&&s.length>1&&(s=s.popLast(),l=e.field(s)),null===l?i.delete(s):i.set(s,l),r=r.add(s)}return new uu(n.key,i,new rr(r.toArray()),qi.none())}}function lP(n,t,e){n instanceof lv?function(i,r,s){const l=i.value.clone(),d=kM(i.fieldTransforms,r,s.transformResults);l.setAll(d),r.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,t,e):n instanceof uu?function(i,r,s){if(!Cw(i.precondition,r))return void r.convertToUnknownDocument(s.version);const l=kM(i.fieldTransforms,r,s.transformResults),d=r.data;d.setAll(VC(i)),d.setAll(l),r.convertToFoundDocument(s.version,d).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function av(n,t,e,i){return n instanceof lv?function(r,s,l,d){if(!Cw(r.precondition,s))return l;const f=r.value.clone(),m=PM(r.fieldTransforms,d,s);return f.setAll(m),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null}(n,t,e,i):n instanceof uu?function(r,s,l,d){if(!Cw(r.precondition,s))return l;const f=PM(r.fieldTransforms,d,s),m=s.data;return m.setAll(VC(r)),m.setAll(f),s.convertToFoundDocument(s.version,m).setHasLocalMutations(),null===l?null:l.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(y=>y.field))}(n,t,e,i):(l=e,Cw(n.precondition,s=t)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l);var s,l}function cP(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),s=LC(i.transform,r||null);null!=s&&(null===e&&(e=Os.empty()),e.set(i.field,s))}return e||null}function OM(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(i=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===i||e&&i&&gg(e,i,(r,s)=>function RM(n,t){return n.field.isEqual(t.field)&&(i=t.transform,(e=n.transform)instanceof Ef&&i instanceof Ef||e instanceof Cf&&i instanceof Cf?gg(e.elements,i.elements,cl):e instanceof sv&&i instanceof sv?cl(e.gt,i.gt):e instanceof Df&&i instanceof Df);var e,i}(r,s))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,i}class lv extends ov{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class uu extends ov{constructor(t,e,i,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function VC(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function kM(n,t,e){const i=new Map;Lt(n.length===e.length);for(let r=0;r<e.length;r++){const s=n[r],l=s.transform,d=t.data.field(s.field);i.set(s.field,NM(l,d,e[r]))}return i}function PM(n,t,e){const i=new Map;for(const r of n){const s=r.transform,l=e.data.field(r.field);i.set(r.field,sP(s,l,t))}return i}class oc extends ov{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class UC extends ov{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Tw{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&lP(s,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=av(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=av(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=IM();return this.mutations.forEach(r=>{const s=t.get(r.key),l=s.overlayedDocument;let d=this.applyToLocalView(l,s.mutatedFields);d=e.has(r.key)?null:d;const f=xg(l,d);null!==f&&i.set(r.key,f),l.isValidDocument()||l.convertToNoDocument(Bt.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),fn())}isEqual(t){return this.batchId===t.batchId&&gg(this.mutations,t.mutations,(e,i)=>OM(e,i))&&gg(this.baseMutations,t.baseMutations,(e,i)=>OM(e,i))}}class HC{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){Lt(t.mutations.length===i.length);let r=ww;const s=t.mutations;for(let l=0;l<s.length;l++)r=r.insert(s[l].key,i[l].version);return new HC(t,e,i,r)}}class Iw{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class FM{constructor(t,e){this.count=t,this.unchangedNames=e}}var Gr,Pn;function LM(n){switch(n){default:return Dt();case be.CANCELLED:case be.UNKNOWN:case be.DEADLINE_EXCEEDED:case be.RESOURCE_EXHAUSTED:case be.INTERNAL:case be.UNAVAILABLE:case be.UNAUTHENTICATED:return!1;case be.INVALID_ARGUMENT:case be.NOT_FOUND:case be.ALREADY_EXISTS:case be.PERMISSION_DENIED:case be.FAILED_PRECONDITION:case be.ABORTED:case be.OUT_OF_RANGE:case be.UNIMPLEMENTED:case be.DATA_LOSS:return!0}}function jC(n){if(void 0===n)return Oi("GRPC error has no .code"),be.UNKNOWN;switch(n){case Gr.OK:return be.OK;case Gr.CANCELLED:return be.CANCELLED;case Gr.UNKNOWN:return be.UNKNOWN;case Gr.DEADLINE_EXCEEDED:return be.DEADLINE_EXCEEDED;case Gr.RESOURCE_EXHAUSTED:return be.RESOURCE_EXHAUSTED;case Gr.INTERNAL:return be.INTERNAL;case Gr.UNAVAILABLE:return be.UNAVAILABLE;case Gr.UNAUTHENTICATED:return be.UNAUTHENTICATED;case Gr.INVALID_ARGUMENT:return be.INVALID_ARGUMENT;case Gr.NOT_FOUND:return be.NOT_FOUND;case Gr.ALREADY_EXISTS:return be.ALREADY_EXISTS;case Gr.PERMISSION_DENIED:return be.PERMISSION_DENIED;case Gr.FAILED_PRECONDITION:return be.FAILED_PRECONDITION;case Gr.ABORTED:return be.ABORTED;case Gr.OUT_OF_RANGE:return be.OUT_OF_RANGE;case Gr.UNIMPLEMENTED:return be.UNIMPLEMENTED;case Gr.DATA_LOSS:return be.DATA_LOSS;default:return Dt()}}(Pn=Gr||(Gr={}))[Pn.OK=0]="OK",Pn[Pn.CANCELLED=1]="CANCELLED",Pn[Pn.UNKNOWN=2]="UNKNOWN",Pn[Pn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pn[Pn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pn[Pn.NOT_FOUND=5]="NOT_FOUND",Pn[Pn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pn[Pn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pn[Pn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pn[Pn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pn[Pn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pn[Pn.ABORTED=10]="ABORTED",Pn[Pn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pn[Pn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pn[Pn.INTERNAL=13]="INTERNAL",Pn[Pn.UNAVAILABLE=14]="UNAVAILABLE",Pn[Pn.DATA_LOSS=15]="DATA_LOSS";class Sw{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Aw}static getOrCreateInstance(){return null===Aw&&(Aw=new Sw),Aw}onExistenceFilterMismatch(t){const e=Symbol();return this.onExistenceFilterMismatchCallbacks.set(e,t),()=>this.onExistenceFilterMismatchCallbacks.delete(e)}notifyOnExistenceFilterMismatch(t){this.onExistenceFilterMismatchCallbacks.forEach(e=>e(t))}}let Aw=null;function BM(){return new TextEncoder}const dP=new pg([4294967295,4294967295],0);function Mw(n){const t=BM().encode(n),e=new NV;return e.update(t),new Uint8Array(e.digest())}function VM(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new pg([e,i],0),new pg([r,s],0)]}class Nw{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new cv(`Invalid padding: ${e}`);if(i<0)throw new cv(`Invalid hash count: ${i}`);if(t.length>0&&0===this.hashCount)throw new cv(`Invalid hash count: ${i}`);if(0===t.length&&0!==e)throw new cv(`Invalid padding when bitmap length is 0: ${e}`);this.It=8*t.length-e,this.Tt=pg.fromNumber(this.It)}Et(t,e,i){let r=t.add(e.multiply(pg.fromNumber(i)));return 1===r.compare(dP)&&(r=new pg([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(t){return 0!=(this.bitmap[Math.floor(t/8)]&1<<t%8)}vt(t){if(0===this.It)return!1;const e=Mw(t),[i,r]=VM(e);for(let s=0;s<this.hashCount;s++){const l=this.Et(i,r,s);if(!this.At(l))return!1}return!0}static create(t,e,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),l=new Nw(s,r,e);return i.forEach(d=>l.insert(d)),l}insert(t){if(0===this.It)return;const e=Mw(t),[i,r]=VM(e);for(let s=0;s<this.hashCount;s++){const l=this.Et(i,r,s);this.Rt(l)}}Rt(t){const e=Math.floor(t/8);this.bitmap[e]|=1<<t%8}}class cv extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class uv{constructor(t,e,i,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const r=new Map;return r.set(t,dv.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new uv(Bt.min(),r,new Pi(on),ko(),fn())}}class dv{constructor(t,e,i,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new dv(i,e,fn(),fn(),fn())}}class xw{constructor(t,e,i,r){this.Pt=t,this.removedTargetIds=e,this.key=i,this.bt=r}}class UM{constructor(t,e){this.targetId=t,this.Vt=e}}class HM{constructor(t,e,i=jr.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class jM{constructor(){this.St=0,this.Dt=$C(),this.Ct=jr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(t){t.approximateByteSize()>0&&(this.Nt=!0,this.Ct=t)}Ot(){let t=fn(),e=fn(),i=fn();return this.Dt.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:Dt()}}),new dv(this.Ct,this.xt,t,e,i)}Ft(){this.Nt=!1,this.Dt=$C()}Bt(t,e){this.Nt=!0,this.Dt=this.Dt.insert(t,e)}Lt(t){this.Nt=!0,this.Dt=this.Dt.remove(t)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class hP{constructor(t){this.Gt=t,this.Qt=new Map,this.jt=ko(),this.zt=GC(),this.Wt=new Pi(on)}Ht(t){for(const e of t.Pt)t.bt&&t.bt.isFoundDocument()?this.Jt(e,t.bt):this.Yt(e,t.key,t.bt);for(const e of t.removedTargetIds)this.Yt(e,t.key,t.bt)}Xt(t){this.forEachTarget(t,e=>{const i=this.Zt(e);switch(t.state){case 0:this.te(e)&&i.$t(t.resumeToken);break;case 1:i.Ut(),i.kt||i.Ft(),i.$t(t.resumeToken);break;case 2:i.Ut(),i.kt||this.removeTarget(e);break;case 3:this.te(e)&&(i.Kt(),i.$t(t.resumeToken));break;case 4:this.te(e)&&(this.ee(e),i.$t(t.resumeToken));break;default:Dt()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Qt.forEach((i,r)=>{this.te(r)&&e(r)})}ne(t){var e;const i=t.targetId,r=t.Vt.count,s=this.se(i);if(s){const l=s.target;if(cu(l))if(0===r){const d=new ft(l.path);this.Yt(i,d,Fi.newNoDocument(d,Bt.min()))}else Lt(1===r);else{const d=this.ie(i);if(d!==r){const f=this.re(t,d);0!==f&&(this.ee(i),this.Wt=this.Wt.insert(i,2===f?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(e=Sw.instance)||void 0===e||e.notifyOnExistenceFilterMismatch(function(m,y,C){var A,x,P,F,U,ee;const oe={localCacheCount:y,existenceFilterCount:C.count},te=C.unchangedNames;return te&&(oe.bloomFilter={applied:0===m,hashCount:null!==(A=te?.hashCount)&&void 0!==A?A:0,bitmapLength:null!==(F=null===(P=null===(x=te?.bits)||void 0===x?void 0:x.bitmap)||void 0===P?void 0:P.length)&&void 0!==F?F:0,padding:null!==(ee=null===(U=te?.bits)||void 0===U?void 0:U.padding)&&void 0!==ee?ee:0}),oe}(f,d,t.Vt))}}}}re(t,e){const{unchangedNames:i,count:r}=t.Vt;if(!i||!i.bits)return 1;const{bits:{bitmap:s="",padding:l=0},hashCount:d=0}=i;let f,m;try{f=ru(s).toUint8Array()}catch(y){if(y instanceof Ca)return Jo("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw y}try{m=new Nw(f,l,d)}catch(y){return Jo(y instanceof cv?"BloomFilter error: ":"Applying bloom filter failed: ",y),1}return 0===m.It?1:r!==e-this.oe(t.targetId,m)?2:0}oe(t,e){const i=this.Gt.getRemoteKeysForTarget(t);let r=0;return i.forEach(s=>{const l=this.Gt.ue(),d=`projects/${l.projectId}/databases/${l.database}/documents/${s.path.canonicalString()}`;e.vt(d)||(this.Yt(t,s,null),r++)}),r}ce(t){const e=new Map;this.Qt.forEach((s,l)=>{const d=this.se(l);if(d){if(s.current&&cu(d.target)){const f=new ft(d.target.path);null!==this.jt.get(f)||this.ae(l,f)||this.Yt(l,f,Fi.newNoDocument(f,t))}s.Mt&&(e.set(l,s.Ot()),s.Ft())}});let i=fn();this.zt.forEach((s,l)=>{let d=!0;l.forEachWhile(f=>{const m=this.se(f);return!m||"TargetPurposeLimboResolution"===m.purpose||(d=!1,!1)}),d&&(i=i.add(s))}),this.jt.forEach((s,l)=>l.setReadTime(t));const r=new uv(t,e,this.Wt,this.jt,i);return this.jt=ko(),this.zt=GC(),this.Wt=new Pi(on),r}Jt(t,e){if(!this.te(t))return;const i=this.ae(t,e.key)?2:0;this.Zt(t).Bt(e.key,i),this.jt=this.jt.insert(e.key,e),this.zt=this.zt.insert(e.key,this.he(e.key).add(t))}Yt(t,e,i){if(!this.te(t))return;const r=this.Zt(t);this.ae(t,e)?r.Bt(e,1):r.Lt(e),this.zt=this.zt.insert(e,this.he(e).delete(t)),i&&(this.jt=this.jt.insert(e,i))}removeTarget(t){this.Qt.delete(t)}ie(t){const e=this.Zt(t).Ot();return this.Gt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}qt(t){this.Zt(t).qt()}Zt(t){let e=this.Qt.get(t);return e||(e=new jM,this.Qt.set(t,e)),e}he(t){let e=this.zt.get(t);return e||(e=new Gn(on),this.zt=this.zt.insert(t,e)),e}te(t){const e=null!==this.se(t);return e||Ke("WatchChangeAggregator","Detected inactive target",t),e}se(t){const e=this.Qt.get(t);return e&&e.kt?null:this.Gt.le(t)}ee(t){this.Qt.set(t,new jM),this.Gt.getRemoteKeysForTarget(t).forEach(e=>{this.Yt(t,e,null)})}ae(t,e){return this.Gt.getRemoteKeysForTarget(t).has(e)}}function GC(){return new Pi(ft.comparator)}function $C(){return new Pi(ft.comparator)}const GM={asc:"ASCENDING",desc:"DESCENDING"},fP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$M={and:"AND",or:"OR"};class pP{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function zC(n,t){return n.useProto3Json||vg(t)?t:{value:t}}function Rg(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function zM(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function WC(n,t){return Rg(n,t.toTimestamp())}function sr(n){return Lt(!!n),Bt.fromTimestamp(function(t){const e=Sd(t);return new Wi(e.seconds,e.nanos)}(n))}function Rw(n,t){return(e=n,new On(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function Ow(n){const t=On.fromString(n);return Lt(tT(t)),t}function hv(n,t){return Rw(n.databaseId,t.path)}function ac(n,t){const e=Ow(t);if(e.get(1)!==n.databaseId.projectId)throw new Ge(be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Ge(be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new ft(Od(e))}function fv(n,t){return Rw(n.databaseId,t)}function WM(n){const t=Ow(n);return 4===t.length?On.emptyPath():Od(t)}function Og(n){return new On(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Od(n){return Lt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function qC(n,t,e){return{name:hv(n,t),fields:e.value.mapValue.fields}}function qM(n,t,e){const i=ac(n,t.name),r=sr(t.updateTime),s=t.createTime?sr(t.createTime):Bt.min(),l=new Os({mapValue:{fields:t.fields}}),d=Fi.newFoundDocument(i,r,s,l);return e&&d.setHasCommittedMutations(),e?d.setHasCommittedMutations():d}function Tf(n,t){let e;if(t instanceof lv)e={update:qC(n,t.key,t.value)};else if(t instanceof oc)e={delete:hv(n,t.key)};else if(t instanceof uu)e={update:qC(n,t.key,t.data),updateMask:gP(t.fieldMask)};else{if(!(t instanceof UC))return Dt();e={verify:hv(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(r,s){const l=s.transform;if(l instanceof Df)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ef)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Cf)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof sv)return{fieldPath:s.field.canonicalString(),increment:l.gt};throw Dt()}(0,i))),t.precondition.isNone||(e.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:WC(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:Dt()),e;var r}function ZC(n,t){const e=t.currentDocument?void 0!==(r=t.currentDocument).updateTime?qi.updateTime(sr(r.updateTime)):void 0!==r.exists?qi.exists(r.exists):qi.none():qi.none(),i=t.updateTransforms?t.updateTransforms.map(r=>function(s,l){let d=null;"setToServerValue"in l?(Lt("REQUEST_TIME"===l.setToServerValue),d=new Df):"appendMissingElements"in l?d=new Ef(l.appendMissingElements.values||[]):"removeAllFromArray"in l?d=new Cf(l.removeAllFromArray.values||[]):"increment"in l?d=new sv(s,l.increment):Dt();const f=ki.fromServerFormat(l.fieldPath);return new Dw(f,d)}(n,r)):[];var r;if(t.update){const r=ac(n,t.update.name),s=new Os({mapValue:{fields:t.update.fields}});if(t.updateMask){const l=new rr((t.updateMask.fieldPaths||[]).map(m=>ki.fromServerFormat(m)));return new uu(r,s,l,e,i)}return new lv(r,s,e,i)}if(t.delete){const r=ac(n,t.delete);return new oc(r,e)}if(t.verify){const r=ac(n,t.verify);return new UC(r,e)}return Dt()}function KC(n,t){return{documents:[fv(n,t.path)]}}function QC(n,t){const e={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(e.parent=fv(n,i),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=fv(n,i.popLast()),e.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(f){if(0!==f.length)return JM(ai.create(f,"and"))}(t.filters);r&&(e.structuredQuery.where=r);const s=function(f){if(0!==f.length)return f.map(m=>{return{field:kd((y=m).field),direction:ZM(y.dir)};var y})}(t.orderBy);s&&(e.structuredQuery.orderBy=s);const l=zC(n,t.limit);var d,f;return null!==l&&(e.structuredQuery.limit=l),t.startAt&&(e.structuredQuery.startAt={before:(d=t.startAt).inclusive,values:d.position}),t.endAt&&(e.structuredQuery.endAt={before:!(f=t.endAt).inclusive,values:f.position}),e}function JC(n){let t=WM(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){Lt(1===i);const y=e.from[0];y.allDescendants?r=y.collectionId:t=t.child(y.collectionId)}let s=[];e.where&&(s=function(y){const C=eT(y);return C instanceof ai&&CC(C)?C.getFilters():[C]}(e.where));let l=[];e.orderBy&&(l=e.orderBy.map(y=>{return new Cg(kg((C=y).field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction));var C}));let d=null;e.limit&&(d=function(y){let C;return C="object"==typeof y?y.value:y,vg(C)?null:C}(e.limit));let f=null;var y;e.startAt&&(f=new Rd((y=e.startAt).values||[],!!y.before));let m=null;return e.endAt&&(m=function(y){return new Rd(y.values||[],!y.before)}(e.endAt)),RC(t,r,l,s,d,"F",f,m)}function eT(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=kg(t.unaryFilter.field);return kn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const i=kg(t.unaryFilter.field);return kn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=kg(t.unaryFilter.field);return kn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=kg(t.unaryFilter.field);return kn.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Dt()}}(n):void 0!==n.fieldFilter?kn.create(kg((t=n).fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Dt()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return ai.create(t.compositeFilter.filters.map(e=>eT(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Dt()}}(t.compositeFilter.op))}(n):Dt();var t}function ZM(n){return GM[n]}function KM(n){return fP[n]}function QM(n){return $M[n]}function kd(n){return{fieldPath:n.canonicalString()}}function kg(n){return ki.fromServerFormat(n.fieldPath)}function JM(n){return n instanceof kn?function(t){if("=="===t.op){if(wC(t.value))return{unaryFilter:{field:kd(t.field),op:"IS_NAN"}};if(yC(t.value))return{unaryFilter:{field:kd(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(wC(t.value))return{unaryFilter:{field:kd(t.field),op:"IS_NOT_NAN"}};if(yC(t.value))return{unaryFilter:{field:kd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kd(t.field),op:KM(t.op),value:t.value}}}(n):n instanceof ai?function(t){const e=t.getFilters().map(i=>JM(i));return 1===e.length?e[0]:{compositeFilter:{op:QM(t.op),filters:e}}}(n):Dt()}function gP(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function tT(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Pd{constructor(t,e,i,r,s=Bt.min(),l=Bt.min(),d=jr.EMPTY_BYTE_STRING,f=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(t){return new Pd(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Pd(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Pd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Pd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class nT{constructor(t){this.fe=t}}function XM(n,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:iT(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document={name:hv(r=n.fe,(s=t).key),fields:s.data.value.mapValue.fields,updateTime:Rg(r,s.version.toTimestamp()),createTime:Rg(r,s.createTime.toTimestamp())};else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:If(t.version)};else{if(!t.isUnknownDocument())return Dt();i.unknownDocument={path:e.path.toArray(),version:If(t.version)}}var r,s;return i}function iT(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function If(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Sf(n){const t=new Wi(n.seconds,n.nanoseconds);return Bt.fromTimestamp(t)}function Fd(n,t){const e=(t.baseMutations||[]).map(s=>ZC(n.fe,s));for(let s=0;s<t.mutations.length-1;++s)s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(t.mutations[s].updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s);const i=t.mutations.map(s=>ZC(n.fe,s)),r=Wi.fromMillis(t.localWriteTimeMs);return new Tw(t.batchId,r,e,i)}function Pg(n){const t=Sf(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?Sf(n.lastLimboFreeSnapshotVersion):Bt.min();let i;var r;return void 0!==n.query.documents?(Lt(1===(r=n.query).documents.length),i=lo(nv(WM(r.documents[0])))):i=lo(JC(n.query)),new Pd(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,t,e,jr.fromBase64String(n.resumeToken))}function rT(n,t){const e=If(t.snapshotVersion),i=If(t.lastLimboFreeSnapshotVersion);let r;r=cu(t.target)?KC(n.fe,t.target):QC(n.fe,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:yf(t.target),readTime:e,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function kw(n){const t=JC({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?bf(t,t.limit,"L"):t}function Pw(n,t){return new Iw(t.largestBatchId,ZC(n.fe,t.overlayMutation))}function sT(n,t){const e=t.path.lastSegment();return[n,Rs(t.path.popLast()),e]}function oT(n,t,e,i){return{indexId:n,uid:t.uid||"",sequenceNumber:e,readTime:If(i.readTime),documentKey:Rs(i.documentKey.path),largestBatchId:i.largestBatchId}}class eN{getBundleMetadata(t,e){return tN(t).get(e).next(i=>{if(i)return{id:(r=i).bundleId,createTime:Sf(r.createTime),version:r.version};var r})}saveBundleMetadata(t,e){return tN(t).put({bundleId:(i=e).id,createTime:If(sr(i.createTime)),version:i.version});var i}getNamedQuery(t,e){return aT(t).get(e).next(i=>{if(i)return{name:(r=i).name,query:kw(r.bundledQuery),readTime:Sf(r.readTime)};var r})}saveNamedQuery(t,e){return aT(t).put({name:(i=e).name,readTime:If(sr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function tN(n){return ys(n,"bundles")}function aT(n){return ys(n,"namedQueries")}class Ld{constructor(t,e){this.serializer=t,this.userId=e}static de(t,e){return new Ld(t,e.uid||"")}getOverlay(t,e){return Fg(t).get(sT(this.userId,e)).next(i=>i?Pw(this.serializer,i):null)}getOverlays(t,e){const i=sc();return ve.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){const r=[];return i.forEach((s,l)=>{const d=new Iw(e,l);r.push(this.we(t,d))}),ve.waitFor(r)}removeOverlaysForBatchId(t,e,i){const r=new Set;e.forEach(l=>r.add(Rs(l.getCollectionPath())));const s=[];return r.forEach(l=>{const d=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,i+1],!1,!0);s.push(Fg(t).J("collectionPathOverlayIndex",d))}),ve.waitFor(s)}getOverlaysForCollection(t,e,i){const r=sc(),s=Rs(e),l=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Fg(t).j("collectionPathOverlayIndex",l).next(d=>{for(const f of d){const m=Pw(this.serializer,f);r.set(m.getKey(),m)}return r})}getOverlaysForCollectionGroup(t,e,i,r){const s=sc();let l;const d=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return Fg(t).X({index:"collectionGroupOverlayIndex",range:d},(f,m,y)=>{const C=Pw(this.serializer,m);s.size()<r||C.largestBatchId===l?(s.set(C.getKey(),C),l=C.largestBatchId):y.done()}).next(()=>s)}we(t,e){return Fg(t).put(function(i,r,s){const[l,d,f]=sT(r,s.mutation.key);return{userId:r,collectionPath:d,documentId:f,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Tf(i.fe,s.mutation)}}(this.serializer,this.userId,e))}}function Fg(n){return ys(n,"documentOverlays")}class Bd{constructor(){}_e(t,e){this.me(t,e),e.ge()}me(t,e){if("nullValue"in t)this.ye(e,5);else if("booleanValue"in t)this.ye(e,10),e.pe(t.booleanValue?1:0);else if("integerValue"in t)this.ye(e,15),e.pe(vr(t.integerValue));else if("doubleValue"in t){const i=vr(t.doubleValue);isNaN(i)?this.ye(e,13):(this.ye(e,15),yg(i)?e.pe(0):e.pe(i))}else if("timestampValue"in t){const i=t.timestampValue;this.ye(e,20),"string"==typeof i?e.Ie(i):(e.Ie(`${i.seconds||""}`),e.pe(i.nanos||0))}else if("stringValue"in t)this.Te(t.stringValue,e),this.Ee(e);else if("bytesValue"in t)this.ye(e,30),e.Ae(ru(t.bytesValue)),this.Ee(e);else if("referenceValue"in t)this.ve(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.ye(e,45),e.pe(i.latitude||0),e.pe(i.longitude||0)}else"mapValue"in t?bC(t)?this.ye(e,Number.MAX_SAFE_INTEGER):(this.Re(t.mapValue,e),this.Ee(e)):"arrayValue"in t?(this.Pe(t.arrayValue,e),this.Ee(e)):Dt()}Te(t,e){this.ye(e,25),this.be(t,e)}be(t,e){e.Ie(t)}Re(t,e){const i=t.fields||{};this.ye(e,55);for(const r of Object.keys(i))this.Te(r,e),this.me(i[r],e)}Pe(t,e){const i=t.values||[];this.ye(e,50);for(const r of i)this.me(r,e)}ve(t,e){this.ye(e,37),ft.fromName(t).path.forEach(i=>{this.ye(e,60),this.be(i,e)})}ye(t,e){t.pe(e)}Ee(t){t.pe(2)}}function nN(n){if(0===n)return 8;let t=0;return!(n>>4)&&(t+=4,n<<=4),!(n>>6)&&(t+=2,n<<=2),!(n>>7)&&(t+=1),t}function lT(n){const t=64-function(e){let i=0;for(let r=0;r<8;++r){const s=nN(255&e[r]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(t/8)}Bd.Ve=new Bd;class iN{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.De(i.value),i=e.next();this.Ce()}xe(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ne(i.value),i=e.next();this.ke()}Me(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.De(i);else if(i<2048)this.De(960|i>>>6),this.De(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.De(480|i>>>12),this.De(128|63&i>>>6),this.De(128|63&i);else{const r=e.codePointAt(0);this.De(240|r>>>18),this.De(128|63&r>>>12),this.De(128|63&r>>>6),this.De(128|63&r)}}this.Ce()}$e(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ne(i);else if(i<2048)this.Ne(960|i>>>6),this.Ne(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Ne(480|i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i);else{const r=e.codePointAt(0);this.Ne(240|r>>>18),this.Ne(128|63&r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r)}}this.ke()}Oe(t){const e=this.Fe(t),i=lT(e);this.Be(1+i),this.buffer[this.position++]=255&i;for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=255&e[r]}Le(t){const e=this.Fe(t),i=lT(e);this.Be(1+i),this.buffer[this.position++]=~(255&i);for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=~(255&e[r])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(t){this.Be(t.length),this.buffer.set(t,this.position),this.position+=t.length}Qe(){return this.buffer.slice(0,this.position)}Fe(t){const e=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(t),i=0!=(128&e[0]);e[0]^=i?255:128;for(let r=1;r<e.length;++r)e[r]^=i?255:0;return e}De(t){const e=255&t;0===e?(this.Ue(0),this.Ue(255)):255===e?(this.Ue(255),this.Ue(0)):this.Ue(e)}Ne(t){const e=255&t;0===e?(this.Ge(0),this.Ge(255)):255===e?(this.Ge(255),this.Ge(0)):this.Ge(t)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(t){this.Be(1),this.buffer[this.position++]=t}Ge(t){this.Be(1),this.buffer[this.position++]=~t}Be(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class rN{constructor(t){this.je=t}Ae(t){this.je.Se(t)}Ie(t){this.je.Me(t)}pe(t){this.je.Oe(t)}ge(){this.je.qe()}}class _P{constructor(t){this.je=t}Ae(t){this.je.xe(t)}Ie(t){this.je.$e(t)}pe(t){this.je.Le(t)}ge(){this.je.Ke()}}class Fw{constructor(){this.je=new iN,this.ze=new rN(this.je),this.We=new _P(this.je)}seed(t){this.je.seed(t)}He(t){return 0===t?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Lg{constructor(t,e,i,r){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=r}Je(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new Lg(this.indexId,this.documentKey,this.arrayValue,i)}}function du(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=cT(n.arrayValue,t.arrayValue),0!==e?e:(e=cT(n.directionalValue,t.directionalValue),0!==e?e:ft.comparator(n.documentKey,t.documentKey)))}function cT(n,t){for(let e=0;e<n.length&&e<t.length;++e){const i=n[e]-t[e];if(0!==i)return i}return n.length-t.length}class sN{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ye=t.orderBy,this.Xe=[];for(const e of t.filters){const i=e;i.isInequality()?this.Ze=i:this.Xe.push(i)}}tn(t){Lt(t.collectionGroup===this.collectionId);const e=sw(t);if(void 0!==e&&!this.en(e))return!1;const i=pf(t);let r=new Set,s=0,l=0;for(;s<i.length&&this.en(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(void 0!==this.Ze){if(!r.has(this.Ze.field.canonicalString())){const d=i[s];if(!this.nn(this.Ze,d)||!this.sn(this.Ye[l++],d))return!1}++s}for(;s<i.length;++s)if(l>=this.Ye.length||!this.sn(this.Ye[l++],i[s]))return!1;return!0}en(t){for(const e of this.Xe)if(this.nn(e,t))return!0;return!1}nn(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}sn(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}function oN(n){var t,e;if(Lt(n instanceof kn||n instanceof ai),n instanceof kn){if(n instanceof MC){const r=(null===(e=null===(t=n.value.arrayValue)||void 0===t?void 0:t.values)||void 0===e?void 0:e.map(s=>kn.create(n.field,"==",s)))||[];return ai.create(r,"or")}return n}const i=n.filters.map(r=>oN(r));return ai.create(i,n.op)}function vP(n){if(0===n.getFilters().length)return[];const t=dT(oN(n));return Lt(Lw(t)),Af(t)||uT(t)?[t]:t.getFilters()}function Af(n){return n instanceof kn}function uT(n){return n instanceof ai&&CC(n)}function Lw(n){return Af(n)||uT(n)||function(t){if(t instanceof ai&&EC(t)){for(const e of t.getFilters())if(!Af(e)&&!uT(e))return!1;return!0}return!1}(n)}function dT(n){if(Lt(n instanceof kn||n instanceof ai),n instanceof kn)return n;if(1===n.filters.length)return dT(n.filters[0]);const t=n.filters.map(i=>dT(i));let e=ai.create(t,n.op);return e=hT(e),Lw(e)?e:(Lt(e instanceof ai),Lt(Tg(e)),Lt(e.filters.length>1),e.filters.reduce((i,r)=>aN(i,r)))}function aN(n,t){let e;return Lt(n instanceof kn||n instanceof ai),Lt(t instanceof kn||t instanceof ai),e=n instanceof kn?t instanceof kn?ai.create([n,t],"and"):lN(n,t):t instanceof kn?lN(t,n):function(i,r){if(Lt(i.filters.length>0&&r.filters.length>0),Tg(i)&&Tg(r))return IC(i,r.getFilters());const s=EC(i)?i:r,l=EC(i)?r:i,d=s.filters.map(f=>aN(f,l));return ai.create(d,"or")}(n,t),hT(e)}function lN(n,t){if(Tg(t))return IC(t,n.getFilters());{const e=t.filters.map(i=>aN(n,i));return ai.create(e,"or")}}function hT(n){if(Lt(n instanceof kn||n instanceof ai),n instanceof kn)return n;const t=n.getFilters();if(1===t.length)return hT(t[0]);if(gM(n))return n;const e=t.map(r=>hT(r)),i=[];return e.forEach(r=>{r instanceof kn?i.push(r):r instanceof ai&&(r.op===n.op?i.push(...r.filters):i.push(r))}),1===i.length?i[0]:ai.create(i,n.op)}class pv{constructor(){this.rn=new fT}addToCollectionParentIndex(t,e){return this.rn.add(e),ve.resolve()}getCollectionParents(t,e){return ve.resolve(this.rn.getEntries(e))}addFieldIndex(t,e){return ve.resolve()}deleteFieldIndex(t,e){return ve.resolve()}getDocumentsMatchingTarget(t,e){return ve.resolve(null)}getIndexType(t,e){return ve.resolve(0)}getFieldIndexes(t,e){return ve.resolve([])}getNextCollectionGroupToUpdate(t){return ve.resolve(null)}getMinOffset(t,e){return ve.resolve(Xo.min())}getMinOffsetFromCollectionGroup(t,e){return ve.resolve(Xo.min())}updateCollectionGroup(t,e,i){return ve.resolve()}updateIndexEntries(t,e){return ve.resolve()}}class fT{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new Gn(On.comparator),s=!r.has(i);return this.index[e]=r.add(i),s}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Gn(On.comparator)).toArray()}}const Bw=new Uint8Array(0);class yP{constructor(t,e){this.user=t,this.databaseId=e,this.on=new fT,this.un=new rc(i=>yf(i),(i,r)=>tv(i,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.on.has(e)){const i=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this.on.add(e)});const s={collectionId:i,parent:Rs(r)};return gv(t).put(s)}return ve.resolve()}getCollectionParents(t,e){const i=[],r=IDBKeyRange.bound([e,""],[XA(e),""],!1,!0);return gv(t).j(r).next(s=>{for(const l of s){if(l.collectionId!==e)break;i.push(ea(l.parent))}return i})}addFieldIndex(t,e){const i=Vw(t),r={indexId:(l=e).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var l;delete r.indexId;const s=i.add(r);if(e.indexState){const l=Vg(t);return s.next(d=>{l.put(oT(d,this.user,e.indexState.sequenceNumber,e.indexState.offset))})}return s.next()}deleteFieldIndex(t,e){const i=Vw(t),r=Vg(t),s=Bg(t);return i.delete(e.indexId).next(()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const i=Bg(t);let r=!0;const s=new Map;return ve.forEach(this.cn(e),l=>this.an(t,l).next(d=>{r&&(r=!!d),s.set(l,d)})).next(()=>{if(r){let l=fn();const d=[];return ve.forEach(s,(f,m)=>{var y;Ke("IndexedDbIndexManager",`Using index ${y=f,`id=${y.indexId}|cg=${y.collectionGroup}|f=${y.fields.map(te=>`${te.fieldPath}:${te.kind}`).join(",")}`} to execute ${yf(e)}`);const C=function(te,ce){const Ne=sw(ce);if(void 0===Ne)return null;for(const Be of mw(te,Ne.fieldPath))switch(Be.op){case"array-contains-any":return Be.value.arrayValue.values||[];case"array-contains":return[Be.value]}return null}(m,f),A=function(te,ce){const Ne=new Map;for(const Be of pf(ce))for(const ot of mw(te,Be.fieldPath))switch(ot.op){case"==":case"in":Ne.set(Be.fieldPath.canonicalString(),ot.value);break;case"not-in":case"!=":return Ne.set(Be.fieldPath.canonicalString(),ot.value),Array.from(Ne.values())}return null}(m,f),x=function(te,ce){const Ne=[];let Be=!0;for(const ot of pf(ce)){const tt=0===ot.kind?_w(te,ot.fieldPath,te.startAt):iP(te,ot.fieldPath,te.startAt);Ne.push(tt.value),Be&&(Be=tt.inclusive)}return new Rd(Ne,Be)}(m,f),P=function(te,ce){const Ne=[];let Be=!0;for(const ot of pf(ce)){const tt=0===ot.kind?iP(te,ot.fieldPath,te.endAt):_w(te,ot.fieldPath,te.endAt);Ne.push(tt.value),Be&&(Be=tt.inclusive)}return new Rd(Ne,Be)}(m,f),F=this.hn(f,m,x),U=this.hn(f,m,P),ee=this.ln(f,m,A),oe=this.fn(f.indexId,C,F,x.inclusive,U,P.inclusive,ee);return ve.forEach(oe,te=>i.H(te,e.limit).next(ce=>{ce.forEach(Ne=>{const Be=ft.fromSegments(Ne.documentKey);l.has(Be)||(l=l.add(Be),d.push(Be))})}))}).next(()=>d)}return ve.resolve(null)})}cn(t){let e=this.un.get(t);return e||(e=0===t.filters.length?[t]:vP(ai.create(t.filters,"and")).map(i=>lu(t.path,t.collectionGroup,t.orderBy,i.getFilters(),t.limit,t.startAt,t.endAt)),this.un.set(t,e),e)}fn(t,e,i,r,s,l,d){const f=(null!=e?e.length:1)*Math.max(i.length,s.length),m=f/(null!=e?e.length:1),y=[];for(let C=0;C<f;++C){const A=e?this.dn(e[C/m]):Bw,x=this.wn(t,A,i[C%m],r),P=this._n(t,A,s[C%m],l),F=d.map(U=>this.wn(t,A,U,!0));y.push(...this.createRange(x,P,F))}return y}wn(t,e,i,r){const s=new Lg(t,ft.empty(),e,i);return r?s:s.Je()}_n(t,e,i,r){const s=new Lg(t,ft.empty(),e,i);return r?s.Je():s}an(t,e){const i=new sN(e),r=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next(s=>{let l=null;for(const d of s)i.tn(d)&&(!l||d.fields.length>l.fields.length)&&(l=d);return l})}getIndexType(t,e){let i=2;const r=this.cn(e);return ve.forEach(r,s=>this.an(t,s).next(l=>{l?0!==i&&l.fields.length<function(d){let f=new Gn(ki.comparator),m=!1;for(const y of d.filters)for(const C of y.getFlattenedFilters())C.field.isKeyField()||("array-contains"===C.op||"array-contains-any"===C.op?m=!0:f=f.add(C.field));for(const y of d.orderBy)y.field.isKeyField()||(f=f.add(y.field));return f.size+(m?1:0)}(s)&&(i=1):i=0})).next(()=>null!==e.limit&&r.length>1&&2===i?1:i)}mn(t,e){const i=new Fw;for(const r of pf(t)){const s=e.data.field(r.fieldPath);if(null==s)return null;const l=i.He(r.kind);Bd.Ve._e(s,l)}return i.Qe()}dn(t){const e=new Fw;return Bd.Ve._e(t,e.He(0)),e.Qe()}gn(t,e){const i=new Fw;return Bd.Ve._e(vf(this.databaseId,e),i.He(function(r){const s=pf(r);return 0===s.length?0:s[s.length-1].kind}(t))),i.Qe()}ln(t,e,i){if(null===i)return[];let r=[];r.push(new Fw);let s=0;for(const l of pf(t)){const d=i[s++];for(const f of r)if(this.yn(e,l.fieldPath)&&xd(d))r=this.pn(r,l,d);else{const m=f.He(l.kind);Bd.Ve._e(d,m)}}return this.In(r)}hn(t,e,i){return this.ln(t,e,i.position)}In(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].Qe();return e}pn(t,e,i){const r=[...t],s=[];for(const l of i.arrayValue.values||[])for(const d of r){const f=new Fw;f.seed(d.Qe()),Bd.Ve._e(l,f.He(e.kind)),s.push(f)}return s}yn(t,e){return!!t.filters.find(i=>i instanceof kn&&i.field.isEqual(e)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(t,e){const i=Vw(t),r=Vg(t);return(e?i.j("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.j()).next(s=>{const l=[];return ve.forEach(s,d=>r.get([d.indexId,this.uid]).next(f=>{l.push(function(m,y){const C=y?new Cd(y.sequenceNumber,new Xo(Sf(y.readTime),new ft(ea(y.documentKey)),y.largestBatchId)):Cd.empty(),A=m.fields.map(([x,P])=>new ow(ki.fromServerFormat(x),P));return new mg(m.indexId,m.collectionGroup,A,C)}(d,f))})).next(()=>l)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:on(i.collectionGroup,r.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){const r=Vw(t),s=Vg(t);return this.Tn(t).next(l=>r.j("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(d=>ve.forEach(d,f=>s.put(oT(f.indexId,this.user,l,i)))))}updateIndexEntries(t,e){const i=new Map;return ve.forEach(e,(r,s)=>{const l=i.get(r.collectionGroup);return(l?ve.resolve(l):this.getFieldIndexes(t,r.collectionGroup)).next(d=>(i.set(r.collectionGroup,d),ve.forEach(d,f=>this.En(t,r,f).next(m=>{const y=this.An(s,f);return m.isEqual(y)?ve.resolve():this.vn(t,s,f,m,y)}))))})}Rn(t,e,i,r){return Bg(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(i,e.key),documentKey:e.key.path.toArray()})}Pn(t,e,i,r){return Bg(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(i,e.key),e.key.path.toArray()])}En(t,e,i){const r=Bg(t);let s=new Gn(du);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.gn(i,e)])},(l,d)=>{s=s.add(new Lg(i.indexId,e,d.arrayValue,d.directionalValue))}).next(()=>s)}An(t,e){let i=new Gn(du);const r=this.mn(e,t);if(null==r)return i;const s=sw(e);if(null!=s){const l=t.data.field(s.fieldPath);if(xd(l))for(const d of l.arrayValue.values||[])i=i.add(new Lg(e.indexId,t.key,this.dn(d),r))}else i=i.add(new Lg(e.indexId,t.key,Bw,r));return i}vn(t,e,i,r,s){Ke("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const l=[];return function(d,f,m,y,C){const A=d.getIterator(),x=f.getIterator();let P=mf(A),F=mf(x);for(;P||F;){let U=!1,ee=!1;if(P&&F){const oe=m(P,F);oe<0?ee=!0:oe>0&&(U=!0)}else null!=P?ee=!0:U=!0;U?(y(F),F=mf(x)):ee?(C(P),P=mf(A)):(P=mf(A),F=mf(x))}}(r,s,du,d=>{l.push(this.Rn(t,e,i,d))},d=>{l.push(this.Pn(t,e,i,d))}),ve.waitFor(l)}Tn(t){let e=1;return Vg(t).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),e=r.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((l,d)=>du(l,d)).filter((l,d,f)=>!d||0!==du(l,f[d-1]));const r=[];r.push(t);for(const l of i){const d=du(l,t),f=du(l,e);if(0===d)r[0]=t.Je();else if(d>0&&f<0)r.push(l),r.push(l.Je());else if(f>0)break}r.push(e);const s=[];for(let l=0;l<r.length;l+=2){if(this.bn(r[l],r[l+1]))return[];s.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Bw,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Bw,[]]))}return s}bn(t,e){return du(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(mv)}getMinOffset(t,e){return ve.mapArray(this.cn(e),i=>this.an(t,i).next(r=>r||Dt())).next(mv)}}function gv(n){return ys(n,"collectionParents")}function Bg(n){return ys(n,"indexEntries")}function Vw(n){return ys(n,"indexConfiguration")}function Vg(n){return ys(n,"indexState")}function mv(n){Lt(0!==n.length);let t=n[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;rC(r,t)<0&&(t=r),e<r.largestBatchId&&(e=r.largestBatchId)}return new Xo(t.readTime,t.documentKey,e)}const cN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ws{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new Ws(t,Ws.DEFAULT_COLLECTION_PERCENTILE,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function pT(n,t,e){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],l=IDBKeyRange.only(e.batchId);let d=0;const f=i.X({range:l},(y,C,A)=>(d++,A.delete()));s.push(f.next(()=>{Lt(1===d)}));const m=[];for(const y of e.mutations){const C=iM(t,y.key.path,e.batchId);s.push(r.delete(C)),m.push(y.key)}return ve.waitFor(s).next(()=>m)}function Uw(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw Dt();t=n.noDocument}return JSON.stringify(t).length}Ws.DEFAULT_COLLECTION_PERCENTILE=10,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ws.DEFAULT=new Ws(41943040,Ws.DEFAULT_COLLECTION_PERCENTILE,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ws.DISABLED=new Ws(-1,0,0);class Hw{constructor(t,e,i,r){this.userId=t,this.serializer=e,this.indexManager=i,this.referenceDelegate=r,this.Vn={}}static de(t,e,i,r){Lt(""!==t.uid);const s=t.isAuthenticated()?t.uid:"";return new Hw(s,e,i,r)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ul(t).X({index:"userMutationsIndex",range:i},(r,s,l)=>{e=!1,l.done()}).next(()=>e)}addMutationBatch(t,e,i,r){const s=Ug(t),l=ul(t);return l.add({}).next(d=>{Lt("number"==typeof d);const f=new Tw(d,e,i,r),m=function(A,x,P){const F=P.baseMutations.map(ee=>Tf(A.fe,ee)),U=P.mutations.map(ee=>Tf(A.fe,ee));return{userId:x,batchId:P.batchId,localWriteTimeMs:P.localWriteTime.toMillis(),baseMutations:F,mutations:U}}(this.serializer,this.userId,f),y=[];let C=new Gn((A,x)=>on(A.canonicalString(),x.canonicalString()));for(const A of r){const x=iM(this.userId,A.key.path,d);C=C.add(A.key.path.popLast()),y.push(l.put(m)),y.push(s.put(x,cC))}return C.forEach(A=>{y.push(this.indexManager.addToCollectionParentIndex(t,A))}),t.addOnCommittedListener(()=>{this.Vn[d]=f.keys()}),ve.waitFor(y).next(()=>f)})}lookupMutationBatch(t,e){return ul(t).get(e).next(i=>i?(Lt(i.userId===this.userId),Fd(this.serializer,i)):null)}Sn(t,e){return this.Vn[e]?ve.resolve(this.Vn[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const r=i.keys();return this.Vn[e]=r,r}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return ul(t).X({index:"userMutationsIndex",range:r},(l,d,f)=>{d.userId===this.userId&&(Lt(d.batchId>=i),s=Fd(this.serializer,d)),f.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return ul(t).X({index:"userMutationsIndex",range:e,reverse:!0},(r,s,l)=>{i=s.batchId,l.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ul(t).j("userMutationsIndex",e).next(i=>i.map(r=>Fd(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=dw(this.userId,e.path),r=IDBKeyRange.lowerBound(i),s=[];return Ug(t).X({range:r},(l,d,f)=>{const[m,y,C]=l,A=ea(y);if(m===this.userId&&e.path.isEqual(A))return ul(t).get(C).next(x=>{if(!x)throw Dt();Lt(x.userId===this.userId),s.push(Fd(this.serializer,x))});f.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Gn(on);const r=[];return e.forEach(s=>{const l=dw(this.userId,s.path),d=IDBKeyRange.lowerBound(l),f=Ug(t).X({range:d},(m,y,C)=>{const[A,x,P]=m,F=ea(x);A===this.userId&&s.path.isEqual(F)?i=i.add(P):C.done()});r.push(f)}),ve.waitFor(r).next(()=>this.Dn(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1,s=dw(this.userId,i),l=IDBKeyRange.lowerBound(s);let d=new Gn(on);return Ug(t).X({range:l},(f,m,y)=>{const[C,A,x]=f,P=ea(A);C===this.userId&&i.isPrefixOf(P)?P.length===r&&(d=d.add(x)):y.done()}).next(()=>this.Dn(t,d))}Dn(t,e){const i=[],r=[];return e.forEach(s=>{r.push(ul(t).get(s).next(l=>{if(null===l)throw Dt();Lt(l.userId===this.userId),i.push(Fd(this.serializer,l))}))}),ve.waitFor(r).next(()=>i)}removeMutationBatch(t,e){return pT(t.ht,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this.Cn(e.batchId)}),ve.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}Cn(t){delete this.Vn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return ve.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return Ug(t).X({range:i},(s,l,d)=>{if(s[0]===this.userId){const f=ea(s[1]);r.push(f)}else d.done()}).next(()=>{Lt(0===r.length)})})}containsKey(t,e){return gT(t,this.userId,e)}xn(t){return uN(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function gT(n,t,e){const i=dw(t,e.path),r=i[1],s=IDBKeyRange.lowerBound(i);let l=!1;return Ug(n).X({range:s,Y:!0},(d,f,m)=>{const[y,C,A]=d;y===t&&C===r&&(l=!0),m.done()}).next(()=>l)}function ul(n){return ys(n,"mutations")}function Ug(n){return ys(n,"documentMutations")}function uN(n){return ys(n,"mutationQueues")}class Vd{constructor(t){this.Nn=t}next(){return this.Nn+=2,this.Nn}static kn(){return new Vd(0)}static Mn(){return new Vd(-1)}}class dN{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.$n(t).next(e=>{const i=new Vd(e.highestTargetId);return e.highestTargetId=i.next(),this.On(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.$n(t).next(e=>Bt.fromTimestamp(new Wi(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.$n(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.$n(t).next(r=>(r.highestListenSequenceNumber=e,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.On(t,r)))}addTargetData(t,e){return this.Fn(t,e).next(()=>this.$n(t).next(i=>(i.targetCount+=1,this.Bn(e,i),this.On(t,i))))}updateTargetData(t,e){return this.Fn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>Ud(t).delete(e.targetId)).next(()=>this.$n(t)).next(i=>(Lt(i.targetCount>0),i.targetCount-=1,this.On(t,i)))}removeTargets(t,e,i){let r=0;const s=[];return Ud(t).X((l,d)=>{const f=Pg(d);f.sequenceNumber<=e&&null===i.get(f.targetId)&&(r++,s.push(this.removeTargetData(t,f)))}).next(()=>ve.waitFor(s)).next(()=>r)}forEachTarget(t,e){return Ud(t).X((i,r)=>{const s=Pg(r);e(s)})}$n(t){return mT(t).get("targetGlobalKey").next(e=>(Lt(null!==e),e))}On(t,e){return mT(t).put("targetGlobalKey",e)}Fn(t,e){return Ud(t).put(rT(this.serializer,e))}Bn(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.$n(t).next(e=>e.targetCount)}getTargetData(t,e){const i=yf(e),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return Ud(t).X({range:r,index:"queryTargetsIndex"},(l,d,f)=>{const m=Pg(d);tv(e,m.target)&&(s=m,f.done())}).next(()=>s)}addMatchingKeys(t,e,i){const r=[],s=Hd(t);return e.forEach(l=>{const d=Rs(l.path);r.push(s.put({targetId:i,path:d})),r.push(this.referenceDelegate.addReference(t,i,l))}),ve.waitFor(r)}removeMatchingKeys(t,e,i){const r=Hd(t);return ve.forEach(e,s=>{const l=Rs(s.path);return ve.waitFor([r.delete([i,l]),this.referenceDelegate.removeReference(t,i,s)])})}removeMatchingKeysForTargetId(t,e){const i=Hd(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),r=Hd(t);let s=fn();return r.X({range:i,Y:!0},(l,d,f)=>{const m=ea(l[1]),y=new ft(m);s=s.add(y)}).next(()=>s)}containsKey(t,e){const i=Rs(e.path),r=IDBKeyRange.bound([i],[XA(i)],!1,!0);let s=0;return Hd(t).X({index:"documentTargetsIndex",Y:!0,range:r},([l,d],f,m)=>{0!==l&&(s++,m.done())}).next(()=>s>0)}le(t,e){return Ud(t).get(e).next(i=>i?Pg(i):null)}}function Ud(n){return ys(n,"targets")}function mT(n){return ys(n,"targetGlobal")}function Hd(n){return ys(n,"targetDocuments")}function _T([n,t],[e,i]){const r=on(n,e);return 0===r?on(t,i):r}class hN{constructor(t){this.Ln=t,this.buffer=new Gn(_T),this.qn=0}Un(){return++this.qn}Kn(t){const e=[t,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();_T(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class fN{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(t){var e=this;Ke("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,Ee.Z)(function*(){e.Gn=null;try{yield e.localStore.collectGarbage(e.garbageCollector)}catch(i){nu(i)?Ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield tu(i)}yield e.Qn(3e5)}))}}class wP{constructor(t,e){this.jn=t,this.params=e}calculateTargetCount(t,e){return this.jn.zn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(0===e)return ve.resolve(Oo.ct);const i=new hN(e);return this.jn.forEachTarget(t,r=>i.Kn(r.sequenceNumber)).next(()=>this.jn.Wn(t,r=>i.Kn(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.jn.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.jn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(Ke("LruGarbageCollector","Garbage collection skipped; disabled"),ve.resolve(cN)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(Ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cN):this.Hn(t,e))}getCacheSize(t){return this.jn.getCacheSize(t)}Hn(t,e){let i,r,s,l,d,f,m;const y=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(C=>(C>this.params.maximumSequenceNumbersToCollect?(Ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${C}`),r=this.params.maximumSequenceNumbersToCollect):r=C,l=Date.now(),this.nthSequenceNumber(t,r))).next(C=>(i=C,d=Date.now(),this.removeTargets(t,i,e))).next(C=>(s=C,f=Date.now(),this.removeOrphanedDocuments(t,i))).next(C=>(m=Date.now(),Z_()<=Hr.in.DEBUG&&Ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-y}ms\n\tDetermined least recently used ${r} in `+(d-l)+`ms\n\tRemoved ${s} targets in `+(f-d)+`ms\n\tRemoved ${C} documents in `+(m-f)+`ms\nTotal Duration: ${m-y}ms`),ve.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:C})))}}class vT{constructor(t,e){this.db=t,this.garbageCollector=function jw(n,t){return new wP(n,t)}(this,e)}zn(t){const e=this.Jn(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}Jn(t){let e=0;return this.Wn(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Wn(t,e){return this.Yn(t,(i,r)=>e(r))}addReference(t,e,i){return _v(t,i)}removeReference(t,e,i){return _v(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return _v(t,e)}Xn(t,e){return function(i,r){let s=!1;return uN(i).Z(l=>gT(i,l,r).next(d=>(d&&(s=!0),ve.resolve(!d)))).next(()=>s)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Yn(t,(l,d)=>{if(d<=e){const f=this.Xn(t,l).next(m=>{if(!m)return s++,i.getEntry(t,l).next(()=>(i.removeEntry(l,Bt.min()),Hd(t).delete([0,Rs(l.path)])))});r.push(f)}}).next(()=>ve.waitFor(r)).next(()=>i.apply(t)).next(()=>s)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return _v(t,e)}Yn(t,e){const i=Hd(t);let r,s=Oo.ct;return i.X({index:"documentTargetsIndex"},([l,d],{path:f,sequenceNumber:m})=>{0===l?(s!==Oo.ct&&e(new ft(ea(r)),s),s=m,r=f):s=Oo.ct}).next(()=>{s!==Oo.ct&&e(new ft(ea(r)),s)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function _v(n,t){return Hd(n).put((i=n.currentSequenceNumber,{targetId:0,path:Rs(t.path),sequenceNumber:i}));var i}class Gw{constructor(){this.changes=new rc(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Fi.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return void 0!==i?ve.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class yT{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return Mf(t).put(i)}removeEntry(t,e,i){return Mf(t).delete(function(r,s){const l=r.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],iT(s),l[l.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.Zn(t,i)))}getEntry(t,e){let i=Fi.newInvalidDocument(e);return Mf(t).X({index:"documentKeyIndex",range:IDBKeyRange.only(Hg(e))},(r,s)=>{i=this.ts(e,s)}).next(()=>i)}es(t,e){let i={size:0,document:Fi.newInvalidDocument(e)};return Mf(t).X({index:"documentKeyIndex",range:IDBKeyRange.only(Hg(e))},(r,s)=>{i={document:this.ts(e,s),size:Uw(s)}}).next(()=>i)}getEntries(t,e){let i=ko();return this.ns(t,e,(r,s)=>{const l=this.ts(r,s);i=i.insert(r,l)}).next(()=>i)}ss(t,e){let i=ko(),r=new Pi(ft.comparator);return this.ns(t,e,(s,l)=>{const d=this.ts(s,l);i=i.insert(s,d),r=r.insert(s,Uw(l))}).next(()=>({documents:i,rs:r}))}ns(t,e,i){if(e.isEmpty())return ve.resolve();let r=new Gn(wT);e.forEach(f=>r=r.add(f));const s=IDBKeyRange.bound(Hg(r.first()),Hg(r.last())),l=r.getIterator();let d=l.getNext();return Mf(t).X({index:"documentKeyIndex",range:s},(f,m,y)=>{const C=ft.fromSegments([...m.prefixPath,m.collectionGroup,m.documentId]);for(;d&&wT(d,C)<0;)i(d,null),d=l.getNext();d&&d.isEqual(C)&&(i(d,m),d=l.hasNext()?l.getNext():null),d?y.G(Hg(d)):y.done()}).next(()=>{for(;d;)i(d,null),d=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(t,e,i,r){const s=e.path,l=[s.popLast().toArray(),s.lastSegment(),iT(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],d=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Mf(t).j(IDBKeyRange.bound(l,d,!0)).next(f=>{let m=ko();for(const y of f){const C=this.ts(ft.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);C.isFoundDocument()&&(Sg(e,C)||r.has(C.key))&&(m=m.insert(C.key,C))}return m})}getAllFromCollectionGroup(t,e,i,r){let s=ko();const l=$w(e,i),d=$w(e,Xo.max());return Mf(t).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,d,!0)},(f,m,y)=>{const C=this.ts(ft.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);s=s.insert(C.key,C),s.size===r&&y.done()}).next(()=>s)}newChangeBuffer(t){return new bP(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return gN(t).get("remoteDocumentGlobalKey").next(e=>(Lt(!!e),e))}Zn(t,e){return gN(t).put("remoteDocumentGlobalKey",e)}ts(t,e){if(e){const i=function mP(n,t){let e;if(t.document)e=qM(n.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=ft.fromSegments(t.noDocument.path),r=Sf(t.noDocument.readTime);e=Fi.newNoDocument(i,r),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return Dt();{const i=ft.fromSegments(t.unknownDocument.path),r=Sf(t.unknownDocument.version);e=Fi.newUnknownDocument(i,r)}}return t.readTime&&e.setReadTime(function(i){const r=new Wi(i[0],i[1]);return Bt.fromTimestamp(r)}(t.readTime)),e}(this.serializer,e);if(!i.isNoDocument()||!i.version.isEqual(Bt.min()))return i}return Fi.newInvalidDocument(t)}}function pN(n){return new yT(n)}class bP extends Gw{constructor(t,e){super(),this.os=t,this.trackRemovals=e,this.us=new rc(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(t){const e=[];let i=0,r=new Gn((s,l)=>on(s.canonicalString(),l.canonicalString()));return this.changes.forEach((s,l)=>{const d=this.us.get(s);if(e.push(this.os.removeEntry(t,s,d.readTime)),l.isValidDocument()){const f=XM(this.os.serializer,l);r=r.add(s.path.popLast());const m=Uw(f);i+=m-d.size,e.push(this.os.addEntry(t,s,f))}else if(i-=d.size,this.trackRemovals){const f=XM(this.os.serializer,l.convertToNoDocument(Bt.min()));e.push(this.os.addEntry(t,s,f))}}),r.forEach(s=>{e.push(this.os.indexManager.addToCollectionParentIndex(t,s))}),e.push(this.os.updateMetadata(t,i)),ve.waitFor(e)}getFromCache(t,e){return this.os.es(t,e).next(i=>(this.us.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.os.ss(t,e).next(({documents:i,rs:r})=>(r.forEach((s,l)=>{this.us.set(s,{size:l,readTime:i.get(s).readTime})}),i))}}function gN(n){return ys(n,"remoteDocumentGlobal")}function Mf(n){return ys(n,"remoteDocumentsV14")}function Hg(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function $w(n,t){const e=t.documentKey.path.toArray();return[n,iT(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function wT(n,t){const e=n.path.toArray(),i=t.path.toArray();let r=0;for(let s=0;s<e.length-2&&s<i.length-2;++s)if(r=on(e[s],i[s]),r)return r;return r=on(e.length,i.length),r||(r=on(e[e.length-2],i[i.length-2]),r||on(e[e.length-1],i[i.length-1]))}class mN{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class bT{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(null!==i&&av(i.mutation,r,rr.empty(),Wi.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,fn()).next(()=>i))}getLocalViewOfDocuments(t,e,i=fn()){const r=sc();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(s=>{let l=iv();return s.forEach((d,f)=>{l=l.insert(d,f.overlayedDocument)}),l}))}getOverlayedDocuments(t,e){const i=sc();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,fn()))}populateOverlays(t,e,i){const r=[];return i.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((l,d)=>{e.set(l,d)})})}computeViews(t,e,i,r){let s=ko();const l=rv(),d=rv();return e.forEach((f,m)=>{const y=i.get(m.key);r.has(m.key)&&(void 0===y||y.mutation instanceof uu)?s=s.insert(m.key,m):void 0!==y?(l.set(m.key,y.mutation.getFieldMask()),av(y.mutation,m,y.mutation.getFieldMask(),Wi.now())):l.set(m.key,rr.empty())}),this.recalculateAndSaveOverlays(t,s).next(f=>(f.forEach((m,y)=>l.set(m,y)),e.forEach((m,y)=>{var C;return d.set(m,new mN(y,null!==(C=l.get(m))&&void 0!==C?C:null))}),d))}recalculateAndSaveOverlays(t,e){const i=rv();let r=new Pi((l,d)=>l-d),s=fn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(l=>{for(const d of l)d.keys().forEach(f=>{const m=e.get(f);if(null===m)return;let y=i.get(f)||rr.empty();y=d.applyToLocalView(m,y),i.set(f,y);const C=(r.get(d.batchId)||fn()).add(f);r=r.insert(d.batchId,C)})}).next(()=>{const l=[],d=r.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),m=f.key,y=f.value,C=IM();y.forEach(A=>{if(!s.has(A)){const x=xg(e.get(A),i.get(A));null!==x&&C.set(A,x),s=s.add(A)}}),l.push(this.documentOverlayCache.saveOverlays(t,m,C))}return ve.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i){return ft.isDocumentKey((r=e).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):kC(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i):this.getDocumentsMatchingCollectionQuery(t,e,i);var r}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(s=>{const l=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-s.size):ve.resolve(sc());let d=-1,f=s;return l.next(m=>ve.forEach(m,(y,C)=>(d<C.largestBatchId&&(d=C.largestBatchId),s.get(y)?ve.resolve():this.remoteDocumentCache.getEntry(t,y).next(A=>{f=f.insert(y,A)}))).next(()=>this.populateOverlays(t,m,s)).next(()=>this.computeViews(t,f,m,fn())).next(y=>({batchId:d,changes:Ag(y)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new ft(e)).next(i=>{let r=iv();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i){const r=e.collectionGroup;let s=iv();return this.indexManager.getCollectionParents(t,r).next(l=>ve.forEach(l,d=>{const f=(m=e,y=d.child(r),new ic(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,y;return this.getDocumentsMatchingCollectionQuery(t,f,i).next(m=>{m.forEach((y,C)=>{s=s.insert(y,C)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,e,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,r))).next(s=>{r.forEach((d,f)=>{const m=f.getKey();null===s.get(m)&&(s=s.insert(m,Fi.newInvalidDocument(m)))});let l=iv();return s.forEach((d,f)=>{const m=r.get(d);void 0!==m&&av(m.mutation,f,rr.empty(),Wi.now()),Sg(e,f)&&(l=l.insert(d,f))}),l})}}class _N{constructor(t){this.serializer=t,this.cs=new Map,this.hs=new Map}getBundleMetadata(t,e){return ve.resolve(this.cs.get(e))}saveBundleMetadata(t,e){var i;return this.cs.set(e.id,{id:(i=e).id,version:i.version,createTime:sr(i.createTime)}),ve.resolve()}getNamedQuery(t,e){return ve.resolve(this.hs.get(e))}saveNamedQuery(t,e){return this.hs.set(e.name,{name:(i=e).name,query:kw(i.bundledQuery),readTime:sr(i.readTime)}),ve.resolve();var i}}class DP{constructor(){this.overlays=new Pi(ft.comparator),this.ls=new Map}getOverlay(t,e){return ve.resolve(this.overlays.get(e))}getOverlays(t,e){const i=sc();return ve.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,s)=>{this.we(t,e,s)}),ve.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.ls.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(i)),ve.resolve()}getOverlaysForCollection(t,e,i){const r=sc(),s=e.length+1,l=new ft(e.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const f=d.getNext().value,m=f.getKey();if(!e.isPrefixOf(m.path))break;m.path.length===s&&f.largestBatchId>i&&r.set(f.getKey(),f)}return ve.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let s=new Pi((m,y)=>m-y);const l=this.overlays.getIterator();for(;l.hasNext();){const m=l.getNext().value;if(m.getKey().getCollectionGroup()===e&&m.largestBatchId>i){let y=s.get(m.largestBatchId);null===y&&(y=sc(),s=s.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}const d=sc(),f=s.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((m,y)=>d.set(m,y)),!(d.size()>=r)););return ve.resolve(d)}we(t,e,i){const r=this.overlays.get(i.key);if(null!==r){const l=this.ls.get(r.largestBatchId).delete(i.key);this.ls.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new Iw(e,i));let s=this.ls.get(e);void 0===s&&(s=fn(),this.ls.set(e,s)),this.ls.set(e,s.add(i.key))}}class zw{constructor(){this.fs=new Gn(is.ds),this.ws=new Gn(is._s)}isEmpty(){return this.fs.isEmpty()}addReference(t,e){const i=new is(t,e);this.fs=this.fs.add(i),this.ws=this.ws.add(i)}gs(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.ys(new is(t,e))}ps(t,e){t.forEach(i=>this.removeReference(i,e))}Is(t){const e=new ft(new On([])),i=new is(e,t),r=new is(e,t+1),s=[];return this.ws.forEachInRange([i,r],l=>{this.ys(l),s.push(l.key)}),s}Ts(){this.fs.forEach(t=>this.ys(t))}ys(t){this.fs=this.fs.delete(t),this.ws=this.ws.delete(t)}Es(t){const e=new ft(new On([])),i=new is(e,t),r=new is(e,t+1);let s=fn();return this.ws.forEachInRange([i,r],l=>{s=s.add(l.key)}),s}containsKey(t){const e=new is(t,0),i=this.fs.firstAfterOrEqual(e);return null!==i&&t.isEqual(i.key)}}class is{constructor(t,e){this.key=t,this.As=e}static ds(t,e){return ft.comparator(t.key,e.key)||on(t.As,e.As)}static _s(t,e){return on(t.As,e.As)||ft.comparator(t.key,e.key)}}class EP{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.vs=1,this.Rs=new Gn(is.ds)}checkEmpty(t){return ve.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,i,r){const s=this.vs;this.vs++;const l=new Tw(s,e,i,r);this.mutationQueue.push(l);for(const d of r)this.Rs=this.Rs.add(new is(d.key,s)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return ve.resolve(l)}lookupMutationBatch(t,e){return ve.resolve(this.Ps(e))}getNextMutationBatchAfterBatchId(t,e){const r=this.bs(e+1),s=r<0?0:r;return ve.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ve.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(t){return ve.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new is(e,0),r=new is(e,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([i,r],l=>{const d=this.Ps(l.As);s.push(d)}),ve.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Gn(on);return e.forEach(r=>{const s=new is(r,0),l=new is(r,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,l],d=>{i=i.add(d.As)})}),ve.resolve(this.Vs(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let s=i;ft.isDocumentKey(s)||(s=s.child(""));const l=new is(new ft(s),0);let d=new Gn(on);return this.Rs.forEachWhile(f=>{const m=f.key.path;return!!i.isPrefixOf(m)&&(m.length===r&&(d=d.add(f.As)),!0)},l),ve.resolve(this.Vs(d))}Vs(t){const e=[];return t.forEach(i=>{const r=this.Ps(i);null!==r&&e.push(r)}),e}removeMutationBatch(t,e){Lt(0===this.Ss(e.batchId,"removed")),this.mutationQueue.shift();let i=this.Rs;return ve.forEach(e.mutations,r=>{const s=new is(r.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Rs=i})}Cn(t){}containsKey(t,e){const i=new is(e,0),r=this.Rs.firstAfterOrEqual(i);return ve.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return ve.resolve()}Ss(t,e){return this.bs(t)}bs(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Ps(t){const e=this.bs(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class vN{constructor(t){this.Ds=t,this.docs=new Pi(ft.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),s=r?r.size:0,l=this.Ds(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:l}),this.size+=l-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return ve.resolve(i?i.document.mutableCopy():Fi.newInvalidDocument(e))}getEntries(t,e){let i=ko();return e.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Fi.newInvalidDocument(r))}),ve.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let s=ko();const l=e.path,d=new ft(l.child("")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:m,value:{document:y}}=f.getNext();if(!l.isPrefixOf(m.path))break;m.path.length>l.length+1||rC(iC(y),i)<=0||(r.has(y.key)||Sg(e,y))&&(s=s.insert(y.key,y.mutableCopy()))}return ve.resolve(s)}getAllFromCollectionGroup(t,e,i,r){Dt()}Cs(t,e){return ve.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new yN(this)}getSize(t){return ve.resolve(this.size)}}class yN extends Gw{constructor(t){super(),this.os=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.os.addEntry(t,r)):this.os.removeEntry(i)}),ve.waitFor(e)}getFromCache(t,e){return this.os.getEntry(t,e)}getAllFromCache(t,e){return this.os.getEntries(t,e)}}class co{constructor(t){this.persistence=t,this.xs=new rc(e=>yf(e),tv),this.lastRemoteSnapshotVersion=Bt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new zw,this.targetCount=0,this.Ms=Vd.kn()}forEachTarget(t,e){return this.xs.forEach((i,r)=>e(r)),ve.resolve()}getLastRemoteSnapshotVersion(t){return ve.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ve.resolve(this.Ns)}allocateTargetId(t){return this.highestTargetId=this.Ms.next(),ve.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.Ns&&(this.Ns=e),ve.resolve()}Fn(t){this.xs.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Ms=new Vd(e),this.highestTargetId=e),t.sequenceNumber>this.Ns&&(this.Ns=t.sequenceNumber)}addTargetData(t,e){return this.Fn(e),this.targetCount+=1,ve.resolve()}updateTargetData(t,e){return this.Fn(e),ve.resolve()}removeTargetData(t,e){return this.xs.delete(e.target),this.ks.Is(e.targetId),this.targetCount-=1,ve.resolve()}removeTargets(t,e,i){let r=0;const s=[];return this.xs.forEach((l,d)=>{d.sequenceNumber<=e&&null===i.get(d.targetId)&&(this.xs.delete(l),s.push(this.removeMatchingKeysForTargetId(t,d.targetId)),r++)}),ve.waitFor(s).next(()=>r)}getTargetCount(t){return ve.resolve(this.targetCount)}getTargetData(t,e){const i=this.xs.get(e)||null;return ve.resolve(i)}addMatchingKeys(t,e,i){return this.ks.gs(e,i),ve.resolve()}removeMatchingKeys(t,e,i){this.ks.ps(e,i);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(l=>{s.push(r.markPotentiallyOrphaned(t,l))}),ve.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.ks.Is(e),ve.resolve()}getMatchingKeysForTargetId(t,e){const i=this.ks.Es(e);return ve.resolve(i)}containsKey(t,e){return ve.resolve(this.ks.containsKey(e))}}class jd{constructor(t,e){this.$s={},this.overlays={},this.Os=new Oo(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=t(this),this.Bs=new co(this),this.indexManager=new pv,this.remoteDocumentCache=new vN(i=>this.referenceDelegate.Ls(i)),this.serializer=new nT(e),this.qs=new _N(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new DP,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.$s[t.toKey()];return i||(i=new EP(e,this.referenceDelegate),this.$s[t.toKey()]=i),i}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(t,e,i){Ke("MemoryPersistence","Starting transaction:",t);const r=new CP(this.Os.next());return this.referenceDelegate.Us(),i(r).next(s=>this.referenceDelegate.Ks(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gs(t,e){return ve.or(Object.values(this.$s).map(i=>()=>i.containsKey(t,e)))}}class CP extends lw{constructor(t){super(),this.currentSequenceNumber=t}}class Ww{constructor(t){this.persistence=t,this.Qs=new zw,this.js=null}static zs(t){return new Ww(t)}get Ws(){if(this.js)return this.js;throw Dt()}addReference(t,e,i){return this.Qs.addReference(i,e),this.Ws.delete(i.toString()),ve.resolve()}removeReference(t,e,i){return this.Qs.removeReference(i,e),this.Ws.add(i.toString()),ve.resolve()}markPotentiallyOrphaned(t,e){return this.Ws.add(e.toString()),ve.resolve()}removeTarget(t,e){this.Qs.Is(e.targetId).forEach(r=>this.Ws.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Ws.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}Us(){this.js=new Set}Ks(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ve.forEach(this.Ws,i=>{const r=ft.fromPath(i);return this.Hs(t,r).next(s=>{s||e.removeEntry(r,Bt.min())})}).next(()=>(this.js=null,e.apply(t)))}updateLimboDocument(t,e){return this.Hs(t,e).next(i=>{i?this.Ws.delete(e.toString()):this.Ws.add(e.toString())})}Ls(t){return 0}Hs(t,e){return ve.or([()=>ve.resolve(this.Qs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gs(t,e)])}}class FV{constructor(t){this.serializer=t}O(t,e,i,r){const s=new cw("createOrUpgrade",e);var d;i<1&&r>=1&&(t.createObjectStore("owner"),(d=t).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",iu,{unique:!0}),d.createObjectStore("documentMutations"),ET(t),function(d){d.createObjectStore("remoteDocuments")}(t));let l=ve.resolve();return i<3&&r>=3&&(0!==i&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(t),ET(t)),l=l.next(()=>function(d){const f=d.store("targetGlobal"),m={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Bt.min().toTimestamp(),targetCount:0};return f.put("targetGlobalKey",m)}(s))),i<4&&r>=4&&(0!==i&&(l=l.next(()=>function(d,f){return f.store("mutations").j().next(m=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",iu,{unique:!0});const y=f.store("mutations"),C=m.map(A=>y.put(A));return ve.waitFor(C)})}(t,s))),l=l.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),i<5&&r>=5&&(l=l.next(()=>this.Ys(s))),i<6&&r>=6&&(l=l.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(t),this.Xs(s)))),i<7&&r>=7&&(l=l.next(()=>this.Zs(s))),i<8&&r>=8&&(l=l.next(()=>this.ti(t,s))),i<9&&r>=9&&(l=l.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(t)})),i<10&&r>=10&&(l=l.next(()=>this.ei(s))),i<11&&r>=11&&(l=l.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&r>=12&&(l=l.next(()=>{!function(d){const f=d.createObjectStore("documentOverlays",{keyPath:sM});f.createIndex("collectionPathOverlayIndex",Jk,{unique:!1}),f.createIndex("collectionGroupOverlayIndex",Xk,{unique:!1})}(t)})),i<13&&r>=13&&(l=l.next(()=>function(d){const f=d.createObjectStore("remoteDocumentsV14",{keyPath:gf});f.createIndex("documentKeyIndex",uC),f.createIndex("collectionGroupIndex",Yk)}(t)).next(()=>this.ni(t,s)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(l=l.next(()=>this.si(t,s))),i<15&&r>=15&&(l=l.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:Kk}).createIndex("sequenceNumberIndex",rM,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:Qk}).createIndex("documentKeyIndex",ts,{unique:!1})}(t))),l}Xs(t){let e=0;return t.store("remoteDocuments").X((i,r)=>{e+=Uw(r)}).next(()=>{const i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Ys(t){const e=t.store("mutationQueues"),i=t.store("mutations");return e.j().next(r=>ve.forEach(r,s=>{const l=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.j("userMutationsIndex",l).next(d=>ve.forEach(d,f=>{Lt(f.userId===s.userId);const m=Fd(this.serializer,f);return pT(t,s.userId,m).next(()=>{})}))}))}Zs(t){const e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.X((l,d)=>{const f=new On(l),m=[0,Rs(f)];s.push(e.get(m).next(y=>y?ve.resolve():e.put({targetId:0,path:Rs(f),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>ve.waitFor(s))})}ti(t,e){t.createObjectStore("collectionParents",{keyPath:Zk});const i=e.store("collectionParents"),r=new fT,s=l=>{if(r.add(l)){const d=l.lastSegment(),f=l.popLast();return i.put({collectionId:d,parent:Rs(f)})}};return e.store("remoteDocuments").X({Y:!0},(l,d)=>{const f=new On(l);return s(f.popLast())}).next(()=>e.store("documentMutations").X({Y:!0},([l,d,f],m)=>{const y=ea(d);return s(y.popLast())}))}ei(t){const e=t.store("targets");return e.X((i,r)=>{const s=Pg(r),l=rT(this.serializer,s);return e.put(l)})}ni(t,e){const i=e.store("remoteDocuments"),r=[];return i.X((s,l)=>{const d=e.store("remoteDocumentsV14"),f=(m=l,m.document?new ft(On.fromString(m.document.name).popFirst(5)):m.noDocument?ft.fromSegments(m.noDocument.path):m.unknownDocument?ft.fromSegments(m.unknownDocument.path):Dt()).path.toArray();var m;const y={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};r.push(d.put(y))}).next(()=>ve.waitFor(r))}si(t,e){const i=e.store("mutations"),r=pN(this.serializer),s=new jd(Ww.zs,this.serializer.fe);return i.j().next(l=>{const d=new Map;return l.forEach(f=>{var m;let y=null!==(m=d.get(f.userId))&&void 0!==m?m:fn();Fd(this.serializer,f).keys().forEach(C=>y=y.add(C)),d.set(f.userId,y)}),ve.forEach(d,(f,m)=>{const y=new vs(m),C=Ld.de(this.serializer,y),A=s.getIndexManager(y),x=Hw.de(y,this.serializer,A,s.referenceDelegate);return new bT(r,x,C,A).recalculateAndSaveOverlaysForDocumentKeys(new gC(e,Oo.ct),f).next()})})}}function ET(n){n.createObjectStore("targetDocuments",{keyPath:OV}).createIndex("documentTargetsIndex",kV,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",dC,{unique:!0}),n.createObjectStore("targetGlobal")}const vv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class wN{constructor(t,e,i,r,s,l,d,f,m,y,C=15){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.ii=s,this.window=l,this.document=d,this.ri=m,this.oi=y,this.ui=C,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=A=>Promise.resolve(),!wN.D())throw new Ge(be.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vT(this,r),this.di=e+"main",this.serializer=new nT(f),this.wi=new Ea(this.di,this.ui,new FV(this.serializer)),this.Bs=new dN(this.referenceDelegate,this.serializer),this.remoteDocumentCache=pN(this.serializer),this.qs=new eN,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===y&&Oi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ge(be.FAILED_PRECONDITION,vv);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Bs.getHighestSequenceNumber(t))}).then(t=>{this.Os=new Oo(t,this.ri)}).then(()=>{this.Fs=!0}).catch(t=>(this.wi&&this.wi.close(),Promise.reject(t)))}Ii(t){var e=this;return this.fi=function(){var i=(0,Ee.Z)(function*(r){if(e.started)return t(r)});return function(r){return i.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.wi.B(function(){var e=(0,Ee.Z)(function*(i){null===i.newVersion&&(yield t())});return function(i){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.ii.enqueueAndForget((0,Ee.Z)(function*(){e.started&&(yield e.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>CT(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(t).next(e=>{e||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(t)).next(e=>this.isPrimary&&!e?this.Ai(t).next(()=>!1):!!e&&this.vi(t).next(()=>!0))).catch(t=>{if(nu(t))return Ke("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return Ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.ii.enqueueRetryable(()=>this.fi(t)),this.isPrimary=t})}Ti(t){return qw(t).get("owner").next(e=>ve.resolve(this.Ri(e)))}Pi(t){return CT(t).delete(this.clientId)}bi(){var t=this;return(0,Ee.Z)(function*(){if(t.isPrimary&&!t.Vi(t.li,18e5)){t.li=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=ys(i,"clientMetadata");return r.j().next(s=>{const l=t.Si(s,18e5),d=s.filter(f=>-1===l.indexOf(f));return ve.forEach(d,f=>r.delete(f.clientId)).next(()=>d)})}).catch(()=>[]);if(t._i)for(const i of e)t._i.removeItem(t.Di(i.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(t){return!!t&&t.ownerId===this.clientId}Ei(t){return this.oi?ve.resolve(!0):qw(t).get("owner").next(e=>{if(null!==e&&this.Vi(e.leaseTimestampMs,5e3)&&!this.Ci(e.ownerId)){if(this.Ri(e)&&this.networkEnabled)return!0;if(!this.Ri(e)){if(!e.allowTabSynchronization)throw new Ge(be.FAILED_PRECONDITION,vv);return!1}}return!(!this.networkEnabled||!this.inForeground)||CT(t).j().next(i=>void 0===this.Si(i,5e3).find(r=>!(this.clientId===r.clientId||!(!this.networkEnabled&&r.networkEnabled||!this.inForeground&&r.inForeground&&this.networkEnabled===r.networkEnabled))))}).next(e=>(this.isPrimary!==e&&Ke("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,Ee.Z)(function*(){t.Fs=!1,t.xi(),t.hi&&(t.hi.cancel(),t.hi=null),t.Ni(),t.ki(),yield t.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const i=new gC(e,Oo.ct);return t.Ai(i).next(()=>t.Pi(i))}),t.wi.close(),t.Mi()})()}Si(t,e){return t.filter(i=>this.Vi(i.updateTimeMs,e)&&!this.Ci(i.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",t=>CT(t).j().next(e=>this.Si(e,18e5).map(i=>i.clientId)))}get started(){return this.Fs}getMutationQueue(t,e){return Hw.de(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new yP(t,this.serializer.fe.databaseId)}getDocumentOverlayCache(t){return Ld.de(this.serializer,t)}getBundleCache(){return this.qs}runTransaction(t,e,i){Ke("IndexedDbPersistence","Starting transaction:",t);const r="readonly"===e?"readonly":"readwrite",s=15===(l=this.ui)?wg:14===l?pC:13===l?fC:12===l?eP:11===l?hC:void Dt();var l;let d;return this.wi.runTransaction(t,r,s,f=>(d=new gC(f,this.Os?this.Os.next():Oo.ct),"readwrite-primary"===e?this.Ti(d).next(m=>!!m||this.Ei(d)).next(m=>{if(!m)throw Oi(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Ge(be.FAILED_PRECONDITION,sC);return i(d)}).next(m=>this.vi(d).next(()=>m)):this.Oi(d).next(()=>i(d)))).then(f=>(d.raiseOnCommittedEvent(),f))}Oi(t){return qw(t).get("owner").next(e=>{if(null!==e&&this.Vi(e.leaseTimestampMs,5e3)&&!this.Ci(e.ownerId)&&!this.Ri(e)&&!(this.oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Ge(be.FAILED_PRECONDITION,vv)})}vi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return qw(t).put("owner",e)}static D(){return Ea.D()}Ai(t){const e=qw(t);return e.get("owner").next(i=>this.Ri(i)?(Ke("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):ve.resolve())}Vi(t,e){const i=Date.now();return!(t<i-e||t>i&&(Oi(`Detected an update time that is in the future: ${t} > ${i}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;(0,B.G6)()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(t){var e;try{const i=null!==(null===(e=this._i)||void 0===e?void 0:e.getItem(this.Di(t)));return Ke("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Oi("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(t){Oi("Failed to set zombie client id.",t)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function qw(n){return ys(n,"owner")}function CT(n){return ys(n,"clientMetadata")}function Nf(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class TT{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Fi=i,this.Bi=r}static Li(t,e){let i=fn(),r=fn();for(const s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new TT(t,e.fromCache,i,r)}}class Yw{constructor(){this.qi=!1}initialize(t,e){this.Ui=t,this.indexManager=e,this.qi=!0}getDocumentsMatchingQuery(t,e,i,r){return this.Ki(t,e).next(s=>s||this.Gi(t,e,r,i)).next(s=>s||this.Qi(t,e))}Ki(t,e){if(wf(e))return ve.resolve(null);let i=lo(e);return this.indexManager.getIndexType(t,i).next(r=>0===r?null:(null!==e.limit&&1===r&&(e=bf(e,null,"F"),i=lo(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const l=fn(...s);return this.Ui.getDocuments(t,l).next(d=>this.indexManager.getMinOffset(t,i).next(f=>{const m=this.ji(e,d);return this.zi(e,m,l,f.readTime)?this.Ki(t,bf(e,null,"F")):this.Wi(t,m,e,f)}))})))}Gi(t,e,i,r){return wf(e)||r.isEqual(Bt.min())?this.Qi(t,e):this.Ui.getDocuments(t,i).next(s=>{const l=this.ji(e,s);return this.zi(e,l,i,r)?this.Qi(t,e):(Z_()<=Hr.in.DEBUG&&Ke("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),yw(e)),this.Wi(t,l,e,nC(r,-1)))})}ji(t,e){let i=new Gn(PC(t));return e.forEach((r,s)=>{Sg(t,s)&&(i=i.add(s))}),i}zi(t,e,i,r){if(null===t.limit)return!1;if(i.size!==e.size)return!0;const s="F"===t.limitType?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Qi(t,e){return Z_()<=Hr.in.DEBUG&&Ke("QueryEngine","Using full collection scan to execute query:",yw(e)),this.Ui.getDocumentsMatchingQuery(t,e,Xo.min())}Wi(t,e,i,r){return this.Ui.getDocumentsMatchingQuery(t,i,r).next(s=>(e.forEach(l=>{s=s.insert(l.key,l)}),s))}}class TP{constructor(t,e,i,r){this.persistence=t,this.Hi=e,this.serializer=r,this.Ji=new Pi(on),this.Yi=new rc(s=>yf(s),tv),this.Xi=new Map,this.Zi=t.getRemoteDocumentCache(),this.Bs=t.getTargetCache(),this.qs=t.getBundleCache(),this.tr(i)}tr(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new bT(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ji))}}function IT(n,t,e,i){return new TP(n,t,e,i)}function bN(n,t){return ST.apply(this,arguments)}function ST(){return ST=(0,Ee.Z)(function*(n,t){const e=yt(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,e.tr(t),e.mutationQueue.getAllMutationBatches(i))).next(s=>{const l=[],d=[];let f=fn();for(const m of r){l.push(m.batchId);for(const y of m.mutations)f=f.add(y.key)}for(const m of s){d.push(m.batchId);for(const y of m.mutations)f=f.add(y.key)}return e.localDocuments.getDocuments(i,f).next(m=>({er:m,removedBatchIds:l,addedBatchIds:d}))})})}),ST.apply(this,arguments)}function Zw(n){const t=yt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Bs.getLastRemoteSnapshotVersion(e))}function EN(n,t,e){let i=fn(),r=fn();return e.forEach(s=>i=i.add(s)),t.getEntries(n,i).next(s=>{let l=ko();return e.forEach((d,f)=>{const m=s.get(d);f.isFoundDocument()!==m.isFoundDocument()&&(r=r.add(d)),f.isNoDocument()&&f.version.isEqual(Bt.min())?(t.removeEntry(d,f.readTime),l=l.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||0===f.version.compareTo(m.version)&&m.hasPendingWrites?(t.addEntry(f),l=l.insert(d,f)):Ke("LocalStore","Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)}),{nr:l,sr:r}})}function Kw(n,t){const e=yt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function Gd(n,t){const e=yt(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Bs.getTargetData(i,t).next(s=>s?(r=s,ve.resolve(r)):e.Bs.allocateTargetId(i).next(l=>(r=new Pd(t,l,"TargetPurposeListen",i.currentSequenceNumber),e.Bs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.Ji.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.Ji=e.Ji.insert(i.targetId,i),e.Yi.set(t,i.targetId)),i})}function yv(n,t,e){return Qw.apply(this,arguments)}function Qw(){return Qw=(0,Ee.Z)(function*(n,t,e){const i=yt(n),r=i.Ji.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",s,l=>i.persistence.referenceDelegate.removeTarget(l,r)))}catch(l){if(!nu(l))throw l;Ke("LocalStore",`Failed to update sequence numbers for target ${t}: ${l}`)}i.Ji=i.Ji.remove(t),i.Yi.delete(r.target)}),Qw.apply(this,arguments)}function Jw(n,t,e){const i=yt(n);let r=Bt.min(),s=fn();return i.persistence.runTransaction("Execute query","readonly",l=>function(d,f,m){const y=yt(d),C=y.Yi.get(m);return void 0!==C?ve.resolve(y.Ji.get(C)):y.Bs.getTargetData(f,m)}(i,l,lo(t)).next(d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,i.Bs.getMatchingKeysForTargetId(l,d.targetId).next(f=>{s=f})}).next(()=>i.Hi.getDocumentsMatchingQuery(l,t,e?r:Bt.min(),e?s:fn())).next(d=>(CN(i,DM(t),d),{documents:d,ir:s})))}function AT(n,t){const e=yt(n),i=yt(e.Bs),r=e.Ji.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",s=>i.le(s,t).next(l=>l?l.target:null))}function xf(n,t){const e=yt(n),i=e.Xi.get(t)||Bt.min();return e.persistence.runTransaction("Get new document changes","readonly",r=>e.Zi.getAllFromCollectionGroup(r,t,nC(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(CN(e,t,r),r))}function CN(n,t,e){let i=n.Xi.get(t)||Bt.min();e.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Xi.set(t,i)}function wv(){return wv=(0,Ee.Z)(function*(n,t,e,i){const r=yt(n);let s=fn(),l=ko();for(const m of e){const y=t.rr(m.metadata.name);m.document&&(s=s.add(y));const C=t.ur(m);C.setReadTime(t.cr(m.metadata.readTime)),l=l.insert(y,C)}const d=r.Zi.newChangeBuffer({trackRemovals:!0}),f=yield Gd(r,(m=i,lo(nv(On.fromString(`__bundle__/docs/${m}`)))));var m;return r.persistence.runTransaction("Apply bundle documents","readwrite",m=>EN(m,d,l).next(y=>(d.apply(m),y)).next(y=>r.Bs.removeMatchingKeysForTargetId(m,f.targetId).next(()=>r.Bs.addMatchingKeys(m,s,f.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(m,y.nr,y.sr)).next(()=>y.nr)))}),wv.apply(this,arguments)}function LV(n,t){return MT.apply(this,arguments)}function MT(){return MT=(0,Ee.Z)(function*(n,t,e=fn()){const i=yield Gd(n,lo(kw(t.bundledQuery))),r=yt(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const l=sr(t.readTime);if(i.snapshotVersion.compareTo(l)>=0)return r.qs.saveNamedQuery(s,t);const d=i.withResumeToken(jr.EMPTY_BYTE_STRING,l);return r.Ji=r.Ji.insert(d.targetId,d),r.Bs.updateTargetData(s,d).next(()=>r.Bs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Bs.addMatchingKeys(s,e,i.targetId)).next(()=>r.qs.saveNamedQuery(s,t))})}),MT.apply(this,arguments)}function SP(n,t){return`firestore_clients_${n}_${t}`}function IN(n,t,e){let i=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function NT(n,t){return`firestore_targets_${n}_${t}`}class Xw{constructor(t,e,i,r){this.user=t,this.batchId=e,this.state=i,this.error=r}static ar(t,e,i){const r=JSON.parse(i);let s,l="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(s=new Ge(r.error.code,r.error.message))),l?new Xw(t,e,r.state,s):(Oi("SharedClientState",`Failed to parse mutation state for ID '${e}': ${i}`),null)}hr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class jg{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static ar(t,e){const i=JSON.parse(e);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new Ge(i.error.code,i.error.message))),s?new jg(t,i.state,r):(Oi("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}hr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class bv{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static ar(t,e){const i=JSON.parse(e);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=FC();for(let l=0;r&&l<i.activeTargetIds.length;++l)r=aC(i.activeTargetIds[l]),s=s.add(i.activeTargetIds[l]);return r?new bv(t,s):(Oi("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class xT{constructor(t,e){this.clientId=t,this.onlineState=e}static ar(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new xT(e.clientId,e.onlineState):(Oi("SharedClientState",`Failed to parse online state: ${t}`),null)}}class eb{constructor(){this.activeTargetIds=FC()}lr(t){this.activeTargetIds=this.activeTargetIds.add(t)}dr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}hr(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class tb{constructor(t,e,i,r,s){this.window=t,this.ii=e,this.persistenceKey=i,this.wr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Pi(on),this.started=!1,this.yr=[];const l=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.pr=SP(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new eb),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,Ee.Z)(function*(){const e=yield t.syncEngine.$i();for(const r of e){if(r===t.wr)continue;const s=t.getItem(SP(t.persistenceKey,r));if(s){const l=bv.ar(r,s);l&&(t.gr=t.gr.insert(l.clientId,l))}}t.Pr();const i=t.storage.getItem(t.vr);if(i){const r=t.br(i);r&&t.Vr(r)}for(const r of t.yr)t.mr(r);t.yr=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.Ir,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(t){let e=!1;return this.gr.forEach((i,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.Dr(t,"pending")}updateMutationState(t,e,i){this.Dr(t,e,i),this.Cr(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(NT(this.persistenceKey,t));if(i){const r=jg.ar(t,i);r&&(e=r.state)}}return this.Nr.lr(t),this.Pr(),e}removeLocalQueryTarget(t){this.Nr.dr(t),this.Pr()}isLocalQueryTarget(t){return this.Nr.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(NT(this.persistenceKey,t))}updateQueryState(t,e,i){this.kr(t,e,i)}handleUserChange(t,e,i){e.forEach(r=>{this.Cr(r)}),this.currentUser=t,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.Mr(t)}notifyBundleLoaded(t){this.$r(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return Ke("SharedClientState","READ",t,e),e}setItem(t,e){Ke("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){Ke("SharedClientState","REMOVE",t),this.storage.removeItem(t)}mr(t){var e=this;const i=t;if(i.storageArea===this.storage){if(Ke("SharedClientState","EVENT",i.key,i.newValue),i.key===this.pr)return void Oi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,Ee.Z)(function*(){if(e.started){if(null!==i.key)if(e.Tr.test(i.key)){if(null==i.newValue){const r=e.Or(i.key);return e.Fr(r,null)}{const r=e.Br(i.key,i.newValue);if(r)return e.Fr(r.clientId,r)}}else if(e.Er.test(i.key)){if(null!==i.newValue){const r=e.Lr(i.key,i.newValue);if(r)return e.qr(r)}}else if(e.Ar.test(i.key)){if(null!==i.newValue){const r=e.Ur(i.key,i.newValue);if(r)return e.Kr(r)}}else if(i.key===e.vr){if(null!==i.newValue){const r=e.br(i.newValue);if(r)return e.Vr(r)}}else if(i.key===e.Ir){const r=function(s){let l=Oo.ct;if(null!=s)try{const d=JSON.parse(s);Lt("number"==typeof d),l=d}catch(d){Oi("SharedClientState","Failed to read sequence number from WebStorage",d)}return l}(i.newValue);r!==Oo.ct&&e.sequenceNumberHandler(r)}else if(i.key===e.Rr){const r=e.Gr(i.newValue);yield Promise.all(r.map(s=>e.syncEngine.Qr(s)))}}else e.yr.push(i)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(t,e,i){const r=new Xw(this.currentUser,t,e,i),s=IN(this.persistenceKey,this.currentUser,t);this.setItem(s,r.hr())}Cr(t){const e=IN(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Mr(t){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:t}))}kr(t,e,i){const r=NT(this.persistenceKey,t),s=new jg(t,e,i);this.setItem(r,s.hr())}$r(t){const e=JSON.stringify(Array.from(t));this.setItem(this.Rr,e)}Or(t){const e=this.Tr.exec(t);return e?e[1]:null}Br(t,e){const i=this.Or(t);return bv.ar(i,e)}Lr(t,e){const i=this.Er.exec(t),r=Number(i[1]);return Xw.ar(new vs(void 0!==i[2]?i[2]:null),r,e)}Ur(t,e){const i=this.Ar.exec(t),r=Number(i[1]);return jg.ar(r,e)}br(t){return xT.ar(t)}Gr(t){return JSON.parse(t)}qr(t){var e=this;return(0,Ee.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.jr(t.batchId,t.state,t.error);Ke("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Kr(t){return this.syncEngine.zr(t.targetId,t.state,t.error)}Fr(t,e){const i=e?this.gr.insert(t,e):this.gr.remove(t),r=this.Sr(this.gr),s=this.Sr(i),l=[],d=[];return s.forEach(f=>{r.has(f)||l.push(f)}),r.forEach(f=>{s.has(f)||d.push(f)}),this.syncEngine.Wr(l,d).then(()=>{this.gr=i})}Vr(t){this.gr.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Sr(t){let e=FC();return t.forEach((i,r)=>{e=e.unionWith(r.activeTargetIds)}),e}}class SN{constructor(){this.Hr=new eb,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.Hr.lr(t),this.Jr[t]||"not-current"}updateQueryState(t,e,i){this.Jr[t]=e}removeLocalQueryTarget(t){this.Hr.dr(t)}isLocalQueryTarget(t){return this.Hr.activeTargetIds.has(t)}clearQueryState(t){delete this.Jr[t]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(t){return this.Hr.activeTargetIds.has(t)}start(){return this.Hr=new eb,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class AP{Yr(t){}shutdown(){}}class RT{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(t){this.so.push(t)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.so)t(0)}no(){Ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.so)t(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let nb=null;function ib(){return null===nb?nb=268435456+Math.round(2147483648*Math.random()):nb++,"0x"+nb.toString(16)}const AN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class MN{constructor(t){this.ro=t.ro,this.oo=t.oo}uo(t){this.co=t}ao(t){this.ho=t}onMessage(t){this.lo=t}close(){this.oo()}send(t){this.ro(t)}fo(){this.co()}wo(t){this.ho(t)}_o(t){this.lo(t)}}const ks="WebChannelConnection";class MP extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.mo=(t.ssl?"https":"http")+"://"+t.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(t,e,i,r,s){const l=ib(),d=this.To(t,e);Ke("RestConnection",`Sending RPC '${t}' ${l}:`,d,i);const f={};return this.Eo(f,r,s),this.Ao(t,d,f,i).then(m=>(Ke("RestConnection",`Received RPC '${t}' ${l}: `,m),m),m=>{throw Jo("RestConnection",`RPC '${t}' ${l} failed with error: `,m,"url: ",d,"request:",i),m})}vo(t,e,i,r,s,l){return this.Io(t,e,i,r,s)}Eo(t,e,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+Ed,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}To(t,e){return`${this.mo}/v1/${e}:${AN[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Ao(t,e,i,r){const s=ib();return new Promise((l,d)=>{const f=new Vk;f.setWithCredentials(!0),f.listenOnce(AV.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case KE.NO_ERROR:const y=f.getResponseJson();Ke(ks,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(y)),l(y);break;case KE.TIMEOUT:Ke(ks,`RPC '${t}' ${s} timed out`),d(new Ge(be.DEADLINE_EXCEEDED,"Request time out"));break;case KE.HTTP_ERROR:const C=f.getStatus();if(Ke(ks,`RPC '${t}' ${s} failed with status:`,C,"response text:",f.getResponseText()),C>0){let A=f.getResponseJson();Array.isArray(A)&&(A=A[0]);const x=A?.error;if(x&&x.status&&x.message){const P=function(F){const U=F.toLowerCase().replace(/_/g,"-");return Object.values(be).indexOf(U)>=0?U:be.UNKNOWN}(x.status);d(new Ge(P,x.message))}else d(new Ge(be.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new Ge(be.UNAVAILABLE,"Connection failed."));break;default:Dt()}}finally{Ke(ks,`RPC '${t}' ${s} completed.`)}});const m=JSON.stringify(r);Ke(ks,`RPC '${t}' ${s} sending request:`,r),f.send(e,"POST",m,i,15)})}Ro(t,e,i){const r=ib(),s=[this.mo,"/","google.firestore.v1.Firestore","/",t,"/channel"],l=ZA(),d=ZE(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;void 0!==m&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.xmlHttpFactory=new Bk({})),this.Eo(f.initMessageHeaders,e,i),f.encodeInitMessageHeaders=!0;const y=s.join("");Ke(ks,`Creating RPC '${t}' stream ${r}: ${y}`,f);const C=l.createWebChannel(y,f);let A=!1,x=!1;const P=new MN({ro:U=>{x?Ke(ks,`Not sending because RPC '${t}' stream ${r} is closed:`,U):(A||(Ke(ks,`Opening RPC '${t}' stream ${r} transport.`),C.open(),A=!0),Ke(ks,`RPC '${t}' stream ${r} sending:`,U),C.send(U))},oo:()=>C.close()}),F=(U,ee,oe)=>{U.listen(ee,te=>{try{oe(te)}catch(ce){setTimeout(()=>{throw ce},0)}})};return F(C,QE.EventType.OPEN,()=>{x||Ke(ks,`RPC '${t}' stream ${r} transport opened.`)}),F(C,QE.EventType.CLOSE,()=>{x||(x=!0,Ke(ks,`RPC '${t}' stream ${r} transport closed`),P.wo())}),F(C,QE.EventType.ERROR,U=>{x||(x=!0,Jo(ks,`RPC '${t}' stream ${r} transport errored:`,U),P.wo(new Ge(be.UNAVAILABLE,"The operation could not be completed")))}),F(C,QE.EventType.MESSAGE,U=>{var ee;if(!x){const oe=U.data[0];Lt(!!oe);const ce=oe.error||(null===(ee=oe[0])||void 0===ee?void 0:ee.error);if(ce){Ke(ks,`RPC '${t}' stream ${r} received error:`,ce);const Ne=ce.status;let Be=function(tt){const _t=Gr[tt];if(void 0!==_t)return jC(_t)}(Ne),ot=ce.message;void 0===Be&&(Be=be.INTERNAL,ot="Unknown error status: "+Ne+" with message "+ce.message),x=!0,P.wo(new Ge(Be,ot)),C.close()}else Ke(ks,`RPC '${t}' stream ${r} received:`,oe),P._o(oe)}}),F(d,MV.STAT_EVENT,U=>{U.stat===KA.PROXY?Ke(ks,`RPC '${t}' stream ${r} detected buffering proxy`):U.stat===KA.NOPROXY&&Ke(ks,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{P.fo()},0),P}}function NN(){return typeof window<"u"?window:null}function OT(){return typeof document<"u"?document:null}function Gg(n){return new pP(n,!0)}class xN{constructor(t,e,i=1e3,r=1.5,s=6e4){this.ii=t,this.timerId=e,this.Po=i,this.bo=r,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(t){this.cancel();const e=Math.floor(this.So+this.ko()),i=Math.max(0,Date.now()-this.Co),r=Math.max(0,e-i);r>0&&Ke("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.So} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,()=>(this.Co=Date.now(),t())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class NP{constructor(t,e,i,r,s,l,d,f){this.ii=t,this.$o=i,this.Oo=r,this.connection=s,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new xN(t,e)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var t=this;return(0,Ee.Z)(function*(){t.Uo()&&(yield t.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(t){this.Ho(),this.stream.send(t)}zo(){var t=this;return(0,Ee.Z)(function*(){if(t.Ko())return t.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(t,e){var i=this;return(0,Ee.Z)(function*(){i.Ho(),i.Jo(),i.qo.cancel(),i.Fo++,4!==t?i.qo.reset():e&&e.code===be.RESOURCE_EXHAUSTED?(Oi(e.toString()),Oi("Using maximum backoff delay to prevent overloading the backend."),i.qo.xo()):e&&e.code===be.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Yo(),i.stream.close(),i.stream=null),i.state=t,yield i.listener.ao(e)})()}Yo(){}auth(){this.state=1;const t=this.Xo(this.Fo),e=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Fo===e&&this.Zo(i,r)},i=>{t(()=>{const r=new Ge(be.UNKNOWN,"Fetching auth token failed: "+i.message);return this.tu(r)})})}Zo(t,e){const i=this.Xo(this.Fo);this.stream=this.eu(t,e),this.stream.uo(()=>{i(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(r=>{i(()=>this.tu(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Go(){var t=this;this.state=5,this.qo.No((0,Ee.Z)(function*(){t.state=0,t.start()}))}tu(t){return Ke("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Xo(t){return e=>{this.ii.enqueueAndForget(()=>this.Fo===t?e():(Ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class BV extends NP{constructor(t,e,i,r,s,l){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,l),this.serializer=s}eu(t,e){return this.connection.Ro("Listen",t,e)}onMessage(t){this.qo.reset();const e=function YC(n,t){let e;if("targetChange"in t){const i="NO_CHANGE"===(f=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===f?1:"REMOVE"===f?2:"CURRENT"===f?3:"RESET"===f?4:Dt(),r=t.targetChange.targetIds||[],s=function(f,m){return f.useProto3Json?(Lt(void 0===m||"string"==typeof m),jr.fromBase64String(m||"")):(Lt(void 0===m||m instanceof Uint8Array),jr.fromUint8Array(m||new Uint8Array))}(n,t.targetChange.resumeToken),l=t.targetChange.cause,d=l&&function(f){const m=void 0===f.code?be.UNKNOWN:jC(f.code);return new Ge(m,f.message||"")}(l);e=new HM(i,r,s,d||null)}else if("documentChange"in t){const i=t.documentChange,r=ac(n,i.document.name),s=sr(i.document.updateTime),l=i.document.createTime?sr(i.document.createTime):Bt.min(),d=new Os({mapValue:{fields:i.document.fields}}),f=Fi.newFoundDocument(r,s,l,d);e=new xw(i.targetIds||[],i.removedTargetIds||[],f.key,f)}else if("documentDelete"in t){const i=t.documentDelete,r=ac(n,i.document),s=i.readTime?sr(i.readTime):Bt.min(),l=Fi.newNoDocument(r,s);e=new xw([],i.removedTargetIds||[],l.key,l)}else if("documentRemove"in t){const i=t.documentRemove,r=ac(n,i.document);e=new xw([],i.removedTargetIds||[],r,null)}else{if(!("filter"in t))return Dt();{const i=t.filter,{count:r=0,unchangedNames:s}=i,l=new FM(r,s);e=new UM(i.targetId,l)}}var f;return e}(this.serializer,t),i=function(r){if(!("targetChange"in r))return Bt.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?Bt.min():s.readTime?sr(s.readTime):Bt.min()}(t);return this.listener.nu(e,i)}su(t){const e={};e.database=Og(this.serializer),e.addTarget=function(r,s){let l;const d=s.target;if(l=cu(d)?{documents:KC(r,d)}:{query:QC(r,d)},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=zM(r,s.resumeToken);const f=zC(r,s.expectedCount);null!==f&&(l.expectedCount=f)}else if(s.snapshotVersion.compareTo(Bt.min())>0){l.readTime=Rg(r,s.snapshotVersion.toTimestamp());const f=zC(r,s.expectedCount);null!==f&&(l.expectedCount=f)}return l}(this.serializer,t);const i=function XC(n,t){const e=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Dt()}}(t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);i&&(e.labels=i),this.Wo(e)}iu(t){const e={};e.database=Og(this.serializer),e.removeTarget=t,this.Wo(e)}}class VV extends NP{constructor(t,e,i,r,s,l){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,l),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(t,e){return this.connection.Ro("Write",t,e)}onMessage(t){if(Lt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.ru){this.qo.reset();const e=function YM(n,t){return n&&n.length>0?(Lt(void 0!==t),n.map(e=>function(i,r){let s=sr(i.updateTime?i.updateTime:r);return s.isEqual(Bt.min())&&(s=sr(r)),new Ew(s,i.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),i=sr(t.commitTime);return this.listener.cu(i,e)}return Lt(!t.writeResults||0===t.writeResults.length),this.ru=!0,this.listener.au()}hu(){const t={};t.database=Og(this.serializer),this.Wo(t)}uu(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>Tf(this.serializer,i))};this.Wo(e)}}class UV extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new Ge(be.FAILED_PRECONDITION,"The client has already been terminated.")}Io(t,e,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.Io(t,e,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Ge(be.UNKNOWN,r.toString())})}vo(t,e,i,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection.vo(t,e,i,s,l,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ge(be.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class jV{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(t){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.yu("Offline")))}set(t){this.Tu(),this.wu=0,"Online"===t&&(this.mu=!1),this.yu(t)}yu(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}pu(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Oi(e),this.mu=!1):Ke("OnlineStateTracker",e)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class GV{constructor(t,e,i,r,s){var l=this;this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(d=>{i.enqueueAndForget((0,Ee.Z)(function*(){var f;$d(l)&&(Ke("RemoteStore","Restarting streams for network reachability change."),yield(f=(0,Ee.Z)(function*(m){const y=yt(m);y.vu.add(4),yield Rf(y),y.bu.set("Unknown"),y.vu.delete(4),yield $g(y)}),function(m){return f.apply(this,arguments)})(l))}))}),this.bu=new jV(i,r)}}function $g(n){return Dv.apply(this,arguments)}function Dv(){return Dv=(0,Ee.Z)(function*(n){if($d(n))for(const t of n.Ru)yield t(!0)}),Dv.apply(this,arguments)}function Rf(n){return kT.apply(this,arguments)}function kT(){return kT=(0,Ee.Z)(function*(n){for(const t of n.Ru)yield t(!1)}),kT.apply(this,arguments)}function Of(n,t){const e=yt(n);e.Au.has(t.targetId)||(e.Au.set(t.targetId,t),rb(e)?PT(e):Tv(e).Ko()&&ON(e,t))}function Ev(n,t){const e=yt(n),i=Tv(e);e.Au.delete(t),i.Ko()&&xP(e,t),0===e.Au.size&&(i.Ko()?i.jo():$d(e)&&e.bu.set("Unknown"))}function ON(n,t){if(n.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Bt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Tv(n).su(t)}function xP(n,t){n.Vu.qt(t),Tv(n).iu(t)}function PT(n){n.Vu=new hP({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),le:t=>n.Au.get(t)||null,ue:()=>n.datastore.serializer.databaseId}),Tv(n).start(),n.bu.gu()}function rb(n){return $d(n)&&!Tv(n).Uo()&&n.Au.size>0}function $d(n){return 0===yt(n).vu.size}function kN(n){n.Vu=void 0}function RP(n){return PN.apply(this,arguments)}function PN(){return PN=(0,Ee.Z)(function*(n){n.Au.forEach((t,e)=>{ON(n,t)})}),PN.apply(this,arguments)}function OP(n,t){return kf.apply(this,arguments)}function kf(){return kf=(0,Ee.Z)(function*(n,t){kN(n),rb(n)?(n.bu.Iu(t),PT(n)):n.bu.set("Unknown")}),kf.apply(this,arguments)}function sb(n,t,e){return FT.apply(this,arguments)}function FT(){return FT=(0,Ee.Z)(function*(n,t,e){if(n.bu.set("Online"),t instanceof HM&&2===t.state&&t.cause)try{yield(i=(0,Ee.Z)(function*(r,s){const l=s.cause;for(const d of s.targetIds)r.Au.has(d)&&(yield r.remoteSyncer.rejectListen(d,l),r.Au.delete(d),r.Vu.removeTarget(d))}),function(r,s){return i.apply(this,arguments)})(n,t)}catch(i){Ke("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield ob(n,i)}else if(t instanceof xw?n.Vu.Ht(t):t instanceof UM?n.Vu.ne(t):n.Vu.Xt(t),!e.isEqual(Bt.min()))try{const i=yield Zw(n.localStore);e.compareTo(i)>=0&&(yield function(r,s){const l=r.Vu.ce(s);return l.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const m=r.Au.get(f);m&&r.Au.set(f,m.withResumeToken(d.resumeToken,s))}}),l.targetMismatches.forEach((d,f)=>{const m=r.Au.get(d);if(!m)return;r.Au.set(d,m.withResumeToken(jr.EMPTY_BYTE_STRING,m.snapshotVersion)),xP(r,d);const y=new Pd(m.target,d,f,m.sequenceNumber);ON(r,y)}),r.remoteSyncer.applyRemoteEvent(l)}(n,e))}catch(i){Ke("RemoteStore","Failed to raise snapshot:",i),yield ob(n,i)}var i}),FT.apply(this,arguments)}function ob(n,t,e){return LT.apply(this,arguments)}function LT(){return LT=(0,Ee.Z)(function*(n,t,e){if(!nu(t))throw t;n.vu.add(1),yield Rf(n),n.bu.set("Offline"),e||(e=()=>Zw(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){Ke("RemoteStore","Retrying IndexedDB access"),yield e(),n.vu.delete(1),yield $g(n)}))}),LT.apply(this,arguments)}function FN(n,t){return t().catch(e=>ob(n,e,t))}function zg(n){return BT.apply(this,arguments)}function BT(){return BT=(0,Ee.Z)(function*(n){const t=yt(n),e=Rr(t);let i=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;VT(t);)try{const r=yield Kw(t.localStore,i);if(null===r){0===t.Eu.length&&e.jo();break}i=r.batchId,kP(t,r)}catch(r){yield ob(t,r)}LN(t)&&BN(t)}),BT.apply(this,arguments)}function VT(n){return $d(n)&&n.Eu.length<10}function kP(n,t){n.Eu.push(t);const e=Rr(n);e.Ko()&&e.ou&&e.uu(t.mutations)}function LN(n){return $d(n)&&!Rr(n).Uo()&&n.Eu.length>0}function BN(n){Rr(n).start()}function PP(n){return UT.apply(this,arguments)}function UT(){return UT=(0,Ee.Z)(function*(n){Rr(n).hu()}),UT.apply(this,arguments)}function FP(n){return HT.apply(this,arguments)}function HT(){return HT=(0,Ee.Z)(function*(n){const t=Rr(n);for(const e of n.Eu)t.uu(e.mutations)}),HT.apply(this,arguments)}function LP(n,t,e){return jT.apply(this,arguments)}function jT(){return jT=(0,Ee.Z)(function*(n,t,e){const i=n.Eu.shift(),r=HC.from(i,t,e);yield FN(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield zg(n)}),jT.apply(this,arguments)}function VN(n,t){return Cv.apply(this,arguments)}function Cv(){return Cv=(0,Ee.Z)(function*(n,t){var e;t&&Rr(n).ou&&(yield(e=(0,Ee.Z)(function*(i,r){if(LM(s=r.code)&&s!==be.ABORTED){const l=i.Eu.shift();Rr(i).Qo(),yield FN(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,r)),yield zg(i)}var s}),function(i,r){return e.apply(this,arguments)})(n,t)),LN(n)&&BN(n)}),Cv.apply(this,arguments)}function UN(n,t){return GT.apply(this,arguments)}function GT(){return GT=(0,Ee.Z)(function*(n,t){const e=yt(n);e.asyncQueue.verifyOperationInProgress(),Ke("RemoteStore","RemoteStore received new credentials");const i=$d(e);e.vu.add(3),yield Rf(e),i&&e.bu.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.vu.delete(3),yield $g(e)}),GT.apply(this,arguments)}function ab(n,t){return lb.apply(this,arguments)}function lb(){return lb=(0,Ee.Z)(function*(n,t){const e=yt(n);t?(e.vu.delete(2),yield $g(e)):t||(e.vu.add(2),yield Rf(e),e.bu.set("Unknown"))}),lb.apply(this,arguments)}function Tv(n){return n.Su||(n.Su=function(t,e,i){const r=yt(t);return r.fu(),new BV(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(n.datastore,n.asyncQueue,{uo:RP.bind(null,n),ao:OP.bind(null,n),nu:sb.bind(null,n)}),n.Ru.push(function(){var t=(0,Ee.Z)(function*(e){e?(n.Su.Qo(),rb(n)?PT(n):n.bu.set("Unknown")):(yield n.Su.stop(),kN(n))});return function(e){return t.apply(this,arguments)}}())),n.Su}function Rr(n){return n.Du||(n.Du=function(t,e,i){const r=yt(t);return r.fu(),new VV(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(n.datastore,n.asyncQueue,{uo:PP.bind(null,n),ao:VN.bind(null,n),au:FP.bind(null,n),cu:LP.bind(null,n)}),n.Ru.push(function(){var t=(0,Ee.Z)(function*(e){e?(n.Du.Qo(),yield zg(n)):(yield n.Du.stop(),n.Eu.length>0&&(Ke("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(e){return t.apply(this,arguments)}}())),n.Du}class cb{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new _r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(t,e,i,r,s){const l=Date.now()+i,d=new cb(t,e,l,r,s);return d.start(i),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ge(be.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pf(n,t){if(Oi("AsyncQueue",`${t}: ${n}`),nu(n))return new Ge(be.UNAVAILABLE,`${t}: ${n}`);throw n}class Wg{constructor(t){this.comparator=t?(e,i)=>t(e,i)||ft.comparator(e.key,i.key):(e,i)=>ft.comparator(e.key,i.key),this.keyedMap=iv(),this.sortedSet=new Pi(this.comparator)}static emptySet(t){return new Wg(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Wg)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const i=new Wg;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class $T{constructor(){this.Cu=new Pi(ft.comparator)}track(t){const e=t.doc.key,i=this.Cu.get(e);i?0!==t.type&&3===i.type?this.Cu=this.Cu.insert(e,t):3===t.type&&1!==i.type?this.Cu=this.Cu.insert(e,{type:i.type,doc:t.doc}):2===t.type&&2===i.type?this.Cu=this.Cu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===i.type?this.Cu=this.Cu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===i.type?this.Cu=this.Cu.remove(e):1===t.type&&2===i.type?this.Cu=this.Cu.insert(e,{type:1,doc:i.doc}):0===t.type&&1===i.type?this.Cu=this.Cu.insert(e,{type:2,doc:t.doc}):Dt():this.Cu=this.Cu.insert(e,t)}xu(){const t=[];return this.Cu.inorderTraversal((e,i)=>{t.push(i)}),t}}class qg{constructor(t,e,i,r,s,l,d,f,m){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(t,e,i,r,s){const l=[];return e.forEach(d=>{l.push({type:0,doc:d})}),new qg(t,e,Wg.emptySet(e),l,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ws(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}class zT{constructor(){this.Nu=void 0,this.listeners=[]}}class zd{constructor(){this.queries=new rc(t=>rP(t),ws),this.onlineState="Unknown",this.ku=new Set}}function ub(n,t){return Iv.apply(this,arguments)}function Iv(){return Iv=(0,Ee.Z)(function*(n,t){const e=yt(n),i=t.query;let r=!1,s=e.queries.get(i);if(s||(r=!0,s=new zT),r)try{s.Nu=yield e.onListen(i)}catch(l){const d=Pf(l,`Initialization of query '${yw(t.query)}' failed`);return void t.onError(d)}e.queries.set(i,s),s.listeners.push(t),t.Mu(e.onlineState),s.Nu&&t.$u(s.Nu)&&qT(e)}),Iv.apply(this,arguments)}function Sv(n,t){return WT.apply(this,arguments)}function WT(){return WT=(0,Ee.Z)(function*(n,t){const e=yt(n),i=t.query;let r=!1;const s=e.queries.get(i);if(s){const l=s.listeners.indexOf(t);l>=0&&(s.listeners.splice(l,1),r=0===s.listeners.length)}if(r)return e.queries.delete(i),e.onUnlisten(i)}),WT.apply(this,arguments)}function $V(n,t){const e=yt(n);let i=!1;for(const r of t){const l=e.queries.get(r.query);if(l){for(const d of l.listeners)d.$u(r)&&(i=!0);l.Nu=r}}i&&qT(e)}function HN(n,t,e){const i=yt(n),r=i.queries.get(t);if(r)for(const s of r.listeners)s.onError(e);i.queries.delete(t)}function qT(n){n.ku.forEach(t=>{t.next()})}class YT{constructor(t,e,i){this.query=t,this.Ou=e,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=i||{}}$u(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)3!==r.type&&i.push(r);t=new qg(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Fu?this.Lu(t)&&(this.Ou.next(t),e=!0):this.qu(t,this.onlineState)&&(this.Uu(t),e=!0),this.Bu=t,e}onError(t){this.Ou.error(t)}Mu(t){this.onlineState=t;let e=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,t)&&(this.Uu(this.Bu),e=!0),e}qu(t,e){return!t.fromCache||(!this.options.Ku||!("Offline"!==e))&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}Lu(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(t){t=qg.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Fu=!0,this.Ou.next(t)}}class BP{constructor(t,e){this.Gu=t,this.byteLength=e}Qu(){return"metadata"in this.Gu}}class jN{constructor(t){this.serializer=t}rr(t){return ac(this.serializer,t)}ur(t){return t.metadata.exists?qM(this.serializer,t.document,!1):Fi.newNoDocument(this.rr(t.metadata.name),this.cr(t.metadata.readTime))}cr(t){return sr(t)}}class GN{constructor(t,e,i){this.ju=t,this.localStore=e,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=VP(t)}zu(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.Gu.namedQuery)this.queries.push(t.Gu.namedQuery);else if(t.Gu.documentMetadata){this.documents.push({metadata:t.Gu.documentMetadata}),t.Gu.documentMetadata.exists||++e;const i=On.fromString(t.Gu.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.Gu.document&&(this.documents[this.documents.length-1].document=t.Gu.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}Wu(t){const e=new Map,i=new jN(this.serializer);for(const r of t)if(r.metadata.queries){const s=i.rr(r.metadata.name);for(const l of r.metadata.queries){const d=(e.get(l)||fn()).add(s);e.set(l,d)}}return e}complete(){var t=this;return(0,Ee.Z)(function*(){const e=yield function TN(n,t,e,i){return wv.apply(this,arguments)}(t.localStore,new jN(t.serializer),t.documents,t.ju.id),i=t.Wu(t.documents);for(const r of t.queries)yield LV(t.localStore,r,i.get(r.name));return t.progress.taskState="Success",{progress:t.progress,Hu:t.collectionGroups,Ju:e}})()}}function VP(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class ZT{constructor(t){this.key=t}}class $N{constructor(t){this.key=t}}class KT{constructor(t,e){this.query=t,this.Yu=e,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=fn(),this.mutatedKeys=fn(),this.tc=PC(t),this.ec=new Wg(this.tc)}get nc(){return this.Yu}sc(t,e){const i=e?e.ic:new $T,r=e?e.ec:this.ec;let s=e?e.mutatedKeys:this.mutatedKeys,l=r,d=!1;const f="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,m="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((y,C)=>{const A=r.get(y),x=Sg(this.query,C)?C:null,P=!!A&&this.mutatedKeys.has(A.key),F=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let U=!1;A&&x?A.data.isEqual(x.data)?P!==F&&(i.track({type:3,doc:x}),U=!0):this.rc(A,x)||(i.track({type:2,doc:x}),U=!0,(f&&this.tc(x,f)>0||m&&this.tc(x,m)<0)&&(d=!0)):!A&&x?(i.track({type:0,doc:x}),U=!0):A&&!x&&(i.track({type:1,doc:A}),U=!0,(f||m)&&(d=!0)),U&&(x?(l=l.add(x),s=F?s.add(y):s.delete(y)):(l=l.delete(y),s=s.delete(y)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const y="F"===this.query.limitType?l.last():l.first();l=l.delete(y.key),s=s.delete(y.key),i.track({type:1,doc:y})}return{ec:l,ic:i,zi:d,mutatedKeys:s}}rc(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i){const r=this.ec;this.ec=t.ec,this.mutatedKeys=t.mutatedKeys;const s=t.ic.xu();s.sort((m,y)=>function(C,A){const x=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Dt()}};return x(C)-x(A)}(m.type,y.type)||this.tc(m.doc,y.doc)),this.oc(i);const l=e?this.uc():[],d=0===this.Zu.size&&this.current?1:0,f=d!==this.Xu;return this.Xu=d,0!==s.length||f?{snapshot:new qg(this.query,t.ec,r,s,t.mutatedKeys,0===d,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({ec:this.ec,ic:new $T,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(t){return!this.Yu.has(t)&&!!this.ec.has(t)&&!this.ec.get(t).hasLocalMutations}oc(t){t&&(t.addedDocuments.forEach(e=>this.Yu=this.Yu.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Yu=this.Yu.delete(e)),this.current=t.current)}uc(){if(!this.current)return[];const t=this.Zu;this.Zu=fn(),this.ec.forEach(i=>{this.ac(i.key)&&(this.Zu=this.Zu.add(i.key))});const e=[];return t.forEach(i=>{this.Zu.has(i)||e.push(new $N(i))}),this.Zu.forEach(i=>{t.has(i)||e.push(new ZT(i))}),e}hc(t){this.Yu=t.ir,this.Zu=fn();const e=this.sc(t.documents);return this.applyChanges(e,!0)}lc(){return qg.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class zV{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class QT{constructor(t){this.key=t,this.fc=!1}}class zN{constructor(t,e,i,r,s,l){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new rc(d=>rP(d),ws),this._c=new Map,this.mc=new Set,this.gc=new Pi(ft.comparator),this.yc=new Map,this.Ic=new zw,this.Tc={},this.Ec=new Map,this.Ac=Vd.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function WN(n,t){return JT.apply(this,arguments)}function JT(){return JT=(0,Ee.Z)(function*(n,t){const e=gb(n);let i,r;const s=e.wc.get(t);if(s)i=s.targetId,e.sharedClientState.addLocalQueryTarget(i),r=s.view.lc();else{const l=yield Gd(e.localStore,lo(t)),d=e.sharedClientState.addLocalQueryTarget(l.targetId);i=l.targetId,r=yield db(e,t,i,"current"===d,l.resumeToken),e.isPrimaryClient&&Of(e.remoteStore,l)}return r}),JT.apply(this,arguments)}function db(n,t,e,i,r){return hb.apply(this,arguments)}function hb(){return hb=(0,Ee.Z)(function*(n,t,e,i,r){n.Rc=(C,A,x)=>{return(P=(0,Ee.Z)(function*(F,U,ee,oe){let te=U.view.sc(ee);te.zi&&(te=yield Jw(F.localStore,U.query,!1).then(({documents:Be})=>U.view.sc(Be,te)));const ce=oe&&oe.targetChanges.get(U.targetId),Ne=U.view.applyChanges(te,F.isPrimaryClient,ce);return XN(F,U.targetId,Ne.cc),Ne.snapshot}),function(F,U,ee,oe){return P.apply(this,arguments)})(n,C,A,x);var P};const s=yield Jw(n.localStore,t,!0),l=new KT(t,s.ir),d=l.sc(s.documents),f=dv.createSynthesizedTargetChangeForCurrentChange(e,i&&"Offline"!==n.onlineState,r),m=l.applyChanges(d,n.isPrimaryClient,f);XN(n,e,m.cc);const y=new zV(t,e,l);return n.wc.set(t,y),n._c.has(e)?n._c.get(e).push(t):n._c.set(e,[t]),m.snapshot}),hb.apply(this,arguments)}function Yg(n,t){return Zg.apply(this,arguments)}function Zg(){return Zg=(0,Ee.Z)(function*(n,t){const e=yt(n),i=e.wc.get(t),r=e._c.get(i.targetId);if(r.length>1)return e._c.set(i.targetId,r.filter(s=>!ws(s,t))),void e.wc.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(i.targetId),e.sharedClientState.isActiveQueryTarget(i.targetId)||(yield yv(e.localStore,i.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(i.targetId),Ev(e.remoteStore,i.targetId),Av(e,i.targetId)}).catch(tu))):(Av(e,i.targetId),yield yv(e.localStore,i.targetId,!0))}),Zg.apply(this,arguments)}function fb(){return fb=(0,Ee.Z)(function*(n,t,e){const i=mb(n);try{const r=yield function(s,l){const d=yt(s),f=Wi.now(),m=l.reduce((A,x)=>A.add(x.key),fn());let y,C;return d.persistence.runTransaction("Locally write mutations","readwrite",A=>{let x=ko(),P=fn();return d.Zi.getEntries(A,m).next(F=>{x=F,x.forEach((U,ee)=>{ee.isValidDocument()||(P=P.add(U))})}).next(()=>d.localDocuments.getOverlayedDocuments(A,x)).next(F=>{y=F;const U=[];for(const ee of l){const oe=cP(ee,y.get(ee.key).overlayedDocument);null!=oe&&U.push(new uu(ee.key,oe,dM(oe.value.mapValue),qi.exists(!0)))}return d.mutationQueue.addMutationBatch(A,f,U,l)}).next(F=>{C=F;const U=F.applyToLocalDocumentSet(y,P);return d.documentOverlayCache.saveOverlays(A,F.batchId,U)})}).then(()=>({batchId:C.batchId,changes:Ag(y)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(s,l,d){let f=s.Tc[s.currentUser.toKey()];f||(f=new Pi(on)),f=f.insert(l,d),s.Tc[s.currentUser.toKey()]=f}(i,r.batchId,e),yield hu(i,r.changes),yield zg(i.remoteStore)}catch(r){const s=Pf(r,"Failed to persist write");e.reject(s)}}),fb.apply(this,arguments)}function YN(n,t){return XT.apply(this,arguments)}function XT(){return XT=(0,Ee.Z)(function*(n,t){const e=yt(n);try{const i=yield function DN(n,t){const e=yt(n),i=t.snapshotVersion;let r=e.Ji;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const l=e.Zi.newChangeBuffer({trackRemovals:!0});r=e.Ji;const d=[];t.targetChanges.forEach((y,C)=>{const A=r.get(C);if(!A)return;d.push(e.Bs.removeMatchingKeys(s,y.removedDocuments,C).next(()=>e.Bs.addMatchingKeys(s,y.addedDocuments,C)));let x=A.withSequenceNumber(s.currentSequenceNumber);var P,F,U;null!==t.targetMismatches.get(C)?x=x.withResumeToken(jr.EMPTY_BYTE_STRING,Bt.min()).withLastLimboFreeSnapshotVersion(Bt.min()):y.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(y.resumeToken,i)),r=r.insert(C,x),F=x,U=y,(0===(P=A).resumeToken.approximateByteSize()||F.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8||U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0)&&d.push(e.Bs.updateTargetData(s,x))});let f=ko(),m=fn();if(t.documentUpdates.forEach(y=>{t.resolvedLimboDocuments.has(y)&&d.push(e.persistence.referenceDelegate.updateLimboDocument(s,y))}),d.push(EN(s,l,t.documentUpdates).next(y=>{f=y.nr,m=y.sr})),!i.isEqual(Bt.min())){const y=e.Bs.getLastRemoteSnapshotVersion(s).next(C=>e.Bs.setTargetsMetadata(s,s.currentSequenceNumber,i));d.push(y)}return ve.waitFor(d).next(()=>l.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,f,m)).next(()=>f)}).then(s=>(e.Ji=r,s))}(e.localStore,t);t.targetChanges.forEach((r,s)=>{const l=e.yc.get(s);l&&(Lt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?l.fc=!0:r.modifiedDocuments.size>0?Lt(l.fc):r.removedDocuments.size>0&&(Lt(l.fc),l.fc=!1))}),yield hu(e,i,t)}catch(i){yield tu(i)}}),XT.apply(this,arguments)}function UP(n,t,e){const i=yt(n);if(i.isPrimaryClient&&0===e||!i.isPrimaryClient&&1===e){const r=[];i.wc.forEach((s,l)=>{const d=l.view.Mu(t);d.snapshot&&r.push(d.snapshot)}),function(s,l){const d=yt(s);d.onlineState=l;let f=!1;d.queries.forEach((m,y)=>{for(const C of y.listeners)C.Mu(l)&&(f=!0)}),f&&qT(d)}(i.eventManager,t),r.length&&i.dc.nu(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function ZN(n,t,e){return eI.apply(this,arguments)}function eI(){return eI=(0,Ee.Z)(function*(n,t,e){const i=yt(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.yc.get(t),s=r&&r.key;if(s){let l=new Pi(ft.comparator);l=l.insert(s,Fi.newNoDocument(s,Bt.min()));const d=fn().add(s),f=new uv(Bt.min(),new Map,new Pi(on),l,d);yield YN(i,f),i.gc=i.gc.remove(s),i.yc.delete(t),ex(i)}else yield yv(i.localStore,t,!1).then(()=>Av(i,t,e)).catch(tu)}),eI.apply(this,arguments)}function HP(n,t){return KN.apply(this,arguments)}function KN(){return KN=(0,Ee.Z)(function*(n,t){const e=yt(n),i=t.batch.batchId;try{const r=yield function IP(n,t){const e=yt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=e.Zi.newChangeBuffer({trackRemovals:!0});return function(l,d,f,m){const y=f.batch,C=y.keys();let A=ve.resolve();return C.forEach(x=>{A=A.next(()=>m.getEntry(d,x)).next(P=>{const F=f.docVersions.get(x);Lt(null!==F),P.version.compareTo(F)<0&&(y.applyToRemoteDocument(P,f),P.isValidDocument()&&(P.setReadTime(f.commitVersion),m.addEntry(P)))})}),A.next(()=>l.mutationQueue.removeMutationBatch(d,y))}(e,i,t,s).next(()=>s.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let d=fn();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(d=d.add(l.batch.mutations[f].key));return d}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}(e.localStore,t);iI(e,i,null),nI(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield hu(e,r)}catch(r){yield tu(r)}}),KN.apply(this,arguments)}function WV(n,t,e){return QN.apply(this,arguments)}function QN(){return QN=(0,Ee.Z)(function*(n,t,e){const i=yt(n);try{const r=yield function(s,l){const d=yt(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return d.mutationQueue.lookupMutationBatch(f,l).next(y=>(Lt(null!==y),m=y.keys(),d.mutationQueue.removeMutationBatch(f,y))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,m,l)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>d.localDocuments.getDocuments(f,m))})}(i.localStore,t);iI(i,t,e),nI(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield hu(i,r)}catch(r){yield tu(r)}}),QN.apply(this,arguments)}function tI(){return tI=(0,Ee.Z)(function*(n,t){const e=yt(n);$d(e.remoteStore)||Ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const l=yt(s);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>l.mutationQueue.getHighestUnacknowledgedBatchId(d))}(e.localStore);if(-1===i)return void t.resolve();const r=e.Ec.get(i)||[];r.push(t),e.Ec.set(i,r)}catch(i){const r=Pf(i,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}}),tI.apply(this,arguments)}function nI(n,t){(n.Ec.get(t)||[]).forEach(e=>{e.resolve()}),n.Ec.delete(t)}function iI(n,t,e){const i=yt(n);let r=i.Tc[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),i.Tc[i.currentUser.toKey()]=r}}function Av(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n._c.get(t))n.wc.delete(i),e&&n.dc.Pc(i,e);n._c.delete(t),n.isPrimaryClient&&n.Ic.Is(t).forEach(i=>{n.Ic.containsKey(i)||jP(n,i)})}function jP(n,t){n.mc.delete(t.path.canonicalString());const e=n.gc.get(t);null!==e&&(Ev(n.remoteStore,e),n.gc=n.gc.remove(t),n.yc.delete(e),ex(n))}function XN(n,t,e){for(const i of e)i instanceof ZT?(n.Ic.addReference(i.key,t),qV(n,i)):i instanceof $N?(Ke("SyncEngine","Document no longer in limbo: "+i.key),n.Ic.removeReference(i.key,t),n.Ic.containsKey(i.key)||jP(n,i.key)):Dt()}function qV(n,t){const e=t.key,i=e.path.canonicalString();n.gc.get(e)||n.mc.has(i)||(Ke("SyncEngine","New document in limbo: "+e),n.mc.add(i),ex(n))}function ex(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const t=n.mc.values().next().value;n.mc.delete(t);const e=new ft(On.fromString(t)),i=n.Ac.next();n.yc.set(i,new QT(e)),n.gc=n.gc.insert(e,i),Of(n.remoteStore,new Pd(lo(nv(e.path)),i,"TargetPurposeLimboResolution",Oo.ct))}}function hu(n,t,e){return Kg.apply(this,arguments)}function Kg(){return Kg=(0,Ee.Z)(function*(n,t,e){const i=yt(n),r=[],s=[],l=[];var d;i.wc.isEmpty()||(i.wc.forEach((d,f)=>{l.push(i.Rc(f,t,e).then(m=>{if((m||e)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(f.targetId,m?.fromCache?"not-current":"current"),m){r.push(m);const y=TT.Li(f.targetId,m);s.push(y)}}))}),yield Promise.all(l),i.dc.nu(r),yield(d=(0,Ee.Z)(function*(f,m){const y=yt(f);try{yield y.persistence.runTransaction("notifyLocalViewChanges","readwrite",C=>ve.forEach(m,A=>ve.forEach(A.Fi,x=>y.persistence.referenceDelegate.addReference(C,A.targetId,x)).next(()=>ve.forEach(A.Bi,x=>y.persistence.referenceDelegate.removeReference(C,A.targetId,x)))))}catch(C){if(!nu(C))throw C;Ke("LocalStore","Failed to update sequence numbers: "+C)}for(const C of m){const A=C.targetId;if(!C.fromCache){const x=y.Ji.get(A),F=x.withLastLimboFreeSnapshotVersion(x.snapshotVersion);y.Ji=y.Ji.insert(A,F)}}}),function(f,m){return d.apply(this,arguments)})(i.localStore,s))}),Kg.apply(this,arguments)}function GP(n,t){return rI.apply(this,arguments)}function rI(){return rI=(0,Ee.Z)(function*(n,t){const e=yt(n);if(!e.currentUser.isEqual(t)){Ke("SyncEngine","User change. New user:",t.toKey());const i=yield bN(e.localStore,t);e.currentUser=t,(r=e).Ec.forEach(l=>{l.forEach(d=>{d.reject(new Ge(be.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.Ec.clear(),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield hu(e,i.er)}var r}),rI.apply(this,arguments)}function tx(n,t){const e=yt(n),i=e.yc.get(t);if(i&&i.fc)return fn().add(i.key);{let r=fn();const s=e._c.get(t);if(!s)return r;for(const l of s){const d=e.wc.get(l);r=r.unionWith(d.view.nc)}return r}}function Ff(n,t){return pb.apply(this,arguments)}function pb(){return pb=(0,Ee.Z)(function*(n,t){const e=yt(n),i=yield Jw(e.localStore,t.query,!0),r=t.view.hc(i);return e.isPrimaryClient&&XN(e,t.targetId,r.cc),r}),pb.apply(this,arguments)}function sI(n,t){return Mv.apply(this,arguments)}function Mv(){return Mv=(0,Ee.Z)(function*(n,t){const e=yt(n);return xf(e.localStore,t).then(i=>hu(e,i))}),Mv.apply(this,arguments)}function $P(n,t,e,i){return Nv.apply(this,arguments)}function Nv(){return Nv=(0,Ee.Z)(function*(n,t,e,i){const r=yt(n),s=yield function(l,d){const f=yt(l),m=yt(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",y=>m.Sn(y,d).next(C=>C?f.localDocuments.getDocuments(y,C):ve.resolve(null)))}(r.localStore,t);var d;null!==s?("pending"===e?yield zg(r.remoteStore):"acknowledged"===e||"rejected"===e?(iI(r,t,i||null),nI(r,t),d=t,yt(yt(r.localStore).mutationQueue).Cn(d)):Dt(),yield hu(r,s)):Ke("SyncEngine","Cannot apply mutation batch with id: "+t)}),Nv.apply(this,arguments)}function Qg(){return Qg=(0,Ee.Z)(function*(n,t){const e=yt(n);if(gb(e),mb(e),!0===t&&!0!==e.vc){const i=e.sharedClientState.getAllActiveQueryTargets(),r=yield zP(e,i.toArray());e.vc=!0,yield ab(e.remoteStore,!0);for(const s of r)Of(e.remoteStore,s)}else if(!1===t&&!1!==e.vc){const i=[];let r=Promise.resolve();e._c.forEach((s,l)=>{e.sharedClientState.isLocalQueryTarget(l)?i.push(l):r=r.then(()=>(Av(e,l),yv(e.localStore,l,!0))),Ev(e.remoteStore,l)}),yield r,yield zP(e,i),function(s){const l=yt(s);l.yc.forEach((d,f)=>{Ev(l.remoteStore,f)}),l.Ic.Ts(),l.yc=new Map,l.gc=new Pi(ft.comparator)}(e),e.vc=!1,yield ab(e.remoteStore,!1)}}),Qg.apply(this,arguments)}function zP(n,t,e){return nx.apply(this,arguments)}function nx(){return nx=(0,Ee.Z)(function*(n,t,e){const i=yt(n),r=[],s=[];for(const l of t){let d;const f=i._c.get(l);if(f&&0!==f.length){d=yield Gd(i.localStore,lo(f[0]));for(const m of f){const y=i.wc.get(m),C=yield Ff(i,y);C.snapshot&&s.push(C.snapshot)}}else{const m=yield AT(i.localStore,l);d=yield Gd(i.localStore,m),yield db(i,WP(m),l,!1,d.resumeToken)}r.push(d)}return i.dc.nu(s),r}),nx.apply(this,arguments)}function WP(n){return RC(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function ix(n){const t=yt(n);return yt(yt(t.localStore).persistence).$i()}function qP(n,t,e,i){return aI.apply(this,arguments)}function aI(){return aI=(0,Ee.Z)(function*(n,t,e,i){const r=yt(n);if(r.vc)return void Ke("SyncEngine","Ignoring unexpected query state notification.");const s=r._c.get(t);if(s&&s.length>0)switch(e){case"current":case"not-current":{const l=yield xf(r.localStore,DM(s[0])),d=uv.createSynthesizedRemoteEventForCurrentChange(t,"current"===e,jr.EMPTY_BYTE_STRING);yield hu(r,l,d);break}case"rejected":yield yv(r.localStore,t,!0),Av(r,t,i);break;default:Dt()}}),aI.apply(this,arguments)}function YP(n,t,e){return lI.apply(this,arguments)}function lI(){return lI=(0,Ee.Z)(function*(n,t,e){const i=gb(n);if(i.vc){for(const r of t){if(i._c.has(r)){Ke("SyncEngine","Adding an already active target "+r);continue}const s=yield AT(i.localStore,r),l=yield Gd(i.localStore,s);yield db(i,WP(s),l.targetId,!1,l.resumeToken),Of(i.remoteStore,l)}for(const r of e)i._c.has(r)&&(yield yv(i.localStore,r,!1).then(()=>{Ev(i.remoteStore,r),Av(i,r)}).catch(tu))}}),lI.apply(this,arguments)}function gb(n){const t=yt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=YN.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=tx.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ZN.bind(null,t),t.dc.nu=$V.bind(null,t.eventManager),t.dc.Pc=HN.bind(null,t.eventManager),t}function mb(n){const t=yt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=HP.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=WV.bind(null,t),t}class xv{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,Ee.Z)(function*(){e.serializer=Gg(t.databaseInfo.databaseId),e.sharedClientState=e.createSharedClientState(t),e.persistence=e.createPersistence(t),yield e.persistence.start(),e.localStore=e.createLocalStore(t),e.gcScheduler=e.createGarbageCollectionScheduler(t,e.localStore),e.indexBackfillerScheduler=e.createIndexBackfillerScheduler(t,e.localStore)})()}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return IT(this.persistence,new Yw,t.initialUser,this.serializer)}createPersistence(t){return new jd(Ww.zs,this.serializer)}createSharedClientState(t){return new SN}terminate(){var t=this;return(0,Ee.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class _b extends xv{constructor(t,e,i){super(),this.Vc=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,i=this;return(0,Ee.Z)(function*(){yield e().call(i,t),yield i.Vc.initialize(i,t),yield mb(i.Vc.syncEngine),yield zg(i.Vc.remoteStore),yield i.persistence.Ii(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(t){return IT(this.persistence,new Yw,t.initialUser,this.serializer)}createGarbageCollectionScheduler(t,e){return new fN(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,e)}createIndexBackfillerScheduler(t,e){const i=new tM(e,this.persistence);return new uw(t.asyncQueue,i)}createPersistence(t){const e=Nf(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?Ws.withCacheSize(this.cacheSizeBytes):Ws.DEFAULT;return new wN(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,NN(),OT(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(t){return new SN}}class vb extends _b{constructor(t,e){super(t,e,!1),this.Vc=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,i=this;return(0,Ee.Z)(function*(){yield e().call(i,t);const r=i.Vc.syncEngine;i.sharedClientState instanceof tb&&(i.sharedClientState.syncEngine={jr:$P.bind(null,r),zr:qP.bind(null,r),Wr:YP.bind(null,r),$i:ix.bind(null,r),Qr:sI.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.Ii(function(){var s=(0,Ee.Z)(function*(l){yield function oI(n,t){return Qg.apply(this,arguments)}(i.Vc.syncEngine,l),i.gcScheduler&&(l&&!i.gcScheduler.started?i.gcScheduler.start():l||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(l&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():l||i.indexBackfillerScheduler.stop())});return function(l){return s.apply(this,arguments)}}())})()}createSharedClientState(t){const e=NN();if(!tb.D(e))throw new Ge(be.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=Nf(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new tb(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class Rv{initialize(t,e){var i=this;return(0,Ee.Z)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(e),i.remoteStore=i.createRemoteStore(e),i.eventManager=i.createEventManager(e),i.syncEngine=i.createSyncEngine(e,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>UP(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=GP.bind(null,i.syncEngine),yield ab(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new zd}createDatastore(t){const e=Gg(t.databaseInfo.databaseId),i=new MP(t.databaseInfo);return new UV(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return e=this.localStore,i=this.datastore,r=t.asyncQueue,s=d=>UP(this.syncEngine,d,0),l=RT.D()?new RT:new AP,new GV(e,i,r,s,l);var e,i,r,s,l}createSyncEngine(t,e){return function(i,r,s,l,d,f,m){const y=new zN(i,r,s,l,d,f);return m&&(y.vc=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,Ee.Z)(function*(e){const i=yt(e);Ke("RemoteStore","RemoteStore shutting down."),i.vu.add(5),yield Rf(i),i.Pu.shutdown(),i.bu.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function cI(n,t=10240){let e=0;return{read:()=>(0,Ee.Z)(function*(){if(e<n.byteLength){const i={value:n.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Jg{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Sc(this.observer.next,t)}error(t){this.observer.error?this.Sc(this.observer.error,t):Oi("Uncaught Error in snapshot listener:",t.toString())}Dc(){this.muted=!0}Sc(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class KP{constructor(t,e){this.Cc=t,this.serializer=e,this.metadata=new _r,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(i=>{i&&i.Qu()?this.metadata.resolve(i.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.Gu)}`))},i=>this.metadata.reject(i))}close(){return this.Cc.cancel()}getMetadata(){var t=this;return(0,Ee.Z)(function*(){return t.metadata.promise})()}bc(){var t=this;return(0,Ee.Z)(function*(){return yield t.getMetadata(),t.Nc()})()}Nc(){var t=this;return(0,Ee.Z)(function*(){const e=yield t.kc();if(null===e)return null;const i=t.xc.decode(e),r=Number(i);isNaN(r)&&t.Mc(`length string (${i}) is not valid number`);const s=yield t.$c(r);return new BP(JSON.parse(s),e.length+r)})()}Oc(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}kc(){var t=this;return(0,Ee.Z)(function*(){for(;t.Oc()<0&&!(yield t.Fc()););if(0===t.buffer.length)return null;const e=t.Oc();e<0&&t.Mc("Reached the end of bundle when a length string is expected.");const i=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),i})()}$c(t){var e=this;return(0,Ee.Z)(function*(){for(;e.buffer.length<t;)(yield e.Fc())&&e.Mc("Reached the end of bundle when more is expected.");const i=e.xc.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),i})()}Mc(t){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${t}`)}Fc(){var t=this;return(0,Ee.Z)(function*(){const e=yield t.Cc.read();if(!e.done){const i=new Uint8Array(t.buffer.length+e.value.length);i.set(t.buffer),i.set(e.value,t.buffer.length),t.buffer=i}return e.done})()}}class QP{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new Ge(be.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,Ee.Z)(function*(s,l){const d=yt(s),f=Og(d.serializer)+"/documents",m={documents:l.map(x=>hv(d.serializer,x))},y=yield d.vo("BatchGetDocuments",f,m,l.length),C=new Map;y.forEach(x=>{const P=function PV(n,t){return"found"in t?function(e,i){Lt(!!i.found);const r=ac(e,i.found.name),s=sr(i.found.updateTime),l=i.found.createTime?sr(i.found.createTime):Bt.min(),d=new Os({mapValue:{fields:i.found.fields}});return Fi.newFoundDocument(r,s,l,d)}(n,t):"missing"in t?function(e,i){Lt(!!i.missing),Lt(!!i.readTime);const r=ac(e,i.missing),s=sr(i.readTime);return Fi.newNoDocument(r,s)}(n,t):Dt()}(d.serializer,x);C.set(P.key.toString(),P)});const A=[];return l.forEach(x=>{const P=C.get(x.toString());Lt(!!P),A.push(P)}),A}),function(s,l){return r.apply(this,arguments)})(e.datastore,t);var r;return i.forEach(r=>e.recordVersion(r)),i})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new oc(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,Ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var i;t.mutations.forEach(i=>{e.delete(i.key.toString())}),e.forEach((i,r)=>{const s=ft.fromPath(r);t.mutations.push(new UC(s,t.precondition(s)))}),yield(i=(0,Ee.Z)(function*(r,s){const l=yt(r),d=Og(l.serializer)+"/documents",f={writes:s.map(m=>Tf(l.serializer,m))};yield l.Io("Commit",d,f)}),function(r,s){return i.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Dt();e=Bt.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new Ge(be.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(Bt.min())?qi.exists(!1):qi.updateTime(e):qi.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Bt.min()))throw new Ge(be.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return qi.updateTime(e)}return qi.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class YV{constructor(t,e,i,r,s){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=r,this.deferred=s,this.Bc=i.maxAttempts,this.qo=new xN(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var t=this;this.qo.No((0,Ee.Z)(function*(){const e=new QP(t.datastore),i=t.qc(e);i&&i.then(r=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(r)}).catch(s=>{t.Uc(s)}))}).catch(r=>{t.Uc(r)})}))}qc(t){try{const e=this.updateFunction(t);return!vg(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Uc(t){this.Bc>0&&this.Kc(t)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(t)}Kc(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||"already-exists"===e||!LM(e)}return!1}}class ZV{constructor(t,e,i,r){var s=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=vs.UNAUTHENTICATED,this.clientId=tC.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var l=(0,Ee.Z)(function*(d){Ke("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(i,l=>(Ke("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var t=this;return(0,Ee.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ge(be.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new _r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{t._onlineComponents&&(yield t._onlineComponents.terminate()),t._offlineComponents&&(yield t._offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(i){const r=Pf(i,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}function yb(n,t){return uI.apply(this,arguments)}function uI(){return uI=(0,Ee.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),Ke("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(function(){var r=(0,Ee.Z)(function*(s){i.isEqual(s)||(yield bN(t.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}),uI.apply(this,arguments)}function dI(n,t){return hI.apply(this,arguments)}function hI(){return hI=(0,Ee.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield wb(n);Ke("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield t.initialize(e,i),n.setCredentialChangeListener(r=>UN(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>UN(t.remoteStore,s)),n._onlineComponents=t}),hI.apply(this,arguments)}function fI(n){return"FirebaseError"===n.name?n.code===be.FAILED_PRECONDITION||n.code===be.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function wb(n){return pI.apply(this,arguments)}function pI(){return pI=(0,Ee.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ke("FirestoreClient","Using user provided OfflineComponentProvider");try{yield yb(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!fI(e))throw e;Jo("Error using user provided cache. Falling back to memory cache: "+e),yield yb(n,new xv)}}else Ke("FirestoreClient","Using default OfflineComponentProvider"),yield yb(n,new xv);return n._offlineComponents}),pI.apply(this,arguments)}function Ov(n){return bb.apply(this,arguments)}function bb(){return bb=(0,Ee.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ke("FirestoreClient","Using user provided OnlineComponentProvider"),yield dI(n,n._uninitializedComponentsProvider._online)):(Ke("FirestoreClient","Using default OnlineComponentProvider"),yield dI(n,new Rv))),n._onlineComponents}),bb.apply(this,arguments)}function JP(n){return wb(n).then(t=>t.persistence)}function Db(n){return wb(n).then(t=>t.localStore)}function Eb(n){return Ov(n).then(t=>t.remoteStore)}function Cb(n){return Ov(n).then(t=>t.syncEngine)}function Xg(n){return em.apply(this,arguments)}function em(){return em=(0,Ee.Z)(function*(n){const t=yield Ov(n),e=t.eventManager;return e.onListen=WN.bind(null,t.syncEngine),e.onUnlisten=Yg.bind(null,t.syncEngine),e}),em.apply(this,arguments)}function mI(n,t,e={}){const i=new _r;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(r,s,l,d,f){const m=new Jg({next:C=>{s.enqueueAndForget(()=>Sv(r,y));const A=C.docs.has(l);!A&&C.fromCache?f.reject(new Ge(be.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&C.fromCache&&d&&"server"===d.source?f.reject(new Ge(be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(C)},error:C=>f.reject(C)}),y=new YT(nv(l.path),m,{includeMetadataChanges:!0,Ku:!0});return ub(r,y)}(yield Xg(n),n.asyncQueue,t,e,i)})),i.promise}function ox(n,t,e={}){const i=new _r;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(r,s,l,d,f){const m=new Jg({next:C=>{s.enqueueAndForget(()=>Sv(r,y)),C.fromCache&&"server"===d.source?f.reject(new Ge(be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(C)},error:C=>f.reject(C)}),y=new YT(l,m,{includeMetadataChanges:!0,Ku:!0});return ub(r,y)}(yield Xg(n),n.asyncQueue,t,e,i)})),i.promise}function ax(n){const t={};return void 0!==n.timeoutSeconds&&(t.timeoutSeconds=n.timeoutSeconds),t}const lx=new Map;function cx(n,t,e){if(!e)throw new Ge(be.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function nF(n,t,e,i){if(!0===t&&!0===i)throw new Ge(be.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function iF(n){if(!ft.isDocumentKey(n))throw new Ge(be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function rF(n){if(ft.isDocumentKey(n))throw new Ge(be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function _I(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":Dt()}function Fn(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Ge(be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=_I(n);throw new Ge(be.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function sF(n,t){if(t<=0)throw new Ge(be.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}class oF{constructor(t){var e,i;if(void 0===t.host){if(void 0!==t.ssl)throw new Ge(be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ge(be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}nF("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==t.experimentalAutoDetectLongPolling&&!t.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=ax(null!==(i=t.experimentalLongPollingOptions)&&void 0!==i?i:{}),function(r){if(void 0!==r.timeoutSeconds){if(isNaN(r.timeoutSeconds))throw new Ge(be.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ge(be.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ge(be.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===t.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Tb{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oF({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ge(be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Ge(be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oF(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new xV;switch(e.type){case"firstParty":return new Gk(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Ge(be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=lx.get(t);e&&(Ke("ComponentProvider","Removing Datastore"),lx.delete(t),e.terminate())}(this),Promise.resolve()}}class Li{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fu(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Li(this.firestore,t,this._key)}}class Ps{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Ps(this.firestore,t,this._query)}}class fu extends Ps{constructor(t,e,i){super(t,e,nv(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Li(this.firestore,null,new ft(t))}withConverter(t){return new fu(this.firestore,t,this._path)}}function o(n,t,...e){if(n=(0,B.m9)(n),cx("collection","path",t),n instanceof Tb){const i=On.fromString(t,...e);return rF(i),new fu(n,null,i)}{if(!(n instanceof Li||n instanceof fu))throw new Ge(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(On.fromString(t,...e));return rF(i),new fu(n.firestore,null,i)}}function u(n,t,...e){if(n=(0,B.m9)(n),1===arguments.length&&(t=tC.A()),cx("doc","path",t),n instanceof Tb){const i=On.fromString(t,...e);return iF(i),new Li(n,null,new ft(i))}{if(!(n instanceof Li||n instanceof fu))throw new Ge(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(On.fromString(t,...e));return iF(i),new Li(n.firestore,n instanceof fu?n.converter:null,new ft(i))}}function h(n,t){return n=(0,B.m9)(n),t=(0,B.m9)(t),(n instanceof Li||n instanceof fu)&&(t instanceof Li||t instanceof fu)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function p(n,t){return n=(0,B.m9)(n),t=(0,B.m9)(t),n instanceof Ps&&t instanceof Ps&&n.firestore===t.firestore&&ws(n._query,t._query)&&n.converter===t.converter}class _{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new xN(this,"async_queue_retry"),this.Xc=()=>{const e=OT();e&&Ke("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const t=OT();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Zc(),this.ta(t)}enterRestrictedMode(t){if(!this.jc){this.jc=!0,this.Jc=t||!1;const e=OT();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Xc)}}enqueue(t){if(this.Zc(),this.jc)return new Promise(()=>{});const e=new _r;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Qc.push(t),this.ea()))}ea(){var t=this;return(0,Ee.Z)(function*(){if(0!==t.Qc.length){try{yield t.Qc[0](),t.Qc.shift(),t.qo.reset()}catch(e){if(!nu(e))throw e;Ke("AsyncQueue","Operation failed with retryable error: "+e)}t.Qc.length>0&&t.qo.No(()=>t.ea())}})()}ta(t){const e=this.Gc.then(()=>(this.Hc=!0,t().catch(i=>{throw this.Wc=i,this.Hc=!1,Oi("INTERNAL UNHANDLED ERROR: ",function(s){let l=s.message||"";return s.stack&&(l=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),l}(i)),i}).then(i=>(this.Hc=!1,i))));return this.Gc=e,e}enqueueAfterDelay(t,e,i){this.Zc(),this.Yc.indexOf(t)>-1&&(e=0);const r=cb.createAndSchedule(this,t,e,i,s=>this.na(s));return this.zc.push(r),r}Zc(){this.Wc&&Dt()}verifyOperationInProgress(){}sa(){var t=this;return(0,Ee.Z)(function*(){let e;do{e=t.Gc,yield e}while(e!==t.Gc)})()}ia(t){for(const e of this.zc)if(e.timerId===t)return!0;return!1}ra(t){return this.sa().then(()=>{this.zc.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.zc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.sa()})}oa(t){this.Yc.push(t)}na(t){const e=this.zc.indexOf(t);this.zc.splice(e,1)}}function w(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const i=t;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class E{constructor(){this._progressObserver={},this._taskCompletionResolver=new _r,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class N extends Tb{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new _,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||ae(this),this._firestoreClient.terminate()}}function K(n){return n._firestoreClient||ae(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function ae(n){var t,e,i;const r=n._freezeSettings(),s=(d=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new tP(n._databaseId,d,n._persistenceKey,(m=r).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,ax(m.experimentalLongPollingOptions),m.useFetchStreams));var d,m;n._firestoreClient=new ZV(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(e=r.cache)&&void 0!==e&&e._offlineComponentProvider&&null!==(i=r.cache)&&void 0!==i&&i._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}function mt(n,t,e){const i=new _r;return n.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield yb(n,e),yield dI(n,t),i.resolve()}catch(r){const s=r;if(!fI(s))throw s;Jo("Error enabling indexeddb cache. Falling back to memory cache: "+s),i.reject(s)}})).then(()=>i.promise)}function Lf(n){if(n._initialized||n._terminated)throw new Ge(be.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class lc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new lc(jr.fromBase64String(t))}catch(e){throw new Ge(be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new lc(jr.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Vf{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Ge(be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ki(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class kv{constructor(t){this._methodName=t}}class ux{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ge(be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ge(be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return on(this._lat,t._lat)||on(this._long,t._long)}}const k4=/^__.*__$/;class P4{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return null!==this.fieldMask?new uu(t,this.data,this.fieldMask,e,this.fieldTransforms):new lv(t,this.data,e,this.fieldTransforms)}}class eU{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new uu(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function tU(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Dt()}}class dx{constructor(t,e,i,r,s,l){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(t){return new dx(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.aa({path:i,la:!1});return r.fa(t),r}da(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.aa({path:i,la:!1});return r.ua(),r}wa(t){return this.aa({path:void 0,la:!0})}_a(t){return px(t,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}ua(){if(this.path)for(let t=0;t<this.path.length;t++)this.fa(this.path.get(t))}fa(t){if(0===t.length)throw this._a("Document fields must not be empty");if(tU(this.ca)&&k4.test(t))throw this._a('Document fields cannot begin and end with "__"')}}class F4{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||Gg(t)}ya(t,e,i,r=!1){return new dx({ca:t,methodName:e,ga:i,path:ki.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pv(n){const t=n._freezeSettings(),e=Gg(n._databaseId);return new F4(n._databaseId,!!t.ignoreUndefinedProperties,e)}function hx(n,t,e,i,r,s={}){const l=n.ya(s.merge||s.mergeFields?2:0,t,e,r);hF("Data must be an object, but it was:",l,i);const d=rU(i,l);let f,m;if(s.merge)f=new rr(l.fieldMask),m=l.fieldTransforms;else if(s.mergeFields){const y=[];for(const C of s.mergeFields){const A=yI(t,C,e);if(!l.contains(A))throw new Ge(be.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);oU(y,A)||y.push(A)}f=new rr(y),m=l.fieldTransforms.filter(C=>f.covers(C.field))}else f=null,m=l.fieldTransforms;return new P4(new Os(d),f,m)}class vI extends kv{_toFieldTransform(t){if(2!==t.ca)throw t._a(1===t.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof vI}}function nU(n,t,e){return new dx({ca:3,ga:t.settings.ga,methodName:n._methodName,la:e},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class cF extends kv{_toFieldTransform(t){return new Dw(t.path,new Df)}isEqual(t){return t instanceof cF}}class L4 extends kv{constructor(t,e){super(t),this.pa=e}_toFieldTransform(t){const e=nU(this,t,!0),i=this.pa.map(s=>Fv(s,e)),r=new Ef(i);return new Dw(t.path,r)}isEqual(t){return this===t}}class B4 extends kv{constructor(t,e){super(t),this.pa=e}_toFieldTransform(t){const e=nU(this,t,!0),i=this.pa.map(s=>Fv(s,e)),r=new Cf(i);return new Dw(t.path,r)}isEqual(t){return this===t}}class V4 extends kv{constructor(t,e){super(t),this.Ia=e}_toFieldTransform(t){const e=new sv(t.serializer,MM(t.serializer,this.Ia));return new Dw(t.path,e)}isEqual(t){return this===t}}function uF(n,t,e,i){const r=n.ya(1,t,e);hF("Data must be an object, but it was:",r,i);const s=[],l=Os.empty();Id(i,(f,m)=>{const y=fx(t,f,e);m=(0,B.m9)(m);const C=r.da(y);if(m instanceof vI)s.push(y);else{const A=Fv(m,C);null!=A&&(s.push(y),l.set(y,A))}});const d=new rr(s);return new eU(l,d,r.fieldTransforms)}function dF(n,t,e,i,r,s){const l=n.ya(1,t,e),d=[yI(t,i,e)],f=[r];if(s.length%2!=0)throw new Ge(be.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<s.length;A+=2)d.push(yI(t,s[A])),f.push(s[A+1]);const m=[],y=Os.empty();for(let A=d.length-1;A>=0;--A)if(!oU(m,d[A])){const x=d[A];let P=f[A];P=(0,B.m9)(P);const F=l.da(x);if(P instanceof vI)m.push(x);else{const U=Fv(P,F);null!=U&&(m.push(x),y.set(x,U))}}const C=new rr(m);return new eU(y,C,l.fieldTransforms)}function iU(n,t,e,i=!1){return Fv(e,n.ya(i?4:3,t))}function Fv(n,t){if(sU(n=(0,B.m9)(n)))return hF("Unsupported field value:",t,n),rU(n,t);if(n instanceof kv)return function(e,i){if(!tU(i.ca))throw i._a(`${e._methodName}() can only be used with update() and set()`);if(!i.path)throw i._a(`${e._methodName}() is not currently supported inside arrays`);const r=e._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,i){const r=[];let s=0;for(const l of e){let d=Fv(l,i.wa(s));null==d&&(d={nullValue:"NULL_VALUE"}),r.push(d),s++}return{arrayValue:{values:r}}}(n,t)}return function(e,i){if(null===(e=(0,B.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return MM(i.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const r=Wi.fromDate(e);return{timestampValue:Rg(i.serializer,r)}}if(e instanceof Wi){const r=new Wi(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Rg(i.serializer,r)}}if(e instanceof ux)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof lc)return{bytesValue:zM(i.serializer,e._byteString)};if(e instanceof Li){const r=i.databaseId,s=e.firestore._databaseId;if(!s.isEqual(r))throw i._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Rw(e.firestore._databaseId||i.databaseId,e._key.path)}}throw i._a(`Unsupported field value: ${_I(e)}`)}(n,t)}function rU(n,t){const e={};return _C(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Id(n,(i,r)=>{const s=Fv(r,t.ha(i));null!=s&&(e[i]=s)}),{mapValue:{fields:e}}}function sU(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Wi||n instanceof ux||n instanceof lc||n instanceof Li||n instanceof kv)}function hF(n,t,e){if(!sU(e)||"object"!=typeof(i=e)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=_I(e);throw t._a("an object"===i?n+" a custom object":n+" "+i)}var i}function yI(n,t,e){if((t=(0,B.m9)(t))instanceof Vf)return t._internalPath;if("string"==typeof t)return fx(n,t);throw px("Field path arguments must be of type string or ",n,!1,void 0,e)}const U4=new RegExp("[~\\*/\\[\\]]");function fx(n,t,e){if(t.search(U4)>=0)throw px(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new Vf(...t.split("."))._internalPath}catch{throw px(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function px(n,t,e,i,r){const s=i&&!i.isEmpty(),l=void 0!==r;let d=`Function ${t}() called with invalid data`;e&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(s||l)&&(f+=" (found",s&&(f+=` in field ${i}`),l&&(f+=` in document ${r}`),f+=")"),new Ge(be.INVALID_ARGUMENT,d+n+f)}function oU(n,t){return n.some(e=>e.isEqual(t))}class wI{constructor(t,e,i,r,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Li(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new H4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(gx("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class H4 extends wI{data(){return super.data()}}function gx(n,t){return"string"==typeof t?fx(n,t):t instanceof Vf?t._internalPath:t._delegate._internalPath}function aU(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ge(be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fF{}class bI extends fF{}function tm(n,t,...e){let i=[];t instanceof fF&&i.push(t),i=i.concat(e),function(r){const s=r.filter(d=>d instanceof Ib).length,l=r.filter(d=>d instanceof DI).length;if(s>1||s>0&&l>0)throw new Ge(be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class DI extends bI{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new DI(t,e,i)}_apply(t){const e=this._parse(t);return dU(t._query,e),new Ps(t.firestore,t.converter,Ig(t._query,e))}_parse(t){const e=Pv(t.firestore);return function(r,s,l,d,f,m,y){let C;if(f.isKeyField()){if("array-contains"===m||"array-contains-any"===m)throw new Ge(be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if("in"===m||"not-in"===m){uU(y,m);const A=[];for(const x of y)A.push(cU(d,r,x));C={arrayValue:{values:A}}}else C=cU(d,r,y)}else"in"!==m&&"not-in"!==m&&"array-contains-any"!==m||uU(y,m),C=iU(l,"where",y,"in"===m||"not-in"===m);return kn.create(f,m,C)}(t._query,0,e,t.firestore._databaseId,this._field,this._op,this._value)}}class Ib extends fF{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new Ib(t,e)}_parse(t){const e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return 1===e.length?e[0]:ai.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(i,r){let s=i;const l=r.getFlattenedFilters();for(const d of l)dU(s,d),s=Ig(s,d)}(t._query,e),new Ps(t.firestore,t.converter,Ig(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class pF extends bI{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new pF(t,e)}_apply(t){const e=function(i,r,s){if(null!==i.startAt)throw new Ge(be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Ge(be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Cg(r,s);return function(d,f){if(null===OC(d)){const m=vw(d);null!==m&&hU(0,m,f.field)}}(i,l),l}(t._query,this._field,this._direction);return new Ps(t.firestore,t.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new ic(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,e))}}class mx extends bI{constructor(t,e,i){super(),this.type=t,this._limit=e,this._limitType=i}static _create(t,e,i){return new mx(t,e,i)}_apply(t){return new Ps(t.firestore,t.converter,bf(t._query,this._limit,this._limitType))}}class _x extends bI{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new _x(t,e,i)}_apply(t){const e=lU(t,this.type,this._docOrFields,this._inclusive);return new Ps(t.firestore,t.converter,(r=e,new ic((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class vx extends bI{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new vx(t,e,i)}_apply(t){const e=lU(t,this.type,this._docOrFields,this._inclusive);return new Ps(t.firestore,t.converter,(r=e,new ic((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function lU(n,t,e,i){if(e[0]=(0,B.m9)(e[0]),e[0]instanceof wI)return function(r,s,l,d,f){if(!d)throw new Ge(be.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const m=[];for(const y of Ta(r))if(y.field.isKeyField())m.push(vf(s,d.key));else{const C=d.data.field(y.field);if(hw(C))throw new Ge(be.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+y.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===C){const A=y.field.canonicalString();throw new Ge(be.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${A}' (used as the orderBy) does not exist.`)}m.push(C)}return new Rd(m,f)}(n._query,n.firestore._databaseId,t,e[0]._document,i);{const r=Pv(n.firestore);return function(s,l,d,f,m,y){const C=s.explicitOrderBy;if(m.length>C.length)throw new Ge(be.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const A=[];for(let x=0;x<m.length;x++){const P=m[x];if(C[x].field.isKeyField()){if("string"!=typeof P)throw new Ge(be.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof P}`);if(!kC(s)&&-1!==P.indexOf("/"))throw new Ge(be.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${P}' contains a slash.`);const F=s.path.child(On.fromString(P));if(!ft.isDocumentKey(F))throw new Ge(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${F}' is not because it contains an odd number of segments.`);const U=new ft(F);A.push(vf(l,U))}else{const F=iU(d,f,P);A.push(F)}}return new Rd(A,y)}(n._query,n.firestore._databaseId,r,t,e,i)}}function cU(n,t,e){if("string"==typeof(e=(0,B.m9)(e))){if(""===e)throw new Ge(be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kC(t)&&-1!==e.indexOf("/"))throw new Ge(be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(On.fromString(e));if(!ft.isDocumentKey(i))throw new Ge(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return vf(n,new ft(i))}if(e instanceof Li)return vf(n,e._key);throw new Ge(be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_I(e)}.`)}function uU(n,t){if(!Array.isArray(n)||0===n.length)throw new Ge(be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function dU(n,t){if(t.isInequality()){const i=vw(n),r=t.field;if(null!==i&&!i.isEqual(r))throw new Ge(be.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${r.toString()}'`);const s=OC(n);null!==s&&hU(0,r,s)}const e=function(i,r){for(const s of i)for(const l of s.getFlattenedFilters())if(r.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==e)throw new Ge(be.INVALID_ARGUMENT,e===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}function hU(n,t,e){if(!e.isEqual(t))throw new Ge(be.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}class gF{convertValue(t,e="none"){switch(au(t)){case 0:return null;case 1:return t.booleanValue;case 2:return vr(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(ru(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Dt()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return Id(t,(r,s)=>{i[r]=this.convertValue(s,e)}),i}convertGeoPoint(t){return new ux(vr(t.latitude),vr(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=Dg(t);return null==i?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(su(t));default:return null}}convertTimestamp(t){const e=Sd(t);return new Wi(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=On.fromString(t);Lt(tT(i));const r=new ou(i.get(1),i.get(3)),s=new ft(i.popFirst(5));return r.isEqual(e)||Oi(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}function yx(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class K4 extends gF{constructor(t){super(),this.firestore=t}convertBytes(t){return new lc(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Li(this.firestore,null,e)}}class Lv{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Uf extends wI{constructor(t,e,i,r,s,l){super(t,e,i,r,l),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new EI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(gx("DocumentSnapshot.get",t));if(null!==i)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class EI extends Uf{data(t={}){return super.data(t)}}class nm{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Lv(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new EI(this._firestore,this._userDataWriter,i.key,i,new Lv(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ge(be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(l=>({type:"added",doc:new EI(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Lv(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>r||3!==l.type).map(l=>{const d=new EI(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Lv(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,m=-1;return 0!==l.type&&(f=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),1!==l.type&&(s=s.add(l.doc),m=s.indexOf(l.doc.key)),{type:J4(l.type),doc:d,oldIndex:f,newIndex:m}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function J4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Dt()}}function pU(n,t){return n instanceof Uf&&t instanceof Uf?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof nm&&t instanceof nm&&n._firestore===t._firestore&&p(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}class im extends gF{constructor(t){super(),this.firestore=t}convertBytes(t){return new lc(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Li(this.firestore,null,e)}}function gU(n,t,e){n=Fn(n,Li);const i=Fn(n.firestore,N),r=yx(n.converter,t,e);return Sb(i,[hx(Pv(i),"setDoc",n._key,r,null!==n.converter,e).toMutation(n._key,qi.none())])}function mU(n,t,e,...i){n=Fn(n,Li);const r=Fn(n.firestore,N),s=Pv(r);let l;return l="string"==typeof(t=(0,B.m9)(t))||t instanceof Vf?dF(s,"updateDoc",n._key,t,e,i):uF(s,"updateDoc",n._key,t),Sb(r,[l.toMutation(n._key,qi.exists(!0))])}function _U(n,...t){var e,i,r;n=(0,B.m9)(n);let s={includeMetadataChanges:!1},l=0;"object"!=typeof t[l]||w(t[l])||(s=t[l],l++);const d={includeMetadataChanges:s.includeMetadataChanges};if(w(t[l])){const C=t[l];t[l]=null===(e=C.next)||void 0===e?void 0:e.bind(C),t[l+1]=null===(i=C.error)||void 0===i?void 0:i.bind(C),t[l+2]=null===(r=C.complete)||void 0===r?void 0:r.bind(C)}let f,m,y;if(n instanceof Li)m=Fn(n.firestore,N),y=nv(n._key.path),f={next:C=>{t[l]&&t[l](mF(m,n,C))},error:t[l+1],complete:t[l+2]};else{const C=Fn(n,Ps);m=Fn(C.firestore,N),y=C._query;const A=new im(m);f={next:x=>{t[l]&&t[l](new nm(m,A,C,x))},error:t[l+1],complete:t[l+2]},aU(n._query)}return function(C,A,x,P){const F=new Jg(P),U=new YT(A,F,x);return C.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return ub(yield Xg(C),U)})),()=>{F.Dc(),C.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return Sv(yield Xg(C),U)}))}}(K(m),y,d,f)}function Sb(n,t){return function(e,i){const r=new _r;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function qN(n,t,e){return fb.apply(this,arguments)}(yield Cb(e),i,r)})),r.promise}(K(n),t)}function mF(n,t,e){const i=e.docs.get(t._key),r=new im(n);return new Uf(n,r,t._key,i,new Lv(e.hasPendingWrites,e.fromCache),t.converter)}const mW={maxAttempts:5};class vU{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Pv(t)}set(t,e,i){this._verifyNotCommitted();const r=rm(t,this._firestore),s=yx(r.converter,e,i),l=hx(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(l.toMutation(r._key,qi.none())),this}update(t,e,i,...r){this._verifyNotCommitted();const s=rm(t,this._firestore);let l;return l="string"==typeof(e=(0,B.m9)(e))||e instanceof Vf?dF(this._dataReader,"WriteBatch.update",s._key,e,i,r):uF(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(l.toMutation(s._key,qi.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=rm(t,this._firestore);return this._mutations=this._mutations.concat(new oc(e._key,qi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ge(be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function rm(n,t){if((n=(0,B.m9)(n)).firestore!==t)throw new Ge(be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class _W extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Pv(t)}get(t){const e=rm(t,this._firestore),i=new K4(this._firestore);return this._transaction.lookup([e._key]).then(r=>{if(!r||1!==r.length)return Dt();const s=r[0];if(s.isFoundDocument())return new wI(this._firestore,i,s.key,s,e.converter);if(s.isNoDocument())return new wI(this._firestore,i,e._key,null,e.converter);throw Dt()})}set(t,e,i){const r=rm(t,this._firestore),s=yx(r.converter,e,i),l=hx(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,i);return this._transaction.set(r._key,l),this}update(t,e,i,...r){const s=rm(t,this._firestore);let l;return l="string"==typeof(e=(0,B.m9)(e))||e instanceof Vf?dF(this._dataReader,"Transaction.update",s._key,e,i,r):uF(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,l),this}delete(t){const e=rm(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=rm(t,this._firestore),i=new im(this._firestore);return super.get(t).then(r=>new Uf(this._firestore,i,e._key,r._document,new Lv(!1,!1),e.converter))}}function _F(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Ge("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function wU(){if(typeof Uint8Array>"u")throw new Ge("unimplemented","Uint8Arrays are not available in this environment.")}function bU(){if(!function ll(){return typeof atob<"u"}())throw new Ge("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,t=!0){Ed=gd.SDK_VERSION,(0,gd._registerComponent)(new mr.wA("firestore",(e,{instanceIdentifier:i,options:r})=>{const s=e.getProvider("app").getImmediate(),l=new N(new jk(e.getProvider("auth-internal")),new $k(e.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ge(be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ou(d.options.projectId,f)}(s,i),s);return r=Object.assign({useFetchStreams:t},r),l._setSettings(r),l},"PUBLIC").setMultipleInstances(!0)),(0,gd.registerVersion)(QA,"3.13.0",n),(0,gd.registerVersion)(QA,"3.13.0","esm2017")}();class CI{constructor(t){this._delegate=t}static fromBase64String(t){return bU(),new CI(lc.fromBase64String(t))}static fromUint8Array(t){return wU(),new CI(lc.fromUint8Array(t))}toBase64(){return bU(),this._delegate.toBase64()}toUint8Array(){return wU(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function vF(n){return function IW(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const i of t)if(i in e&&"function"==typeof e[i])return!0;return!1}(n,["next","error","complete"])}class SW{enableIndexedDbPersistence(t,e){return function Oe(n,t){Lf(n=Fn(n,N));const e=K(n);if(e._uninitializedComponentsProvider)throw new Ge(be.FAILED_PRECONDITION,"SDK cache is already specified.");Jo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=n._freezeSettings(),r=new Rv;return mt(e,r,new _b(r,i.cacheSizeBytes,t?.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function Qe(n){Lf(n=Fn(n,N));const t=K(n);if(t._uninitializedComponentsProvider)throw new Ge(be.FAILED_PRECONDITION,"SDK cache is already specified.");Jo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings(),i=new Rv;return mt(t,i,new vb(i,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function Ut(n){if(n._initialized&&!n._terminated)throw new Ge(be.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new _r;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(e=(0,Ee.Z)(function*(i){if(!Ea.D())return Promise.resolve();const r=i+"main";yield Ea.delete(r)}),function(i){return e.apply(this,arguments)})(Nf(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class DU{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof ou||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&Jo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,i={}){!function aF(n,t,e,i={}){var r;const s=(n=Fn(n,Tb))._getSettings(),l=`${t}:${e}`;if("firestore.googleapis.com"!==s.host&&s.host!==l&&Jo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:l,ssl:!1})),i.mockUserToken){let d,f;if("string"==typeof i.mockUserToken)d=i.mockUserToken,f=vs.MOCK_USER;else{d=(0,B.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new Ge(be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new vs(m)}n._authCredentials=new Hk(new K_(d,f))}}(this._delegate,t,e,i)}enableNetwork(){return function an(n){return function XP(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const t=yield JP(n),e=yield Eb(n);return t.setNetworkEnabled(!0),function(i){const r=yt(i);return r.vu.delete(0),$g(r)}(e)}))}(K(n=Fn(n,N)))}(this._delegate)}disableNetwork(){return function wn(n){return function eF(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const t=yield JP(n),e=yield Eb(n);return t.setNetworkEnabled(!1),(i=(0,Ee.Z)(function*(r){const s=yt(r);s.vu.add(0),yield Rf(s),s.bu.set("Offline")}),function(r){return i.apply(this,arguments)})(e);var i}))}(K(n=Fn(n,N)))}(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,nF("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function qe(n){return function(t){const e=new _r;return t.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function JN(n,t){return tI.apply(this,arguments)}(yield Cb(t),e)})),e.promise}(K(n=Fn(n,N)))}(this._delegate)}onSnapshotsInSync(t){return function aW(n,t){return function QV(n,t){const e=new Jg(t);return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return i=yield Xg(n),r=e,yt(i).ku.add(r),void r.next();var i,r})),()=>{e.Dc(),n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return i=yield Xg(n),r=e,void yt(i).ku.delete(r);var i,r}))}}(K(n=Fn(n,N)),w(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Ge("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new Ab(this,o(this._delegate,t))}catch(e){throw ta(e,"collection()","Firestore.collection()")}}doc(t){try{return new cc(this,u(this._delegate,t))}catch(e){throw ta(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new na(this,function c(n,t){if(n=Fn(n,Tb),cx("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ge(be.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ps(n,null,(e=t,new ic(On.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw ta(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function vW(n,t,e){n=Fn(n,N);const i=Object.assign(Object.assign({},mW),e);return function(r){if(r.maxAttempts<1)throw new Ge(be.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,s,l){const d=new _r;return r.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const f=yield function gI(n){return Ov(n).then(t=>t.datastore)}(r);new YV(r.asyncQueue,f,l,s,d).run()})),d.promise}(K(n),r=>t(new _W(n,r)),i)}(this._delegate,e=>t(new EU(this,e)))}batch(){return K(this._delegate),new CU(new vU(this._delegate,t=>Sb(this._delegate,t)))}loadBundle(t){return function Po(n,t){const e=K(n=Fn(n,N)),i=new E;return function tF(n,t,e,i){const r=function(s,l){let d;return d="string"==typeof s?BM().encode(s):s,f=function(f,m){if(f instanceof Uint8Array)return cI(f,m);if(f instanceof ArrayBuffer)return cI(new Uint8Array(f),m);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new KP(f,l);var f}(e,Gg(t));n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function rx(n,t,e){const i=yt(n);var r;(r=(0,Ee.Z)(function*(s,l,d){try{const f=yield l.getMetadata();if(yield function(A,x){const P=yt(A),F=sr(x.createTime);return P.persistence.runTransaction("hasNewerBundle","readonly",U=>P.qs.getBundleMetadata(U,x.id)).then(U=>!!U&&U.createTime.compareTo(F)>=0)}(s.localStore,f))return yield l.close(),d._completeWith({taskState:"Success",documentsLoaded:(A=f).totalDocuments,bytesLoaded:A.totalBytes,totalDocuments:A.totalDocuments,totalBytes:A.totalBytes}),Promise.resolve(new Set);d._updateProgress(VP(f));const m=new GN(f,s.localStore,l.serializer);let y=yield l.bc();for(;y;){const A=yield m.zu(y);A&&d._updateProgress(A),y=yield l.bc()}const C=yield m.complete();return yield hu(s,C.Ju,void 0),yield function(A,x){const P=yt(A);return P.persistence.runTransaction("Save bundle","readwrite",F=>P.qs.saveBundleMetadata(F,x))}(s.localStore,f),d._completeWith(C.progress),Promise.resolve(C.Hu)}catch(f){return Jo("SyncEngine",`Loading bundle failed with ${f}`),d._failWith(f),Promise.resolve(new Set)}var A}),function(s,l,d){return r.apply(this,arguments)})(i,t,e).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield Cb(n),r,i)}))}(e,n._databaseId,t,i),i}(this._delegate,t)}namedQuery(t){return function pu(n,t){return function JV(n,t){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(e,i){const r=yt(e);return r.persistence.runTransaction("Get named query","readonly",s=>r.qs.getNamedQuery(s,i))}(yield Db(n),t)}))}(K(n=Fn(n,N)),t).then(e=>e?new Ps(n,null,e.query):null)}(this._delegate,t).then(e=>e?new na(this,e):null)}}class wx extends gF{constructor(t){super(),this.firestore=t}convertBytes(t){return new CI(new lc(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return cc.forKey(e,this.firestore,null)}}class EU{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new wx(t)}get(t){const e=Vv(t);return this._delegate.get(e).then(i=>new TI(this._firestore,new Uf(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const r=Vv(t);return i?(_F("Transaction.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=Vv(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=Vv(t);return this._delegate.delete(e),this}}class CU{constructor(t){this._delegate=t}set(t,e,i){const r=Vv(t);return i?(_F("WriteBatch.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=Vv(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=Vv(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class Bv{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new EI(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new II(this._firestore,i),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=Bv.INSTANCES;let r=i.get(t);r||(r=new WeakMap,i.set(t,r));let s=r.get(e);return s||(s=new Bv(t,new wx(t),e),r.set(e,s)),s}}Bv.INSTANCES=new WeakMap;class cc{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new wx(t)}static forPath(t,e,i){if(t.length%2!=0)throw new Ge("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new cc(e,new Li(e._delegate,i,new ft(t)))}static forKey(t,e,i){return new cc(e,new Li(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new Ab(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new Ab(this.firestore,o(this._delegate,t))}catch(e){throw ta(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,B.m9)(t))instanceof Li&&h(this._delegate,t)}set(t,e){e=_F("DocumentReference.set",e);try{return e?gU(this._delegate,t,e):gU(this._delegate,t)}catch(i){throw ta(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return 1===arguments.length?mU(this._delegate,t):mU(this._delegate,t,e,...i)}catch(r){throw ta(r,"updateDoc()","DocumentReference.update()")}}delete(){return function sW(n){return Sb(Fn(n.firestore,N),[new oc(n._key,qi.none())])}(this._delegate)}onSnapshot(...t){const e=TU(t),i=IU(t,r=>new TI(this.firestore,new Uf(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return _U(this._delegate,e,i)}get(t){let e;return e="cache"===t?.source?function eW(n){n=Fn(n,Li);const t=Fn(n.firestore,N),e=K(t),i=new im(t);return function sx(n,t){const e=new _r;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(i=(0,Ee.Z)(function*(r,s,l){try{const d=yield function(f,m){const y=yt(f);return y.persistence.runTransaction("read document","readonly",C=>y.localDocuments.getDocument(C,m))}(r,s);d.isFoundDocument()?l.resolve(d):d.isNoDocument()?l.resolve(null):l.reject(new Ge(be.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const f=Pf(d,`Failed to get document '${s} from cache`);l.reject(f)}}),function(r,s,l){return i.apply(this,arguments)})(yield Db(n),t,e);var i})),e.promise}(e,n._key).then(r=>new Uf(t,i,n._key,r,new Lv(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===t?.source?function tW(n){n=Fn(n,Li);const t=Fn(n.firestore,N);return mI(K(t),n._key,{source:"server"}).then(e=>mF(t,n,e))}(this._delegate):function X4(n){n=Fn(n,Li);const t=Fn(n.firestore,N);return mI(K(t),n._key).then(e=>mF(t,n,e))}(this._delegate),e.then(i=>new TI(this.firestore,new Uf(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new cc(this.firestore,this._delegate.withConverter(t?Bv.getInstance(this.firestore,t):null))}}function ta(n,t,e){return n.message=n.message.replace(t,e),n}function TU(n){for(const t of n)if("object"==typeof t&&!vF(t))return t;return{}}function IU(n,t){var e,i;let r;return r=vF(n[0])?n[0]:vF(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(t(s))},error:null===(e=r.error)||void 0===e?void 0:e.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class TI{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new cc(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return pU(this._delegate,t._delegate)}}class II extends TI{data(t){const e=this._delegate.data(t);return function Uk(n,t){n||Dt()}(void 0!==e),e}}class na{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new wx(t)}where(t,e,i){try{return new na(this.firestore,tm(this._delegate,function j4(n,t,e){const i=t,r=gx("where",n);return DI._create(r,i,e)}(t,e,i)))}catch(r){throw ta(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new na(this.firestore,tm(this._delegate,function G4(n,t="asc"){const e=t,i=gx("orderBy",n);return pF._create(i,e)}(t,e)))}catch(i){throw ta(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new na(this.firestore,tm(this._delegate,function $4(n){return sF("limit",n),mx._create("limit",n,"F")}(t)))}catch(e){throw ta(e,"limit()","Query.limit()")}}limitToLast(t){try{return new na(this.firestore,tm(this._delegate,function z4(n){return sF("limitToLast",n),mx._create("limitToLast",n,"L")}(t)))}catch(e){throw ta(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new na(this.firestore,tm(this._delegate,function W4(...n){return _x._create("startAt",n,!0)}(...t)))}catch(e){throw ta(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new na(this.firestore,tm(this._delegate,function q4(...n){return _x._create("startAfter",n,!1)}(...t)))}catch(e){throw ta(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new na(this.firestore,tm(this._delegate,function Y4(...n){return vx._create("endBefore",n,!1)}(...t)))}catch(e){throw ta(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new na(this.firestore,tm(this._delegate,function Z4(...n){return vx._create("endAt",n,!0)}(...t)))}catch(e){throw ta(e,"endAt()","Query.endAt()")}}isEqual(t){return p(this._delegate,t._delegate)}get(t){let e;return e="cache"===t?.source?function iW(n){n=Fn(n,Ps);const t=Fn(n.firestore,N),e=K(t),i=new im(t);return function KV(n,t){const e=new _r;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(i=(0,Ee.Z)(function*(r,s,l){try{const d=yield Jw(r,s,!0),f=new KT(s,d.ir),m=f.sc(d.documents),y=f.applyChanges(m,!1);l.resolve(y.snapshot)}catch(d){const f=Pf(d,`Failed to execute query '${s} against cache`);l.reject(f)}}),function(r,s,l){return i.apply(this,arguments)})(yield Db(n),t,e);var i})),e.promise}(e,n._query).then(r=>new nm(t,i,n,r))}(this._delegate):"server"===t?.source?function rW(n){n=Fn(n,Ps);const t=Fn(n.firestore,N),e=K(t),i=new im(t);return ox(e,n._query,{source:"server"}).then(r=>new nm(t,i,n,r))}(this._delegate):function nW(n){n=Fn(n,Ps);const t=Fn(n.firestore,N),e=K(t),i=new im(t);return aU(n._query),ox(e,n._query).then(r=>new nm(t,i,n,r))}(this._delegate),e.then(i=>new yF(this.firestore,new nm(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=TU(t),i=IU(t,r=>new yF(this.firestore,new nm(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return _U(this._delegate,e,i)}withConverter(t){return new na(this.firestore,this._delegate.withConverter(t?Bv.getInstance(this.firestore,t):null))}}class MW{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new II(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class yF{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new na(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new II(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new MW(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new II(this._firestore,i))})}isEqual(t){return pU(this._delegate,t._delegate)}}class Ab extends na{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new cc(this.firestore,t):null}doc(t){try{return new cc(this.firestore,void 0===t?u(this._delegate):u(this._delegate,t))}catch(e){throw ta(e,"doc()","CollectionReference.doc()")}}add(t){return function oW(n,t){const e=Fn(n.firestore,N),i=u(n),r=yx(n.converter,t);return Sb(e,[hx(Pv(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,qi.exists(!1))]).then(()=>i)}(this._delegate,t).then(e=>new cc(this.firestore,e))}isEqual(t){return h(this._delegate,t._delegate)}withConverter(t){return new Ab(this.firestore,this._delegate.withConverter(t?Bv.getInstance(this.firestore,t):null))}}function Vv(n){return Fn(n,Li)}class wF{constructor(...t){this._delegate=new Vf(...t)}static documentId(){return new wF(ki.keyField().canonicalString())}isEqual(t){return(t=(0,B.m9)(t))instanceof Vf&&this._delegate._internalPath.isEqual(t._internalPath)}}class Uv{constructor(t){this._delegate=t}static serverTimestamp(){const t=function wW(){return new cF("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new Uv(t)}static delete(){const t=function yW(){return new vI("deleteField")}();return t._methodName="FieldValue.delete",new Uv(t)}static arrayUnion(...t){const e=function bW(...n){return new L4("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new Uv(e)}static arrayRemove(...t){const e=function DW(...n){return new B4("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new Uv(e)}static increment(t){const e=function EW(n){return new V4("increment",n)}(t);return e._methodName="FieldValue.increment",new Uv(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const NW={Firestore:DU,GeoPoint:ux,Timestamp:Wi,Blob:CI,Transaction:EU,WriteBatch:CU,DocumentReference:cc,DocumentSnapshot:TI,Query:na,QueryDocumentSnapshot:II,QuerySnapshot:yF,CollectionReference:Ab,FieldPath:wF,FieldValue:Uv,setLogLevel:function AW(n){!function rw(n){Da.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function SU(n,t){return function OW(n,t=Mr.z){return new bi.y(e=>{let i;return null!=t?t.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},e)}):i=n.onSnapshot({includeMetadataChanges:!0},e),()=>{i?.()}})}(n,t)}function bF(n,t){return SU(n,t).pipe((0,rt.U)(e=>({payload:e,type:"query"})))}function bx(n,t){return bF(n,t).pipe(Kl(void 0),w_(),(0,rt.U)(([e,i])=>{const r=i.payload.docChanges(),s=r.map(l=>({type:l.type,payload:l}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((l,d)=>{const f=r.find(y=>y.doc.ref.isEqual(l.ref)),m=e?.payload.docs.find(y=>y.ref.isEqual(l.ref));f&&JSON.stringify(f.doc.metadata)===JSON.stringify(l.metadata)||!f&&m&&JSON.stringify(m.metadata)===JSON.stringify(l.metadata)||s.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:l}})}),s}))}function AU(n,t,e){return bx(n,e).pipe(Ql((i,r)=>function PW(n,t,e){return t.forEach(i=>{e.indexOf(i.type)>-1&&(n=function FW(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return DF(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return DF(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return DF(n,t.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),t),[]),(0,I0.x)(),(0,rt.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function DF(n,t,e,...i){const r=n.slice();return r.splice(t,e,...i),r}function MU(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function RW(n){(function xW(n,t){n.INTERNAL.registerComponent(new mr.wA("firestore-compat",e=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(i,r)},"PUBLIC").setServiceProps(Object.assign({},NW)))})(n,(t,e)=>new DU(t,e,new SW)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(Z1.Z);class NU{constructor(t,e,i){this.ref=t,this.query=e,this.afs=i}stateChanges(t){let e=bx(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,rt.U)(i=>i.filter(r=>t.indexOf(r.type)>-1)))),e.pipe(Kl(void 0),w_(),dn(([i,r])=>r.length>0||!i),(0,rt.U)(([i,r])=>r),hn.iC)}auditTrail(t){return this.stateChanges(t).pipe(Ql((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=MU(t);return AU(this.query,e,this.afs.schedulers.outsideAngular).pipe(hn.iC)}valueChanges(t={}){return bF(this.query,this.afs.schedulers.outsideAngular).pipe((0,rt.U)(e=>e.payload.docs.map(i=>t.idField?Object.assign(Object.assign({},i.data()),{[t.idField]:i.id}):i.data())),hn.iC)}get(t){return(0,Rn.D)(this.query.get(t)).pipe(hn.iC)}add(t){return this.ref.add(t)}doc(t){return new xU(this.ref.doc(t),this.afs)}}class xU{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const i=this.ref.collection(t),{ref:r,query:s}=kU(i,e);return new NU(r,s,this.afs)}snapshotChanges(){return function kW(n,t){return SU(n,t).pipe(Kl(void 0),w_(),(0,rt.U)(([e,i])=>i.exists?e?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(hn.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,rt.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,Rn.D)(this.ref.get(t)).pipe(hn.iC)}}class LW{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?bx(this.query,this.afs.schedulers.outsideAngular).pipe((0,rt.U)(e=>e.filter(i=>t.indexOf(i.type)>-1)),dn(e=>e.length>0),hn.iC):bx(this.query,this.afs.schedulers.outsideAngular).pipe(hn.iC)}auditTrail(t){return this.stateChanges(t).pipe(Ql((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=MU(t);return AU(this.query,e,this.afs.schedulers.outsideAngular).pipe(hn.iC)}valueChanges(t={}){return bF(this.query,this.afs.schedulers.outsideAngular).pipe((0,rt.U)(i=>i.payload.docs.map(r=>t.idField?Object.assign({[t.idField]:r.id},r.data()):r.data())),hn.iC)}get(t){return(0,Rn.D)(this.query.get(t)).pipe(hn.iC)}}const RU=new a.OlP("angularfire2.enableFirestorePersistence"),OU=new a.OlP("angularfire2.firestore.persistenceSettings"),BW=new a.OlP("angularfire2.firestore.settings"),VW=new a.OlP("angularfire2.firestore.use-emulator");function kU(n,t=(e=>e)){return{query:t(n),ref:n}}let UW=(()=>{class n{constructor(e,i,r,s,l,d,f,m,y,C,A,x,P,F,U,ee,oe){this.schedulers=f;const te=(0,si.on)(e,d,i),ce=y;C&&zh(te,d,A,P,F,U,x,ee),[this.firestore,this.persistenceEnabled$]=(0,si.cc)(`${te.name}.firestore`,"AngularFirestore",te.name,()=>{const Ne=d.runOutsideAngular(()=>te.firestore());if(s&&Ne.settings(s),ce&&Ne.useEmulator(...ce),r&&!Ho(l)){const Be=()=>{try{return(0,Rn.D)(Ne.enablePersistence(m||void 0).then(()=>!0,()=>!1))}catch(ot){return typeof console<"u"&&console.warn(ot),(0,At.of)(!1)}};return[Ne,d.runOutsideAngular(Be)]}return[Ne,(0,At.of)(!1)]},[s,ce,r])}collection(e,i){let r;r="string"==typeof e?this.firestore.collection(e):e;const{ref:s,query:l}=kU(r,i),d=this.schedulers.ngZone.run(()=>s);return new NU(d,l,this)}collectionGroup(e,i){const r=i||(l=>l),s=this.firestore.collectionGroup(e);return new LW(r(s),this)}doc(e){let i;i="string"==typeof e?this.firestore.doc(e):e;const r=this.schedulers.ngZone.run(()=>i);return new xU(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(si.Dh),a.LFG(si.xv,8),a.LFG(RU,8),a.LFG(BW,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(hn.HU),a.LFG(OU,8),a.LFG(VW,8),a.LFG(ld,8),a.LFG(ad,8),a.LFG(Gc,8),a.LFG(o_,8),a.LFG(ya,8),a.LFG(Vp,8),a.LFG(Up,8),a.LFG(jh,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),HW=(()=>{class n{constructor(){jc.Z.registerVersion("angularfire",hn.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:RU,useValue:!0},{provide:OU,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[UW]}),n})();var Wd=L(4829),EF=L(2420);function Dx(...n){const t=(0,Zc.jO)(n);return(0,$i.e)((e,i)=>{const r=n.length,s=new Array(r);let l=n.map(()=>!1),d=!1;for(let f=0;f<r;f++)(0,Wd.Xf)(n[f]).subscribe((0,_i.x)(i,m=>{s[f]=m,!d&&!l[f]&&(l[f]=!0,(d=l.every(qo.y))&&(l=null))},EF.Z));e.subscribe((0,_i.x)(i,f=>{if(d){const m=[f,...s];i.next(t?t(...m):m)}}))})}const PU="@firebase/database";let CF="";function LU(n){CF=n}class GW{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,B.Wl)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,B.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class $W{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,B.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const BU=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new GW(t)}}catch{}return new $W},Hv=BU("localStorage"),TF=BU("sessionStorage"),Mb=new Hr.Yd("@firebase/database"),VU=function(){let n=1;return function(){return n++}}(),UU=function(n){const t=(0,B.dS)(n),e=new B.gQ;e.update(t);const i=e.digest();return B.US.encodeByteArray(i)},SI=function(...n){let t="";for(let e=0;e<n.length;e++){const i=n[e];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=SI.apply(null,i):t+="object"==typeof i?(0,B.Wl)(i):i,t+=" "}return t};let jv=null,HU=!0;const jU=function(n,t){(0,B.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Mb.logLevel=Hr.in.VERBOSE,jv=Mb.log.bind(Mb),t&&TF.set("logging_enabled",!0)):"function"==typeof n?jv=n:(jv=null,TF.remove("logging_enabled"))},qs=function(...n){if(!0===HU&&(HU=!1,null===jv&&!0===TF.get("logging_enabled")&&jU(!0)),jv){const t=SI.apply(null,n);jv(t)}},AI=function(n){return function(...t){qs(n,...t)}},IF=function(...n){const t="FIREBASE INTERNAL ERROR: "+SI(...n);Mb.error(t)},qd=function(...n){const t=`FIREBASE FATAL ERROR: ${SI(...n)}`;throw Mb.error(t),new Error(t)},Fo=function(...n){const t="FIREBASE WARNING: "+SI(...n);Mb.warn(t)},Ex=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},sm="[MIN_NAME]",Hf="[MAX_NAME]",Gv=function(n,t){if(n===t)return 0;if(n===sm||t===Hf)return-1;if(t===sm||n===Hf)return 1;{const e=zU(n),i=zU(t);return null!==e?null!==i?e-i==0?n.length-t.length:e-i:-1:null!==i?1:n<t?-1:1}},qW=function(n,t){return n===t?0:n<t?-1:1},MI=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,B.Wl)(t))},SF=function(n){if("object"!=typeof n||null===n)return(0,B.Wl)(n);const t=[];for(const i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)0!==i&&(e+=","),e+=(0,B.Wl)(t[i]),e+=":",e+=SF(n[t[i]]);return e+="}",e},GU=function(n,t){const e=n.length;if(e<=t)return[n];const i=[];for(let r=0;r<e;r+=t)i.push(n.substring(r,r+t>e?e:r+t));return i};function Ys(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const $U=function(n){(0,B.hu)(!Ex(n),"Invalid JSON number");const i=1023;let r,s,l,d,f;0===n?(s=0,l=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=d+i,l=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(s=0,l=Math.round(n/Math.pow(2,-1074))));const m=[];for(f=52;f;f-=1)m.push(l%2?1:0),l=Math.floor(l/2);for(f=11;f;f-=1)m.push(s%2?1:0),s=Math.floor(s/2);m.push(r?1:0),m.reverse();const y=m.join("");let C="";for(f=0;f<64;f+=8){let A=parseInt(y.substr(f,8),2).toString(16);1===A.length&&(A="0"+A),C+=A}return C.toLowerCase()},QW=new RegExp("^-?(0*)\\d{1,10}$"),zU=function(n){if(QW.test(n)){const t=Number(n);if(t>=-2147483648&&t<=2147483647)return t}return null},Nb=function(n){try{n()}catch(t){setTimeout(()=>{throw Fo("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},NI=function(n,t){const e=setTimeout(n,t);return"number"==typeof e&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):"object"==typeof e&&e.unref&&e.unref(),e};class t5{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){Fo(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class n5{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(qs("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Fo(t)}}let xI=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const KU=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,XU="websocket",eH="long_polling";class MF{constructor(t,e,i,r,s=!1,l="",d=!1,f=!1){this.secure=e,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=l,this.includeNamespaceInQueryParams=d,this.isUsingEmulator=f,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Hv.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Hv.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function tH(n,t,e){let i;if((0,B.hu)("string"==typeof t,"typeof type must == string"),(0,B.hu)("object"==typeof e,"typeof params must == object"),t===XU)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==eH)throw new Error("Unknown connection type: "+t);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function i5(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const r=[];return Ys(e,(s,l)=>{r.push(s+"="+l)}),i+r.join("&")}class r5{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,B.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,B.p$)(this.counters_)}}const NF={},xF={};function RF(n){const t=n.toString();return NF[t]||(NF[t]=new r5),NF[t]}class o5{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Nb(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class om{constructor(t,e,i,r,s,l,d){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=l,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=AI(t),this.stats_=RF(e),this.urlFn=f=>(this.appCheckToken&&(f.ac=this.appCheckToken),tH(e,eH,f))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new o5(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,B.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new OF((...s)=>{const[l,d,f,m,y]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=d,this.password=f;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[l,d]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(l,d)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&KU.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){om.forceAllow_=!0}static forceDisallow(){om.forceDisallow_=!0}static isAvailable(){return!((0,B.Yr)()||!om.forceAllow_&&(om.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,B.Wl)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=(0,B.h$)(e),r=GU(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,B.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=t,i.pw=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,B.Wl)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class OF{constructor(t,e,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,B.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=VU(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=OF.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(d){qs("frame writing exception"),d.stack&&qs(d.stack),qs(d)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||qs("No IE domain setting required")}catch{const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const l=this.pendingSegs.shift();i=i+"&seg"+r+"="+l.seg+"&ts"+r+"="+l.ts+"&d"+r+"="+l.d,r++}return e+=i,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(r),i()})}addTag(t,e){(0,B.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{qs("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let Tx=null;typeof MozWebSocket<"u"?Tx=MozWebSocket:typeof WebSocket<"u"&&(Tx=WebSocket);let xb=(()=>{class n{constructor(e,i,r,s,l,d,f){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=AI(this.connId),this.stats_=RF(i),this.connURL=n.connectionURL_(i,d,f,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,r,s,l){const d={v:"5"};return!(0,B.Yr)()&&typeof location<"u"&&location.hostname&&KU.test(location.hostname)&&(d.r="f"),i&&(d.s=i),r&&(d.ls=r),s&&(d.ac=s),l&&(d.p=l),tH(e,XU,d)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Hv.set("previous_websocket_failure",!0);try{let r;if((0,B.Yr)()){r={headers:{"User-Agent":`Firebase/5/${CF}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,d=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;d&&(r.proxy={origin:d})}this.mySock=new Tx(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==Tx&&!n.forceDisallow_}static previouslyFailed(){return Hv.isInMemoryStorage||!0===Hv.get("previous_websocket_failure")}markConnectionHealthy(){Hv.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,B.cI)(i);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,B.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const i=(0,B.Wl)(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=GU(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),lH=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[om,xb]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const i=xb&&xb.isAvailable();let r=i&&!xb.previouslyFailed();if(e.webSocketOnly&&(i||Fo("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[xb];else{const s=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&s.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class gH{constructor(t,e,i,r,s,l,d,f,m,y){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=l,this.onReady_=d,this.onDisconnect_=f,this.onKill_=m,this.lastSessionId=y,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=AI("c:"+this.id+":"),this.transportManager_=new lH(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=NI(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=MI("t",t),i=MI("d",t);if("c"===e)this.onSecondaryControl_(i);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=MI("t",t),i=MI("d",t);"c"===e?this.onControl_(i):"d"===e&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=MI("t",t);if("d"in t){const i=t.d;if("h"===e){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(i):"r"===e?this.onReset_(i):"e"===e?IF("Server Error: "+i):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):IF("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==i&&Fo("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),NI(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):NI(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Hv.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class mH{put(t,e,i,r){}merge(t,e,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}class _H{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,B.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const r=this.getInitialEvent(t);r&&e.apply(i,r)}off(t,e,i){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let s=0;s<r.length;s++)if(r[s].callback===e&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(t){(0,B.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class Ix extends _H{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,B.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ix}getInitialEvent(t){return(0,B.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class yi{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function ti(){return new yi("")}function Sn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function am(n){return n.pieces_.length-n.pieceNum_}function Bi(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new yi(n.pieces_,t)}function PF(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function RI(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function wH(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new yi(t,0)}function yr(n,t){const e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof yi)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&e.push(i[r])}return new yi(e,0)}function An(n){return n.pieceNum_>=n.pieces_.length}function ia(n,t){const e=Sn(n),i=Sn(t);if(null===e)return t;if(e===i)return ia(Bi(n),Bi(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function A5(n,t){const e=RI(n,0),i=RI(t,0);for(let r=0;r<e.length&&r<i.length;r++){const s=Gv(e[r],i[r]);if(0!==s)return s}return e.length===i.length?0:e.length<i.length?-1:1}function FF(n,t){if(am(n)!==am(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function uc(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(am(n)>am(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class M5{constructor(t,e){this.errorPrefix_=e,this.parts_=RI(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,B.ug)(this.parts_[i]);bH(this)}}function bH(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+$v(n))}function $v(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class LF extends _H{constructor(){let t,e;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new LF}getInitialEvent(t){return(0,B.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const OI=1e3;let Ax,zv=(()=>{class n extends mH{constructor(e,i,r,s,l,d,f,m){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=l,this.authTokenProvider_=d,this.appCheckTokenProvider_=f,this.authOverride_=m,this.id=n.nextPersistentConnectionId_++,this.log_=AI("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=OI,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m&&!(0,B.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");LF.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&Ix.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,r){const s=++this.requestNumber_,l={r:s,a:e,b:i};this.log_((0,B.Wl)(l)),(0,B.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const i=new B.BH,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:d=>{const f=d.d;"ok"===d.s?i.resolve(f):i.reject(f)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(e,i,r,s){this.initConnection_();const l=e._queryIdentifier,d=e._path.toString();this.log_("Listen called for "+d+" "+l),this.listens.has(d)||this.listens.set(d,new Map),(0,B.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,B.hu)(!this.listens.get(d).has(l),"listen() called twice for same path/queryId.");const f={onComplete:s,hashFn:i,query:e,tag:r};this.listens.get(d).set(l,f),this.connected_&&this.sendListen_(f)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(e){const i=e.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const l={p:r};e.tag&&(l.q=i._queryObject,l.t=e.tag),l.h=e.hashFn(),this.sendRequest("q",l,f=>{const m=f.d,y=f.s;n.warnOnListenWarnings_(m,i),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",f),"ok"!==y&&this.removeListen_(r,s),e.onComplete&&e.onComplete(y,m))})}static warnOnListenWarnings_(e,i){if(e&&"object"==typeof e&&(0,B.r3)(e,"w")){const r=(0,B.DV)(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',l=i._path.toString();Fo(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,B.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=(0,B.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const l=s.s,d=s.d||"error";this.authToken_===e&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,r=e.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(e,i){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,B.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,i)}sendUnlisten_(e,i,r,s){this.log_("Unlisten on "+e+" for "+i);const l={p:e};s&&(l.q=r,l.t=s),this.sendRequest("n",l)}onDisconnectPut(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:r})}onDisconnectMerge(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:r})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,r,s){const l={p:i,d:r};this.log_("onDisconnect "+e,l),this.sendRequest(e,l,d=>{s&&setTimeout(()=>{s(d.s,d.d)},Math.floor(0))})}put(e,i,r,s){this.putInternal("p",e,i,r,s)}merge(e,i,r,s){this.putInternal("m",e,i,r,s)}putInternal(e,i,r,s,l){this.initConnection_();const d={p:i,d:r};void 0!==l&&(d.h=l),this.outstandingPuts_.push({action:e,request:d,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,r,l=>{this.log_(i+" response",l),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(l.s,l.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,B.Wl)(e));const i=e.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),"d"===e?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===e?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===e?this.onListenRevoked_(i.p,i.q):"ac"===e?this.onAuthRevoked_(i.s,i.d):"apc"===e?this.onAppCheckRevoked_(i.s,i.d):"sd"===e?this.onSecurityDebugPacket_(i):IF("Unrecognized action received from server: "+(0,B.Wl)(e)+"\nAre you using the latest client?")}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,B.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=OI,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=OI,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=OI),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,Ee.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const i=e.onDataMessage_.bind(e),r=e.onReady_.bind(e),s=e.onRealtimeDisconnect_.bind(e),l=e.id+":"+n.nextConnectionId_++,d=e.lastSessionId;let f=!1,m=null;const y=function(){m?m.close():(f=!0,s())};e.realtime_={close:y,sendRequest:function(x){(0,B.hu)(m,"sendRequest call when we're not connected not allowed."),m.sendRequest(x)}};const A=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[x,P]=yield Promise.all([e.authTokenProvider_.getToken(A),e.appCheckTokenProvider_.getToken(A)]);f?qs("getToken() completed but was canceled"):(qs("getToken() completed. Creating connection."),e.authToken_=x&&x.accessToken,e.appCheckToken_=P&&P.token,m=new gH(l,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,i,r,s,F=>{Fo(F+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},d))}catch(x){e.log_("Failed to get token: "+x),f||(e.repoInfo_.nodeAdmin&&Fo(x),y())}}})()}interrupt(e){qs("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){qs("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,B.xb)(this.interruptReasons_)&&(this.reconnectDelay_=OI,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let r;r=i?i.map(l=>SF(l)).join("$"):"default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,i){const r=new yi(e).toString();let s;if(this.listens.has(r)){const l=this.listens.get(r);s=l.get(i),l.delete(i),0===l.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,i){qs("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){qs("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";(0,B.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+i+"."+CF.replace(/\./g,"-")]=1,(0,B.uI)()?e["framework.cordova"]=1:(0,B.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Ix.getInstance().currentlyOnline();return(0,B.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Ln{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new Ln(t,e)}}class Sx{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new Ln(sm,t),r=new Ln(sm,e);return 0!==this.compare(i,r)}minPost(){return Ln.MIN}}class CH extends Sx{static get __EMPTY_NODE(){return Ax}static set __EMPTY_NODE(t){Ax=t}compare(t,e){return Gv(t.name,e.name)}isDefinedOn(t){throw(0,B.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return Ln.MIN}maxPost(){return new Ln(Hf,Ax)}makePost(t,e){return(0,B.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Ln(t,Ax)}toString(){return".key"}}const Yd=new CH;class Mx{constructor(t,e,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let l=1;for(;!t.isEmpty();)if(l=e?i(t.key,e):1,r&&(l*=-1),l<0)t=this.isReverse_?t.left:t.right;else{if(0===l){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let VF,gu=(()=>{class n{constructor(e,i,r,s,l){this.key=e,this.value=i,this.color=r??n.RED,this.left=s??Ia.EMPTY_NODE,this.right=l??Ia.EMPTY_NODE}copy(e,i,r,s,l){return new n(e??this.key,i??this.value,r??this.color,s??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let s=this;const l=r(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,i,r),null):0===l?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(e,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ia.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let r,s;if(r=this,i(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(e,r.key)){if(r.right.isEmpty())return Ia.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Ia{constructor(t,e=Ia.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Ia(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,gu.BLACK,null,null))}remove(t){return new Ia(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,gu.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,r=null;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}e<0?i=i.left:e>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Mx(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new Mx(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new Mx(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new Mx(this.root_,null,this.comparator_,!0,t)}}function L5(n,t){return Gv(n.name,t.name)}function BF(n,t){return Gv(n,t)}Ia.EMPTY_NODE=new class F5{copy(t,e,i,r,s){return this}insert(t,e,i){return new gu(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const TH=function(n){return"number"==typeof n?"number:"+$U(n):"string:"+n},IH=function(n){if(n.isLeafNode()){const t=n.val();(0,B.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,B.r3)(t,".sv"),"Priority must be a string or number.")}else(0,B.hu)(n===VF||n.isEmpty(),"priority of unexpected type.");(0,B.hu)(n===VF||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let SH,AH,MH,Rb=(()=>{class n{constructor(e,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,(0,B.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),IH(this.priorityNode_)}static set __childrenNodeConstructor(e){SH=e}static get __childrenNodeConstructor(){return SH}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return An(e)?this:".priority"===Sn(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return".priority"===e?this.updatePriority(i):i.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const r=Sn(e);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,B.hu)(".priority"!==r||1===am(e),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Bi(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+TH(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",e+="number"===i?$U(this.value_):this.value_,this.lazyHash_=UU(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,B.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),l=n.VALUE_TYPE_ORDER.indexOf(r);return(0,B.hu)(s>=0,"Unknown leaf type: "+i),(0,B.hu)(l>=0,"Unknown leaf type: "+r),s===l?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:l-s}withIndex(){return this}isIndexed(){return!0}equals(e){return e===this||!!e.isLeafNode()&&(this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Yi=new class H5 extends Sx{compare(t,e){const i=t.node.getPriority(),r=e.node.getPriority(),s=i.compareTo(r);return 0===s?Gv(t.name,e.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return Ln.MIN}maxPost(){return new Ln(Hf,new Rb("[PRIORITY-POST]",MH))}makePost(t,e){const i=AH(t);return new Ln(e,new Rb("[PRIORITY-POST]",i))}toString(){return".priority"}},j5=Math.log(2);class G5{constructor(t){this.count=parseInt(Math.log(t+1)/j5,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&r}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Nx=function(n,t,e,i){n.sort(t);const r=function(f,m){const y=m-f;let C,A;if(0===y)return null;if(1===y)return C=n[f],A=e?e(C):C,new gu(A,C.node,gu.BLACK,null,null);{const x=parseInt(y/2,10)+f,P=r(f,x),F=r(x+1,m);return C=n[x],A=e?e(C):C,new gu(A,C.node,gu.BLACK,P,F)}},d=function(f){let m=null,y=null,C=n.length;const A=function(P,F){const U=C-P,ee=C;C-=P;const oe=r(U+1,ee),te=n[U],ce=e?e(te):te;x(new gu(ce,te.node,F,null,oe))},x=function(P){m?(m.left=P,m=P):(y=P,m=P)};for(let P=0;P<f.count;++P){const F=f.nextBitIsOne(),U=Math.pow(2,f.count-(P+1));F?A(U,gu.BLACK):(A(U,gu.BLACK),A(U,gu.RED))}return y}(new G5(n.length));return new Ia(i||t,d)};let UF;const Ob={};class jf{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,B.hu)(Ob&&Yi,"ChildrenNode.ts has not been loaded"),UF=UF||new jf({".priority":Ob},{".priority":Yi}),UF}get(t){const e=(0,B.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Ia?e:null}hasIndex(t){return(0,B.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,B.hu)(t!==Yd,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=e.getIterator(Ln.Wrap);let d,l=s.getNext();for(;l;)r=r||t.isDefinedOn(l.node),i.push(l),l=s.getNext();d=r?Nx(i,t.getCompare()):Ob;const f=t.toString(),m=Object.assign({},this.indexSet_);m[f]=t;const y=Object.assign({},this.indexes_);return y[f]=d,new jf(y,m)}addToIndexes(t,e){const i=(0,B.UI)(this.indexes_,(r,s)=>{const l=(0,B.DV)(this.indexSet_,s);if((0,B.hu)(l,"Missing index implementation for "+s),r===Ob){if(l.isDefinedOn(t.node)){const d=[],f=e.getIterator(Ln.Wrap);let m=f.getNext();for(;m;)m.name!==t.name&&d.push(m),m=f.getNext();return d.push(t),Nx(d,l.getCompare())}return Ob}{const d=e.get(t.name);let f=r;return d&&(f=f.remove(new Ln(t.name,d))),f.insert(t,t.node)}});return new jf(i,this.indexSet_)}removeFromIndexes(t,e){const i=(0,B.UI)(this.indexes_,r=>{if(r===Ob)return r;{const s=e.get(t.name);return s?r.remove(new Ln(t.name,s)):r}});return new jf(i,this.indexSet_)}}let kI,_n=(()=>{class n{constructor(e,i,r){this.children_=e,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&IH(this.priorityNode_),this.children_.isEmpty()&&(0,B.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return kI||(kI=new n(new Ia(BF),null,jf.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||kI}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const i=this.children_.get(e);return null===i?kI:i}}getChild(e){const i=Sn(e);return null===i?this:this.getImmediateChild(i).getChild(Bi(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,i){if((0,B.hu)(i,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(i);{const r=new Ln(e,i);let s,l;i.isEmpty()?(s=this.children_.remove(e),l=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,i),l=this.indexMap_.addToIndexes(r,this.children_));const d=s.isEmpty()?kI:this.priorityNode_;return new n(s,d,l)}}updateChild(e,i){const r=Sn(e);if(null===r)return i;{(0,B.hu)(".priority"!==Sn(e)||1===am(e),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Bi(e),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let r=0,s=0,l=!0;if(this.forEachChild(Yi,(d,f)=>{i[d]=f.val(e),r++,l&&n.INTEGER_REGEXP_.test(d)?s=Math.max(s,Number(d)):l=!1}),!e&&l&&s<2*r){const d=[];for(const f in i)d[f]=i[f];return d}return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+TH(this.getPriority().val())+":"),this.forEachChild(Yi,(i,r)=>{const s=r.hash();""!==s&&(e+=":"+i+":"+s)}),this.lazyHash_=""===e?"":UU(e)}return this.lazyHash_}getPredecessorChildName(e,i,r){const s=this.resolveIndex_(r);if(s){const l=s.getPredecessorKey(new Ln(e,i));return l?l.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new Ln(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new Ln(i,this.children_.get(i)):null}forEachChild(e,i){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Ln.Wrap);let l=s.peek();for(;null!=l&&i.compare(l,e)<0;)s.getNext(),l=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Ln.Wrap);let l=s.peek();for(;null!=l&&i.compare(l,e)>0;)s.getNext(),l=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===PI?-1:0}withIndex(e){if(e===Yd||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===Yd||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(Yi),s=i.getIterator(Yi);let l=r.getNext(),d=s.getNext();for(;l&&d;){if(l.name!==d.name||!l.node.equals(d.node))return!1;l=r.getNext(),d=s.getNext()}return null===l&&null===d}return!1}return!1}}resolveIndex_(e){return e===Yd?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const PI=new class $5 extends _n{constructor(){super(new Ia(BF),_n.EMPTY_NODE,jf.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return _n.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Ln,{MIN:{value:new Ln(sm,_n.EMPTY_NODE)},MAX:{value:new Ln(Hf,PI)}}),CH.__EMPTY_NODE=_n.EMPTY_NODE,Rb.__childrenNodeConstructor=_n,function B5(n){VF=n}(PI),function U5(n){MH=n}(PI);const z5=!0;function Or(n,t=null){if(null===n)return _n.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,B.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Rb(n,Or(t));if(n instanceof Array||!z5){let e=_n.EMPTY_NODE;return Ys(n,(i,r)=>{if((0,B.r3)(n,i)&&"."!==i.substring(0,1)){const s=Or(r);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(i,s))}}),e.updatePriority(Or(t))}{const e=[];let i=!1;if(Ys(n,(l,d)=>{if("."!==l.substring(0,1)){const f=Or(d);f.isEmpty()||(i=i||!f.getPriority().isEmpty(),e.push(new Ln(l,f)))}}),0===e.length)return _n.EMPTY_NODE;const s=Nx(e,L5,l=>l.name,BF);if(i){const l=Nx(e,Yi.getCompare());return new _n(s,Or(t),new jf({".priority":l},{".priority":Yi}))}return new _n(s,Or(t),jf.Default)}}!function V5(n){AH=n}(Or);class HF extends Sx{constructor(t){super(),this.indexPath_=t,(0,B.hu)(!An(t)&&".priority"!==Sn(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),r=this.extractChild(e.node),s=i.compareTo(r);return 0===s?Gv(t.name,e.name):s}makePost(t,e){const i=Or(t),r=_n.EMPTY_NODE.updateChild(this.indexPath_,i);return new Ln(e,r)}maxPost(){const t=_n.EMPTY_NODE.updateChild(this.indexPath_,PI);return new Ln(Hf,t)}toString(){return RI(this.indexPath_,0).join("/")}}const jF=new class W5 extends Sx{compare(t,e){const i=t.node.compareTo(e.node);return 0===i?Gv(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return Ln.MIN}maxPost(){return Ln.MAX}makePost(t,e){const i=Or(t);return new Ln(e,i)}toString(){return".value"}};function NH(n){return{type:"value",snapshotNode:n}}function kb(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function FI(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function LI(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class GF{constructor(t){this.index_=t}updateChild(t,e,i,r,s,l){(0,B.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=t.getImmediateChild(e);return d.getChild(r).equals(i.getChild(r))&&d.isEmpty()===i.isEmpty()||(null!=l&&(i.isEmpty()?t.hasChild(e)?l.trackChildChange(FI(e,d)):(0,B.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?l.trackChildChange(kb(e,i)):l.trackChildChange(LI(e,i,d))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return null!=i&&(t.isLeafNode()||t.forEachChild(Yi,(r,s)=>{e.hasChild(r)||i.trackChildChange(FI(r,s))}),e.isLeafNode()||e.forEachChild(Yi,(r,s)=>{if(t.hasChild(r)){const l=t.getImmediateChild(r);l.equals(s)||i.trackChildChange(LI(r,s,l))}else i.trackChildChange(kb(r,s))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?_n.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class BI{constructor(t){this.indexedFilter_=new GF(t.getIndex()),this.index_=t.getIndex(),this.startPost_=BI.getStartPost_(t),this.endPost_=BI.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const e=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,i=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return e&&i}updateChild(t,e,i,r,s,l){return this.matches(new Ln(e,i))||(i=_n.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,r,s,l)}updateFullNode(t,e,i){e.isLeafNode()&&(e=_n.EMPTY_NODE);let r=e.withIndex(this.index_);r=r.updatePriority(_n.EMPTY_NODE);const s=this;return e.forEachChild(Yi,(l,d)=>{s.matches(new Ln(l,d))||(r=r.updateImmediateChild(l,_n.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class Y5{constructor(t){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=e=>{const i=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new BI(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,e,i,r,s,l){return this.rangedFilter_.matches(new Ln(e,i))||(i=_n.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,r,s,l):this.fullLimitUpdateChild_(t,e,i,s,l)}updateFullNode(t,e,i){let r;if(e.isLeafNode()||e.isEmpty())r=_n.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let s;r=_n.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;s.hasNext()&&l<this.limit_;){const d=s.getNext();if(this.withinDirectionalStart(d)){if(!this.withinDirectionalEnd(d))break;r=r.updateImmediateChild(d.name,d.node),l++}}}else{let s;r=e.withIndex(this.index_),r=r.updatePriority(_n.EMPTY_NODE),s=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let l=0;for(;s.hasNext();){const d=s.getNext();l<this.limit_&&this.withinDirectionalStart(d)&&this.withinDirectionalEnd(d)?l++:r=r.updateImmediateChild(d.name,_n.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,r,s){let l;if(this.reverse_){const C=this.index_.getCompare();l=(A,x)=>C(x,A)}else l=this.index_.getCompare();const d=t;(0,B.hu)(d.numChildren()===this.limit_,"");const f=new Ln(e,i),m=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),y=this.rangedFilter_.matches(f);if(d.hasChild(e)){const C=d.getImmediateChild(e);let A=r.getChildAfterChild(this.index_,m,this.reverse_);for(;null!=A&&(A.name===e||d.hasChild(A.name));)A=r.getChildAfterChild(this.index_,A,this.reverse_);const x=null==A?1:l(A,f);if(y&&!i.isEmpty()&&x>=0)return s?.trackChildChange(LI(e,i,C)),d.updateImmediateChild(e,i);{s?.trackChildChange(FI(e,C));const F=d.updateImmediateChild(e,_n.EMPTY_NODE);return null!=A&&this.rangedFilter_.matches(A)?(s?.trackChildChange(kb(A.name,A.node)),F.updateImmediateChild(A.name,A.node)):F}}return i.isEmpty()?t:y&&l(m,f)>=0?(null!=s&&(s.trackChildChange(FI(m.name,m.node)),s.trackChildChange(kb(e,i))),d.updateImmediateChild(e,i).updateImmediateChild(m.name,_n.EMPTY_NODE)):t}}class xx{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Yi}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,B.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,B.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:sm}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,B.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,B.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Hf}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,B.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Yi}copy(){const t=new xx;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function $F(n,t,e){const i=n.copy();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=e?(i.startNameSet_=!0,i.indexStartName_=e):(i.startNameSet_=!1,i.indexStartName_=""),i}function zF(n,t,e){const i=n.copy();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==e?(i.endNameSet_=!0,i.indexEndName_=e):(i.endNameSet_=!1,i.indexEndName_=""),i}function Rx(n,t){const e=n.copy();return e.index_=t,e}function xH(n){const t={};if(n.isDefault())return t;let e;if(n.index_===Yi?e="$priority":n.index_===jF?e="$value":n.index_===Yd?e="$key":((0,B.hu)(n.index_ instanceof HF,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,B.Wl)(e),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";t[i]=(0,B.Wl)(n.indexStartValue_),n.startNameSet_&&(t[i]+=","+(0,B.Wl)(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";t[i]=(0,B.Wl)(n.indexEndValue_),n.endNameSet_&&(t[i]+=","+(0,B.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function RH(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_),t.sin=!n.startAfterSet_),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_),t.ein=!n.endBeforeSet_),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==Yi&&(t.i=n.index_.toString()),t}class Ox extends mH{constructor(t,e,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=AI("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,B.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,r){const s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);const l=Ox.getListenId_(t,i),d={};this.listens_[l]=d;const f=xH(t._queryParams);this.restRequest_(s+".json",f,(m,y)=>{let C=y;if(404===m&&(C=null,m=null),null===m&&this.onDataUpdate_(s,C,!1,i),(0,B.DV)(this.listens_,l)===d){let A;A=m?401===m?"permission_denied":"rest_error:"+m:"ok",r(A,null)}})}unlisten(t,e){const i=Ox.getListenId_(t,e);delete this.listens_[i]}get(t){const e=xH(t._queryParams),i=t._path.toString(),r=new B.BH;return this.restRequest_(i+".json",e,(s,l)=>{let d=l;404===s&&(d=null,s=null),null===s?(this.onDataUpdate_(i,d,!1,null),r.resolve(d)):r.reject(new Error(d))}),r.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(e.auth=r.accessToken),s&&s.token&&(e.ac=s.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,B.xO)(e);this.log_("Sending REST request for "+l);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(i&&4===d.readyState){this.log_("REST Response for "+l+" received. status:",d.status,"response:",d.responseText);let f=null;if(d.status>=200&&d.status<300){try{f=(0,B.cI)(d.responseText)}catch{Fo("Failed to parse JSON response for "+l+": "+d.responseText)}i(null,f)}else 401!==d.status&&404!==d.status&&Fo("Got unsuccessful REST response for "+l+" Status: "+d.status),i(d.status);i=null}},d.open("GET",l,!0),d.send()})}}class eq{constructor(){this.rootNode_=_n.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function kx(){return{value:null,children:new Map}}function Pb(n,t,e){if(An(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const i=Sn(t);n.children.has(i)||n.children.set(i,kx()),Pb(n.children.get(i),t=Bi(t),e)}}function WF(n,t){if(An(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(Yi,(i,r)=>{Pb(n,new yi(i),r)}),WF(n,t)}}if(n.children.size>0){const e=Sn(t);return t=Bi(t),n.children.has(e)&&WF(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function qF(n,t,e){null!==n.value?e(t,n.value):function tq(n,t){n.children.forEach((e,i)=>{t(i,e)})}(n,(i,r)=>{qF(r,new yi(t.toString()+"/"+i),e)})}class nq{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&Ys(this.last_,(i,r)=>{e[i]=e[i]-r}),this.last_=t,e}}class sq{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new nq(t);const i=1e4+2e4*Math.random();NI(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;Ys(t,(r,s)=>{s>0&&(0,B.r3)(this.statsToReport_,r)&&(e[r]=s,i=!0)}),i&&this.server_.reportStats(e),NI(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Zd=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Zd||{});function KF(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Px{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=Zd.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(An(this.path)){if(null!=this.affectedTree.value)return(0,B.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new yi(t));return new Px(ti(),e,this.revert)}}return(0,B.hu)(Sn(this.path)===t,"operationForChild called for unrelated child."),new Px(Bi(this.path),this.affectedTree,this.revert)}}class VI{constructor(t,e){this.source=t,this.path=e,this.type=Zd.LISTEN_COMPLETE}operationForChild(t){return An(this.path)?new VI(this.source,ti()):new VI(this.source,Bi(this.path))}}class Wv{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=Zd.OVERWRITE}operationForChild(t){return An(this.path)?new Wv(this.source,ti(),this.snap.getImmediateChild(t)):new Wv(this.source,Bi(this.path),this.snap)}}class Fb{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=Zd.MERGE}operationForChild(t){if(An(this.path)){const e=this.children.subtree(new yi(t));return e.isEmpty()?null:e.value?new Wv(this.source,ti(),e.value):new Fb(this.source,ti(),e)}return(0,B.hu)(Sn(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Fb(this.source,Bi(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class lm{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(An(t))return this.isFullyInitialized()&&!this.filtered_;const e=Sn(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class oq{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function UI(n,t,e,i,r,s){const l=i.filter(d=>d.type===e);l.sort((d,f)=>function cq(n,t,e){if(null==t.childName||null==e.childName)throw(0,B.g5)("Should only compare child_ events.");const i=new Ln(t.childName,t.snapshotNode),r=new Ln(e.childName,e.snapshotNode);return n.index_.compare(i,r)}(n,d,f)),l.forEach(d=>{const f=function lq(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,d,s);r.forEach(m=>{m.respondsTo(d.type)&&t.push(m.createEvent(f,n.query_))})})}function Fx(n,t){return{eventCache:n,serverCache:t}}function HI(n,t,e,i){return Fx(new lm(t,e,i),n.serverCache)}function kH(n,t,e,i){return Fx(n.eventCache,new lm(t,e,i))}function Lx(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function qv(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let QF;class Zi{constructor(t,e=(()=>(QF||(QF=new Ia(qW)),QF))()){this.value=t,this.children=e}static fromObject(t){let e=new Zi(null);return Ys(t,(i,r)=>{e=e.set(new yi(i),r)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:ti(),value:this.value};if(An(t))return null;{const i=Sn(t),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(Bi(t),e);return null!=s?{path:yr(new yi(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(An(t))return this;{const e=Sn(t),i=this.children.get(e);return null!==i?i.subtree(Bi(t)):new Zi(null)}}set(t,e){if(An(t))return new Zi(e,this.children);{const i=Sn(t),s=(this.children.get(i)||new Zi(null)).set(Bi(t),e),l=this.children.insert(i,s);return new Zi(this.value,l)}}remove(t){if(An(t))return this.children.isEmpty()?new Zi(null):new Zi(null,this.children);{const e=Sn(t),i=this.children.get(e);if(i){const r=i.remove(Bi(t));let s;return s=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&s.isEmpty()?new Zi(null):new Zi(this.value,s)}return this}}get(t){if(An(t))return this.value;{const e=Sn(t),i=this.children.get(e);return i?i.get(Bi(t)):null}}setTree(t,e){if(An(t))return e;{const i=Sn(t),s=(this.children.get(i)||new Zi(null)).setTree(Bi(t),e);let l;return l=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new Zi(this.value,l)}}fold(t){return this.fold_(ti(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(yr(t,r),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,ti(),e)}findOnPath_(t,e,i){const r=!!this.value&&i(e,this.value);if(r)return r;if(An(t))return null;{const s=Sn(t),l=this.children.get(s);return l?l.findOnPath_(Bi(t),yr(e,s),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,ti(),e)}foreachOnPath_(t,e,i){if(An(t))return this;{this.value&&i(e,this.value);const r=Sn(t),s=this.children.get(r);return s?s.foreachOnPath_(Bi(t),yr(e,r),i):new Zi(null)}}foreach(t){this.foreach_(ti(),t)}foreach_(t,e){this.children.inorderTraversal((i,r)=>{r.foreach_(yr(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}class mu{constructor(t){this.writeTree_=t}static empty(){return new mu(new Zi(null))}}function jI(n,t,e){if(An(t))return new mu(new Zi(e));{const i=n.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let s=i.value;const l=ia(r,t);return s=s.updateChild(l,e),new mu(n.writeTree_.set(r,s))}{const r=new Zi(e),s=n.writeTree_.setTree(t,r);return new mu(s)}}}function JF(n,t,e){let i=n;return Ys(e,(r,s)=>{i=jI(i,yr(t,r),s)}),i}function PH(n,t){if(An(t))return mu.empty();{const e=n.writeTree_.setTree(t,new Zi(null));return new mu(e)}}function XF(n,t){return null!=Yv(n,t)}function Yv(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(ia(e.path,t)):null}function FH(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Yi,(i,r)=>{t.push(new Ln(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&t.push(new Ln(i,r.value))}),t}function cm(n,t){if(An(t))return n;{const e=Yv(n,t);return new mu(null!=e?new Zi(e):n.writeTree_.subtree(t))}}function eL(n){return n.writeTree_.isEmpty()}function Lb(n,t){return LH(ti(),n.writeTree_,t)}function LH(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((r,s)=>{".priority"===r?((0,B.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):e=LH(yr(n,r),s,e)}),!e.getChild(n).isEmpty()&&null!==i&&(e=e.updateChild(yr(n,".priority"),i)),e}}function Bx(n,t){return jH(t,n)}function gq(n,t){if(n.snap)return uc(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&uc(yr(n.path,e),t))return!0;return!1}function _q(n){return n.visible}function BH(n,t,e){let i=mu.empty();for(let r=0;r<n.length;++r){const s=n[r];if(t(s)){const l=s.path;let d;if(s.snap)uc(e,l)?(d=ia(e,l),i=jI(i,d,s.snap)):uc(l,e)&&(d=ia(l,e),i=jI(i,ti(),s.snap.getChild(d)));else{if(!s.children)throw(0,B.g5)("WriteRecord should have .snap or .children");if(uc(e,l))d=ia(e,l),i=JF(i,d,s.children);else if(uc(l,e))if(d=ia(l,e),An(d))i=JF(i,ti(),s.children);else{const f=(0,B.DV)(s.children,Sn(d));if(f){const m=f.getChild(Bi(d));i=jI(i,ti(),m)}}}}}return i}function VH(n,t,e,i,r){if(i||r){const s=cm(n.visibleWrites,t);return!r&&eL(s)?e:r||null!=e||XF(s,ti())?Lb(BH(n.allWrites,function(m){return(m.visible||r)&&(!i||!~i.indexOf(m.writeId))&&(uc(m.path,t)||uc(t,m.path))},t),e||_n.EMPTY_NODE):null}{const s=Yv(n.visibleWrites,t);if(null!=s)return s;{const l=cm(n.visibleWrites,t);return eL(l)?e:null!=e||XF(l,ti())?Lb(l,e||_n.EMPTY_NODE):null}}}function Vx(n,t,e,i){return VH(n.writeTree,n.treePath,t,e,i)}function tL(n,t){return function vq(n,t,e){let i=_n.EMPTY_NODE;const r=Yv(n.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(Yi,(s,l)=>{i=i.updateImmediateChild(s,l)}),i;if(e){const s=cm(n.visibleWrites,t);return e.forEachChild(Yi,(l,d)=>{const f=Lb(cm(s,new yi(l)),d);i=i.updateImmediateChild(l,f)}),FH(s).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}return FH(cm(n.visibleWrites,t)).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}(n.writeTree,n.treePath,t)}function UH(n,t,e,i){return function yq(n,t,e,i,r){(0,B.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=yr(t,e);if(XF(n.visibleWrites,s))return null;{const l=cm(n.visibleWrites,s);return eL(l)?r.getChild(e):Lb(l,r.getChild(e))}}(n.writeTree,n.treePath,t,e,i)}function Ux(n,t){return function bq(n,t){return Yv(n.visibleWrites,t)}(n.writeTree,yr(n.treePath,t))}function nL(n,t,e){return function wq(n,t,e,i){const r=yr(t,e),s=Yv(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(e)?Lb(cm(n.visibleWrites,r),i.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function HH(n,t){return jH(yr(n.treePath,t),n.writeTree)}function jH(n,t){return{treePath:n,writeTree:t}}class Tq{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;(0,B.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,B.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===e&&"child_removed"===s)this.changeMap.set(i,LI(i,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===e&&"child_changed"===s)this.changeMap.set(i,FI(i,r.oldSnap));else if("child_changed"===e&&"child_added"===s)this.changeMap.set(i,kb(i,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==s)throw(0,B.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(i,LI(i,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}const GH=new class Iq{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}};class iL{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=null!=this.optCompleteServerCache_?new lm(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return nL(this.writes_,t,i)}}getChildAfterChild(t,e,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:qv(this.viewCache_),s=function Cq(n,t,e,i,r,s){return function Dq(n,t,e,i,r,s,l){let d;const f=cm(n.visibleWrites,t),m=Yv(f,ti());if(null!=m)d=m;else{if(null==e)return[];d=Lb(f,e)}if(d=d.withIndex(l),d.isEmpty()||d.isLeafNode())return[];{const y=[],C=l.getCompare(),A=s?d.getReverseIteratorFrom(i,l):d.getIteratorFrom(i,l);let x=A.getNext();for(;x&&y.length<r;)0!==C(x,i)&&y.push(x),x=A.getNext();return y}}(n.writeTree,n.treePath,t,e,i,r,s)}(this.writes_,r,e,1,i,t);return 0===s.length?null:s[0]}}function $H(n,t,e,i,r,s){const l=t.eventCache;if(null!=Ux(i,e))return t;{let d,f;if(An(e))if((0,B.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const m=qv(t),C=tL(i,m instanceof _n?m:_n.EMPTY_NODE);d=n.filter.updateFullNode(t.eventCache.getNode(),C,s)}else{const m=Vx(i,qv(t));d=n.filter.updateFullNode(t.eventCache.getNode(),m,s)}else{const m=Sn(e);if(".priority"===m){(0,B.hu)(1===am(e),"Can't have a priority with additional path components");const y=l.getNode();f=t.serverCache.getNode();const C=UH(i,e,y,f);d=null!=C?n.filter.updatePriority(y,C):l.getNode()}else{const y=Bi(e);let C;if(l.isCompleteForChild(m)){f=t.serverCache.getNode();const A=UH(i,e,l.getNode(),f);C=null!=A?l.getNode().getImmediateChild(m).updateChild(y,A):l.getNode().getImmediateChild(m)}else C=nL(i,m,t.serverCache);d=null!=C?n.filter.updateChild(l.getNode(),m,C,y,r,s):l.getNode()}}return HI(t,d,l.isFullyInitialized()||An(e),n.filter.filtersNodes())}}function Hx(n,t,e,i,r,s,l,d){const f=t.serverCache;let m;const y=l?n.filter:n.filter.getIndexedFilter();if(An(e))m=y.updateFullNode(f.getNode(),i,null);else if(y.filtersNodes()&&!f.isFiltered()){const x=f.getNode().updateChild(e,i);m=y.updateFullNode(f.getNode(),x,null)}else{const x=Sn(e);if(!f.isCompleteForPath(e)&&am(e)>1)return t;const P=Bi(e),U=f.getNode().getImmediateChild(x).updateChild(P,i);m=".priority"===x?y.updatePriority(f.getNode(),U):y.updateChild(f.getNode(),x,U,P,GH,null)}const C=kH(t,m,f.isFullyInitialized()||An(e),y.filtersNodes());return $H(n,C,e,r,new iL(r,C,s),d)}function rL(n,t,e,i,r,s,l){const d=t.eventCache;let f,m;const y=new iL(r,t,s);if(An(e))m=n.filter.updateFullNode(t.eventCache.getNode(),i,l),f=HI(t,m,!0,n.filter.filtersNodes());else{const C=Sn(e);if(".priority"===C)m=n.filter.updatePriority(t.eventCache.getNode(),i),f=HI(t,m,d.isFullyInitialized(),d.isFiltered());else{const A=Bi(e),x=d.getNode().getImmediateChild(C);let P;if(An(A))P=i;else{const F=y.getCompleteChild(C);P=null!=F?".priority"===PF(A)&&F.getChild(wH(A)).isEmpty()?F:F.updateChild(A,i):_n.EMPTY_NODE}f=x.equals(P)?t:HI(t,n.filter.updateChild(d.getNode(),C,P,A,y,l),d.isFullyInitialized(),n.filter.filtersNodes())}}return f}function zH(n,t){return n.eventCache.isCompleteForChild(t)}function WH(n,t,e){return e.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function sL(n,t,e,i,r,s,l,d){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let m,f=t;m=An(e)?i:new Zi(null).setTree(e,i);const y=t.serverCache.getNode();return m.children.inorderTraversal((C,A)=>{if(y.hasChild(C)){const P=WH(0,t.serverCache.getNode().getImmediateChild(C),A);f=Hx(n,f,new yi(C),P,r,s,l,d)}}),m.children.inorderTraversal((C,A)=>{const x=!t.serverCache.isCompleteForChild(C)&&null===A.value;if(!y.hasChild(C)&&!x){const F=WH(0,t.serverCache.getNode().getImmediateChild(C),A);f=Hx(n,f,new yi(C),F,r,s,l,d)}}),f}class Pq{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new GF(i.getIndex()),s=function Z5(n){return n.loadsAllData()?new GF(n.getIndex()):n.hasLimit()?new Y5(n):new BI(n)}(i);this.processor_=function Sq(n){return{filter:n}}(s);const l=e.serverCache,d=e.eventCache,f=r.updateFullNode(_n.EMPTY_NODE,l.getNode(),null),m=s.updateFullNode(_n.EMPTY_NODE,d.getNode(),null),y=new lm(f,l.isFullyInitialized(),r.filtersNodes()),C=new lm(m,d.isFullyInitialized(),s.filtersNodes());this.viewCache_=Fx(C,y),this.eventGenerator_=new oq(this.query_)}get query(){return this.query_}}function Bq(n,t){const e=qv(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!An(t)&&!e.getImmediateChild(Sn(t)).isEmpty())?e.getChild(t):null}function qH(n){return 0===n.eventRegistrations_.length}function YH(n,t,e){const i=[];if(e){(0,B.hu)(null==t,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const l=s.createCancelEvent(e,r);l&&i.push(l)})}if(t){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const l=n.eventRegistrations_[s];if(l.matches(t)){if(t.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(l)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function ZH(n,t,e,i){t.type===Zd.MERGE&&null!==t.source.queryId&&((0,B.hu)(qv(n.viewCache_),"We should always have a full cache before handling merges"),(0,B.hu)(Lx(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function Mq(n,t,e,i,r){const s=new Tq;let l,d;if(e.type===Zd.OVERWRITE){const m=e;m.source.fromUser?l=rL(n,t,m.path,m.snap,i,r,s):((0,B.hu)(m.source.fromServer,"Unknown source."),d=m.source.tagged||t.serverCache.isFiltered()&&!An(m.path),l=Hx(n,t,m.path,m.snap,i,r,d,s))}else if(e.type===Zd.MERGE){const m=e;m.source.fromUser?l=function xq(n,t,e,i,r,s,l){let d=t;return i.foreach((f,m)=>{const y=yr(e,f);zH(t,Sn(y))&&(d=rL(n,d,y,m,r,s,l))}),i.foreach((f,m)=>{const y=yr(e,f);zH(t,Sn(y))||(d=rL(n,d,y,m,r,s,l))}),d}(n,t,m.path,m.children,i,r,s):((0,B.hu)(m.source.fromServer,"Unknown source."),d=m.source.tagged||t.serverCache.isFiltered(),l=sL(n,t,m.path,m.children,i,r,d,s))}else if(e.type===Zd.ACK_USER_WRITE){const m=e;l=m.revert?function kq(n,t,e,i,r,s){let l;if(null!=Ux(i,e))return t;{const d=new iL(i,t,r),f=t.eventCache.getNode();let m;if(An(e)||".priority"===Sn(e)){let y;if(t.serverCache.isFullyInitialized())y=Vx(i,qv(t));else{const C=t.serverCache.getNode();(0,B.hu)(C instanceof _n,"serverChildren would be complete if leaf node"),y=tL(i,C)}m=n.filter.updateFullNode(f,y,s)}else{const y=Sn(e);let C=nL(i,y,t.serverCache);null==C&&t.serverCache.isCompleteForChild(y)&&(C=f.getImmediateChild(y)),m=null!=C?n.filter.updateChild(f,y,C,Bi(e),d,s):t.eventCache.getNode().hasChild(y)?n.filter.updateChild(f,y,_n.EMPTY_NODE,Bi(e),d,s):f,m.isEmpty()&&t.serverCache.isFullyInitialized()&&(l=Vx(i,qv(t)),l.isLeafNode()&&(m=n.filter.updateFullNode(m,l,s)))}return l=t.serverCache.isFullyInitialized()||null!=Ux(i,ti()),HI(t,m,l,n.filter.filtersNodes())}}(n,t,m.path,i,r,s):function Rq(n,t,e,i,r,s,l){if(null!=Ux(r,e))return t;const d=t.serverCache.isFiltered(),f=t.serverCache;if(null!=i.value){if(An(e)&&f.isFullyInitialized()||f.isCompleteForPath(e))return Hx(n,t,e,f.getNode().getChild(e),r,s,d,l);if(An(e)){let m=new Zi(null);return f.getNode().forEachChild(Yd,(y,C)=>{m=m.set(new yi(y),C)}),sL(n,t,e,m,r,s,d,l)}return t}{let m=new Zi(null);return i.foreach((y,C)=>{const A=yr(e,y);f.isCompleteForPath(A)&&(m=m.set(y,f.getNode().getChild(A)))}),sL(n,t,e,m,r,s,d,l)}}(n,t,m.path,m.affectedTree,i,r,s)}else{if(e.type!==Zd.LISTEN_COMPLETE)throw(0,B.g5)("Unknown operation type: "+e.type);l=function Oq(n,t,e,i,r){const s=t.serverCache;return $H(n,kH(t,s.getNode(),s.isFullyInitialized()||An(e),s.isFiltered()),e,i,GH,r)}(n,t,e.path,i,s)}const f=s.getChanges();return function Nq(n,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=Lx(n);(e.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&e.push(NH(Lx(t)))}}(t,l,f),{viewCache:l,changes:f}}(n.processor_,r,t,e,i);return function Aq(n,t){(0,B.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,B.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,B.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,KH(n,s.changes,s.viewCache.eventCache.getNode(),null)}function KH(n,t,e,i){return function aq(n,t,e,i){const r=[],s=[];return t.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&s.push(function q5(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(l.childName,l.snapshotNode))}),UI(n,r,"child_removed",t,i,e),UI(n,r,"child_added",t,i,e),UI(n,r,"child_moved",s,i,e),UI(n,r,"child_changed",t,i,e),UI(n,r,"value",t,i,e),r}(n.eventGenerator_,t,e,i?[i]:n.eventRegistrations_)}let jx,$x;class QH{constructor(){this.views=new Map}}function oL(n,t,e,i){const r=t.source.queryId;if(null!==r){const s=n.views.get(r);return(0,B.hu)(null!=s,"SyncTree gave us an op for an invalid query."),ZH(s,t,e,i)}{let s=[];for(const l of n.views.values())s=s.concat(ZH(l,t,e,i));return s}}function JH(n,t,e,i,r){const l=n.views.get(t._queryIdentifier);if(!l){let d=Vx(e,r?i:null),f=!1;d?f=!0:i instanceof _n?(d=tL(e,i),f=!1):(d=_n.EMPTY_NODE,f=!1);const m=Fx(new lm(d,f,!1),new lm(i,r,!1));return new Pq(t,m)}return l}function XH(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function um(n,t){let e=null;for(const i of n.views.values())e=e||Bq(i,t);return e}function e3(n,t){return t._queryParams.loadsAllData()?Gx(n):n.views.get(t._queryIdentifier)}function t3(n,t){return null!=e3(n,t)}function dm(n){return null!=Gx(n)}function Gx(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let Yq=1;class n3{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Zi(null),this.pendingWriteTree_=function Eq(){return{visibleWrites:mu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function aL(n,t,e,i,r){return function dq(n,t,e,i,r){(0,B.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:r}),r&&(n.visibleWrites=jI(n.visibleWrites,t,e)),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i,r),r?Bb(n,new Wv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function hm(n,t,e=!1){const i=function fq(n,t){for(let e=0;e<n.allWrites.length;e++){const i=n.allWrites[e];if(i.writeId===t)return i}return null}(n.pendingWriteTree_,t);if(function pq(n,t){const e=n.allWrites.findIndex(d=>d.writeId===t);(0,B.hu)(e>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[e];n.allWrites.splice(e,1);let r=i.visible,s=!1,l=n.allWrites.length-1;for(;r&&l>=0;){const d=n.allWrites[l];d.visible&&(l>=e&&gq(d,i.path)?r=!1:uc(i.path,d.path)&&(s=!0)),l--}return!!r&&(s?(function mq(n){n.visibleWrites=BH(n.allWrites,_q,ti()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=PH(n.visibleWrites,i.path):Ys(i.children,f=>{n.visibleWrites=PH(n.visibleWrites,yr(i.path,f))}),!0))}(n.pendingWriteTree_,t)){let s=new Zi(null);return null!=i.snap?s=s.set(ti(),!0):Ys(i.children,l=>{s=s.set(new yi(l),!0)}),Bb(n,new Px(i.path,s,e))}return[]}function GI(n,t,e){return Bb(n,new Wv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function zx(n,t,e,i,r=!1){const s=t._path,l=n.syncPointTree_.get(s);let d=[];if(l&&("default"===t._queryIdentifier||t3(l,t))){const f=function zq(n,t,e,i){const r=t._queryIdentifier,s=[];let l=[];const d=dm(n);if("default"===r)for(const[f,m]of n.views.entries())l=l.concat(YH(m,e,i)),qH(m)&&(n.views.delete(f),m.query._queryParams.loadsAllData()||s.push(m.query));else{const f=n.views.get(r);f&&(l=l.concat(YH(f,e,i)),qH(f)&&(n.views.delete(r),f.query._queryParams.loadsAllData()||s.push(f.query)))}return d&&!dm(n)&&s.push(new(function jq(){return(0,B.hu)(jx,"Reference.ts has not been loaded"),jx}())(t._repo,t._path)),{removed:s,events:l}}(l,t,e,i);(function Gq(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const m=f.removed;if(d=f.events,!r){const y=-1!==m.findIndex(A=>A._queryParams.loadsAllData()),C=n.syncPointTree_.findOnPath(s,(A,x)=>dm(x));if(y&&!C){const A=n.syncPointTree_.subtree(s);if(!A.isEmpty()){const x=function t8(n){return n.fold((t,e,i)=>{if(e&&dm(e))return[Gx(e)];{let r=[];return e&&(r=XH(e)),Ys(i,(s,l)=>{r=r.concat(l)}),r}})}(A);for(let P=0;P<x.length;++P){const F=x[P],U=F.query,ee=o3(n,F);n.listenProvider_.startListening(zI(U),$I(n,U),ee.hashFn,ee.onComplete)}}}!C&&m.length>0&&!i&&(y?n.listenProvider_.stopListening(zI(t),null):m.forEach(A=>{const x=n.queryToTagMap.get(qx(A));n.listenProvider_.stopListening(zI(A),x)}))}!function n8(n,t){for(let e=0;e<t.length;++e){const i=t[e];if(!i._queryParams.loadsAllData()){const r=qx(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,m)}return d}function i3(n,t,e,i){const r=cL(n,i);if(null!=r){const s=uL(r),l=s.path,d=s.queryId,f=ia(l,t);return dL(n,l,new Wv(KF(d),f,e))}return[]}function lL(n,t,e,i=!1){const r=t._path;let s=null,l=!1;n.syncPointTree_.foreachOnPath(r,(A,x)=>{const P=ia(A,r);s=s||um(x,P),l=l||dm(x)});let f,d=n.syncPointTree_.get(r);d?(l=l||dm(d),s=s||um(d,ti())):(d=new QH,n.syncPointTree_=n.syncPointTree_.set(r,d)),null!=s?f=!0:(f=!1,s=_n.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((x,P)=>{const F=um(P,ti());F&&(s=s.updateImmediateChild(x,F))}));const m=t3(d,t);if(!m&&!t._queryParams.loadsAllData()){const A=qx(t);(0,B.hu)(!n.queryToTagMap.has(A),"View does not exist, but we have a tag");const x=function i8(){return Yq++}();n.queryToTagMap.set(A,x),n.tagToQueryMap.set(x,A)}let C=function $q(n,t,e,i,r,s){const l=JH(n,t,i,r,s);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,l),function Vq(n,t){n.eventRegistrations_.push(t)}(l,e),function Uq(n,t){const e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Yi,(s,l)=>{i.push(kb(s,l))}),e.isFullyInitialized()&&i.push(NH(e.getNode())),KH(n,i,e.getNode(),t)}(l,e)}(d,t,e,Bx(n.pendingWriteTree_,r),s,f);if(!m&&!l&&!i){const A=e3(d,t);C=C.concat(function r8(n,t,e){const i=t._path,r=$I(n,t),s=o3(n,e),l=n.listenProvider_.startListening(zI(t),r,s.hashFn,s.onComplete),d=n.syncPointTree_.subtree(i);if(r)(0,B.hu)(!dm(d.value),"If we're adding a query, it shouldn't be shadowed");else{const f=d.fold((m,y,C)=>{if(!An(m)&&y&&dm(y))return[Gx(y).query];{let A=[];return y&&(A=A.concat(XH(y).map(x=>x.query))),Ys(C,(x,P)=>{A=A.concat(P)}),A}});for(let m=0;m<f.length;++m){const y=f[m];n.listenProvider_.stopListening(zI(y),$I(n,y))}}return l}(n,t,A))}return C}function Wx(n,t,e){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(t,(l,d)=>{const m=um(d,ia(l,t));if(m)return m});return VH(r,t,s,e,!0)}function Bb(n,t){return r3(t,n.syncPointTree_,null,Bx(n.pendingWriteTree_,ti()))}function r3(n,t,e,i){if(An(n.path))return s3(n,t,e,i);{const r=t.get(ti());null==e&&null!=r&&(e=um(r,ti()));let s=[];const l=Sn(n.path),d=n.operationForChild(l),f=t.children.get(l);if(f&&d){const m=e?e.getImmediateChild(l):null,y=HH(i,l);s=s.concat(r3(d,f,m,y))}return r&&(s=s.concat(oL(r,n,i,e))),s}}function s3(n,t,e,i){const r=t.get(ti());null==e&&null!=r&&(e=um(r,ti()));let s=[];return t.children.inorderTraversal((l,d)=>{const f=e?e.getImmediateChild(l):null,m=HH(i,l),y=n.operationForChild(l);y&&(s=s.concat(s3(y,d,f,m)))}),r&&(s=s.concat(oL(r,n,i,e))),s}function o3(n,t){const e=t.query,i=$I(n,e);return{hashFn:()=>(function Fq(n){return n.viewCache_.serverCache.getNode()}(t)||_n.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function Jq(n,t,e){const i=cL(n,e);if(i){const r=uL(i),s=r.path,l=r.queryId,d=ia(s,t);return dL(n,s,new VI(KF(l),d))}return[]}(n,e._path,i):function Qq(n,t){return Bb(n,new VI({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const s=function KW(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}(r,e);return zx(n,e,null,s)}}}}function $I(n,t){const e=qx(t);return n.queryToTagMap.get(e)}function qx(n){return n._path.toString()+"$"+n._queryIdentifier}function cL(n,t){return n.tagToQueryMap.get(t)}function uL(n){const t=n.indexOf("$");return(0,B.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new yi(n.substr(0,t))}}function dL(n,t,e){const i=n.syncPointTree_.get(t);return(0,B.hu)(i,"Missing sync point for query tag that we're tracking"),oL(i,e,Bx(n.pendingWriteTree_,t),null)}function zI(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function qq(){return(0,B.hu)($x,"Reference.ts has not been loaded"),$x}())(n._repo,n._path):n}class hL{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new hL(e)}node(){return this.node_}}class fL{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=yr(this.path_,t);return new fL(this.syncTree_,e)}node(){return Wx(this.syncTree_,this.path_)}}const s8=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},a3=function(n,t,e){return n&&"object"==typeof n?((0,B.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?o8(n[".sv"],t,e):"object"==typeof n[".sv"]?a8(n[".sv"],t):void(0,B.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},o8=function(n,t,e){if("timestamp"===n)return e.timestamp;(0,B.hu)(!1,"Unexpected server value: "+n)},a8=function(n,t,e){n.hasOwnProperty("increment")||(0,B.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,B.hu)(!1,"Unexpected increment value: "+i);const r=t.node();if((0,B.hu)(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const l=r.getValue();return"number"!=typeof l?i:l+i},l3=function(n,t,e,i){return gL(t,new fL(e,n),i)},pL=function(n,t,e){return gL(n,new hL(t),e)};function gL(n,t,e){const i=n.getPriority().val(),r=a3(i,t.getImmediateChild(".priority"),e);let s;if(n.isLeafNode()){const l=n,d=a3(l.getValue(),t,e);return d!==l.getValue()||r!==l.getPriority().val()?new Rb(d,Or(r)):n}{const l=n;return s=l,r!==l.getPriority().val()&&(s=s.updatePriority(new Rb(r))),l.forEachChild(Yi,(d,f)=>{const m=gL(f,t.getImmediateChild(d),e);m!==f&&(s=s.updateImmediateChild(d,m))}),s}}class mL{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function Yx(n,t){let e=t instanceof yi?t:new yi(t),i=n,r=Sn(e);for(;null!==r;){const s=(0,B.DV)(i.node.children,r)||{children:{},childCount:0};i=new mL(r,i,s),e=Bi(e),r=Sn(e)}return i}function Zv(n){return n.node.value}function _L(n,t){n.node.value=t,vL(n)}function c3(n){return n.node.childCount>0}function Zx(n,t){Ys(n.node.children,(e,i)=>{t(new mL(e,n,i))})}function u3(n,t,e,i){e&&!i&&t(n),Zx(n,r=>{u3(r,t,!0,i)}),e&&i&&t(n)}function WI(n){return new yi(null===n.parent?n.name:WI(n.parent)+"/"+n.name)}function vL(n){null!==n.parent&&function u8(n,t,e){const i=function l8(n){return void 0===Zv(n)&&!c3(n)}(e),r=(0,B.r3)(n.node.children,t);i&&r?(delete n.node.children[t],n.node.childCount--,vL(n)):!i&&!r&&(n.node.children[t]=e.node,n.node.childCount++,vL(n))}(n.parent,n.name,n)}const d8=/[\[\].#$\/\u0000-\u001F\u007F]/,h8=/[\[\].#$\u0000-\u001F\u007F]/,yL=10485760,Kx=function(n){return"string"==typeof n&&0!==n.length&&!d8.test(n)},d3=function(n){return"string"==typeof n&&0!==n.length&&!h8.test(n)},qI=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Ex(n)||n&&"object"==typeof n&&(0,B.r3)(n,".sv")},Kd=function(n,t,e,i){i&&void 0===t||YI((0,B.gK)(n,"value"),t,e)},YI=function(n,t,e){const i=e instanceof yi?new M5(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+$v(i));if("function"==typeof t)throw new Error(n+"contains a function "+$v(i)+" with contents = "+t.toString());if(Ex(t))throw new Error(n+"contains "+t.toString()+" "+$v(i));if("string"==typeof t&&t.length>yL/3&&(0,B.ug)(t)>yL)throw new Error(n+"contains a string greater than "+yL+" utf8 bytes "+$v(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let r=!1,s=!1;if(Ys(t,(l,d)=>{if(".value"===l)r=!0;else if(".priority"!==l&&".sv"!==l&&(s=!0,!Kx(l)))throw new Error(n+" contains an invalid key ("+l+") "+$v(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function N5(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,B.ug)(t),bH(n)})(i,l),YI(n,d,i),function x5(n){const t=n.parts_.pop();n.byteLength_-=(0,B.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+$v(i)+" in addition to actual children.")}},h3=function(n,t,e,i){if(i&&void 0===t)return;const r=(0,B.gK)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");const s=[];Ys(t,(l,d)=>{const f=new yi(l);if(YI(r,d,yr(e,f)),".priority"===PF(f)&&!qI(d))throw new Error(r+"contains an invalid value for '"+f.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(f)}),function(n,t){let e,i;for(e=0;e<t.length;e++){i=t[e];const s=RI(i);for(let l=0;l<s.length;l++)if((".priority"!==s[l]||l!==s.length-1)&&!Kx(s[l]))throw new Error(n+"contains an invalid key ("+s[l]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(A5);let r=null;for(e=0;e<t.length;e++){if(i=t[e],null!==r&&uc(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},wL=function(n,t,e){if(!e||void 0!==t){if(Ex(t))throw new Error((0,B.gK)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!qI(t))throw new Error((0,B.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ZI=function(n,t,e,i){if(!(i&&void 0===e||Kx(e)))throw new Error((0,B.gK)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},KI=function(n,t,e,i){if(!(i&&void 0===e||d3(e)))throw new Error((0,B.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},g8=function(n,t,e,i){e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),KI(n,t,e,i)},dc=function(n,t){if(".info"===Sn(t))throw new Error(n+" failed = Can't modify data under /.info/")},f3=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!Kx(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),d3(n)}(e))throw new Error((0,B.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class m8{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Qx(n,t){let e=null;for(let i=0;i<t.length;i++){const r=t[i],s=r.getPath();null!==e&&!FF(s,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:s}),e.events.push(r)}e&&n.eventLists_.push(e)}function p3(n,t,e){Qx(n,e),g3(n,i=>FF(i,t))}function dl(n,t,e){Qx(n,e),g3(n,i=>uc(i,t)||uc(t,i))}function g3(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(t(r.path)?(_8(n.eventLists_[i]),n.eventLists_[i]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function _8(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const i=e.getEventRunner();jv&&qs("event: "+e.toString()),Nb(i)}}}const m3="repo_interrupt",v8=25;class y8{constructor(t,e,i,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new m8,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=kx(),this.transactionQueueTree_=new mL,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function _3(n){const e=n.infoData_.getNode(new yi(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function QI(n){return s8({timestamp:_3(n)})}function v3(n,t,e,i,r){n.dataUpdateCount++;const s=new yi(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let l=[];if(r)if(i){const f=(0,B.UI)(e,m=>Or(m));l=function Xq(n,t,e,i){const r=cL(n,i);if(r){const s=uL(r),l=s.path,d=s.queryId,f=ia(l,t),m=Zi.fromObject(e);return dL(n,l,new Fb(KF(d),f,m))}return[]}(n.serverSyncTree_,s,f,r)}else{const f=Or(e);l=i3(n.serverSyncTree_,s,f,r)}else if(i){const f=(0,B.UI)(e,m=>Or(m));l=function Kq(n,t,e){const i=Zi.fromObject(e);return Bb(n,new Fb({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,s,f)}else{const f=Or(e);l=GI(n.serverSyncTree_,s,f)}let d=s;l.length>0&&(d=Ub(n,s)),dl(n.eventQueue_,d,l)}function y3(n,t){bL(n,"connected",t),!1===t&&function C8(n){Vb(n,"onDisconnectEvents");const t=QI(n),e=kx();qF(n.onDisconnect_,ti(),(r,s)=>{const l=l3(r,s,n.serverSyncTree_,t);Pb(e,r,l)});let i=[];qF(e,ti(),(r,s)=>{i=i.concat(GI(n.serverSyncTree_,r,s));const l=TL(n,r);Ub(n,l)}),n.onDisconnect_=kx(),dl(n.eventQueue_,ti(),i)}(n)}function bL(n,t,e){const i=new yi("/.info/"+t),r=Or(e);n.infoData_.updateSnapshot(i,r);const s=GI(n.infoSyncTree_,i,r);dl(n.eventQueue_,i,s)}function Jx(n){return n.nextWriteId_++}function DL(n,t,e,i,r){Vb(n,"set",{path:t.toString(),value:e,priority:i});const s=QI(n),l=Or(e,i),d=Wx(n.serverSyncTree_,t),f=pL(l,d,s),m=Jx(n),y=aL(n.serverSyncTree_,t,f,m,!0);Qx(n.eventQueue_,y),n.server_.put(t.toString(),l.val(!0),(A,x)=>{const P="ok"===A;P||Fo("set at "+t+" failed: "+A);const F=hm(n.serverSyncTree_,m,!P);dl(n.eventQueue_,t,F),fm(0,r,A,x)});const C=TL(n,t);Ub(n,C),dl(n.eventQueue_,C,[])}function T8(n,t,e){n.server_.onDisconnectCancel(t.toString(),(i,r)=>{"ok"===i&&WF(n.onDisconnect_,t),fm(0,e,i,r)})}function w3(n,t,e,i){const r=Or(e);n.server_.onDisconnectPut(t.toString(),r.val(!0),(s,l)=>{"ok"===s&&Pb(n.onDisconnect_,t,r),fm(0,i,s,l)})}function EL(n,t,e){let i;i=".info"===Sn(t._path)?zx(n.infoSyncTree_,t,e):zx(n.serverSyncTree_,t,e),p3(n.eventQueue_,t._path,i)}function b3(n){n.persistentConnection_&&n.persistentConnection_.interrupt(m3)}function Vb(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),qs(e,...t)}function fm(n,t,e,i){t&&Nb(()=>{if("ok"===e)t(null);else{const r=(e||"error").toUpperCase();let s=r;i&&(s+=": "+i);const l=new Error(s);l.code=r,t(l)}})}function CL(n,t,e){return Wx(n.serverSyncTree_,t,e)||_n.EMPTY_NODE}function Xx(n,t=n.transactionQueueTree_){if(t||eR(n,t),Zv(t)){const e=E3(n,t);(0,B.hu)(e.length>0,"Sending zero length transaction queue"),e.every(r=>0===r.status)&&function x8(n,t,e){const i=e.map(m=>m.currentWriteId),r=CL(n,t,i);let s=r;const l=r.hash();for(let m=0;m<e.length;m++){const y=e[m];(0,B.hu)(0===y.status,"tryToSendTransactionQueue_: items in queue should all be run."),y.status=1,y.retryCount++;const C=ia(t,y.path);s=s.updateChild(C,y.currentOutputSnapshotRaw)}const d=s.val(!0),f=t;n.server_.put(f.toString(),d,m=>{Vb(n,"transaction put response",{path:f.toString(),status:m});let y=[];if("ok"===m){const C=[];for(let A=0;A<e.length;A++)e[A].status=2,y=y.concat(hm(n.serverSyncTree_,e[A].currentWriteId)),e[A].onComplete&&C.push(()=>e[A].onComplete(null,!0,e[A].currentOutputSnapshotResolved)),e[A].unwatcher();eR(n,Yx(n.transactionQueueTree_,t)),Xx(n,n.transactionQueueTree_),dl(n.eventQueue_,t,y);for(let A=0;A<C.length;A++)Nb(C[A])}else{if("datastale"===m)for(let C=0;C<e.length;C++)e[C].status=3===e[C].status?4:0;else{Fo("transaction at "+f.toString()+" failed: "+m);for(let C=0;C<e.length;C++)e[C].status=4,e[C].abortReason=m}Ub(n,t)}},l)}(n,WI(t),e)}else c3(t)&&Zx(t,e=>{Xx(n,e)})}function Ub(n,t){const e=D3(n,t),i=WI(e);return function R8(n,t,e){if(0===t.length)return;const i=[];let r=[];const l=t.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<t.length;d++){const f=t[d],m=ia(e,f.path);let C,y=!1;if((0,B.hu)(null!==m,"rerunTransactionsUnderNode_: relativePath should not be null."),4===f.status)y=!0,C=f.abortReason,r=r.concat(hm(n.serverSyncTree_,f.currentWriteId,!0));else if(0===f.status)if(f.retryCount>=v8)y=!0,C="maxretry",r=r.concat(hm(n.serverSyncTree_,f.currentWriteId,!0));else{const A=CL(n,f.path,l);f.currentInputSnapshot=A;const x=t[d].update(A.val());if(void 0!==x){YI("transaction failed: Data returned ",x,f.path);let P=Or(x);"object"==typeof x&&null!=x&&(0,B.r3)(x,".priority")||(P=P.updatePriority(A.getPriority()));const U=f.currentWriteId,ee=QI(n),oe=pL(P,A,ee);f.currentOutputSnapshotRaw=P,f.currentOutputSnapshotResolved=oe,f.currentWriteId=Jx(n),l.splice(l.indexOf(U),1),r=r.concat(aL(n.serverSyncTree_,f.path,oe,f.currentWriteId,f.applyLocally)),r=r.concat(hm(n.serverSyncTree_,U,!0))}else y=!0,C="nodata",r=r.concat(hm(n.serverSyncTree_,f.currentWriteId,!0))}dl(n.eventQueue_,e,r),r=[],y&&(t[d].status=2,setTimeout(t[d].unwatcher,Math.floor(0)),t[d].onComplete&&i.push("nodata"===C?()=>t[d].onComplete(null,!1,t[d].currentInputSnapshot):()=>t[d].onComplete(new Error(C),!1,null)))}eR(n,n.transactionQueueTree_);for(let d=0;d<i.length;d++)Nb(i[d]);Xx(n,n.transactionQueueTree_)}(n,E3(n,e),i),i}function D3(n,t){let e,i=n.transactionQueueTree_;for(e=Sn(t);null!==e&&void 0===Zv(i);)i=Yx(i,e),e=Sn(t=Bi(t));return i}function E3(n,t){const e=[];return C3(n,t,e),e.sort((i,r)=>i.order-r.order),e}function C3(n,t,e){const i=Zv(t);if(i)for(let r=0;r<i.length;r++)e.push(i[r]);Zx(t,r=>{C3(n,r,e)})}function eR(n,t){const e=Zv(t);if(e){let i=0;for(let r=0;r<e.length;r++)2!==e[r].status&&(e[i]=e[r],i++);e.length=i,_L(t,e.length>0?e:void 0)}Zx(t,i=>{eR(n,i)})}function TL(n,t){const e=WI(D3(n,t)),i=Yx(n.transactionQueueTree_,t);return function c8(n,t,e){let i=e?n:n.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,r=>{IL(n,r)}),IL(n,i),u3(i,r=>{IL(n,r)}),e}function IL(n,t){const e=Zv(t);if(e){const i=[];let r=[],s=-1;for(let l=0;l<e.length;l++)3===e[l].status||(1===e[l].status?((0,B.hu)(s===l-1,"All SENT items should be at beginning of queue."),s=l,e[l].status=3,e[l].abortReason="set"):((0,B.hu)(0===e[l].status,"Unexpected transaction status in abort"),e[l].unwatcher(),r=r.concat(hm(n.serverSyncTree_,e[l].currentWriteId,!0)),e[l].onComplete&&i.push(e[l].onComplete.bind(null,new Error("set"),!1,null))));-1===s?_L(t,void 0):e.length=s+1,dl(n.eventQueue_,WI(t),r);for(let l=0;l<i.length;l++)Nb(i[l])}}const SL=function(n,t){const e=P8(n),i=e.namespace;return"firebase.com"===e.domain&&qd(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==e.domain&&qd("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Fo("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new MF(e.host,e.secure,i,"ws"===e.scheme||"wss"===e.scheme,t,"",i!==e.subdomain),path:new yi(e.pathString)}},P8=function(n){let t="",e="",i="",r="",s="",l=!0,d="https",f=443;if("string"==typeof n){let m=n.indexOf("//");m>=0&&(d=n.substring(0,m-1),n=n.substring(m+2));let y=n.indexOf("/");-1===y&&(y=n.length);let C=n.indexOf("?");-1===C&&(C=n.length),t=n.substring(0,Math.min(y,C)),y<C&&(r=function O8(n){let t="";const e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let r=e[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}(n.substring(y,C)));const A=function k8(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const i=e.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Fo(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,C)));m=t.indexOf(":"),m>=0?(l="https"===d||"wss"===d,f=parseInt(t.substring(m+1),10)):m=t.length;const x=t.slice(0,m);if("localhost"===x.toLowerCase())e="localhost";else if(x.split(".").length<=2)e=x;else{const P=t.indexOf(".");i=t.substring(0,P).toLowerCase(),e=t.substring(P+1),s=i}"ns"in A&&(s=A.ns)}return{host:t,port:f,domain:e,subdomain:i,secure:l,scheme:d,pathString:r,namespace:s}},T3="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",F8=function(){let n=0;const t=[];return function(e){const i=e===n;let r;n=e;const s=new Array(8);for(r=7;r>=0;r--)s[r]=T3.charAt(e%64),e=Math.floor(e/64);(0,B.hu)(0===e,"Cannot push at time == 0");let l=s.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)l+=T3.charAt(t[r]);return(0,B.hu)(20===l.length,"nextPushId: Length should be 20."),l}}();class I3{constructor(t,e,i,r){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=r}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,B.Wl)(this.snapshot.exportVal())}}class S3{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class AL{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,B.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class A3{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new B.BH;return T8(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){dc("OnDisconnect.remove",this._path);const t=new B.BH;return w3(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){dc("OnDisconnect.set",this._path),Kd("OnDisconnect.set",t,this._path,!1);const e=new B.BH;return w3(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){dc("OnDisconnect.setWithPriority",this._path),Kd("OnDisconnect.setWithPriority",t,this._path,!1),wL("OnDisconnect.setWithPriority",e,!1);const i=new B.BH;return function I8(n,t,e,i,r){const s=Or(e,i);n.server_.onDisconnectPut(t.toString(),s.val(!0),(l,d)=>{"ok"===l&&Pb(n.onDisconnect_,t,s),fm(0,r,l,d)})}(this._repo,this._path,t,e,i.wrapCallback(()=>{})),i.promise}update(t){dc("OnDisconnect.update",this._path),h3("OnDisconnect.update",t,this._path,!1);const e=new B.BH;return function S8(n,t,e,i){if((0,B.xb)(e))return qs("onDisconnect().update() called with empty data.  Don't do anything."),void fm(0,i,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(r,s)=>{"ok"===r&&Ys(e,(l,d)=>{const f=Or(d);Pb(n.onDisconnect_,yr(t,l),f)}),fm(0,i,r,s)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class Sa{constructor(t,e,i,r){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=r}get key(){return An(this._path)?null:PF(this._path)}get ref(){return new hc(this._repo,this._path)}get _queryIdentifier(){const t=RH(this._queryParams),e=SF(t);return"{}"===e?"default":e}get _queryObject(){return RH(this._queryParams)}isEqual(t){if(!((t=(0,B.m9)(t))instanceof Sa))return!1;const e=this._repo===t._repo,i=FF(this._path,t._path);return e&&i&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function S5(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function tR(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function pm(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===Yd){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==sm)throw new Error(i);if("string"!=typeof t)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==Hf)throw new Error(i);if("string"!=typeof e)throw new Error(r)}}else if(n.getIndex()===Yi){if(null!=t&&!qI(t)||null!=e&&!qI(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,B.hu)(n.getIndex()instanceof HF||n.getIndex()===jF,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function nR(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class hc extends Sa{constructor(t,e){super(t,e,new xx,!1)}get parent(){const t=wH(this._path);return null===t?null:new hc(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class Kv{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new yi(t),i=Qv(this.ref,t);return new Kv(this._node.getChild(e),i,Yi)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>t(new Kv(r,Qv(this.ref,i),Yi)))}hasChild(t){const e=new yi(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function M3(n,t){return(n=(0,B.m9)(n))._checkNotDeleted("ref"),void 0!==t?Qv(n._root,t):n._root}function N3(n,t){(n=(0,B.m9)(n))._checkNotDeleted("refFromURL");const e=SL(t,n._repo.repoInfo_.nodeAdmin);f3("refFromURL",e);const i=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&qd("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),M3(n,e.path.toString())}function Qv(n,t){return null===Sn((n=(0,B.m9)(n))._path)?g8("child","path",t,!1):KI("child","path",t,!1),new hc(n._repo,yr(n._path,t))}function ML(n,t){n=(0,B.m9)(n),dc("set",n._path),Kd("set",t,n._path,!1);const e=new B.BH;return DL(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function H8(n,t){h3("update",t,n._path,!1);const e=new B.BH;return function E8(n,t,e,i){Vb(n,"update",{path:t.toString(),value:e});let r=!0;const s=QI(n),l={};if(Ys(e,(d,f)=>{r=!1,l[d]=l3(yr(t,d),Or(f),n.serverSyncTree_,s)}),r)qs("update() called with empty data.  Don't do anything."),fm(0,i,"ok",void 0);else{const d=Jx(n),f=function Zq(n,t,e,i){!function hq(n,t,e,i){(0,B.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:i,visible:!0}),n.visibleWrites=JF(n.visibleWrites,t,e),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i);const r=Zi.fromObject(e);return Bb(n,new Fb({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r))}(n.serverSyncTree_,t,l,d);Qx(n.eventQueue_,f),n.server_.merge(t.toString(),e,(m,y)=>{const C="ok"===m;C||Fo("update at "+t+" failed: "+m);const A=hm(n.serverSyncTree_,d,!C),x=A.length>0?Ub(n,t):t;dl(n.eventQueue_,x,A),fm(0,i,m,y)}),Ys(e,m=>{const y=TL(n,yr(t,m));Ub(n,y)}),dl(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function j8(n){n=(0,B.m9)(n);const t=new AL(()=>{}),e=new JI(t);return function D8(n,t,e){const i=function e8(n,t){const e=t._path;let i=null;n.syncPointTree_.foreachOnPath(e,(m,y)=>{const C=ia(m,e);i=i||um(y,C)});let r=n.syncPointTree_.get(e);r?i=i||um(r,ti()):(r=new QH,n.syncPointTree_=n.syncPointTree_.set(e,r));const s=null!=i,l=s?new lm(i,!0,!1):null;return function Lq(n){return Lx(n.viewCache_)}(JH(r,t,Bx(n.pendingWriteTree_,t._path),s?l.getNode():_n.EMPTY_NODE,s))}(n.serverSyncTree_,t);return null!=i?Promise.resolve(i):n.server_.get(t).then(r=>{const s=Or(r).withIndex(t._queryParams.getIndex());let l;if(lL(n.serverSyncTree_,t,e,!0),t._queryParams.loadsAllData())l=GI(n.serverSyncTree_,t._path,s);else{const d=$I(n.serverSyncTree_,t);l=i3(n.serverSyncTree_,t._path,s,d)}return dl(n.eventQueue_,t._path,l),zx(n.serverSyncTree_,t,e,null,!0),s},r=>(Vb(n,"get for query "+(0,B.Wl)(t)+" failed: "+r),Promise.reject(new Error(r))))}(n._repo,n,e).then(i=>new Kv(i,new hc(n._repo,n._path),n._queryParams.getIndex()))}class JI{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const i=e._queryParams.getIndex();return new I3("value",this,new Kv(t.snapshotNode,new hc(e._repo,e._path),i))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new S3(this,t,e):null}matches(t){return t instanceof JI&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class iR{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new S3(this,t,e):null}createEvent(t,e){(0,B.hu)(null!=t.childName,"Child events should have a childName.");const i=Qv(new hc(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new I3(t.type,this,new Kv(t.snapshotNode,i,r),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof iR&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function XI(n,t,e,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const f=e,m=(y,C)=>{EL(n._repo,n,d),f(y,C)};m.userCallback=e.userCallback,m.context=e.context,e=m}const l=new AL(e,s||void 0),d="value"===t?new JI(l):new iR(t,l);return function A8(n,t,e){let i;i=".info"===Sn(t._path)?lL(n.infoSyncTree_,t,e):lL(n.serverSyncTree_,t,e),p3(n.eventQueue_,t._path,i)}(n._repo,n,d),()=>EL(n._repo,n,d)}function NL(n,t,e,i){return XI(n,"value",t,e,i)}function x3(n,t,e,i){return XI(n,"child_added",t,e,i)}function R3(n,t,e,i){return XI(n,"child_changed",t,e,i)}function O3(n,t,e,i){return XI(n,"child_moved",t,e,i)}function k3(n,t,e,i){return XI(n,"child_removed",t,e,i)}function P3(n,t,e){let i=null;const r=e?new AL(e):null;"value"===t?i=new JI(r):t&&(i=new iR(t,r)),EL(n._repo,n,i)}class _u{}class F3 extends _u{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Kd("endAt",this._value,t._path,!0);const e=zF(t._queryParams,this._value,this._key);if(nR(e),pm(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Sa(t._repo,t._path,e,t._orderByCalled)}}class $8 extends _u{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Kd("endBefore",this._value,t._path,!1);const e=function X5(n,t,e){let i;return i=zF(n,t,n.index_===Yd||e?e:sm),i.endBeforeSet_=!0,i}(t._queryParams,this._value,this._key);if(nR(e),pm(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Sa(t._repo,t._path,e,t._orderByCalled)}}class L3 extends _u{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Kd("startAt",this._value,t._path,!0);const e=$F(t._queryParams,this._value,this._key);if(nR(e),pm(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Sa(t._repo,t._path,e,t._orderByCalled)}}class q8 extends _u{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Kd("startAfter",this._value,t._path,!1);const e=function J5(n,t,e){let i;return i=$F(n,t,n.index_===Yd||e?e:Hf),i.startAfterSet_=!0,i}(t._queryParams,this._value,this._key);if(nR(e),pm(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Sa(t._repo,t._path,e,t._orderByCalled)}}class Z8 extends _u{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Sa(t._repo,t._path,function K5(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class Q8 extends _u{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Sa(t._repo,t._path,function Q5(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class X8 extends _u{constructor(t){super(),this._path=t}_apply(t){tR(t,"orderByChild");const e=new yi(this._path);if(An(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new HF(e),r=Rx(t._queryParams,i);return pm(r),new Sa(t._repo,t._path,r,!0)}}class t9 extends _u{_apply(t){tR(t,"orderByKey");const e=Rx(t._queryParams,Yd);return pm(e),new Sa(t._repo,t._path,e,!0)}}class i9 extends _u{_apply(t){tR(t,"orderByPriority");const e=Rx(t._queryParams,Yi);return pm(e),new Sa(t._repo,t._path,e,!0)}}class s9 extends _u{_apply(t){tR(t,"orderByValue");const e=Rx(t._queryParams,jF);return pm(e),new Sa(t._repo,t._path,e,!0)}}class a9 extends _u{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(Kd("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new F3(this._value,this._key)._apply(new L3(this._value,this._key)._apply(t))}}function vu(n,...t){let e=(0,B.m9)(n);for(const i of t)e=i._apply(e);return e}(function Hq(n){(0,B.hu)(!jx,"__referenceConstructor has already been defined"),jx=n})(hc),function Wq(n){(0,B.hu)(!$x,"__referenceConstructor has already been defined"),$x=n}(hc);const xL={};function V3(n,t,e,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||qd("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),qs("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let f,m,l=SL(s,r),d=l.repoInfo;typeof process<"u"&&process.env&&(m=process.env.FIREBASE_DATABASE_EMULATOR_HOST),m?(f=!0,s=`http://${m}?ns=${d.namespace}`,l=SL(s,r),d=l.repoInfo):f=!l.repoInfo.secure;const y=r&&f?new xI(xI.OWNER):new n5(n.name,n.options,t);f3("Invalid Firebase Database URL",l),An(l.path)||qd("Database URL must point to the root of a Firebase Database (not including a child path).");const C=function h9(n,t,e,i){let r=xL[t.name];r||(r={},xL[t.name]=r);let s=r[n.toURLString()];return s&&qd("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new y8(n,false,e,i),r[n.toURLString()]=s,s}(d,n,y,new t5(n.name,e));return new p9(C,n)}class p9{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function w8(n,t,e){if(n.stats_=RF(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Ox(n.repoInfo_,(i,r,s,l)=>{v3(n,i,r,s,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>y3(n,!0),0);else{if(typeof e<"u"&&null!==e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,B.Wl)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new zv(n.repoInfo_,t,(i,r,s,l)=>{v3(n,i,r,s,l)},i=>{y3(n,i)},i=>{!function b8(n,t){Ys(t,(e,i)=>{bL(n,e,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function s5(n,t){const e=n.toString();return xF[e]||(xF[e]=t()),xF[e]}(n.repoInfo_,()=>new sq(n.stats_,n.server_)),n.infoData_=new eq,n.infoSyncTree_=new n3({startListening:(i,r,s,l)=>{let d=[];const f=n.infoData_.getNode(i._path);return f.isEmpty()||(d=GI(n.infoSyncTree_,i._path,f),setTimeout(()=>{l("ok")},0)),d},stopListening:()=>{}}),bL(n,"connected",!1),n.serverSyncTree_=new n3({startListening:(i,r,s,l)=>(n.server_.listen(i,s,r,(d,f)=>{const m=l(d,f);dl(n.eventQueue_,i._path,m)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new hc(this._repo,ti())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function d9(n,t){const e=xL[t];(!e||e[n.key]!==n)&&qd(`Database ${t}(${n.repoInfo_}) has already been deleted.`),b3(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&qd("Cannot call "+t+" on a deleted database.")}}function U3(){lH.IS_TRANSPORT_INITIALIZED&&Fo("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function g9(){U3(),om.forceDisallow()}function m9(){U3(),xb.forceDisallow(),om.forceAllow()}function y9(n,t){jU(n,t)}const b9={".sv":"timestamp"};class C9{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}zv.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},zv.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},function w9(n){LU(gd.SDK_VERSION),(0,gd._registerComponent)(new mr.wA("database",(t,{instanceIdentifier:e})=>V3(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,gd.registerVersion)(PU,"0.14.4",n),(0,gd.registerVersion)(PU,"0.14.4","esm2017")}();const A9=new Hr.Yd("@firebase/database-compat"),j3=function(n){A9.warn("FIREBASE WARNING: "+n)};class x9{constructor(t){this._delegate=t}cancel(t){(0,B.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,B.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),i=>t(i)),e}remove(t){(0,B.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,B.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),i=>t(i)),e}set(t,e){(0,B.Dv)("OnDisconnect.set",1,2,arguments.length),(0,B.Wj)("OnDisconnect.set","onComplete",e,!0);const i=this._delegate.set(t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,B.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,B.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(t,e);return i&&r.then(()=>i(null),s=>i(s)),r}update(t,e){if((0,B.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,j3("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,B.Wj)("OnDisconnect.update","onComplete",e,!0);const i=this._delegate.update(t);return e&&i.then(()=>e(null),r=>e(r)),i}}class R9{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,B.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class gm{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,B.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,B.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,B.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,B.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,B.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),KI("DataSnapshot.child","path",t,!1),new gm(this._database,this._delegate.child(t))}hasChild(t){return(0,B.Dv)("DataSnapshot.hasChild",1,1,arguments.length),KI("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,B.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,B.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,B.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new gm(this._database,e)))}hasChildren(){return(0,B.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,B.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,B.Dv)("DataSnapshot.ref",0,0,arguments.length),new hl(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class uo{constructor(t,e){this.database=t,this._delegate=e}on(t,e,i,r){var s;(0,B.Dv)("Query.on",2,4,arguments.length),(0,B.Wj)("Query.on","callback",e,!1);const l=uo.getCancelAndContextArgs_("Query.on",i,r),d=(m,y)=>{e.call(l.context,new gm(this.database,m),y)};d.userCallback=e,d.context=l.context;const f=null===(s=l.cancel)||void 0===s?void 0:s.bind(l.context);switch(t){case"value":return NL(this._delegate,d,f),e;case"child_added":return x3(this._delegate,d,f),e;case"child_removed":return k3(this._delegate,d,f),e;case"child_changed":return R3(this._delegate,d,f),e;case"child_moved":return O3(this._delegate,d,f),e;default:throw new Error((0,B.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,i){if((0,B.Dv)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,B.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,B.Wj)("Query.off","callback",e,!0),(0,B.lb)("Query.off","context",i,!0),e){const r=()=>{};r.userCallback=e,r.context=i,P3(this._delegate,t,r)}else P3(this._delegate,t)}get(){return j8(this._delegate).then(t=>new gm(this.database,t))}once(t,e,i,r){(0,B.Dv)("Query.once",1,4,arguments.length),(0,B.Wj)("Query.once","callback",e,!0);const s=uo.getCancelAndContextArgs_("Query.once",i,r),l=new B.BH,d=(m,y)=>{const C=new gm(this.database,m);e&&e.call(s.context,C,y),l.resolve(C)};d.userCallback=e,d.context=s.context;const f=m=>{s.cancel&&s.cancel.call(s.context,m),l.reject(m)};switch(t){case"value":NL(this._delegate,d,f,{onlyOnce:!0});break;case"child_added":x3(this._delegate,d,f,{onlyOnce:!0});break;case"child_removed":k3(this._delegate,d,f,{onlyOnce:!0});break;case"child_changed":R3(this._delegate,d,f,{onlyOnce:!0});break;case"child_moved":O3(this._delegate,d,f,{onlyOnce:!0});break;default:throw new Error((0,B.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(t){return(0,B.Dv)("Query.limitToFirst",1,1,arguments.length),new uo(this.database,vu(this._delegate,function K8(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Z8(n)}(t)))}limitToLast(t){return(0,B.Dv)("Query.limitToLast",1,1,arguments.length),new uo(this.database,vu(this._delegate,function J8(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Q8(n)}(t)))}orderByChild(t){return(0,B.Dv)("Query.orderByChild",1,1,arguments.length),new uo(this.database,vu(this._delegate,function e9(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return KI("orderByChild","path",n,!1),new X8(n)}(t)))}orderByKey(){return(0,B.Dv)("Query.orderByKey",0,0,arguments.length),new uo(this.database,vu(this._delegate,function n9(){return new t9}()))}orderByPriority(){return(0,B.Dv)("Query.orderByPriority",0,0,arguments.length),new uo(this.database,vu(this._delegate,function r9(){return new i9}()))}orderByValue(){return(0,B.Dv)("Query.orderByValue",0,0,arguments.length),new uo(this.database,vu(this._delegate,function o9(){return new s9}()))}startAt(t=null,e){return(0,B.Dv)("Query.startAt",0,2,arguments.length),new uo(this.database,vu(this._delegate,function W8(n=null,t){return ZI("startAt","key",t,!0),new L3(n,t)}(t,e)))}startAfter(t=null,e){return(0,B.Dv)("Query.startAfter",0,2,arguments.length),new uo(this.database,vu(this._delegate,function Y8(n,t){return ZI("startAfter","key",t,!0),new q8(n,t)}(t,e)))}endAt(t=null,e){return(0,B.Dv)("Query.endAt",0,2,arguments.length),new uo(this.database,vu(this._delegate,function G8(n,t){return ZI("endAt","key",t,!0),new F3(n,t)}(t,e)))}endBefore(t=null,e){return(0,B.Dv)("Query.endBefore",0,2,arguments.length),new uo(this.database,vu(this._delegate,function z8(n,t){return ZI("endBefore","key",t,!0),new $8(n,t)}(t,e)))}equalTo(t,e){return(0,B.Dv)("Query.equalTo",1,2,arguments.length),new uo(this.database,vu(this._delegate,function l9(n,t){return ZI("equalTo","key",t,!0),new a9(n,t)}(t,e)))}toString(){return(0,B.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,B.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,B.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof uo))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,i){const r={cancel:void 0,context:void 0};if(e&&i)r.cancel=e,(0,B.Wj)(t,"cancel",r.cancel,!0),r.context=i,(0,B.lb)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,B.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r}get ref(){return new hl(this.database,new hc(this._delegate._repo,this._delegate._path))}}class hl extends uo{constructor(t,e){super(t,new Sa(e._repo,e._path,new xx,!1)),this.database=t,this._delegate=e}getKey(){return(0,B.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,B.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new hl(this.database,Qv(this._delegate,t))}getParent(){(0,B.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new hl(this.database,t):null}getRoot(){return(0,B.Dv)("Reference.root",0,0,arguments.length),new hl(this.database,this._delegate.root)}set(t,e){(0,B.Dv)("Reference.set",1,2,arguments.length),(0,B.Wj)("Reference.set","onComplete",e,!0);const i=ML(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}update(t,e){if((0,B.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,j3("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}dc("Reference.update",this._delegate._path),(0,B.Wj)("Reference.update","onComplete",e,!0);const i=H8(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,B.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,B.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function U8(n,t,e){if(dc("setWithPriority",n._path),Kd("setWithPriority",t,n._path,!1),wL("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new B.BH;return DL(n._repo,n._path,t,e,i.wrapCallback(()=>{})),i.promise}(this._delegate,t,e);return i&&r.then(()=>i(null),s=>i(s)),r}remove(t){(0,B.Dv)("Reference.remove",0,1,arguments.length),(0,B.Wj)("Reference.remove","onComplete",t,!0);const e=function B8(n){return dc("remove",n._path),ML(n,null)}(this._delegate);return t&&e.then(()=>t(null),i=>t(i)),e}transaction(t,e,i){(0,B.Dv)("Reference.transaction",1,3,arguments.length),(0,B.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,B.Wj)("Reference.transaction","onComplete",e,!0),function(n,t,e,i){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,B.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function T9(n,t,e){var i;if(n=(0,B.m9)(n),dc("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=e?.applyLocally)||void 0===i||i,s=new B.BH,d=NL(n,()=>{});return function N8(n,t,e,i,r,s){Vb(n,"transaction on "+t);const l={path:t,update:e,onComplete:i,status:null,order:VU(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=CL(n,t,void 0);l.currentInputSnapshot=d;const f=l.update(d.val());if(void 0===f)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{YI("transaction failed: Data returned ",f,l.path),l.status=0;const m=Yx(n.transactionQueueTree_,t),y=Zv(m)||[];let C;y.push(l),_L(m,y),"object"==typeof f&&null!==f&&(0,B.r3)(f,".priority")?(C=(0,B.DV)(f,".priority"),(0,B.hu)(qI(C),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):C=(Wx(n.serverSyncTree_,t)||_n.EMPTY_NODE).getPriority().val();const A=QI(n),x=Or(f,C),P=pL(x,d,A);l.currentOutputSnapshotRaw=x,l.currentOutputSnapshotResolved=P,l.currentWriteId=Jx(n);const F=aL(n.serverSyncTree_,t,P,l.currentWriteId,l.applyLocally);dl(n.eventQueue_,t,F),Xx(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(f,m,y)=>{let C=null;f?s.reject(f):(C=new Kv(y,new hc(n._repo,n._path),Yi),s.resolve(new C9(m,C)))},d,r),s.promise}(this._delegate,t,{applyLocally:i}).then(s=>new R9(s.committed,new gm(this.database,s.snapshot)));return e&&r.then(s=>e(null,s.committed,s.snapshot),s=>e(s,!1,null)),r}setPriority(t,e){(0,B.Dv)("Reference.setPriority",1,2,arguments.length),(0,B.Wj)("Reference.setPriority","onComplete",e,!0);const i=function V8(n,t){n=(0,B.m9)(n),dc("setPriority",n._path),wL("setPriority",t,!1);const e=new B.BH;return DL(n._repo,yr(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}push(t,e){(0,B.Dv)("Reference.push",0,2,arguments.length),(0,B.Wj)("Reference.push","onComplete",e,!0);const i=function L8(n,t){n=(0,B.m9)(n),dc("push",n._path),Kd("push",t,n._path,!0);const e=_3(n._repo),i=F8(e),r=Qv(n,i),s=Qv(n,i);let l;return l=null!=t?ML(s,t).then(()=>s):Promise.resolve(s),r.then=l.then.bind(l),r.catch=l.then.bind(l,void 0),r}(this._delegate,t),r=i.then(l=>new hl(this.database,l));e&&r.then(()=>e(null),l=>e(l));const s=new hl(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return dc("Reference.onDisconnect",this._delegate._path),new x9(new A3(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class eS{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:g9,forceLongPolling:m9}}useEmulator(t,e,i={}){!function H3(n,t,e,i={}){(n=(0,B.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&qd("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&qd('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new xI(xI.OWNER);else if(i.mockUserToken){const l="string"==typeof i.mockUserToken?i.mockUserToken:(0,B.Sg)(i.mockUserToken,n.app.options.projectId);s=new xI(l)}!function u9(n,t,e,i){n.repoInfo_=new MF(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}(r,t,e,s)}(this._delegate,t,e,i)}ref(t){if((0,B.Dv)("database.ref",0,1,arguments.length),t instanceof hl){const e=N3(this._delegate,t.toString());return new hl(this,e)}{const e=M3(this._delegate,t);return new hl(this,e)}}refFromURL(t){(0,B.Dv)("database.refFromURL",1,1,arguments.length);const i=N3(this._delegate,t);return new hl(this,i)}goOffline(){return(0,B.Dv)("database.goOffline",0,0,arguments.length),function _9(n){(n=(0,B.m9)(n))._checkNotDeleted("goOffline"),b3(n._repo)}(this._delegate)}goOnline(){return(0,B.Dv)("database.goOnline",0,0,arguments.length),function v9(n){(n=(0,B.m9)(n))._checkNotDeleted("goOnline"),function M8(n){n.persistentConnection_&&n.persistentConnection_.resume(m3)}(n._repo)}(this._delegate)}}eS.ServerValue={TIMESTAMP:function D9(){return b9}(),increment:n=>function E9(n){return{".sv":{increment:n}}}(n)};var k9=Object.freeze({__proto__:null,initStandalone:function O9({app:n,url:t,version:e,customAuthImpl:i,namespace:r,nodeAdmin:s=!1}){LU(e);const l=new mr.zt("auth-internal",new mr.H0("database-standalone"));return l.setComponent(new mr.wA("auth-internal",()=>i,"PRIVATE")),{instance:new eS(V3(n,l,void 0,t,s),n),namespace:r}}});const P9=eS.ServerValue;function G3(n){return null==n}function $3(n){return"function"==typeof n.set}function z3(n,t){return $3(t)?t:n.ref(t)}function W3(n,t){if(function L9(n){return"string"==typeof n}(n))return t.stringCase();if($3(n))return t.firebaseCase();if(function B9(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function tS(n,t,e="on",i=Mr.z){return new bi.y(r=>{let s=null;return s=n[e](t,(l,d)=>{i.schedule(()=>{r.next({snapshot:l,prevKey:d})}),"once"===e&&i.schedule(()=>r.complete())},l=>{i.schedule(()=>r.error(l))}),"on"===e?{unsubscribe(){null!=s&&n.off(t,s)}}:{unsubscribe(){}}}).pipe((0,rt.U)(r=>{const{snapshot:s,prevKey:l}=r;let d=null;return s.exists()&&(d=s.key),{type:t,payload:s,prevKey:l,key:d}}),(0,Ar.B)())}function q3(n,t){const e=n.length;for(let i=0;i<e;i++)if(n[i].payload.key===t)return i;return-1}function H9(n,t){const{payload:e,prevKey:i,key:r}=t,s=q3(n,r),l=function U9(n,t){if(G3(t))return 0;{const e=q3(n,t);return-1===e?n.length:e+1}}(n,i);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let d=null;t.payload.forEach(f=>{const m={payload:f,type:"value",prevKey:d,key:f.key};return d=f.key,n=[...n,m],!1})}return n;case"child_added":if(s>-1){const d=n[s-1];(d&&d.key||null)!==i&&(n=n.filter(f=>f.payload.key!==e.key)).splice(l,0,t)}else{if(null==i)return[t,...n];(n=n.slice()).splice(l,0,t)}return n;case"child_removed":return n.filter(d=>d.payload.key!==e.key);case"child_changed":return n.map(d=>d.payload.key===r?t:d);case"child_moved":if(s>-1){const d=n.splice(s,1)[0];return(n=n.slice()).splice(l,0,d),n}return n;default:return n}}function Y3(n){return(G3(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Z3(n,t,e){return function V9(n,t,e){return tS(n,"value","once",e).pipe((0,qn.w)(i=>{const r=[(0,At.of)(i)];return t.forEach(s=>r.push(tS(n,s,"on",e))),(0,Sr.T)(...r).pipe(Ql(H9,[]))}),(0,I0.x)())}(n,t=Y3(t),e)}function K3(n,t,e){const i=(t=Y3(t)).map(r=>tS(n,r,"on",e));return(0,Sr.T)(...i)}function Q3(n,t){return function(i,r){return W3(i,{stringCase:()=>n.child(i)[t](r),firebaseCase:()=>i[t](r),snapshotCase:()=>i.ref[t](r)})}}function z9(n){return function(e){return e?W3(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function J3(n,t){return function(){return tS(n,"value","on",t)}}!function F9(n){n.INTERNAL.registerComponent(new mr.wA("database-compat",(t,{instanceIdentifier:e})=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("database").getImmediate({identifier:e});return new eS(r,i)},"PUBLIC").setServiceProps({Reference:hl,Query:uo,Database:eS,DataSnapshot:gm,enableLogging:y9,INTERNAL:k9,ServerValue:P9}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(Z1.Z);const Y9=new a.OlP("angularfire2.realtimeDatabaseURL"),Z9=new a.OlP("angularfire2.database.use-emulator");let K9=(()=>{class n{constructor(e,i,r,s,l,d,f,m,y,C,A,x,P,F,U){this.schedulers=d;const ee=f,oe=(0,si.on)(e,l,i);m&&zh(oe,l,y,A,x,P,C,F),this.database=(0,si.cc)(`${oe.name}.database.${r}`,"AngularFireDatabase",oe.name,()=>{const te=l.runOutsideAngular(()=>oe.database(r||void 0));return ee&&te.useEmulator(...ee),te},[ee])}list(e,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>z3(this.database,e));let s=r;return i&&(s=i(r)),function W9(n,t){const e=t.schedulers.outsideAngular,i=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:Q3(i,"update"),set:Q3(i,"set"),push:r=>i.push(r),remove:z9(i),snapshotChanges:r=>Z3(n,r,e).pipe(hn.iC),stateChanges:r=>K3(n,r,e).pipe(hn.iC),auditTrail:r=>function j9(n,t,e){return function $9(n,t,e){return function G9(n,t){return tS(n,"value","on",t).pipe((0,rt.U)(e=>{let i;return e.payload.forEach(r=>(i=r.key,!1)),{data:e,lastKeyToLoad:i}}))}(n,e).pipe(Dx(t),(0,rt.U)(([r,s])=>{const l=r.lastKeyToLoad,d=s.map(f=>f.key);return{actions:s,lastKeyToLoad:l,loadedKeys:d}}),function jW(n){return(0,$i.e)((t,e)=>{let i=!1,r=0;t.subscribe((0,_i.x)(e,s=>(i||(i=!n(s,r++)))&&e.next(s)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,rt.U)(r=>r.actions))}(n,K3(n,t).pipe(Ql((r,s)=>[...r,s],[])),e)}(n,r,e).pipe(hn.iC),valueChanges:(r,s)=>Z3(n,r,e).pipe((0,rt.U)(d=>d.map(f=>s&&s.idField?Object.assign(Object.assign({},f.payload.val()),{[s.idField]:f.key}):f.payload.val())),hn.iC)}}(s,this)}object(e){return function q9(n,t){return{query:n,snapshotChanges:()=>J3(n,t.schedulers.outsideAngular)().pipe(hn.iC),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>J3(n,t.schedulers.outsideAngular)().pipe(hn.iC,(0,rt.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>z3(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(si.Dh),a.LFG(si.xv,8),a.LFG(Y9,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(hn.HU),a.LFG(Z9,8),a.LFG(ld,8),a.LFG(ad,8),a.LFG(Gc,8),a.LFG(o_,8),a.LFG(ya,8),a.LFG(Vp,8),a.LFG(Up,8),a.LFG(jh,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Q9=(()=>{class n{constructor(){jc.Z.registerVersion("angularfire",hn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[K9]}),n})();const{isArray:J9}=Array,{getPrototypeOf:X9,prototype:eY,keys:tY}=Object;function X3(n){if(1===n.length){const t=n[0];if(J9(t))return{args:t,keys:null};if(function nY(n){return n&&"object"==typeof n&&X9(n)===eY}(t)){const e=tY(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}const{isArray:iY}=Array;function RL(n){return(0,rt.U)(t=>function rY(n,t){return iY(t)?n(...t):n(t)}(n,t))}function ej(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}let tj=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static#e=this.\u0275fac=function(i){return new(i||n)(a.Y36(a.Qsj),a.Y36(a.SBq))};static#t=this.\u0275dir=a.lG2({type:n})}return n})(),Jv=(()=>{class n extends tj{static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=a.n5z(n)))(r||n)}}();static#t=this.\u0275dir=a.lG2({type:n,features:[a.qOj]})}return n})();const fl=new a.OlP("NgValueAccessor"),aY={provide:fl,useExisting:(0,a.Gpc)(()=>nS),multi:!0},cY=new a.OlP("CompositionEventMode");let nS=(()=>{class n extends tj{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function lY(){const n=V()?V().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static#e=this.\u0275fac=function(i){return new(i||n)(a.Y36(a.Qsj),a.Y36(a.SBq),a.Y36(cY,8))};static#t=this.\u0275dir=a.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){1&i&&a.NdJ("input",function(l){return r._handleInput(l.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(l){return r._compositionEnd(l.target.value)})},features:[a._Bn([aY]),a.qOj]})}return n})();function mm(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function ij(n){return null!=n&&"number"==typeof n.length}const ho=new a.OlP("NgValidators"),_m=new a.OlP("NgAsyncValidators"),uY=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class OL{static min(t){return function rj(n){return t=>{if(mm(t.value)||mm(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}(t)}static max(t){return function sj(n){return t=>{if(mm(t.value)||mm(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}(t)}static required(t){return function oj(n){return mm(n.value)?{required:!0}:null}(t)}static requiredTrue(t){return function aj(n){return!0===n.value?null:{required:!0}}(t)}static email(t){return function lj(n){return mm(n.value)||uY.test(n.value)?null:{email:!0}}(t)}static minLength(t){return function cj(n){return t=>mm(t.value)||!ij(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function uj(n){return t=>ij(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static pattern(t){return function dj(n){if(!n)return rR;let t,e;return"string"==typeof n?(e="","^"!==n.charAt(0)&&(e+="^"),e+=n,"$"!==n.charAt(n.length-1)&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(mm(i.value))return null;const r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return _j(t)}static composeAsync(t){return vj(t)}}function rR(n){return null}function hj(n){return null!=n}function fj(n){return(0,a.QGY)(n)?(0,Rn.D)(n):n}function pj(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function gj(n,t){return t.map(e=>e(n))}function mj(n){return n.map(t=>function dY(n){return!n.validate}(t)?t:e=>t.validate(e))}function _j(n){if(!n)return null;const t=n.filter(hj);return 0==t.length?null:function(e){return pj(gj(e,t))}}function kL(n){return null!=n?_j(mj(n)):null}function vj(n){if(!n)return null;const t=n.filter(hj);return 0==t.length?null:function(e){return function sY(...n){const t=(0,Zc.jO)(n),{args:e,keys:i}=X3(n),r=new bi.y(s=>{const{length:l}=e;if(!l)return void s.complete();const d=new Array(l);let f=l,m=l;for(let y=0;y<l;y++){let C=!1;(0,Wd.Xf)(e[y]).subscribe((0,_i.x)(s,A=>{C||(C=!0,m--),d[y]=A},()=>f--,void 0,()=>{(!f||!C)&&(m||s.next(i?ej(i,d):d),s.complete())}))}});return t?r.pipe(RL(t)):r}(gj(e,t).map(fj)).pipe((0,rt.U)(pj))}}function PL(n){return null!=n?vj(mj(n)):null}function yj(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function wj(n){return n._rawValidators}function bj(n){return n._rawAsyncValidators}function FL(n){return n?Array.isArray(n)?n:[n]:[]}function sR(n,t){return Array.isArray(n)?n.includes(t):n===t}function Dj(n,t){const e=FL(t);return FL(n).forEach(r=>{sR(e,r)||e.push(r)}),e}function Ej(n,t){return FL(t).filter(e=>!sR(n,e))}class Cj{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=kL(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=PL(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class ra extends Cj{get formDirective(){return null}get path(){return null}}class vm extends Cj{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Tj{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let LL=(()=>{class n extends Tj{constructor(e){super(e)}static#e=this.\u0275fac=function(i){return new(i||n)(a.Y36(vm,2))};static#t=this.\u0275dir=a.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){2&i&&a.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[a.qOj]})}return n})(),Ij=(()=>{class n extends Tj{constructor(e){super(e)}static#e=this.\u0275fac=function(i){return new(i||n)(a.Y36(ra,10))};static#t=this.\u0275dir=a.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){2&i&&a.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[a.qOj]})}return n})();const iS="VALID",aR="INVALID",Hb="PENDING",rS="DISABLED";function UL(n){return(lR(n)?n.validators:n)||null}function HL(n,t){return(lR(t)?t.asyncValidators:n)||null}function lR(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function Aj(n,t,e){const i=n.controls;if(!(t?Object.keys(i):i).length)throw new a.vHH(1e3,"");if(!i[e])throw new a.vHH(1001,"")}function Mj(n,t,e){n._forEachChild((i,r)=>{if(void 0===e[r])throw new a.vHH(1002,"")})}class cR{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===iS}get invalid(){return this.status===aR}get pending(){return this.status==Hb}get disabled(){return this.status===rS}get enabled(){return this.status!==rS}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Dj(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Dj(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Ej(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Ej(t,this._rawAsyncValidators))}hasValidator(t){return sR(this._rawValidators,t)}hasAsyncValidator(t){return sR(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Hb,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=rS,this.errors=null,this._forEachChild(i=>{i.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=iS,this._forEachChild(i=>{i.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===iS||this.status===Hb)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?rS:iS}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Hb,this._hasOwnPendingAsyncValidator=!0;const e=fj(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new a.vpe,this.statusChanges=new a.vpe}_calculateStatus(){return this._allControlsDisabled()?rS:this.errors?aR:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Hb)?Hb:this._anyControlsHaveStatus(aR)?aR:iS}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){lR(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function gY(n){return Array.isArray(n)?kL(n):n||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function mY(n){return Array.isArray(n)?PL(n):n||null}(this._rawAsyncValidators)}}class sS extends cR{constructor(t,e,i){super(UL(e),HL(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){Mj(this,0,t),Object.keys(t).forEach(i=>{Aj(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(i=>{const r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,s)=>{i=e(i,r,s)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}class Nj extends sS{}const Xv=new a.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>oS}),oS="always";function uR(n,t){return[...t.path,n]}function aS(n,t,e=oS){jL(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(n.disabled),function vY(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&xj(n,t)})}(n,t),function wY(n,t){const e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function yY(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&xj(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function _Y(n,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function dR(n,t,e=!0){const i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),fR(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function hR(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function jL(n,t){const e=wj(n);null!==t.validator?n.setValidators(yj(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const i=bj(n);null!==t.asyncValidator?n.setAsyncValidators(yj(i,t.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();hR(t._rawValidators,r),hR(t._rawAsyncValidators,r)}function fR(n,t){let e=!1;if(null!==n){if(null!==t.validator){const r=wj(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(l=>l!==t.validator);s.length!==r.length&&(e=!0,n.setValidators(s))}}if(null!==t.asyncValidator){const r=bj(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(l=>l!==t.asyncValidator);s.length!==r.length&&(e=!0,n.setAsyncValidators(s))}}}const i=()=>{};return hR(t._rawValidators,i),hR(t._rawAsyncValidators,i),e}function xj(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function $L(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}function zL(n,t){if(!t)return null;let e,i,r;return Array.isArray(t),t.forEach(s=>{s.constructor===nS?e=s:function EY(n){return Object.getPrototypeOf(n.constructor)===Jv}(s)?i=s:r=s}),r||i||e||null}function kj(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function Pj(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const cS=class extends cR{constructor(t=null,e,i){super(UL(e),HL(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),lR(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=Pj(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){kj(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){kj(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){Pj(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},AY={provide:vm,useExisting:(0,a.Gpc)(()=>qL)},Bj=(()=>Promise.resolve())();let qL=(()=>{class n extends vm{constructor(e,i,r,s,l,d){super(),this._changeDetectorRef=l,this.callSetDisabledState=d,this.control=new cS,this._registered=!1,this.name="",this.update=new a.vpe,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=zL(0,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),$L(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){aS(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){Bj.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,r=0!==i&&(0,a.VuI)(i);Bj.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?uR(e,this._parent):[e]}static#e=this.\u0275fac=function(i){return new(i||n)(a.Y36(ra,9),a.Y36(ho,10),a.Y36(_m,10),a.Y36(fl,10),a.Y36(a.sBO,8),a.Y36(Xv,8))};static#t=this.\u0275dir=a.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[a._Bn([AY]),a.qOj,a.TTD]})}return n})(),Vj=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=a.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),Hj=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=a.oAB({type:n});static#n=this.\u0275inj=a.cJS({})}return n})();const YL=new a.OlP("NgModelWithFormControlWarning"),kY={provide:ra,useExisting:(0,a.Gpc)(()=>pR)};let pR=(()=>{class n extends ra{constructor(e,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new a.vpe,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(fR(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return aS(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){dR(e.control||null,e,!1),function CY(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,function Oj(n,t){n._syncPendingControls(),t.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,r=this.form.get(e.path);i!==r&&(dR(i||null,e),(n=>n instanceof cS)(r)&&(aS(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);(function Rj(n,t){jL(n,t)})(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function bY(n,t){return fR(n,t)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){jL(this.form,this),this._oldForm&&fR(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(i){return new(i||n)(a.Y36(ho,10),a.Y36(_m,10),a.Y36(Xv,8))};static#t=this.\u0275dir=a.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){1&i&&a.NdJ("submit",function(l){return r.onSubmit(l)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[a._Bn([kY]),a.qOj,a.TTD]})}return n})();const LY={provide:vm,useExisting:(0,a.Gpc)(()=>QL)};let QL=(()=>{class n extends vm{set isDisabled(e){}static#e=this._ngModelWarningSentOnce=!1;constructor(e,i,r,s,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.name=null,this.update=new a.vpe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=zL(0,s)}ngOnChanges(e){this._added||this._setUpControl(),$L(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return uR(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(i){return new(i||n)(a.Y36(ra,13),a.Y36(ho,10),a.Y36(_m,10),a.Y36(fl,10),a.Y36(YL,8))};static#n=this.\u0275dir=a.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[a._Bn([LY]),a.qOj,a.TTD]})}return n})(),iG=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=a.oAB({type:n});static#n=this.\u0275inj=a.cJS({imports:[Hj]})}return n})();class rG extends cR{constructor(t,e,i){super(UL(e),HL(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,i={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,e={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,i={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),e&&(this.controls.splice(r,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){Mj(this,0,t),t.forEach((i,r)=>{Aj(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,i)=>!!i._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,i)=>{t(e,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}}function sG(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let JY=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const e=new n;return e.useNonNullable=!0,e}group(e,i=null){const r=this._reduceControls(e);let s={};return sG(i)?s=i:null!==i&&(s.validators=i.validator,s.asyncValidators=i.asyncValidator),new sS(r,s)}record(e,i=null){const r=this._reduceControls(e);return new Nj(r,i)}control(e,i,r){let s={};return this.useNonNullable?(sG(i)?s=i:(s.validators=i,s.asyncValidators=r),new cS(e,{...s,nonNullable:!0})):new cS(e,i,r)}array(e,i,r){const s=e.map(l=>this._createControl(l));return new rG(s,i,r)}_reduceControls(e){const i={};return Object.keys(e).forEach(r=>{i[r]=this._createControl(e[r])}),i}_createControl(e){return e instanceof cS||e instanceof cR?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),XY=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Xv,useValue:e.callSetDisabledState??oS}]}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=a.oAB({type:n});static#n=this.\u0275inj=a.cJS({imports:[iG]})}return n})(),e7=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:YL,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Xv,useValue:e.callSetDisabledState??oS}]}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=a.oAB({type:n});static#n=this.\u0275inj=a.cJS({imports:[iG]})}return n})();class oG{}class t7{}const Gf="*";function aG(n,t){return{type:7,name:n,definitions:t,options:{}}}function gR(n,t=null){return{type:4,styles:t,timings:n}}function lG(n,t=null){return{type:2,steps:n,options:t}}function ty(n){return{type:6,styles:n,offset:null}}function uS(n,t,e){return{type:0,name:n,styles:t,options:e}}function mR(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}class dS{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class cG{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,i=0,r=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++e==s&&this._onFinish()}),l.onDestroy(()=>{++i==s&&this._onDestroy()}),l.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((l,d)=>Math.max(l,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){const t=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}const uG=["toast-component",""];function n7(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"button",5),a.NdJ("click",function(){a.CHM(e);const r=a.oxw();return a.KtG(r.remove())}),a.TgZ(1,"span",6),a._uU(2,"\xd7"),a.qZA()()}}function i7(n,t){if(1&n&&(a.ynx(0),a._uU(1),a.BQk()),2&n){const e=a.oxw(2);a.xp6(1),a.hij("[",e.duplicatesCount+1,"]")}}function r7(n,t){if(1&n&&(a.TgZ(0,"div"),a._uU(1),a.YNc(2,i7,2,1,"ng-container",4),a.qZA()),2&n){const e=a.oxw();a.Tol(e.options.titleClass),a.uIk("aria-label",e.title),a.xp6(1),a.hij(" ",e.title," "),a.xp6(1),a.Q6J("ngIf",e.duplicatesCount)}}function s7(n,t){if(1&n&&a._UZ(0,"div",7),2&n){const e=a.oxw();a.Tol(e.options.messageClass),a.Q6J("innerHTML",e.message,a.oJD)}}function o7(n,t){if(1&n&&(a.TgZ(0,"div",8),a._uU(1),a.qZA()),2&n){const e=a.oxw();a.Tol(e.options.messageClass),a.uIk("aria-label",e.message),a.xp6(1),a.hij(" ",e.message," ")}}function a7(n,t){if(1&n&&(a.TgZ(0,"div"),a._UZ(1,"div",9),a.qZA()),2&n){const e=a.oxw();a.xp6(1),a.Udp("width",e.width+"%")}}class p7{_attachedHost;component;viewContainerRef;injector;constructor(t,e){this.component=t,this.injector=e}attach(t,e){return this._attachedHost=t,t.attach(this,e)}detach(){const t=this._attachedHost;if(t)return this._attachedHost=void 0,t.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class g7{_attachedPortal;_disposeFn;attach(t,e){return this._attachedPortal=t,this.attachComponentPortal(t,e)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(t){this._disposeFn=t}}class m7{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new Qt.x;_activate=new Qt.x;_manualClose=new Qt.x;_resetTimeout=new Qt.x;_countDuplicate=new Qt.x;constructor(t){this._overlayRef=t}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(t,e){t&&this._resetTimeout.next(),e&&this._countDuplicate.next(++this.duplicatesCount)}}class _R{toastId;config;message;title;toastType;toastRef;_onTap=new Qt.x;_onAction=new Qt.x;constructor(t,e,i,r,s,l){this.toastId=t,this.config=e,this.message=i,this.title=r,this.toastType=s,this.toastRef=l,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(t){this._onAction.next(t)}onAction(){return this._onAction.asObservable()}}const hG=new a.OlP("ToastConfig");class _7 extends g7{_hostDomElement;_componentFactoryResolver;_appRef;constructor(t,e,i){super(),this._hostDomElement=t,this._componentFactoryResolver=e,this._appRef=i}attachComponentPortal(t,e){const i=this._componentFactoryResolver.resolveComponentFactory(t.component);let r;return r=i.create(t.injector),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.detachView(r.hostView),r.destroy()}),e?this._hostDomElement.insertBefore(this._getComponentRootNode(r),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(r)),r}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let v7=(()=>{class n{_document=(0,a.f3M)(_e);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e=this._document.createElement("div");e.classList.add("overlay-container"),e.setAttribute("aria-live","polite"),this._document.body.appendChild(e),this._containerElement=e}static \u0275fac=function(i){return new(i||n)};static \u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class y7{_portalHost;constructor(t){this._portalHost=t}attach(t,e=!0){return this._portalHost.attach(t,e)}detach(){return this._portalHost.detach()}}let w7=(()=>{class n{_overlayContainer=(0,a.f3M)(v7);_componentFactoryResolver=(0,a.f3M)(a._Vd);_appRef=(0,a.f3M)(a.z2F);_document=(0,a.f3M)(_e);_paneElements=new Map;create(e,i){return this._createOverlayRef(this.getPaneElement(e,i))}getPaneElement(e="",i){return this._paneElements.get(i)||this._paneElements.set(i,{}),this._paneElements.get(i)[e]||(this._paneElements.get(i)[e]=this._createPaneElement(e,i)),this._paneElements.get(i)[e]}_createPaneElement(e,i){const r=this._document.createElement("div");return r.id="toast-container",r.classList.add(e),r.classList.add("toast-container"),i?i.getContainerElement().appendChild(r):this._overlayContainer.getContainerElement().appendChild(r),r}_createPortalHost(e){return new _7(e,this._componentFactoryResolver,this._appRef)}_createOverlayRef(e){return new y7(this._createPortalHost(e))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),n2=(()=>{class n{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(e,i,r,s,l){this.overlay=i,this._injector=r,this.sanitizer=s,this.ngZone=l,this.toastrConfig={...e.default,...e.config},e.config.iconClasses&&(this.toastrConfig.iconClasses={...e.default.iconClasses,...e.config.iconClasses})}show(e,i,r={},s=""){return this._preBuildNotification(s,e,i,this.applyConfig(r))}success(e,i,r={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",e,i,this.applyConfig(r))}error(e,i,r={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",e,i,this.applyConfig(r))}info(e,i,r={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",e,i,this.applyConfig(r))}warning(e,i,r={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",e,i,this.applyConfig(r))}clear(e){for(const i of this.toasts)if(void 0!==e){if(i.toastId===e)return void i.toastRef.manualClose()}else i.toastRef.manualClose()}remove(e){const i=this._findToast(e);if(!i||(i.activeToast.toastRef.close(),this.toasts.splice(i.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const r=this.toasts[this.currentlyActive].toastRef;r.isInactive()||(this.currentlyActive=this.currentlyActive+1,r.activate())}return!0}findDuplicate(e="",i="",r,s){const{includeTitleDuplicates:l}=this.toastrConfig;for(const d of this.toasts)if((!l||l&&d.title===e)&&d.message===i)return d.toastRef.onDuplicate(r,s),d;return null}applyConfig(e={}){return{...this.toastrConfig,...e}}_findToast(e){for(let i=0;i<this.toasts.length;i++)if(this.toasts[i].toastId===e)return{index:i,activeToast:this.toasts[i]};return null}_preBuildNotification(e,i,r,s){return s.onActivateTick?this.ngZone.run(()=>this._buildNotification(e,i,r,s)):this._buildNotification(e,i,r,s)}_buildNotification(e,i,r,s){if(!s.toastComponent)throw new Error("toastComponent required");const l=this.findDuplicate(r,i,this.toastrConfig.resetTimeoutOnDuplicate&&s.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&r||i)&&this.toastrConfig.preventDuplicates&&null!==l)return l;this.previousToastMessage=i;let d=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(d=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const f=this.overlay.create(s.positionClass,this.overlayContainer);this.index=this.index+1;let m=i;i&&s.enableHtml&&(m=this.sanitizer.sanitize(a.q3G.HTML,i));const y=new m7(f),C=new _R(this.index,s,m,r,e,y),x=a.zs3.create({providers:[{provide:_R,useValue:C}],parent:this._injector}),P=new p7(s.toastComponent,x),F=f.attach(P,s.newestOnTop);y.componentInstance=F.instance;const U={toastId:this.index,title:r||"",message:i||"",toastRef:y,onShown:y.afterActivate(),onHidden:y.afterClosed(),onTap:C.onTap(),onAction:C.onAction(),portal:F};return d||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{U.toastRef.activate()})),this.toasts.push(U),U}static \u0275fac=function(i){return new(i||n)(a.LFG(hG),a.LFG(w7),a.LFG(a.zs3),a.LFG(Io),a.LFG(a.R0b))};static \u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const b7={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",toastComponent:(()=>{class n{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=-1;toastClasses="";state;get displayStyle(){if("inactive"===this.state.value)return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(e,i,r){this.toastrService=e,this.toastPackage=i,this.ngZone=r,this.message=i.message,this.title=i.title,this.options=i.config,this.originalTimeout=i.config.timeOut,this.toastClasses=`${i.toastType} ${i.config.toastClass}`,this.sub=i.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=i.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=i.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=i.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s}),this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}}}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const e=(new Date).getTime();this.width=(this.hideTime-e)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(e,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(e),i)):this.timeout=setTimeout(()=>e(),i)}outsideInterval(e,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(e),i)):this.intervalId=setInterval(()=>e(),i)}runInsideAngular(e){this.ngZone?this.ngZone.run(()=>e()):e()}static \u0275fac=function(i){return new(i||n)(a.Y36(n2),a.Y36(_R),a.Y36(a.R0b))};static \u0275cmp=a.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(i,r){1&i&&a.NdJ("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&i&&(a.d8E("@flyInOut",r.state),a.Tol(r.toastClasses),a.Udp("display",r.displayStyle))},standalone:!0,features:[a.jDz],attrs:uG,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(i,r){1&i&&(a.YNc(0,n7,3,0,"button",0),a.YNc(1,r7,3,5,"div",1),a.YNc(2,s7,1,3,"div",2),a.YNc(3,o7,2,4,"div",3),a.YNc(4,a7,2,2,"div",4)),2&i&&(a.Q6J("ngIf",r.options.closeButton),a.xp6(1),a.Q6J("ngIf",r.title),a.xp6(1),a.Q6J("ngIf",r.message&&r.options.enableHtml),a.xp6(1),a.Q6J("ngIf",r.message&&!r.options.enableHtml),a.xp6(1),a.Q6J("ngIf",r.options.progressBar))},dependencies:[Mi],encapsulation:2,data:{animation:[aG("flyInOut",[uS("inactive",ty({opacity:0})),uS("active",ty({opacity:1})),uS("removed",ty({opacity:0})),mR("inactive => active",gR("{{ easeTime }}ms {{ easing }}")),mR("active => removed",gR("{{ easeTime }}ms {{ easing }}"))])]}})}return n})()},D7=(n={})=>(0,a.MR2)([{provide:hG,useValue:{default:b7,config:n}}]);let E7=(()=>{class n{static forRoot(e={}){return{ngModule:n,providers:[D7(e)]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=a.oAB({type:n});static \u0275inj=a.cJS({})}return n})();function fG(n){return new a.vHH(3e3,!1)}function ym(n){switch(n.length){case 0:return new dS;case 1:return n[0];default:return new cG(n)}}function pG(n,t,e=new Map,i=new Map){const r=[],s=[];let l=-1,d=null;if(t.forEach(f=>{const m=f.get("offset"),y=m==l,C=y&&d||new Map;f.forEach((A,x)=>{let P=x,F=A;if("offset"!==x)switch(P=n.normalizePropertyName(P,r),F){case"!":F=e.get(x);break;case Gf:F=i.get(x);break;default:F=n.normalizeStyleValue(x,P,F,r)}C.set(P,F)}),y||s.push(C),d=C,l=m}),r.length)throw function W7(n){return new a.vHH(3502,!1)}();return s}function i2(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&r2(e,"start",n)));break;case"done":n.onDone(()=>i(e&&r2(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&r2(e,"destroy",n)))}}function r2(n,t,e){const s=s2(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,e.totalTime??n.totalTime,!!e.disabled),l=n._data;return null!=l&&(s._data=l),s}function s2(n,t,e,i,r="",s=0,l){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:r,totalTime:s,disabled:!!l}}function pl(n,t,e){let i=n.get(t);return i||n.set(t,i=e),i}function gG(n){const t=n.indexOf(":");return[n.substring(1,t),n.slice(t+1)]}const rZ=(()=>typeof document>"u"?null:document.documentElement)();function o2(n){const t=n.parentNode||n.host||null;return t===rZ?null:t}let ny=null,mG=!1;function _G(n,t){for(;t;){if(t===n)return!0;t=o2(t)}return!1}function vG(n,t,e){if(e)return Array.from(n.querySelectorAll(t));const i=n.querySelector(t);return i?[i]:[]}let yG=(()=>{class n{validateStyleProperty(e){return function oZ(n){ny||(ny=function aZ(){return typeof document<"u"?document.body:null}()||{},mG=!!ny.style&&"WebkitAppearance"in ny.style);let t=!0;return ny.style&&!function sZ(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in ny.style,!t&&mG&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in ny.style)),t}(e)}matchesElement(e,i){return!1}containsElement(e,i){return _G(e,i)}getParentElement(e){return o2(e)}query(e,i,r){return vG(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,s,l,d=[],f){return new dS(r,s)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac})}return n})(),a2=(()=>{class n{static#e=this.NOOP=new yG}return n})();const lZ=1e3,l2="ng-enter",vR="ng-leave",yR="ng-trigger",wR=".ng-trigger",bG="ng-animating",c2=".ng-animating";function $f(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:u2(parseFloat(t[1]),t[2])}function u2(n,t){return"s"===t?n*lZ:n}function bR(n,t,e){return n.hasOwnProperty("duration")?n:function uZ(n,t,e){let r,s=0,l="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return t.push(fG()),{duration:0,delay:0,easing:""};r=u2(parseFloat(d[1]),d[2]);const f=d[3];null!=f&&(s=u2(parseFloat(f),d[4]));const m=d[5];m&&(l=m)}else r=n;if(!e){let d=!1,f=t.length;r<0&&(t.push(function C7(){return new a.vHH(3100,!1)}()),d=!0),s<0&&(t.push(function T7(){return new a.vHH(3101,!1)}()),d=!0),d&&t.splice(f,0,fG())}return{duration:r,delay:s,easing:l}}(n,t,e)}function hS(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function DG(n){const t=new Map;return Object.keys(n).forEach(e=>{t.set(e,n[e])}),t}function wm(n,t=new Map,e){if(e)for(let[i,r]of e)t.set(i,r);for(let[i,r]of n)t.set(i,r);return t}function Qd(n,t,e){t.forEach((i,r)=>{const s=h2(r);e&&!e.has(r)&&e.set(r,n.style[s]),n.style[s]=i})}function iy(n,t){t.forEach((e,i)=>{const r=h2(i);n.style[r]=""})}function fS(n){return Array.isArray(n)?1==n.length?n[0]:lG(n):n}const d2=new RegExp("{{\\s*(.+?)\\s*}}","g");function CG(n){let t=[];if("string"==typeof n){let e;for(;e=d2.exec(n);)t.push(e[1]);d2.lastIndex=0}return t}function pS(n,t,e){const i=n.toString(),r=i.replace(d2,(s,l)=>{let d=t[l];return null==d&&(e.push(function S7(n){return new a.vHH(3003,!1)}()),d=""),d.toString()});return r==i?n:r}function DR(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const fZ=/-+([a-z0-9])/g;function h2(n){return n.replace(fZ,(...t)=>t[1].toUpperCase())}function gl(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function A7(n){return new a.vHH(3004,!1)}()}}function TG(n,t){return window.getComputedStyle(n)[t]}const ER="*";function mZ(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function _Z(n,t,e){if(":"==n[0]){const f=function vZ(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(function j7(n){return new a.vHH(3016,!1)}()),"* => *"}}(n,e);if("function"==typeof f)return void t.push(f);n=f}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(function H7(n){return new a.vHH(3015,!1)}()),t;const r=i[1],s=i[2],l=i[3];t.push(IG(r,l));"<"==s[0]&&!(r==ER&&l==ER)&&t.push(IG(l,r))}(i,e,t)):e.push(n),e}const CR=new Set(["true","1"]),TR=new Set(["false","0"]);function IG(n,t){const e=CR.has(n)||TR.has(n),i=CR.has(t)||TR.has(t);return(r,s)=>{let l=n==ER||n==r,d=t==ER||t==s;return!l&&e&&"boolean"==typeof r&&(l=r?CR.has(n):TR.has(n)),!d&&i&&"boolean"==typeof s&&(d=s?CR.has(t):TR.has(t)),l&&d}}const yZ=new RegExp("s*:selfs*,?","g");function f2(n,t,e,i){return new wZ(n).build(t,e,i)}class wZ{constructor(t){this._driver=t}build(t,e,i){const r=new EZ(e);return this._resetContextStyleTimingState(r),gl(this,fS(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,r=e.depCount=0;const s=[],l=[];return"@"==t.name.charAt(0)&&e.errors.push(function N7(){return new a.vHH(3006,!1)}()),t.definitions.forEach(d=>{if(this._resetContextStyleTimingState(e),0==d.type){const f=d,m=f.name;m.toString().split(/\s*,\s*/).forEach(y=>{f.name=y,s.push(this.visitState(f,e))}),f.name=m}else if(1==d.type){const f=this.visitTransition(d,e);i+=f.queryCount,r+=f.depCount,l.push(f)}else e.errors.push(function x7(){return new a.vHH(3007,!1)}())}),{type:7,name:t.name,states:s,transitions:l,queryCount:i,depCount:r,options:null}}visitState(t,e){const i=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){const s=new Set,l=r||{};i.styles.forEach(d=>{d instanceof Map&&d.forEach(f=>{CG(f).forEach(m=>{l.hasOwnProperty(m)||s.add(m)})})}),s.size&&(DR(s.values()),e.errors.push(function R7(n,t){return new a.vHH(3008,!1)}()))}return{type:0,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const i=gl(this,fS(t.animation),e);return{type:1,matchers:mZ(t.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:ry(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(i=>gl(this,i,e)),options:ry(t.options)}}visitGroup(t,e){const i=e.currentTime;let r=0;const s=t.steps.map(l=>{e.currentTime=i;const d=gl(this,l,e);return r=Math.max(r,e.currentTime),d});return e.currentTime=r,{type:3,steps:s,options:ry(t.options)}}visitAnimate(t,e){const i=function TZ(n,t){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return p2(bR(n,t).duration,0,"");const e=n;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=p2(0,0,"");return s.dynamic=!0,s.strValue=e,s}const r=bR(e,t);return p2(r.duration,r.delay,r.easing)}(t.timings,e.errors);e.currentAnimateTimings=i;let r,s=t.styles?t.styles:ty({});if(5==s.type)r=this.visitKeyframes(s,e);else{let l=t.styles,d=!1;if(!l){d=!0;const m={};i.easing&&(m.easing=i.easing),l=ty(m)}e.currentTime+=i.duration+i.delay;const f=this.visitStyle(l,e);f.isEmptyStep=d,r=f}return e.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(t,e){const i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){const i=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let d of r)"string"==typeof d?d===Gf?i.push(d):e.errors.push(new a.vHH(3002,!1)):i.push(DG(d));let s=!1,l=null;return i.forEach(d=>{if(d instanceof Map&&(d.has("easing")&&(l=d.get("easing"),d.delete("easing")),!s))for(let f of d.values())if(f.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:l,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,e){const i=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;i&&s>0&&(s-=i.duration+i.delay),t.styles.forEach(l=>{"string"!=typeof l&&l.forEach((d,f)=>{const m=e.collectedStyles.get(e.currentQuerySelector),y=m.get(f);let C=!0;y&&(s!=r&&s>=y.startTime&&r<=y.endTime&&(e.errors.push(function k7(n,t,e,i,r){return new a.vHH(3010,!1)}()),C=!1),s=y.startTime),C&&m.set(f,{startTime:s,endTime:r}),e.options&&function hZ(n,t,e){const i=t.params||{},r=CG(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||e.push(function I7(n){return new a.vHH(3001,!1)}())})}(d,e.options,e.errors)})})}visitKeyframes(t,e){const i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function P7(){return new a.vHH(3011,!1)}()),i;let s=0;const l=[];let d=!1,f=!1,m=0;const y=t.steps.map(ee=>{const oe=this._makeStyleAst(ee,e);let te=null!=oe.offset?oe.offset:function CZ(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){const i=e;t=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(oe.styles),ce=0;return null!=te&&(s++,ce=oe.offset=te),f=f||ce<0||ce>1,d=d||ce<m,m=ce,l.push(ce),oe});f&&e.errors.push(function F7(){return new a.vHH(3012,!1)}()),d&&e.errors.push(function L7(){return new a.vHH(3200,!1)}());const C=t.steps.length;let A=0;s>0&&s<C?e.errors.push(function B7(){return new a.vHH(3202,!1)}()):0==s&&(A=1/(C-1));const x=C-1,P=e.currentTime,F=e.currentAnimateTimings,U=F.duration;return y.forEach((ee,oe)=>{const te=A>0?oe==x?1:A*oe:l[oe],ce=te*U;e.currentTime=P+F.delay+ce,F.duration=ce,this._validateStyleAst(ee,e),ee.offset=te,i.styles.push(ee)}),i}visitReference(t,e){return{type:8,animation:gl(this,fS(t.animation),e),options:ry(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:ry(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:ry(t.options)}}visitQuery(t,e){const i=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[s,l]=function bZ(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(yZ,"")),n=n.replace(/@\*/g,wR).replace(/@\w+/g,e=>wR+"-"+e.slice(1)).replace(/:animating/g,c2),[n,t]}(t.selector);e.currentQuerySelector=i.length?i+" "+s:s,pl(e.collectedStyles,e.currentQuerySelector,new Map);const d=gl(this,fS(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:l,animation:d,originalSelector:t.selector,options:ry(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function V7(){return new a.vHH(3013,!1)}());const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:bR(t.timings,e.errors,!0);return{type:12,animation:gl(this,fS(t.animation),e),timings:i,options:null}}}class EZ{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function ry(n){return n?(n=hS(n)).params&&(n.params=function DZ(n){return n?hS(n):null}(n.params)):n={},n}function p2(n,t,e){return{duration:n,delay:t,easing:e}}function g2(n,t,e,i,r,s,l=null,d=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:l,subTimeline:d}}class IR{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const AZ=new RegExp(":enter","g"),NZ=new RegExp(":leave","g");function m2(n,t,e,i,r,s=new Map,l=new Map,d,f,m=[]){return(new xZ).buildKeyframes(n,t,e,i,r,s,l,d,f,m)}class xZ{buildKeyframes(t,e,i,r,s,l,d,f,m,y=[]){m=m||new IR;const C=new _2(t,e,m,r,s,y,[]);C.options=f;const A=f.delay?$f(f.delay):0;C.currentTimeline.delayNextStep(A),C.currentTimeline.setStyles([l],null,C.errors,f),gl(this,i,C);const x=C.timelines.filter(P=>P.containsAnimation());if(x.length&&d.size){let P;for(let F=x.length-1;F>=0;F--){const U=x[F];if(U.element===e){P=U;break}}P&&!P.allowOnlyTimelineStyles()&&P.setStyles([d],null,C.errors,f)}return x.length?x.map(P=>P.buildKeyframes()):[g2(e,[],[],[],0,A,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const i=e.subInstructions.get(e.element);if(i){const r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,l=this._visitSubInstructions(i,r,r.options);s!=l&&e.transformIntoNewTimeline(l)}e.previousNode=t}visitAnimateRef(t,e){const i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,i),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,i){for(const r of t){const s=r?.delay;if(s){const l="number"==typeof s?s:$f(pS(s,r?.params??{},e.errors));i.delayNextStep(l)}}}_visitSubInstructions(t,e,i){let s=e.currentTimeline.currentTime;const l=null!=i.duration?$f(i.duration):null,d=null!=i.delay?$f(i.delay):null;return 0!==l&&t.forEach(f=>{const m=e.appendInstructionToTimeline(f,l,d);s=Math.max(s,m.duration+m.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),gl(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const i=e.subContextCount;let r=e;const s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=SR);const l=$f(s.delay);r.delayNextStep(l)}t.steps.length&&(t.steps.forEach(l=>gl(this,l,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const i=[];let r=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?$f(t.options.delay):0;t.steps.forEach(l=>{const d=e.createSubContext(t.options);s&&d.delayNextStep(s),gl(this,l,d),r=Math.max(r,d.currentTimeline.currentTime),i.push(d.currentTimeline)}),i.forEach(l=>e.currentTimeline.mergeTimelineCollectedStyles(l)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const i=t.strValue;return bR(e.params?pS(i,e.params,e.errors):i,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const i=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(i.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(s):i.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const i=e.currentAnimateTimings,r=e.currentTimeline.duration,s=i.duration,d=e.createSubContext().currentTimeline;d.easing=i.easing,t.styles.forEach(f=>{d.forwardTime((f.offset||0)*s),d.setStyles(f.styles,f.easing,e.errors,e.options),d.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(d),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){const i=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?$f(r.delay):0;s&&(6===e.previousNode.type||0==i&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=SR);let l=i;const d=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=d.length;let f=null;d.forEach((m,y)=>{e.currentQueryIndex=y;const C=e.createSubContext(t.options,m);s&&C.delayNextStep(s),m===e.element&&(f=C.currentTimeline),gl(this,t.animation,C),C.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,C.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(l),f&&(e.currentTimeline.mergeTimelineCollectedStyles(f),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const i=e.parentContext,r=e.currentTimeline,s=t.timings,l=Math.abs(s.duration),d=l*(e.currentQueryTotal-1);let f=l*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":f=d-f;break;case"full":f=i.currentStaggerTime}const y=e.currentTimeline;f&&y.delayNextStep(f);const C=y.currentTime;gl(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=r.currentTime-C+(r.startTime-i.currentTimeline.startTime)}}const SR={};class _2{constructor(t,e,i,r,s,l,d,f){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=l,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=SR,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=f||new AR(this._driver,e,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const i=t;let r=this.options;null!=i.duration&&(r.duration=$f(i.duration)),null!=i.delay&&(r.delay=$f(i.delay));const s=i.params;if(s){let l=r.params;l||(l=this.options.params={}),Object.keys(s).forEach(d=>{(!e||!l.hasOwnProperty(d))&&(l[d]=pS(s[d],l,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const i=t.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return t}createSubContext(t=null,e,i){const r=e||this.element,s=new _2(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=SR,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){const r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(i??0)+t.delay,easing:""},s=new RZ(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,r,s,l){let d=[];if(r&&d.push(this.element),t.length>0){t=(t=t.replace(AZ,"."+this._enterClassName)).replace(NZ,"."+this._leaveClassName);let m=this._driver.query(this.element,t,1!=i);0!==i&&(m=i<0?m.slice(m.length+i,m.length):m.slice(0,i)),d.push(...m)}return!s&&0==d.length&&l.push(function U7(n){return new a.vHH(3014,!1)}()),d}}class AR{constructor(t,e,i,r){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new AR(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||Gf),this._currentKeyframe.set(e,Gf);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,r){e&&this._previousKeyframe.set("easing",e);const s=r&&r.params||{},l=function OZ(n,t){const e=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||t.keys();for(let s of i)e.set(s,Gf)}else wm(r,e)}),e}(t,this._globalTimelineStyles);for(let[d,f]of l){const m=pS(f,s,i);this._pendingStyles.set(d,m),this._localTimelineStyles.has(d)||this._backFill.set(d,this._globalTimelineStyles.get(d)??Gf),this._updateStyle(d,m)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,i)=>{const r=this._styleSummary.get(i);(!r||e.time>r.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((d,f)=>{const m=wm(d,new Map,this._backFill);m.forEach((y,C)=>{"!"===y?t.add(C):y===Gf&&e.add(C)}),i||m.set("offset",f/this.duration),r.push(m)});const s=t.size?DR(t.values()):[],l=e.size?DR(e.values()):[];if(i){const d=r[0],f=new Map(d);d.set("offset",0),f.set("offset",1),r=[d,f]}return g2(this.element,r,s,l,this.duration,this.startTime,this.easing,!1)}}class RZ extends AR{constructor(t,e,i,r,s,l,d=!1){super(t,e,l.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=d,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],l=i+e,d=e/l,f=wm(t[0]);f.set("offset",0),s.push(f);const m=wm(t[0]);m.set("offset",MG(d)),s.push(m);const y=t.length-1;for(let C=1;C<=y;C++){let A=wm(t[C]);const x=A.get("offset");A.set("offset",MG((e+x*i)/l)),s.push(A)}i=l,e=0,r="",t=s}return g2(this.element,t,this.preStyleProps,this.postStyleProps,i,e,r,!0)}}function MG(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class v2{}const kZ=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class PZ extends v2{normalizePropertyName(t,e){return h2(t)}normalizeStyleValue(t,e,i,r){let s="";const l=i.toString().trim();if(kZ.has(e)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const d=i.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&r.push(function M7(n,t){return new a.vHH(3005,!1)}())}return l+s}}function NG(n,t,e,i,r,s,l,d,f,m,y,C,A){return{type:0,element:n,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:i,toStyles:l,timelines:d,queriedElements:f,preStyleProps:m,postStyleProps:y,totalTime:C,errors:A}}const y2={};class xG{constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,r){return function FZ(n,t,e,i,r){return n.some(s=>s(t,e,i,r))}(this.ast.matchers,t,e,i,r)}buildStyles(t,e,i){let r=this._stateStyles.get("*");return void 0!==t&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,i):new Map}build(t,e,i,r,s,l,d,f,m,y){const C=[],A=this.ast.options&&this.ast.options.params||y2,P=this.buildStyles(i,d&&d.params||y2,C),F=f&&f.params||y2,U=this.buildStyles(r,F,C),ee=new Set,oe=new Map,te=new Map,ce="void"===r,Ne={params:LZ(F,A),delay:this.ast.options?.delay},Be=y?[]:m2(t,e,this.ast.animation,s,l,P,U,Ne,m,C);let ot=0;if(Be.forEach(_t=>{ot=Math.max(_t.duration+_t.delay,ot)}),C.length)return NG(e,this._triggerName,i,r,ce,P,U,[],[],oe,te,ot,C);Be.forEach(_t=>{const Tt=_t.element,st=pl(oe,Tt,new Set);_t.preStyleProps.forEach(Zt=>st.add(Zt));const nt=pl(te,Tt,new Set);_t.postStyleProps.forEach(Zt=>nt.add(Zt)),Tt!==e&&ee.add(Tt)});const tt=DR(ee.values());return NG(e,this._triggerName,i,r,ce,P,U,Be,tt,oe,te,ot)}}function LZ(n,t){const e=hS(t);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(e[i]=n[i]);return e}class BZ{constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){const i=new Map,r=hS(this.defaultParams);return Object.keys(t).forEach(s=>{const l=t[s];null!==l&&(r[s]=l)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((l,d)=>{l&&(l=pS(l,r,e));const f=this.normalizer.normalizePropertyName(d,e);l=this.normalizer.normalizeStyleValue(d,f,l,e),i.set(d,l)})}),i}}class UZ{constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{this.states.set(r.name,new BZ(r.style,r.options&&r.options.params||{},i))}),RG(this.states,"true","1"),RG(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new xG(t,r,this.states))}),this.fallbackTransition=function HZ(n,t,e){return new xG(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,d)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,r){return this.transitionFactories.find(l=>l.match(t,e,i,r))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}}function RG(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}const jZ=new IR;class GZ{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const i=[],s=f2(this._driver,e,i,[]);if(i.length)throw function q7(n){return new a.vHH(3503,!1)}();this._animations.set(t,s)}_buildPlayer(t,e,i){const r=t.element,s=pG(this._normalizer,t.keyframes,e,i);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){const r=[],s=this._animations.get(t);let l;const d=new Map;if(s?(l=m2(this._driver,e,s,l2,vR,new Map,new Map,i,jZ,r),l.forEach(y=>{const C=pl(d,y.element,new Map);y.postStyleProps.forEach(A=>C.set(A,null))})):(r.push(function Y7(){return new a.vHH(3300,!1)}()),l=[]),r.length)throw function Z7(n){return new a.vHH(3504,!1)}();d.forEach((y,C)=>{y.forEach((A,x)=>{y.set(x,this._driver.computeStyle(C,x,Gf))})});const m=ym(l.map(y=>{const C=d.get(y.element);return this._buildPlayer(y,new Map,C)}));return this._playersById.set(t,m),m.onDestroy(()=>this.destroy(t)),this.players.push(m),m}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function K7(n){return new a.vHH(3301,!1)}();return e}listen(t,e,i,r){const s=s2(e,"","","");return i2(this._getPlayer(t),i,s,r),()=>{}}command(t,e,i,r){if("register"==i)return void this.register(t,r[0]);if("create"==i)return void this.create(t,e,r[0]||{});const s=this._getPlayer(t);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const OG="ng-animate-queued",w2="ng-animate-disabled",YZ=[],kG={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},ZZ={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},yu="__ng_removed";class b2{get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;const i=t&&t.hasOwnProperty("value");if(this.value=function XZ(n){return n??null}(i?t.value:t),i){const s=hS(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){const e=t.params;if(e){const i=this.options.params;Object.keys(e).forEach(r=>{null==i[r]&&(i[r]=e[r])})}}}const gS="void",D2=new b2(gS);class KZ{constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,fc(e,this._hostClassName)}listen(t,e,i,r){if(!this._triggers.has(e))throw function Q7(n,t){return new a.vHH(3302,!1)}();if(null==i||0==i.length)throw function J7(n){return new a.vHH(3303,!1)}();if(!function eK(n){return"start"==n||"done"==n}(i))throw function X7(n,t){return new a.vHH(3400,!1)}();const s=pl(this._elementListeners,t,[]),l={name:e,phase:i,callback:r};s.push(l);const d=pl(this._engine.statesByElement,t,new Map);return d.has(e)||(fc(t,yR),fc(t,yR+"-"+e),d.set(e,D2)),()=>{this._engine.afterFlush(()=>{const f=s.indexOf(l);f>=0&&s.splice(f,1),this._triggers.has(e)||d.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function eZ(n){return new a.vHH(3401,!1)}();return e}trigger(t,e,i,r=!0){const s=this._getTrigger(e),l=new E2(this.id,e,t);let d=this._engine.statesByElement.get(t);d||(fc(t,yR),fc(t,yR+"-"+e),this._engine.statesByElement.set(t,d=new Map));let f=d.get(e);const m=new b2(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&f&&m.absorbOptions(f.options),d.set(e,m),f||(f=D2),m.value!==gS&&f.value===m.value){if(!function iK(n,t){const e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!t.hasOwnProperty(s)||n[s]!==t[s])return!1}return!0}(f.params,m.params)){const F=[],U=s.matchStyles(f.value,f.params,F),ee=s.matchStyles(m.value,m.params,F);F.length?this._engine.reportError(F):this._engine.afterFlush(()=>{iy(t,U),Qd(t,ee)})}return}const A=pl(this._engine.playersByElement,t,[]);A.forEach(F=>{F.namespaceId==this.id&&F.triggerName==e&&F.queued&&F.destroy()});let x=s.matchTransition(f.value,m.value,t,m.params),P=!1;if(!x){if(!r)return;x=s.fallbackTransition,P=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:x,fromState:f,toState:m,player:l,isFallbackTransition:P}),P||(fc(t,OG),l.onStart(()=>{jb(t,OG)})),l.onDone(()=>{let F=this.players.indexOf(l);F>=0&&this.players.splice(F,1);const U=this._engine.playersByElement.get(t);if(U){let ee=U.indexOf(l);ee>=0&&U.splice(ee,1)}}),this.players.push(l),A.push(l),l}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const i=this._engine.driver.query(t,wR,!0);i.forEach(r=>{if(r[yu])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(l=>l.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,i,r){const s=this._engine.statesByElement.get(t),l=new Map;if(s){const d=[];if(s.forEach((f,m)=>{if(l.set(m,f.value),this._triggers.has(m)){const y=this.trigger(t,m,gS,r);y&&d.push(y)}}),d.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,l),i&&ym(d).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){const r=new Set;e.forEach(s=>{const l=s.name;if(r.has(l))return;r.add(l);const f=this._triggers.get(l).fallbackTransition,m=i.get(l)||D2,y=new b2(gS),C=new E2(this.id,l,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:l,transition:f,fromState:m,toState:y,player:C,isFallbackTransition:!0})})}}removeNode(t,e){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let l=t;for(;l=l.parentNode;)if(i.statesByElement.get(l)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,e);else{const s=t[yu];(!s||s===kG)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){fc(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,l=this._elementListeners.get(s);l&&l.forEach(d=>{if(d.name==i.triggerName){const f=s2(s,i.triggerName,i.fromState.value,i.toState.value);f._data=t,i2(i.player,d.phase,f,d.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{const s=i.transition.ast.depCount,l=r.transition.ast.depCount;return 0==s||0==l?s-l:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}}class QZ{_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){const i=new KZ(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let l=!1,d=this.driver.getParentElement(e);for(;d;){const f=r.get(d);if(f){const m=i.indexOf(f);i.splice(m+1,0,t),l=!0;break}d=this.driver.getParentElement(d)}l||i.unshift(t)}else i.push(t);return r.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let r=this._namespaceLookup[t];r&&r.register(e,i)&&this.totalAnimations++}destroy(t,e){t&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const i=this._fetchNamespace(t);this.namespacesByHostElement.delete(i.hostElement);const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(e),delete this._namespaceLookup[t]}))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,i=this.statesByElement.get(t);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&e.add(s)}return e}trigger(t,e,i,r){if(MR(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,i,r),!0}return!1}insertNode(t,e,i,r){if(!MR(e))return;const s=e[yu];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const l=this.collectedLeaveElements.indexOf(e);l>=0&&this.collectedLeaveElements.splice(l,1)}if(t){const l=this._fetchNamespace(t);l&&l.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),fc(t,w2)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),jb(t,w2))}removeNode(t,e,i){if(MR(e)){const r=t?this._fetchNamespace(t):null;r?r.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i);const s=this.namespacesByHostElement.get(e);s&&s.id!==t&&s.removeNode(e,i)}else this._onRemovalComplete(e,i)}markElementAsRemoved(t,e,i,r,s){this.collectedLeaveElements.push(e),e[yu]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,i,r,s){return MR(e)?this._fetchNamespace(t).listen(e,i,r,s):()=>{}}_buildInstruction(t,e,i,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,wR,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,c2,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return ym(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[yu];if(e&&e.setForRemoval){if(t[yu]=kG,e.namespaceId){this.destroyInnerAnimations(t);const i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(w2)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)fc(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?ym(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw function tZ(n){return new a.vHH(3402,!1)}()}_flushAnimations(t,e){const i=new IR,r=[],s=new Map,l=[],d=new Map,f=new Map,m=new Map,y=new Set;this.disabledNodes.forEach(gt=>{y.add(gt);const St=this.driver.query(gt,".ng-animate-queued",!0);for(let Ht=0;Ht<St.length;Ht++)y.add(St[Ht])});const C=this.bodyNode,A=Array.from(this.statesByElement.keys()),x=LG(A,this.collectedEnterElements),P=new Map;let F=0;x.forEach((gt,St)=>{const Ht=l2+F++;P.set(St,Ht),gt.forEach(jt=>fc(jt,Ht))});const U=[],ee=new Set,oe=new Set;for(let gt=0;gt<this.collectedLeaveElements.length;gt++){const St=this.collectedLeaveElements[gt],Ht=St[yu];Ht&&Ht.setForRemoval&&(U.push(St),ee.add(St),Ht.hasAnimation?this.driver.query(St,".ng-star-inserted",!0).forEach(jt=>ee.add(jt)):oe.add(St))}const te=new Map,ce=LG(A,Array.from(ee));ce.forEach((gt,St)=>{const Ht=vR+F++;te.set(St,Ht),gt.forEach(jt=>fc(jt,Ht))}),t.push(()=>{x.forEach((gt,St)=>{const Ht=P.get(St);gt.forEach(jt=>jb(jt,Ht))}),ce.forEach((gt,St)=>{const Ht=te.get(St);gt.forEach(jt=>jb(jt,Ht))}),U.forEach(gt=>{this.processLeaveNode(gt)})});const Ne=[],Be=[];for(let gt=this._namespaceList.length-1;gt>=0;gt--)this._namespaceList[gt].drainQueuedTransitions(e).forEach(Ht=>{const jt=Ht.player,ii=Ht.element;if(Ne.push(jt),this.collectedEnterElements.length){const Ki=ii[yu];if(Ki&&Ki.setForMove){if(Ki.previousTriggersValues&&Ki.previousTriggersValues.has(Ht.triggerName)){const kr=Ki.previousTriggersValues.get(Ht.triggerName),rs=this.statesByElement.get(Ht.element);if(rs&&rs.has(Ht.triggerName)){const Am=rs.get(Ht.triggerName);Am.value=kr,rs.set(Ht.triggerName,Am)}}return void jt.destroy()}}const wi=!C||!this.driver.containsElement(C,ii),or=te.get(ii),mo=P.get(ii),$n=this._buildInstruction(Ht,i,mo,or,wi);if($n.errors&&$n.errors.length)return void Be.push($n);if(wi)return jt.onStart(()=>iy(ii,$n.fromStyles)),jt.onDestroy(()=>Qd(ii,$n.toStyles)),void r.push(jt);if(Ht.isFallbackTransition)return jt.onStart(()=>iy(ii,$n.fromStyles)),jt.onDestroy(()=>Qd(ii,$n.toStyles)),void r.push(jt);const Cs=[];$n.timelines.forEach(Ki=>{Ki.stretchStartingKeyframe=!0,this.disabledNodes.has(Ki.element)||Cs.push(Ki)}),$n.timelines=Cs,i.append(ii,$n.timelines),l.push({instruction:$n,player:jt,element:ii}),$n.queriedElements.forEach(Ki=>pl(d,Ki,[]).push(jt)),$n.preStyleProps.forEach((Ki,kr)=>{if(Ki.size){let rs=f.get(kr);rs||f.set(kr,rs=new Set),Ki.forEach((Am,ih)=>rs.add(ih))}}),$n.postStyleProps.forEach((Ki,kr)=>{let rs=m.get(kr);rs||m.set(kr,rs=new Set),Ki.forEach((Am,ih)=>rs.add(ih))})});if(Be.length){const gt=[];Be.forEach(St=>{gt.push(function nZ(n,t){return new a.vHH(3505,!1)}())}),Ne.forEach(St=>St.destroy()),this.reportError(gt)}const ot=new Map,tt=new Map;l.forEach(gt=>{const St=gt.element;i.has(St)&&(tt.set(St,St),this._beforeAnimationBuild(gt.player.namespaceId,gt.instruction,ot))}),r.forEach(gt=>{const St=gt.element;this._getPreviousPlayers(St,!1,gt.namespaceId,gt.triggerName,null).forEach(jt=>{pl(ot,St,[]).push(jt),jt.destroy()})});const _t=U.filter(gt=>VG(gt,f,m)),Tt=new Map;FG(Tt,this.driver,oe,m,Gf).forEach(gt=>{VG(gt,f,m)&&_t.push(gt)});const nt=new Map;x.forEach((gt,St)=>{FG(nt,this.driver,new Set(gt),f,"!")}),_t.forEach(gt=>{const St=Tt.get(gt),Ht=nt.get(gt);Tt.set(gt,new Map([...St?.entries()??[],...Ht?.entries()??[]]))});const Zt=[],Mn=[],go={};l.forEach(gt=>{const{element:St,player:Ht,instruction:jt}=gt;if(i.has(St)){if(y.has(St))return Ht.onDestroy(()=>Qd(St,jt.toStyles)),Ht.disabled=!0,Ht.overrideTotalTime(jt.totalTime),void r.push(Ht);let ii=go;if(tt.size>1){let or=St;const mo=[];for(;or=or.parentNode;){const $n=tt.get(or);if($n){ii=$n;break}mo.push(or)}mo.forEach($n=>tt.set($n,ii))}const wi=this._buildAnimation(Ht.namespaceId,jt,ot,s,nt,Tt);if(Ht.setRealPlayer(wi),ii===go)Zt.push(Ht);else{const or=this.playersByElement.get(ii);or&&or.length&&(Ht.parentPlayer=ym(or)),r.push(Ht)}}else iy(St,jt.fromStyles),Ht.onDestroy(()=>Qd(St,jt.toStyles)),Mn.push(Ht),y.has(St)&&r.push(Ht)}),Mn.forEach(gt=>{const St=s.get(gt.element);if(St&&St.length){const Ht=ym(St);gt.setRealPlayer(Ht)}}),r.forEach(gt=>{gt.parentPlayer?gt.syncPlayerEvents(gt.parentPlayer):gt.destroy()});for(let gt=0;gt<U.length;gt++){const St=U[gt],Ht=St[yu];if(jb(St,vR),Ht&&Ht.hasAnimation)continue;let jt=[];if(d.size){let wi=d.get(St);wi&&wi.length&&jt.push(...wi);let or=this.driver.query(St,c2,!0);for(let mo=0;mo<or.length;mo++){let $n=d.get(or[mo]);$n&&$n.length&&jt.push(...$n)}}const ii=jt.filter(wi=>!wi.destroyed);ii.length?tK(this,St,ii):this.processLeaveNode(St)}return U.length=0,Zt.forEach(gt=>{this.players.push(gt),gt.onDone(()=>{gt.destroy();const St=this.players.indexOf(gt);this.players.splice(St,1)}),gt.play()}),Zt}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,r,s){let l=[];if(e){const d=this.playersByQueriedElement.get(t);d&&(l=d)}else{const d=this.playersByElement.get(t);if(d){const f=!s||s==gS;d.forEach(m=>{m.queued||!f&&m.triggerName!=r||l.push(m)})}}return(i||r)&&(l=l.filter(d=>!(i&&i!=d.namespaceId||r&&r!=d.triggerName))),l}_beforeAnimationBuild(t,e,i){const s=e.element,l=e.isRemovalTransition?void 0:t,d=e.isRemovalTransition?void 0:e.triggerName;for(const f of e.timelines){const m=f.element,y=m!==s,C=pl(i,m,[]);this._getPreviousPlayers(m,y,l,d,e.toState).forEach(x=>{const P=x.getRealPlayer();P.beforeDestroy&&P.beforeDestroy(),x.destroy(),C.push(x)})}iy(s,e.fromStyles)}_buildAnimation(t,e,i,r,s,l){const d=e.triggerName,f=e.element,m=[],y=new Set,C=new Set,A=e.timelines.map(P=>{const F=P.element;y.add(F);const U=F[yu];if(U&&U.removedBeforeQueried)return new dS(P.duration,P.delay);const ee=F!==f,oe=function nK(n){const t=[];return BG(n,t),t}((i.get(F)||YZ).map(ot=>ot.getRealPlayer())).filter(ot=>!!ot.element&&ot.element===F),te=s.get(F),ce=l.get(F),Ne=pG(this._normalizer,P.keyframes,te,ce),Be=this._buildPlayer(P,Ne,oe);if(P.subTimeline&&r&&C.add(F),ee){const ot=new E2(t,d,F);ot.setRealPlayer(Be),m.push(ot)}return Be});m.forEach(P=>{pl(this.playersByQueriedElement,P.element,[]).push(P),P.onDone(()=>function JZ(n,t,e){let i=n.get(t);if(i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&n.delete(t)}return i}(this.playersByQueriedElement,P.element,P))}),y.forEach(P=>fc(P,bG));const x=ym(A);return x.onDestroy(()=>{y.forEach(P=>jb(P,bG)),Qd(f,e.toStyles)}),C.forEach(P=>{pl(r,P,[]).push(x)}),x}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new dS(t.duration,t.delay)}}class E2{constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i,this._player=new dS,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,i)=>{e.forEach(r=>i2(t,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){pl(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function MR(n){return n&&1===n.nodeType}function PG(n,t){const e=n.style.display;return n.style.display=t??"none",e}function FG(n,t,e,i,r){const s=[];e.forEach(f=>s.push(PG(f)));const l=[];i.forEach((f,m)=>{const y=new Map;f.forEach(C=>{const A=t.computeStyle(m,C,r);y.set(C,A),(!A||0==A.length)&&(m[yu]=ZZ,l.push(m))}),n.set(m,y)});let d=0;return e.forEach(f=>PG(f,s[d++])),l}function LG(n,t){const e=new Map;if(n.forEach(d=>e.set(d,[])),0==t.length)return e;const r=new Set(t),s=new Map;function l(d){if(!d)return 1;let f=s.get(d);if(f)return f;const m=d.parentNode;return f=e.has(m)?m:r.has(m)?1:l(m),s.set(d,f),f}return t.forEach(d=>{const f=l(d);1!==f&&e.get(f).push(d)}),e}function fc(n,t){n.classList?.add(t)}function jb(n,t){n.classList?.remove(t)}function tK(n,t,e){ym(e).onDone(()=>n.processLeaveNode(t))}function BG(n,t){for(let e=0;e<n.length;e++){const i=n[e];i instanceof cG?BG(i.players,t):t.push(i)}}function VG(n,t,e){const i=e.get(n);if(!i)return!1;let r=t.get(n);return r?i.forEach(s=>r.add(s)):t.set(n,i),e.delete(n),!0}class NR{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new QZ(t,e,i),this._timelineEngine=new GZ(t,e,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,i,r,s){const l=t+"-"+r;let d=this._triggerCache[l];if(!d){const f=[],y=f2(this._driver,s,f,[]);if(f.length)throw function z7(n,t){return new a.vHH(3404,!1)}();d=function VZ(n,t,e){return new UZ(n,t,e)}(r,y,this._normalizer),this._triggerCache[l]=d}this._transitionEngine.registerTrigger(e,r,d)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,r){this._transitionEngine.insertNode(t,e,i,r)}onRemove(t,e,i){this._transitionEngine.removeNode(t,e,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,r){if("@"==i.charAt(0)){const[s,l]=gG(i);this._timelineEngine.command(s,e,l,r)}else this._transitionEngine.trigger(t,e,i,r)}listen(t,e,i,r,s){if("@"==i.charAt(0)){const[l,d]=gG(i);return this._timelineEngine.listen(l,e,d,s)}return this._transitionEngine.listen(t,e,i,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(t){this._transitionEngine.afterFlushAnimationsDone(t)}}let sK=(()=>{class n{static#e=this.initialStylesByElement=new WeakMap;constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(e);s||n.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Qd(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Qd(this._element,this._initialStyles),this._endStyles&&(Qd(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(iy(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(iy(this._element,this._endStyles),this._endStyles=null),Qd(this._element,this._initialStyles),this._state=3)}}return n})();function C2(n){let t=null;return n.forEach((e,i)=>{(function oK(n){return"display"===n||"position"===n})(i)&&(t=t||new Map,t.set(i,e))}),t}class UG{constructor(t,e,i,r){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(t,e,i){return t.animate(this._convertKeyframesToObject(e),i)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&t.set(r,this._finished?i:TG(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class aK{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return _G(t,e)}getParentElement(t){return o2(t)}query(t,e,i){return vG(t,e,i)}computeStyle(t,e,i){return window.getComputedStyle(t)[e]}animate(t,e,i,r,s,l=[]){const f={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(f.easing=s);const m=new Map,y=l.filter(x=>x instanceof UG);(function pZ(n,t){return 0===n||0===t})(i,r)&&y.forEach(x=>{x.currentSnapshot.forEach((P,F)=>m.set(F,P))});let C=function dZ(n){return n.length?n[0]instanceof Map?n:n.map(t=>DG(t)):[]}(e).map(x=>wm(x));C=function gZ(n,t,e){if(e.size&&t.length){let i=t[0],r=[];if(e.forEach((s,l)=>{i.has(l)||r.push(l),i.set(l,s)}),r.length)for(let s=1;s<t.length;s++){let l=t[s];r.forEach(d=>l.set(d,TG(n,d)))}}return t}(t,C,m);const A=function rK(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=C2(t[0]),t.length>1&&(i=C2(t[t.length-1]))):t instanceof Map&&(e=C2(t)),e||i?new sK(n,e,i):null}(t,C);return new UG(t,C,f,A)}}let lK=(()=>{class n extends oG{constructor(e,i){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(i.body,{id:"0",encapsulation:a.ifc.None,styles:[],data:{animation:[]}})}build(e){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?lG(e):e;return HG(this._renderer,null,i,"register",[r]),new cK(i,this._renderer)}static#e=this.\u0275fac=function(i){return new(i||n)(a.LFG(a.FYo),a.LFG(_e))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac})}return n})();class cK extends t7{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new uK(this._id,t,e||{},this._renderer)}}class uK{constructor(t,e,i,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return HG(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function HG(n,t,e,i,r){return n.setProperty(t,`@@${e}:${i}`,r)}const jG="@.disabled";let dK=(()=>{class n{constructor(e,i,r){this.delegate=e,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,i.onRemovalComplete=(s,l)=>{const d=l?.parentNode(s);d&&l.removeChild(d,s)}}createRenderer(e,i){const s=this.delegate.createRenderer(e,i);if(!(e&&i&&i.data&&i.data.animation)){let y=this._rendererCache.get(s);return y||(y=new GG("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,y)),y}const l=i.id,d=i.id+"-"+this._currentId;this._currentId++,this.engine.register(d,e);const f=y=>{Array.isArray(y)?y.forEach(f):this.engine.registerTrigger(l,d,e,y.name,y)};return i.data.animation.forEach(f),new hK(this,d,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,r){e>=0&&e<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[l,d]=s;l(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(i){return new(i||n)(a.LFG(a.FYo),a.LFG(NR),a.LFG(a.R0b))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac})}return n})();class GG{constructor(t,e,i,r){this.namespaceId=t,this.delegate=e,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(t){this.delegate.destroyNode?.(t)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,r=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){"@"==e.charAt(0)&&e==jG?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.delegate.listen(t,e,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class hK extends GG{constructor(t,e,i,r,s){super(e,i,r,s),this.factory=t,this.namespaceId=e}setProperty(t,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==jG?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,e.slice(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i){if("@"==e.charAt(0)){const r=function fK(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let s=e.slice(1),l="";return"@"!=s.charAt(0)&&([s,l]=function pK(n){const t=n.indexOf(".");return[n.substring(0,t),n.slice(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,l,d=>{this.factory.scheduleListenerCallback(d._data||-1,i,d)})}return this.delegate.listen(t,e,i)}}let gK=(()=>{class n extends NR{constructor(e,i,r,s){super(e.body,i,r)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(i){return new(i||n)(a.LFG(_e),a.LFG(a2),a.LFG(v2),a.LFG(a.z2F))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac})}return n})();const $G=[{provide:oG,useClass:lK},{provide:v2,useFactory:function mK(){return new PZ}},{provide:NR,useClass:gK},{provide:a.FYo,useFactory:function _K(n,t,e){return new dK(n,t,e)},deps:[pa,NR,a.R0b]}],T2=[{provide:a2,useFactory:()=>new aK},{provide:a.QbO,useValue:"BrowserAnimations"},...$G],zG=[{provide:a2,useClass:yG},{provide:a.QbO,useValue:"NoopAnimations"},...$G];let vK=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?zG:T2}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=a.oAB({type:n});static#n=this.\u0275inj=a.cJS({providers:T2,imports:[Hu]})}return n})();var I2=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],Gb={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(n){return typeof console<"u"&&console.warn(n)},getWeek:function(n){var t=new Date(n.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var e=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},S2={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(n){var t=n%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1};const A2=S2;var Aa=function(n,t){return void 0===t&&(t=2),("000"+n).slice(-1*t)},pc=function(n){return!0===n?1:0};function WG(n,t){var e;return function(){var i=this,r=arguments;clearTimeout(e),e=setTimeout(function(){return n.apply(i,r)},t)}}var M2=function(n){return n instanceof Array?n:[n]};function sa(n,t,e){if(!0===e)return n.classList.add(t);n.classList.remove(t)}function li(n,t,e){var i=window.document.createElement(n);return e=e||"",i.className=t=t||"",void 0!==e&&(i.textContent=e),i}function RR(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function qG(n,t){return t(n)?n:n.parentNode?qG(n.parentNode,t):void 0}function OR(n,t){var e=li("div","numInputWrapper"),i=li("input","numInput "+n),r=li("span","arrowUp"),s=li("span","arrowDown");if(-1===navigator.userAgent.indexOf("MSIE 9.0")?i.type="number":(i.type="text",i.pattern="\\d*"),void 0!==t)for(var l in t)i.setAttribute(l,t[l]);return e.appendChild(i),e.appendChild(r),e.appendChild(s),e}function ml(n){try{return"function"==typeof n.composedPath?n.composedPath()[0]:n.target}catch{return n.target}}var N2=function(){},kR=function(n,t,e){return e.months[t?"shorthand":"longhand"][n]},yK={D:N2,F:function(n,t,e){n.setMonth(e.months.longhand.indexOf(t))},G:function(n,t){n.setHours((n.getHours()>=12?12:0)+parseFloat(t))},H:function(n,t){n.setHours(parseFloat(t))},J:function(n,t){n.setDate(parseFloat(t))},K:function(n,t,e){n.setHours(n.getHours()%12+12*pc(new RegExp(e.amPM[1],"i").test(t)))},M:function(n,t,e){n.setMonth(e.months.shorthand.indexOf(t))},S:function(n,t){n.setSeconds(parseFloat(t))},U:function(n,t){return new Date(1e3*parseFloat(t))},W:function(n,t,e){var i=parseInt(t),r=new Date(n.getFullYear(),0,2+7*(i-1),0,0,0,0);return r.setDate(r.getDate()-r.getDay()+e.firstDayOfWeek),r},Y:function(n,t){n.setFullYear(parseFloat(t))},Z:function(n,t){return new Date(t)},d:function(n,t){n.setDate(parseFloat(t))},h:function(n,t){n.setHours((n.getHours()>=12?12:0)+parseFloat(t))},i:function(n,t){n.setMinutes(parseFloat(t))},j:function(n,t){n.setDate(parseFloat(t))},l:N2,m:function(n,t){n.setMonth(parseFloat(t)-1)},n:function(n,t){n.setMonth(parseFloat(t)-1)},s:function(n,t){n.setSeconds(parseFloat(t))},u:function(n,t){return new Date(parseFloat(t))},w:N2,y:function(n,t){n.setFullYear(2e3+parseFloat(t))}},sy={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},mS={Z:function(n){return n.toISOString()},D:function(n,t,e){return t.weekdays.shorthand[mS.w(n,t,e)]},F:function(n,t,e){return kR(mS.n(n,t,e)-1,!1,t)},G:function(n,t,e){return Aa(mS.h(n,t,e))},H:function(n){return Aa(n.getHours())},J:function(n,t){return void 0!==t.ordinal?n.getDate()+t.ordinal(n.getDate()):n.getDate()},K:function(n,t){return t.amPM[pc(n.getHours()>11)]},M:function(n,t){return kR(n.getMonth(),!0,t)},S:function(n){return Aa(n.getSeconds())},U:function(n){return n.getTime()/1e3},W:function(n,t,e){return e.getWeek(n)},Y:function(n){return Aa(n.getFullYear(),4)},d:function(n){return Aa(n.getDate())},h:function(n){return n.getHours()%12?n.getHours()%12:12},i:function(n){return Aa(n.getMinutes())},j:function(n){return n.getDate()},l:function(n,t){return t.weekdays.longhand[n.getDay()]},m:function(n){return Aa(n.getMonth()+1)},n:function(n){return n.getMonth()+1},s:function(n){return n.getSeconds()},u:function(n){return n.getTime()},w:function(n){return n.getDay()},y:function(n){return String(n.getFullYear()).substring(2)}},YG=function(n){var t=n.config,e=void 0===t?Gb:t,i=n.l10n,r=void 0===i?S2:i,s=n.isMobile,l=void 0!==s&&s;return function(d,f,m){var y=m||r;return void 0===e.formatDate||l?f.split("").map(function(C,A,x){return mS[C]&&"\\"!==x[A-1]?mS[C](d,y,e):"\\"!==C?C:""}).join(""):e.formatDate(d,f,y)}},x2=function(n){var t=n.config,e=void 0===t?Gb:t,i=n.l10n,r=void 0===i?S2:i;return function(s,l,d,f){if(0===s||s){var y,m=f||r,C=s;if(s instanceof Date)y=new Date(s.getTime());else if("string"!=typeof s&&void 0!==s.toFixed)y=new Date(s);else if("string"==typeof s){var A=l||(e||Gb).dateFormat,x=String(s).trim();if("today"===x)y=new Date,d=!0;else if(e&&e.parseDate)y=e.parseDate(s,A);else if(/Z$/.test(x)||/GMT$/.test(x))y=new Date(s);else{for(var P=void 0,F=[],U=0,ee=0,oe="";U<A.length;U++){var te=A[U],ce="\\"===te;if(sy[te]&&"\\"!==A[U-1]&&!ce){oe+=sy[te];var Be=new RegExp(oe).exec(s);Be&&(P=!0)&&F["Y"!==te?"push":"unshift"]({fn:yK[te],val:Be[++ee]})}else ce||(oe+=".")}y=e&&e.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0),F.forEach(function(ot){return y=(0,ot.fn)(y,ot.val,m)||y}),y=P?y:void 0}}return y instanceof Date&&!isNaN(y.getTime())?(!0===d&&y.setHours(0,0,0,0),y):void e.errorHandler(new Error("Invalid date provided: "+C))}}};function _l(n,t,e){return void 0===e&&(e=!0),!1!==e?new Date(n.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):n.getTime()-t.getTime()}var wK=function(n,t,e){return n>Math.min(t,e)&&n<Math.max(t,e)},R2=function(n,t,e){return 3600*n+60*t+e},bK=function(n){var t=Math.floor(n/3600),e=(n-3600*t)/60;return[t,e,n-3600*t-60*e]},DK={DAY:864e5};function O2(n){var t=n.defaultHour,e=n.defaultMinute,i=n.defaultSeconds;if(void 0!==n.minDate){var r=n.minDate.getHours(),s=n.minDate.getMinutes(),l=n.minDate.getSeconds();t<r&&(t=r),t===r&&e<s&&(e=s),t===r&&e===s&&i<l&&(i=n.minDate.getSeconds())}if(void 0!==n.maxDate){var d=n.maxDate.getHours(),f=n.maxDate.getMinutes();(t=Math.min(t,d))===d&&(e=Math.min(f,e)),t===d&&e===f&&(i=n.maxDate.getSeconds())}return{hours:t,minutes:e,seconds:i}}L(9706);var Lo=function(){return Lo=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++)for(var r in t=arguments[e])Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},Lo.apply(this,arguments)},ZG=function(){for(var n=0,t=0,e=arguments.length;t<e;t++)n+=arguments[t].length;var i=Array(n),r=0;for(t=0;t<e;t++)for(var s=arguments[t],l=0,d=s.length;l<d;l++,r++)i[r]=s[l];return i},EK=300;function CK(n,t){var e={config:Lo(Lo({},Gb),bs.defaultConfig),l10n:A2};function s(){var j;return(null===(j=e.calendarContainer)||void 0===j?void 0:j.getRootNode()).activeElement||document.activeElement}function l(j){return j.bind(e)}function d(){var j=e.config;!1===j.weekNumbers&&1===j.showMonths||!0!==j.noCalendar&&window.requestAnimationFrame(function(){if(void 0!==e.calendarContainer&&(e.calendarContainer.style.visibility="hidden",e.calendarContainer.style.display="block"),void 0!==e.daysContainer){var z=(e.days.offsetWidth+1)*j.showMonths;e.daysContainer.style.width=z+"px",e.calendarContainer.style.width=z+(void 0!==e.weekWrapper?e.weekWrapper.offsetWidth:0)+"px",e.calendarContainer.style.removeProperty("visibility"),e.calendarContainer.style.removeProperty("display")}})}function f(j){if(0===e.selectedDates.length){var z=void 0===e.config.minDate||_l(new Date,e.config.minDate)>=0?new Date:new Date(e.config.minDate.getTime()),de=O2(e.config);z.setHours(de.hours,de.minutes,de.seconds,z.getMilliseconds()),e.selectedDates=[z],e.latestSelectedDateObj=z}void 0!==j&&"blur"!==j.type&&function ele(j){j.preventDefault();var z="keydown"===j.type,de=ml(j),ke=de;void 0!==e.amPM&&de===e.amPM&&(e.amPM.textContent=e.l10n.amPM[pc(e.amPM.textContent===e.l10n.amPM[0])]);var pt=parseFloat(ke.getAttribute("min")),Mt=parseFloat(ke.getAttribute("max")),Cn=parseFloat(ke.getAttribute("step")),$t=parseInt(ke.value,10),Vt=$t+Cn*(j.delta||(z?38===j.which?1:-1:0));if(typeof ke.value<"u"&&2===ke.value.length){var cn=ke===e.hourElement,Ui=ke===e.minuteElement;Vt<pt?(Vt=Mt+Vt+pc(!cn)+(pc(cn)&&pc(!e.amPM)),Ui&&ce(void 0,-1,e.hourElement)):Vt>Mt&&(Vt=ke===e.hourElement?Vt-Mt-pc(!e.amPM):pt,Ui&&ce(void 0,1,e.hourElement)),e.amPM&&cn&&(1===Cn?Vt+$t===23:Math.abs(Vt-$t)>Cn)&&(e.amPM.textContent=e.l10n.amPM[pc(e.amPM.textContent===e.l10n.amPM[0])]),ke.value=Aa(Vt)}}(j);var ke=e._input.value;C(),Qf(),e._input.value!==ke&&e._debouncedChange()}function C(){if(void 0!==e.hourElement&&void 0!==e.minuteElement){var j=(parseInt(e.hourElement.value.slice(-2),10)||0)%24,z=(parseInt(e.minuteElement.value,10)||0)%60,de=void 0!==e.secondElement?(parseInt(e.secondElement.value,10)||0)%60:0;void 0!==e.amPM&&(j=function m(j,z){return j%12+12*pc(z===e.l10n.amPM[1])}(j,e.amPM.textContent));var ke=void 0!==e.config.minTime||e.config.minDate&&e.minDateHasTime&&e.latestSelectedDateObj&&0===_l(e.latestSelectedDateObj,e.config.minDate,!0),pt=void 0!==e.config.maxTime||e.config.maxDate&&e.maxDateHasTime&&e.latestSelectedDateObj&&0===_l(e.latestSelectedDateObj,e.config.maxDate,!0);if(void 0!==e.config.maxTime&&void 0!==e.config.minTime&&e.config.minTime>e.config.maxTime){var Mt=R2(e.config.minTime.getHours(),e.config.minTime.getMinutes(),e.config.minTime.getSeconds()),Cn=R2(e.config.maxTime.getHours(),e.config.maxTime.getMinutes(),e.config.maxTime.getSeconds()),$t=R2(j,z,de);if($t>Cn&&$t<Mt){var Bn=bK(Mt);j=Bn[0],z=Bn[1],de=Bn[2]}}else{if(pt){var Vt=void 0!==e.config.maxTime?e.config.maxTime:e.config.maxDate;(j=Math.min(j,Vt.getHours()))===Vt.getHours()&&(z=Math.min(z,Vt.getMinutes())),z===Vt.getMinutes()&&(de=Math.min(de,Vt.getSeconds()))}if(ke){var cn=void 0!==e.config.minTime?e.config.minTime:e.config.minDate;(j=Math.max(j,cn.getHours()))===cn.getHours()&&z<cn.getMinutes()&&(z=cn.getMinutes()),z===cn.getMinutes()&&(de=Math.max(de,cn.getSeconds()))}}x(j,z,de)}}function A(j){var z=j||e.latestSelectedDateObj;z&&z instanceof Date&&x(z.getHours(),z.getMinutes(),z.getSeconds())}function x(j,z,de){void 0!==e.latestSelectedDateObj&&e.latestSelectedDateObj.setHours(j%24,z,de||0,0),e.hourElement&&e.minuteElement&&!e.isMobile&&(e.hourElement.value=Aa(e.config.time_24hr?j:(12+j)%12+12*pc(j%12==0)),e.minuteElement.value=Aa(z),void 0!==e.amPM&&(e.amPM.textContent=e.l10n.amPM[pc(j>=12)]),void 0!==e.secondElement&&(e.secondElement.value=Aa(de)))}function P(j){var z=ml(j),de=parseInt(z.value)+(j.delta||0);(de/1e3>1||"Enter"===j.key&&!/[^\d]/.test(de.toString()))&&Ki(de)}function F(j,z,de,ke){return z instanceof Array?z.forEach(function(pt){return F(j,pt,de,ke)}):j instanceof Array?j.forEach(function(pt){return F(pt,z,de,ke)}):(j.addEventListener(z,de,ke),void e._handlers.push({remove:function(){return j.removeEventListener(z,de,ke)}}))}function U(){Pr("onChange")}function oe(j,z){var de=void 0!==j?e.parseDate(j):e.latestSelectedDateObj||(e.config.minDate&&e.config.minDate>e.now?e.config.minDate:e.config.maxDate&&e.config.maxDate<e.now?e.config.maxDate:e.now),ke=e.currentYear,pt=e.currentMonth;try{void 0!==de&&(e.currentYear=de.getFullYear(),e.currentMonth=de.getMonth())}catch(Mt){Mt.message="Invalid date supplied: "+de,e.config.errorHandler(Mt)}z&&e.currentYear!==ke&&(Pr("onYearChange"),Zt()),z&&(e.currentYear!==ke||e.currentMonth!==pt)&&Pr("onMonthChange"),e.redraw()}function te(j){var z=ml(j);~z.className.indexOf("arrow")&&ce(j,z.classList.contains("arrowUp")?1:-1)}function ce(j,z,de){var ke=j&&ml(j),pt=de||ke&&ke.parentNode&&ke.parentNode.firstChild,Mt=lV("increment");Mt.delta=z,pt&&pt.dispatchEvent(Mt)}function Be(j,z,de,ke){var pt=kr(z,!0),Mt=li("span",j,z.getDate().toString());return Mt.dateObj=z,Mt.$i=ke,Mt.setAttribute("aria-label",e.formatDate(z,e.config.ariaDateFormat)),-1===j.indexOf("hidden")&&0===_l(z,e.now)&&(e.todayDateElem=Mt,Mt.classList.add("today"),Mt.setAttribute("aria-current","date")),pt?(Mt.tabIndex=-1,cV(z)&&(Mt.classList.add("selected"),e.selectedDateElem=Mt,"range"===e.config.mode&&(sa(Mt,"startRange",e.selectedDates[0]&&0===_l(z,e.selectedDates[0],!0)),sa(Mt,"endRange",e.selectedDates[1]&&0===_l(z,e.selectedDates[1],!0)),"nextMonthDay"===j&&Mt.classList.add("inRange")))):Mt.classList.add("flatpickr-disabled"),"range"===e.config.mode&&function Jae(j){return!("range"!==e.config.mode||e.selectedDates.length<2)&&_l(j,e.selectedDates[0])>=0&&_l(j,e.selectedDates[1])<=0}(z)&&!cV(z)&&Mt.classList.add("inRange"),e.weekNumbers&&1===e.config.showMonths&&"prevMonthDay"!==j&&ke%7==6&&e.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+e.config.getWeek(z)+"</span>"),Pr("onDayCreate",Mt),Mt}function ot(j){j.focus(),"range"===e.config.mode&&gD(j)}function tt(j){for(var de=j>0?e.config.showMonths:-1,ke=j>0?0:e.config.showMonths-1;ke!=de;ke+=j)for(var pt=e.daysContainer.children[ke],Cn=j>0?pt.children.length:-1,$t=j>0?0:pt.children.length-1;$t!=Cn;$t+=j){var Bn=pt.children[$t];if(-1===Bn.className.indexOf("hidden")&&kr(Bn.dateObj))return Bn}}function Tt(j,z){var de=s(),ke=rs(de||document.body),pt=void 0!==j?j:ke?de:void 0!==e.selectedDateElem&&rs(e.selectedDateElem)?e.selectedDateElem:void 0!==e.todayDateElem&&rs(e.todayDateElem)?e.todayDateElem:tt(z>0?1:-1);void 0===pt?e._input.focus():ke?function _t(j,z){for(var de=-1===j.className.indexOf("Month")?j.dateObj.getMonth():e.currentMonth,ke=z>0?e.config.showMonths:-1,pt=z>0?1:-1,Mt=de-e.currentMonth;Mt!=ke;Mt+=pt)for(var Cn=e.daysContainer.children[Mt],Bn=Cn.children.length,Vt=de-e.currentMonth===Mt?j.$i+z:z<0?Cn.children.length-1:0;Vt>=0&&Vt<Bn&&Vt!=(z>0?Bn:-1);Vt+=pt){var cn=Cn.children[Vt];if(-1===cn.className.indexOf("hidden")&&kr(cn.dateObj)&&Math.abs(j.$i-Vt)>=Math.abs(z))return ot(cn)}e.changeMonth(pt),Tt(tt(pt),0)}(pt,z):ot(pt)}function st(j,z){for(var de=(new Date(j,z,1).getDay()-e.l10n.firstDayOfWeek+7)%7,ke=e.utils.getDaysInMonth((z-1+12)%12,j),pt=e.utils.getDaysInMonth(z,j),Mt=window.document.createDocumentFragment(),Cn=e.config.showMonths>1,$t=Cn?"prevMonthDay hidden":"prevMonthDay",Bn=Cn?"nextMonthDay hidden":"nextMonthDay",Vt=ke+1-de,cn=0;Vt<=ke;Vt++,cn++)Mt.appendChild(Be("flatpickr-day "+$t,new Date(j,z-1,Vt),0,cn));for(Vt=1;Vt<=pt;Vt++,cn++)Mt.appendChild(Be("flatpickr-day",new Date(j,z,Vt),0,cn));for(var Ui=pt+1;Ui<=42-de&&(1===e.config.showMonths||cn%7!=0);Ui++,cn++)Mt.appendChild(Be("flatpickr-day "+Bn,new Date(j,z+1,Ui%pt),0,cn));var rh=li("div","dayContainer");return rh.appendChild(Mt),rh}function nt(){if(void 0!==e.daysContainer){RR(e.daysContainer),e.weekNumbers&&RR(e.weekNumbers);for(var j=document.createDocumentFragment(),z=0;z<e.config.showMonths;z++){var de=new Date(e.currentYear,e.currentMonth,1);de.setMonth(e.currentMonth+z),j.appendChild(st(de.getFullYear(),de.getMonth()))}e.daysContainer.appendChild(j),e.days=e.daysContainer.firstChild,"range"===e.config.mode&&1===e.selectedDates.length&&gD()}}function Zt(){if(!(e.config.showMonths>1||"dropdown"!==e.config.monthSelectorType)){e.monthsDropdownContainer.tabIndex=-1,e.monthsDropdownContainer.innerHTML="";for(var z=0;z<12;z++)if(ke=z,!(void 0!==e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&ke<e.config.minDate.getMonth()||void 0!==e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()&&ke>e.config.maxDate.getMonth())){var de=li("option","flatpickr-monthDropdown-month");de.value=new Date(e.currentYear,z).getMonth().toString(),de.textContent=kR(z,e.config.shorthandCurrentMonth,e.l10n),de.tabIndex=-1,e.currentMonth===z&&(de.selected=!0),e.monthsDropdownContainer.appendChild(de)}}var ke}function Mn(){var de,j=li("div","flatpickr-month"),z=window.document.createDocumentFragment();e.config.showMonths>1||"static"===e.config.monthSelectorType?de=li("span","cur-month"):(e.monthsDropdownContainer=li("select","flatpickr-monthDropdown-months"),e.monthsDropdownContainer.setAttribute("aria-label",e.l10n.monthAriaLabel),F(e.monthsDropdownContainer,"change",function(Cn){var $t=ml(Cn),Bn=parseInt($t.value,10);e.changeMonth(Bn-e.currentMonth),Pr("onMonthChange")}),Zt(),de=e.monthsDropdownContainer);var ke=OR("cur-year",{tabindex:"-1"}),pt=ke.getElementsByTagName("input")[0];pt.setAttribute("aria-label",e.l10n.yearAriaLabel),e.config.minDate&&pt.setAttribute("min",e.config.minDate.getFullYear().toString()),e.config.maxDate&&(pt.setAttribute("max",e.config.maxDate.getFullYear().toString()),pt.disabled=!!e.config.minDate&&e.config.minDate.getFullYear()===e.config.maxDate.getFullYear());var Mt=li("div","flatpickr-current-month");return Mt.appendChild(de),Mt.appendChild(ke),z.appendChild(Mt),j.appendChild(z),{container:j,yearElement:pt,monthElement:de}}function go(){RR(e.monthNav),e.monthNav.appendChild(e.prevMonthNav),e.config.showMonths&&(e.yearElements=[],e.monthElements=[]);for(var j=e.config.showMonths;j--;){var z=Mn();e.yearElements.push(z.yearElement),e.monthElements.push(z.monthElement),e.monthNav.appendChild(z.container)}e.monthNav.appendChild(e.nextMonthNav)}function Ht(){e.weekdayContainer?RR(e.weekdayContainer):e.weekdayContainer=li("div","flatpickr-weekdays");for(var j=e.config.showMonths;j--;){var z=li("div","flatpickr-weekdaycontainer");e.weekdayContainer.appendChild(z)}return jt(),e.weekdayContainer}function jt(){if(e.weekdayContainer){var j=e.l10n.firstDayOfWeek,z=ZG(e.l10n.weekdays.shorthand);j>0&&j<z.length&&(z=ZG(z.splice(j,z.length),z.splice(0,j)));for(var de=e.config.showMonths;de--;)e.weekdayContainer.children[de].innerHTML="\n      <span class='flatpickr-weekday'>\n        "+z.join("</span><span class='flatpickr-weekday'>")+"\n      </span>\n      "}}function wi(j,z){void 0===z&&(z=!0);var de=z?j:j-e.currentMonth;de<0&&!0===e._hidePrevMonthArrow||de>0&&!0===e._hideNextMonthArrow||(e.currentMonth+=de,(e.currentMonth<0||e.currentMonth>11)&&(e.currentYear+=e.currentMonth>11?1:-1,e.currentMonth=(e.currentMonth+12)%12,Pr("onYearChange"),Zt()),nt(),Pr("onMonthChange"),$O())}function Cs(j){return e.calendarContainer.contains(j)}function Dl(j){if(e.isOpen&&!e.config.inline){var z=ml(j),de=Cs(z),pt=!(z===e.input||z===e.altInput||e.element.contains(z)||j.path&&j.path.indexOf&&(~j.path.indexOf(e.input)||~j.path.indexOf(e.altInput))||de||Cs(j.relatedTarget)),Mt=!e.config.ignoredFocusElements.some(function(Cn){return Cn.contains(z)});pt&&Mt&&(e.config.allowInput&&e.setDate(e._input.value,!1,e.config.altInput?e.config.altFormat:e.config.dateFormat),void 0!==e.timeContainer&&void 0!==e.minuteElement&&void 0!==e.hourElement&&""!==e.input.value&&void 0!==e.input.value&&f(),e.close(),e.config&&"range"===e.config.mode&&1===e.selectedDates.length&&e.clear(!1))}}function Ki(j){if(!(!j||e.config.minDate&&j<e.config.minDate.getFullYear()||e.config.maxDate&&j>e.config.maxDate.getFullYear())){var de=e.currentYear!==j;e.currentYear=j||e.currentYear,e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth=Math.min(e.config.maxDate.getMonth(),e.currentMonth):e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&(e.currentMonth=Math.max(e.config.minDate.getMonth(),e.currentMonth)),de&&(e.redraw(),Pr("onYearChange"),Zt())}}function kr(j,z){var de;void 0===z&&(z=!0);var ke=e.parseDate(j,void 0,z);if(e.config.minDate&&ke&&_l(ke,e.config.minDate,void 0!==z?z:!e.minDateHasTime)<0||e.config.maxDate&&ke&&_l(ke,e.config.maxDate,void 0!==z?z:!e.maxDateHasTime)>0)return!1;if(!e.config.enable&&0===e.config.disable.length)return!0;if(void 0===ke)return!1;for(var pt=!!e.config.enable,Mt=null!==(de=e.config.enable)&&void 0!==de?de:e.config.disable,Cn=0,$t=void 0;Cn<Mt.length;Cn++){if("function"==typeof($t=Mt[Cn])&&$t(ke))return pt;if($t instanceof Date&&void 0!==ke&&$t.getTime()===ke.getTime())return pt;if("string"==typeof $t){var Bn=e.parseDate($t,void 0,!0);return Bn&&Bn.getTime()===ke.getTime()?pt:!pt}if("object"==typeof $t&&void 0!==ke&&$t.from&&$t.to&&ke.getTime()>=$t.from.getTime()&&ke.getTime()<=$t.to.getTime())return pt}return!pt}function rs(j){return void 0!==e.daysContainer&&-1===j.className.indexOf("hidden")&&-1===j.className.indexOf("flatpickr-disabled")&&e.daysContainer.contains(j)}function Am(j){var z=j.target===e._input,de=e._input.value.trimEnd()!==uV();z&&de&&(!j.relatedTarget||!Cs(j.relatedTarget))&&e.setDate(e._input.value,!0,j.target===e.altInput?e.config.altFormat:e.config.dateFormat)}function ih(j){var z=ml(j),de=e.config.wrap?n.contains(z):z===e._input,ke=e.config.allowInput,pt=e.isOpen&&(!ke||!de),Mt=e.config.inline&&de&&!ke;if(13===j.keyCode&&de){if(ke)return e.setDate(e._input.value,!0,z===e.altInput?e.config.altFormat:e.config.dateFormat),e.close(),z.blur();e.open()}else if(Cs(z)||pt||Mt){var Cn=!!e.timeContainer&&e.timeContainer.contains(z);switch(j.keyCode){case 13:Cn?(j.preventDefault(),f(),vD()):yD(j);break;case 27:j.preventDefault(),vD();break;case 8:case 46:de&&!e.config.allowInput&&(j.preventDefault(),e.clear());break;case 37:case 39:if(Cn||de)e.hourElement&&e.hourElement.focus();else{j.preventDefault();var $t=s();if(void 0!==e.daysContainer&&(!1===ke||$t&&rs($t))){var Bn=39===j.keyCode?1:-1;j.ctrlKey?(j.stopPropagation(),wi(Bn),Tt(tt(1),0)):Tt(void 0,Bn)}}break;case 38:case 40:j.preventDefault();var Vt=40===j.keyCode?1:-1;e.daysContainer&&void 0!==z.$i||z===e.input||z===e.altInput?j.ctrlKey?(j.stopPropagation(),Ki(e.currentYear-Vt),Tt(tt(1),0)):Cn||Tt(void 0,7*Vt):z===e.currentYearElement?Ki(e.currentYear-Vt):e.config.enableTime&&(!Cn&&e.hourElement&&e.hourElement.focus(),f(j),e._debouncedChange());break;case 9:if(Cn){var cn=[e.hourElement,e.minuteElement,e.secondElement,e.amPM].concat(e.pluginElements).filter(function(El){return El}),Ui=cn.indexOf(z);if(-1!==Ui){var rh=cn[Ui+(j.shiftKey?-1:1)];j.preventDefault(),(rh||e._input).focus()}}else!e.config.noCalendar&&e.daysContainer&&e.daysContainer.contains(z)&&j.shiftKey&&(j.preventDefault(),e._input.focus())}}if(void 0!==e.amPM&&z===e.amPM)switch(j.key){case e.l10n.amPM[0].charAt(0):case e.l10n.amPM[0].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[0],C(),Qf();break;case e.l10n.amPM[1].charAt(0):case e.l10n.amPM[1].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[1],C(),Qf()}(de||Cs(z))&&Pr("onKeyDown",j)}function gD(j,z){if(void 0===z&&(z="flatpickr-day"),1===e.selectedDates.length&&(!j||j.classList.contains(z)&&!j.classList.contains("flatpickr-disabled"))){for(var de=j?j.dateObj.getTime():e.days.firstElementChild.dateObj.getTime(),ke=e.parseDate(e.selectedDates[0],void 0,!0).getTime(),pt=Math.min(de,e.selectedDates[0].getTime()),Mt=Math.max(de,e.selectedDates[0].getTime()),Cn=!1,$t=0,Bn=0,Vt=pt;Vt<Mt;Vt+=DK.DAY)kr(new Date(Vt),!0)||(Cn=Cn||Vt>pt&&Vt<Mt,Vt<ke&&(!$t||Vt>$t)?$t=Vt:Vt>ke&&(!Bn||Vt<Bn)&&(Bn=Vt));Array.from(e.rContainer.querySelectorAll("*:nth-child(-n+"+e.config.showMonths+") > ."+z)).forEach(function(Ui){var El=Ui.dateObj.getTime(),a1=$t>0&&El<$t||Bn>0&&El>Bn;if(a1)return Ui.classList.add("notAllowed"),void["inRange","startRange","endRange"].forEach(function(wD){Ui.classList.remove(wD)});Cn&&!a1||(["startRange","inRange","endRange","notAllowed"].forEach(function(wD){Ui.classList.remove(wD)}),void 0!==j&&(j.classList.add(de<=e.selectedDates[0].getTime()?"startRange":"endRange"),ke<de&&El===ke?Ui.classList.add("startRange"):ke>de&&El===ke&&Ui.classList.add("endRange"),El>=$t&&(0===Bn||El<=Bn)&&wK(El,ke,de)&&Ui.classList.add("inRange")))})}}function BO(){e.isOpen&&!e.config.static&&!e.config.inline&&mD()}function VO(j){return function(z){var de=e.config["_"+j+"Date"]=e.parseDate(z,e.config.dateFormat),ke=e.config["_"+("min"===j?"max":"min")+"Date"];void 0!==de&&(e["min"===j?"minDateHasTime":"maxDateHasTime"]=de.getHours()>0||de.getMinutes()>0||de.getSeconds()>0),e.selectedDates&&(e.selectedDates=e.selectedDates.filter(function(pt){return kr(pt)}),!e.selectedDates.length&&"min"===j&&A(de),Qf()),e.daysContainer&&(s1(),void 0!==de?e.currentYearElement[j]=de.getFullYear().toString():e.currentYearElement.removeAttribute(j),e.currentYearElement.disabled=!!ke&&void 0!==de&&ke.getFullYear()===de.getFullYear())}}function r1(){return e.config.wrap?n.querySelector("[data-input]"):n}function HO(){"object"!=typeof e.config.locale&&typeof bs.l10ns[e.config.locale]>"u"&&e.config.errorHandler(new Error("flatpickr: invalid locale "+e.config.locale)),e.l10n=Lo(Lo({},bs.l10ns.default),"object"==typeof e.config.locale?e.config.locale:"default"!==e.config.locale?bs.l10ns[e.config.locale]:void 0),sy.D="("+e.l10n.weekdays.shorthand.join("|")+")",sy.l="("+e.l10n.weekdays.longhand.join("|")+")",sy.M="("+e.l10n.months.shorthand.join("|")+")",sy.F="("+e.l10n.months.longhand.join("|")+")",sy.K="("+e.l10n.amPM[0]+"|"+e.l10n.amPM[1]+"|"+e.l10n.amPM[0].toLowerCase()+"|"+e.l10n.amPM[1].toLowerCase()+")",void 0===Lo(Lo({},t),JSON.parse(JSON.stringify(n.dataset||{}))).time_24hr&&void 0===bs.defaultConfig.time_24hr&&(e.config.time_24hr=e.l10n.time_24hr),e.formatDate=YG(e),e.parseDate=x2({config:e.config,l10n:e.l10n})}function mD(j){if("function"!=typeof e.config.position){if(void 0!==e.calendarContainer){Pr("onPreCalendarPosition");var z=j||e._positionElement,de=Array.prototype.reduce.call(e.calendarContainer.children,function(lle,cle){return lle+cle.offsetHeight},0),ke=e.calendarContainer.offsetWidth,pt=e.config.position.split(" "),Mt=pt[0],Cn=pt.length>1?pt[1]:null,$t=z.getBoundingClientRect(),Bn=window.innerHeight-$t.bottom,Vt="above"===Mt||"below"!==Mt&&Bn<de&&$t.top>de,cn=window.pageYOffset+$t.top+(Vt?-de-2:z.offsetHeight+2);if(sa(e.calendarContainer,"arrowTop",!Vt),sa(e.calendarContainer,"arrowBottom",Vt),!e.config.inline){var Ui=window.pageXOffset+$t.left,rh=!1,El=!1;"center"===Cn?(Ui-=(ke-$t.width)/2,rh=!0):"right"===Cn&&(Ui-=ke-$t.width,El=!0),sa(e.calendarContainer,"arrowLeft",!rh&&!El),sa(e.calendarContainer,"arrowCenter",rh),sa(e.calendarContainer,"arrowRight",El);var a1=window.document.body.offsetWidth-(window.pageXOffset+$t.right),wD=Ui+ke>window.document.body.offsetWidth,tle=a1+ke>window.document.body.offsetWidth;if(sa(e.calendarContainer,"rightMost",wD),!e.config.static)if(e.calendarContainer.style.top=cn+"px",wD)if(tle){var dV=function Kf(){for(var j=null,z=0;z<document.styleSheets.length;z++){var de=document.styleSheets[z];if(de.cssRules){j=de;break}}return j??function _D(){var j=document.createElement("style");return document.head.appendChild(j),j.sheet}()}();if(void 0===dV)return;var nle=window.document.body.offsetWidth,ile=Math.max(0,nle/2-ke/2),ole=dV.cssRules.length,ale="{left:"+$t.left+"px;right:auto;}";sa(e.calendarContainer,"rightMost",!1),sa(e.calendarContainer,"centerMost",!0),dV.insertRule(".flatpickr-calendar.centerMost:before,.flatpickr-calendar.centerMost:after"+ale,ole),e.calendarContainer.style.left=ile+"px",e.calendarContainer.style.right="auto"}else e.calendarContainer.style.left="auto",e.calendarContainer.style.right=a1+"px";else e.calendarContainer.style.left=Ui+"px",e.calendarContainer.style.right="auto"}}}else e.config.position(e,j)}function s1(){e.config.noCalendar||e.isMobile||(Zt(),$O(),nt())}function vD(){e._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(e.close,0):e.close()}function yD(j){j.preventDefault(),j.stopPropagation();var de=qG(ml(j),function(cn){return cn.classList&&cn.classList.contains("flatpickr-day")&&!cn.classList.contains("flatpickr-disabled")&&!cn.classList.contains("notAllowed")});if(void 0!==de){var ke=de,pt=e.latestSelectedDateObj=new Date(ke.dateObj.getTime()),Mt=(pt.getMonth()<e.currentMonth||pt.getMonth()>e.currentMonth+e.config.showMonths-1)&&"range"!==e.config.mode;if(e.selectedDateElem=ke,"single"===e.config.mode)e.selectedDates=[pt];else if("multiple"===e.config.mode){var Cn=cV(pt);Cn?e.selectedDates.splice(parseInt(Cn),1):e.selectedDates.push(pt)}else"range"===e.config.mode&&(2===e.selectedDates.length&&e.clear(!1,!1),e.latestSelectedDateObj=pt,e.selectedDates.push(pt),0!==_l(pt,e.selectedDates[0],!0)&&e.selectedDates.sort(function(cn,Ui){return cn.getTime()-Ui.getTime()}));if(C(),Mt){var $t=e.currentYear!==pt.getFullYear();e.currentYear=pt.getFullYear(),e.currentMonth=pt.getMonth(),$t&&(Pr("onYearChange"),Zt()),Pr("onMonthChange")}$O(),nt(),Qf(),Mt||"range"===e.config.mode||1!==e.config.showMonths?void 0!==e.selectedDateElem&&void 0===e.hourElement&&e.selectedDateElem&&e.selectedDateElem.focus():ot(ke),void 0!==e.hourElement&&void 0!==e.hourElement&&e.hourElement.focus(),e.config.closeOnSelect&&("single"===e.config.mode&&!e.config.enableTime||"range"===e.config.mode&&2===e.selectedDates.length&&!e.config.enableTime)&&vD(),U()}}e.parseDate=x2({config:e.config,l10n:e.l10n}),e._handlers=[],e.pluginElements=[],e.loadedPlugins=[],e._bind=F,e._setHoursFromDate=A,e._positionCalendar=mD,e.changeMonth=wi,e.changeYear=Ki,e.clear=function or(j,z){if(void 0===j&&(j=!0),void 0===z&&(z=!0),e.input.value="",void 0!==e.altInput&&(e.altInput.value=""),void 0!==e.mobileInput&&(e.mobileInput.value=""),e.selectedDates=[],e.latestSelectedDateObj=void 0,!0===z&&(e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth()),!0===e.config.enableTime){var de=O2(e.config);x(de.hours,de.minutes,de.seconds)}e.redraw(),j&&Pr("onChange")},e.close=function mo(){e.isOpen=!1,e.isMobile||(void 0!==e.calendarContainer&&e.calendarContainer.classList.remove("open"),void 0!==e._input&&e._input.classList.remove("active")),Pr("onClose")},e.onMouseOver=gD,e._createElement=li,e.createDay=Be,e.destroy=function $n(){void 0!==e.config&&Pr("onDestroy");for(var j=e._handlers.length;j--;)e._handlers[j].remove();if(e._handlers=[],e.mobileInput)e.mobileInput.parentNode&&e.mobileInput.parentNode.removeChild(e.mobileInput),e.mobileInput=void 0;else if(e.calendarContainer&&e.calendarContainer.parentNode)if(e.config.static&&e.calendarContainer.parentNode){var z=e.calendarContainer.parentNode;if(z.lastChild&&z.removeChild(z.lastChild),z.parentNode){for(;z.firstChild;)z.parentNode.insertBefore(z.firstChild,z);z.parentNode.removeChild(z)}}else e.calendarContainer.parentNode.removeChild(e.calendarContainer);e.altInput&&(e.input.type="text",e.altInput.parentNode&&e.altInput.parentNode.removeChild(e.altInput),delete e.altInput),e.input&&(e.input.type=e.input._type,e.input.classList.remove("flatpickr-input"),e.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(de){try{delete e[de]}catch{}})},e.isEnabled=kr,e.jumpToDate=oe,e.updateValue=Qf,e.open=function aV(j,z){if(void 0===z&&(z=e._positionElement),!0===e.isMobile){if(j){j.preventDefault();var de=ml(j);de&&de.blur()}return void 0!==e.mobileInput&&(e.mobileInput.focus(),e.mobileInput.click()),void Pr("onOpen")}if(!e._input.disabled&&!e.config.inline){var ke=e.isOpen;e.isOpen=!0,ke||(e.calendarContainer.classList.add("open"),e._input.classList.add("active"),Pr("onOpen"),mD(z)),!0===e.config.enableTime&&!0===e.config.noCalendar&&!1===e.config.allowInput&&(void 0===j||!e.timeContainer.contains(j.relatedTarget))&&setTimeout(function(){return e.hourElement.select()},50)}},e.redraw=s1,e.set=function jO(j,z){if(null!==j&&"object"==typeof j)for(var de in Object.assign(e.config,j),j)void 0!==Iy[de]&&Iy[de].forEach(function(ke){return ke()});else e.config[j]=z,void 0!==Iy[j]?Iy[j].forEach(function(ke){return ke()}):I2.indexOf(j)>-1&&(e.config[j]=M2(z));e.redraw(),Qf(!0)},e.setDate=function GO(j,z,de){if(void 0===z&&(z=!1),void 0===de&&(de=e.config.dateFormat),0!==j&&!j||j instanceof Array&&0===j.length)return e.clear(z);o1(j,de),e.latestSelectedDateObj=e.selectedDates[e.selectedDates.length-1],e.redraw(),oe(void 0,z),A(),0===e.selectedDates.length&&e.clear(!1),Qf(z),z&&Pr("onChange")},e.toggle=function Qae(j){if(!0===e.isOpen)return e.close();e.open(j)};var Iy={locale:[HO,jt],showMonths:[go,d,Ht],minDate:[oe],maxDate:[oe],positionElement:[O4],clickOpens:[function(){!0===e.config.clickOpens?(F(e._input,"focus",e.open),F(e._input,"click",e.open)):(e._input.removeEventListener("focus",e.open),e._input.removeEventListener("click",e.open))}]};function o1(j,z){var de=[];if(j instanceof Array)de=j.map(function(ke){return e.parseDate(ke,z)});else if(j instanceof Date||"number"==typeof j)de=[e.parseDate(j,z)];else if("string"==typeof j)switch(e.config.mode){case"single":case"time":de=[e.parseDate(j,z)];break;case"multiple":de=j.split(e.config.conjunction).map(function(ke){return e.parseDate(ke,z)});break;case"range":de=j.split(e.l10n.rangeSeparator).map(function(ke){return e.parseDate(ke,z)})}else e.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(j)));e.selectedDates=e.config.allowInvalidPreload?de:de.filter(function(ke){return ke instanceof Date&&kr(ke,!1)}),"range"===e.config.mode&&e.selectedDates.sort(function(ke,pt){return ke.getTime()-pt.getTime()})}function R4(j){return j.slice().map(function(z){return"string"==typeof z||"number"==typeof z||z instanceof Date?e.parseDate(z,void 0,!0):z&&"object"==typeof z&&z.from&&z.to?{from:e.parseDate(z.from,void 0),to:e.parseDate(z.to,void 0)}:z}).filter(function(z){return z})}function O4(){e._positionElement=e.config.positionElement||e._input}function Pr(j,z){if(void 0!==e.config){var de=e.config[j];if(void 0!==de&&de.length>0)for(var ke=0;de[ke]&&ke<de.length;ke++)de[ke](e.selectedDates,e.input.value,e,z);"onChange"===j&&(e.input.dispatchEvent(lV("change")),e.input.dispatchEvent(lV("input")))}}function lV(j){var z=document.createEvent("Event");return z.initEvent(j,!0,!0),z}function cV(j){for(var z=0;z<e.selectedDates.length;z++){var de=e.selectedDates[z];if(de instanceof Date&&0===_l(de,j))return""+z}return!1}function $O(){e.config.noCalendar||e.isMobile||!e.monthNav||(e.yearElements.forEach(function(j,z){var de=new Date(e.currentYear,e.currentMonth,1);de.setMonth(e.currentMonth+z),e.config.showMonths>1||"static"===e.config.monthSelectorType?e.monthElements[z].textContent=kR(de.getMonth(),e.config.shorthandCurrentMonth,e.l10n)+" ":e.monthsDropdownContainer.value=de.getMonth().toString(),j.value=de.getFullYear().toString()}),e._hidePrevMonthArrow=void 0!==e.config.minDate&&(e.currentYear===e.config.minDate.getFullYear()?e.currentMonth<=e.config.minDate.getMonth():e.currentYear<e.config.minDate.getFullYear()),e._hideNextMonthArrow=void 0!==e.config.maxDate&&(e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth+1>e.config.maxDate.getMonth():e.currentYear>e.config.maxDate.getFullYear()))}function uV(j){var z=j||(e.config.altInput?e.config.altFormat:e.config.dateFormat);return e.selectedDates.map(function(de){return e.formatDate(de,z)}).filter(function(de,ke,pt){return"range"!==e.config.mode||e.config.enableTime||pt.indexOf(de)===ke}).join("range"!==e.config.mode?e.config.conjunction:e.l10n.rangeSeparator)}function Qf(j){void 0===j&&(j=!0),void 0!==e.mobileInput&&e.mobileFormatStr&&(e.mobileInput.value=void 0!==e.latestSelectedDateObj?e.formatDate(e.latestSelectedDateObj,e.mobileFormatStr):""),e.input.value=uV(e.config.dateFormat),void 0!==e.altInput&&(e.altInput.value=uV(e.config.altFormat)),!1!==j&&Pr("onValueUpdate")}function Xae(j){var z=ml(j),de=e.prevMonthNav.contains(z),ke=e.nextMonthNav.contains(z);de||ke?wi(de?-1:1):e.yearElements.indexOf(z)>=0?z.select():z.classList.contains("arrowUp")?e.changeYear(e.currentYear+1):z.classList.contains("arrowDown")&&e.changeYear(e.currentYear-1)}return function r(){e.element=e.input=n,e.isOpen=!1,function UO(){var j=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],z=Lo(Lo({},JSON.parse(JSON.stringify(n.dataset||{}))),t),de={};e.config.parseDate=z.parseDate,e.config.formatDate=z.formatDate,Object.defineProperty(e.config,"enable",{get:function(){return e.config._enable},set:function(cn){e.config._enable=R4(cn)}}),Object.defineProperty(e.config,"disable",{get:function(){return e.config._disable},set:function(cn){e.config._disable=R4(cn)}});var ke="time"===z.mode;z.dateFormat||!z.enableTime&&!ke||(de.dateFormat=z.noCalendar||ke?"H:i"+(z.enableSeconds?":S":""):(bs.defaultConfig.dateFormat||Gb.dateFormat)+" H:i"+(z.enableSeconds?":S":"")),z.altInput&&(z.enableTime||ke)&&!z.altFormat&&(de.altFormat=z.noCalendar||ke?"h:i"+(z.enableSeconds?":S K":" K"):(bs.defaultConfig.altFormat||Gb.altFormat)+" h:i"+(z.enableSeconds?":S":"")+" K"),Object.defineProperty(e.config,"minDate",{get:function(){return e.config._minDate},set:VO("min")}),Object.defineProperty(e.config,"maxDate",{get:function(){return e.config._maxDate},set:VO("max")});var Cn=function(cn){return function(Ui){e.config["min"===cn?"_minTime":"_maxTime"]=e.parseDate(Ui,"H:i:S")}};Object.defineProperty(e.config,"minTime",{get:function(){return e.config._minTime},set:Cn("min")}),Object.defineProperty(e.config,"maxTime",{get:function(){return e.config._maxTime},set:Cn("max")}),"time"===z.mode&&(e.config.noCalendar=!0,e.config.enableTime=!0),Object.assign(e.config,de,z);for(var $t=0;$t<j.length;$t++)e.config[j[$t]]=!0===e.config[j[$t]]||"true"===e.config[j[$t]];for(I2.filter(function(cn){return void 0!==e.config[cn]}).forEach(function(cn){e.config[cn]=M2(e.config[cn]||[]).map(l)}),e.isMobile=!e.config.disableMobile&&!e.config.inline&&"single"===e.config.mode&&!e.config.disable.length&&!e.config.enable&&!e.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),$t=0;$t<e.config.plugins.length;$t++){var Bn=e.config.plugins[$t](e)||{};for(var Vt in Bn)I2.indexOf(Vt)>-1?e.config[Vt]=M2(Bn[Vt]).map(l).concat(e.config[Vt]):typeof z[Vt]>"u"&&(e.config[Vt]=Bn[Vt])}z.altInputClass||(e.config.altInputClass=r1().className+" "+e.config.altInputClass),Pr("onParseConfig")}(),HO(),function Zae(){e.input=r1(),e.input?(e.input._type=e.input.type,e.input.type="text",e.input.classList.add("flatpickr-input"),e._input=e.input,e.config.altInput&&(e.altInput=li(e.input.nodeName,e.config.altInputClass),e._input=e.altInput,e.altInput.placeholder=e.input.placeholder,e.altInput.disabled=e.input.disabled,e.altInput.required=e.input.required,e.altInput.tabIndex=e.input.tabIndex,e.altInput.type="text",e.input.setAttribute("type","hidden"),!e.config.static&&e.input.parentNode&&e.input.parentNode.insertBefore(e.altInput,e.input.nextSibling)),e.config.allowInput||e._input.setAttribute("readonly","readonly"),O4()):e.config.errorHandler(new Error("Invalid input element specified"))}(),function Yae(){e.selectedDates=[],e.now=e.parseDate(e.config.now)||new Date;var j=e.config.defaultDate||("INPUT"!==e.input.nodeName&&"TEXTAREA"!==e.input.nodeName||!e.input.placeholder||e.input.value!==e.input.placeholder?e.input.value:null);j&&o1(j,e.config.dateFormat),e._initialDate=e.selectedDates.length>0?e.selectedDates[0]:e.config.minDate&&e.config.minDate.getTime()>e.now.getTime()?e.config.minDate:e.config.maxDate&&e.config.maxDate.getTime()<e.now.getTime()?e.config.maxDate:e.now,e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth(),e.selectedDates.length>0&&(e.latestSelectedDateObj=e.selectedDates[0]),void 0!==e.config.minTime&&(e.config.minTime=e.parseDate(e.config.minTime,"H:i")),void 0!==e.config.maxTime&&(e.config.maxTime=e.parseDate(e.config.maxTime,"H:i")),e.minDateHasTime=!!e.config.minDate&&(e.config.minDate.getHours()>0||e.config.minDate.getMinutes()>0||e.config.minDate.getSeconds()>0),e.maxDateHasTime=!!e.config.maxDate&&(e.config.maxDate.getHours()>0||e.config.maxDate.getMinutes()>0||e.config.maxDate.getSeconds()>0)}(),function i(){e.utils={getDaysInMonth:function(j,z){return void 0===j&&(j=e.currentMonth),void 0===z&&(z=e.currentYear),1===j&&(z%4==0&&z%100!=0||z%400==0)?29:e.l10n.daysInMonth[j]}}}(),e.isMobile||function Ne(){var j=window.document.createDocumentFragment();if(e.calendarContainer=li("div","flatpickr-calendar"),e.calendarContainer.tabIndex=-1,!e.config.noCalendar){if(j.appendChild(function gt(){return e.monthNav=li("div","flatpickr-months"),e.yearElements=[],e.monthElements=[],e.prevMonthNav=li("span","flatpickr-prev-month"),e.prevMonthNav.innerHTML=e.config.prevArrow,e.nextMonthNav=li("span","flatpickr-next-month"),e.nextMonthNav.innerHTML=e.config.nextArrow,go(),Object.defineProperty(e,"_hidePrevMonthArrow",{get:function(){return e.__hidePrevMonthArrow},set:function(j){e.__hidePrevMonthArrow!==j&&(sa(e.prevMonthNav,"flatpickr-disabled",j),e.__hidePrevMonthArrow=j)}}),Object.defineProperty(e,"_hideNextMonthArrow",{get:function(){return e.__hideNextMonthArrow},set:function(j){e.__hideNextMonthArrow!==j&&(sa(e.nextMonthNav,"flatpickr-disabled",j),e.__hideNextMonthArrow=j)}}),e.currentYearElement=e.yearElements[0],$O(),e.monthNav}()),e.innerContainer=li("div","flatpickr-innerContainer"),e.config.weekNumbers){var z=function ii(){e.calendarContainer.classList.add("hasWeeks");var j=li("div","flatpickr-weekwrapper");j.appendChild(li("span","flatpickr-weekday",e.l10n.weekAbbreviation));var z=li("div","flatpickr-weeks");return j.appendChild(z),{weekWrapper:j,weekNumbers:z}}(),de=z.weekWrapper,ke=z.weekNumbers;e.innerContainer.appendChild(de),e.weekNumbers=ke,e.weekWrapper=de}e.rContainer=li("div","flatpickr-rContainer"),e.rContainer.appendChild(Ht()),e.daysContainer||(e.daysContainer=li("div","flatpickr-days"),e.daysContainer.tabIndex=-1),nt(),e.rContainer.appendChild(e.daysContainer),e.innerContainer.appendChild(e.rContainer),j.appendChild(e.innerContainer)}e.config.enableTime&&j.appendChild(function St(){e.calendarContainer.classList.add("hasTime"),e.config.noCalendar&&e.calendarContainer.classList.add("noCalendar");var j=O2(e.config);e.timeContainer=li("div","flatpickr-time"),e.timeContainer.tabIndex=-1;var z=li("span","flatpickr-time-separator",":"),de=OR("flatpickr-hour",{"aria-label":e.l10n.hourAriaLabel});e.hourElement=de.getElementsByTagName("input")[0];var ke=OR("flatpickr-minute",{"aria-label":e.l10n.minuteAriaLabel});if(e.minuteElement=ke.getElementsByTagName("input")[0],e.hourElement.tabIndex=e.minuteElement.tabIndex=-1,e.hourElement.value=Aa(e.latestSelectedDateObj?e.latestSelectedDateObj.getHours():e.config.time_24hr?j.hours:function y(j){switch(j%24){case 0:case 12:return 12;default:return j%12}}(j.hours)),e.minuteElement.value=Aa(e.latestSelectedDateObj?e.latestSelectedDateObj.getMinutes():j.minutes),e.hourElement.setAttribute("step",e.config.hourIncrement.toString()),e.minuteElement.setAttribute("step",e.config.minuteIncrement.toString()),e.hourElement.setAttribute("min",e.config.time_24hr?"0":"1"),e.hourElement.setAttribute("max",e.config.time_24hr?"23":"12"),e.hourElement.setAttribute("maxlength","2"),e.minuteElement.setAttribute("min","0"),e.minuteElement.setAttribute("max","59"),e.minuteElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(de),e.timeContainer.appendChild(z),e.timeContainer.appendChild(ke),e.config.time_24hr&&e.timeContainer.classList.add("time24hr"),e.config.enableSeconds){e.timeContainer.classList.add("hasSeconds");var pt=OR("flatpickr-second");e.secondElement=pt.getElementsByTagName("input")[0],e.secondElement.value=Aa(e.latestSelectedDateObj?e.latestSelectedDateObj.getSeconds():j.seconds),e.secondElement.setAttribute("step",e.minuteElement.getAttribute("step")),e.secondElement.setAttribute("min","0"),e.secondElement.setAttribute("max","59"),e.secondElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(li("span","flatpickr-time-separator",":")),e.timeContainer.appendChild(pt)}return e.config.time_24hr||(e.amPM=li("span","flatpickr-am-pm",e.l10n.amPM[pc((e.latestSelectedDateObj?e.hourElement.value:e.config.defaultHour)>11)]),e.amPM.title=e.l10n.toggleTitle,e.amPM.tabIndex=-1,e.timeContainer.appendChild(e.amPM)),e.timeContainer}()),sa(e.calendarContainer,"rangeMode","range"===e.config.mode),sa(e.calendarContainer,"animate",!0===e.config.animate),sa(e.calendarContainer,"multiMonth",e.config.showMonths>1),e.calendarContainer.appendChild(j);var pt=void 0!==e.config.appendTo&&void 0!==e.config.appendTo.nodeType;if((e.config.inline||e.config.static)&&(e.calendarContainer.classList.add(e.config.inline?"inline":"static"),e.config.inline&&(!pt&&e.element.parentNode?e.element.parentNode.insertBefore(e.calendarContainer,e._input.nextSibling):void 0!==e.config.appendTo&&e.config.appendTo.appendChild(e.calendarContainer)),e.config.static)){var Mt=li("div","flatpickr-wrapper");e.element.parentNode&&e.element.parentNode.insertBefore(Mt,e.element),Mt.appendChild(e.element),e.altInput&&Mt.appendChild(e.altInput),Mt.appendChild(e.calendarContainer)}!e.config.static&&!e.config.inline&&(void 0!==e.config.appendTo?e.config.appendTo:window.document.body).appendChild(e.calendarContainer)}(),function ee(){if(e.config.wrap&&["open","close","toggle","clear"].forEach(function(de){Array.prototype.forEach.call(e.element.querySelectorAll("[data-"+de+"]"),function(ke){return F(ke,"click",e[de])})}),e.isMobile)!function Kae(){var j=e.config.enableTime?e.config.noCalendar?"time":"datetime-local":"date";e.mobileInput=li("input",e.input.className+" flatpickr-mobile"),e.mobileInput.tabIndex=1,e.mobileInput.type=j,e.mobileInput.disabled=e.input.disabled,e.mobileInput.required=e.input.required,e.mobileInput.placeholder=e.input.placeholder,e.mobileFormatStr="datetime-local"===j?"Y-m-d\\TH:i:S":"date"===j?"Y-m-d":"H:i:S",e.selectedDates.length>0&&(e.mobileInput.defaultValue=e.mobileInput.value=e.formatDate(e.selectedDates[0],e.mobileFormatStr)),e.config.minDate&&(e.mobileInput.min=e.formatDate(e.config.minDate,"Y-m-d")),e.config.maxDate&&(e.mobileInput.max=e.formatDate(e.config.maxDate,"Y-m-d")),e.input.getAttribute("step")&&(e.mobileInput.step=String(e.input.getAttribute("step"))),e.input.type="hidden",void 0!==e.altInput&&(e.altInput.type="hidden");try{e.input.parentNode&&e.input.parentNode.insertBefore(e.mobileInput,e.input.nextSibling)}catch{}F(e.mobileInput,"change",function(z){e.setDate(ml(z).value,!1,e.mobileFormatStr),Pr("onChange"),Pr("onClose")})}();else{var j=WG(BO,50);if(e._debouncedChange=WG(U,EK),e.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&F(e.daysContainer,"mouseover",function(de){"range"===e.config.mode&&gD(ml(de))}),F(e._input,"keydown",ih),void 0!==e.calendarContainer&&F(e.calendarContainer,"keydown",ih),!e.config.inline&&!e.config.static&&F(window,"resize",j),void 0!==window.ontouchstart?F(window.document,"touchstart",Dl):F(window.document,"mousedown",Dl),F(window.document,"focus",Dl,{capture:!0}),!0===e.config.clickOpens&&(F(e._input,"focus",e.open),F(e._input,"click",e.open)),void 0!==e.daysContainer&&(F(e.monthNav,"click",Xae),F(e.monthNav,["keyup","increment"],P),F(e.daysContainer,"click",yD)),void 0!==e.timeContainer&&void 0!==e.minuteElement&&void 0!==e.hourElement){F(e.timeContainer,["increment"],f),F(e.timeContainer,"blur",f,{capture:!0}),F(e.timeContainer,"click",te),F([e.hourElement,e.minuteElement],["focus","click"],function(de){return ml(de).select()}),void 0!==e.secondElement&&F(e.secondElement,"focus",function(){return e.secondElement&&e.secondElement.select()}),void 0!==e.amPM&&F(e.amPM,"click",function(de){f(de)})}e.config.allowInput&&F(e._input,"blur",Am)}}(),(e.selectedDates.length||e.config.noCalendar)&&(e.config.enableTime&&A(e.config.noCalendar?e.latestSelectedDateObj:void 0),Qf(!1)),d();var j=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!e.isMobile&&j&&mD(),Pr("onReady")}(),e}function $b(n,t){for(var e=Array.prototype.slice.call(n).filter(function(l){return l instanceof HTMLElement}),i=[],r=0;r<e.length;r++){var s=e[r];try{if(null!==s.getAttribute("data-fp-omit"))continue;void 0!==s._flatpickr&&(s._flatpickr.destroy(),s._flatpickr=void 0),s._flatpickr=CK(s,t||{}),i.push(s._flatpickr)}catch(l){console.error(l)}}return 1===i.length?i[0]:i}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(n){return $b(this,n)},HTMLElement.prototype.flatpickr=function(n){return $b([this],n)});var bs=function(n,t){return"string"==typeof n?$b(window.document.querySelectorAll(n),t):n instanceof Node?$b([n],t):$b(n,t)};bs.defaultConfig={},bs.l10ns={en:Lo({},A2),default:Lo({},A2)},bs.localize=function(n){bs.l10ns.default=Lo(Lo({},bs.l10ns.default),n)},bs.setDefaults=function(n){bs.defaultConfig=Lo(Lo({},bs.defaultConfig),n)},bs.parseDate=x2({}),bs.formatDate=YG({}),bs.compareDates=_l,typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(n){return $b(this,n)}),Date.prototype.fp_incr=function(n){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof n?parseInt(n,10):n))},typeof window<"u"&&(window.flatpickr=bs);const TK=bs;let k2=(()=>{class n{constructor(){this.altFormat="F j, Y",this.altInput=!1,this.altInputClass="",this.allowInput=!1,this.allowInvalidPreload=!1,this.appendTo=void 0,this.ariaDateFormat="F j, Y",this.clickOpens=!0,this.dateFormat="Y-m-d",this.defaultHour=12,this.defaultMinute=0,this.defaultSeconds=0,this.disable=[],this.disableMobile=!1,this.enableTime=!1,this.enableSeconds=!1,this.formatDate=void 0,this.hourIncrement=1,this.inline=!1,this.maxDate=void 0,this.minDate=void 0,this.maxTime=void 0,this.minTime=void 0,this.minuteIncrement=5,this.mode="single",this.nextArrow=">",this.noCalendar=!1,this.now=new Date,this.prevArrow="<",this.shorthandCurrentMonth=!1,this.static=!1,this.time24hr=!1,this.utc=!1,this.weekNumbers=!1,this.wrap=!1,this.plugins=[],this.locale="default",this.convertModelValue=!1,this.showMonths=1,this.monthSelectorType="static",this.ignoredFocusElements=[]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const IK={provide:fl,useExisting:(0,a.Gpc)(()=>KG),multi:!0};let KG=(()=>{class n{constructor(e,i,r){this.elm=e,this.defaults=i,this.renderer=r,this.options={},this.ignoredFocusElements=[],this.flatpickrReady=new a.vpe,this.flatpickrChange=new a.vpe,this.flatpickrValueUpdate=new a.vpe,this.flatpickrOpen=new a.vpe,this.flatpickrClose=new a.vpe,this.flatpickrMonthChange=new a.vpe,this.flatpickrYearChange=new a.vpe,this.flatpickrDayCreate=new a.vpe,this.isDisabled=!1,this.onChangeFn=()=>{},this.onTouchedFn=()=>{}}ngAfterViewInit(){const e={altFormat:this.altFormat,altInput:this.altInput,altInputClass:this.altInputClass,allowInput:this.allowInput,allowInvalidPreload:this.allowInvalidPreload,appendTo:this.appendTo,ariaDateFormat:this.ariaDateFormat,clickOpens:this.clickOpens,dateFormat:this.dateFormat,defaultHour:this.defaultHour,defaultMinute:this.defaultMinute,defaultSeconds:this.defaultSeconds,disable:this.disable,disableMobile:this.disableMobile,enable:this.enable,enableTime:this.enableTime,enableSeconds:this.enableSeconds,formatDate:this.formatDate,hourIncrement:this.hourIncrement,defaultDate:this.initialValue,inline:this.inline,maxDate:this.maxDate,minDate:this.minDate,maxTime:this.maxTime,minTime:this.minTime,minuteIncrement:this.minuteIncrement,mode:this.mode,nextArrow:this.nextArrow,noCalendar:this.noCalendar,now:this.now,parseDate:this.parseDate,prevArrow:this.prevArrow,shorthandCurrentMonth:this.shorthandCurrentMonth,showMonths:this.showMonths,monthSelectorType:this.monthSelectorType,static:this.static,time24hr:this.time24hr,weekNumbers:this.weekNumbers,getWeek:this.getWeek,wrap:this.wrap,plugins:this.plugins,locale:this.locale,ignoredFocusElements:this.ignoredFocusElements,onChange:(i,r,s)=>{this.flatpickrChange.emit({selectedDates:i,dateString:r,instance:s})},onOpen:(i,r,s)=>{this.flatpickrOpen.emit({selectedDates:i,dateString:r,instance:s})},onClose:(i,r,s)=>{this.flatpickrClose.emit({selectedDates:i,dateString:r,instance:s})},onMonthChange:(i,r,s)=>{this.flatpickrMonthChange.emit({selectedDates:i,dateString:r,instance:s})},onYearChange:(i,r,s)=>{this.flatpickrYearChange.emit({selectedDates:i,dateString:r,instance:s})},onReady:(i,r,s)=>{this.flatpickrReady.emit({selectedDates:i,dateString:r,instance:s})},onValueUpdate:(i,r,s)=>{this.flatpickrValueUpdate.emit({selectedDates:i,dateString:r,instance:s})},onDayCreate:(i,r,s,l)=>{this.flatpickrDayCreate.emit({selectedDates:i,dateString:r,instance:s,dayElement:l})}};Object.keys(e).forEach(i=>{typeof e[i]>"u"&&(e[i]=typeof this.options[i]<"u"?this.options[i]:this.defaults[i])}),e.time_24hr=e.time24hr,e.altInputClass=(e.altInputClass||"")+" "+this.elm.nativeElement.className,e.enable||delete e.enable,this.instance=TK(this.elm.nativeElement,e),this.setDisabledState(this.isDisabled)}ngOnChanges(e){this.instance&&Object.keys(e).forEach(i=>{this.instance.set(i,this[i])})}ngOnDestroy(){this.instance&&this.instance.destroy()}writeValue(e){let i=e;this.convertModelValue&&"range"===this.mode&&e&&(i=[e.from,e.to]),this.instance?this.instance.setDate(i):this.initialValue=i}registerOnChange(e){this.onChangeFn=e}registerOnTouched(e){this.onTouchedFn=e}setDisabledState(e){this.isDisabled=e,this.instance&&(this.isDisabled?this.renderer.setProperty(this.instance._input,"disabled","disabled"):this.renderer.removeAttribute(this.instance._input,"disabled"))}inputChanged(){const e=this.elm.nativeElement.value;if(this.convertModelValue&&"string"==typeof e)switch(this.mode){case"multiple":const i=e.split("; ").map(l=>this.instance.parseDate(l,this.instance.config.dateFormat,!this.instance.config.enableTime));this.onChangeFn(i);break;case"range":const[r,s]=e.split(this.instance.l10n.rangeSeparator).map(l=>this.instance.parseDate(l,this.instance.config.dateFormat,!this.instance.config.enableTime));this.onChangeFn({from:r,to:s});break;default:this.onChangeFn(this.instance.parseDate(e,this.instance.config.dateFormat,!this.instance.config.enableTime))}else this.onChangeFn(e)}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.SBq),a.Y36(k2),a.Y36(a.Qsj))},n.\u0275dir=a.lG2({type:n,selectors:[["","mwlFlatpickr",""]],hostBindings:function(e,i){1&e&&a.NdJ("blur",function(){return i.onTouchedFn()})("input",function(){return i.inputChanged()})},inputs:{options:"options",altFormat:"altFormat",altInput:"altInput",altInputClass:"altInputClass",allowInput:"allowInput",allowInvalidPreload:"allowInvalidPreload",appendTo:"appendTo",ariaDateFormat:"ariaDateFormat",clickOpens:"clickOpens",dateFormat:"dateFormat",defaultHour:"defaultHour",defaultMinute:"defaultMinute",defaultSeconds:"defaultSeconds",disable:"disable",disableMobile:"disableMobile",enable:"enable",enableTime:"enableTime",enableSeconds:"enableSeconds",formatDate:"formatDate",hourIncrement:"hourIncrement",inline:"inline",maxDate:"maxDate",minDate:"minDate",maxTime:"maxTime",minTime:"minTime",minuteIncrement:"minuteIncrement",mode:"mode",nextArrow:"nextArrow",noCalendar:"noCalendar",now:"now",parseDate:"parseDate",prevArrow:"prevArrow",shorthandCurrentMonth:"shorthandCurrentMonth",showMonths:"showMonths",static:"static",time24hr:"time24hr",weekNumbers:"weekNumbers",getWeek:"getWeek",wrap:"wrap",plugins:"plugins",locale:"locale",convertModelValue:"convertModelValue",monthSelectorType:"monthSelectorType",ignoredFocusElements:"ignoredFocusElements"},outputs:{flatpickrReady:"flatpickrReady",flatpickrChange:"flatpickrChange",flatpickrValueUpdate:"flatpickrValueUpdate",flatpickrOpen:"flatpickrOpen",flatpickrClose:"flatpickrClose",flatpickrMonthChange:"flatpickrMonthChange",flatpickrYearChange:"flatpickrYearChange",flatpickrDayCreate:"flatpickrDayCreate"},exportAs:["mwlFlatpickr"],features:[a._Bn([IK]),a.TTD]}),n})();const QG=new a.OlP("flatpickr defaults");function SK(n){const t=new k2;return Object.assign(t,n),t}let AK=(()=>{class n{static forRoot(e={}){return{ngModule:n,providers:[{provide:QG,useValue:e},{provide:k2,useFactory:SK,deps:[QG]}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})();var Ds=L(1631),MK=L(4266);const NK=["addListener","removeListener"],xK=["addEventListener","removeEventListener"],RK=["on","off"];function Es(n,t,e,i){if((0,Zr.m)(e)&&(i=e,e=void 0),i)return Es(n,t,e).pipe(RL(i));const[r,s]=function PK(n){return(0,Zr.m)(n.addEventListener)&&(0,Zr.m)(n.removeEventListener)}(n)?xK.map(l=>d=>n[l](t,d,e)):function OK(n){return(0,Zr.m)(n.addListener)&&(0,Zr.m)(n.removeListener)}(n)?NK.map(JG(n,t)):function kK(n){return(0,Zr.m)(n.on)&&(0,Zr.m)(n.off)}(n)?RK.map(JG(n,t)):[];if(!r&&(0,MK.z)(n))return(0,Ds.z)(l=>Es(l,t,e))((0,Wd.Xf)(n));if(!r)throw new TypeError("Invalid event target");return new bi.y(l=>{const d=(...f)=>l.next(1<f.length?f:f[0]);return r(d),()=>s(d)})}function JG(n,t){return e=>i=>n[e](t,i)}var FK=L(671);function PR(n=0,t,e=Mr.P){let i=-1;return null!=t&&((0,FK.K)(t)?e=t:i=t),new bi.y(r=>{let s=function LK(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;s<0&&(s=0);let l=0;return e.schedule(function(){r.closed||(r.next(l++),0<=i?this.schedule(void 0,i):r.complete())},s)})}const{isArray:BK}=Array;function XG(n){return 1===n.length&&BK(n[0])?n[0]:n}function P2(...n){const t=(0,Zc.jO)(n),e=XG(n);return e.length?new bi.y(i=>{let r=e.map(()=>[]),s=e.map(()=>!1);i.add(()=>{r=s=null});for(let l=0;!i.closed&&l<e.length;l++)(0,Wd.Xf)(e[l]).subscribe((0,_i.x)(i,d=>{if(r[l].push(d),r.every(f=>f.length)){const f=r.map(m=>m.shift());i.next(t?t(...f):f),r.some((m,y)=>!m.length&&s[y])&&i.complete()}},()=>{s[l]=!0,!r[l].length&&i.complete()}));return()=>{r=s=null}}):tr.E}function Di(n){return(0,$i.e)((t,e)=>{(0,Wd.Xf)(n).subscribe((0,_i.x)(e,()=>e.complete(),EF.Z)),!e.closed&&t.subscribe(e)})}var Fs=L(9397);Math,Math,Math;const eJ=["*"],NJ=["dialog"];function ly(n){return"string"==typeof n}function cy(n){return null!=n}function Zb(n){return(n||document.body).getBoundingClientRect()}const C$={animation:!0,transitionTimerDelayMs:5},DX=()=>{},{transitionTimerDelayMs:EX}=C$,ES=new Map,xa=(n,t,e,i)=>{let r=i.context||{};const s=ES.get(t);if(s)switch(i.runningTransition){case"continue":return tr.E;case"stop":n.run(()=>s.transition$.complete()),r=Object.assign(s.context,r),ES.delete(t)}const l=e(t,i.animation,r)||DX;if(!i.animation||"none"===window.getComputedStyle(t).transitionProperty)return n.run(()=>l()),(0,At.of)(void 0).pipe(function wX(n){return t=>new bi.y(e=>t.subscribe({next:l=>n.run(()=>e.next(l)),error:l=>n.run(()=>e.error(l)),complete:()=>n.run(()=>e.complete())}))}(n));const d=new Qt.x,f=new Qt.x,m=d.pipe(function UK(...n){return t=>Qh(t,(0,At.of)(...n))}(!0));ES.set(t,{transition$:d,complete:()=>{f.next(),f.complete()},context:r});const y=function bX(n){const{transitionDelay:t,transitionDuration:e}=window.getComputedStyle(n);return 1e3*(parseFloat(t)+parseFloat(e))}(t);return n.runOutsideAngular(()=>{const C=Es(t,"transitionend").pipe(Di(m),dn(({target:x})=>x===t));(function e$(...n){return 1===(n=XG(n)).length?(0,Wd.Xf)(n[0]):new bi.y(function VK(n){return t=>{let e=[];for(let i=0;e&&!t.closed&&i<n.length;i++)e.push((0,Wd.Xf)(n[i]).subscribe((0,_i.x)(t,r=>{if(e){for(let s=0;s<e.length;s++)s!==i&&e[s].unsubscribe();e=null}t.next(r)})))}}(n))})(PR(y+EX).pipe(Di(m)),C,f).pipe(Di(m)).subscribe(()=>{ES.delete(t),n.run(()=>{l(),d.next(),d.complete()})})}),d.asObservable()};let UR=(()=>{class n{constructor(){this.animation=C$.animation}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Vi=function(n){return n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown",n}(Vi||{});typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const H$=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function j$(n){const t=Array.from(n.querySelectorAll(H$)).filter(e=>-1!==e.tabIndex);return[t[0],t[t.length-1]]}new Date(1882,10,12),new Date(2174,10,25);class py{constructor(t,e,i){this.nodes=t,this.viewRef=e,this.componentRef=i}}let Aee=(()=>{class n{constructor(e,i){this._el=e,this._zone=i}ngOnInit(){this._zone.onStable.asObservable().pipe(jn(1)).subscribe(()=>{xa(this._zone,this._el.nativeElement,(e,i)=>{i&&Zb(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return xa(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}static#e=this.\u0275fac=function(i){return new(i||n)(a.Y36(a.SBq),a.Y36(a.R0b))};static#t=this.\u0275cmp=a.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(i,r){2&i&&(a.Tol("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),a.ekj("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[a.jDz],decls:0,vars:0,template:function(i,r){},encapsulation:2})}return n})();class i6{update(t){}close(t){}dismiss(t){}}const Mee=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],Nee=["animation","backdropClass"];class xee{_applyWindowOptions(t,e){Mee.forEach(i=>{cy(e[i])&&(t[i]=e[i])})}_applyBackdropOptions(t,e){Nee.forEach(i=>{cy(e[i])&&(t[i]=e[i])})}update(t){this._applyWindowOptions(this._windowCmptRef.instance,t),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,t)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Di(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Di(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(t,e,i,r){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new Qt.x,this._dismissed=new Qt.x,this._hidden=new Qt.x,t.instance.dismissEvent.subscribe(s=>{this.dismiss(s)}),this.result=new Promise((s,l)=>{this._resolve=s,this._reject=l}),this.result.then(null,()=>{})}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();!function w$(n){return n&&n.then}(e)?!1!==e&&this._dismiss(t):e.then(i=>{!1!==i&&this._dismiss(t)},()=>{})}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,At.of)(void 0);t.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),P2(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var sB=function(n){return n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC",n}(sB||{});let Ree=(()=>{class n{constructor(e,i,r){this._document=e,this._elRef=i,this._zone=r,this._closed$=new Qt.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new a.vpe,this.shown=new Qt.x,this.hidden=new Qt.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":ly(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(jn(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,i={animation:this.animation,runningTransition:"stop"},l=P2(xa(this._zone,e,()=>e.classList.remove("show"),i),xa(this._zone,this._dialogEl.nativeElement,()=>{},i));return l.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),l}_show(){const e={animation:this.animation,runningTransition:"continue"};P2(xa(this._zone,this._elRef.nativeElement,(s,l)=>{l&&Zb(s),s.classList.add("show")},e),xa(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{Es(e,"keydown").pipe(Di(this._closed$),dn(r=>r.which===Vi.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(sB.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;Es(this._dialogEl.nativeElement,"mousedown").pipe(Di(this._closed$),(0,Fs.b)(()=>i=!1),(0,qn.w)(()=>Es(e,"mouseup").pipe(Di(this._closed$),jn(1))),dn(({target:r})=>e===r)).subscribe(()=>{i=!0}),Es(e,"click").pipe(Di(this._closed$)).subscribe(({target:r})=>{e===r&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss(sB.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const i=e.querySelector("[ngbAutofocus]"),r=j$(e)[0];(i||r||e).focus()}}_restoreFocus(){const e=this._document.body,i=this._elWithFocus;let r;r=i&&i.focus&&e.contains(i)?i:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&xa(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}static#e=this.\u0275fac=function(i){return new(i||n)(a.Y36(_e),a.Y36(a.SBq),a.Y36(a.R0b))};static#t=this.\u0275cmp=a.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(i,r){if(1&i&&a.Gf(NJ,7),2&i){let s;a.iGM(s=a.CRH())&&(r._dialogEl=s.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(i,r){2&i&&(a.uIk("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),a.Tol("modal d-block"+(r.windowClass?" "+r.windowClass:"")),a.ekj("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[a.jDz],ngContentSelectors:eJ,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(i,r){1&i&&(a.F$t(),a.TgZ(0,"div",0,1)(2,"div",2),a.Hsn(3),a.qZA()()),2&i&&a.Tol("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+r.fullscreenClass+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2})}return n})(),Oee=(()=>{class n{constructor(e){this._document=e}hide(){const e=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,r=i.style,{overflow:s,paddingRight:l}=r;if(e>0){const d=parseFloat(window.getComputedStyle(i).paddingRight);r.paddingRight=`${d+e}px`}return r.overflow="hidden",()=>{e>0&&(r.paddingRight=l),r.overflow=s}}static#e=this.\u0275fac=function(i){return new(i||n)(a.LFG(_e))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),kee=(()=>{class n{constructor(e,i,r,s,l,d,f){this._applicationRef=e,this._injector=i,this._environmentInjector=r,this._document=s,this._scrollBar=l,this._rendererFactory=d,this._ngZone=f,this._activeWindowCmptHasChanged=new Qt.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new a.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const m=this._windowCmpts[this._windowCmpts.length-1];((n,t,e,i=!1)=>{n.runOutsideAngular(()=>{const r=Es(t,"focusin").pipe(Di(e),(0,rt.U)(s=>s.target));Es(t,"keydown").pipe(Di(e),dn(s=>s.which===Vi.Tab),Dx(r)).subscribe(([s,l])=>{const[d,f]=j$(t);(l===d||l===t)&&s.shiftKey&&(f.focus(),s.preventDefault()),l===f&&!s.shiftKey&&(d.focus(),s.preventDefault())}),i&&Es(t,"click").pipe(Di(e),Dx(r),(0,rt.U)(s=>s[1])).subscribe(s=>s.focus())})})(this._ngZone,m.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(m.location.nativeElement)}})}_restoreScrollBar(){const e=this._scrollBarRestoreFn;e&&(this._scrollBarRestoreFn=null,e())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(e,i,r){const s=r.container instanceof HTMLElement?r.container:cy(r.container)?this._document.querySelector(r.container):this._document.body,l=this._rendererFactory.createRenderer(null,null);if(!s)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const d=new i6,f=(e=r.injector||e).get(a.lqb,null)||this._environmentInjector,m=this._getContentRef(e,f,i,d,r);let y=!1!==r.backdrop?this._attachBackdrop(s):void 0,C=this._attachWindowComponent(s,m.nodes),A=new xee(C,m,y,r.beforeDismiss);return this._registerModalRef(A),this._registerWindowCmpt(C),A.hidden.pipe(jn(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(l.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),d.close=x=>{A.close(x)},d.dismiss=x=>{A.dismiss(x)},d.update=x=>{A.update(x)},A.update(r),1===this._modalRefs.length&&l.addClass(this._document.body,"modal-open"),y&&y.instance&&y.changeDetectorRef.detectChanges(),C.changeDetectorRef.detectChanges(),A}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(i=>i.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e){let i=(0,a.LMc)(Aee,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(i.hostView),e.appendChild(i.location.nativeElement),i}_attachWindowComponent(e,i){let r=(0,a.LMc)(Ree,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:i});return this._applicationRef.attachView(r.hostView),e.appendChild(r.location.nativeElement),r}_getContentRef(e,i,r,s,l){return r?r instanceof a.Rgc?this._createFromTemplateRef(r,s):ly(r)?this._createFromString(r):this._createFromComponent(e,i,r,s,l):new py([])}_createFromTemplateRef(e,i){const s=e.createEmbeddedView({$implicit:i,close(l){i.close(l)},dismiss(l){i.dismiss(l)}});return this._applicationRef.attachView(s),new py([s.rootNodes],s)}_createFromString(e){const i=this._document.createTextNode(`${e}`);return new py([[i]])}_createFromComponent(e,i,r,s,l){const d=a.zs3.create({providers:[{provide:i6,useValue:s}],parent:e}),f=(0,a.LMc)(r,{environmentInjector:i,elementInjector:d}),m=f.location.nativeElement;return l.scrollable&&m.classList.add("component-host-scrollable"),this._applicationRef.attachView(f.hostView),new py([[m]],f.hostView,f)}_setAriaHidden(e){const i=e.parentElement;i&&e!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==e&&"SCRIPT"!==r.nodeName&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,i)=>{e?i.setAttribute("aria-hidden",e):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const i=()=>{const r=this._modalRefs.indexOf(e);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(i,i)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const i=this._windowCmpts.indexOf(e);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}static#e=this.\u0275fac=function(i){return new(i||n)(a.LFG(a.z2F),a.LFG(a.zs3),a.LFG(a.lqb),a.LFG(_e),a.LFG(Oee),a.LFG(a.FYo),a.LFG(a.R0b))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Pee=(()=>{class n{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}static#e=this.\u0275fac=function(i){return new(i||n)(a.LFG(UR))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),oB=(()=>{class n{constructor(e,i,r){this._injector=e,this._modalStack=i,this._config=r}open(e,i={}){const r={...this._config,animation:this._config.animation,...i};return this._modalStack.open(this._injector,e,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}static#e=this.\u0275fac=function(i){return new(i||n)(a.LFG(a.zs3),a.LFG(kee),a.LFG(Pee))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),r6=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=a.oAB({type:n});static#n=this.\u0275inj=a.cJS({providers:[oB]})}return n})();function Xb(n,t){return(0,Zr.m)(t)?(0,Ds.z)(n,t,1):(0,Ds.z)(n,1)}function AS(n){return(0,$i.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}new a.OlP("live announcer delay",{providedIn:"root",factory:function lte(){return 100}});class XR{}class eO{}class eh{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?"string"==typeof t?this.lazyInit=()=>{this.headers=new Map,t.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const r=e.slice(0,i),s=r.toLowerCase(),l=e.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(l):this.headers.set(s,[l])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,i)=>{this.setHeaderEntries(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof eh?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new eh;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof eh?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":const s=t.value;if(s){let l=this.headers.get(e);if(!l)return;l=l.filter(d=>-1===s.indexOf(d)),0===l.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,l)}else this.headers.delete(e),this.normalizedNames.delete(e)}}setHeaderEntries(t,e){const i=(Array.isArray(e)?e:[e]).map(s=>s.toString()),r=t.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class dte{encodeKey(t){return g6(t)}encodeValue(t){return g6(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const fte=/%(\d[a-f0-9])/gi,pte={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function g6(n){return encodeURIComponent(n).replace(fte,(t,e)=>pte[e]??t)}function tO(n){return`${n}`}class Dm{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new dte,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function hte(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[l,d]=-1==s?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],f=e.get(l)||[];f.push(d),e.set(l,f)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const i=t.fromObject[e],r=Array.isArray(i)?i.map(tO):[tO(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(i=>{const r=t[i];Array.isArray(r)?r.forEach(s=>{e.push({param:i,value:s,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Dm({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(tO(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let i=this.map.get(t.param)||[];const r=i.indexOf(tO(t.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class gte{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function m6(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function _6(n){return typeof Blob<"u"&&n instanceof Blob}function v6(n){return typeof FormData<"u"&&n instanceof FormData}class MS{constructor(t,e,i,r){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function mte(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new eh),this.context||(this.context=new gte),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=e;else{const d=e.indexOf("?");this.urlWithParams=e+(-1===d?"?":d<e.length-1?"&":"")+l}}else this.params=new Dm,this.urlWithParams=e}serializeBody(){return null===this.body?null:m6(this.body)||_6(this.body)||v6(this.body)||function _te(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Dm?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||v6(this.body)?null:_6(this.body)?this.body.type||null:m6(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Dm?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,l=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,d=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let f=t.headers||this.headers,m=t.params||this.params;const y=t.context??this.context;return void 0!==t.setHeaders&&(f=Object.keys(t.setHeaders).reduce((C,A)=>C.set(A,t.setHeaders[A]),f)),t.setParams&&(m=Object.keys(t.setParams).reduce((C,A)=>C.set(A,t.setParams[A]),m)),new MS(e,i,s,{params:m,headers:f,context:y,reportProgress:d,responseType:r,withCredentials:l})}}var eD=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(eD||{});class lB{constructor(t,e=200,i="OK"){this.headers=t.headers||new eh,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class cB extends lB{constructor(t={}){super(t),this.type=eD.ResponseHeader}clone(t={}){return new cB({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class tD extends lB{constructor(t={}){super(t),this.type=eD.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new tD({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class y6 extends lB{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function uB(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let w6=(()=>{class n{constructor(e){this.handler=e}request(e,i,r={}){let s;if(e instanceof MS)s=e;else{let f,m;f=r.headers instanceof eh?r.headers:new eh(r.headers),r.params&&(m=r.params instanceof Dm?r.params:new Dm({fromObject:r.params})),s=new MS(e,i,void 0!==r.body?r.body:null,{headers:f,context:r.context,params:m,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const l=(0,At.of)(s).pipe(Xb(f=>this.handler.handle(f)));if(e instanceof MS||"events"===r.observe)return l;const d=l.pipe(dn(f=>f instanceof tD));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return d.pipe((0,rt.U)(f=>{if(null!==f.body&&!(f.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return f.body}));case"blob":return d.pipe((0,rt.U)(f=>{if(null!==f.body&&!(f.body instanceof Blob))throw new Error("Response is not a Blob.");return f.body}));case"text":return d.pipe((0,rt.U)(f=>{if(null!==f.body&&"string"!=typeof f.body)throw new Error("Response is not a string.");return f.body}));default:return d.pipe((0,rt.U)(f=>f.body))}case"response":return d;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new Dm).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,uB(r,i))}post(e,i,r={}){return this.request("POST",e,uB(r,i))}put(e,i,r={}){return this.request("PUT",e,uB(r,i))}static#e=this.\u0275fac=function(i){return new(i||n)(a.LFG(XR))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac})}return n})();function E6(n,t){return t(n)}function yte(n,t){return(e,i)=>t.intercept(e,{handle:r=>n(r,i)})}const bte=new a.OlP(""),NS=new a.OlP(""),C6=new a.OlP("");function Dte(){let n=null;return(t,e)=>{null===n&&(n=((0,a.f3M)(bte,{optional:!0})??[]).reduceRight(yte,E6));const i=(0,a.f3M)(a.HDt),r=i.add();return n(t,e).pipe(AS(()=>i.remove(r)))}}let T6=(()=>{class n extends XR{constructor(e,i){super(),this.backend=e,this.injector=i,this.chain=null,this.pendingTasks=(0,a.f3M)(a.HDt)}handle(e){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(NS),...this.injector.get(C6,[])]));this.chain=r.reduceRight((s,l)=>function wte(n,t,e){return(i,r)=>e.runInContext(()=>t(i,s=>n(s,r)))}(s,l,this.injector),E6)}const i=this.pendingTasks.add();return this.chain(e,r=>this.backend.handle(r)).pipe(AS(()=>this.pendingTasks.remove(i)))}static#e=this.\u0275fac=function(i){return new(i||n)(a.LFG(eO),a.LFG(a.lqb))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac})}return n})();const Ite=/^\)\]\}',?\n/;let S6=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new a.vHH(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?(0,Rn.D)(i.\u0275loadImpl()):(0,At.of)(null)).pipe((0,qn.w)(()=>new bi.y(s=>{const l=i.build();if(l.open(e.method,e.urlWithParams),e.withCredentials&&(l.withCredentials=!0),e.headers.forEach((F,U)=>l.setRequestHeader(F,U.join(","))),e.headers.has("Accept")||l.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const F=e.detectContentTypeHeader();null!==F&&l.setRequestHeader("Content-Type",F)}if(e.responseType){const F=e.responseType.toLowerCase();l.responseType="json"!==F?F:"text"}const d=e.serializeBody();let f=null;const m=()=>{if(null!==f)return f;const F=l.statusText||"OK",U=new eh(l.getAllResponseHeaders()),ee=function Ste(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(l)||e.url;return f=new cB({headers:U,status:l.status,statusText:F,url:ee}),f},y=()=>{let{headers:F,status:U,statusText:ee,url:oe}=m(),te=null;204!==U&&(te=typeof l.response>"u"?l.responseText:l.response),0===U&&(U=te?200:0);let ce=U>=200&&U<300;if("json"===e.responseType&&"string"==typeof te){const Ne=te;te=te.replace(Ite,"");try{te=""!==te?JSON.parse(te):null}catch(Be){te=Ne,ce&&(ce=!1,te={error:Be,text:te})}}ce?(s.next(new tD({body:te,headers:F,status:U,statusText:ee,url:oe||void 0})),s.complete()):s.error(new y6({error:te,headers:F,status:U,statusText:ee,url:oe||void 0}))},C=F=>{const{url:U}=m(),ee=new y6({error:F,status:l.status||0,statusText:l.statusText||"Unknown Error",url:U||void 0});s.error(ee)};let A=!1;const x=F=>{A||(s.next(m()),A=!0);let U={type:eD.DownloadProgress,loaded:F.loaded};F.lengthComputable&&(U.total=F.total),"text"===e.responseType&&l.responseText&&(U.partialText=l.responseText),s.next(U)},P=F=>{let U={type:eD.UploadProgress,loaded:F.loaded};F.lengthComputable&&(U.total=F.total),s.next(U)};return l.addEventListener("load",y),l.addEventListener("error",C),l.addEventListener("timeout",C),l.addEventListener("abort",C),e.reportProgress&&(l.addEventListener("progress",x),null!==d&&l.upload&&l.upload.addEventListener("progress",P)),l.send(d),s.next({type:eD.Sent}),()=>{l.removeEventListener("error",C),l.removeEventListener("abort",C),l.removeEventListener("load",y),l.removeEventListener("timeout",C),e.reportProgress&&(l.removeEventListener("progress",x),null!==d&&l.upload&&l.upload.removeEventListener("progress",P)),l.readyState!==l.DONE&&l.abort()}})))}static#e=this.\u0275fac=function(i){return new(i||n)(a.LFG(Ts))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac})}return n})();const dB=new a.OlP("XSRF_ENABLED"),A6=new a.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),M6=new a.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class N6{}let Nte=(()=>{class n{constructor(e,i,r){this.doc=e,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Oa(e,this.cookieName),this.lastCookieString=e),this.lastToken}static#e=this.\u0275fac=function(i){return new(i||n)(a.LFG(_e),a.LFG(a.Lbi),a.LFG(A6))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac})}return n})();function xte(n,t){const e=n.url.toLowerCase();if(!(0,a.f3M)(dB)||"GET"===n.method||"HEAD"===n.method||e.startsWith("http://")||e.startsWith("https://"))return t(n);const i=(0,a.f3M)(N6).getToken(),r=(0,a.f3M)(M6);return null!=i&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),t(n)}var Em=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Em||{});function Rte(...n){const t=[w6,S6,T6,{provide:XR,useExisting:T6},{provide:eO,useExisting:S6},{provide:NS,useValue:xte,multi:!0},{provide:dB,useValue:!0},{provide:N6,useClass:Nte}];for(const e of n)t.push(...e.\u0275providers);return(0,a.MR2)(t)}const x6=new a.OlP("LEGACY_INTERCEPTOR_FN");function Ote(){return function gy(n,t){return{\u0275kind:n,\u0275providers:t}}(Em.LegacyInterceptors,[{provide:x6,useFactory:Dte},{provide:NS,useExisting:x6,multi:!0}])}let kte=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=a.oAB({type:n});static#n=this.\u0275inj=a.cJS({providers:[Rte(Ote())]})}return n})();const Ute_firebase={apiKey:"AIzaSyBDgKKEOVdpy8B2-zfUNmSWI9xz9mJoMFk",authDomain:"petguardian-app.firebaseapp.com",databaseURL:"https://petguardian-app-default-rtdb.firebaseio.com",projectId:"petguardian-app",storageBucket:"petguardian-app.appspot.com",messagingSenderId:"938087449708",appId:"1:938087449708:web:b26fdf38bb98c828cdc449",measurementId:"G-0GJ9Z7MJ35"};var bl=L(5619),jte=L(7103);function iO(...n){const t=(0,Zc.yG)(n),e=(0,Zc.jO)(n),{args:i,keys:r}=X3(n);if(0===i.length)return(0,Rn.D)([],t);const s=new bi.y(function Gte(n,t,e=qo.y){return i=>{R6(t,()=>{const{length:r}=n,s=new Array(r);let l=r,d=r;for(let f=0;f<r;f++)R6(t,()=>{const m=(0,Rn.D)(n[f],t);let y=!1;m.subscribe((0,_i.x)(i,C=>{s[f]=C,y||(y=!0,d--),d||i.next(e(s.slice()))},()=>{--l||i.complete()}))},i)},i)}}(i,t,r?l=>ej(r,l):qo.y));return e?s.pipe(RL(e)):s}function R6(n,t,e){n?(0,jte.f)(e,n,t):t()}function O6(n){return new bi.y(t=>{(0,Wd.Xf)(n()).subscribe(t)})}var $te=L(8407);function xS(n,t){const e=(0,Zr.m)(n)?n:()=>n,i=r=>r.error(e());return new bi.y(t?r=>t.schedule(i,0,r):i)}var hB=L(7394);function fB(){return(0,$i.e)((n,t)=>{let e=null;n._refCount++;const i=(0,_i.x)(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const r=n._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}class k6 extends bi.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,$i.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new hB.w0;const e=this.getSubject();t.add(this.source.subscribe((0,_i.x)(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=hB.w0.EMPTY)}return t}refCount(){return fB()(this)}}function my(n){return(0,$i.e)((t,e)=>{let s,i=null,r=!1;i=t.subscribe((0,_i.x)(e,void 0,void 0,l=>{s=(0,Wd.Xf)(n(l,my(n)(t))),i?(i.unsubscribe(),i=null,s.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(e))})}function rO(n){return n<=0?()=>tr.E:(0,$i.e)((t,e)=>{let i=[];t.subscribe((0,_i.x)(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}const bn="primary",RS=Symbol("RouteTitle");class Wte{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function nD(n){return new Wte(n)}function qte(n,t,e){const i=e.path.split("/");if(i.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const l=i[s],d=n[s];if(l.startsWith(":"))r[l.substring(1)]=d;else if(l!==d.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function th(n,t){const e=n?Object.keys(n):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!P6(n[r],t[r]))return!1;return!0}function P6(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}return n===t}function F6(n){return n.length>0?n[n.length-1]:null}function Cm(n){return function Hte(n){return!!n&&(n instanceof bi.y||(0,Zr.m)(n.lift)&&(0,Zr.m)(n.subscribe))}(n)?n:(0,a.QGY)(n)?(0,Rn.D)(Promise.resolve(n)):(0,At.of)(n)}const Zte={exact:function V6(n,t,e){if(!_y(n.segments,t.segments)||!sO(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!n.children[i]||!V6(n.children[i],t.children[i],e))return!1;return!0},subset:U6},L6={exact:function Kte(n,t){return th(n,t)},subset:function Qte(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>P6(n[e],t[e]))},ignored:()=>!0};function B6(n,t,e){return Zte[e.paths](n.root,t.root,e.matrixParams)&&L6[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function U6(n,t,e){return H6(n,t,t.segments,e)}function H6(n,t,e,i){if(n.segments.length>e.length){const r=n.segments.slice(0,e.length);return!(!_y(r,e)||t.hasChildren()||!sO(r,e,i))}if(n.segments.length===e.length){if(!_y(n.segments,e)||!sO(n.segments,e,i))return!1;for(const r in t.children)if(!n.children[r]||!U6(n.children[r],t.children[r],i))return!1;return!0}{const r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!!(_y(n.segments,r)&&sO(n.segments,r,i)&&n.children[bn])&&H6(n.children[bn],t,s,i)}}function sO(n,t,e){return t.every((i,r)=>L6[e](n[r].parameters,i.parameters))}class iD{constructor(t=new Ei([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=nD(this.queryParams)),this._queryParamMap}toString(){return ene.serialize(this)}}class Ei{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return oO(this)}}class OS{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=nD(this.parameters)),this._parameterMap}toString(){return $6(this)}}function _y(n,t){return n.length===t.length&&n.every((e,i)=>e.path===t[i].path)}let kS=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=a.Yz7({token:n,factory:function(){return new pB},providedIn:"root"})}return n})();class pB{parse(t){const e=new dne(t);return new iD(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${PS(t.root,!0)}`,i=function ine(n){const t=Object.keys(n).map(e=>{const i=n[e];return Array.isArray(i)?i.map(r=>`${aO(e)}=${aO(r)}`).join("&"):`${aO(e)}=${aO(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams),r="string"==typeof t.fragment?`#${function tne(n){return encodeURI(n)}(t.fragment)}`:"";return`${e}${i}${r}`}}const ene=new pB;function oO(n){return n.segments.map(t=>$6(t)).join("/")}function PS(n,t){if(!n.hasChildren())return oO(n);if(t){const e=n.children[bn]?PS(n.children[bn],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==bn&&i.push(`${r}:${PS(s,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function Xte(n,t){let e=[];return Object.entries(n.children).forEach(([i,r])=>{i===bn&&(e=e.concat(t(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==bn&&(e=e.concat(t(r,i)))}),e}(n,(i,r)=>r===bn?[PS(n.children[bn],!1)]:[`${r}:${PS(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[bn]?`${oO(n)}/${e[0]}`:`${oO(n)}/(${e.join("//")})`}}function j6(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function aO(n){return j6(n).replace(/%3B/gi,";")}function gB(n){return j6(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function lO(n){return decodeURIComponent(n)}function G6(n){return lO(n.replace(/\+/g,"%20"))}function $6(n){return`${gB(n.path)}${function nne(n){return Object.keys(n).map(t=>`;${gB(t)}=${gB(n[t])}`).join("")}(n.parameters)}`}const rne=/^[^\/()?;#]+/;function mB(n){const t=n.match(rne);return t?t[0]:""}const sne=/^[^\/()?;=#]+/,ane=/^[^=?&#]+/,cne=/^[^&#]+/;class dne{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ei([],{}):new Ei([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[bn]=new Ei(t,e)),i}parseSegment(){const t=mB(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new a.vHH(4009,!1);return this.capture(t),new OS(lO(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=function one(n){const t=n.match(sne);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=mB(this.remaining);r&&(i=r,this.capture(i))}t[lO(e)]=lO(i)}parseQueryParam(t){const e=function lne(n){const t=n.match(ane);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const l=function une(n){const t=n.match(cne);return t?t[0]:""}(this.remaining);l&&(i=l,this.capture(i))}const r=G6(e),s=G6(i);if(t.hasOwnProperty(r)){let l=t[r];Array.isArray(l)||(l=[l],t[r]=l),l.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=mB(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new a.vHH(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=bn);const l=this.parseChildren();e[s]=1===Object.keys(l).length?l[bn]:new Ei([],l),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new a.vHH(4011,!1)}}function z6(n){return n.segments.length>0?new Ei([],{[bn]:n}):n}function W6(n){const t={};for(const i of Object.keys(n.children)){const s=W6(n.children[i]);if(i===bn&&0===s.segments.length&&s.hasChildren())for(const[l,d]of Object.entries(s.children))t[l]=d;else(s.segments.length>0||s.hasChildren())&&(t[i]=s)}return function hne(n){if(1===n.numberOfChildren&&n.children[bn]){const t=n.children[bn];return new Ei(n.segments.concat(t.segments),t.children)}return n}(new Ei(n.segments,t))}function vy(n){return n instanceof iD}function q6(n){let t;const r=z6(function e(s){const l={};for(const f of s.children){const m=e(f);l[f.outlet]=m}const d=new Ei(s.url,l);return s===n&&(t=d),d}(n.root));return t??r}function Y6(n,t,e,i){let r=n;for(;r.parent;)r=r.parent;if(0===t.length)return _B(r,r,r,e,i);const s=function pne(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new K6(!0,0,n);let t=0,e=!1;const i=n.reduce((r,s,l)=>{if("object"==typeof s&&null!=s){if(s.outlets){const d={};return Object.entries(s.outlets).forEach(([f,m])=>{d[f]="string"==typeof m?m.split("/"):m}),[...r,{outlets:d}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===l?(s.split("/").forEach((d,f)=>{0==f&&"."===d||(0==f&&""===d?e=!0:".."===d?t++:""!=d&&r.push(d))}),r):[...r,s]},[]);return new K6(e,t,i)}(t);if(s.toRoot())return _B(r,r,new Ei([],{}),e,i);const l=function gne(n,t,e){if(n.isAbsolute)return new uO(t,!0,0);if(!e)return new uO(t,!1,NaN);if(null===e.parent)return new uO(e,!0,0);const i=cO(n.commands[0])?0:1;return function mne(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new a.vHH(4005,!1);r=i.segments.length}return new uO(i,!1,r-s)}(e,e.segments.length-1+i,n.numberOfDoubleDots)}(s,r,n),d=l.processChildren?LS(l.segmentGroup,l.index,s.commands):Q6(l.segmentGroup,l.index,s.commands);return _B(r,l.segmentGroup,d,e,i)}function cO(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function FS(n){return"object"==typeof n&&null!=n&&n.outlets}function _B(n,t,e,i,r){let l,s={};i&&Object.entries(i).forEach(([f,m])=>{s[f]=Array.isArray(m)?m.map(y=>`${y}`):`${m}`}),l=n===t?e:Z6(n,t,e);const d=z6(W6(l));return new iD(d,s,r)}function Z6(n,t,e){const i={};return Object.entries(n.children).forEach(([r,s])=>{i[r]=s===t?e:Z6(s,t,e)}),new Ei(n.segments,i)}class K6{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&cO(i[0]))throw new a.vHH(4003,!1);const r=i.find(FS);if(r&&r!==F6(i))throw new a.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class uO{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function Q6(n,t,e){if(n||(n=new Ei([],{})),0===n.segments.length&&n.hasChildren())return LS(n,t,e);const i=function vne(n,t,e){let i=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;const l=n.segments[r],d=e[i];if(FS(d))break;const f=`${d}`,m=i<e.length-1?e[i+1]:null;if(r>0&&void 0===f)break;if(f&&m&&"object"==typeof m&&void 0===m.outlets){if(!X6(f,m,l))return s;i+=2}else{if(!X6(f,{},l))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new Ei(n.segments.slice(0,i.pathIndex),{});return s.children[bn]=new Ei(n.segments.slice(i.pathIndex),n.children),LS(s,0,r)}return i.match&&0===r.length?new Ei(n.segments,{}):i.match&&!n.hasChildren()?vB(n,t,e):i.match?LS(n,0,r):vB(n,t,e)}function LS(n,t,e){if(0===e.length)return new Ei(n.segments,{});{const i=function _ne(n){return FS(n[0])?n[0].outlets:{[bn]:n}}(e),r={};if(Object.keys(i).some(s=>s!==bn)&&n.children[bn]&&1===n.numberOfChildren&&0===n.children[bn].segments.length){const s=LS(n.children[bn],t,e);return new Ei(n.segments,s.children)}return Object.entries(i).forEach(([s,l])=>{"string"==typeof l&&(l=[l]),null!==l&&(r[s]=Q6(n.children[s],t,l))}),Object.entries(n.children).forEach(([s,l])=>{void 0===i[s]&&(r[s]=l)}),new Ei(n.segments,r)}}function vB(n,t,e){const i=n.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(FS(s)){const f=yne(s.outlets);return new Ei(i,f)}if(0===r&&cO(e[0])){i.push(new OS(n.segments[t].path,J6(e[0]))),r++;continue}const l=FS(s)?s.outlets[bn]:`${s}`,d=r<e.length-1?e[r+1]:null;l&&d&&cO(d)?(i.push(new OS(l,J6(d))),r+=2):(i.push(new OS(l,{})),r++)}return new Ei(i,{})}function yne(n){const t={};return Object.entries(n).forEach(([e,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(t[e]=vB(new Ei([],{}),0,i))}),t}function J6(n){const t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function X6(n,t,e){return n==e.path&&th(t,e.parameters)}const BS="imperative";class nh{constructor(t,e){this.id=t,this.url=e}}class dO extends nh{constructor(t,e,i="imperative",r=null){super(t,e),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Tm extends nh{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class VS extends nh{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class rD extends nh{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=16}}class hO extends nh{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ez extends nh{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wne extends nh{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bne extends nh{constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Dne extends nh{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ene extends nh{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Cne{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Tne{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ine{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sne{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ane{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mne{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tz{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class yB{}class wB{constructor(t){this.url=t}}class Nne{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new US,this.attachRef=null}}let US=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new Nne,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class nz{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=bB(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=bB(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=DB(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return DB(t,this._root).map(e=>e.value)}}function bB(n,t){if(n===t.value)return t;for(const e of t.children){const i=bB(n,e);if(i)return i}return null}function DB(n,t){if(n===t.value)return[t];for(const e of t.children){const i=DB(n,e);if(i.length)return i.unshift(t),i}return[]}class Wf{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function sD(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class iz extends nz{constructor(t,e){super(t),this.snapshot=e,EB(this,t)}toString(){return this.snapshot.toString()}}function rz(n,t){const e=function xne(n,t){const l=new fO([],{},{},"",{},bn,t,null,{});return new oz("",new Wf(l,[]))}(0,t),i=new bl.X([new OS("",{})]),r=new bl.X({}),s=new bl.X({}),l=new bl.X({}),d=new bl.X(""),f=new oD(i,r,l,d,s,bn,t,e.root);return f.snapshot=e.root,new iz(new Wf(f,[]),e)}class oD{constructor(t,e,i,r,s,l,d,f){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=l,this.component=d,this._futureSnapshot=f,this.title=this.dataSubject?.pipe((0,rt.U)(m=>m[RS]))??(0,At.of)(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,rt.U)(t=>nD(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,rt.U)(t=>nD(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function sz(n,t="emptyOnly"){const e=n.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const r=e[i],s=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function Rne(n){return n.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(i))}class fO{get title(){return this.data?.[RS]}constructor(t,e,i,r,s,l,d,f,m){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=l,this.component=d,this.routeConfig=f,this._resolve=m}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=nD(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=nD(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class oz extends nz{constructor(t,e){super(e),this.url=t,EB(this,e)}toString(){return az(this._root)}}function EB(n,t){t.value._routerState=n,t.children.forEach(e=>EB(n,e))}function az(n){const t=n.children.length>0?` { ${n.children.map(az).join(", ")} } `:"";return`${n.value}${t}`}function CB(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,th(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),th(t.params,e.params)||n.paramsSubject.next(e.params),function Yte(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!th(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.urlSubject.next(e.url),th(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function TB(n,t){const e=th(n.params,t.params)&&function Jte(n,t){return _y(n,t)&&n.every((e,i)=>th(e.parameters,t[i].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||TB(n.parent,t.parent))}let IB=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=bn,this.activateEvents=new a.vpe,this.deactivateEvents=new a.vpe,this.attachEvents=new a.vpe,this.detachEvents=new a.vpe,this.parentContexts=(0,a.f3M)(US),this.location=(0,a.f3M)(a.s_b),this.changeDetector=(0,a.f3M)(a.sBO),this.environmentInjector=(0,a.f3M)(a.lqb),this.inputBinder=(0,a.f3M)(pO,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){const{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new a.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new a.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new a.vHH(4012,!1);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new a.vHH(4013,!1);this._activatedRoute=e;const r=this.location,l=e.snapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,f=new One(e,d,r.injector);this.activated=r.createComponent(l,{index:r.length,injector:f,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=a.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[a.TTD]})}return n})();class One{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===oD?this.route:t===US?this.childContexts:this.parent.get(t,e)}}const pO=new a.OlP("");let lz=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){const{activatedRoute:i}=e,r=iO([i.queryParams,i.params,i.data]).pipe((0,qn.w)(([s,l,d],f)=>(d={...s,...l,...d},0===f?(0,At.of)(d):Promise.resolve(d)))).subscribe(s=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(e);const l=(0,a.qFp)(i.component);if(l)for(const{templateName:d}of l.inputs)e.activatedComponentRef.setInput(d,s[d]);else this.unsubscribeFromRouteData(e)});this.outletDataSubscriptions.set(e,r)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac})}return n})();function HS(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const r=function Pne(n,t,e){return t.children.map(i=>{for(const r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return HS(n,i,r);return HS(n,i)})}(n,t,e);return new Wf(i,r)}{if(n.shouldAttach(t.value)){const s=n.retrieve(t.value);if(null!==s){const l=s.route;return l.value._futureSnapshot=t.value,l.children=t.children.map(d=>HS(n,d)),l}}const i=function Fne(n){return new oD(new bl.X(n.url),new bl.X(n.params),new bl.X(n.queryParams),new bl.X(n.fragment),new bl.X(n.data),n.outlet,n.component,n)}(t.value),r=t.children.map(s=>HS(n,s));return new Wf(i,r)}}const SB="ngNavigationCancelingError";function cz(n,t){const{redirectTo:e,navigationBehaviorOptions:i}=vy(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=uz(!1,0,t);return r.url=e,r.navigationBehaviorOptions=i,r}function uz(n,t,e){const i=new Error("NavigationCancelingError: "+(n||""));return i[SB]=!0,i.cancellationCode=t,e&&(i.url=e),i}function dz(n){return n&&n[SB]}let hz=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=a.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[a.jDz],decls:1,vars:0,template:function(i,r){1&i&&a._UZ(0,"router-outlet")},dependencies:[IB],encapsulation:2})}return n})();function AB(n){const t=n.children&&n.children.map(AB),e=t?{...n,children:t}:{...n};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==bn&&(e.component=hz),e}function Eu(n){return n.outlet||bn}function jS(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class $ne{constructor(t,e,i,r,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),CB(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const r=sD(e);t.children.forEach(s=>{const l=s.value.outlet;this.deactivateRoutes(s,r[l],i),delete r[l]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const l=i.getContext(r.outlet);l&&this.deactivateChildRoutes(t,e,l.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=sD(t);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],r);if(i&&i.outlet){const l=i.outlet.detach(),d=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:l,route:t,contexts:d})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=sD(t);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){const r=sD(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Mne(s.value.snapshot))}),t.children.length&&this.forwardEvent(new Sne(t.value.snapshot))}activateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(CB(r),r===s)if(r.component){const l=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,l.children)}else this.activateChildRoutes(t,e,i);else if(r.component){const l=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const d=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),l.children.onOutletReAttached(d.contexts),l.attachRef=d.componentRef,l.route=d.route.value,l.outlet&&l.outlet.attach(d.componentRef,d.route.value),CB(d.route.value),this.activateChildRoutes(t,null,l.children)}else{const d=jS(r.snapshot);l.attachRef=null,l.route=r,l.injector=d,l.outlet&&l.outlet.activateWith(r,l.injector),this.activateChildRoutes(t,null,l.children)}}else this.activateChildRoutes(t,null,i)}}class fz{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class gO{constructor(t,e){this.component=t,this.route=e}}function zne(n,t,e){const i=n._root;return GS(i,t?t._root:null,e,[i.value])}function aD(n,t){const e=Symbol(),i=t.get(n,e);return i===e?"function"!=typeof n||(0,a.Z0I)(n)?t.get(n):n:i}function GS(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=sD(t);return n.children.forEach(l=>{(function qne(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,l=t?t.value:null,d=e?e.getContext(n.value.outlet):null;if(l&&s.routeConfig===l.routeConfig){const f=function Yne(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!_y(n.url,t.url);case"pathParamsOrQueryParamsChange":return!_y(n.url,t.url)||!th(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!TB(n,t)||!th(n.queryParams,t.queryParams);default:return!TB(n,t)}}(l,s,s.routeConfig.runGuardsAndResolvers);f?r.canActivateChecks.push(new fz(i)):(s.data=l.data,s._resolvedData=l._resolvedData),GS(n,t,s.component?d?d.children:null:e,i,r),f&&d&&d.outlet&&d.outlet.isActivated&&r.canDeactivateChecks.push(new gO(d.outlet.component,l))}else l&&$S(t,d,r),r.canActivateChecks.push(new fz(i)),GS(n,null,s.component?d?d.children:null:e,i,r)})(l,s[l.value.outlet],e,i.concat([l.value]),r),delete s[l.value.outlet]}),Object.entries(s).forEach(([l,d])=>$S(d,e.getContext(l),r)),r}function $S(n,t,e){const i=sD(n),r=n.value;Object.entries(i).forEach(([s,l])=>{$S(l,r.component?t?t.children.getContext(s):null:t,e)}),e.canDeactivateChecks.push(new gO(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function zS(n){return"function"==typeof n}function pz(n){return n instanceof xc||"EmptyError"===n?.name}const mO=Symbol("INITIAL_VALUE");function lD(){return(0,qn.w)(n=>iO(n.map(t=>t.pipe(jn(1),Kl(mO)))).pipe((0,rt.U)(t=>{for(const e of t)if(!0!==e){if(e===mO)return mO;if(!1===e||e instanceof iD)return e}return!0}),dn(t=>t!==mO),jn(1)))}function gz(n){return(0,$te.z)((0,Fs.b)(t=>{if(vy(t))throw cz(0,t)}),(0,rt.U)(t=>!0===t))}class _O{constructor(t){this.segmentGroup=t||null}}class mz{constructor(t){this.urlTree=t}}function cD(n){return xS(new _O(n))}function _z(n){return xS(new mz(n))}class pie{constructor(t,e){this.urlSerializer=t,this.urlTree=e}noMatchError(t){return new a.vHH(4002,!1)}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return(0,At.of)(i);if(r.numberOfChildren>1||!r.children[bn])return xS(new a.vHH(4e3,!1));r=r.children[bn]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreateUrlTree(t,e,i,r){const s=this.createSegmentGroup(t,e.root,i,r);return new iD(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return Object.entries(t).forEach(([r,s])=>{if("string"==typeof s&&s.startsWith(":")){const d=s.substring(1);i[r]=e[d]}else i[r]=s}),i}createSegmentGroup(t,e,i,r){const s=this.createSegments(t,e.segments,i,r);let l={};return Object.entries(e.children).forEach(([d,f])=>{l[d]=this.createSegmentGroup(t,f,i,r)}),new Ei(s,l)}createSegments(t,e,i,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){const r=i[e.path.substring(1)];if(!r)throw new a.vHH(4001,!1);return r}findOrReturn(t,e){let i=0;for(const r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}}const MB={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function gie(n,t,e,i,r){const s=NB(n,t,e);return s.matched?(i=function Bne(n,t){return n.providers&&!n._injector&&(n._injector=(0,a.MMx)(n.providers,t,`Route: ${n.path}`)),n._injector??t}(t,i),function die(n,t,e,i){const r=t.canMatch;if(!r||0===r.length)return(0,At.of)(!0);const s=r.map(l=>{const d=aD(l,n);return Cm(function eie(n){return n&&zS(n.canMatch)}(d)?d.canMatch(t,e):n.runInContext(()=>d(t,e)))});return(0,At.of)(s).pipe(lD(),gz())}(i,t,e).pipe((0,rt.U)(l=>!0===l?s:{...MB}))):(0,At.of)(s)}function NB(n,t,e){if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?{...MB}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(t.matcher||qte)(e,n,t);if(!r)return{...MB};const s={};Object.entries(r.posParams??{}).forEach(([d,f])=>{s[d]=f.path});const l=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:l,positionalParamSegments:r.posParams??{}}}function vz(n,t,e,i){return e.length>0&&function vie(n,t,e){return e.some(i=>vO(n,t,i)&&Eu(i)!==bn)}(n,e,i)?{segmentGroup:new Ei(t,_ie(i,new Ei(e,n.children))),slicedSegments:[]}:0===e.length&&function yie(n,t,e){return e.some(i=>vO(n,t,i))}(n,e,i)?{segmentGroup:new Ei(n.segments,mie(n,0,e,i,n.children)),slicedSegments:e}:{segmentGroup:new Ei(n.segments,n.children),slicedSegments:e}}function mie(n,t,e,i,r){const s={};for(const l of i)if(vO(n,e,l)&&!r[Eu(l)]){const d=new Ei([],{});s[Eu(l)]=d}return{...r,...s}}function _ie(n,t){const e={};e[bn]=t;for(const i of n)if(""===i.path&&Eu(i)!==bn){const r=new Ei([],{});e[Eu(i)]=r}return e}function vO(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}class Eie{constructor(t,e,i,r,s,l,d){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=l,this.urlSerializer=d,this.allowRedirects=!0,this.applyRedirects=new pie(this.urlSerializer,this.urlTree)}noMatchError(t){return new a.vHH(4002,!1)}recognize(){const t=vz(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,bn).pipe(my(e=>{if(e instanceof mz)return this.allowRedirects=!1,this.urlTree=e.urlTree,this.match(e.urlTree);throw e instanceof _O?this.noMatchError(e):e}),(0,rt.U)(e=>{const i=new fO([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},bn,this.rootComponentType,null,{}),r=new Wf(i,e),s=new oz("",r),l=function fne(n,t,e=null,i=null){return Y6(q6(n),t,e,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(l),this.inheritParamsAndData(s._root),{state:s,tree:l}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t.root,bn).pipe(my(i=>{throw i instanceof _O?this.noMatchError(i):i}))}inheritParamsAndData(t){const e=t.value,i=sz(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(t,e,i):this.processSegment(t,e,i,i.segments,r,!0)}processChildren(t,e,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return(0,Rn.D)(r).pipe(Xb(s=>{const l=i.children[s],d=function jne(n,t){const e=n.filter(i=>Eu(i)===t);return e.push(...n.filter(i=>Eu(i)!==t)),e}(e,s);return this.processSegmentGroup(t,d,l,s)}),Ql((s,l)=>(s.push(...l),s)),Wo(null),function zte(n,t){const e=arguments.length>=2;return i=>i.pipe(n?dn((r,s)=>n(r,s,i)):qo.y,rO(1),e?Wo(t):Bl(()=>new xc))}(),(0,Ds.z)(s=>{if(null===s)return cD(i);const l=yz(s);return function Cie(n){n.sort((t,e)=>t.value.outlet===bn?-1:e.value.outlet===bn?1:t.value.outlet.localeCompare(e.value.outlet))}(l),(0,At.of)(l)}))}processSegment(t,e,i,r,s,l){return(0,Rn.D)(e).pipe(Xb(d=>this.processSegmentAgainstRoute(d._injector??t,e,d,i,r,s,l).pipe(my(f=>{if(f instanceof _O)return(0,At.of)(null);throw f}))),_a(d=>!!d),my(d=>{if(pz(d))return function bie(n,t,e){return 0===t.length&&!n.children[e]}(i,r,s)?(0,At.of)([]):cD(i);throw d}))}processSegmentAgainstRoute(t,e,i,r,s,l,d){return function wie(n,t,e,i){return!!(Eu(n)===i||i!==bn&&vO(t,e,n))&&("**"===n.path||NB(t,n,e).matched)}(i,r,s,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,r,i,s,l,d):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,i,s,l):cD(r):cD(r)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,l){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,l):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,r){const s=this.applyRedirects.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?_z(s):this.applyRedirects.lineralizeSegments(i,s).pipe((0,Ds.z)(l=>{const d=new Ei(l,{});return this.processSegment(t,e,d,l,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,l){const{matched:d,consumedSegments:f,remainingSegments:m,positionalParamSegments:y}=NB(e,r,s);if(!d)return cD(e);const C=this.applyRedirects.applyRedirectCommands(f,r.redirectTo,y);return r.redirectTo.startsWith("/")?_z(C):this.applyRedirects.lineralizeSegments(r,C).pipe((0,Ds.z)(A=>this.processSegment(t,i,e,A.concat(m),l,!1)))}matchSegmentAgainstRoute(t,e,i,r,s,l){let d;if("**"===i.path){const f=r.length>0?F6(r).parameters:{},m=new fO(r,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,wz(i),Eu(i),i.component??i._loadedComponent??null,i,bz(i));d=(0,At.of)({snapshot:m,consumedSegments:[],remainingSegments:[]}),e.children={}}else d=gie(e,i,r,t).pipe((0,rt.U)(({matched:f,consumedSegments:m,remainingSegments:y,parameters:C})=>f?{snapshot:new fO(m,C,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,wz(i),Eu(i),i.component??i._loadedComponent??null,i,bz(i)),consumedSegments:m,remainingSegments:y}:null));return d.pipe((0,qn.w)(f=>null===f?cD(e):this.getChildConfig(t=i._injector??t,i,r).pipe((0,qn.w)(({routes:m})=>{const y=i._loadedInjector??t,{snapshot:C,consumedSegments:A,remainingSegments:x}=f,{segmentGroup:P,slicedSegments:F}=vz(e,A,x,m);if(0===F.length&&P.hasChildren())return this.processChildren(y,m,P).pipe((0,rt.U)(ee=>null===ee?null:[new Wf(C,ee)]));if(0===m.length&&0===F.length)return(0,At.of)([new Wf(C,[])]);const U=Eu(i)===s;return this.processSegment(y,m,P,F,U?bn:s,!0).pipe((0,rt.U)(ee=>[new Wf(C,ee)]))}))))}getChildConfig(t,e,i){return e.children?(0,At.of)({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?(0,At.of)({routes:e._loadedRoutes,injector:e._loadedInjector}):function uie(n,t,e,i){const r=t.canLoad;if(void 0===r||0===r.length)return(0,At.of)(!0);const s=r.map(l=>{const d=aD(l,n);return Cm(function Kne(n){return n&&zS(n.canLoad)}(d)?d.canLoad(t,e):n.runInContext(()=>d(t,e)))});return(0,At.of)(s).pipe(lD(),gz())}(t,e,i).pipe((0,Ds.z)(r=>r?this.configLoader.loadChildren(t,e).pipe((0,Fs.b)(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function fie(n){return xS(uz(!1,3))}())):(0,At.of)({routes:[],injector:t})}}function Tie(n){const t=n.value.routeConfig;return t&&""===t.path}function yz(n){const t=[],e=new Set;for(const i of n){if(!Tie(i)){t.push(i);continue}const r=t.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):t.push(i)}for(const i of e){const r=yz(i.children);t.push(new Wf(i.value,r))}return t.filter(i=>!e.has(i))}function wz(n){return n.data||{}}function bz(n){return n.resolve||{}}function Sie(n,t){return(0,Ds.z)(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return(0,At.of)(e);let s=0;return(0,Rn.D)(r).pipe(Xb(l=>function Aie(n,t,e,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!Dz(r)&&(s[RS]=r.title),function Mie(n,t,e,i){const r=function Nie(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return(0,At.of)({});const s={};return(0,Rn.D)(r).pipe((0,Ds.z)(l=>function xie(n,t,e,i){const r=jS(t)??i,s=aD(n,r);return Cm(s.resolve?s.resolve(t,e):r.runInContext(()=>s(t,e)))}(n[l],t,e,i).pipe(_a(),(0,Fs.b)(d=>{s[l]=d}))),rO(1),function t$(n){return(0,rt.U)(()=>n)}(s),my(l=>pz(l)?tr.E:xS(l)))}(s,n,t,i).pipe((0,rt.U)(l=>(n._resolvedData=l,n.data=sz(n,e).resolve,r&&Dz(r)&&(n.data[RS]=r.title),null)))}(l.route,i,n,t)),(0,Fs.b)(()=>s++),rO(1),(0,Ds.z)(l=>s===r.length?(0,At.of)(e):tr.E))})}function Dz(n){return"string"==typeof n.title||null===n.title}function xB(n){return(0,qn.w)(t=>{const e=n(t);return e?(0,Rn.D)(e).pipe((0,rt.U)(()=>t)):(0,At.of)(t)})}const uD=new a.OlP("ROUTES");let RB=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,a.f3M)(a.Sil)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return(0,At.of)(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=Cm(e.loadComponent()).pipe((0,rt.U)(Ez),(0,Fs.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),AS(()=>{this.componentLoaders.delete(e)})),r=new k6(i,()=>new Qt.x).pipe(fB());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return(0,At.of)({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=function Rie(n,t,e,i){return Cm(n.loadChildren()).pipe((0,rt.U)(Ez),(0,Ds.z)(r=>r instanceof a.YKP||Array.isArray(r)?(0,At.of)(r):(0,Rn.D)(t.compileModuleAsync(r))),(0,rt.U)(r=>{i&&i(n);let s,l,d=!1;return Array.isArray(r)?(l=r,!0):(s=r.create(e).injector,l=s.get(uD,[],{optional:!0,self:!0}).flat()),{routes:l.map(AB),injector:s}}))}(i,this.compiler,e,this.onLoadEndListener).pipe(AS(()=>{this.childrenLoaders.delete(i)})),l=new k6(s,()=>new Qt.x).pipe(fB());return this.childrenLoaders.set(i,l),l}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ez(n){return function Oie(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let yO=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Qt.x,this.transitionAbortSubject=new Qt.x,this.configLoader=(0,a.f3M)(RB),this.environmentInjector=(0,a.f3M)(a.lqb),this.urlSerializer=(0,a.f3M)(kS),this.rootContexts=(0,a.f3M)(US),this.inputBindingEnabled=null!==(0,a.f3M)(pO,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,At.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new Tne(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new Cne(r))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:i})}setupNavigations(e,i,r){return this.transitions=new bl.X({id:0,currentUrlTree:i,currentRawUrl:i,currentBrowserUrl:i,extractedUrl:e.urlHandlingStrategy.extract(i),urlAfterRedirects:e.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:BS,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(dn(s=>0!==s.id),(0,rt.U)(s=>({...s,extractedUrl:e.urlHandlingStrategy.extract(s.rawUrl)})),(0,qn.w)(s=>{this.currentTransition=s;let l=!1,d=!1;return(0,At.of)(s).pipe((0,Fs.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.rawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,qn.w)(f=>{const m=f.currentBrowserUrl.toString(),y=!e.navigated||f.extractedUrl.toString()!==m||m!==f.currentUrlTree.toString();if(!y&&"reload"!==(f.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const A="";return this.events.next(new rD(f.id,this.urlSerializer.serialize(f.rawUrl),A,0)),f.resolve(null),tr.E}if(e.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return(0,At.of)(f).pipe((0,qn.w)(A=>{const x=this.transitions?.getValue();return this.events.next(new dO(A.id,this.urlSerializer.serialize(A.extractedUrl),A.source,A.restoredState)),x!==this.transitions?.getValue()?tr.E:Promise.resolve(A)}),function Iie(n,t,e,i,r,s){return(0,Ds.z)(l=>function Die(n,t,e,i,r,s,l="emptyOnly"){return new Eie(n,t,e,i,r,l,s).recognize()}(n,t,e,i,l.extractedUrl,r,s).pipe((0,rt.U)(({state:d,tree:f})=>({...l,targetSnapshot:d,urlAfterRedirects:f}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),(0,Fs.b)(A=>{s.targetSnapshot=A.targetSnapshot,s.urlAfterRedirects=A.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:A.urlAfterRedirects};const x=new ez(A.id,this.urlSerializer.serialize(A.extractedUrl),this.urlSerializer.serialize(A.urlAfterRedirects),A.targetSnapshot);this.events.next(x)}));if(y&&e.urlHandlingStrategy.shouldProcessUrl(f.currentRawUrl)){const{id:A,extractedUrl:x,source:P,restoredState:F,extras:U}=f,ee=new dO(A,this.urlSerializer.serialize(x),P,F);this.events.next(ee);const oe=rz(0,this.rootComponentType).snapshot;return this.currentTransition=s={...f,targetSnapshot:oe,urlAfterRedirects:x,extras:{...U,skipLocationChange:!1,replaceUrl:!1}},(0,At.of)(s)}{const A="";return this.events.next(new rD(f.id,this.urlSerializer.serialize(f.extractedUrl),A,1)),f.resolve(null),tr.E}}),(0,Fs.b)(f=>{const m=new wne(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}),(0,rt.U)(f=>(this.currentTransition=s={...f,guards:zne(f.targetSnapshot,f.currentSnapshot,this.rootContexts)},s)),function nie(n,t){return(0,Ds.z)(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:l}}=e;return 0===l.length&&0===s.length?(0,At.of)({...e,guardsResult:!0}):function iie(n,t,e,i){return(0,Rn.D)(n).pipe((0,Ds.z)(r=>function cie(n,t,e,i,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,At.of)(!0);const l=s.map(d=>{const f=jS(t)??r,m=aD(d,f);return Cm(function Xne(n){return n&&zS(n.canDeactivate)}(m)?m.canDeactivate(n,t,e,i):f.runInContext(()=>m(n,t,e,i))).pipe(_a())});return(0,At.of)(l).pipe(lD())}(r.component,r.route,e,t,i)),_a(r=>!0!==r,!0))}(l,i,r,n).pipe((0,Ds.z)(d=>d&&function Zne(n){return"boolean"==typeof n}(d)?function rie(n,t,e,i){return(0,Rn.D)(t).pipe(Xb(r=>Qh(function oie(n,t){return null!==n&&t&&t(new Ine(n)),(0,At.of)(!0)}(r.route.parent,i),function sie(n,t){return null!==n&&t&&t(new Ane(n)),(0,At.of)(!0)}(r.route,i),function lie(n,t,e){const i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(l=>function Wne(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(l)).filter(l=>null!==l).map(l=>O6(()=>{const d=l.guards.map(f=>{const m=jS(l.node)??e,y=aD(f,m);return Cm(function Jne(n){return n&&zS(n.canActivateChild)}(y)?y.canActivateChild(i,n):m.runInContext(()=>y(i,n))).pipe(_a())});return(0,At.of)(d).pipe(lD())}));return(0,At.of)(s).pipe(lD())}(n,r.path,e),function aie(n,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return(0,At.of)(!0);const r=i.map(s=>O6(()=>{const l=jS(t)??e,d=aD(s,l);return Cm(function Qne(n){return n&&zS(n.canActivate)}(d)?d.canActivate(t,n):l.runInContext(()=>d(t,n))).pipe(_a())}));return(0,At.of)(r).pipe(lD())}(n,r.route,e))),_a(r=>!0!==r,!0))}(i,s,n,t):(0,At.of)(d)),(0,rt.U)(d=>({...e,guardsResult:d})))})}(this.environmentInjector,f=>this.events.next(f)),(0,Fs.b)(f=>{if(s.guardsResult=f.guardsResult,vy(f.guardsResult))throw cz(0,f.guardsResult);const m=new bne(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.events.next(m)}),dn(f=>!!f.guardsResult||(this.cancelNavigationTransition(f,"",3),!1)),xB(f=>{if(f.guards.canActivateChecks.length)return(0,At.of)(f).pipe((0,Fs.b)(m=>{const y=new Dne(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(y)}),(0,qn.w)(m=>{let y=!1;return(0,At.of)(m).pipe(Sie(e.paramsInheritanceStrategy,this.environmentInjector),(0,Fs.b)({next:()=>y=!0,complete:()=>{y||this.cancelNavigationTransition(m,"",2)}}))}),(0,Fs.b)(m=>{const y=new Ene(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(y)}))}),xB(f=>{const m=y=>{const C=[];y.routeConfig?.loadComponent&&!y.routeConfig._loadedComponent&&C.push(this.configLoader.loadComponent(y.routeConfig).pipe((0,Fs.b)(A=>{y.component=A}),(0,rt.U)(()=>{})));for(const A of y.children)C.push(...m(A));return C};return iO(m(f.targetSnapshot.root)).pipe(Wo(),jn(1))}),xB(()=>this.afterPreactivation()),(0,rt.U)(f=>{const m=function kne(n,t,e){const i=HS(n,t._root,e?e._root:void 0);return new iz(i,t)}(e.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return this.currentTransition=s={...f,targetRouterState:m},s}),(0,Fs.b)(()=>{this.events.next(new yB)}),((n,t,e,i)=>(0,rt.U)(r=>(new $ne(t,r.targetRouterState,r.currentRouterState,e,i).activate(n),r)))(this.rootContexts,e.routeReuseStrategy,f=>this.events.next(f),this.inputBindingEnabled),jn(1),(0,Fs.b)({next:f=>{l=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Tm(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects))),e.titleStrategy?.updateTitle(f.targetRouterState.snapshot),f.resolve(!0)},complete:()=>{l=!0}}),Di(this.transitionAbortSubject.pipe((0,Fs.b)(f=>{throw f}))),AS(()=>{l||d||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),my(f=>{if(d=!0,dz(f))this.events.next(new VS(s.id,this.urlSerializer.serialize(s.extractedUrl),f.message,f.cancellationCode)),function Lne(n){return dz(n)&&vy(n.url)}(f)?this.events.next(new wB(f.url)):s.resolve(!1);else{this.events.next(new hO(s.id,this.urlSerializer.serialize(s.extractedUrl),f,s.targetSnapshot??void 0));try{s.resolve(e.errorHandler(f))}catch(m){s.reject(m)}}return tr.E}))}))}cancelNavigationTransition(e,i,r){const s=new VS(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(s),e.resolve(!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Cz(n){return n!==BS}let Tz=(()=>{class n{buildTitle(e){let i,r=e.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===bn);return i}getResolvedTitleForRoute(e){return e.data[RS]}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=a.Yz7({token:n,factory:function(){return(0,a.f3M)(kie)},providedIn:"root"})}return n})(),kie=(()=>{class n extends Tz{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}static#e=this.\u0275fac=function(i){return new(i||n)(a.LFG(He))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Pie=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=a.Yz7({token:n,factory:function(){return(0,a.f3M)(Lie)},providedIn:"root"})}return n})();class Fie{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let Lie=(()=>{class n extends Fie{static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=a.n5z(n)))(r||n)}}();static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const wO=new a.OlP("",{providedIn:"root",factory:()=>({})});let Bie=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=a.Yz7({token:n,factory:function(){return(0,a.f3M)(Vie)},providedIn:"root"})}return n})(),Vie=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var WS=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(WS||{});function Iz(n,t){n.events.pipe(dn(e=>e instanceof Tm||e instanceof VS||e instanceof hO||e instanceof rD),(0,rt.U)(e=>e instanceof Tm||e instanceof rD?WS.COMPLETE:e instanceof VS&&(0===e.code||1===e.code)?WS.REDIRECTING:WS.FAILED),dn(e=>e!==WS.REDIRECTING),jn(1)).subscribe(()=>{t()})}function Uie(n){throw n}function Hie(n,t,e){return t.parse("/")}const jie={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Gie={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Bo=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,a.f3M)(a.c2e),this.isNgZoneEnabled=!1,this._events=new Qt.x,this.options=(0,a.f3M)(wO,{optional:!0})||{},this.pendingTasks=(0,a.f3M)(a.HDt),this.errorHandler=this.options.errorHandler||Uie,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Hie,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,a.f3M)(Bie),this.routeReuseStrategy=(0,a.f3M)(Pie),this.titleStrategy=(0,a.f3M)(Tz),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,a.f3M)(uD,{optional:!0})?.flat()??[],this.navigationTransitions=(0,a.f3M)(yO),this.urlSerializer=(0,a.f3M)(kS),this.location=(0,a.f3M)(lt),this.componentInputBindingEnabled=!!(0,a.f3M)(pO,{optional:!0}),this.eventsSubscription=new hB.w0,this.isNgZoneEnabled=(0,a.f3M)(a.R0b)instanceof a.R0b&&a.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new iD,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=rz(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const e=this.navigationTransitions.events.subscribe(i=>{try{const{currentTransition:r}=this.navigationTransitions;if(null===r)return void(Sz(i)&&this._events.next(i));if(i instanceof dO)Cz(r.source)&&(this.browserUrlTree=r.extractedUrl);else if(i instanceof rD)this.rawUrlTree=r.rawUrl;else if(i instanceof ez){if("eager"===this.urlUpdateStrategy){if(!r.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl);this.setBrowserUrl(s,r)}this.browserUrlTree=r.urlAfterRedirects}}else if(i instanceof yB)this.currentUrlTree=r.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r),this.browserUrlTree=r.urlAfterRedirects);else if(i instanceof VS)0!==i.code&&1!==i.code&&(this.navigated=!0),(3===i.code||2===i.code)&&this.restoreHistory(r);else if(i instanceof wB){const s=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),l={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Cz(r.source)};this.scheduleNavigation(s,BS,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}i instanceof hO&&this.restoreHistory(r,!0),i instanceof Tm&&(this.navigated=!0),Sz(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),BS,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,i,e.state)},0)}))}navigateToSyncWithBrowser(e,i,r){const s={replaceUrl:!0},l=r?.navigationId?r:null;if(r){const f={...r};delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(s.state=f)}const d=this.parseUrl(e);this.scheduleNavigation(d,i,l,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(AB),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){const{relativeTo:r,queryParams:s,fragment:l,queryParamsHandling:d,preserveFragment:f}=i,m=f?this.currentUrlTree.fragment:l;let C,y=null;switch(d){case"merge":y={...this.currentUrlTree.queryParams,...s};break;case"preserve":y=this.currentUrlTree.queryParams;break;default:y=s||null}null!==y&&(y=this.removeEmptyProps(y));try{C=q6(r?r.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof e[0]||!e[0].startsWith("/"))&&(e=[]),C=this.currentUrlTree.root}return Y6(C,e,y,m??null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=vy(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,BS,null,i)}navigate(e,i={skipLocationChange:!1}){return function $ie(n){for(let t=0;t<n.length;t++)if(null==n[t])throw new a.vHH(4008,!1)}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?{...jie}:!1===i?{...Gie}:i,vy(e))return B6(this.currentUrlTree,e,r);const s=this.parseUrl(e);return B6(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const s=e[r];return null!=s&&(i[r]=s),i},{})}scheduleNavigation(e,i,r,s,l){if(this.disposed)return Promise.resolve(!1);let d,f,m;l?(d=l.resolve,f=l.reject,m=l.promise):m=new Promise((C,A)=>{d=C,f=A});const y=this.pendingTasks.add();return Iz(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(y))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:e,extras:s,resolve:d,reject:f,promise:m,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),m.catch(C=>Promise.reject(C))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const l={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",l)}else{const s={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(r,"",s)}}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Sz(n){return!(n instanceof yB||n instanceof wB)}let qS=(()=>{class n{constructor(e,i,r,s,l,d){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=l,this.locationStrategy=d,this.href=null,this.commands=null,this.onChanges=new Qt.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const f=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===f||"area"===f,this.isAnchorElement?this.subscription=e.events.subscribe(m=>{m instanceof Tm&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(e,i,r,s,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==e||i||r||s||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const e=null===this.href?null:(0,a.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",e)}applyAttributeValue(e,i){const r=this.renderer,s=this.el.nativeElement;null!==i?r.setAttribute(s,e,i):r.removeAttribute(s,e)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(i){return new(i||n)(a.Y36(Bo),a.Y36(oD),a.$8M("tabindex"),a.Y36(a.Qsj),a.Y36(a.SBq),a.Y36(Ze))};static#t=this.\u0275dir=a.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){1&i&&a.NdJ("click",function(l){return r.onClick(l.button,l.ctrlKey,l.shiftKey,l.altKey,l.metaKey)}),2&i&&a.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",a.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",a.VuI],replaceUrl:["replaceUrl","replaceUrl",a.VuI],routerLink:"routerLink"},standalone:!0,features:[a.Xq5,a.TTD]})}return n})(),Az=(()=>{class n{get isActive(){return this._isActive}constructor(e,i,r,s,l){this.router=e,this.element=i,this.renderer=r,this.cdr=s,this.link=l,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new a.vpe,this.routerEventsSubscription=e.events.subscribe(d=>{d instanceof Tm&&this.update()})}ngAfterContentInit(){(0,At.of)(this.links.changes,(0,At.of)(null)).pipe((0,pd.J)()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const e=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=(0,Rn.D)(e).pipe((0,pd.J)()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(e){const i=Array.isArray(e)?e:e.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const e=this.hasActiveLinks();this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.classes.forEach(i=>{e?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),e&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(e))})}isLinkActive(e){const i=function zie(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>!!r.urlTree&&e.isActive(r.urlTree,i)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}static#e=this.\u0275fac=function(i){return new(i||n)(a.Y36(Bo),a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(a.sBO),a.Y36(qS,8))};static#t=this.\u0275dir=a.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(i,r,s){if(1&i&&a.Suo(s,qS,5),2&i){let l;a.iGM(l=a.CRH())&&(r.links=l)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[a.TTD]})}return n})();class Mz{}let Wie=(()=>{class n{constructor(e,i,r,s,l){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(dn(e=>e instanceof Tm),Xb(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=(0,a.MMx)(s.providers,e,`Route: ${s.path}`));const l=s._injector??e,d=s._loadedInjector??l;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(l,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(d,s.children??s._loadedRoutes))}return(0,Rn.D)(r).pipe((0,pd.J)())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):(0,At.of)(null);const s=r.pipe((0,Ds.z)(l=>null===l?(0,At.of)(void 0):(i._loadedRoutes=l.routes,i._loadedInjector=l.injector,this.processRoutes(l.injector??e,l.routes))));if(i.loadComponent&&!i._loadedComponent){const l=this.loader.loadComponent(i);return(0,Rn.D)([s,l]).pipe((0,pd.J)())}return s})}static#e=this.\u0275fac=function(i){return new(i||n)(a.LFG(Bo),a.LFG(a.Sil),a.LFG(a.lqb),a.LFG(Mz),a.LFG(RB))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const OB=new a.OlP("");let Nz=(()=>{class n{constructor(e,i,r,s,l={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof dO?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Tm?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof rD&&0===e.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof tz&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new tz(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){a.$Z()};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac})}return n})();function qf(n,t){return{\u0275kind:n,\u0275providers:t}}function Rz(){const n=(0,a.f3M)(a.zs3);return t=>{const e=n.get(a.z2F);if(t!==e.components[0])return;const i=n.get(Bo),r=n.get(Oz);1===n.get(kB)&&i.initialNavigation(),n.get(kz,null,a.XFs.Optional)?.setUpPreloading(),n.get(OB,null,a.XFs.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const Oz=new a.OlP("",{factory:()=>new Qt.x}),kB=new a.OlP("",{providedIn:"root",factory:()=>1}),kz=new a.OlP("");function Kie(n){return qf(0,[{provide:kz,useExisting:Wie},{provide:Mz,useExisting:n}])}const Pz=new a.OlP("ROUTER_FORROOT_GUARD"),Jie=[lt,{provide:kS,useClass:pB},Bo,US,{provide:oD,useFactory:function xz(n){return n.routerState.root},deps:[Bo]},RB,[]];function Xie(){return new a.PXZ("Router",Bo)}let Fz=(()=>{class n{constructor(e){}static forRoot(e,i){return{ngModule:n,providers:[Jie,[],{provide:uD,multi:!0,useValue:e},{provide:Pz,useFactory:ire,deps:[[Bo,new a.FiY,new a.tp0]]},{provide:wO,useValue:i||{}},i?.useHash?{provide:Ze,useClass:$e}:{provide:Ze,useClass:at},{provide:OB,useFactory:()=>{const n=(0,a.f3M)(cr),t=(0,a.f3M)(a.R0b),e=(0,a.f3M)(wO),i=(0,a.f3M)(yO),r=(0,a.f3M)(kS);return e.scrollOffset&&n.setOffset(e.scrollOffset),new Nz(r,i,n,t,e)}},i?.preloadingStrategy?Kie(i.preloadingStrategy).\u0275providers:[],{provide:a.PXZ,multi:!0,useFactory:Xie},i?.initialNavigation?rre(i):[],i?.bindToComponentInputs?qf(8,[lz,{provide:pO,useExisting:lz}]).\u0275providers:[],[{provide:Lz,useFactory:Rz},{provide:a.tb,multi:!0,useExisting:Lz}]]}}static forChild(e){return{ngModule:n,providers:[{provide:uD,multi:!0,useValue:e}]}}static#e=this.\u0275fac=function(i){return new(i||n)(a.LFG(Pz,8))};static#t=this.\u0275mod=a.oAB({type:n});static#n=this.\u0275inj=a.cJS({})}return n})();function ire(n){return"guarded"}function rre(n){return["disabled"===n.initialNavigation?qf(3,[{provide:a.ip1,multi:!0,useFactory:()=>{const t=(0,a.f3M)(Bo);return()=>{t.setUpLocationChangeListener()}}},{provide:kB,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?qf(2,[{provide:kB,useValue:0},{provide:a.ip1,multi:!0,deps:[a.zs3],useFactory:t=>{const e=t.get(je,Promise.resolve());return()=>e.then(()=>new Promise(i=>{const r=t.get(Bo),s=t.get(Oz);Iz(r,()=>{i(!0)}),t.get(yO).afterPreactivation=()=>(i(!0),s.closed?(0,At.of)(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const Lz=new a.OlP("");var yy=function(n){return n.UserNotFound="auth/user-not-found",n.WrongPassword="auth/wrong-password",n.EmailInUse="auth/email-already-in-use",n.WeakPassword="auth/weak-password",n.BadEmail="auth/invalid-email",n.InvalidLogin="auth/invalid-login-credentials",n}(yy||{});let ore=(()=>{class n{constructor(){}firebaseError(e){switch(e){case yy.UserNotFound:return"User does not exist";case yy.WrongPassword:return"Wrong password";case yy.EmailInUse:return"Email already in use";case yy.WeakPassword:return"Weak password, use 6 characters at least";case yy.BadEmail:return"Invalid Email";case yy.InvalidLogin:return"Credentials not accepted";default:return"Unknown error"}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),YS=(()=>{class n{constructor(){this.loggedIn=new bl.X(!1)}get isLoggedIn(){return this.loggedIn.asObservable()}isLoggedNext(e){return this.loggedIn.next(e)}SessionAddStorage(e,i){sessionStorage.setItem(e,JSON.stringify(i))}SessionGetStorage(e){const i=sessionStorage.getItem(e);return JSON.parse(i)}SessionRemove(e){sessionStorage.removeItem(e),sessionStorage.clear()}SessionClear(){sessionStorage.clear()}LocalAddStorage(e,i){localStorage.setItem(e,JSON.stringify(i))}LocalGetStorage(e){const i=localStorage.getItem(e);return JSON.parse(i)}LocalRemove(e){localStorage.removeItem(e)}LocalClear(){localStorage.clear()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),bO=(()=>{class n{constructor(e,i){this.http=e,this.storageService=i,this.apiUrl="https://petguardian-api.uc.r.appspot.com/"}getAppointments(e){return new Promise((i,r)=>{this.http.get(this.apiUrl+"vet/findAppointments/"+e).subscribe(s=>{i(s)},s=>{r(s)})})}getClients(e){return new Promise((i,r)=>{this.http.get(this.apiUrl+"vet/findClients/"+e).subscribe(s=>{i(s)},s=>{r(s)})})}static#e=this.\u0275fac=function(i){return new(i||n)(a.LFG(w6),a.LFG(YS))};static#t=this.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function are(n,t){1&n&&(a.TgZ(0,"span",10)(1,"strong"),a._uU(2,"Mail"),a.qZA(),a._uU(3," is required "),a.qZA())}function lre(n,t){1&n&&(a.TgZ(0,"span",10),a._uU(1," Mail must be "),a.TgZ(2,"strong"),a._uU(3,"valid"),a.qZA()())}function cre(n,t){1&n&&(a.TgZ(0,"span",10)(1,"strong"),a._uU(2,"Password"),a.qZA(),a._uU(3," is required "),a.qZA())}let ure=(()=>{class n{constructor(e,i,r,s,l,d,f){this.fb=e,this.afAuth=i,this.router=r,this.fireBaseErrorService=s,this.toastr=l,this.storageService=d,this.apiService=f,this.loginUser=this.fb.group({email:["",[OL.required,OL.email]],password:["",OL.required]}),this.subscription=this.storageService.isLoggedIn.subscribe(m=>{1==m&&this.router.navigate(["dashboard"])})}login(){this.afAuth.signInWithEmailAndPassword(this.loginUser.value.email,this.loginUser.value.password).then(r=>{this.storageService.isLoggedNext(!0),this.storageService.SessionAddStorage("uid",r.user?.uid),this.router.navigate(["dashboard"])}).catch(r=>{this.toastr.error(this.fireBaseErrorService.firebaseError(r.code),"Error")})}static#e=this.\u0275fac=function(i){return new(i||n)(a.Y36(JY),a.Y36(ld),a.Y36(Bo),a.Y36(ore),a.Y36(n2),a.Y36(YS),a.Y36(bO))};static#t=this.\u0275cmp=a.Xpm({type:n,selectors:[["app-login"]],decls:20,vars:5,consts:[[1,"wrapper"],[1,"body"],["src","../../../assets/img/login-person.png","alt","Login",1,"logo"],[3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["type","email","formControlName","email","placeholder","name@example.com",1,"form-control"],["class","text-danger errorLabel",4,"ngIf"],["type","password","formControlName","password","placeholder","Password",1,"form-control"],[1,"d-grid","gap-2"],["type","submit",1,"btn","btn-primary","btn-lg",3,"disabled"],[1,"text-danger","errorLabel"]],template:function(i,r){if(1&i&&(a.TgZ(0,"div",0)(1,"div",1),a._UZ(2,"img",2),a.TgZ(3,"h1"),a._uU(4,"Login"),a.qZA(),a.TgZ(5,"form",3),a.NdJ("ngSubmit",function(){return r.login()}),a.TgZ(6,"div",4),a._UZ(7,"input",5),a.TgZ(8,"label"),a._uU(9,"Email"),a.qZA(),a.YNc(10,are,4,0,"span",6),a.YNc(11,lre,4,0,"span",6),a.qZA(),a.TgZ(12,"div",4),a._UZ(13,"input",7),a.TgZ(14,"label"),a._uU(15,"Password"),a.qZA(),a.YNc(16,cre,4,0,"span",6),a.qZA(),a.TgZ(17,"div",8)(18,"button",9),a._uU(19,"Iniciar Sesion"),a.qZA()()()()()),2&i){let s,l,d;a.xp6(5),a.Q6J("formGroup",r.loginUser),a.xp6(5),a.Q6J("ngIf",(null==(s=r.loginUser.get("email"))?null:s.hasError("required"))&&(null==(s=r.loginUser.get("email"))?null:s.touched)),a.xp6(1),a.Q6J("ngIf",(null==(l=r.loginUser.get("email"))?null:l.hasError("email"))&&(null==(l=r.loginUser.get("email"))?null:l.touched)),a.xp6(5),a.Q6J("ngIf",(null==(d=r.loginUser.get("password"))?null:d.hasError("required"))&&(null==(d=r.loginUser.get("password"))?null:d.touched)),a.xp6(2),a.Q6J("disabled",r.loginUser.invalid)}},dependencies:[Mi,Vj,nS,LL,Ij,pR,QL],styles:[".wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100vh}.logo[_ngcontent-%COMP%]{height:130px;margin-bottom:10px}.body[_ngcontent-%COMP%]{width:100%;max-width:330px;margin:auto;padding:30px;text-align:center}"]})}return n})();function po(n){if(null===n||!0===n||!1===n)return NaN;var t=Number(n);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function DO(n){return(DO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function pn(n,t){if(t.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+t.length+" present")}function ni(n){pn(1,arguments);var t=Object.prototype.toString.call(n);return n instanceof Date||"object"===DO(n)&&"[object Date]"===t?new Date(n.getTime()):"number"==typeof n||"[object Number]"===t?new Date(n):(("string"==typeof n||"[object String]"===t)&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function wy(n,t){pn(2,arguments);var e=ni(n),i=po(t);return isNaN(i)?new Date(NaN):(i&&e.setDate(e.getDate()+i),e)}function ZS(n,t){return pn(2,arguments),wy(n,-po(t))}function Cu(n){pn(1,arguments);var t=ni(n);return t.setHours(0,0,0,0),t}function KS(n){pn(1,arguments);var t=ni(n),e=t.getMonth();return t.setFullYear(t.getFullYear(),e+1,0),t.setHours(23,59,59,999),t}function PB(n,t){pn(2,arguments);var e=ni(n).getTime(),i=po(t);return new Date(e+i)}var dre=36e5;function QS(n,t){return pn(2,arguments),PB(n,po(t)*dre)}function FB(n,t){pn(2,arguments);var e=ni(n),i=ni(t);return e.getFullYear()===i.getFullYear()&&e.getMonth()===i.getMonth()}function LB(n,t){pn(2,arguments);var e=Cu(n),i=Cu(t);return e.getTime()===i.getTime()}var fre=function(){function n(){}return n.prototype.getAllStyles=function(t){return window.getComputedStyle(t)},n.prototype.getStyle=function(t,e){return this.getAllStyles(t)[e]},n.prototype.isStaticPositioned=function(t){return"static"===(this.getStyle(t,"position")||"static")},n.prototype.offsetParent=function(t){for(var e=t.offsetParent||document.documentElement;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement},n.prototype.position=function(t,e){void 0===e&&(e=!0);var i,r={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))i={top:(i=t.getBoundingClientRect()).top,bottom:i.bottom,left:i.left,right:i.right,height:i.height,width:i.width};else{var s=this.offsetParent(t);i=this.offset(t,!1),s!==document.documentElement&&(r=this.offset(s,!1)),r.top+=s.clientTop,r.left+=s.clientLeft}return i.top-=r.top,i.bottom-=r.top,i.left-=r.left,i.right-=r.left,e&&(i.top=Math.round(i.top),i.bottom=Math.round(i.bottom),i.left=Math.round(i.left),i.right=Math.round(i.right)),i},n.prototype.offset=function(t,e){void 0===e&&(e=!0);var i=t.getBoundingClientRect(),r_top=window.pageYOffset-document.documentElement.clientTop,r_left=window.pageXOffset-document.documentElement.clientLeft,s={height:i.height||t.offsetHeight,width:i.width||t.offsetWidth,top:i.top+r_top,bottom:i.bottom+r_top,left:i.left+r_left,right:i.right+r_left};return e&&(s.height=Math.round(s.height),s.width=Math.round(s.width),s.top=Math.round(s.top),s.bottom=Math.round(s.bottom),s.left=Math.round(s.left),s.right=Math.round(s.right)),s},n.prototype.positionElements=function(t,e,i,r){var s=i.split("-"),l=s[0],d=void 0===l?"top":l,f=s[1],m=void 0===f?"center":f,y=r?this.offset(t,!1):this.position(t,!1),C=this.getAllStyles(e),A=parseFloat(C.marginTop),x=parseFloat(C.marginBottom),P=parseFloat(C.marginLeft),F=parseFloat(C.marginRight),U=0,ee=0;switch(d){case"top":U=y.top-(e.offsetHeight+A+x);break;case"bottom":U=y.top+y.height;break;case"left":ee=y.left-(e.offsetWidth+P+F);break;case"right":ee=y.left+y.width}switch(m){case"top":U=y.top;break;case"bottom":U=y.top+y.height-e.offsetHeight;break;case"left":ee=y.left;break;case"right":ee=y.left+y.width-e.offsetWidth;break;case"center":"top"===d||"bottom"===d?ee=y.left+y.width/2-e.offsetWidth/2:U=y.top+y.height/2-e.offsetHeight/2}e.style.transform="translate("+Math.round(ee)+"px, "+Math.round(U)+"px)";var oe=e.getBoundingClientRect(),te=document.documentElement,ce=window.innerHeight||te.clientHeight,Ne=window.innerWidth||te.clientWidth;return oe.left>=0&&oe.top>=0&&oe.right<=Ne&&oe.bottom<=ce},n}(),pre=/\s+/,Bz=new fre,Tu=function(){return Tu=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++)for(var r in t=arguments[e])Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},Tu.apply(this,arguments)},BB=function(n,t,e){if(e||2===arguments.length)for(var s,i=0,r=t.length;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return n.concat(s||Array.prototype.slice.call(t))},VB=function(n){return n[n.SUNDAY=0]="SUNDAY",n[n.MONDAY=1]="MONDAY",n[n.TUESDAY=2]="TUESDAY",n[n.WEDNESDAY=3]="WEDNESDAY",n[n.THURSDAY=4]="THURSDAY",n[n.FRIDAY=5]="FRIDAY",n[n.SATURDAY=6]="SATURDAY",n}(VB||{}),mre=[VB.SUNDAY,VB.SATURDAY],UB=7,Im=86400;function Vz(n,t){var e=t.startDate,r=t.excluded,s=t.precision;if(r.length<1)return 0;for(var d=n.getDay,f=n.addDays,m=(0,n.addSeconds)(e,t.seconds-1),y=d(e),C=d(m),A=0,x=e,P=function(){var F=d(x);r.some(function(U){return U===F})&&(A+=function _re(n,t){var i=t.day,s=t.dayEnd,l=t.startDate,d=t.endDate,f=n.differenceInSeconds,y=n.startOfDay;if("minutes"===t.precision){if(i===t.dayStart)return f((0,n.endOfDay)(l),l)+1;if(i===s)return f(d,y(d))+1}return Im}(n,{dayStart:y,dayEnd:C,day:F,precision:s,startDate:e,endDate:m})),x=f(x,1)};x<m;)P();return A}function JS(n,t){var i=t.periodStart,r=t.periodEnd;return t.events.filter(function(s){return function wre(n,t){var e=t.event,i=t.periodStart,r=t.periodEnd,s=n.isSameSecond,l=e.start,d=e.end||e.start;return!!(l>i&&l<r||d>i&&d<r||l<i&&d>r||s(l,i)||s(l,r)||s(d,i)||s(d,r))}(n,{event:s,periodStart:i,periodEnd:r})})}function Uz(n,t){var e=t.date,i=t.weekendDays,r=void 0===i?mre:i,l=n.isSameDay,d=n.getDay,f=(0,n.startOfDay)(new Date),m=d(e);return{date:e,day:m,isPast:e<f,isToday:l(e,f),isFuture:e>f,isWeekend:r.indexOf(m)>-1}}function jB(n,t){for(var r=t.excluded,s=void 0===r?[]:r,l=t.weekendDays,d=t.viewStart,f=void 0===d?n.startOfWeek(t.viewDate,{weekStartsOn:t.weekStartsOn}):d,m=t.viewEnd,y=void 0===m?n.addDays(f,UB):m,C=n.addDays,A=n.getDay,x=[],P=f;P<y;)s.some(function(F){return A(P)===F})||x.push(Uz(n,{date:P,weekendDays:l})),P=C(P,1);return x}function Dre(n,t){var e=t.events,i=void 0===e?[]:e,r=t.excluded,s=void 0===r?[]:r,l=t.precision,d=void 0===l?"days":l,f=t.absolutePositionedEvents,m=void 0!==f&&f,y=t.viewStart,C=t.viewEnd;y=n.startOfDay(y),C=n.endOfDay(C);var A=n.differenceInSeconds,x=n.differenceInDays,P=function bre(n,t){for(var i=t.date2,r=t.excluded,s=t.date1,l=0;s<i;)-1===r.indexOf(n.getDay(s))&&l++,s=n.addDays(s,1);return l}(n,{date1:y,date2:C,excluded:s}),F=x(C,y)+1,U=i.filter(function(te){return te.allDay}).map(function(te){var ce=function yre(n,t){var e=t.event,i=t.startOfWeek,r=t.excluded,s=t.precision,l=n.differenceInDays,d=n.startOfDay,f=n.differenceInSeconds;if(e.start<i)return 0;var m=0;switch(s){case"days":m=l(d(e.start),i)*Im;break;case"minutes":m=f(e.start,i)}return m-=Vz(n,{startDate:i,seconds:m,excluded:r,precision:s}),Math.abs(m/Im)}(n,{event:te,startOfWeek:y,excluded:s,precision:d}),Ne=function vre(n,t){var e=t.event,i=t.offset,s=t.excluded,l=t.precision,d=t.totalDaysInView,m=n.differenceInSeconds,y=n.addDays,C=n.endOfDay,A=n.differenceInDays,x=Im,P=(0,n.max)([e.start,t.startOfWeekDate]);e.end&&(x="minutes"===l?m(e.end,P):A(y(C(e.end),1),P)*Im);var F=i*Im,ee=d*Im;return F+x>ee&&(x=ee-F),(x-=Vz(n,{startDate:P,seconds:x,excluded:s,precision:l}))/Im}(n,{event:te,offset:ce,startOfWeekDate:y,excluded:s,precision:d,totalDaysInView:F});return{event:te,offset:ce,span:Ne}}).filter(function(te){return te.offset<P}).filter(function(te){return te.span>0}).map(function(te){return{event:te.event,offset:te.offset,span:te.span,startsBeforeWeek:te.event.start<y,endsAfterWeek:(te.event.end||te.event.start)>C}}).sort(function(te,ce){var Ne=A(te.event.start,ce.event.start);return 0===Ne?A(ce.event.end||ce.event.start,te.event.end||te.event.start):Ne}),ee=[],oe=[];return U.forEach(function(te,ce){if(-1===oe.indexOf(te)){oe.push(te);var Ne=te.span+te.offset,Be=U.slice(ce+1).filter(function(_t){if(_t.offset>=Ne&&Ne+_t.span<=F&&-1===oe.indexOf(_t)){var Tt=_t.offset-Ne;return m||(_t.offset=Tt),Ne+=_t.span+Tt,oe.push(_t),!0}}),ot=BB([te],Be,!0),tt=ot.filter(function(_t){return _t.event.id}).map(function(_t){return _t.event.id}).join("-");ee.push(Tu({row:ot},tt?{id:tt}:{}))}}),ee}function Ere(n,t){var e=t.events,i=t.viewDate,r=t.hourSegments,s=t.hourDuration,l=t.dayStart,d=t.dayEnd,f=t.weekStartsOn,m=t.excluded,y=t.weekendDays,C=t.segmentHeight,A=t.viewStart,x=t.viewEnd,P=t.minimumEventHeight,F=function Sre(n,t){var e=t.viewDate,i=t.hourSegments,r=t.hourDuration,s=t.dayStart,l=t.dayEnd,d=n.setMinutes,f=n.setHours,m=n.startOfDay,y=n.startOfMinute,C=n.endOfDay,A=n.addMinutes,x=n.addDays,P=[],F=d(f(m(e),TO(s.hour)),IO(s.minute)),U=d(f(y(C(e)),TO(l.hour)),IO(l.minute)),ee=(r||60)/i,oe=m(e),te=C(e),ce=function(Tt){return Tt};n.getTimezoneOffset(oe)!==n.getTimezoneOffset(te)&&(oe=x(oe,1),F=x(F,1),U=x(U,1),ce=function(Tt){return x(Tt,-1)});for(var Ne=r?1440/r:60,Be=0;Be<Ne;Be++){for(var ot=[],tt=0;tt<i;tt++){var _t=A(A(F,Be*(r||60)),tt*ee);_t>=F&&_t<U&&ot.push({date:ce(_t),displayDate:_t,isStart:0===tt})}ot.length>0&&P.push({segments:ot})}return P}(n,{viewDate:i,hourSegments:r,hourDuration:s,dayStart:l,dayEnd:d}),U=jB(n,{viewDate:i,weekStartsOn:f,excluded:m,weekendDays:y,viewStart:A,viewEnd:x}),ee=n.setHours,oe=n.setMinutes,te=n.getHours,ce=n.getMinutes;return U.map(function(Ne){var Be=function Ire(n,t){var e=t.events,i=t.viewDate,r=t.hourSegments,s=t.dayStart,l=t.dayEnd,d=t.eventWidth,f=t.segmentHeight,m=t.hourDuration,y=t.minimumEventHeight,C=n.setMinutes,A=n.setHours,x=n.startOfDay,P=n.startOfMinute,F=n.endOfDay,U=n.differenceInMinutes,ee=C(A(x(i),TO(s.hour)),IO(s.minute)),oe=C(A(P(F(i)),TO(l.hour)),IO(l.minute));oe.setSeconds(59,999);var te=[],ce=JS(n,{events:e.filter(function(tt){return!tt.allDay}),periodStart:ee,periodEnd:oe}),Ne=ce.sort(function(tt,_t){return tt.start.valueOf()-_t.start.valueOf()}).map(function(tt){var _t=tt.start,Tt=tt.end||_t,st=_t<ee,nt=Tt>oe,Zt=r*f/(m||60),Mn=0;if(_t>ee){var go=n.getTimezoneOffset(_t),St=n.getTimezoneOffset(ee)-go;Mn+=U(_t,ee)+St}Mn*=Zt,Mn=Math.floor(Mn);var Ht=st?ee:_t,jt=nt?oe:Tt,ii=n.getTimezoneOffset(Ht)-n.getTimezoneOffset(jt),wi=U(jt,Ht)+ii;tt.end?wi*=Zt:wi=f,y&&wi<y&&(wi=y),wi=Math.floor(wi);for(var mo=CO(te,Mn,Mn+wi),$n=0;mo.some(function(Dl){return Dl.left===$n});)$n+=d;var Cs={event:tt,height:wi,width:d,top:Mn,left:$n,startsBeforeDay:st,endsAfterDay:nt};return te.push(Cs),Cs}),Be=Math.max.apply(Math,Ne.map(function(tt){return tt.left+tt.width})),ot=JS(n,{events:e.filter(function(tt){return tt.allDay}),periodStart:x(ee),periodEnd:F(oe)});return{events:Ne,width:Be,allDayEvents:ot,period:{events:ce,start:ee,end:oe}}}(n,{events:e,viewDate:Ne.date,hourSegments:r,dayStart:l,dayEnd:d,segmentHeight:C,eventWidth:1,hourDuration:s,minimumEventHeight:P}),ot=F.map(function(Tt){var st=Tt.segments.map(function(nt){var Zt=oe(ee(Ne.date,te(nt.date)),ce(nt.date));return Tu(Tu({},nt),{date:Zt})});return Tu(Tu({},Tt),{segments:st})});function tt(Tt,st){var nt=Math.max.apply(Math,st.map(function(Mn){return Mn.left+1})),Zt=Tt.filter(function(Mn){return Mn.left>=nt}).filter(function(Mn){return CO(st,Mn.top,Mn.top+Mn.height).length>0});return Zt.length>0?tt(Tt,Zt):nt}var _t=Be.events.map(function(Tt){var nt=100/tt(Be.events,CO(Be.events,Tt.top,Tt.top+Tt.height));return Tu(Tu({},Tt),{left:Tt.left*nt,width:nt})});return{hours:ot,date:Ne.date,events:_t.map(function(Tt){var st=CO(_t.filter(function(nt){return nt.left>Tt.left}),Tt.top,Tt.top+Tt.height);return st.length>0?Tu(Tu({},Tt),{width:Math.min.apply(Math,st.map(function(nt){return nt.left}))-Tt.left}):Tt})}})}function CO(n,t,e){return n.filter(function(i){var r=i.top,s=i.top+i.height;return t<s&&s<e||t<r&&r<e||r<=t&&e<=s})}function TO(n){return Math.max(Math.min(23,n),0)}function IO(n){return Math.max(Math.min(59,n),0)}var dD=function(n){return n.NotArray="Events must be an array",n.StartPropertyMissing="Event is missing the `start` property",n.StartPropertyNotDate="Event `start` property should be a javascript date object. Do `new Date(event.start)` to fix it.",n.EndPropertyNotDate="Event `end` property should be a javascript date object. Do `new Date(event.end)` to fix it.",n.EndsBeforeStart="Event `start` property occurs after the `end`",n}(dD||{});function GB(n,t){return n=function xre(n,t){return typeof n>"u"?typeof t>"u"?n:t:n}(n,t),"function"==typeof n?function(){for(var i=arguments,r=arguments.length,s=Array(r),l=0;l<r;l++)s[l]=i[l];return!!n.apply(this,s)}:n?function(){return!0}:function(){return!1}}var $B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol?"symbol":typeof n},Hz=function(n){return null!=n&&"object"===(typeof n>"u"?"undefined":$B(n))&&1===n.nodeType&&"object"===$B(n.style)&&"object"===$B(n.ownerDocument)};function jz(n,t){if(t=WB(t,!0),!Hz(t))return-1;for(var e=0;e<n.length;e++)if(n[e]===t)return e;return-1}function zB(n,t){return-1!==jz(n,t)}function Ore(n){for(var t=arguments,e=[],i=arguments.length-1;i-- >0;)e[i]=t[i+1];return function Rre(n,t){for(var e=0;e<t.length;e++)zB(n,t[e])||n.push(t[e]);return t}(n,e=e.map(WB))}function kre(n){for(var t=arguments,e=[],i=arguments.length-1;i-- >0;)e[i]=t[i+1];return e.map(WB).reduce(function(r,s){var l=jz(n,s);return-1!==l?r.concat(n.splice(l,1)):r},[])}function WB(n,t){if("string"==typeof n)try{return document.querySelector(n)}catch(e){throw e}if(!Hz(n)&&!t)throw new TypeError(n+" is not a DOM element.");return n}function Gz(n){if(n===window)return function Fre(){var n={top:{value:0,enumerable:!0},left:{value:0,enumerable:!0},right:{value:window.innerWidth,enumerable:!0},bottom:{value:window.innerHeight,enumerable:!0},width:{value:window.innerWidth,enumerable:!0},height:{value:window.innerHeight,enumerable:!0},x:{value:0,enumerable:!0},y:{value:0,enumerable:!0}};if(Object.create)return Object.create({},n);var t={};return Object.defineProperties(t,n),t}();try{var t=n.getBoundingClientRect();return void 0===t.x&&(t.x=t.left,t.y=t.top),t}catch{throw new TypeError("Can't call getBoundingClientRect on "+n)}}var t,qB=void 0;"function"!=typeof Object.create?(t=function(){},qB=function(e,i){if(e!==Object(e)&&null!==e)throw TypeError("Argument must be an object, or null");t.prototype=e||{};var r=new t;return t.prototype=null,void 0!==i&&Object.defineProperties(r,i),null===e&&(r.__proto__=null),r}):qB=Object.create;var Bre=qB,by=["altKey","button","buttons","clientX","clientY","ctrlKey","metaKey","movementX","movementY","offsetX","offsetY","pageX","pageY","region","relatedTarget","screenX","screenY","shiftKey","which","x","y"];function YB(n,t){t=t||{};for(var e=Bre(n),i=0;i<by.length;i++)void 0!==t[by[i]]&&(e[by[i]]=t[by[i]]);return e}function ZB(n,t){console.log("data ",t),n.data=t||{},n.dispatched="mousemove"}var XS=["webkit","moz","ms","o"],e1=function(){if(typeof window>"u")return function(){};for(var n=0,t=XS.length;n<t&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[XS[n]+"RequestAnimationFrame"];if(!window.requestAnimationFrame){var e=0;window.requestAnimationFrame=function(i){var r=(new Date).getTime(),s=Math.max(0,16-r-e),l=window.setTimeout(function(){return i(r+s)},s);return e=r+s,l}}return window.requestAnimationFrame.bind(window)}(),hD=function(){if(typeof window>"u")return function(){};for(var n=0,t=XS.length;n<t&&!window.cancelAnimationFrame;++n)window.cancelAnimationFrame=window[XS[n]+"CancelAnimationFrame"]||window[XS[n]+"CancelRequestAnimationFrame"];return window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){window.clearTimeout(e)}),window.cancelAnimationFrame.bind(window)}();function Ure(n,t){void 0===t&&(t={});var e=this,i=4,r=!1;if("object"!=typeof t.margin){var s=t.margin||-1;this.margin={left:s,right:s,top:s,bottom:s}}else this.margin=t.margin;this.scrollWhenOutside=t.scrollWhenOutside||!1;var l={},d=function Pre(n,t){var e=GB((t=t||{}).allowUpdate,!0);return function(r){if(r=r||window.event,n.target=r.target||r.srcElement||r.originalTarget,n.element=this,n.type=r.type,e(r)){if(r.targetTouches)n.x=r.targetTouches[0].clientX,n.y=r.targetTouches[0].clientY,n.pageX=r.targetTouches[0].pageX,n.pageY=r.targetTouches[0].pageY,n.screenX=r.targetTouches[0].screenX,n.screenY=r.targetTouches[0].screenY;else{if(null===r.pageX&&null!==r.clientX){var s=r.target&&r.target.ownerDocument||document,l=s.documentElement,d=s.body;n.pageX=r.clientX+(l&&l.scrollLeft||d&&d.scrollLeft||0)-(l&&l.clientLeft||d&&d.clientLeft||0),n.pageY=r.clientY+(l&&l.scrollTop||d&&d.scrollTop||0)-(l&&l.clientTop||d&&d.clientTop||0)}else n.pageX=r.pageX,n.pageY=r.pageY;n.x=r.clientX,n.y=r.clientY,n.screenX=r.screenX,n.screenY=r.screenY}n.clientX=n.x,n.clientY=n.y}}}(l),f=function Vre(n){var t={screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,button:0,buttons:1,relatedTarget:null,region:null};function e(s){for(var l=0;l<by.length;l++)t[by[l]]=s[by[l]]}return void 0!==n&&n.addEventListener("mousemove",e),{destroy:function r(){n&&n.removeEventListener("mousemove",e,!1),t=null},dispatch:MouseEvent?function(l,d,f){var m=new MouseEvent("mousemove",YB(t,d));return ZB(m,f),l.dispatchEvent(m)}:"function"==typeof document.createEvent?function(l,d,f){var m=YB(t,d),y=document.createEvent("MouseEvents");return y.initMouseEvent("mousemove",!0,!0,window,0,m.screenX,m.screenY,m.clientX,m.clientY,m.ctrlKey,m.altKey,m.shiftKey,m.metaKey,m.button,m.relatedTarget),ZB(y,f),l.dispatchEvent(y)}:"function"==typeof document.createEventObject?function(l,d,f){var m=document.createEventObject(),y=YB(t,d);for(var C in y)m[C]=y[C];return ZB(m,f),l.dispatchEvent(m)}:void 0}}(),m=!1;window.addEventListener("mousemove",d,!1),window.addEventListener("touchmove",d,!1),isNaN(t.maxSpeed)||(i=t.maxSpeed),"object"!=typeof i&&(i={left:i,right:i,top:i,bottom:i}),this.autoScroll=GB(t.autoScroll),this.syncMove=GB(t.syncMove,!1),this.destroy=function(st){window.removeEventListener("mousemove",d,!1),window.removeEventListener("touchmove",d,!1),window.removeEventListener("mousedown",F,!1),window.removeEventListener("touchstart",F,!1),window.removeEventListener("mouseup",U,!1),window.removeEventListener("touchend",U,!1),window.removeEventListener("pointerup",U,!1),window.removeEventListener("mouseleave",oe,!1),window.removeEventListener("mousemove",Ne,!1),window.removeEventListener("touchmove",Ne,!1),window.removeEventListener("scroll",P,!0),n=[],st&&ee()},this.add=function(){for(var st=[],nt=arguments.length;nt--;)st[nt]=arguments[nt];return Ore.apply(void 0,[n].concat(st)),this},this.remove=function(){for(var st=[],nt=arguments.length;nt--;)st[nt]=arguments[nt];return kre.apply(void 0,[n].concat(st))};var C,st,y=null;"[object Array]"!==Object.prototype.toString.call(n)&&(n=[n]),st=n,n=[],st.forEach(function(nt){nt===window?y=window:e.add(nt)}),Object.defineProperties(this,{down:{get:function(){return m}},maxSpeed:{get:function(){return i}},point:{get:function(){return l}},scrolling:{get:function(){return r}}});var x,A=null;function P(st){for(var nt=0;nt<n.length;nt++)if(n[nt]===st.target){r=!0;break}r&&e1(function(){return r=!1})}function F(){m=!0}function U(){m=!1,ee()}function ee(){hD(x),hD(C)}function oe(){m=!1}function ce(){for(var st=null,nt=0;nt<n.length;nt++)$z(l,n[nt])&&(st=n[nt]);return st}function Ne(st){if(e.autoScroll()&&!st.dispatched){var nt=st.target,Zt=document.body;A&&!$z(l,A)&&(e.scrollWhenOutside||(A=null)),nt&&nt.parentNode===Zt?nt=ce():(nt=function te(st){if(!st)return null;if(A===st||zB(n,st))return st;for(;st=st.parentNode;)if(zB(n,st))return st;return null}(nt),nt||(nt=ce())),nt&&nt!==A&&(A=nt),y&&(hD(C),C=e1(Be)),A&&(hD(x),x=e1(ot))}}function Be(){tt(y),hD(C),C=e1(Be)}function ot(){A&&(tt(A),hD(x),x=e1(ot))}function tt(st){var Zt,Mn,nt=Gz(st);Zt=l.x<nt.left+e.margin.left?Math.floor(Math.max(-1,(l.x-nt.left)/e.margin.left-1)*e.maxSpeed.left):l.x>nt.right-e.margin.right?Math.ceil(Math.min(1,(l.x-nt.right)/e.margin.right+1)*e.maxSpeed.right):0,Mn=l.y<nt.top+e.margin.top?Math.floor(Math.max(-1,(l.y-nt.top)/e.margin.top-1)*e.maxSpeed.top):l.y>nt.bottom-e.margin.bottom?Math.ceil(Math.min(1,(l.y-nt.bottom)/e.margin.bottom+1)*e.maxSpeed.bottom):0,e.syncMove()&&f.dispatch(st,{pageX:l.pageX+Zt,pageY:l.pageY+Mn,clientX:l.x+Zt,clientY:l.y+Mn}),setTimeout(function(){Mn&&function _t(st,nt){st===window?window.scrollTo(st.pageXOffset,st.pageYOffset+nt):st.scrollTop+=nt}(st,Mn),Zt&&function Tt(st,nt){st===window?window.scrollTo(st.pageXOffset+nt,st.pageYOffset):st.scrollLeft+=nt}(st,Zt)})}window.addEventListener("mousedown",F,!1),window.addEventListener("touchstart",F,!1),window.addEventListener("mouseup",U,!1),window.addEventListener("touchend",U,!1),window.addEventListener("pointerup",U,!1),window.addEventListener("mousemove",Ne,!1),window.addEventListener("touchmove",Ne,!1),window.addEventListener("mouseleave",oe,!1),window.addEventListener("scroll",P,!0)}function $z(n,t,e){return e?n.y>e.top&&n.y<e.bottom&&n.x>e.left&&n.x<e.right:function Lre(n,t){var e=Gz(t);return n.y>e.top&&n.y<e.bottom&&n.x>e.left&&n.x<e.right}(n,t)}function KB(n,t,e){e&&e.split(" ").forEach(i=>n.addClass(t.nativeElement,i))}function SO(n,t,e){e&&e.split(" ").forEach(i=>n.removeClass(t.nativeElement,i))}let zz=(()=>{class n{constructor(){this.currentDrag=new Qt.x}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Wz=(()=>{class n{constructor(e){this.elementRef=e}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.SBq))},n.\u0275dir=a.lG2({type:n,selectors:[["","mwlDraggableScrollContainer",""]]}),n})(),QB=(()=>{class n{constructor(e,i,r,s,l,d,f){this.element=e,this.renderer=i,this.draggableHelper=r,this.zone=s,this.vcr=l,this.scrollContainer=d,this.document=f,this.dragAxis={x:!0,y:!0},this.dragSnapGrid={},this.ghostDragEnabled=!0,this.showOriginalElementWhileDragging=!1,this.dragCursor="",this.autoScroll={margin:20},this.dragPointerDown=new a.vpe,this.dragStart=new a.vpe,this.ghostElementCreated=new a.vpe,this.dragging=new a.vpe,this.dragEnd=new a.vpe,this.pointerDown$=new Qt.x,this.pointerMove$=new Qt.x,this.pointerUp$=new Qt.x,this.eventListenerSubscriptions={},this.destroy$=new Qt.x,this.timeLongPress={timerBegin:0,timerEnd:0}}ngOnInit(){this.checkEventListeners();const e=this.pointerDown$.pipe(dn(()=>this.canDrag()),(0,Ds.z)(i=>{i.event.stopPropagation&&!this.scrollContainer&&i.event.stopPropagation();const r=this.renderer.createElement("style");this.renderer.setAttribute(r,"type","text/css"),this.renderer.appendChild(r,this.renderer.createText("\n          body * {\n           -moz-user-select: none;\n           -ms-user-select: none;\n           -webkit-user-select: none;\n           user-select: none;\n          }\n        ")),requestAnimationFrame(()=>{this.document.head.appendChild(r)});const s=this.getScrollPosition(),l=new bi.y(x=>this.renderer.listen(this.scrollContainer?this.scrollContainer.elementRef.nativeElement:"window","scroll",F=>x.next(F))).pipe(Kl(s),(0,rt.U)(()=>this.getScrollPosition())),d=new Qt.x,f=new Xn;this.dragPointerDown.observers.length>0&&this.zone.run(()=>{this.dragPointerDown.next({x:0,y:0})});const m=(0,Sr.T)(this.pointerUp$,this.pointerDown$,f,this.destroy$).pipe((0,Ar.B)()),y=iO([this.pointerMove$,l]).pipe((0,rt.U)(([x,P])=>({currentDrag$:d,transformX:x.clientX-i.clientX,transformY:x.clientY-i.clientY,clientX:x.clientX,clientY:x.clientY,scrollLeft:P.left,scrollTop:P.top,target:x.event.target})),(0,rt.U)(x=>(this.dragSnapGrid.x&&(x.transformX=Math.round(x.transformX/this.dragSnapGrid.x)*this.dragSnapGrid.x),this.dragSnapGrid.y&&(x.transformY=Math.round(x.transformY/this.dragSnapGrid.y)*this.dragSnapGrid.y),x)),(0,rt.U)(x=>(this.dragAxis.x||(x.transformX=0),this.dragAxis.y||(x.transformY=0),x)),(0,rt.U)(x=>{const P=x.scrollLeft-s.left,F=x.scrollTop-s.top;return{...x,x:x.transformX+P,y:x.transformY+F}}),dn(({x,y:P,transformX:F,transformY:U})=>!this.validateDrag||this.validateDrag({x,y:P,transform:{x:F,y:U}})),Di(m),(0,Ar.B)()),C=y.pipe(jn(1),(0,Ar.B)()),A=y.pipe(rO(1),(0,Ar.B)());return C.subscribe(({clientX:x,clientY:P,x:F,y:U})=>{if(this.dragStart.observers.length>0&&this.zone.run(()=>{this.dragStart.next({cancelDrag$:f})}),this.scroller=function Hre(n,t){return new Ure(n,t)}([this.scrollContainer?this.scrollContainer.elementRef.nativeElement:this.document.defaultView],{...this.autoScroll,autoScroll:()=>!0}),KB(this.renderer,this.element,this.dragActiveClass),this.ghostDragEnabled){const ee=this.element.nativeElement.getBoundingClientRect(),oe=this.element.nativeElement.cloneNode(!0);if(this.showOriginalElementWhileDragging||this.renderer.setStyle(this.element.nativeElement,"visibility","hidden"),this.ghostElementAppendTo?this.ghostElementAppendTo.appendChild(oe):this.element.nativeElement.parentNode.insertBefore(oe,this.element.nativeElement.nextSibling),this.ghostElement=oe,this.document.body.style.cursor=this.dragCursor,this.setElementStyles(oe,{position:"fixed",top:`${ee.top}px`,left:`${ee.left}px`,width:`${ee.width}px`,height:`${ee.height}px`,cursor:this.dragCursor,margin:"0",willChange:"transform",pointerEvents:"none"}),this.ghostElementTemplate){const te=this.vcr.createEmbeddedView(this.ghostElementTemplate);oe.innerHTML="",te.rootNodes.filter(ce=>ce instanceof Node).forEach(ce=>{oe.appendChild(ce)}),A.subscribe(()=>{this.vcr.remove(this.vcr.indexOf(te))})}this.ghostElementCreated.observers.length>0&&this.zone.run(()=>{this.ghostElementCreated.emit({clientX:x-F,clientY:P-U,element:oe})}),A.subscribe(()=>{oe.parentElement.removeChild(oe),this.ghostElement=null,this.renderer.setStyle(this.element.nativeElement,"visibility","")})}this.draggableHelper.currentDrag.next(d)}),A.pipe((0,Ds.z)(x=>{const P=f.pipe(function Nre(n){return function Mre(n,t){return(0,$i.e)(T0(n,t,arguments.length>=2,!1,!0))}((t,e,i)=>!n||n(e,i)?t+1:t,0)}(),jn(1),(0,rt.U)(F=>({...x,dragCancelled:F>0})));return f.complete(),P})).subscribe(({x,y:P,dragCancelled:F})=>{this.scroller.destroy(),this.dragEnd.observers.length>0&&this.zone.run(()=>{this.dragEnd.next({x,y:P,dragCancelled:F})}),SO(this.renderer,this.element,this.dragActiveClass),d.complete()}),(0,Sr.T)(m,A).pipe(jn(1)).subscribe(()=>{requestAnimationFrame(()=>{this.document.head.removeChild(r)})}),y}),(0,Ar.B)());(0,Sr.T)(e.pipe(jn(1),(0,rt.U)(i=>[,i])),e.pipe(w_())).pipe(dn(([i,r])=>!i||i.x!==r.x||i.y!==r.y),(0,rt.U)(([i,r])=>r)).subscribe(({x:i,y:r,currentDrag$:s,clientX:l,clientY:d,transformX:f,transformY:m,target:y})=>{this.dragging.observers.length>0&&this.zone.run(()=>{this.dragging.next({x:i,y:r})}),requestAnimationFrame(()=>{if(this.ghostElement){const C=`translate3d(${f}px, ${m}px, 0px)`;this.setElementStyles(this.ghostElement,{transform:C,"-webkit-transform":C,"-ms-transform":C,"-moz-transform":C,"-o-transform":C})}}),s.next({clientX:l,clientY:d,dropData:this.dropData,target:y})})}ngOnChanges(e){e.dragAxis&&this.checkEventListeners()}ngOnDestroy(){this.unsubscribeEventListeners(),this.pointerDown$.complete(),this.pointerMove$.complete(),this.pointerUp$.complete(),this.destroy$.next()}checkEventListeners(){const e=this.canDrag(),i=Object.keys(this.eventListenerSubscriptions).length>0;e&&!i?this.zone.runOutsideAngular(()=>{this.eventListenerSubscriptions.mousedown=this.renderer.listen(this.element.nativeElement,"mousedown",r=>{this.onMouseDown(r)}),this.eventListenerSubscriptions.mouseup=this.renderer.listen("document","mouseup",r=>{this.onMouseUp(r)}),this.eventListenerSubscriptions.touchstart=this.renderer.listen(this.element.nativeElement,"touchstart",r=>{this.onTouchStart(r)}),this.eventListenerSubscriptions.touchend=this.renderer.listen("document","touchend",r=>{this.onTouchEnd(r)}),this.eventListenerSubscriptions.touchcancel=this.renderer.listen("document","touchcancel",r=>{this.onTouchEnd(r)}),this.eventListenerSubscriptions.mouseenter=this.renderer.listen(this.element.nativeElement,"mouseenter",()=>{this.onMouseEnter()}),this.eventListenerSubscriptions.mouseleave=this.renderer.listen(this.element.nativeElement,"mouseleave",()=>{this.onMouseLeave()})}):!e&&i&&this.unsubscribeEventListeners()}onMouseDown(e){0===e.button&&(this.eventListenerSubscriptions.mousemove||(this.eventListenerSubscriptions.mousemove=this.renderer.listen("document","mousemove",i=>{this.pointerMove$.next({event:i,clientX:i.clientX,clientY:i.clientY})})),this.pointerDown$.next({event:e,clientX:e.clientX,clientY:e.clientY}))}onMouseUp(e){0===e.button&&(this.eventListenerSubscriptions.mousemove&&(this.eventListenerSubscriptions.mousemove(),delete this.eventListenerSubscriptions.mousemove),this.pointerUp$.next({event:e,clientX:e.clientX,clientY:e.clientY}))}onTouchStart(e){let i,r,s;if(this.touchStartLongPress&&(this.timeLongPress.timerBegin=Date.now(),r=!1,s=this.hasScrollbar(),i=this.getScrollPosition()),!this.eventListenerSubscriptions.touchmove){const l=Es(this.document,"contextmenu").subscribe(f=>{f.preventDefault()}),d=Es(this.document,"touchmove",{passive:!1}).subscribe(f=>{this.touchStartLongPress&&!r&&s&&(r=this.shouldBeginDrag(e,f,i)),(!this.touchStartLongPress||!s||r)&&(f.preventDefault(),this.pointerMove$.next({event:f,clientX:f.targetTouches[0].clientX,clientY:f.targetTouches[0].clientY}))});this.eventListenerSubscriptions.touchmove=()=>{l.unsubscribe(),d.unsubscribe()}}this.pointerDown$.next({event:e,clientX:e.touches[0].clientX,clientY:e.touches[0].clientY})}onTouchEnd(e){this.eventListenerSubscriptions.touchmove&&(this.eventListenerSubscriptions.touchmove(),delete this.eventListenerSubscriptions.touchmove,this.touchStartLongPress&&this.enableScroll()),this.pointerUp$.next({event:e,clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY})}onMouseEnter(){this.setCursor(this.dragCursor)}onMouseLeave(){this.setCursor("")}canDrag(){return this.dragAxis.x||this.dragAxis.y}setCursor(e){this.eventListenerSubscriptions.mousemove||this.renderer.setStyle(this.element.nativeElement,"cursor",e)}unsubscribeEventListeners(){Object.keys(this.eventListenerSubscriptions).forEach(e=>{this.eventListenerSubscriptions[e](),delete this.eventListenerSubscriptions[e]})}setElementStyles(e,i){Object.keys(i).forEach(r=>{this.renderer.setStyle(e,r,i[r])})}getScrollElement(){return this.scrollContainer?this.scrollContainer.elementRef.nativeElement:this.document.body}getScrollPosition(){return this.scrollContainer?{top:this.scrollContainer.elementRef.nativeElement.scrollTop,left:this.scrollContainer.elementRef.nativeElement.scrollLeft}:{top:window.pageYOffset||this.document.documentElement.scrollTop,left:window.pageXOffset||this.document.documentElement.scrollLeft}}shouldBeginDrag(e,i,r){const s=this.getScrollPosition(),l_top=Math.abs(s.top-r.top),l_left=Math.abs(s.left-r.left),d=Math.abs(i.targetTouches[0].clientX-e.touches[0].clientX)-l_left,f=Math.abs(i.targetTouches[0].clientY-e.touches[0].clientY)-l_top,y=this.touchStartLongPress;return(d+f>y.delta||l_top>0||l_left>0)&&(this.timeLongPress.timerBegin=Date.now()),this.timeLongPress.timerEnd=Date.now(),this.timeLongPress.timerEnd-this.timeLongPress.timerBegin>=y.delay&&(this.disableScroll(),!0)}enableScroll(){this.scrollContainer&&this.renderer.setStyle(this.scrollContainer.elementRef.nativeElement,"overflow",""),this.renderer.setStyle(this.document.body,"overflow","")}disableScroll(){this.scrollContainer&&this.renderer.setStyle(this.scrollContainer.elementRef.nativeElement,"overflow","hidden"),this.renderer.setStyle(this.document.body,"overflow","hidden")}hasScrollbar(){const e=this.getScrollElement();return e.scrollWidth>e.clientWidth||e.scrollHeight>e.clientHeight}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(zz),a.Y36(a.R0b),a.Y36(a.s_b),a.Y36(Wz,8),a.Y36(_e))},n.\u0275dir=a.lG2({type:n,selectors:[["","mwlDraggable",""]],inputs:{dropData:"dropData",dragAxis:"dragAxis",dragSnapGrid:"dragSnapGrid",ghostDragEnabled:"ghostDragEnabled",showOriginalElementWhileDragging:"showOriginalElementWhileDragging",validateDrag:"validateDrag",dragCursor:"dragCursor",dragActiveClass:"dragActiveClass",ghostElementAppendTo:"ghostElementAppendTo",ghostElementTemplate:"ghostElementTemplate",touchStartLongPress:"touchStartLongPress",autoScroll:"autoScroll"},outputs:{dragPointerDown:"dragPointerDown",dragStart:"dragStart",ghostElementCreated:"ghostElementCreated",dragging:"dragging",dragEnd:"dragEnd"},features:[a.TTD]}),n})();function qz(n,t,e){return n>=e.left&&n<=e.right&&t>=e.top&&t<=e.bottom}let JB=(()=>{class n{constructor(e,i,r,s,l){this.element=e,this.draggableHelper=i,this.zone=r,this.renderer=s,this.scrollContainer=l,this.dragEnter=new a.vpe,this.dragLeave=new a.vpe,this.dragOver=new a.vpe,this.drop=new a.vpe}ngOnInit(){this.currentDragSubscription=this.draggableHelper.currentDrag.subscribe(e=>{KB(this.renderer,this.element,this.dragActiveClass);const i={updateCache:!0},r=this.renderer.listen(this.scrollContainer?this.scrollContainer.elementRef.nativeElement:"window","scroll",()=>{i.updateCache=!0});let s;const l=e.pipe((0,rt.U)(({clientX:m,clientY:y,dropData:C,target:A})=>{s={clientX:m,clientY:y,dropData:C,target:A},i.updateCache&&(i.rect=this.element.nativeElement.getBoundingClientRect(),this.scrollContainer&&(i.scrollContainerRect=this.scrollContainer.elementRef.nativeElement.getBoundingClientRect()),i.updateCache=!1);const x=qz(m,y,i.rect),P=!this.validateDrop||this.validateDrop({clientX:m,clientY:y,target:A,dropData:C});return i.scrollContainerRect?x&&P&&qz(m,y,i.scrollContainerRect):x&&P})),d=l.pipe((0,I0.x)());let f;d.pipe(dn(m=>m)).subscribe(()=>{f=!0,KB(this.renderer,this.element,this.dragOverClass),this.dragEnter.observers.length>0&&this.zone.run(()=>{this.dragEnter.next(s)})}),l.pipe(dn(m=>m)).subscribe(()=>{this.dragOver.observers.length>0&&this.zone.run(()=>{this.dragOver.next(s)})}),d.pipe(w_(),dn(([m,y])=>m&&!y)).subscribe(()=>{f=!1,SO(this.renderer,this.element,this.dragOverClass),this.dragLeave.observers.length>0&&this.zone.run(()=>{this.dragLeave.next(s)})}),e.subscribe({complete:()=>{r(),SO(this.renderer,this.element,this.dragActiveClass),f&&(SO(this.renderer,this.element,this.dragOverClass),this.drop.observers.length>0&&this.zone.run(()=>{this.drop.next(s)}))}})})}ngOnDestroy(){this.currentDragSubscription&&this.currentDragSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.SBq),a.Y36(zz),a.Y36(a.R0b),a.Y36(a.Qsj),a.Y36(Wz,8))},n.\u0275dir=a.lG2({type:n,selectors:[["","mwlDroppable",""]],inputs:{dragOverClass:"dragOverClass",dragActiveClass:"dragActiveClass",validateDrop:"validateDrop"},outputs:{dragEnter:"dragEnter",dragLeave:"dragLeave",dragOver:"dragOver",drop:"drop"}}),n})(),AO=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})();const Dy=!(typeof window>"u")&&("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0);function Yz(n,t,e,i){const r=t.querySelectorAll(n);if(r.length){const s=e.querySelectorAll(n);for(let l=0;l<r.length;l++)i(r[l],s[l])}}let $re=0;function Zz(n,t){"file"!==t.type&&(t.value=n.value),"radio"===t.type&&t.name&&(t.name=`mat-clone-${t.name}-${$re++}`)}function Kz(n,t){const e=t.getContext("2d");if(e)try{e.drawImage(n,0,0)}catch{}}function Qz(n,t,e,i){const r={top:n.top,bottom:n.bottom,left:n.left,right:n.right};return t.top&&(r.top+=i),t.bottom&&(r.bottom+=i),t.left&&(r.left+=e),t.right&&(r.right+=e),r.height=r.bottom-r.top,r.width=r.right-r.left,r}const Jz=Object.freeze({topLeft:"nw-resize",topRight:"ne-resize",bottomLeft:"sw-resize",bottomRight:"se-resize",leftOrRight:"col-resize",topOrBottom:"row-resize"});function Xz(n,t){return n.left&&n.top?t.topLeft:n.right&&n.top?t.topRight:n.left&&n.bottom?t.bottomLeft:n.right&&n.bottom?t.bottomRight:n.left||n.right?t.leftOrRight:n.top||n.bottom?t.topOrBottom:""}function MO({edges:n,initialRectangle:t,newRectangle:e}){const i={};return Object.keys(n).forEach(r=>{i[r]=(e[r]||0)-(t[r]||0)}),i}const e4="resize-active";let t4=(()=>{class n{constructor(e,i,r,s){this.platformId=e,this.renderer=i,this.elm=r,this.zone=s,this.enableGhostResize=!1,this.resizeSnapGrid={},this.resizeCursors=Jz,this.ghostElementPositioning="fixed",this.allowNegativeResizes=!1,this.mouseMoveThrottleMS=50,this.resizeStart=new a.vpe,this.resizing=new a.vpe,this.resizeEnd=new a.vpe,this.mouseup=new Qt.x,this.mousedown=new Qt.x,this.mousemove=new Qt.x,this.destroy$=new Qt.x,this.pointerEventListeners=fD.getInstance(i,s)}ngOnInit(){const e=(0,Sr.T)(this.pointerEventListeners.pointerDown,this.mousedown),i=(0,Sr.T)(this.pointerEventListeners.pointerMove,this.mousemove).pipe((0,Fs.b)(({event:m})=>{s&&m.cancelable&&m.preventDefault()}),(0,Ar.B)()),r=(0,Sr.T)(this.pointerEventListeners.pointerUp,this.mouseup);let s;const l=()=>{s&&s.clonedNode&&(this.elm.nativeElement.parentElement.removeChild(s.clonedNode),this.renderer.setStyle(this.elm.nativeElement,"visibility","inherit"))},d=()=>({...Jz,...this.resizeCursors});e.pipe((0,Ds.z)(m=>{function y(x){return{clientX:x.clientX-m.clientX,clientY:x.clientY-m.clientY}}const C=()=>{const x={x:1,y:1};return s&&(this.resizeSnapGrid.left&&s.edges.left?x.x=+this.resizeSnapGrid.left:this.resizeSnapGrid.right&&s.edges.right&&(x.x=+this.resizeSnapGrid.right),this.resizeSnapGrid.top&&s.edges.top?x.y=+this.resizeSnapGrid.top:this.resizeSnapGrid.bottom&&s.edges.bottom&&(x.y=+this.resizeSnapGrid.bottom)),x};function A(x,P){return{x:Math.ceil(x.clientX/P.x),y:Math.ceil(x.clientY/P.y)}}return(0,Sr.T)(i.pipe(jn(1)).pipe((0,rt.U)(x=>[,x])),i.pipe(w_())).pipe((0,rt.U)(([x,P])=>[x&&y(x),y(P)])).pipe(dn(([x,P])=>{if(!x)return!0;const F=C(),U=A(x,F),ee=A(P,F);return U.x!==ee.x||U.y!==ee.y})).pipe((0,rt.U)(([,x])=>{const P=C();return{clientX:Math.round(x.clientX/P.x)*P.x,clientY:Math.round(x.clientY/P.y)*P.y}})).pipe(Di((0,Sr.T)(r,e)))})).pipe(dn(()=>!!s)).pipe((0,rt.U)(({clientX:m,clientY:y})=>Qz(s.startingRect,s.edges,m,y))).pipe(dn(m=>this.allowNegativeResizes||!!(m.height&&m.width&&m.height>0&&m.width>0))).pipe(dn(m=>!this.validateResize||this.validateResize({rectangle:m,edges:MO({edges:s.edges,initialRectangle:s.startingRect,newRectangle:m})})),Di(this.destroy$)).subscribe(m=>{s&&s.clonedNode&&(this.renderer.setStyle(s.clonedNode,"height",`${m.height}px`),this.renderer.setStyle(s.clonedNode,"width",`${m.width}px`),this.renderer.setStyle(s.clonedNode,"top",`${m.top}px`),this.renderer.setStyle(s.clonedNode,"left",`${m.left}px`)),this.resizing.observers.length>0&&this.zone.run(()=>{this.resizing.emit({edges:MO({edges:s.edges,initialRectangle:s.startingRect,newRectangle:m}),rectangle:m})}),s.currentRect=m}),e.pipe((0,rt.U)(({edges:m})=>m||{}),dn(m=>Object.keys(m).length>0),Di(this.destroy$)).subscribe(m=>{s&&l();const y=function zre(n,t){let e=0,i=0;const r=n.nativeElement.style,l=["transform","-ms-transform","-moz-transform","-o-transform"].map(d=>r[d]).find(d=>!!d);if(l&&l.includes("translate")&&(e=l.replace(/.*translate3?d?\((-?[0-9]*)px, (-?[0-9]*)px.*/,"$1"),i=l.replace(/.*translate3?d?\((-?[0-9]*)px, (-?[0-9]*)px.*/,"$2")),"absolute"===t)return{height:n.nativeElement.offsetHeight,width:n.nativeElement.offsetWidth,top:n.nativeElement.offsetTop-i,bottom:n.nativeElement.offsetHeight+n.nativeElement.offsetTop-i,left:n.nativeElement.offsetLeft-e,right:n.nativeElement.offsetWidth+n.nativeElement.offsetLeft-e};{const d=n.nativeElement.getBoundingClientRect();return{height:d.height,width:d.width,top:d.top-i,bottom:d.bottom-i,left:d.left-e,right:d.right-e,scrollTop:n.nativeElement.scrollTop,scrollLeft:n.nativeElement.scrollLeft}}}(this.elm,this.ghostElementPositioning);s={edges:m,startingRect:y,currentRect:y};const C=d(),A=Xz(s.edges,C);this.renderer.setStyle(document.body,"cursor",A),this.setElementClass(this.elm,e4,!0),this.enableGhostResize&&(s.clonedNode=function Gre(n){const t=n.cloneNode(!0),e=t.querySelectorAll("[id]"),i=n.nodeName.toLowerCase();return t.removeAttribute("id"),e.forEach(r=>{r.removeAttribute("id")}),"canvas"===i?Kz(n,t):("input"===i||"select"===i||"textarea"===i)&&Zz(n,t),Yz("canvas",n,t,Kz),Yz("input, textarea, select",n,t,Zz),t}(this.elm.nativeElement),this.elm.nativeElement.parentElement.appendChild(s.clonedNode),this.renderer.setStyle(this.elm.nativeElement,"visibility","hidden"),this.renderer.setStyle(s.clonedNode,"position",this.ghostElementPositioning),this.renderer.setStyle(s.clonedNode,"left",`${s.startingRect.left}px`),this.renderer.setStyle(s.clonedNode,"top",`${s.startingRect.top}px`),this.renderer.setStyle(s.clonedNode,"height",`${s.startingRect.height}px`),this.renderer.setStyle(s.clonedNode,"width",`${s.startingRect.width}px`),this.renderer.setStyle(s.clonedNode,"cursor",Xz(s.edges,C)),this.renderer.addClass(s.clonedNode,"resize-ghost-element"),s.clonedNode.scrollTop=s.startingRect.scrollTop,s.clonedNode.scrollLeft=s.startingRect.scrollLeft),this.resizeStart.observers.length>0&&this.zone.run(()=>{this.resizeStart.emit({edges:MO({edges:m,initialRectangle:y,newRectangle:y}),rectangle:Qz(y,{},0,0)})})}),r.pipe(Di(this.destroy$)).subscribe(()=>{s&&(this.renderer.removeClass(this.elm.nativeElement,e4),this.renderer.setStyle(document.body,"cursor",""),this.renderer.setStyle(this.elm.nativeElement,"cursor",""),this.resizeEnd.observers.length>0&&this.zone.run(()=>{this.resizeEnd.emit({edges:MO({edges:s.edges,initialRectangle:s.startingRect,newRectangle:s.currentRect}),rectangle:s.currentRect})}),l(),s=null)})}ngOnDestroy(){(function ip(n){return n===Uo})(this.platformId)&&this.renderer.setStyle(document.body,"cursor",""),this.mousedown.complete(),this.mouseup.complete(),this.mousemove.complete(),this.destroy$.next()}setElementClass(e,i,r){r?this.renderer.addClass(e.nativeElement,i):this.renderer.removeClass(e.nativeElement,i)}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.Lbi),a.Y36(a.Qsj),a.Y36(a.SBq),a.Y36(a.R0b))},n.\u0275dir=a.lG2({type:n,selectors:[["","mwlResizable",""]],inputs:{validateResize:"validateResize",enableGhostResize:"enableGhostResize",resizeSnapGrid:"resizeSnapGrid",resizeCursors:"resizeCursors",ghostElementPositioning:"ghostElementPositioning",allowNegativeResizes:"allowNegativeResizes",mouseMoveThrottleMS:"mouseMoveThrottleMS"},outputs:{resizeStart:"resizeStart",resizing:"resizing",resizeEnd:"resizeEnd"},exportAs:["mwlResizable"]}),n})();class fD{constructor(t,e){this.pointerDown=new bi.y(i=>{let r,s;return e.runOutsideAngular(()=>{r=t.listen("document","mousedown",l=>{i.next({clientX:l.clientX,clientY:l.clientY,event:l})}),Dy&&(s=t.listen("document","touchstart",l=>{i.next({clientX:l.touches[0].clientX,clientY:l.touches[0].clientY,event:l})}))}),()=>{r(),Dy&&s()}}).pipe((0,Ar.B)()),this.pointerMove=new bi.y(i=>{let r,s;return e.runOutsideAngular(()=>{r=t.listen("document","mousemove",l=>{i.next({clientX:l.clientX,clientY:l.clientY,event:l})}),Dy&&(s=t.listen("document","touchmove",l=>{i.next({clientX:l.targetTouches[0].clientX,clientY:l.targetTouches[0].clientY,event:l})}))}),()=>{r(),Dy&&s()}}).pipe((0,Ar.B)()),this.pointerUp=new bi.y(i=>{let r,s,l;return e.runOutsideAngular(()=>{r=t.listen("document","mouseup",d=>{i.next({clientX:d.clientX,clientY:d.clientY,event:d})}),Dy&&(s=t.listen("document","touchend",d=>{i.next({clientX:d.changedTouches[0].clientX,clientY:d.changedTouches[0].clientY,event:d})}),l=t.listen("document","touchcancel",d=>{i.next({clientX:d.changedTouches[0].clientX,clientY:d.changedTouches[0].clientY,event:d})}))}),()=>{r(),Dy&&(s(),l())}}).pipe((0,Ar.B)())}static getInstance(t,e){return fD.instance||(fD.instance=new fD(t,e)),fD.instance}}let Yre=(()=>{class n{constructor(e,i,r,s){this.renderer=e,this.element=i,this.zone=r,this.resizableDirective=s,this.resizeEdges={},this.eventListeners={},this.destroy$=new Qt.x}ngOnInit(){this.zone.runOutsideAngular(()=>{this.listenOnTheHost("mousedown").subscribe(e=>{this.onMousedown(e,e.clientX,e.clientY)}),this.listenOnTheHost("mouseup").subscribe(e=>{this.onMouseup(e.clientX,e.clientY)}),Dy&&(this.listenOnTheHost("touchstart").subscribe(e=>{this.onMousedown(e,e.touches[0].clientX,e.touches[0].clientY)}),(0,Sr.T)(this.listenOnTheHost("touchend"),this.listenOnTheHost("touchcancel")).subscribe(e=>{this.onMouseup(e.changedTouches[0].clientX,e.changedTouches[0].clientY)}))})}ngOnDestroy(){this.destroy$.next(),this.unsubscribeEventListeners()}onMousedown(e,i,r){e.cancelable&&e.preventDefault(),this.eventListeners.touchmove||(this.eventListeners.touchmove=this.renderer.listen(this.element.nativeElement,"touchmove",s=>{this.onMousemove(s,s.targetTouches[0].clientX,s.targetTouches[0].clientY)})),this.eventListeners.mousemove||(this.eventListeners.mousemove=this.renderer.listen(this.element.nativeElement,"mousemove",s=>{this.onMousemove(s,s.clientX,s.clientY)})),this.resizable.mousedown.next({clientX:i,clientY:r,edges:this.resizeEdges})}onMouseup(e,i){this.unsubscribeEventListeners(),this.resizable.mouseup.next({clientX:e,clientY:i,edges:this.resizeEdges})}get resizable(){return this.resizableDirective||this.resizableContainer}onMousemove(e,i,r){this.resizable.mousemove.next({clientX:i,clientY:r,edges:this.resizeEdges,event:e})}unsubscribeEventListeners(){Object.keys(this.eventListeners).forEach(e=>{this.eventListeners[e](),delete this.eventListeners[e]})}listenOnTheHost(e){return Es(this.element.nativeElement,e).pipe(Di(this.destroy$))}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.Qsj),a.Y36(a.SBq),a.Y36(a.R0b),a.Y36(t4,8))},n.\u0275dir=a.lG2({type:n,selectors:[["","mwlResizeHandle",""]],inputs:{resizeEdges:"resizeEdges",resizableContainer:"resizableContainer"}}),n})(),n4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})();const Zre=function(n){return{action:n}};function Kre(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"a",5),a.NdJ("mwlClick",function(r){const l=a.CHM(e).$implicit,d=a.oxw(2).event;return a.KtG(l.onClick({event:d,sourceEvent:r}))})("mwlKeydownEnter",function(r){const l=a.CHM(e).$implicit,d=a.oxw(2).event;return a.KtG(l.onClick({event:d,sourceEvent:r}))}),a.ALo(1,"calendarA11y"),a.qZA()}if(2&n){const e=t.$implicit;a.Q6J("ngClass",e.cssClass)("innerHtml",e.label,a.oJD),a.uIk("aria-label",a.xi3(1,3,a.VKq(6,Zre,e),"actionButtonLabel"))}}function Qre(n,t){if(1&n&&(a.TgZ(0,"span",3),a.YNc(1,Kre,2,8,"a",4),a.qZA()),2&n){const e=a.oxw(),i=e.event,r=e.trackByActionId;a.xp6(1),a.Q6J("ngForOf",i.actions)("ngForTrackBy",r)}}function Jre(n,t){1&n&&a.YNc(0,Qre,2,2,"span",2),2&n&&a.Q6J("ngIf",t.event.actions)}function Xre(n,t){}const ese=function(n,t){return{event:n,trackByActionId:t}},pD=function(){return{}};function tse(n,t){if(1&n&&(a._UZ(0,"span",2),a.ALo(1,"calendarEventTitle"),a.ALo(2,"calendarA11y")),2&n){const e=t.event;a.Q6J("innerHTML",a.Dn7(1,2,e.title,t.view,e),a.oJD),a.uIk("aria-hidden",a.xi3(2,6,a.DdM(9,pD),"hideEventTitle"))}}function nse(n,t){}const ise=function(n,t){return{event:n,view:t}};function rse(n,t){if(1&n&&(a.TgZ(0,"div",2),a._UZ(1,"div",3)(2,"div",4),a.qZA()),2&n){const e=t.contents;a.Q6J("ngClass","cal-tooltip-"+t.placement),a.xp6(2),a.Q6J("innerHtml",e,a.oJD)}}function sse(n,t){}const ose=function(n,t,e){return{contents:n,placement:t,event:e}};function ase(n,t){if(1&n&&(a.TgZ(0,"span",7),a._uU(1),a.qZA()),2&n){const e=a.oxw().day;a.xp6(1),a.Oqu(e.badgeTotal)}}const XB=function(n){return{backgroundColor:n}},lse=function(n,t){return{event:n,draggedFrom:t}},t1=function(n,t){return{x:n,y:t}},NO=function(){return{delay:300,delta:30}};function cse(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",10),a.NdJ("mouseenter",function(){const s=a.CHM(e).$implicit,l=a.oxw(2).highlightDay;return a.KtG(l.emit({event:s}))})("mouseleave",function(){const s=a.CHM(e).$implicit,l=a.oxw(2).unhighlightDay;return a.KtG(l.emit({event:s}))})("mwlClick",function(r){const l=a.CHM(e).$implicit,d=a.oxw(2).eventClicked;return a.KtG(d.emit({event:l,sourceEvent:r}))}),a.ALo(1,"calendarEventTitle"),a.ALo(2,"calendarA11y"),a.qZA()}if(2&n){const e=t.$implicit,i=a.oxw(2),r=i.tooltipPlacement,s=i.tooltipTemplate,l=i.tooltipAppendToBody,d=i.tooltipDelay,f=i.day,m=i.validateDrag;a.ekj("cal-draggable",e.draggable),a.Q6J("ngStyle",a.VKq(22,XB,null==e.color?null:e.color.primary))("ngClass",null==e?null:e.cssClass)("mwlCalendarTooltip",a.Dn7(1,15,e.title,"monthTooltip",e))("tooltipPlacement",r)("tooltipEvent",e)("tooltipTemplate",s)("tooltipAppendToBody",l)("tooltipDelay",d)("dropData",a.WLB(24,lse,e,f))("dragAxis",a.WLB(27,t1,e.draggable,e.draggable))("validateDrag",m)("touchStartLongPress",a.DdM(30,NO)),a.uIk("aria-hidden",a.xi3(2,19,a.DdM(31,pD),"hideMonthCellEvents"))}}function use(n,t){if(1&n&&(a.TgZ(0,"div",8),a.YNc(1,cse,3,32,"div",9),a.qZA()),2&n){const e=a.oxw(),i=e.day,r=e.trackByEventId;a.xp6(1),a.Q6J("ngForOf",i.events)("ngForTrackBy",r)}}const dse=function(n,t){return{day:n,locale:t}};function hse(n,t){if(1&n&&(a.TgZ(0,"div",2),a.ALo(1,"calendarA11y"),a.TgZ(2,"span",3),a.YNc(3,ase,2,1,"span",4),a.TgZ(4,"span",5),a._uU(5),a.ALo(6,"calendarDate"),a.qZA()()(),a.YNc(7,use,2,2,"div",6)),2&n){const e=t.day,i=t.locale;a.uIk("aria-label",a.xi3(1,4,a.WLB(11,dse,e,i),"monthCell")),a.xp6(3),a.Q6J("ngIf",e.badgeTotal>0),a.xp6(2),a.Oqu(a.Dn7(6,7,e.date,"monthViewDayNumber",i)),a.xp6(2),a.Q6J("ngIf",e.events.length>0)}}function fse(n,t){}const pse=function(n,t,e,i,r,s,l,d,f,m,y,C){return{day:n,openDay:t,locale:e,tooltipPlacement:i,highlightDay:r,unhighlightDay:s,eventClicked:l,tooltipTemplate:d,tooltipAppendToBody:f,tooltipDelay:m,trackByEventId:y,validateDrag:C}},gse=function(n){return{event:n}},i4=function(n,t){return{event:n,locale:t}};function mse(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",7),a._UZ(1,"span",8),a._uU(2," "),a.TgZ(3,"mwl-calendar-event-title",9),a.NdJ("mwlClick",function(r){const l=a.CHM(e).$implicit,d=a.oxw(2).eventClicked;return a.KtG(d.emit({event:l,sourceEvent:r}))})("mwlKeydownEnter",function(r){const l=a.CHM(e).$implicit,d=a.oxw(2).eventClicked;return a.KtG(d.emit({event:l,sourceEvent:r}))}),a.ALo(4,"calendarA11y"),a.qZA(),a._uU(5," "),a._UZ(6,"mwl-calendar-event-actions",10),a.qZA()}if(2&n){const e=t.$implicit,i=a.oxw(2).validateDrag,r=a.oxw();a.ekj("cal-draggable",e.draggable),a.Q6J("ngClass",null==e?null:e.cssClass)("dropData",a.VKq(16,gse,e))("dragAxis",a.WLB(18,t1,e.draggable,e.draggable))("validateDrag",i)("touchStartLongPress",a.DdM(21,NO)),a.xp6(1),a.Q6J("ngStyle",a.VKq(22,XB,null==e.color?null:e.color.primary)),a.xp6(2),a.Q6J("event",e)("customTemplate",r.eventTitleTemplate),a.uIk("aria-label",a.xi3(4,13,a.WLB(24,i4,e,r.locale),"eventDescription")),a.xp6(3),a.Q6J("event",e)("customTemplate",r.eventActionsTemplate)}}const r4=function(n,t){return{date:n,locale:t}};function _se(n,t){if(1&n&&(a.TgZ(0,"div",3),a._UZ(1,"span",4),a.ALo(2,"calendarA11y"),a._UZ(3,"span",5),a.ALo(4,"calendarA11y"),a.YNc(5,mse,7,27,"div",6),a.qZA()),2&n){const e=a.oxw(),i=e.events,r=e.trackByEventId,s=a.oxw();a.Q6J("@collapse",void 0),a.xp6(1),a.uIk("aria-label",a.xi3(2,5,a.WLB(11,r4,s.date,s.locale),"openDayEventsAlert")),a.xp6(2),a.uIk("aria-label",a.xi3(4,8,a.WLB(14,r4,s.date,s.locale),"openDayEventsLandmark")),a.xp6(2),a.Q6J("ngForOf",i)("ngForTrackBy",r)}}function vse(n,t){1&n&&a.YNc(0,_se,6,17,"div",2),2&n&&a.Q6J("ngIf",t.isOpen)}function yse(n,t){}const wse=function(n,t,e,i,r){return{events:n,eventClicked:t,isOpen:e,trackByEventId:i,validateDrag:r}};function bse(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",4),a.NdJ("click",function(r){const l=a.CHM(e).$implicit,d=a.oxw(2);return a.KtG(d.columnHeaderClicked.emit({isoDayNumber:l.day,sourceEvent:r}))}),a._uU(1),a.ALo(2,"calendarDate"),a.qZA()}if(2&n){const e=t.$implicit,i=a.oxw().locale;a.ekj("cal-past",e.isPast)("cal-today",e.isToday)("cal-future",e.isFuture)("cal-weekend",e.isWeekend),a.Q6J("ngClass",e.cssClass),a.xp6(1),a.hij(" ",a.Dn7(2,10,e.date,"monthViewColumnHeader",i)," ")}}function Dse(n,t){if(1&n&&(a.TgZ(0,"div",2),a.YNc(1,bse,3,14,"div",3),a.qZA()),2&n){const e=t.days,i=t.trackByWeekDayHeaderDate;a.xp6(1),a.Q6J("ngForOf",e)("ngForTrackBy",i)}}function Ese(n,t){}const Cse=function(n,t,e){return{days:n,locale:t,trackByWeekDayHeaderDate:e}};function Tse(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"mwl-calendar-month-cell",7),a.NdJ("mwlClick",function(r){const l=a.CHM(e).$implicit,d=a.oxw(2);return a.KtG(d.dayClicked.emit({day:l,sourceEvent:r}))})("mwlKeydownEnter",function(r){const l=a.CHM(e).$implicit,d=a.oxw(2);return a.KtG(d.dayClicked.emit({day:l,sourceEvent:r}))})("highlightDay",function(r){a.CHM(e);const s=a.oxw(2);return a.KtG(s.toggleDayHighlight(r.event,!0))})("unhighlightDay",function(r){a.CHM(e);const s=a.oxw(2);return a.KtG(s.toggleDayHighlight(r.event,!1))})("drop",function(r){const l=a.CHM(e).$implicit,d=a.oxw(2);return a.KtG(d.eventDropped(l,r.dropData.event,r.dropData.draggedFrom))})("eventClicked",function(r){a.CHM(e);const s=a.oxw(2);return a.KtG(s.eventClicked.emit({event:r.event,sourceEvent:r.sourceEvent}))}),a.ALo(1,"calendarA11y"),a.qZA()}if(2&n){const e=t.$implicit,i=a.oxw(2);a.Q6J("ngClass",null==e?null:e.cssClass)("day",e)("openDay",i.openDay)("locale",i.locale)("tooltipPlacement",i.tooltipPlacement)("tooltipAppendToBody",i.tooltipAppendToBody)("tooltipTemplate",i.tooltipTemplate)("tooltipDelay",i.tooltipDelay)("customTemplate",i.cellTemplate)("ngStyle",a.VKq(15,XB,e.backgroundColor))("clickListenerDisabled",0===i.dayClicked.observers.length),a.uIk("tabindex",a.xi3(1,12,a.DdM(17,pD),"monthCellTabIndex"))}}function Ise(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div")(1,"div",4),a.YNc(2,Tse,2,18,"mwl-calendar-month-cell",5),a.ALo(3,"slice"),a.qZA(),a.TgZ(4,"mwl-calendar-open-day-events",6),a.NdJ("eventClicked",function(r){a.CHM(e);const s=a.oxw();return a.KtG(s.eventClicked.emit({event:r.event,sourceEvent:r.sourceEvent}))})("drop",function(r){a.CHM(e);const s=a.oxw();return a.KtG(s.eventDropped(s.openDay,r.dropData.event,r.dropData.draggedFrom))}),a.qZA()()}if(2&n){const e=t.$implicit,i=a.oxw();a.xp6(2),a.Q6J("ngForOf",a.Dn7(3,9,i.view.days,e,e+i.view.totalDaysVisibleInWeek))("ngForTrackBy",i.trackByDate),a.xp6(2),a.Q6J("locale",i.locale)("isOpen",i.openRowIndex===e)("events",null==i.openDay?null:i.openDay.events)("date",null==i.openDay?null:i.openDay.date)("customTemplate",i.openDayEventsTemplate)("eventTitleTemplate",i.eventTitleTemplate)("eventActionsTemplate",i.eventActionsTemplate)}}function Sse(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",4),a.NdJ("mwlClick",function(r){const l=a.CHM(e).$implicit,d=a.oxw().dayHeaderClicked;return a.KtG(d.emit({day:l,sourceEvent:r}))})("drop",function(r){const l=a.CHM(e).$implicit,d=a.oxw().eventDropped;return a.KtG(d.emit({event:r.dropData.event,newStart:l.date}))})("dragEnter",function(){const s=a.CHM(e).$implicit,l=a.oxw().dragEnter;return a.KtG(l.emit({date:s.date}))}),a.TgZ(1,"b"),a._uU(2),a.ALo(3,"calendarDate"),a.qZA(),a._UZ(4,"br"),a.TgZ(5,"span"),a._uU(6),a.ALo(7,"calendarDate"),a.qZA()()}if(2&n){const e=t.$implicit,i=a.oxw().locale;a.ekj("cal-past",e.isPast)("cal-today",e.isToday)("cal-future",e.isFuture)("cal-weekend",e.isWeekend),a.Q6J("ngClass",e.cssClass),a.xp6(2),a.Oqu(a.Dn7(3,11,e.date,"weekViewColumnHeader",i)),a.xp6(4),a.Oqu(a.Dn7(7,15,e.date,"weekViewColumnSubHeader",i))}}function Ase(n,t){if(1&n&&(a.TgZ(0,"div",2),a.YNc(1,Sse,8,19,"div",3),a.qZA()),2&n){const e=t.days,i=t.trackByWeekDayHeaderDate;a.xp6(1),a.Q6J("ngForOf",e)("ngForTrackBy",i)}}function Mse(n,t){}const Nse=function(n,t,e,i,r,s){return{days:n,locale:t,dayHeaderClicked:e,eventDropped:i,dragEnter:r,trackByWeekDayHeaderDate:s}},xse=function(n,t,e){return{color:n,backgroundColor:t,borderColor:e}};function Rse(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",2),a.NdJ("mwlClick",function(r){const l=a.CHM(e).eventClicked;return a.KtG(l.emit({sourceEvent:r}))})("mwlKeydownEnter",function(r){const l=a.CHM(e).eventClicked;return a.KtG(l.emit({sourceEvent:r}))}),a.ALo(1,"calendarEventTitle"),a.ALo(2,"calendarA11y"),a._UZ(3,"mwl-calendar-event-actions",3),a._uU(4," "),a._UZ(5,"mwl-calendar-event-title",4),a.qZA()}if(2&n){const e=t.weekEvent,i=t.tooltipPlacement,r=t.tooltipTemplate,s=t.tooltipAppendToBody,l=t.tooltipDisabled,d=t.tooltipDelay,f=t.daysInWeek,m=a.oxw();a.Q6J("ngStyle",a.kEZ(20,xse,null==e.event.color?null:e.event.color.secondaryText,null==e.event.color?null:e.event.color.secondary,null==e.event.color?null:e.event.color.primary))("mwlCalendarTooltip",l?"":a.Dn7(1,13,e.event.title,1===f?"dayTooltip":"weekTooltip",e.tempEvent||e.event))("tooltipPlacement",i)("tooltipEvent",e.tempEvent||e.event)("tooltipTemplate",r)("tooltipAppendToBody",s)("tooltipDelay",d),a.uIk("aria-label",a.xi3(2,17,a.WLB(24,i4,e.tempEvent||e.event,m.locale),"eventDescription")),a.xp6(3),a.Q6J("event",e.tempEvent||e.event)("customTemplate",m.eventActionsTemplate),a.xp6(2),a.Q6J("event",e.tempEvent||e.event)("customTemplate",m.eventTitleTemplate)("view",1===f?"day":"week")}}function Ose(n,t){}const kse=function(n,t,e,i,r,s,l,d,f){return{weekEvent:n,tooltipPlacement:t,eventClicked:e,tooltipTemplate:i,tooltipAppendToBody:r,tooltipDisabled:s,tooltipDelay:l,column:d,daysInWeek:f}};function Pse(n,t){if(1&n&&(a.TgZ(0,"div",4),a._uU(1),a.ALo(2,"calendarDate"),a.qZA()),2&n){const e=a.oxw(),i=e.segment,r=e.daysInWeek,s=e.locale;a.xp6(1),a.hij(" ",a.Dn7(2,1,i.displayDate,1===r?"dayViewHour":"weekViewHour",s)," ")}}function Fse(n,t){if(1&n&&(a.TgZ(0,"div",2),a.ALo(1,"calendarA11y"),a.YNc(2,Pse,3,5,"div",3),a.qZA()),2&n){const e=t.segment,r=t.isTimeLabel,s=t.daysInWeek;a.Udp("height",t.segmentHeight,"px"),a.ekj("cal-hour-start",e.isStart)("cal-after-hour-start",!e.isStart),a.Q6J("ngClass",e.cssClass),a.uIk("aria-hidden",a.xi3(1,9,a.DdM(12,pD),1===s?"hideDayHourSegment":"hideWeekHourSegment")),a.xp6(2),a.Q6J("ngIf",r)}}function Lse(n,t){}const Bse=function(n,t,e,i,r){return{segment:n,locale:t,segmentHeight:e,isTimeLabel:i,daysInWeek:r}};function Vse(n,t){if(1&n&&a._UZ(0,"div",3),2&n){const e=a.oxw().topPx;a.Udp("top",e,"px")}}function Use(n,t){1&n&&a.YNc(0,Vse,1,2,"div",2),2&n&&a.Q6J("ngIf",t.isVisible)}function Hse(n,t){}const jse=function(n,t,e,i,r,s,l){return{columnDate:n,dayStartHour:t,dayStartMinute:e,dayEndHour:i,dayEndMinute:r,isVisible:s,topPx:l}};function Gse(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",13),a.NdJ("drop",function(r){const l=a.CHM(e).$implicit,d=a.oxw(2);return a.KtG(d.eventDropped(r,l.date,!0))})("dragEnter",function(){const s=a.CHM(e).$implicit,l=a.oxw(2);return a.KtG(l.dateDragEnter(s.date))}),a.qZA()}}const $se=function(){return{left:!0}};function zse(n,t){1&n&&a._UZ(0,"div",22),2&n&&a.Q6J("resizeEdges",a.DdM(1,$se))}const Wse=function(){return{right:!0}};function qse(n,t){1&n&&a._UZ(0,"div",23),2&n&&a.Q6J("resizeEdges",a.DdM(1,Wse))}const Yse=function(n,t){return{left:n,right:t}},s4=function(n,t){return{event:n,calendarId:t}},Zse=function(n){return{x:n}};function Kse(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",17,18),a.NdJ("resizeStart",function(r){const l=a.CHM(e).$implicit;a.oxw();const d=a.MAs(1),f=a.oxw(2);return a.KtG(f.allDayEventResizeStarted(d,l,r))})("resizing",function(r){const l=a.CHM(e).$implicit,d=a.oxw(3);return a.KtG(d.allDayEventResizing(l,r,d.dayColumnWidth))})("resizeEnd",function(){const s=a.CHM(e).$implicit,l=a.oxw(3);return a.KtG(l.allDayEventResizeEnded(s))})("dragStart",function(){const s=a.CHM(e).$implicit,l=a.MAs(1);a.oxw();const d=a.MAs(1),f=a.oxw(2);return a.KtG(f.dragStarted(d,l,s,!1))})("dragging",function(){a.CHM(e);const r=a.oxw(3);return a.KtG(r.allDayEventDragMove())})("dragEnd",function(r){const l=a.CHM(e).$implicit,d=a.oxw(3);return a.KtG(d.dragEnded(l,r,d.dayColumnWidth))}),a.YNc(2,zse,1,2,"div",19),a.TgZ(3,"mwl-calendar-week-view-event",20),a.NdJ("eventClicked",function(r){const l=a.CHM(e).$implicit,d=a.oxw(3);return a.KtG(d.eventClicked.emit({event:l.event,sourceEvent:r.sourceEvent}))}),a.qZA(),a.YNc(4,qse,1,2,"div",21),a.qZA()}if(2&n){const e=t.$implicit,i=a.oxw(3);a.Udp("width",100/i.days.length*e.span,"%")("margin-left",i.rtl?null:100/i.days.length*e.offset,"%")("margin-right",i.rtl?100/i.days.length*e.offset:null,"%"),a.ekj("cal-draggable",e.event.draggable&&0===i.allDayEventResizes.size)("cal-starts-within-week",!e.startsBeforeWeek)("cal-ends-within-week",!e.endsAfterWeek),a.Q6J("ngClass",null==e.event?null:e.event.cssClass)("resizeCursors",i.resizeCursors)("resizeSnapGrid",a.WLB(33,Yse,i.dayColumnWidth,i.dayColumnWidth))("validateResize",i.validateResize)("dropData",a.WLB(36,s4,e.event,i.calendarId))("dragAxis",a.WLB(39,t1,e.event.draggable&&0===i.allDayEventResizes.size,!i.snapDraggedEvents&&e.event.draggable&&0===i.allDayEventResizes.size))("dragSnapGrid",i.snapDraggedEvents?a.VKq(42,Zse,i.dayColumnWidth):a.DdM(44,pD))("validateDrag",i.validateDrag)("touchStartLongPress",a.DdM(45,NO)),a.xp6(2),a.Q6J("ngIf",(null==e.event||null==e.event.resizable?null:e.event.resizable.beforeStart)&&!e.startsBeforeWeek),a.xp6(1),a.Q6J("locale",i.locale)("weekEvent",e)("tooltipPlacement",i.tooltipPlacement)("tooltipTemplate",i.tooltipTemplate)("tooltipAppendToBody",i.tooltipAppendToBody)("tooltipDelay",i.tooltipDelay)("customTemplate",i.eventTemplate)("eventTitleTemplate",i.eventTitleTemplate)("eventActionsTemplate",i.eventActionsTemplate)("daysInWeek",i.daysInWeek),a.xp6(1),a.Q6J("ngIf",(null==e.event||null==e.event.resizable?null:e.event.resizable.afterEnd)&&!e.endsAfterWeek)}}function Qse(n,t){if(1&n&&(a.TgZ(0,"div",14,15),a.YNc(2,Kse,5,46,"div",16),a.qZA()),2&n){const e=t.$implicit,i=a.oxw(2);a.xp6(2),a.Q6J("ngForOf",e.row)("ngForTrackBy",i.trackByWeekAllDayEvent)}}function Jse(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",8,9),a.NdJ("dragEnter",function(){a.CHM(e);const r=a.oxw();return a.KtG(r.dragEnter("allDay"))})("dragLeave",function(){a.CHM(e);const r=a.oxw();return a.KtG(r.dragLeave("allDay"))}),a.TgZ(2,"div",5),a._UZ(3,"div",10),a.YNc(4,Gse,1,0,"div",11),a.qZA(),a.YNc(5,Qse,3,2,"div",12),a.qZA()}if(2&n){const e=a.oxw();a.xp6(3),a.Q6J("ngTemplateOutlet",e.allDayEventsLabelTemplate),a.xp6(1),a.Q6J("ngForOf",e.days)("ngForTrackBy",e.trackByWeekDayHeaderDate),a.xp6(1),a.Q6J("ngForOf",e.view.allDayEventRows)("ngForTrackBy",e.trackById)}}function Xse(n,t){if(1&n&&a._UZ(0,"mwl-calendar-week-view-hour-segment",28),2&n){const e=t.$implicit,i=a.oxw(3);a.Udp("height",i.hourSegmentHeight,"px"),a.Q6J("segment",e)("segmentHeight",i.hourSegmentHeight)("locale",i.locale)("customTemplate",i.hourSegmentTemplate)("isTimeLabel",!0)("daysInWeek",i.daysInWeek)}}function eoe(n,t){if(1&n&&(a.TgZ(0,"div",26),a.YNc(1,Xse,1,8,"mwl-calendar-week-view-hour-segment",27),a.qZA()),2&n){const e=t.$implicit,i=t.odd,r=a.oxw(2);a.ekj("cal-hour-odd",i),a.xp6(1),a.Q6J("ngForOf",e.segments)("ngForTrackBy",r.trackByHourSegment)}}function toe(n,t){if(1&n&&(a.TgZ(0,"div",24),a.YNc(1,eoe,2,4,"div",25),a.qZA()),2&n){const e=a.oxw();a.xp6(1),a.Q6J("ngForOf",e.view.hourColumns[0].hours)("ngForTrackBy",e.trackByHour)}}const noe=function(){return{left:!0,top:!0}};function ioe(n,t){1&n&&a._UZ(0,"div",22),2&n&&a.Q6J("resizeEdges",a.DdM(1,noe))}function roe(n,t){}function soe(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"mwl-calendar-week-view-event",36),a.NdJ("eventClicked",function(r){a.CHM(e);const s=a.oxw().$implicit,l=a.oxw(2);return a.KtG(l.eventClicked.emit({event:s.event,sourceEvent:r.sourceEvent}))}),a.qZA()}if(2&n){const e=a.oxw().$implicit,i=a.oxw().$implicit,r=a.oxw();a.Q6J("locale",r.locale)("weekEvent",e)("tooltipPlacement",r.tooltipPlacement)("tooltipTemplate",r.tooltipTemplate)("tooltipAppendToBody",r.tooltipAppendToBody)("tooltipDisabled",r.dragActive||r.timeEventResizes.size>0)("tooltipDelay",r.tooltipDelay)("customTemplate",r.eventTemplate)("eventTitleTemplate",r.eventTitleTemplate)("eventActionsTemplate",r.eventActionsTemplate)("column",i)("daysInWeek",r.daysInWeek)}}const ooe=function(){return{right:!0,bottom:!0}};function aoe(n,t){1&n&&a._UZ(0,"div",23),2&n&&a.Q6J("resizeEdges",a.DdM(1,ooe))}const loe=function(n,t,e,i){return{left:n,right:t,top:e,bottom:i}};function coe(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",33,18),a.NdJ("resizeStart",function(r){const l=a.CHM(e).$implicit,d=a.oxw(2),f=a.MAs(6);return a.KtG(d.timeEventResizeStarted(f,l,r))})("resizing",function(r){const l=a.CHM(e).$implicit,d=a.oxw(2);return a.KtG(d.timeEventResizing(l,r))})("resizeEnd",function(){const s=a.CHM(e).$implicit,l=a.oxw(2);return a.KtG(l.timeEventResizeEnded(s))})("dragStart",function(){const s=a.CHM(e).$implicit,l=a.MAs(1),d=a.oxw(2),f=a.MAs(6);return a.KtG(d.dragStarted(f,l,s,!0))})("dragging",function(r){const l=a.CHM(e).$implicit,d=a.oxw(2);return a.KtG(d.dragMove(l,r))})("dragEnd",function(r){const l=a.CHM(e).$implicit,d=a.oxw(2);return a.KtG(d.dragEnded(l,r,d.dayColumnWidth,!0))}),a.YNc(2,ioe,1,2,"div",19),a.YNc(3,roe,0,0,"ng-template",34),a.YNc(4,soe,1,12,"ng-template",null,35,a.W1O),a.YNc(6,aoe,1,2,"div",21),a.qZA()}if(2&n){const e=t.$implicit,i=a.MAs(5),r=a.oxw(2);a.Udp("top",e.top,"px")("height",e.height,"px")("left",e.left,"%")("width",e.width,"%"),a.ekj("cal-draggable",e.event.draggable&&0===r.timeEventResizes.size)("cal-starts-within-day",!e.startsBeforeDay)("cal-ends-within-day",!e.endsAfterDay),a.Q6J("ngClass",e.event.cssClass)("hidden",0===e.height&&0===e.width)("resizeCursors",r.resizeCursors)("resizeSnapGrid",a.l5B(30,loe,r.dayColumnWidth,r.dayColumnWidth,r.eventSnapSize||r.hourSegmentHeight,r.eventSnapSize||r.hourSegmentHeight))("validateResize",r.validateResize)("allowNegativeResizes",!0)("dropData",a.WLB(35,s4,e.event,r.calendarId))("dragAxis",a.WLB(38,t1,e.event.draggable&&0===r.timeEventResizes.size,e.event.draggable&&0===r.timeEventResizes.size))("dragSnapGrid",r.snapDraggedEvents?a.WLB(41,t1,r.dayColumnWidth,r.eventSnapSize||r.hourSegmentHeight):a.DdM(44,pD))("touchStartLongPress",a.DdM(45,NO))("ghostDragEnabled",!r.snapDraggedEvents)("ghostElementTemplate",i)("validateDrag",r.validateDrag),a.xp6(2),a.Q6J("ngIf",(null==e.event||null==e.event.resizable?null:e.event.resizable.beforeStart)&&!e.startsBeforeDay),a.xp6(1),a.Q6J("ngTemplateOutlet",i),a.xp6(3),a.Q6J("ngIf",(null==e.event||null==e.event.resizable?null:e.event.resizable.afterEnd)&&!e.endsAfterDay)}}function uoe(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"mwl-calendar-week-view-hour-segment",38),a.NdJ("mwlClick",function(r){const l=a.CHM(e).$implicit,d=a.oxw(3);return a.KtG(d.hourSegmentClicked.emit({date:l.date,sourceEvent:r}))})("drop",function(r){const l=a.CHM(e).$implicit,d=a.oxw(3);return a.KtG(d.eventDropped(r,l.date,!1))})("dragEnter",function(){const s=a.CHM(e).$implicit,l=a.oxw(3);return a.KtG(l.dateDragEnter(s.date))}),a.qZA()}if(2&n){const e=t.$implicit,i=a.oxw(3);a.Udp("height",i.hourSegmentHeight,"px"),a.Q6J("segment",e)("segmentHeight",i.hourSegmentHeight)("locale",i.locale)("customTemplate",i.hourSegmentTemplate)("daysInWeek",i.daysInWeek)("clickListenerDisabled",0===i.hourSegmentClicked.observers.length)("dragOverClass",i.dragActive&&i.snapDraggedEvents?null:"cal-drag-over")("isTimeLabel",1===i.daysInWeek)}}function doe(n,t){if(1&n&&(a.TgZ(0,"div",26),a.YNc(1,uoe,1,10,"mwl-calendar-week-view-hour-segment",37),a.qZA()),2&n){const e=t.$implicit,i=t.odd,r=a.oxw(2);a.ekj("cal-hour-odd",i),a.xp6(1),a.Q6J("ngForOf",e.segments)("ngForTrackBy",r.trackByHourSegment)}}function hoe(n,t){if(1&n&&(a.TgZ(0,"div",29),a._UZ(1,"mwl-calendar-week-view-current-time-marker",30),a.TgZ(2,"div",31),a.YNc(3,coe,7,46,"div",32),a.qZA(),a.YNc(4,doe,2,4,"div",25),a.qZA()),2&n){const e=t.$implicit,i=a.oxw();a.xp6(1),a.Q6J("columnDate",e.date)("dayStartHour",i.dayStartHour)("dayStartMinute",i.dayStartMinute)("dayEndHour",i.dayEndHour)("dayEndMinute",i.dayEndMinute)("hourSegments",i.hourSegments)("hourDuration",i.hourDuration)("hourSegmentHeight",i.hourSegmentHeight)("customTemplate",i.currentTimeMarkerTemplate),a.xp6(2),a.Q6J("ngForOf",e.events)("ngForTrackBy",i.trackByWeekTimeEvent),a.xp6(1),a.Q6J("ngForOf",e.hours)("ngForTrackBy",i.trackByHour)}}let Ey=(()=>{class n{constructor(e,i,r){this.renderer=e,this.elm=i,this.document=r,this.clickListenerDisabled=!1,this.click=new a.vpe,this.destroy$=new Qt.x}ngOnInit(){this.clickListenerDisabled||this.listen().pipe(Di(this.destroy$)).subscribe(e=>{e.stopPropagation(),this.click.emit(e)})}ngOnDestroy(){this.destroy$.next()}listen(){return new bi.y(e=>this.renderer.listen(this.elm.nativeElement,"click",i=>{e.next(i)}))}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.Qsj),a.Y36(a.SBq),a.Y36(_e))},n.\u0275dir=a.lG2({type:n,selectors:[["","mwlClick",""]],inputs:{clickListenerDisabled:"clickListenerDisabled"},outputs:{click:"mwlClick"}}),n})(),xO=(()=>{class n{constructor(e,i,r){this.host=e,this.ngZone=i,this.renderer=r,this.keydown=new a.vpe,this.keydownListener=null}ngOnInit(){this.ngZone.runOutsideAngular(()=>{this.keydownListener=this.renderer.listen(this.host.nativeElement,"keydown",e=>{(13===e.keyCode||13===e.which||"Enter"===e.key)&&(e.preventDefault(),e.stopPropagation(),this.ngZone.run(()=>{this.keydown.emit(e)}))})})}ngOnDestroy(){null!==this.keydownListener&&(this.keydownListener(),this.keydownListener=null)}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.SBq),a.Y36(a.R0b),a.Y36(a.Qsj))},n.\u0275dir=a.lG2({type:n,selectors:[["","mwlKeydownEnter",""]],outputs:{keydown:"mwlKeydownEnter"}}),n})(),RO=(()=>{class n{constructor(e){this.i18nPlural=e}monthCell({day:e,locale:i}){return e.badgeTotal>0?`\n        ${Jt(e.date,"EEEE MMMM d",i)},\n        ${this.i18nPlural.transform(e.badgeTotal,{"=0":"No events","=1":"One event",other:"# events"})},\n         click to expand\n      `:`${Jt(e.date,"EEEE MMMM d",i)}`}openDayEventsLandmark({date:e,locale:i}){return`\n      Beginning of expanded view for ${Jt(e,"EEEE MMMM dd",i)}\n    `}openDayEventsAlert({date:e,locale:i}){return`${Jt(e,"EEEE MMMM dd",i)} expanded`}eventDescription({event:e,locale:i}){if(!0===e.allDay)return this.allDayEventDescription({event:e,locale:i});const r=`\n      ${Jt(e.start,"EEEE MMMM dd",i)},\n      ${e.title}, from ${Jt(e.start,"hh:mm a",i)}\n    `;return e.end?r+` to ${Jt(e.end,"hh:mm a",i)}`:r}allDayEventDescription({event:e,locale:i}){const r=`\n      ${e.title}, event spans multiple days:\n      start time ${Jt(e.start,"MMMM dd hh:mm a",i)}\n    `;return e.end?r+`, stop time ${Jt(e.end,"MMMM d hh:mm a",i)}`:r+", no stop time"}actionButtonLabel({action:e}){return e.a11yLabel}monthCellTabIndex(){return 0}hideMonthCellEvents(){return!0}hideEventTitle(){return!0}hideWeekHourSegment(){return!0}hideDayHourSegment(){return!0}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(_c))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),Cy=(()=>{class n{constructor(e,i){this.calendarA11y=e,this.locale=i}transform(e,i){if(e.locale=e.locale||this.locale,typeof this.calendarA11y[i]>"u"){const r=Object.getOwnPropertyNames(Object.getPrototypeOf(RO.prototype)).filter(s=>"constructor"!==s);throw new Error(`${i} is not a valid a11y method. Can only be one of ${r.join(", ")}`)}return this.calendarA11y[i](e)}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(RO,16),a.Y36(a.soG,16))},n.\u0275pipe=a.Yjl({name:"calendarA11y",type:n,pure:!0}),n})(),o4=(()=>{class n{constructor(){this.trackByActionId=(e,i)=>i.id?i.id:i}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["mwl-calendar-event-actions"]],inputs:{event:"event",customTemplate:"customTemplate"},decls:3,vars:5,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","cal-event-actions",4,"ngIf"],[1,"cal-event-actions"],["class","cal-event-action","href","javascript:;","tabindex","0","role","button",3,"ngClass","innerHtml","mwlClick","mwlKeydownEnter",4,"ngFor","ngForOf","ngForTrackBy"],["href","javascript:;","tabindex","0","role","button",1,"cal-event-action",3,"ngClass","innerHtml","mwlClick","mwlKeydownEnter"]],template:function(e,i){if(1&e&&(a.YNc(0,Jre,1,1,"ng-template",null,0,a.W1O),a.YNc(2,Xre,0,0,"ng-template",1)),2&e){const r=a.MAs(1);a.xp6(2),a.Q6J("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",a.WLB(2,ese,i.event,i.trackByActionId))}},dependencies:[as,Qi,Mi,Ji,Ey,xO,Cy],encapsulation:2}),n})();class eV{month(t,e){return t.title}monthTooltip(t,e){return t.title}week(t,e){return t.title}weekTooltip(t,e){return t.title}day(t,e){return t.title}dayTooltip(t,e){return t.title}}let tV=(()=>{class n{constructor(e){this.calendarEventTitle=e}transform(e,i,r){return this.calendarEventTitle[i](r,e)}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(eV,16))},n.\u0275pipe=a.Yjl({name:"calendarEventTitle",type:n,pure:!0}),n})(),a4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["mwl-calendar-event-title"]],inputs:{event:"event",customTemplate:"customTemplate",view:"view"},decls:3,vars:5,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-event-title",3,"innerHTML"]],template:function(e,i){if(1&e&&(a.YNc(0,tse,3,10,"ng-template",null,0,a.W1O),a.YNc(2,nse,0,0,"ng-template",1)),2&e){const r=a.MAs(1);a.xp6(2),a.Q6J("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",a.WLB(2,ise,i.event,i.view))}},dependencies:[Ji,tV,Cy],encapsulation:2}),n})(),foe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["mwl-calendar-tooltip-window"]],inputs:{contents:"contents",placement:"placement",event:"event",customTemplate:"customTemplate"},decls:3,vars:6,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-tooltip",3,"ngClass"],[1,"cal-tooltip-arrow"],[1,"cal-tooltip-inner",3,"innerHtml"]],template:function(e,i){if(1&e&&(a.YNc(0,rse,3,2,"ng-template",null,0,a.W1O),a.YNc(2,sse,0,0,"ng-template",1)),2&e){const r=a.MAs(1);a.xp6(2),a.Q6J("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",a.kEZ(2,ose,i.contents,i.placement,i.event))}},dependencies:[as,Ji],encapsulation:2}),n})(),l4=(()=>{class n{constructor(e,i,r,s,l,d){this.elementRef=e,this.injector=i,this.renderer=r,this.viewContainerRef=l,this.document=d,this.placement="auto",this.delay=null,this.cancelTooltipDelay$=new Qt.x,this.tooltipFactory=s.resolveComponentFactory(foe)}ngOnChanges(e){this.tooltipRef&&(e.contents||e.customTemplate||e.event)&&(this.tooltipRef.instance.contents=this.contents,this.tooltipRef.instance.customTemplate=this.customTemplate,this.tooltipRef.instance.event=this.event,this.tooltipRef.changeDetectorRef.markForCheck(),this.contents||this.hide())}ngOnDestroy(){this.hide()}onMouseOver(){(null===this.delay?(0,At.of)("now"):PR(this.delay)).pipe(Di(this.cancelTooltipDelay$)).subscribe(()=>{this.show()})}onMouseOut(){this.hide()}show(){!this.tooltipRef&&this.contents&&(this.tooltipRef=this.viewContainerRef.createComponent(this.tooltipFactory,0,this.injector,[]),this.tooltipRef.instance.contents=this.contents,this.tooltipRef.instance.customTemplate=this.customTemplate,this.tooltipRef.instance.event=this.event,this.appendToBody&&this.document.body.appendChild(this.tooltipRef.location.nativeElement),requestAnimationFrame(()=>{this.positionTooltip()}))}hide(){this.tooltipRef&&(this.viewContainerRef.remove(this.viewContainerRef.indexOf(this.tooltipRef.hostView)),this.tooltipRef=null),this.cancelTooltipDelay$.next()}positionTooltip(e=[]){this.tooltipRef&&(this.tooltipRef.changeDetectorRef.detectChanges(),this.tooltipRef.instance.placement=function gre(n,t,e,i,r){var s=Array.isArray(e)?e:e.split(pre),l=["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"],d=t.classList,f=function(U){var ee=U.split("-"),oe=ee[0],te=ee[1],ce=[];return r&&(ce.push(r+"-"+oe),te&&ce.push(r+"-"+oe+"-"+te),ce.forEach(function(Ne){d.add(Ne)})),ce};r&&l.forEach(function(U){d.remove(r+"-"+U)});var m=s.findIndex(function(U){return"auto"===U});m>=0&&l.forEach(function(U){null==s.find(function(ee){return-1!==ee.search("^"+U)})&&s.splice(m++,1,U)});var y=t.style;y.position="absolute",y.top="0",y.left="0",y["will-change"]="transform";for(var C,A=!1,x=0,P=s;x<P.length;x++){var F=f(C=P[x]);if(Bz.positionElements(n,t,C,i)){A=!0;break}r&&F.forEach(function(U){d.remove(U)})}return A||(f(C=s[0]),Bz.positionElements(n,t,C,i)),C}(this.elementRef.nativeElement,this.tooltipRef.location.nativeElement.children[0],this.placement,this.appendToBody),-1===e.indexOf(this.tooltipRef.instance.placement)&&this.positionTooltip([...e,this.tooltipRef.instance.placement]))}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.SBq),a.Y36(a.zs3),a.Y36(a.Qsj),a.Y36(a._Vd),a.Y36(a.s_b),a.Y36(_e))},n.\u0275dir=a.lG2({type:n,selectors:[["","mwlCalendarTooltip",""]],hostBindings:function(e,i){1&e&&a.NdJ("mouseenter",function(){return i.onMouseOver()})("mouseleave",function(){return i.onMouseOut()})},inputs:{contents:["mwlCalendarTooltip","contents"],placement:["tooltipPlacement","placement"],customTemplate:["tooltipTemplate","customTemplate"],event:["tooltipEvent","event"],appendToBody:["tooltipAppendToBody","appendToBody"],delay:["tooltipDelay","delay"]},features:[a.TTD]}),n})();var Yf=function(n){return n.Month="month",n.Week="week",n.Day="day",n}(Yf||{});const c4=n=>function Are(n,t){var e=!0;function i(r,s){t(r,s),e=!1}return Array.isArray(n)?(n.forEach(function(r){r.start?r.start instanceof Date||i(dD.StartPropertyNotDate,r):i(dD.StartPropertyMissing,r),r.end&&(r.end instanceof Date||i(dD.EndPropertyNotDate,r),r.start>r.end&&i(dD.EndsBeforeStart,r))}),e):(t(dD.NotArray,n),!1)}(n,(...e)=>console.warn("angular-calendar",...e));function u4(n,t){return Math.floor(n.left)<=Math.ceil(t.left)&&Math.floor(t.left)<=Math.ceil(n.right)&&Math.floor(n.left)<=Math.ceil(t.right)&&Math.floor(t.right)<=Math.ceil(n.right)}function d4(n,t){return Math.round(n/t)*t}const h4=(n,t)=>t.id?t.id:t,nV=(n,t)=>t.date.toISOString(),moe=(n,t)=>t.date.toISOString(),_oe=(n,t)=>t.segments[0].date.toISOString(),voe=(n,t)=>t.event.id?t.event.id:t.event,yoe=(n,t)=>t.event.id?t.event.id:t.event;function iV(n,t,e,i,r){const s=d4(n,i||e),l=function boe(n,t,e){return(e||60)/(n*t)}(t,e,r);return s*l}function f4(n,t,e){return t.end?t.end:n.addMinutes(t.start,e)}function Iu(n,t,e,i){let r=0,s=0;const l=e<0?n.subDays:n.addDays;let d=t;for(;s<=Math.abs(e);){d=l(t,r);const f=n.getDay(d);-1===i.indexOf(f)&&s++,r++}return d}function rV(n,t,e,i=[],r){let s=r?n.startOfDay(t):n.startOfWeek(t,{weekStartsOn:e});const l=n.endOfWeek(t,{weekStartsOn:e});for(;i.indexOf(n.getDay(s))>-1&&s<l;)s=n.addDays(s,1);if(r)return{viewStart:s,viewEnd:n.endOfDay(Iu(n,s,r-1,i))};{let d=l;for(;i.indexOf(n.getDay(d))>-1&&d>s;)d=n.subDays(d,1);return{viewStart:s,viewEnd:d}}}function sV({x:n,y:t}){return Math.abs(n)>1||Math.abs(t)>1}class Zf{}let Coe=(()=>{class n{constructor(e){this.dateAdapter=e,this.excludeDays=[],this.viewDateChange=new a.vpe}onClick(){const e={day:this.dateAdapter.subDays,week:this.dateAdapter.subWeeks,month:this.dateAdapter.subMonths}[this.view];this.viewDateChange.emit(this.view===Yf.Day?Iu(this.dateAdapter,this.viewDate,-1,this.excludeDays):this.view===Yf.Week&&this.daysInWeek?Iu(this.dateAdapter,this.viewDate,-this.daysInWeek,this.excludeDays):e(this.viewDate,1))}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(Zf))},n.\u0275dir=a.lG2({type:n,selectors:[["","mwlCalendarPreviousView",""]],hostBindings:function(e,i){1&e&&a.NdJ("click",function(){return i.onClick()})},inputs:{view:"view",viewDate:"viewDate",excludeDays:"excludeDays",daysInWeek:"daysInWeek"},outputs:{viewDateChange:"viewDateChange"}}),n})(),Toe=(()=>{class n{constructor(e){this.dateAdapter=e,this.excludeDays=[],this.viewDateChange=new a.vpe}onClick(){const e={day:this.dateAdapter.addDays,week:this.dateAdapter.addWeeks,month:this.dateAdapter.addMonths}[this.view];this.viewDateChange.emit(this.view===Yf.Day?Iu(this.dateAdapter,this.viewDate,1,this.excludeDays):this.view===Yf.Week&&this.daysInWeek?Iu(this.dateAdapter,this.viewDate,this.daysInWeek,this.excludeDays):e(this.viewDate,1))}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(Zf))},n.\u0275dir=a.lG2({type:n,selectors:[["","mwlCalendarNextView",""]],hostBindings:function(e,i){1&e&&a.NdJ("click",function(){return i.onClick()})},inputs:{view:"view",viewDate:"viewDate",excludeDays:"excludeDays",daysInWeek:"daysInWeek"},outputs:{viewDateChange:"viewDateChange"}}),n})(),Ioe=(()=>{class n{constructor(e){this.dateAdapter=e,this.viewDateChange=new a.vpe}onClick(){this.viewDateChange.emit(this.dateAdapter.startOfDay(new Date))}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(Zf))},n.\u0275dir=a.lG2({type:n,selectors:[["","mwlCalendarToday",""]],hostBindings:function(e,i){1&e&&a.NdJ("click",function(){return i.onClick()})},inputs:{viewDate:"viewDate"},outputs:{viewDateChange:"viewDateChange"}}),n})(),Soe=(()=>{class n{constructor(e){this.dateAdapter=e}monthViewColumnHeader({date:e,locale:i}){return Jt(e,"EEEE",i)}monthViewDayNumber({date:e,locale:i}){return Jt(e,"d",i)}monthViewTitle({date:e,locale:i}){return Jt(e,"LLLL y",i)}weekViewColumnHeader({date:e,locale:i}){return Jt(e,"EEEE",i)}weekViewColumnSubHeader({date:e,locale:i}){return Jt(e,"MMM d",i)}weekViewTitle({date:e,locale:i,weekStartsOn:r,excludeDays:s,daysInWeek:l}){const{viewStart:d,viewEnd:f}=rV(this.dateAdapter,e,r,s,l),m=(y,C)=>Jt(y,"MMM d"+(C?", yyyy":""),i);return`${m(d,d.getUTCFullYear()!==f.getUTCFullYear())} - ${m(f,!0)}`}weekViewHour({date:e,locale:i}){return Jt(e,"h a",i)}dayViewHour({date:e,locale:i}){return Jt(e,"h a",i)}dayViewTitle({date:e,locale:i}){return Jt(e,"EEEE, MMMM d, y",i)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(Zf))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),OO=(()=>{class n extends Soe{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=a.n5z(n)))(i||n)}}(),n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),n1=(()=>{class n{constructor(e,i){this.dateFormatter=e,this.locale=i}transform(e,i,r=this.locale,s=0,l=[],d){if(typeof this.dateFormatter[i]>"u"){const f=Object.getOwnPropertyNames(Object.getPrototypeOf(OO.prototype)).filter(m=>"constructor"!==m);throw new Error(`${i} is not a valid date formatter. Can only be one of ${f.join(", ")}`)}return this.dateFormatter[i]({date:e,locale:r,weekStartsOn:s,excludeDays:l,daysInWeek:d})}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(OO,16),a.Y36(a.soG,16))},n.\u0275pipe=a.Yjl({name:"calendarDate",type:n,pure:!0}),n})(),kO=(()=>{class n{constructor(e){this.dateAdapter=e}getMonthView(e){return function Tre(n,t){var e=t.events,i=void 0===e?[]:e,r=t.viewDate,s=t.weekStartsOn,l=t.excluded,d=void 0===l?[]:l,f=t.viewStart,m=void 0===f?n.startOfMonth(r):f,y=t.viewEnd,C=void 0===y?n.endOfMonth(r):y,A=t.weekendDays;i||(i=[]);for(var _t,P=n.endOfWeek,F=n.differenceInDays,U=n.startOfDay,ee=n.addHours,oe=n.endOfDay,te=n.isSameMonth,ce=n.getDay,Ne=(0,n.startOfWeek)(m,{weekStartsOn:s}),Be=P(C,{weekStartsOn:s}),ot=JS(n,{events:i,periodStart:Ne,periodEnd:Be}),tt=[],Tt=function(Ht){var jt;if(_t?(jt=U(ee(_t,24)),_t.getTime()===jt.getTime()&&(jt=U(ee(_t,25))),_t=jt):jt=_t=Ne,!d.some(function(or){return ce(jt)===or})){var ii=Uz(n,{date:jt,weekendDays:A}),wi=JS(n,{events:ot,periodStart:U(jt),periodEnd:oe(jt)});ii.inMonth=te(jt,r),ii.events=wi,ii.badgeTotal=wi.length,tt.push(ii)}},st=0;st<F(Be,Ne)+1;st++)Tt();var nt=[],Zt=UB-d.length;if(Zt<UB)for(st=0;st<tt.length;st+=Zt){var Mn=tt.slice(st,st+Zt);Mn.some(function(jt){return m<=jt.date&&jt.date<C})&&(nt=BB(BB([],nt,!0),Mn,!0))}else nt=tt;var gt=Math.floor(nt.length/Zt),St=[];for(st=0;st<gt;st++)St.push(st*Zt);return{rowOffsets:St,totalDaysVisibleInWeek:Zt,days:nt,period:{start:nt[0].date,end:oe(nt[nt.length-1].date),events:ot}}}(this.dateAdapter,e)}getWeekViewHeader(e){return jB(this.dateAdapter,e)}getWeekView(e){return function Cre(n,t){var e=t.events,i=void 0===e?[]:e,r=t.viewDate,s=t.weekStartsOn,l=t.excluded,d=void 0===l?[]:l,f=t.precision,m=void 0===f?"days":f,y=t.absolutePositionedEvents,C=void 0!==y&&y,A=t.hourSegments,x=t.hourDuration,P=t.dayStart,F=t.dayEnd,U=t.weekendDays,ee=t.segmentHeight,oe=t.minimumEventHeight,te=t.viewStart,ce=void 0===te?n.startOfWeek(r,{weekStartsOn:s}):te,Ne=t.viewEnd,Be=void 0===Ne?n.endOfWeek(r,{weekStartsOn:s}):Ne;i||(i=[]);var tt=n.endOfDay,_t=JS(n,{events:i,periodStart:ce=(0,n.startOfDay)(ce),periodEnd:Be=tt(Be)}),Tt=jB(n,{viewDate:r,weekStartsOn:s,excluded:d,weekendDays:U,viewStart:ce,viewEnd:Be});return{allDayEventRows:Dre(n,{events:_t,excluded:d,precision:m,absolutePositionedEvents:C,viewStart:ce,viewEnd:Be}),period:{events:_t,start:Tt[0].date,end:tt(Tt[Tt.length-1].date)},hourColumns:Ere(n,{events:i,viewDate:r,hourSegments:A,hourDuration:x,dayStart:P,dayEnd:F,weekStartsOn:s,excluded:d,weekendDays:U,segmentHeight:ee,viewStart:ce,viewEnd:Be,minimumEventHeight:oe})}}(this.dateAdapter,e)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(Zf))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();new a.OlP("Moment");var Sm=function(n){return n.Drag="drag",n.Drop="drop",n.Resize="resize",n}(Sm||{});let i1=(()=>{class n{static forRoot(e,i={}){return{ngModule:n,providers:[e,i.eventTitleFormatter||eV,i.dateFormatter||OO,i.utils||kO,i.a11y||RO]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[_c],imports:[zn]}),n})(),Aoe=(()=>{class n{constructor(){this.highlightDay=new a.vpe,this.unhighlightDay=new a.vpe,this.eventClicked=new a.vpe,this.trackByEventId=h4,this.validateDrag=sV}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["mwl-calendar-month-cell"]],hostAttrs:[1,"cal-cell","cal-day-cell"],hostVars:18,hostBindings:function(e,i){2&e&&a.ekj("cal-past",i.day.isPast)("cal-today",i.day.isToday)("cal-future",i.day.isFuture)("cal-weekend",i.day.isWeekend)("cal-in-month",i.day.inMonth)("cal-out-month",!i.day.inMonth)("cal-has-events",i.day.events.length>0)("cal-open",i.day===i.openDay)("cal-event-highlight",!!i.day.backgroundColor)},inputs:{day:"day",openDay:"openDay",locale:"locale",tooltipPlacement:"tooltipPlacement",tooltipAppendToBody:"tooltipAppendToBody",customTemplate:"customTemplate",tooltipTemplate:"tooltipTemplate",tooltipDelay:"tooltipDelay"},outputs:{highlightDay:"highlightDay",unhighlightDay:"unhighlightDay",eventClicked:"eventClicked"},decls:3,vars:15,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-cell-top"],["aria-hidden","true"],["class","cal-day-badge",4,"ngIf"],[1,"cal-day-number"],["class","cal-events",4,"ngIf"],[1,"cal-day-badge"],[1,"cal-events"],["class","cal-event","mwlDraggable","","dragActiveClass","cal-drag-active",3,"ngStyle","ngClass","mwlCalendarTooltip","tooltipPlacement","tooltipEvent","tooltipTemplate","tooltipAppendToBody","tooltipDelay","cal-draggable","dropData","dragAxis","validateDrag","touchStartLongPress","mouseenter","mouseleave","mwlClick",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event",3,"ngStyle","ngClass","mwlCalendarTooltip","tooltipPlacement","tooltipEvent","tooltipTemplate","tooltipAppendToBody","tooltipDelay","dropData","dragAxis","validateDrag","touchStartLongPress","mouseenter","mouseleave","mwlClick"]],template:function(e,i){if(1&e&&(a.YNc(0,hse,8,14,"ng-template",null,0,a.W1O),a.YNc(2,fse,0,0,"ng-template",1)),2&e){const r=a.MAs(1);a.xp6(2),a.Q6J("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",a.rFY(2,pse,[i.day,i.openDay,i.locale,i.tooltipPlacement,i.highlightDay,i.unhighlightDay,i.eventClicked,i.tooltipTemplate,i.tooltipAppendToBody,i.tooltipDelay,i.trackByEventId,i.validateDrag]))}},dependencies:[as,Qi,Mi,Ji,Do,QB,l4,Ey,n1,tV,Cy],encapsulation:2}),n})();const Moe=aG("collapse",[uS("void",ty({height:0,overflow:"hidden","padding-top":0,"padding-bottom":0})),uS("*",ty({height:"*",overflow:"hidden","padding-top":"*","padding-bottom":"*"})),mR("* => void",gR("150ms ease-out")),mR("void => *",gR("150ms ease-in"))]);let Noe=(()=>{class n{constructor(){this.isOpen=!1,this.eventClicked=new a.vpe,this.trackByEventId=h4,this.validateDrag=sV}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["mwl-calendar-open-day-events"]],inputs:{locale:"locale",isOpen:"isOpen",events:"events",customTemplate:"customTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",date:"date"},outputs:{eventClicked:"eventClicked"},decls:3,vars:8,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","cal-open-day-events","role","application",4,"ngIf"],["role","application",1,"cal-open-day-events"],["tabindex","-1","role","alert"],["tabindex","0","role","landmark"],["mwlDraggable","","dragActiveClass","cal-drag-active",3,"ngClass","cal-draggable","dropData","dragAxis","validateDrag","touchStartLongPress",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDraggable","","dragActiveClass","cal-drag-active",3,"ngClass","dropData","dragAxis","validateDrag","touchStartLongPress"],[1,"cal-event",3,"ngStyle"],["view","month","tabindex","0",3,"event","customTemplate","mwlClick","mwlKeydownEnter"],[3,"event","customTemplate"]],template:function(e,i){if(1&e&&(a.YNc(0,vse,1,1,"ng-template",null,0,a.W1O),a.YNc(2,yse,0,0,"ng-template",1)),2&e){const r=a.MAs(1);a.xp6(2),a.Q6J("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",a.qbA(2,wse,i.events,i.eventClicked,i.isOpen,i.trackByEventId,i.validateDrag))}},dependencies:[as,Qi,Mi,Ji,Do,QB,o4,a4,Ey,xO,Cy],encapsulation:2,data:{animation:[Moe]}}),n})(),xoe=(()=>{class n{constructor(){this.columnHeaderClicked=new a.vpe,this.trackByWeekDayHeaderDate=nV}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["mwl-calendar-month-view-header"]],inputs:{days:"days",locale:"locale",customTemplate:"customTemplate"},outputs:{columnHeaderClicked:"columnHeaderClicked"},decls:3,vars:6,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","row",1,"cal-cell-row","cal-header"],["class","cal-cell","tabindex","0","role","columnheader",3,"cal-past","cal-today","cal-future","cal-weekend","ngClass","click",4,"ngFor","ngForOf","ngForTrackBy"],["tabindex","0","role","columnheader",1,"cal-cell",3,"ngClass","click"]],template:function(e,i){if(1&e&&(a.YNc(0,Dse,2,2,"ng-template",null,0,a.W1O),a.YNc(2,Ese,0,0,"ng-template",1)),2&e){const r=a.MAs(1);a.xp6(2),a.Q6J("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",a.kEZ(2,Cse,i.days,i.locale,i.trackByWeekDayHeaderDate))}},dependencies:[as,Qi,Ji,n1],encapsulation:2}),n})(),Roe=(()=>{class n{constructor(e,i,r,s){this.cdr=e,this.utils=i,this.dateAdapter=s,this.events=[],this.excludeDays=[],this.activeDayIsOpen=!1,this.tooltipPlacement="auto",this.tooltipAppendToBody=!0,this.tooltipDelay=null,this.beforeViewRender=new a.vpe,this.dayClicked=new a.vpe,this.eventClicked=new a.vpe,this.columnHeaderClicked=new a.vpe,this.eventTimesChanged=new a.vpe,this.trackByRowOffset=(l,d)=>this.view.days.slice(d,this.view.totalDaysVisibleInWeek).map(f=>f.date.toISOString()).join("-"),this.trackByDate=(l,d)=>d.date.toISOString(),this.locale=r}ngOnInit(){this.refresh&&(this.refreshSubscription=this.refresh.subscribe(()=>{this.refreshAll(),this.cdr.markForCheck()}))}ngOnChanges(e){const i=e.viewDate||e.excludeDays||e.weekendDays,r=e.viewDate||e.events||e.excludeDays||e.weekendDays;i&&this.refreshHeader(),e.events&&c4(this.events),r&&this.refreshBody(),(i||r)&&this.emitBeforeViewRender(),(e.activeDayIsOpen||e.viewDate||e.events||e.excludeDays||e.activeDay)&&this.checkActiveDayIsOpen()}ngOnDestroy(){this.refreshSubscription&&this.refreshSubscription.unsubscribe()}toggleDayHighlight(e,i){this.view.days.forEach(r=>{i&&r.events.indexOf(e)>-1?r.backgroundColor=e.color&&e.color.secondary||"#D1E8FF":delete r.backgroundColor})}eventDropped(e,i,r){if(e!==r){const s=this.dateAdapter.getYear(e.date),l=this.dateAdapter.getMonth(e.date),d=this.dateAdapter.getDate(e.date),f=this.dateAdapter.setDate(this.dateAdapter.setMonth(this.dateAdapter.setYear(i.start,s),l),d);let m;if(i.end){const y=this.dateAdapter.differenceInSeconds(f,i.start);m=this.dateAdapter.addSeconds(i.end,y)}this.eventTimesChanged.emit({event:i,newStart:f,newEnd:m,day:e,type:Sm.Drop})}}refreshHeader(){this.columnHeaders=this.utils.getWeekViewHeader({viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,weekendDays:this.weekendDays})}refreshBody(){this.view=this.utils.getMonthView({events:this.events,viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,weekendDays:this.weekendDays})}checkActiveDayIsOpen(){if(!0===this.activeDayIsOpen){const e=this.activeDay||this.viewDate;this.openDay=this.view.days.find(r=>this.dateAdapter.isSameDay(r.date,e));const i=this.view.days.indexOf(this.openDay);this.openRowIndex=Math.floor(i/this.view.totalDaysVisibleInWeek)*this.view.totalDaysVisibleInWeek}else this.openRowIndex=null,this.openDay=null}refreshAll(){this.refreshHeader(),this.refreshBody(),this.emitBeforeViewRender(),this.checkActiveDayIsOpen()}emitBeforeViewRender(){this.columnHeaders&&this.view&&this.beforeViewRender.emit({header:this.columnHeaders,body:this.view.days,period:this.view.period})}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.sBO),a.Y36(kO),a.Y36(a.soG),a.Y36(Zf))},n.\u0275cmp=a.Xpm({type:n,selectors:[["mwl-calendar-month-view"]],inputs:{viewDate:"viewDate",events:"events",excludeDays:"excludeDays",activeDayIsOpen:"activeDayIsOpen",activeDay:"activeDay",refresh:"refresh",locale:"locale",tooltipPlacement:"tooltipPlacement",tooltipTemplate:"tooltipTemplate",tooltipAppendToBody:"tooltipAppendToBody",tooltipDelay:"tooltipDelay",weekStartsOn:"weekStartsOn",headerTemplate:"headerTemplate",cellTemplate:"cellTemplate",openDayEventsTemplate:"openDayEventsTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",weekendDays:"weekendDays"},outputs:{beforeViewRender:"beforeViewRender",dayClicked:"dayClicked",eventClicked:"eventClicked",columnHeaderClicked:"columnHeaderClicked",eventTimesChanged:"eventTimesChanged"},features:[a.TTD],decls:4,vars:5,consts:[["role","grid",1,"cal-month-view"],[3,"days","locale","customTemplate","columnHeaderClicked"],[1,"cal-days"],[4,"ngFor","ngForOf","ngForTrackBy"],["role","row",1,"cal-cell-row"],["role","gridcell","mwlDroppable","","dragOverClass","cal-drag-over",3,"ngClass","day","openDay","locale","tooltipPlacement","tooltipAppendToBody","tooltipTemplate","tooltipDelay","customTemplate","ngStyle","clickListenerDisabled","mwlClick","mwlKeydownEnter","highlightDay","unhighlightDay","drop","eventClicked",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragOverClass","cal-drag-over",3,"locale","isOpen","events","date","customTemplate","eventTitleTemplate","eventActionsTemplate","eventClicked","drop"],["role","gridcell","mwlDroppable","","dragOverClass","cal-drag-over",3,"ngClass","day","openDay","locale","tooltipPlacement","tooltipAppendToBody","tooltipTemplate","tooltipDelay","customTemplate","ngStyle","clickListenerDisabled","mwlClick","mwlKeydownEnter","highlightDay","unhighlightDay","drop","eventClicked"]],template:function(e,i){1&e&&(a.TgZ(0,"div",0)(1,"mwl-calendar-month-view-header",1),a.NdJ("columnHeaderClicked",function(s){return i.columnHeaderClicked.emit(s)}),a.qZA(),a.TgZ(2,"div",2),a.YNc(3,Ise,5,13,"div",3),a.qZA()()),2&e&&(a.xp6(1),a.Q6J("days",i.columnHeaders)("locale",i.locale)("customTemplate",i.headerTemplate),a.xp6(2),a.Q6J("ngForOf",i.view.rowOffsets)("ngForTrackBy",i.trackByRowOffset))},dependencies:[as,Qi,Do,JB,Ey,xO,Aoe,Noe,xoe,Xi,Cy],encapsulation:2}),n})(),p4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[zn,AO,i1,AO]}),n})();class Ooe{constructor(t,e){this.dragContainerElement=t,this.startPosition=e.getBoundingClientRect()}validateDrag({x:t,y:e,snapDraggedEvents:i,dragAlreadyMoved:r,transform:s}){const l=sV({x:t,y:e})||r;if(i){const d=Object.assign({},this.startPosition,{left:this.startPosition.left+s.x,right:this.startPosition.right+s.x,top:this.startPosition.top+s.y,bottom:this.startPosition.bottom+s.y});if(l){const f=this.dragContainerElement.getBoundingClientRect(),m=f.top<d.top&&d.top<f.bottom,y=f.top<d.bottom&&d.bottom<f.bottom;return u4(f,d)&&(m||y)}return!1}return l}}class koe{constructor(t,e,i){this.resizeContainerElement=t,this.minWidth=e,this.rtl=i}validateResize({rectangle:t,edges:e}){return this.rtl&&(typeof e.left<"u"?(t.left-=e.left,t.right+=e.left):typeof e.right<"u"&&(t.left+=e.right,t.right-=e.right),t.width=t.right-t.left),!(this.minWidth&&Math.ceil(t.width)<Math.ceil(this.minWidth))&&function goe(n,t){return u4(n,t)&&function poe(n,t){return Math.floor(n.top)<=Math.ceil(t.top)&&Math.floor(t.top)<=Math.ceil(n.bottom)&&Math.floor(n.top)<=Math.ceil(t.bottom)&&Math.floor(t.bottom)<=Math.ceil(n.bottom)}(n,t)}(this.resizeContainerElement.getBoundingClientRect(),t)}}let Poe=(()=>{class n{constructor(){this.dayHeaderClicked=new a.vpe,this.eventDropped=new a.vpe,this.dragEnter=new a.vpe,this.trackByWeekDayHeaderDate=nV}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["mwl-calendar-week-view-header"]],inputs:{days:"days",locale:"locale",customTemplate:"customTemplate"},outputs:{dayHeaderClicked:"dayHeaderClicked",eventDropped:"eventDropped",dragEnter:"dragEnter"},decls:3,vars:9,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","row",1,"cal-day-headers"],["class","cal-header","mwlDroppable","","dragOverClass","cal-drag-over","tabindex","0","role","columnheader",3,"cal-past","cal-today","cal-future","cal-weekend","ngClass","mwlClick","drop","dragEnter",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragOverClass","cal-drag-over","tabindex","0","role","columnheader",1,"cal-header",3,"ngClass","mwlClick","drop","dragEnter"]],template:function(e,i){if(1&e&&(a.YNc(0,Ase,2,2,"ng-template",null,0,a.W1O),a.YNc(2,Mse,0,0,"ng-template",1)),2&e){const r=a.MAs(1);a.xp6(2),a.Q6J("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",a.HTZ(2,Nse,i.days,i.locale,i.dayHeaderClicked,i.eventDropped,i.dragEnter,i.trackByWeekDayHeaderDate))}},dependencies:[as,Qi,Ji,JB,Ey,n1],encapsulation:2}),n})(),Foe=(()=>{class n{constructor(){this.eventClicked=new a.vpe}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["mwl-calendar-week-view-event"]],inputs:{locale:"locale",weekEvent:"weekEvent",tooltipPlacement:"tooltipPlacement",tooltipAppendToBody:"tooltipAppendToBody",tooltipDisabled:"tooltipDisabled",tooltipDelay:"tooltipDelay",customTemplate:"customTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",tooltipTemplate:"tooltipTemplate",column:"column",daysInWeek:"daysInWeek"},outputs:{eventClicked:"eventClicked"},decls:3,vars:12,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["tabindex","0","role","application",1,"cal-event",3,"ngStyle","mwlCalendarTooltip","tooltipPlacement","tooltipEvent","tooltipTemplate","tooltipAppendToBody","tooltipDelay","mwlClick","mwlKeydownEnter"],[3,"event","customTemplate"],[3,"event","customTemplate","view"]],template:function(e,i){if(1&e&&(a.YNc(0,Rse,6,27,"ng-template",null,0,a.W1O),a.YNc(2,Ose,0,0,"ng-template",1)),2&e){const r=a.MAs(1);a.xp6(2),a.Q6J("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",a.rFY(2,kse,[i.weekEvent,i.tooltipPlacement,i.eventClicked,i.tooltipTemplate,i.tooltipAppendToBody,i.tooltipDisabled,i.tooltipDelay,i.column,i.daysInWeek]))}},dependencies:[Ji,Do,o4,a4,l4,Ey,xO,tV,Cy],encapsulation:2}),n})(),Loe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["mwl-calendar-week-view-hour-segment"]],inputs:{segment:"segment",segmentHeight:"segmentHeight",locale:"locale",isTimeLabel:"isTimeLabel",daysInWeek:"daysInWeek",customTemplate:"customTemplate"},decls:3,vars:8,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-hour-segment",3,"ngClass"],["class","cal-time",4,"ngIf"],[1,"cal-time"]],template:function(e,i){if(1&e&&(a.YNc(0,Fse,3,13,"ng-template",null,0,a.W1O),a.YNc(2,Lse,0,0,"ng-template",1)),2&e){const r=a.MAs(1);a.xp6(2),a.Q6J("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",a.qbA(2,Bse,i.segment,i.locale,i.segmentHeight,i.isTimeLabel,i.daysInWeek))}},dependencies:[as,Mi,Ji,n1,Cy],encapsulation:2}),n})(),Boe=(()=>{class n{constructor(e,i){this.dateAdapter=e,this.zone=i,this.columnDate$=new bl.X(void 0),this.marker$=this.zone.onStable.pipe((0,qn.w)(()=>function hre(n=0,t=Mr.z){return n<0&&(n=0),PR(n,n,t)}(6e4)),Kl(0),Rc(this.columnDate$),(0,rt.U)(r=>{const s=this.dateAdapter.setMinutes(this.dateAdapter.setHours(r,this.dayStartHour),this.dayStartMinute),l=this.dateAdapter.setMinutes(this.dateAdapter.setHours(r,this.dayEndHour),this.dayEndMinute),d=this.hourSegments*this.hourSegmentHeight/(this.hourDuration||60),f=new Date;return{isVisible:this.dateAdapter.isSameDay(r,f)&&f>=s&&f<=l,top:this.dateAdapter.differenceInMinutes(f,s)*d}}))}ngOnChanges(e){e.columnDate&&this.columnDate$.next(e.columnDate.currentValue)}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(Zf),a.Y36(a.R0b))},n.\u0275cmp=a.Xpm({type:n,selectors:[["mwl-calendar-week-view-current-time-marker"]],inputs:{columnDate:"columnDate",dayStartHour:"dayStartHour",dayStartMinute:"dayStartMinute",dayEndHour:"dayEndHour",dayEndMinute:"dayEndMinute",hourSegments:"hourSegments",hourDuration:"hourDuration",hourSegmentHeight:"hourSegmentHeight",customTemplate:"customTemplate"},features:[a.TTD],decls:5,vars:14,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","cal-current-time-marker",3,"top",4,"ngIf"],[1,"cal-current-time-marker"]],template:function(e,i){if(1&e&&(a.YNc(0,Use,1,1,"ng-template",null,0,a.W1O),a.YNc(2,Hse,0,0,"ng-template",1),a.ALo(3,"async"),a.ALo(4,"async")),2&e){const r=a.MAs(1);let s;a.xp6(2),a.Q6J("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",a.Hh0(6,jse,i.columnDate,i.dayStartHour,i.dayStartMinute,i.dayEndHour,i.dayEndMinute,null==(s=a.lcZ(3,2,i.marker$))?null:s.isVisible,null==(s=a.lcZ(4,4,i.marker$))?null:s.top))}},dependencies:[Mi,Ji,La],encapsulation:2}),n})(),g4=(()=>{class n{constructor(e,i,r,s,l){this.cdr=e,this.utils=i,this.dateAdapter=s,this.element=l,this.events=[],this.excludeDays=[],this.tooltipPlacement="auto",this.tooltipAppendToBody=!0,this.tooltipDelay=null,this.precision="days",this.snapDraggedEvents=!0,this.hourSegments=2,this.hourSegmentHeight=30,this.minimumEventHeight=30,this.dayStartHour=0,this.dayStartMinute=0,this.dayEndHour=23,this.dayEndMinute=59,this.dayHeaderClicked=new a.vpe,this.eventClicked=new a.vpe,this.eventTimesChanged=new a.vpe,this.beforeViewRender=new a.vpe,this.hourSegmentClicked=new a.vpe,this.allDayEventResizes=new Map,this.timeEventResizes=new Map,this.eventDragEnterByType={allDay:0,time:0},this.dragActive=!1,this.dragAlreadyMoved=!1,this.calendarId=Symbol("angular calendar week view id"),this.rtl=!1,this.trackByWeekDayHeaderDate=nV,this.trackByHourSegment=moe,this.trackByHour=_oe,this.trackByWeekAllDayEvent=voe,this.trackByWeekTimeEvent=yoe,this.trackByHourColumn=(d,f)=>f.hours[0]?f.hours[0].segments[0].date.toISOString():f,this.trackById=(d,f)=>f.id,this.locale=r}ngOnInit(){this.refresh&&(this.refreshSubscription=this.refresh.subscribe(()=>{this.refreshAll(),this.cdr.markForCheck()}))}ngOnChanges(e){const i=e.viewDate||e.excludeDays||e.weekendDays||e.daysInWeek||e.weekStartsOn,r=e.viewDate||e.dayStartHour||e.dayStartMinute||e.dayEndHour||e.dayEndMinute||e.hourSegments||e.hourDuration||e.weekStartsOn||e.weekendDays||e.excludeDays||e.hourSegmentHeight||e.events||e.daysInWeek||e.minimumEventHeight;i&&this.refreshHeader(),e.events&&c4(this.events),r&&this.refreshBody(),(i||r)&&this.emitBeforeViewRender()}ngOnDestroy(){this.refreshSubscription&&this.refreshSubscription.unsubscribe()}ngAfterViewInit(){this.rtl=typeof window<"u"&&"rtl"===getComputedStyle(this.element.nativeElement).direction,this.cdr.detectChanges()}timeEventResizeStarted(e,i,r){this.timeEventResizes.set(i.event,r),this.resizeStarted(e,i)}timeEventResizing(e,i){this.timeEventResizes.set(e.event,i);const r=new Map,s=[...this.events];this.timeEventResizes.forEach((l,d)=>{const f=this.getTimeEventResizedDates(d,l),m={...d,...f};r.set(m,d);const y=s.indexOf(d);s[y]=m}),this.restoreOriginalEvents(s,r,!0)}timeEventResizeEnded(e){this.view=this.getWeekView(this.events);const i=this.timeEventResizes.get(e.event);if(i){this.timeEventResizes.delete(e.event);const r=this.getTimeEventResizedDates(e.event,i);this.eventTimesChanged.emit({newStart:r.start,newEnd:r.end,event:e.event,type:Sm.Resize})}}allDayEventResizeStarted(e,i,r){this.allDayEventResizes.set(i,{originalOffset:i.offset,originalSpan:i.span,edge:typeof r.edges.left<"u"?"left":"right"}),this.resizeStarted(e,i,this.getDayColumnWidth(e))}allDayEventResizing(e,i,r){const s=this.allDayEventResizes.get(e),l=this.rtl?-1:1;if(typeof i.edges.left<"u"){const d=Math.round(+i.edges.left/r)*l;e.offset=s.originalOffset+d,e.span=s.originalSpan-d}else if(typeof i.edges.right<"u"){const d=Math.round(+i.edges.right/r)*l;e.span=s.originalSpan+d}}allDayEventResizeEnded(e){const i=this.allDayEventResizes.get(e);if(i){const r="left"===i.edge;let s;s=r?e.offset-i.originalOffset:e.span-i.originalSpan,e.offset=i.originalOffset,e.span=i.originalSpan;const l=this.getAllDayEventResizedDates(e.event,s,r);this.eventTimesChanged.emit({newStart:l.start,newEnd:l.end,event:e.event,type:Sm.Resize}),this.allDayEventResizes.delete(e)}}getDayColumnWidth(e){return Math.floor(e.offsetWidth/this.days.length)}dateDragEnter(e){this.lastDragEnterDate=e}eventDropped(e,i,r){(function Eoe(n,t,e,i){return n.dropData&&n.dropData.event&&(n.dropData.calendarId!==i||n.dropData.event.allDay&&!e||!n.dropData.event.allDay&&e)})(e,0,r,this.calendarId)&&this.lastDragEnterDate.getTime()===i.getTime()&&(!this.snapDraggedEvents||e.dropData.event!==this.lastDraggedEvent)&&this.eventTimesChanged.emit({type:Sm.Drop,event:e.dropData.event,newStart:i,allDay:r}),this.lastDraggedEvent=null}dragEnter(e){this.eventDragEnterByType[e]++}dragLeave(e){this.eventDragEnterByType[e]--}dragStarted(e,i,r,s){this.dayColumnWidth=this.getDayColumnWidth(e);const l=new Ooe(e,i);this.validateDrag=({x:d,y:f,transform:m})=>{const y=0===this.allDayEventResizes.size&&0===this.timeEventResizes.size&&l.validateDrag({x:d,y:f,snapDraggedEvents:this.snapDraggedEvents,dragAlreadyMoved:this.dragAlreadyMoved,transform:m});if(y&&this.validateEventTimesChanged){const C=this.getDragMovedEventTimes(r,{x:d,y:f},this.dayColumnWidth,s);return this.validateEventTimesChanged({type:Sm.Drag,event:r.event,newStart:C.start,newEnd:C.end})}return y},this.dragActive=!0,this.dragAlreadyMoved=!1,this.lastDraggedEvent=null,this.eventDragEnterByType={allDay:0,time:0},!this.snapDraggedEvents&&s&&this.view.hourColumns.forEach(d=>{const f=d.events.find(m=>m.event===r.event&&m!==r);f&&(f.width=0,f.height=0)}),this.cdr.markForCheck()}dragMove(e,i){const r=this.getDragMovedEventTimes(e,i,this.dayColumnWidth,!0),s=e.event,l={...s,...r},d=this.events.map(f=>f===s?l:f);this.restoreOriginalEvents(d,new Map([[l,s]]),this.snapDraggedEvents),this.dragAlreadyMoved=!0}allDayEventDragMove(){this.dragAlreadyMoved=!0}dragEnded(e,i,r,s=!1){this.view=this.getWeekView(this.events),this.dragActive=!1,this.validateDrag=null;const{start:l,end:d}=this.getDragMovedEventTimes(e,i,r,s);(this.snapDraggedEvents||this.eventDragEnterByType[s?"time":"allDay"]>0)&&function Doe(n,t,e){const i=t||n;return e.start<=n&&n<=e.end||e.start<=i&&i<=e.end}(l,d,this.view.period)&&(this.lastDraggedEvent=e.event,this.eventTimesChanged.emit({newStart:l,newEnd:d,event:e.event,type:Sm.Drag,allDay:!s}))}refreshHeader(){this.days=this.utils.getWeekViewHeader({viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,weekendDays:this.weekendDays,...rV(this.dateAdapter,this.viewDate,this.weekStartsOn,this.excludeDays,this.daysInWeek)})}refreshBody(){this.view=this.getWeekView(this.events)}refreshAll(){this.refreshHeader(),this.refreshBody(),this.emitBeforeViewRender()}emitBeforeViewRender(){this.days&&this.view&&this.beforeViewRender.emit({header:this.days,...this.view})}getWeekView(e){return this.utils.getWeekView({events:e,viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,precision:this.precision,absolutePositionedEvents:!0,hourSegments:this.hourSegments,hourDuration:this.hourDuration,dayStart:{hour:this.dayStartHour,minute:this.dayStartMinute},dayEnd:{hour:this.dayEndHour,minute:this.dayEndMinute},segmentHeight:this.hourSegmentHeight,weekendDays:this.weekendDays,minimumEventHeight:this.minimumEventHeight,...rV(this.dateAdapter,this.viewDate,this.weekStartsOn,this.excludeDays,this.daysInWeek)})}getDragMovedEventTimes(e,i,r,s){const l=d4(i.x,r)/r*(this.rtl?-1:1),d=s?iV(i.y,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize,this.hourDuration):0,f=this.dateAdapter.addMinutes(Iu(this.dateAdapter,e.event.start,l,this.excludeDays),d);let m;return e.event.end&&(m=this.dateAdapter.addMinutes(Iu(this.dateAdapter,e.event.end,l,this.excludeDays),d)),{start:f,end:m}}restoreOriginalEvents(e,i,r=!0){const s=this.view;r&&(this.view=this.getWeekView(e));const l=e.filter(d=>i.has(d));this.view.hourColumns.forEach((d,f)=>{s.hourColumns[f].hours.forEach((m,y)=>{m.segments.forEach((C,A)=>{d.hours[y].segments[A].cssClass=C.cssClass})}),l.forEach(m=>{const y=i.get(m),C=d.events.find(A=>A.event===(r?m:y));C?(C.event=y,C.tempEvent=m,r||(C.height=0,C.width=0)):d.events.push({event:y,left:0,top:0,height:0,width:0,startsBeforeDay:!1,endsAfterDay:!1,tempEvent:m})})}),i.clear()}getTimeEventResizedDates(e,i){const r={start:e.start,end:f4(this.dateAdapter,e,this.minimumEventHeight)},{end:s,...l}=e,d={start:this.dateAdapter.addMinutes(r.end,-1*this.minimumEventHeight),end:f4(this.dateAdapter,l,this.minimumEventHeight)},f=this.rtl?-1:1;if(typeof i.edges.left<"u"){const m=Math.round(+i.edges.left/this.dayColumnWidth)*f,y=Iu(this.dateAdapter,r.start,m,this.excludeDays);r.start=y<d.start?y:d.start}else if(typeof i.edges.right<"u"){const m=Math.round(+i.edges.right/this.dayColumnWidth)*f,y=Iu(this.dateAdapter,r.end,m,this.excludeDays);r.end=y>d.end?y:d.end}if(typeof i.edges.top<"u"){const m=iV(i.edges.top,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize,this.hourDuration),y=this.dateAdapter.addMinutes(r.start,m);r.start=y<d.start?y:d.start}else if(typeof i.edges.bottom<"u"){const m=iV(i.edges.bottom,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize,this.hourDuration),y=this.dateAdapter.addMinutes(r.end,m);r.end=y>d.end?y:d.end}return r}resizeStarted(e,i,r){this.dayColumnWidth=this.getDayColumnWidth(e);const s=new koe(e,r,this.rtl);this.validateResize=({rectangle:l,edges:d})=>{const f=s.validateResize({rectangle:{...l},edges:d});if(f&&this.validateEventTimesChanged){let m;if(r){const y=this.rtl?-1:1;if(typeof d.left<"u"){const C=Math.round(+d.left/r)*y;m=this.getAllDayEventResizedDates(i.event,C,!this.rtl)}else{const C=Math.round(+d.right/r)*y;m=this.getAllDayEventResizedDates(i.event,C,this.rtl)}}else m=this.getTimeEventResizedDates(i.event,{rectangle:l,edges:d});return this.validateEventTimesChanged({type:Sm.Resize,event:i.event,newStart:m.start,newEnd:m.end})}return f},this.cdr.markForCheck()}getAllDayEventResizedDates(e,i,r){let s=e.start,l=e.end||e.start;return r?s=Iu(this.dateAdapter,s,i,this.excludeDays):l=Iu(this.dateAdapter,l,i,this.excludeDays),{start:s,end:l}}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.sBO),a.Y36(kO),a.Y36(a.soG),a.Y36(Zf),a.Y36(a.SBq))},n.\u0275cmp=a.Xpm({type:n,selectors:[["mwl-calendar-week-view"]],inputs:{viewDate:"viewDate",events:"events",excludeDays:"excludeDays",refresh:"refresh",locale:"locale",tooltipPlacement:"tooltipPlacement",tooltipTemplate:"tooltipTemplate",tooltipAppendToBody:"tooltipAppendToBody",tooltipDelay:"tooltipDelay",weekStartsOn:"weekStartsOn",headerTemplate:"headerTemplate",eventTemplate:"eventTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",precision:"precision",weekendDays:"weekendDays",snapDraggedEvents:"snapDraggedEvents",hourSegments:"hourSegments",hourDuration:"hourDuration",hourSegmentHeight:"hourSegmentHeight",minimumEventHeight:"minimumEventHeight",dayStartHour:"dayStartHour",dayStartMinute:"dayStartMinute",dayEndHour:"dayEndHour",dayEndMinute:"dayEndMinute",hourSegmentTemplate:"hourSegmentTemplate",eventSnapSize:"eventSnapSize",allDayEventsLabelTemplate:"allDayEventsLabelTemplate",daysInWeek:"daysInWeek",currentTimeMarkerTemplate:"currentTimeMarkerTemplate",validateEventTimesChanged:"validateEventTimesChanged",resizeCursors:"resizeCursors"},outputs:{dayHeaderClicked:"dayHeaderClicked",eventClicked:"eventClicked",eventTimesChanged:"eventTimesChanged",beforeViewRender:"beforeViewRender",hourSegmentClicked:"hourSegmentClicked"},features:[a.TTD],decls:8,vars:9,consts:[["role","grid",1,"cal-week-view"],[3,"days","locale","customTemplate","dayHeaderClicked","eventDropped","dragEnter"],["class","cal-all-day-events","mwlDroppable","",3,"dragEnter","dragLeave",4,"ngIf"],["mwlDroppable","",1,"cal-time-events",3,"dragEnter","dragLeave"],["class","cal-time-label-column",4,"ngIf"],[1,"cal-day-columns"],["dayColumns",""],["class","cal-day-column",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","",1,"cal-all-day-events",3,"dragEnter","dragLeave"],["allDayEventsContainer",""],[1,"cal-time-label-column",3,"ngTemplateOutlet"],["class","cal-day-column","mwlDroppable","","dragOverClass","cal-drag-over",3,"drop","dragEnter",4,"ngFor","ngForOf","ngForTrackBy"],["class","cal-events-row",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragOverClass","cal-drag-over",1,"cal-day-column",3,"drop","dragEnter"],[1,"cal-events-row"],["eventRowContainer",""],["class","cal-event-container","mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",3,"cal-draggable","cal-starts-within-week","cal-ends-within-week","ngClass","width","marginLeft","marginRight","resizeCursors","resizeSnapGrid","validateResize","dropData","dragAxis","dragSnapGrid","validateDrag","touchStartLongPress","resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd",4,"ngFor","ngForOf","ngForTrackBy"],["mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event-container",3,"ngClass","resizeCursors","resizeSnapGrid","validateResize","dropData","dragAxis","dragSnapGrid","validateDrag","touchStartLongPress","resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd"],["event",""],["class","cal-resize-handle cal-resize-handle-before-start","mwlResizeHandle","",3,"resizeEdges",4,"ngIf"],[3,"locale","weekEvent","tooltipPlacement","tooltipTemplate","tooltipAppendToBody","tooltipDelay","customTemplate","eventTitleTemplate","eventActionsTemplate","daysInWeek","eventClicked"],["class","cal-resize-handle cal-resize-handle-after-end","mwlResizeHandle","",3,"resizeEdges",4,"ngIf"],["mwlResizeHandle","",1,"cal-resize-handle","cal-resize-handle-before-start",3,"resizeEdges"],["mwlResizeHandle","",1,"cal-resize-handle","cal-resize-handle-after-end",3,"resizeEdges"],[1,"cal-time-label-column"],["class","cal-hour",3,"cal-hour-odd",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cal-hour"],[3,"height","segment","segmentHeight","locale","customTemplate","isTimeLabel","daysInWeek",4,"ngFor","ngForOf","ngForTrackBy"],[3,"segment","segmentHeight","locale","customTemplate","isTimeLabel","daysInWeek"],[1,"cal-day-column"],[3,"columnDate","dayStartHour","dayStartMinute","dayEndHour","dayEndMinute","hourSegments","hourDuration","hourSegmentHeight","customTemplate"],[1,"cal-events-container"],["class","cal-event-container","mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",3,"cal-draggable","cal-starts-within-day","cal-ends-within-day","ngClass","hidden","top","height","left","width","resizeCursors","resizeSnapGrid","validateResize","allowNegativeResizes","dropData","dragAxis","dragSnapGrid","touchStartLongPress","ghostDragEnabled","ghostElementTemplate","validateDrag","resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd",4,"ngFor","ngForOf","ngForTrackBy"],["mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event-container",3,"ngClass","hidden","resizeCursors","resizeSnapGrid","validateResize","allowNegativeResizes","dropData","dragAxis","dragSnapGrid","touchStartLongPress","ghostDragEnabled","ghostElementTemplate","validateDrag","resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd"],[3,"ngTemplateOutlet"],["weekEventTemplate",""],[3,"locale","weekEvent","tooltipPlacement","tooltipTemplate","tooltipAppendToBody","tooltipDisabled","tooltipDelay","customTemplate","eventTitleTemplate","eventActionsTemplate","column","daysInWeek","eventClicked"],["mwlDroppable","","dragActiveClass","cal-drag-active",3,"height","segment","segmentHeight","locale","customTemplate","daysInWeek","clickListenerDisabled","dragOverClass","isTimeLabel","mwlClick","drop","dragEnter",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragActiveClass","cal-drag-active",3,"segment","segmentHeight","locale","customTemplate","daysInWeek","clickListenerDisabled","dragOverClass","isTimeLabel","mwlClick","drop","dragEnter"]],template:function(e,i){1&e&&(a.TgZ(0,"div",0)(1,"mwl-calendar-week-view-header",1),a.NdJ("dayHeaderClicked",function(s){return i.dayHeaderClicked.emit(s)})("eventDropped",function(s){return i.eventDropped({dropData:s},s.newStart,!0)})("dragEnter",function(s){return i.dateDragEnter(s.date)}),a.qZA(),a.YNc(2,Jse,6,5,"div",2),a.TgZ(3,"div",3),a.NdJ("dragEnter",function(){return i.dragEnter("time")})("dragLeave",function(){return i.dragLeave("time")}),a.YNc(4,toe,2,2,"div",4),a.TgZ(5,"div",5,6),a.YNc(7,hoe,5,13,"div",7),a.qZA()()()),2&e&&(a.xp6(1),a.Q6J("days",i.days)("locale",i.locale)("customTemplate",i.headerTemplate),a.xp6(1),a.Q6J("ngIf",i.view.allDayEventRows.length>0),a.xp6(2),a.Q6J("ngIf",i.view.hourColumns.length>0&&1!==i.daysInWeek),a.xp6(1),a.ekj("cal-resize-active",i.timeEventResizes.size>0),a.xp6(2),a.Q6J("ngForOf",i.view.hourColumns)("ngForTrackBy",i.trackByHourColumn))},dependencies:[as,Qi,Mi,Ji,t4,Yre,QB,JB,Ey,Poe,Foe,Loe,Boe],encapsulation:2}),n})(),oV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[zn,n4,AO,i1,n4,AO]}),n})(),Voe=(()=>{class n{constructor(){this.events=[],this.hourSegments=2,this.hourSegmentHeight=30,this.minimumEventHeight=30,this.dayStartHour=0,this.dayStartMinute=0,this.dayEndHour=23,this.dayEndMinute=59,this.tooltipPlacement="auto",this.tooltipAppendToBody=!0,this.tooltipDelay=null,this.snapDraggedEvents=!0,this.eventClicked=new a.vpe,this.hourSegmentClicked=new a.vpe,this.eventTimesChanged=new a.vpe,this.beforeViewRender=new a.vpe}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["mwl-calendar-day-view"]],inputs:{viewDate:"viewDate",events:"events",hourSegments:"hourSegments",hourSegmentHeight:"hourSegmentHeight",hourDuration:"hourDuration",minimumEventHeight:"minimumEventHeight",dayStartHour:"dayStartHour",dayStartMinute:"dayStartMinute",dayEndHour:"dayEndHour",dayEndMinute:"dayEndMinute",refresh:"refresh",locale:"locale",eventSnapSize:"eventSnapSize",tooltipPlacement:"tooltipPlacement",tooltipTemplate:"tooltipTemplate",tooltipAppendToBody:"tooltipAppendToBody",tooltipDelay:"tooltipDelay",hourSegmentTemplate:"hourSegmentTemplate",eventTemplate:"eventTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",snapDraggedEvents:"snapDraggedEvents",allDayEventsLabelTemplate:"allDayEventsLabelTemplate",currentTimeMarkerTemplate:"currentTimeMarkerTemplate",validateEventTimesChanged:"validateEventTimesChanged",resizeCursors:"resizeCursors"},outputs:{eventClicked:"eventClicked",hourSegmentClicked:"hourSegmentClicked",eventTimesChanged:"eventTimesChanged",beforeViewRender:"beforeViewRender"},decls:1,vars:27,consts:[[1,"cal-day-view",3,"daysInWeek","viewDate","events","hourSegments","hourDuration","hourSegmentHeight","minimumEventHeight","dayStartHour","dayStartMinute","dayEndHour","dayEndMinute","refresh","locale","eventSnapSize","tooltipPlacement","tooltipTemplate","tooltipAppendToBody","tooltipDelay","resizeCursors","hourSegmentTemplate","eventTemplate","eventTitleTemplate","eventActionsTemplate","snapDraggedEvents","allDayEventsLabelTemplate","currentTimeMarkerTemplate","validateEventTimesChanged","eventClicked","hourSegmentClicked","eventTimesChanged","beforeViewRender"]],template:function(e,i){1&e&&(a.TgZ(0,"mwl-calendar-week-view",0),a.NdJ("eventClicked",function(s){return i.eventClicked.emit(s)})("hourSegmentClicked",function(s){return i.hourSegmentClicked.emit(s)})("eventTimesChanged",function(s){return i.eventTimesChanged.emit(s)})("beforeViewRender",function(s){return i.beforeViewRender.emit(s)}),a.qZA()),2&e&&a.Q6J("daysInWeek",1)("viewDate",i.viewDate)("events",i.events)("hourSegments",i.hourSegments)("hourDuration",i.hourDuration)("hourSegmentHeight",i.hourSegmentHeight)("minimumEventHeight",i.minimumEventHeight)("dayStartHour",i.dayStartHour)("dayStartMinute",i.dayStartMinute)("dayEndHour",i.dayEndHour)("dayEndMinute",i.dayEndMinute)("refresh",i.refresh)("locale",i.locale)("eventSnapSize",i.eventSnapSize)("tooltipPlacement",i.tooltipPlacement)("tooltipTemplate",i.tooltipTemplate)("tooltipAppendToBody",i.tooltipAppendToBody)("tooltipDelay",i.tooltipDelay)("resizeCursors",i.resizeCursors)("hourSegmentTemplate",i.hourSegmentTemplate)("eventTemplate",i.eventTemplate)("eventTitleTemplate",i.eventTitleTemplate)("eventActionsTemplate",i.eventActionsTemplate)("snapDraggedEvents",i.snapDraggedEvents)("allDayEventsLabelTemplate",i.allDayEventsLabelTemplate)("currentTimeMarkerTemplate",i.currentTimeMarkerTemplate)("validateEventTimesChanged",i.validateEventTimesChanged)},dependencies:[g4],encapsulation:2}),n})(),m4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[zn,i1,oV]}),n})(),Uoe=(()=>{class n{static forRoot(e,i={}){return{ngModule:n,providers:[e,i.eventTitleFormatter||eV,i.dateFormatter||OO,i.utils||kO,i.a11y||RO]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[i1,p4,oV,m4,i1,p4,oV,m4]}),n})();const Ty=void 0,_4=["en",[["a","p"],["AM","PM"],Ty],[["AM","PM"],Ty,Ty],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ty,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ty,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ty,"{1} 'at' {0}",Ty],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Hoe(n){const e=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===i?1:5}],joe=["modalContent"];function Goe(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"mwl-calendar-month-view",10),a.NdJ("dayClicked",function(r){a.CHM(e);const s=a.oxw();return a.KtG(s.dayClicked(r.day))}),a.qZA()}if(2&n){const e=a.oxw();a.Q6J("locale",e.locale)("viewDate",e.viewDate)("events",e.events)("refresh",e.refresh)("activeDayIsOpen",e.activeDayIsOpen)}}function $oe(n,t){if(1&n&&a._UZ(0,"mwl-calendar-week-view",11),2&n){const e=a.oxw();a.Q6J("locale",e.locale)("viewDate",e.viewDate)("events",e.events)("refresh",e.refresh)}}function zoe(n,t){if(1&n&&a._UZ(0,"mwl-calendar-day-view",11),2&n){const e=a.oxw();a.Q6J("locale",e.locale)("viewDate",e.viewDate)("events",e.events)("refresh",e.refresh)}}Bs(_4);const PO_red={primary:"#ad2121",secondary:"#FAE3E3"},PO_blue={primary:"#1e90ff",secondary:"#D1E8FF"},PO_yellow={primary:"#e3bc08",secondary:"#FDF1BA"};let v4=(()=>{class n{constructor(e,i,r){this.modal=e,this.storageService=i,this.apiService=r,this.locale="en",this.view=Yf.Month,this.CalendarView=Yf,this.viewDate=new Date,this.refresh=new Qt.x,this.events=[{start:ZS(Cu(new Date),1),end:wy(new Date,1),title:"A 3 day event",color:{...PO_red},allDay:!0},{start:Cu(new Date),title:"An event with no end date",color:{...PO_yellow}},{start:ZS(KS(new Date),3),end:wy(KS(new Date),3),title:"A long event that spans 2 months",color:{...PO_blue},allDay:!0},{start:QS(Cu(new Date),2),end:QS(new Date,2),title:"A draggable and resizable event",color:{...PO_yellow}}],this.appointment_list=[],this.activeDayIsOpen=!0;var s=i.SessionGetStorage("uid");r.getAppointments(s).then(l=>{this.appointment_list=l,console.log(this.appointment_list)})}dayClicked({date:e,events:i}){FB(e,this.viewDate)&&(this.activeDayIsOpen=!(LB(this.viewDate,e)&&!0===this.activeDayIsOpen||0===i.length),this.viewDate=e)}setView(e){this.view=e}closeOpenMonthViewDay(){this.activeDayIsOpen=!1}static#e=this.\u0275fac=function(i){return new(i||n)(a.Y36(oB),a.Y36(YS),a.Y36(bO))};static#t=this.\u0275cmp=a.Xpm({type:n,selectors:[["app-visual-appointments"]],viewQuery:function(i,r){if(1&i&&a.Gf(joe,7),2&i){let s;a.iGM(s=a.CRH())&&(r.modalContent=s.first)}},decls:27,vars:20,consts:[[1,"row","text-center"],[1,"col-md-4"],[1,"btn-group"],["mwlCalendarPreviousView","",1,"btn","btn-dark",3,"view","viewDate","viewDateChange"],["mwlCalendarToday","",1,"btn","btn-outline-secondary",3,"viewDate","viewDateChange"],["mwlCalendarNextView","",1,"btn","btn-dark",3,"view","viewDate","viewDateChange"],[1,"btn","btn-dark",3,"click"],[3,"ngSwitch"],[3,"locale","viewDate","events","refresh","activeDayIsOpen","dayClicked",4,"ngSwitchCase"],[3,"locale","viewDate","events","refresh",4,"ngSwitchCase"],[3,"locale","viewDate","events","refresh","activeDayIsOpen","dayClicked"],[3,"locale","viewDate","events","refresh"]],template:function(i,r){1&i&&(a._UZ(0,"br"),a.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3),a.NdJ("viewDateChange",function(l){return r.viewDate=l})("viewDateChange",function(){return r.closeOpenMonthViewDay()}),a._uU(5," Previous "),a.qZA(),a.TgZ(6,"div",4),a.NdJ("viewDateChange",function(l){return r.viewDate=l}),a._uU(7," Today "),a.qZA(),a.TgZ(8,"div",5),a.NdJ("viewDateChange",function(l){return r.viewDate=l})("viewDateChange",function(){return r.closeOpenMonthViewDay()}),a._uU(9," Next "),a.qZA()()(),a.TgZ(10,"div",1)(11,"h3"),a._uU(12),a.ALo(13,"calendarDate"),a.qZA()(),a.TgZ(14,"div",1)(15,"div",2)(16,"div",6),a.NdJ("click",function(){return r.setView(r.CalendarView.Month)}),a._uU(17," Month "),a.qZA(),a.TgZ(18,"div",6),a.NdJ("click",function(){return r.setView(r.CalendarView.Week)}),a._uU(19," Week "),a.qZA(),a.TgZ(20,"div",6),a.NdJ("click",function(){return r.setView(r.CalendarView.Day)}),a._uU(21," Day "),a.qZA()()()(),a._UZ(22,"br"),a.TgZ(23,"div",7),a.YNc(24,Goe,1,5,"mwl-calendar-month-view",8),a.YNc(25,$oe,1,4,"mwl-calendar-week-view",9),a.YNc(26,zoe,1,4,"mwl-calendar-day-view",9),a.qZA()),2&i&&(a.xp6(4),a.Q6J("view",r.view)("viewDate",r.viewDate),a.xp6(2),a.Q6J("viewDate",r.viewDate),a.xp6(2),a.Q6J("view",r.view)("viewDate",r.viewDate),a.xp6(4),a.Oqu(a.Dn7(13,16,r.viewDate,r.view+"ViewTitle","en")),a.xp6(4),a.ekj("active",r.view===r.CalendarView.Month),a.xp6(2),a.ekj("active",r.view===r.CalendarView.Week),a.xp6(2),a.ekj("active",r.view===r.CalendarView.Day),a.xp6(3),a.Q6J("ngSwitch",r.view),a.xp6(1),a.Q6J("ngSwitchCase",r.CalendarView.Month),a.xp6(1),a.Q6J("ngSwitchCase",r.CalendarView.Week),a.xp6(1),a.Q6J("ngSwitchCase",r.CalendarView.Day))},dependencies:[Pa,Su,Coe,Toe,Ioe,Roe,g4,Voe,n1]})}return n})(),Woe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=a.Xpm({type:n,selectors:[["app-dashboard"]],decls:2,vars:0,consts:[[2,"height","20%"]],template:function(i,r){1&i&&(a.TgZ(0,"div",0),a._UZ(1,"app-visual-appointments"),a.qZA())},dependencies:[v4]})}return n})();const qoe=["modalContent"];function Yoe(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"tr")(1,"td")(2,"input",6),a.NdJ("ngModelChange",function(r){const l=a.CHM(e).$implicit;return a.KtG(l.title=r)})("keyup",function(){a.CHM(e);const r=a.oxw();return a.KtG(r.refresh.next())}),a.qZA()(),a.TgZ(3,"td")(4,"input",7),a.NdJ("ngModelChange",function(r){const l=a.CHM(e).$implicit;return a.KtG(l.start=r)})("ngModelChange",function(){a.CHM(e);const r=a.oxw();return a.KtG(r.refresh.next())}),a.qZA()(),a.TgZ(5,"td")(6,"input",8),a.NdJ("ngModelChange",function(r){const l=a.CHM(e).$implicit;return a.KtG(l.end=r)})("ngModelChange",function(){a.CHM(e);const r=a.oxw();return a.KtG(r.refresh.next())}),a.qZA()(),a.TgZ(7,"td")(8,"input",6),a.NdJ("ngModelChange",function(r){const l=a.CHM(e).$implicit;return a.KtG(l.title=r)})("keyup",function(){a.CHM(e);const r=a.oxw();return a.KtG(r.refresh.next())}),a.qZA()(),a.TgZ(9,"td")(10,"button",9),a._uU(11," Delete "),a.qZA()()()}if(2&n){const e=t.$implicit,i=a.oxw();a.xp6(2),a.Q6J("ngModel",e.title),a.xp6(2),a.Q6J("locale",i.locale)("ngModel",e.start)("altInput",!0)("convertModelValue",!0)("enableTime",!0),a.xp6(2),a.Q6J("ngModel",e.end)("altInput",!0)("convertModelValue",!0)("enableTime",!0),a.xp6(2),a.Q6J("ngModel",e.title)}}Bs(_4);const FO_red={primary:"#ad2121",secondary:"#FAE3E3"},FO_blue={primary:"#1e90ff",secondary:"#D1E8FF"},FO_yellow={primary:"#e3bc08",secondary:"#FDF1BA"};let Zoe=(()=>{class n{constructor(e){this.modal=e,this.locale="en",this.view=Yf.Month,this.CalendarView=Yf,this.viewDate=new Date,this.refresh=new Qt.x,this.events=[{start:ZS(Cu(new Date),1),end:wy(new Date,1),title:"A 3 day event",color:{...FO_red},allDay:!0},{start:Cu(new Date),title:"An event with no end date",color:{...FO_yellow}},{start:ZS(KS(new Date),3),end:wy(KS(new Date),3),title:"A long event that spans 2 months",color:{...FO_blue},allDay:!0},{start:QS(Cu(new Date),2),end:QS(new Date,2),title:"A draggable and resizable event",color:{...FO_yellow}}],this.activeDayIsOpen=!0}dayClicked({date:e,events:i}){FB(e,this.viewDate)&&(this.activeDayIsOpen=!(LB(this.viewDate,e)&&!0===this.activeDayIsOpen||0===i.length),this.viewDate=e)}setView(e){this.view=e}closeOpenMonthViewDay(){this.activeDayIsOpen=!1}static#e=this.\u0275fac=function(i){return new(i||n)(a.Y36(oB))};static#t=this.\u0275cmp=a.Xpm({type:n,selectors:[["app-controller-appointments"]],viewQuery:function(i,r){if(1&i&&a.Gf(qoe,7),2&i){let s;a.iGM(s=a.CRH())&&(r.modalContent=s.first)}},decls:22,vars:1,consts:[[1,"button-84-normal","float-end"],[1,"button-84-success","float-end",2,"margin-right","10px"],[1,"clearfix"],[1,"table-responsive"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],["type","text",1,"form-control",3,"ngModel","ngModelChange","keyup"],["type","text","mwlFlatpickr","","dateFormat","Y-m-dTH:i","altFormat","F j, Y H:i","placeholder","Not set",1,"form-control",3,"locale","ngModel","altInput","convertModelValue","enableTime","ngModelChange"],["type","text","mwlFlatpickr","","dateFormat","Y-m-dTH:i","altFormat","F j, Y H:i","placeholder","Not set",1,"form-control",3,"ngModel","altInput","convertModelValue","enableTime","ngModelChange"],[1,"button-84-failure"]],template:function(i,r){1&i&&(a.TgZ(0,"h3")(1,"strong"),a._uU(2,"Edit Appointments"),a.qZA(),a.TgZ(3,"button",0),a._uU(4," Add new "),a.qZA(),a.TgZ(5,"button",1),a._uU(6," Save "),a.qZA(),a._UZ(7,"div",2),a.qZA(),a.TgZ(8,"div",3)(9,"table",4)(10,"thead")(11,"tr")(12,"th"),a._uU(13,"Name"),a.qZA(),a.TgZ(14,"th"),a._uU(15,"Begins"),a.qZA(),a.TgZ(16,"th"),a._uU(17,"Ends"),a.qZA(),a.TgZ(18,"th"),a._uU(19,"Pet"),a.qZA()()(),a.TgZ(20,"tbody"),a.YNc(21,Yoe,12,11,"tr",5),a.qZA()()()),2&i&&(a.xp6(21),a.Q6J("ngForOf",r.events))},dependencies:[Qi,KG,nS,LL,qL],styles:[".button-84-normal[_ngcontent-%COMP%]{align-items:center;background-color:initial;background-image:linear-gradient(rgb(0,0,0),rgba(0,0,0,.664));border-radius:8px;border-width:0;box-sizing:border-box;color:#fff;cursor:pointer;display:inline-flex;flex-direction:column;font-family:ITCAvantGardeStd-Bk,Arial,sans-serif;font-size:18px;height:40px;justify-content:center;line-height:1;margin:0;outline:none;overflow:hidden;padding:0 32px;text-align:center;text-decoration:none;transform:translateZ(0);transition:all .15s;vertical-align:baseline;white-space:nowrap;user-select:none;-webkit-user-select:none;touch-action:manipulation}.button-84-normal[_ngcontent-%COMP%]:hover{box-shadow:#000 0 2px 8px;opacity:.85}.button-84-normal[_ngcontent-%COMP%]:active{outline:0}.button-84-normal[_ngcontent-%COMP%]:focus{box-shadow:#000 0 0 0 3px}.button-84-success[_ngcontent-%COMP%]{align-items:center;background-color:initial;background-image:linear-gradient(rgb(22,102,22),rgba(20,85,11,.664));border-radius:8px;border-width:0;box-sizing:border-box;color:#fff;cursor:pointer;display:inline-flex;flex-direction:column;font-family:ITCAvantGardeStd-Bk,Arial,sans-serif;font-size:18px;height:40px;justify-content:center;line-height:1;margin:0;outline:none;overflow:hidden;padding:0 32px;text-align:center;text-decoration:none;transform:translateZ(0);transition:all .15s;vertical-align:baseline;white-space:nowrap;user-select:none;-webkit-user-select:none;touch-action:manipulation}.button-84-success[_ngcontent-%COMP%]:hover{box-shadow:#0d3b0d 0 2px 8px;opacity:.85}.button-84-success[_ngcontent-%COMP%]:active{outline:0}.button-84-success[_ngcontent-%COMP%]:focus{box-shadow:#166616 0 0 0 3px}.button-84-failure[_ngcontent-%COMP%]{align-items:center;background-color:initial;background-image:linear-gradient(rgb(177,35,35),rgb(151,14,14));border-radius:8px;border-width:0;box-sizing:border-box;color:#fff;cursor:pointer;display:inline-flex;flex-direction:column;font-family:ITCAvantGardeStd-Bk,Arial,sans-serif;font-size:18px;height:40px;justify-content:center;line-height:1;margin:0;outline:none;overflow:hidden;padding:0 32px;text-align:center;text-decoration:none;transform:translateZ(0);transition:all .15s;vertical-align:baseline;white-space:nowrap;user-select:none;-webkit-user-select:none;touch-action:manipulation}.button-84-failure[_ngcontent-%COMP%]:hover{box-shadow:#b12323 0 2px 8px;opacity:.85}.button-84-failure[_ngcontent-%COMP%]:active{outline:0}.button-84-failure[_ngcontent-%COMP%]:focus{box-shadow:#b12323 0 0 0 3px}@media (max-width: 420px){.button-84[_ngcontent-%COMP%]{height:48px}}"]})}return n})();const Koe=[{path:"",component:ure},{path:"dashboard",component:Woe},{path:"appointments",component:(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=a.Xpm({type:n,selectors:[["app-appointments"]],decls:2,vars:0,template:function(i,r){1&i&&a._UZ(0,"app-visual-appointments")(1,"app-controller-appointments")},dependencies:[Zoe,v4]})}return n})()},{path:"clients",component:(()=>{class n{constructor(e,i,r){this.router=e,this.apiService=i,this.storageService=r,this.showData()}showData(){var e=this.storageService.SessionGetStorage("uid");this.apiService.getClients(e).then(function(i){const r=document.getElementById("clientName1"),s=i[0];r&&void 0!==s.name&&(r.innerHTML=s.name+" "+s.surnames);const l=document.getElementById("clientName2"),d=i[1];l&&void 0!==d.name&&(l.innerHTML=d.name+" "+d.surnames)})}onKeyDown(e){"Enter"===e.key&&e.target instanceof HTMLInputElement&&(alert("Searching client..."),this.router.navigate(["clients/client"],{queryParams:{uid:""}}))}redirectClientPage(e){this.router.navigate(["clients/client"],{queryParams:{uid:""}})}static#e=this.\u0275fac=function(i){return new(i||n)(a.Y36(Bo),a.Y36(bO),a.Y36(YS))};static#t=this.\u0275cmp=a.Xpm({type:n,selectors:[["app-clients-page"]],decls:42,vars:0,consts:[[1,"module"],["id","searchClient","type","text","placeholder","John Doe",1,"searchBar",3,"keydown"],[2,"margin-right","-20px"],[1,"whiteButton",3,"click"],[2,"column-count","2"],["src","/assets/img/userProfileImage.jpg",2,"width","200px"],[2,"text-align","left"],["id","clientName1",2,"font-weight","bold"],["id","client1PetsName"],["id","client1LastVisit"],[1,"whiteButton"],["id","clientName2",2,"font-weight","bold"]],template:function(i,r){1&i&&(a.TgZ(0,"div")(1,"h1"),a._uU(2,"Clients"),a.qZA()(),a.TgZ(3,"div",0)(4,"h2"),a._uU(5,"Search clients"),a.qZA(),a.TgZ(6,"input",1),a.NdJ("keydown",function(l){return r.onKeyDown(l)}),a.qZA()(),a.TgZ(7,"div",0)(8,"h2"),a._uU(9,"Recent clients"),a.qZA(),a.TgZ(10,"table",2)(11,"tr")(12,"th")(13,"button",3),a.NdJ("click",function(l){return r.redirectClientPage(l)}),a.TgZ(14,"div",4)(15,"div"),a._UZ(16,"img",5),a.qZA(),a.TgZ(17,"div",6),a._UZ(18,"p",7),a.TgZ(19,"ul")(20,"li"),a._uU(21,"Pets: "),a._UZ(22,"span",8),a.qZA(),a.TgZ(23,"li"),a._uU(24,"Last visit: "),a._UZ(25,"span",9),a.qZA()()()()()(),a.TgZ(26,"th")(27,"button",10)(28,"div",4)(29,"div"),a._UZ(30,"img",5),a.qZA(),a.TgZ(31,"div",6),a._UZ(32,"p",11),a.TgZ(33,"ul")(34,"li"),a._uU(35,"Pets: Tobby, Rex, Mierd\xf3n"),a.qZA(),a.TgZ(36,"li"),a._uU(37,"Last visit: 10/11/2023"),a.qZA()()()()()()()(),a._UZ(38,"br")(39,"br")(40,"br")(41,"br"),a.qZA())},styles:[".searchBar[_ngcontent-%COMP%]{width:100%;border-radius:20px;padding:5px;border-color:transparent;background-image:url(/assets/img/searchIco.png);background-size:20px;background-repeat:no-repeat;background-position:right center}.whiteButton[_ngcontent-%COMP%]{border-color:transparent;background-color:#fff;padding:20px;border-radius:20px;width:480px;margin-right:50px;box-shadow:#959da533 0 8px 24px}.whiteButton[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:20px}"]})}return n})()},{path:"clients/client",component:(()=>{class n{constructor(e,i){this.router=e,this.apiService=i}redirectPetPage(e){this.router.navigate(["clients/pet"],{queryParams:{uid:"1234"}})}static#e=this.\u0275fac=function(i){return new(i||n)(a.Y36(Bo),a.Y36(bO))};static#t=this.\u0275cmp=a.Xpm({type:n,selectors:[["app-client-single-page"]],decls:68,vars:0,consts:[[1,"module",2,"column-count","2"],[1,"info-container"],[2,"column-count","2"],["for","clientName"],["id","clientName"],["for","clientSName"],["id","clientSName"],["for","clientPhone"],["id","clientPhone"],["for","clientMail"],["id","clientMail"],[1,"module",2,"padding-right","20px"],[2,"text-align","justify"],["src","/assets/img/userProfileImage.jpg",2,"width","400px"],[1,"module"],[1,"image-container",3,"click"],["src","/assets/img/dogImage1.jpg","alt","Pet"],[1,"overlay"],["src","/assets/img/dogImage2.jpg","alt","Pet"],["src","/assets/img/dogImage3.jpg","alt","Pet"]],template:function(i,r){1&i&&(a.TgZ(0,"div")(1,"h1"),a._uU(2,"John Doe"),a.qZA()(),a.TgZ(3,"div",0)(4,"h2"),a._uU(5,"Personal information"),a.qZA(),a.TgZ(6,"div",1)(7,"div",2)(8,"div")(9,"label",3)(10,"b"),a._uU(11,"Name:"),a.qZA()(),a.TgZ(12,"span",4),a._uU(13," John"),a.qZA(),a._UZ(14,"br"),a.TgZ(15,"label",5)(16,"b"),a._uU(17,"Surname:"),a.qZA()(),a.TgZ(18,"span",6),a._uU(19," Doe"),a.qZA(),a._UZ(20,"br"),a.TgZ(21,"label",7)(22,"b"),a._uU(23,"Phone:"),a.qZA()(),a.TgZ(24,"span",8),a._uU(25," 660322455"),a.qZA(),a._UZ(26,"br"),a.qZA(),a.TgZ(27,"div")(28,"label",9)(29,"b"),a._uU(30,"Email:"),a.qZA()(),a.TgZ(31,"span",10),a._uU(32," johndoe@mail.com"),a.qZA(),a._UZ(33,"br"),a.TgZ(34,"label",7)(35,"b"),a._uU(36,"Address:"),a.qZA()(),a.TgZ(37,"span",8),a._uU(38," C/ Medell\xedn n69, Albacete, 05423"),a.qZA(),a._UZ(39,"br"),a.qZA()(),a.TgZ(40,"div",11)(41,"h2"),a._uU(42,"Client resume"),a.qZA(),a.TgZ(43,"p",12),a._uU(44,"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam et condimentum purus, in tincidunt erat. "),a._UZ(45,"br")(46,"br"),a._uU(47," Sed in suscipit dui. Nulla scelerisque, orci vitae volutpat tincidunt, lectus magna suscipit mauris. "),a.qZA()()(),a.TgZ(48,"div"),a._UZ(49,"img",13),a.qZA()(),a.TgZ(50,"div",14)(51,"h2"),a._uU(52,"Pets"),a.qZA(),a.TgZ(53,"div",15),a.NdJ("click",function(l){return r.redirectPetPage(l)}),a._UZ(54,"img",16),a.TgZ(55,"div",17)(56,"p"),a._uU(57,"Tobby"),a.qZA()()(),a.TgZ(58,"div",15),a.NdJ("click",function(l){return r.redirectPetPage(l)}),a._UZ(59,"img",18),a.TgZ(60,"div",17)(61,"p"),a._uU(62,"Rex"),a.qZA()()(),a.TgZ(63,"div",15),a.NdJ("click",function(l){return r.redirectPetPage(l)}),a._UZ(64,"img",19),a.TgZ(65,"div",17)(66,"p"),a._uU(67,"Mierd\xf3n"),a.qZA()()()())},styles:["body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;margin:0;padding:0}img[_ngcontent-%COMP%]{border-radius:20px}.image-container[_ngcontent-%COMP%]{position:relative;display:inline-block;margin-right:50px}.overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;text-align:center;color:#fff;border-radius:20px}.overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px;font-weight:700}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:278px;height:178px}.image-container[_ngcontent-%COMP%]:hover   .overlay[_ngcontent-%COMP%]{transform:scale(1.1)}.image-container[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.1);transition:transform .3s}.overlay[_ngcontent-%COMP%]{transform:scale(1);transition:transform .3s}"]})}return n})()},{path:"clients/pet",component:(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=a.Xpm({type:n,selectors:[["app-pet-single-page"]],decls:52,vars:0,consts:[[1,"module",2,"column-count","2"],[1,"info-container"],[2,"column-count","2"],["for","petName"],["id","petName"],["for","petBirth"],["id","petBirth"],["for","petTypeBreed"],["id","petTypeBreed"],["for","petWeight"],["id","petWeight"],["for","petHeight"],["id","petHeight"],[1,"module",2,"padding-right","20px"],[2,"text-align","justify"],["src","/assets/img/dogImage3.jpg",2,"width","400px"],[1,"module"],[1,"image-container"],["id","chart_div",2,"width","900px","height","500px"]],template:function(i,r){1&i&&(a.TgZ(0,"div")(1,"h1"),a._uU(2,"Mierd\xf3n"),a.qZA()(),a.TgZ(3,"div",0)(4,"h2"),a._uU(5,"Personal information"),a.qZA(),a.TgZ(6,"div",1)(7,"div",2)(8,"div")(9,"label",3)(10,"b"),a._uU(11,"Name:"),a.qZA()(),a.TgZ(12,"span",4),a._uU(13," Mierd\xf3n"),a.qZA(),a._UZ(14,"br"),a.TgZ(15,"label",5)(16,"b"),a._uU(17,"Bith date:"),a.qZA()(),a.TgZ(18,"span",6),a._uU(19," 17/10/2020"),a.qZA(),a._UZ(20,"br"),a.TgZ(21,"label",7)(22,"b"),a._uU(23,"Type:"),a.qZA()(),a.TgZ(24,"span",8),a._uU(25," Dog, border collin"),a.qZA(),a._UZ(26,"br"),a.qZA(),a.TgZ(27,"div")(28,"label",9)(29,"b"),a._uU(30,"Weight:"),a.qZA()(),a.TgZ(31,"span",10),a._uU(32," 200g"),a.qZA(),a._UZ(33,"br"),a.TgZ(34,"label",11)(35,"b"),a._uU(36,"Height:"),a.qZA()(),a.TgZ(37,"span",12),a._uU(38," 180cm"),a.qZA(),a._UZ(39,"br"),a.qZA()(),a.TgZ(40,"div",13)(41,"h2"),a._uU(42,"Pet resume"),a.qZA(),a.TgZ(43,"p",14),a._uU(44,"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam et condimentum purus, in tincidunt erat. "),a.qZA()()(),a.TgZ(45,"div"),a._UZ(46,"img",15),a.qZA()(),a.TgZ(47,"div",16)(48,"h2"),a._uU(49,"Statistics"),a.qZA(),a._UZ(50,"div",17)(51,"div",18),a.qZA())},styles:["body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;margin:0;padding:0}img[_ngcontent-%COMP%]{border-radius:20px}.image-container[_ngcontent-%COMP%]{position:relative;display:inline-block;margin-right:50px}.overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;text-align:center;color:#fff;border-radius:20px}.overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px;font-weight:700}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:278px;height:178px}.image-container[_ngcontent-%COMP%]:hover   .overlay[_ngcontent-%COMP%]{transform:scale(1.1)}.image-container[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.1);transition:transform .3s}.overlay[_ngcontent-%COMP%]{transform:scale(1);transition:transform .3s}"]})}return n})()}];let Qoe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=a.oAB({type:n});static#n=this.\u0275inj=a.cJS({imports:[Fz.forRoot(Koe),Fz]})}return n})();const Joe=[[["","icon",""]],"*"],Xoe=["[icon]","*"];let eae=(()=>{class n{constructor(){this.routerLinkActiveOptions={exact:!1}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=a.Xpm({type:n,selectors:[["app-sidenav-link"]],inputs:{routerLink:"routerLink",routerLinkActiveOptions:"routerLinkActiveOptions"},ngContentSelectors:Xoe,decls:5,vars:2,consts:[["routerLinkActive","active",3,"routerLink","routerLinkActiveOptions"],[1,"text-container"]],template:function(i,r){1&i&&(a.F$t(Joe),a.TgZ(0,"a",0)(1,"span"),a.Hsn(2),a.qZA(),a.TgZ(3,"span",1),a.Hsn(4,1),a.qZA()()),2&i&&a.Q6J("routerLink",r.routerLink)("routerLinkActiveOptions",r.routerLinkActiveOptions)},dependencies:[qS,Az],styles:["a[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;gap:8px;min-width:200px;padding:16px;background-color:#2d6f28;font-weight:700;color:#afeebb;box-sizing:border-box;text-decoration:none;border-radius:0;transition:background-color 275ms ease-out}a[_ngcontent-%COMP%]   .text-container[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}a.active[_ngcontent-%COMP%]{background-color:#2d6f28;font-weight:700;color:#afeebb}a.inactive[_ngcontent-%COMP%]{background-color:#afeebb;font-weight:700;color:#2d6f28}a[_ngcontent-%COMP%]:hover{background-color:#afeebb;color:#2d6f28}"]})}return n})(),tae=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=a.Xpm({type:n,selectors:[["app-header"]],decls:6,vars:0,consts:[["id","header"],[2,"display","grid"],[1,"hTittle"],[2,"text-align","right","padding-right","40px"],["src","/assets/user-icon.png","alt",""]],template:function(i,r){1&i&&(a.TgZ(0,"div",0)(1,"div",1)(2,"span",2),a._uU(3," PetGuardian "),a.qZA()(),a.TgZ(4,"div",3),a._UZ(5,"img",4),a.qZA()())}})}return n})();function nae(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div"),a._UZ(1,"app-header"),a.TgZ(2,"app-sidenav-link",1)(3,"span"),a._uU(4,"Home"),a.qZA()(),a.TgZ(5,"app-sidenav-link",2)(6,"span"),a._uU(7,"Appointments"),a.qZA()(),a.TgZ(8,"app-sidenav-link",3)(9,"span"),a._uU(10,"Clients"),a.qZA()(),a.TgZ(11,"app-sidenav-link",4),a.NdJ("click",function(){a.CHM(e);const r=a.oxw();return a.KtG(r.logout())}),a.TgZ(12,"span"),a._uU(13,"Logout "),a.qZA()()()}}let iae=(()=>{class n{constructor(e,i,r){this.afAuth=e,this.router=i,this.storageService=r,this.isLoggedIn$=this.storageService.isLoggedIn,this.subscription=this.storageService.isLoggedIn.subscribe(s=>{0==s&&this.router.navigate(["/"])})}logout(){this.afAuth.signOut().then(()=>{this.storageService.isLoggedNext(!1),this.router.navigate(["/"])})}static#e=this.\u0275fac=function(i){return new(i||n)(a.Y36(ld),a.Y36(Bo),a.Y36(YS))};static#t=this.\u0275cmp=a.Xpm({type:n,selectors:[["app-side-nav"]],decls:2,vars:3,consts:[[4,"ngIf"],["routerLink","dashboard"],["routerLink","appointments"],["routerLink","clients"],["routerLink","client",3,"click"]],template:function(i,r){1&i&&(a.YNc(0,nae,14,0,"div",0),a.ALo(1,"async")),2&i&&a.Q6J("ngIf",a.lcZ(1,1,r.isLoggedIn$))},dependencies:[Mi,qS,eae,tae,La],styles:["[_nghost-%COMP%]{height:100vh;width:var(--sidenav-width);box-sizing:border-box;position:sticky;top:0;background-color:#2d6f28}"]})}return n})(),rae=(()=>{class n{constructor(){this.title="petguardian-web"}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=a.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"content"]],template:function(i,r){1&i&&(a._UZ(0,"app-side-nav"),a.TgZ(1,"div",0),a._UZ(2,"router-outlet"),a.qZA())},dependencies:[IB,iae],styles:["[_ngcontent-%COMP%]:root{--sidenav-width: 300px}[_nghost-%COMP%]{min-height:100vh;display:flex;flex-direction:row}.content[_ngcontent-%COMP%]{flex-grow:1;padding:20px;background-color:#ededed}"]})}return n})();var y4=L(7582),sae=6e4;function oae(n,t){return pn(2,arguments),PB(n,po(t)*sae)}function aae(n,t){return pn(2,arguments),PB(n,1e3*po(t))}function w4(n){var t=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return t.setUTCFullYear(n.getFullYear()),n.getTime()-t.getTime()}var lae=864e5;function b4(n,t){var e=n.getFullYear()-t.getFullYear()||n.getMonth()-t.getMonth()||n.getDate()-t.getDate()||n.getHours()-t.getHours()||n.getMinutes()-t.getMinutes()||n.getSeconds()-t.getSeconds()||n.getMilliseconds()-t.getMilliseconds();return e<0?-1:e>0?1:e}function uae(n,t){pn(2,arguments);var e=ni(n),i=ni(t),r=b4(e,i),s=Math.abs(function cae(n,t){pn(2,arguments);var e=Cu(n),i=Cu(t),r=e.getTime()-w4(e),s=i.getTime()-w4(i);return Math.round((r-s)/lae)}(e,i));e.setDate(e.getDate()-r*s);var d=r*(s-+(b4(e,i)===-r));return 0===d?0:d}Math.pow(10,8);var fae=6e4;function E4(n,t){return pn(2,arguments),ni(n).getTime()-ni(t).getTime()}var C4={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},_ae="trunc";function T4(n){return n?C4[n]:C4[_ae]}function vae(n,t,e){pn(2,arguments);var i=E4(n,t)/fae;return T4(e?.roundingMethod)(i)}function yae(n,t,e){pn(2,arguments);var i=E4(n,t)/1e3;return T4(e?.roundingMethod)(i)}function wae(n){pn(1,arguments);var t=ni(n);return t.setHours(23,59,59,999),t}var I4={};function S4(){return I4}function bae(n,t){var e,i,r,s,l,d,f,m;pn(1,arguments);var y=S4(),C=po(null!==(e=null!==(i=null!==(r=null!==(s=t?.weekStartsOn)&&void 0!==s?s:null==t||null===(l=t.locale)||void 0===l||null===(d=l.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==r?r:y.weekStartsOn)&&void 0!==i?i:null===(f=y.locale)||void 0===f||null===(m=f.options)||void 0===m?void 0:m.weekStartsOn)&&void 0!==e?e:0);if(!(C>=0&&C<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var A=ni(n),x=A.getDay(),P=6+(x<C?-7:0)-(x-C);return A.setDate(A.getDate()+P),A.setHours(23,59,59,999),A}function Dae(n){return pn(1,arguments),ni(n).getDay()}function Eae(n){return pn(1,arguments),ni(n).getMonth()}function A4(n){pn(1,arguments);var t=ni(n);return t.setMilliseconds(0),t}function Cae(n,t){pn(2,arguments);var e=A4(n),i=A4(t);return e.getTime()===i.getTime()}function Tae(n){var t,e;if(pn(1,arguments),n&&"function"==typeof n.forEach)t=n;else{if("object"!==DO(n)||null===n)return new Date(NaN);t=Array.prototype.slice.call(n)}return t.forEach(function(i){var r=ni(i);(void 0===e||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function Iae(n,t){pn(2,arguments);var e=ni(n),i=po(t);return e.setHours(i),e}function Sae(n,t){pn(2,arguments);var e=ni(n),i=po(t);return e.setMinutes(i),e}function Aae(n){pn(1,arguments);var t=ni(n);return t.setSeconds(0,0),t}function Mae(n){pn(1,arguments);var t=ni(n);return t.setDate(1),t.setHours(0,0,0,0),t}function M4(n,t){var e,i,r,s,l,d,f,m;pn(1,arguments);var y=S4(),C=po(null!==(e=null!==(i=null!==(r=null!==(s=t?.weekStartsOn)&&void 0!==s?s:null==t||null===(l=t.locale)||void 0===l||null===(d=l.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==r?r:y.weekStartsOn)&&void 0!==i?i:null===(f=y.locale)||void 0===f||null===(m=f.options)||void 0===m?void 0:m.weekStartsOn)&&void 0!==e?e:0);if(!(C>=0&&C<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var A=ni(n),x=A.getDay(),P=(x<C?7:0)+x-C;return A.setDate(A.getDate()-P),A.setHours(0,0,0,0),A}function Nae(n){return pn(1,arguments),ni(n).getHours()}function xae(n){return pn(1,arguments),ni(n).getMinutes()}function Rae(n){return new Date(n).getTimezoneOffset()}function N4(n,t){return pn(2,arguments),wy(n,7*po(t))}function x4(n,t){pn(2,arguments);var e=ni(n),i=po(t);if(isNaN(i))return new Date(NaN);if(!i)return e;var r=e.getDate(),s=new Date(e.getTime());return s.setMonth(e.getMonth()+i+1,0),r>=s.getDate()?s:(e.setFullYear(s.getFullYear(),s.getMonth(),r),e)}function kae(n,t){return pn(2,arguments),N4(n,-po(t))}function Pae(n,t){return pn(2,arguments),x4(n,-po(t))}function LO(n){return pn(1,arguments),M4(n,{weekStartsOn:1})}var Bae=6048e5;function Vae(n){pn(1,arguments);var t=ni(n),e=LO(t).getTime()-function Lae(n){pn(1,arguments);var t=function Fae(n){pn(1,arguments);var t=ni(n),e=t.getFullYear(),i=new Date(0);i.setFullYear(e+1,0,4),i.setHours(0,0,0,0);var r=LO(i),s=new Date(0);s.setFullYear(e,0,4),s.setHours(0,0,0,0);var l=LO(s);return t.getTime()>=r.getTime()?e+1:t.getTime()>=l.getTime()?e:e-1}(n),e=new Date(0);return e.setFullYear(t,0,4),e.setHours(0,0,0,0),LO(e)}(t).getTime();return Math.round(e/Bae)+1}function Uae(n,t){pn(2,arguments);var e=ni(n),i=po(t);return e.setDate(i),e}function jae(n,t){pn(2,arguments);var e=ni(n),i=po(t),r=e.getFullYear(),s=e.getDate(),l=new Date(0);l.setFullYear(r,i,15),l.setHours(0,0,0,0);var d=function Hae(n){pn(1,arguments);var t=ni(n),e=t.getFullYear(),i=t.getMonth(),r=new Date(0);return r.setFullYear(e,i+1,0),r.setHours(0,0,0,0),r.getDate()}(l);return e.setMonth(i,Math.min(s,d)),e}function Gae(n,t){pn(2,arguments);var e=ni(n),i=po(t);return isNaN(e.getTime())?new Date(NaN):(e.setFullYear(i),e)}function $ae(n){return pn(1,arguments),ni(n).getDate()}function zae(n){return pn(1,arguments),ni(n).getFullYear()}function Wae(){return(0,y4.pi)((0,y4.pi)({},function Oae(){return{addDays:wy,addHours:QS,addMinutes:oae,addSeconds:aae,differenceInDays:uae,differenceInMinutes:vae,differenceInSeconds:yae,endOfDay:wae,endOfMonth:KS,endOfWeek:bae,getDay:Dae,getMonth:Eae,isSameDay:LB,isSameMonth:FB,isSameSecond:Cae,max:Tae,setHours:Iae,setMinutes:Sae,startOfDay:Cu,startOfMinute:Aae,startOfMonth:Mae,startOfWeek:M4,getHours:Nae,getMinutes:xae,getTimezoneOffset:Rae}}()),{addWeeks:N4,addMonths:x4,subDays:ZS,subWeeks:kae,subMonths:Pae,getISOWeek:Vae,setDate:Uae,setMonth:jae,setYear:Gae,getDate:$ae,getYear:zae})}let qae=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=a.oAB({type:n,bootstrap:[rae]});static#n=this.\u0275inj=a.cJS({imports:[si.hO.initializeApp(Ute_firebase),t0,kte,zn,AK.forRoot(),r6,XY,e7,HW,y_,Q9,Hu,Qoe,vK,E7.forRoot(),Uoe.forRoot({provide:Zf,useFactory:Wae})]})}return n})();pr().bootstrapModule(qae).catch(n=>console.error(n))},9706:()=>{"function"!=typeof Object.assign&&(Object.assign=function(Ct){for(var xe=[],L=1;L<arguments.length;L++)xe[L-1]=arguments[L];if(!Ct)throw TypeError("Cannot convert undefined or null to object");for(var a=function(he){he&&Object.keys(he).forEach(function(_e){return Ct[_e]=he[_e]})},ie=0,V=xe;ie<V.length;ie++)a(V[ie]);return Ct})},5619:(Ct,xe,L)=>{L.d(xe,{X:()=>ie});var a=L(8645);class ie extends a.x{constructor(re){super(),this._value=re}get value(){return this.getValue()}_subscribe(re){const he=super._subscribe(re);return!he.closed&&re.next(this._value),he}getValue(){const{hasError:re,thrownError:he,_value:_e}=this;if(re)throw he;return this._throwIfClosed(),_e}next(re){super.next(this._value=re)}}},5592:(Ct,xe,L)=>{L.d(xe,{y:()=>je});var a=L(305),ie=L(7394),V=L(4850),re=L(8407),he=L(2653),_e=L(4674),Ae=L(1441);let je=(()=>{class le{constructor(Ue){Ue&&(this._subscribe=Ue)}lift(Ue){const at=new le;return at.source=this,at.operator=Ue,at}subscribe(Ue,at,$e){const lt=function Z(le){return le&&le instanceof a.Lv||function $(le){return le&&(0,_e.m)(le.next)&&(0,_e.m)(le.error)&&(0,_e.m)(le.complete)}(le)&&(0,ie.Nn)(le)}(Ue)?Ue:new a.Hp(Ue,at,$e);return(0,Ae.x)(()=>{const{operator:ze,source:Rt}=this;lt.add(ze?ze.call(lt,Rt):Rt?this._subscribe(lt):this._trySubscribe(lt))}),lt}_trySubscribe(Ue){try{return this._subscribe(Ue)}catch(at){Ue.error(at)}}forEach(Ue,at){return new(at=we(at))(($e,lt)=>{const ze=new a.Hp({next:Rt=>{try{Ue(Rt)}catch(Nt){lt(Nt),ze.unsubscribe()}},error:lt,complete:$e});this.subscribe(ze)})}_subscribe(Ue){var at;return null===(at=this.source)||void 0===at?void 0:at.subscribe(Ue)}[V.L](){return this}pipe(...Ue){return(0,re.U)(Ue)(this)}toPromise(Ue){return new(Ue=we(Ue))((at,$e)=>{let lt;this.subscribe(ze=>lt=ze,ze=>$e(ze),()=>at(lt))})}}return le.create=Ze=>new le(Ze),le})();function we(le){var Ze;return null!==(Ze=le??he.config.Promise)&&void 0!==Ze?Ze:Promise}},8645:(Ct,xe,L)=>{L.d(xe,{x:()=>Ae});var a=L(5592),ie=L(7394);const re=(0,L(2306).d)(we=>function(){we(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var he=L(9039),_e=L(1441);let Ae=(()=>{class we extends a.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Z){const le=new je(this,this);return le.operator=Z,le}_throwIfClosed(){if(this.closed)throw new re}next(Z){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const le of this.currentObservers)le.next(Z)}})}error(Z){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Z;const{observers:le}=this;for(;le.length;)le.shift().error(Z)}})}complete(){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Z}=this;for(;Z.length;)Z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Z;return(null===(Z=this.observers)||void 0===Z?void 0:Z.length)>0}_trySubscribe(Z){return this._throwIfClosed(),super._trySubscribe(Z)}_subscribe(Z){return this._throwIfClosed(),this._checkFinalizedStatuses(Z),this._innerSubscribe(Z)}_innerSubscribe(Z){const{hasError:le,isStopped:Ze,observers:Ue}=this;return le||Ze?ie.Lc:(this.currentObservers=null,Ue.push(Z),new ie.w0(()=>{this.currentObservers=null,(0,he.P)(Ue,Z)}))}_checkFinalizedStatuses(Z){const{hasError:le,thrownError:Ze,isStopped:Ue}=this;le?Z.error(Ze):Ue&&Z.complete()}asObservable(){const Z=new a.y;return Z.source=this,Z}}return we.create=($,Z)=>new je($,Z),we})();class je extends Ae{constructor($,Z){super(),this.destination=$,this.source=Z}next($){var Z,le;null===(le=null===(Z=this.destination)||void 0===Z?void 0:Z.next)||void 0===le||le.call(Z,$)}error($){var Z,le;null===(le=null===(Z=this.destination)||void 0===Z?void 0:Z.error)||void 0===le||le.call(Z,$)}complete(){var $,Z;null===(Z=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===Z||Z.call($)}_subscribe($){var Z,le;return null!==(le=null===(Z=this.source)||void 0===Z?void 0:Z.subscribe($))&&void 0!==le?le:ie.Lc}}},305:(Ct,xe,L)=>{L.d(xe,{Hp:()=>$e,Lv:()=>le});var a=L(4674),ie=L(7394),V=L(2653),re=L(3894),he=L(2420);const _e=we("C",void 0,void 0);function we(pe,Re,fe){return{kind:pe,value:Re,error:fe}}var $=L(7599),Z=L(1441);class le extends ie.w0{constructor(Re){super(),this.isStopped=!1,Re?(this.destination=Re,(0,ie.Nn)(Re)&&Re.add(this)):this.destination=Nt}static create(Re,fe,Pe){return new $e(Re,fe,Pe)}next(Re){this.isStopped?Rt(function je(pe){return we("N",pe,void 0)}(Re),this):this._next(Re)}error(Re){this.isStopped?Rt(function Ae(pe){return we("E",void 0,pe)}(Re),this):(this.isStopped=!0,this._error(Re))}complete(){this.isStopped?Rt(_e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Re){this.destination.next(Re)}_error(Re){try{this.destination.error(Re)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ze=Function.prototype.bind;function Ue(pe,Re){return Ze.call(pe,Re)}class at{constructor(Re){this.partialObserver=Re}next(Re){const{partialObserver:fe}=this;if(fe.next)try{fe.next(Re)}catch(Pe){lt(Pe)}}error(Re){const{partialObserver:fe}=this;if(fe.error)try{fe.error(Re)}catch(Pe){lt(Pe)}else lt(Re)}complete(){const{partialObserver:Re}=this;if(Re.complete)try{Re.complete()}catch(fe){lt(fe)}}}class $e extends le{constructor(Re,fe,Pe){let We;if(super(),(0,a.m)(Re)||!Re)We={next:Re??void 0,error:fe??void 0,complete:Pe??void 0};else{let ge;this&&V.config.useDeprecatedNextContext?(ge=Object.create(Re),ge.unsubscribe=()=>this.unsubscribe(),We={next:Re.next&&Ue(Re.next,ge),error:Re.error&&Ue(Re.error,ge),complete:Re.complete&&Ue(Re.complete,ge)}):We=Re}this.destination=new at(We)}}function lt(pe){V.config.useDeprecatedSynchronousErrorHandling?(0,Z.O)(pe):(0,re.h)(pe)}function Rt(pe,Re){const{onStoppedNotification:fe}=V.config;fe&&$.z.setTimeout(()=>fe(pe,Re))}const Nt={closed:!0,next:he.Z,error:function ze(pe){throw pe},complete:he.Z}},7394:(Ct,xe,L)=>{L.d(xe,{Lc:()=>_e,w0:()=>he,Nn:()=>Ae});var a=L(4674);const V=(0,L(2306).d)(we=>function(Z){we(this),this.message=Z?`${Z.length} errors occurred during unsubscription:\n${Z.map((le,Ze)=>`${Ze+1}) ${le.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Z});var re=L(9039);class he{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:Z}=this;if(Z)if(this._parentage=null,Array.isArray(Z))for(const Ue of Z)Ue.remove(this);else Z.remove(this);const{initialTeardown:le}=this;if((0,a.m)(le))try{le()}catch(Ue){$=Ue instanceof V?Ue.errors:[Ue]}const{_finalizers:Ze}=this;if(Ze){this._finalizers=null;for(const Ue of Ze)try{je(Ue)}catch(at){$=$??[],at instanceof V?$=[...$,...at.errors]:$.push(at)}}if($)throw new V($)}}add($){var Z;if($&&$!==this)if(this.closed)je($);else{if($ instanceof he){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(Z=this._finalizers)&&void 0!==Z?Z:[]).push($)}}_hasParent($){const{_parentage:Z}=this;return Z===$||Array.isArray(Z)&&Z.includes($)}_addParent($){const{_parentage:Z}=this;this._parentage=Array.isArray(Z)?(Z.push($),Z):Z?[Z,$]:$}_removeParent($){const{_parentage:Z}=this;Z===$?this._parentage=null:Array.isArray(Z)&&(0,re.P)(Z,$)}remove($){const{_finalizers:Z}=this;Z&&(0,re.P)(Z,$),$ instanceof he&&$._removeParent(this)}}he.EMPTY=(()=>{const we=new he;return we.closed=!0,we})();const _e=he.EMPTY;function Ae(we){return we instanceof he||we&&"closed"in we&&(0,a.m)(we.remove)&&(0,a.m)(we.add)&&(0,a.m)(we.unsubscribe)}function je(we){(0,a.m)(we)?we():we.unsubscribe()}},2653:(Ct,xe,L)=>{L.d(xe,{config:()=>a});const a={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(Ct,xe,L)=>{L.d(xe,{E:()=>ie});const ie=new(L(5592).y)(he=>he.complete())},2459:(Ct,xe,L)=>{L.d(xe,{D:()=>Re});var a=L(4829),ie=L(3093),V=L(5137),_e=L(5592),je=L(4971),we=L(4674),$=L(7103);function le(fe,Pe){if(!fe)throw new Error("Iterable cannot be null");return new _e.y(We=>{(0,$.f)(We,Pe,()=>{const ge=fe[Symbol.asyncIterator]();(0,$.f)(We,Pe,()=>{ge.next().then(X=>{X.done?We.complete():We.next(X.value)})},0,!0)})})}var Ze=L(8382),Ue=L(4026),at=L(4266),$e=L(3664),lt=L(5726),ze=L(9853),Rt=L(541);function Re(fe,Pe){return Pe?function pe(fe,Pe){if(null!=fe){if((0,Ze.c)(fe))return function re(fe,Pe){return(0,a.Xf)(fe).pipe((0,V.R)(Pe),(0,ie.Q)(Pe))}(fe,Pe);if((0,at.z)(fe))return function Ae(fe,Pe){return new _e.y(We=>{let ge=0;return Pe.schedule(function(){ge===fe.length?We.complete():(We.next(fe[ge++]),We.closed||this.schedule())})})}(fe,Pe);if((0,Ue.t)(fe))return function he(fe,Pe){return(0,a.Xf)(fe).pipe((0,V.R)(Pe),(0,ie.Q)(Pe))}(fe,Pe);if((0,lt.D)(fe))return le(fe,Pe);if((0,$e.T)(fe))return function Z(fe,Pe){return new _e.y(We=>{let ge;return(0,$.f)(We,Pe,()=>{ge=fe[je.h](),(0,$.f)(We,Pe,()=>{let X,Je;try{({value:X,done:Je}=ge.next())}catch(kt){return void We.error(kt)}Je?We.complete():We.next(X)},0,!0)}),()=>(0,we.m)(ge?.return)&&ge.return()})}(fe,Pe);if((0,Rt.L)(fe))return function Nt(fe,Pe){return le((0,Rt.Q)(fe),Pe)}(fe,Pe)}throw(0,ze.z)(fe)}(fe,Pe):(0,a.Xf)(fe)}},4829:(Ct,xe,L)=>{L.d(xe,{Xf:()=>Ze});var a=L(7582),ie=L(4266),V=L(4026),re=L(5592),he=L(8382),_e=L(5726),Ae=L(9853),je=L(3664),we=L(541),$=L(4674),Z=L(3894),le=L(4850);function Ze(pe){if(pe instanceof re.y)return pe;if(null!=pe){if((0,he.c)(pe))return function Ue(pe){return new re.y(Re=>{const fe=pe[le.L]();if((0,$.m)(fe.subscribe))return fe.subscribe(Re);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(pe);if((0,ie.z)(pe))return function at(pe){return new re.y(Re=>{for(let fe=0;fe<pe.length&&!Re.closed;fe++)Re.next(pe[fe]);Re.complete()})}(pe);if((0,V.t)(pe))return function $e(pe){return new re.y(Re=>{pe.then(fe=>{Re.closed||(Re.next(fe),Re.complete())},fe=>Re.error(fe)).then(null,Z.h)})}(pe);if((0,_e.D)(pe))return ze(pe);if((0,je.T)(pe))return function lt(pe){return new re.y(Re=>{for(const fe of pe)if(Re.next(fe),Re.closed)return;Re.complete()})}(pe);if((0,we.L)(pe))return function Rt(pe){return ze((0,we.Q)(pe))}(pe)}throw(0,Ae.z)(pe)}function ze(pe){return new re.y(Re=>{(function Nt(pe,Re){var fe,Pe,We,ge;return(0,a.mG)(this,void 0,void 0,function*(){try{for(fe=(0,a.KL)(pe);!(Pe=yield fe.next()).done;)if(Re.next(Pe.value),Re.closed)return}catch(X){We={error:X}}finally{try{Pe&&!Pe.done&&(ge=fe.return)&&(yield ge.call(fe))}finally{if(We)throw We.error}}Re.complete()})})(pe,Re).catch(fe=>Re.error(fe))})}},3019:(Ct,xe,L)=>{L.d(xe,{T:()=>_e});var a=L(7537),ie=L(4829),V=L(6232),re=L(9940),he=L(2459);function _e(...Ae){const je=(0,re.yG)(Ae),we=(0,re._6)(Ae,1/0),$=Ae;return $.length?1===$.length?(0,ie.Xf)($[0]):(0,a.J)(we)((0,he.D)($,je)):V.E}},2096:(Ct,xe,L)=>{L.d(xe,{of:()=>V});var a=L(9940),ie=L(2459);function V(...re){const he=(0,a.yG)(re);return(0,ie.D)(re,he)}},8251:(Ct,xe,L)=>{L.d(xe,{x:()=>ie});var a=L(305);function ie(re,he,_e,Ae,je){return new V(re,he,_e,Ae,je)}class V extends a.Lv{constructor(he,_e,Ae,je,we,$){super(he),this.onFinalize=we,this.shouldUnsubscribe=$,this._next=_e?function(Z){try{_e(Z)}catch(le){he.error(le)}}:super._next,this._error=je?function(Z){try{je(Z)}catch(le){he.error(le)}finally{this.unsubscribe()}}:super._error,this._complete=Ae?function(){try{Ae()}catch(Z){he.error(Z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var he;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:_e}=this;super.unsubscribe(),!_e&&(null===(he=this.onFinalize)||void 0===he||he.call(this))}}}},3997:(Ct,xe,L)=>{L.d(xe,{x:()=>re});var a=L(2737),ie=L(9360),V=L(8251);function re(_e,Ae=a.y){return _e=_e??he,(0,ie.e)((je,we)=>{let $,Z=!0;je.subscribe((0,V.x)(we,le=>{const Ze=Ae(le);(Z||!_e($,Ze))&&(Z=!1,$=Ze,we.next(le))}))})}function he(_e,Ae){return _e===Ae}},7398:(Ct,xe,L)=>{L.d(xe,{U:()=>V});var a=L(9360),ie=L(8251);function V(re,he){return(0,a.e)((_e,Ae)=>{let je=0;_e.subscribe((0,ie.x)(Ae,we=>{Ae.next(re.call(he,we,je++))}))})}},7537:(Ct,xe,L)=>{L.d(xe,{J:()=>V});var a=L(1631),ie=L(2737);function V(re=1/0){return(0,a.z)(ie.y,re)}},1631:(Ct,xe,L)=>{L.d(xe,{z:()=>je});var a=L(7398),ie=L(4829),V=L(9360),re=L(7103),he=L(8251),Ae=L(4674);function je(we,$,Z=1/0){return(0,Ae.m)($)?je((le,Ze)=>(0,a.U)((Ue,at)=>$(le,Ue,Ze,at))((0,ie.Xf)(we(le,Ze))),Z):("number"==typeof $&&(Z=$),(0,V.e)((le,Ze)=>function _e(we,$,Z,le,Ze,Ue,at,$e){const lt=[];let ze=0,Rt=0,Nt=!1;const pe=()=>{Nt&&!lt.length&&!ze&&$.complete()},Re=Pe=>ze<le?fe(Pe):lt.push(Pe),fe=Pe=>{Ue&&$.next(Pe),ze++;let We=!1;(0,ie.Xf)(Z(Pe,Rt++)).subscribe((0,he.x)($,ge=>{Ze?.(ge),Ue?Re(ge):$.next(ge)},()=>{We=!0},void 0,()=>{if(We)try{for(ze--;lt.length&&ze<le;){const ge=lt.shift();at?(0,re.f)($,at,()=>fe(ge)):fe(ge)}pe()}catch(ge){$.error(ge)}}))};return we.subscribe((0,he.x)($,Re,()=>{Nt=!0,pe()})),()=>{$e?.()}}(le,Ze,we,Z)))}},3093:(Ct,xe,L)=>{L.d(xe,{Q:()=>re});var a=L(7103),ie=L(9360),V=L(8251);function re(he,_e=0){return(0,ie.e)((Ae,je)=>{Ae.subscribe((0,V.x)(je,we=>(0,a.f)(je,he,()=>je.next(we),_e),()=>(0,a.f)(je,he,()=>je.complete(),_e),we=>(0,a.f)(je,he,()=>je.error(we),_e)))})}},3020:(Ct,xe,L)=>{L.d(xe,{B:()=>he});var a=L(4829),ie=L(8645),V=L(305),re=L(9360);function he(Ae={}){const{connector:je=(()=>new ie.x),resetOnError:we=!0,resetOnComplete:$=!0,resetOnRefCountZero:Z=!0}=Ae;return le=>{let Ze,Ue,at,$e=0,lt=!1,ze=!1;const Rt=()=>{Ue?.unsubscribe(),Ue=void 0},Nt=()=>{Rt(),Ze=at=void 0,lt=ze=!1},pe=()=>{const Re=Ze;Nt(),Re?.unsubscribe()};return(0,re.e)((Re,fe)=>{$e++,!ze&&!lt&&Rt();const Pe=at=at??je();fe.add(()=>{$e--,0===$e&&!ze&&!lt&&(Ue=_e(pe,Z))}),Pe.subscribe(fe),!Ze&&$e>0&&(Ze=new V.Hp({next:We=>Pe.next(We),error:We=>{ze=!0,Rt(),Ue=_e(Nt,we,We),Pe.error(We)},complete:()=>{lt=!0,Rt(),Ue=_e(Nt,$),Pe.complete()}}),(0,a.Xf)(Re).subscribe(Ze))})(le)}}function _e(Ae,je,...we){if(!0===je)return void Ae();if(!1===je)return;const $=new V.Hp({next:()=>{$.unsubscribe(),Ae()}});return(0,a.Xf)(je(...we)).subscribe($)}},5137:(Ct,xe,L)=>{L.d(xe,{R:()=>ie});var a=L(9360);function ie(V,re=0){return(0,a.e)((he,_e)=>{_e.add(V.schedule(()=>he.subscribe(_e),re))})}},4664:(Ct,xe,L)=>{L.d(xe,{w:()=>re});var a=L(4829),ie=L(9360),V=L(8251);function re(he,_e){return(0,ie.e)((Ae,je)=>{let we=null,$=0,Z=!1;const le=()=>Z&&!we&&je.complete();Ae.subscribe((0,V.x)(je,Ze=>{we?.unsubscribe();let Ue=0;const at=$++;(0,a.Xf)(he(Ze,at)).subscribe(we=(0,V.x)(je,$e=>je.next(_e?_e(Ze,$e,at,Ue++):$e),()=>{we=null,le()}))},()=>{Z=!0,le()}))})}},9397:(Ct,xe,L)=>{L.d(xe,{b:()=>he});var a=L(4674),ie=L(9360),V=L(8251),re=L(2737);function he(_e,Ae,je){const we=(0,a.m)(_e)||Ae||je?{next:_e,error:Ae,complete:je}:_e;return we?(0,ie.e)(($,Z)=>{var le;null===(le=we.subscribe)||void 0===le||le.call(we);let Ze=!0;$.subscribe((0,V.x)(Z,Ue=>{var at;null===(at=we.next)||void 0===at||at.call(we,Ue),Z.next(Ue)},()=>{var Ue;Ze=!1,null===(Ue=we.complete)||void 0===Ue||Ue.call(we),Z.complete()},Ue=>{var at;Ze=!1,null===(at=we.error)||void 0===at||at.call(we,Ue),Z.error(Ue)},()=>{var Ue,at;Ze&&(null===(Ue=we.unsubscribe)||void 0===Ue||Ue.call(we)),null===(at=we.finalize)||void 0===at||at.call(we)}))}):re.y}},1954:(Ct,xe,L)=>{L.d(xe,{o:()=>he});var a=L(7394);class ie extends a.w0{constructor(Ae,je){super()}schedule(Ae,je=0){return this}}const V={setInterval(_e,Ae,...je){const{delegate:we}=V;return we?.setInterval?we.setInterval(_e,Ae,...je):setInterval(_e,Ae,...je)},clearInterval(_e){const{delegate:Ae}=V;return(Ae?.clearInterval||clearInterval)(_e)},delegate:void 0};var re=L(9039);class he extends ie{constructor(Ae,je){super(Ae,je),this.scheduler=Ae,this.work=je,this.pending=!1}schedule(Ae,je=0){var we;if(this.closed)return this;this.state=Ae;const $=this.id,Z=this.scheduler;return null!=$&&(this.id=this.recycleAsyncId(Z,$,je)),this.pending=!0,this.delay=je,this.id=null!==(we=this.id)&&void 0!==we?we:this.requestAsyncId(Z,this.id,je),this}requestAsyncId(Ae,je,we=0){return V.setInterval(Ae.flush.bind(Ae,this),we)}recycleAsyncId(Ae,je,we=0){if(null!=we&&this.delay===we&&!1===this.pending)return je;null!=je&&V.clearInterval(je)}execute(Ae,je){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const we=this._execute(Ae,je);if(we)return we;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ae,je){let $,we=!1;try{this.work(Ae)}catch(Z){we=!0,$=Z||new Error("Scheduled action threw falsy error")}if(we)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:Ae,scheduler:je}=this,{actions:we}=je;this.work=this.state=this.scheduler=null,this.pending=!1,(0,re.P)(we,this),null!=Ae&&(this.id=this.recycleAsyncId(je,Ae,null)),this.delay=null,super.unsubscribe()}}}},2631:(Ct,xe,L)=>{L.d(xe,{v:()=>V});var a=L(4552);class ie{constructor(he,_e=ie.now){this.schedulerActionCtor=he,this.now=_e}schedule(he,_e=0,Ae){return new this.schedulerActionCtor(this,he).schedule(Ae,_e)}}ie.now=a.l.now;class V extends ie{constructor(he,_e=ie.now){super(he,_e),this.actions=[],this._active=!1}flush(he){const{actions:_e}=this;if(this._active)return void _e.push(he);let Ae;this._active=!0;do{if(Ae=he.execute(he.state,he.delay))break}while(he=_e.shift());if(this._active=!1,Ae){for(;he=_e.shift();)he.unsubscribe();throw Ae}}}},6321:(Ct,xe,L)=>{L.d(xe,{P:()=>re,z:()=>V});var a=L(1954);const V=new(L(2631).v)(a.o),re=V},4552:(Ct,xe,L)=>{L.d(xe,{l:()=>a});const a={now:()=>(a.delegate||Date).now(),delegate:void 0}},7599:(Ct,xe,L)=>{L.d(xe,{z:()=>a});const a={setTimeout(ie,V,...re){const{delegate:he}=a;return he?.setTimeout?he.setTimeout(ie,V,...re):setTimeout(ie,V,...re)},clearTimeout(ie){const{delegate:V}=a;return(V?.clearTimeout||clearTimeout)(ie)},delegate:void 0}},4971:(Ct,xe,L)=>{L.d(xe,{h:()=>ie});const ie=function a(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(Ct,xe,L)=>{L.d(xe,{L:()=>a});const a="function"==typeof Symbol&&Symbol.observable||"@@observable"},9940:(Ct,xe,L)=>{L.d(xe,{_6:()=>_e,jO:()=>re,yG:()=>he});var a=L(4674),ie=L(671);function V(Ae){return Ae[Ae.length-1]}function re(Ae){return(0,a.m)(V(Ae))?Ae.pop():void 0}function he(Ae){return(0,ie.K)(V(Ae))?Ae.pop():void 0}function _e(Ae,je){return"number"==typeof V(Ae)?Ae.pop():je}},9039:(Ct,xe,L)=>{function a(ie,V){if(ie){const re=ie.indexOf(V);0<=re&&ie.splice(re,1)}}L.d(xe,{P:()=>a})},2306:(Ct,xe,L)=>{function a(ie){const re=ie(he=>{Error.call(he),he.stack=(new Error).stack});return re.prototype=Object.create(Error.prototype),re.prototype.constructor=re,re}L.d(xe,{d:()=>a})},1441:(Ct,xe,L)=>{L.d(xe,{O:()=>re,x:()=>V});var a=L(2653);let ie=null;function V(he){if(a.config.useDeprecatedSynchronousErrorHandling){const _e=!ie;if(_e&&(ie={errorThrown:!1,error:null}),he(),_e){const{errorThrown:Ae,error:je}=ie;if(ie=null,Ae)throw je}}else he()}function re(he){a.config.useDeprecatedSynchronousErrorHandling&&ie&&(ie.errorThrown=!0,ie.error=he)}},7103:(Ct,xe,L)=>{function a(ie,V,re,he=0,_e=!1){const Ae=V.schedule(function(){re(),_e?ie.add(this.schedule(null,he)):this.unsubscribe()},he);if(ie.add(Ae),!_e)return Ae}L.d(xe,{f:()=>a})},2737:(Ct,xe,L)=>{function a(ie){return ie}L.d(xe,{y:()=>a})},4266:(Ct,xe,L)=>{L.d(xe,{z:()=>a});const a=ie=>ie&&"number"==typeof ie.length&&"function"!=typeof ie},5726:(Ct,xe,L)=>{L.d(xe,{D:()=>ie});var a=L(4674);function ie(V){return Symbol.asyncIterator&&(0,a.m)(V?.[Symbol.asyncIterator])}},4674:(Ct,xe,L)=>{function a(ie){return"function"==typeof ie}L.d(xe,{m:()=>a})},8382:(Ct,xe,L)=>{L.d(xe,{c:()=>V});var a=L(4850),ie=L(4674);function V(re){return(0,ie.m)(re[a.L])}},3664:(Ct,xe,L)=>{L.d(xe,{T:()=>V});var a=L(4971),ie=L(4674);function V(re){return(0,ie.m)(re?.[a.h])}},4026:(Ct,xe,L)=>{L.d(xe,{t:()=>ie});var a=L(4674);function ie(V){return(0,a.m)(V?.then)}},541:(Ct,xe,L)=>{L.d(xe,{L:()=>re,Q:()=>V});var a=L(7582),ie=L(4674);function V(he){return(0,a.FC)(this,arguments,function*(){const Ae=he.getReader();try{for(;;){const{value:je,done:we}=yield(0,a.qq)(Ae.read());if(we)return yield(0,a.qq)(void 0);yield yield(0,a.qq)(je)}}finally{Ae.releaseLock()}})}function re(he){return(0,ie.m)(he?.getReader)}},671:(Ct,xe,L)=>{L.d(xe,{K:()=>ie});var a=L(4674);function ie(V){return V&&(0,a.m)(V.schedule)}},9360:(Ct,xe,L)=>{L.d(xe,{A:()=>ie,e:()=>V});var a=L(4674);function ie(re){return(0,a.m)(re?.lift)}function V(re){return he=>{if(ie(he))return he.lift(function(_e){try{return re(_e,this)}catch(Ae){this.error(Ae)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(Ct,xe,L)=>{function a(){}L.d(xe,{Z:()=>a})},8407:(Ct,xe,L)=>{L.d(xe,{U:()=>V,z:()=>ie});var a=L(2737);function ie(...re){return V(re)}function V(re){return 0===re.length?a.y:1===re.length?re[0]:function(_e){return re.reduce((Ae,je)=>je(Ae),_e)}}},3894:(Ct,xe,L)=>{L.d(xe,{h:()=>V});var a=L(2653),ie=L(7599);function V(re){ie.z.setTimeout(()=>{const{onUnhandledError:he}=a.config;if(!he)throw re;he(re)})}},9853:(Ct,xe,L)=>{function a(ie){return new TypeError(`You provided ${null!==ie&&"object"==typeof ie?"an invalid object":`'${ie}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(xe,{z:()=>a})},5879:(Ct,xe,L)=>{L.d(xe,{$8M:()=>Bc,$WT:()=>ca,$Z:()=>ig,AFp:()=>lE,ALo:()=>rN,AaK:()=>le,BQk:()=>Cd,CHM:()=>Js,CRH:()=>_N,DdM:()=>Fd,Dn7:()=>sN,EJc:()=>Ev,EiD:()=>R1,EpF:()=>sC,F$t:()=>Td,F4k:()=>tu,FYo:()=>C_,FiY:()=>Fp,Gf:()=>mN,GfV:()=>X1,Gpc:()=>at,HDt:()=>rb,HTZ:()=>oT,Hh0:()=>eN,Hsn:()=>oC,Ikx:()=>NC,JOm:()=>Gc,JVY:()=>ek,JZr:()=>Nt,KtG:()=>$u,L6k:()=>tk,LAX:()=>p_,LFG:()=>Kt,LMc:()=>Li,Lbi:()=>cE,Lck:()=>qM,MAs:()=>Bt,MGl:()=>uw,MMx:()=>KC,MR2:()=>rE,NdJ:()=>Q_,Ojb:()=>mk,OlP:()=>Yn,Oqu:()=>X_,P3R:()=>iE,PXZ:()=>YT,Q6J:()=>ff,QGY:()=>lw,QbO:()=>gk,Qsj:()=>Jl,R0b:()=>es,RDi:()=>ro,Rgc:()=>pv,SBq:()=>D_,SDv:()=>GM,Sil:()=>kN,Suo:()=>bT,TTD:()=>Bu,TgZ:()=>ki,Tol:()=>mf,Udp:()=>bg,VKq:()=>Pg,VuI:()=>lx,W1O:()=>yN,WLB:()=>rT,X6Q:()=>HP,XFs:()=>Gt,Xpm:()=>Au,Xq5:()=>yd,Xts:()=>qp,Y36:()=>tf,YKP:()=>qC,YNc:()=>JA,Yjl:()=>uh,Yz7:()=>xt,Z0I:()=>Vn,ZZ4:()=>vb,_Bn:()=>Og,_UZ:()=>mg,_Vd:()=>Jh,_c5:()=>yb,_uU:()=>_f,aQg:()=>Jg,c2e:()=>Rf,cJS:()=>Jn,cg1:()=>_w,d8E:()=>xC,dDg:()=>Wg,dqk:()=>Un,dwT:()=>mw,eBb:()=>zp,eFA:()=>ZT,eJc:()=>vv,ekj:()=>ns,eoX:()=>$T,f3M:()=>sn,g9A:()=>q1,h0i:()=>Od,hGG:()=>uI,hij:()=>xd,iGM:()=>wT,ifc:()=>Zs,ip1:()=>$g,jDz:()=>JC,kEZ:()=>kw,kL8:()=>ic,l5B:()=>Pw,lG2:()=>Sl,lcZ:()=>du,lqb:()=>Zl,lri:()=>cb,mCW:()=>g0,n5z:()=>Mo,oAB:()=>La,oJD:()=>k1,oxw:()=>nu,pB0:()=>T1,q3G:()=>Zo,q4F:()=>Xh,qFp:()=>Ps,qLn:()=>Xl,qOj:()=>j_,qZA:()=>ft,qbA:()=>sT,qzn:()=>so,rFY:()=>aT,rWj:()=>Pf,rg0:()=>Eh,s9C:()=>J_,sBO:()=>tI,s_b:()=>ul,soG:()=>Of,tb:()=>Sv,tp0:()=>ed,uIk:()=>Zn,vHH:()=>pe,vpe:()=>ba,wAp:()=>wf,xi3:()=>cT,xp6:()=>RE,ynx:()=>aw,z2F:()=>Yg,z3N:()=>ps,zSh:()=>sE,zW0:()=>tw,zs3:()=>oo});var a=L(8645),ie=L(7394),V=L(5592),re=L(3019),he=L(5619),_e=L(2096),Ae=L(3020),je=L(4664),we=L(3997);function $(o){for(let c in o)if(o[c]===$)return c;throw Error("Could not find renamed property on target object.")}function Z(o,c){for(const u in c)c.hasOwnProperty(u)&&!o.hasOwnProperty(u)&&(o[u]=c[u])}function le(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(le).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const c=o.toString();if(null==c)return""+c;const u=c.indexOf("\n");return-1===u?c:c.substring(0,u)}function Ze(o,c){return null==o||""===o?null===c?"":c:null==c||""===c?o:o+" "+c}const Ue=$({__forward_ref__:$});function at(o){return o.__forward_ref__=at,o.toString=function(){return le(this())},o}function $e(o){return lt(o)?o():o}function lt(o){return"function"==typeof o&&o.hasOwnProperty(Ue)&&o.__forward_ref__===at}function ze(o){return o&&!!o.\u0275providers}const Nt="https://g.co/ng/security#xss";class pe extends Error{constructor(c,u){super(function Re(o,c){return`NG0${Math.abs(o)}${c?": "+c:""}`}(c,u)),this.code=c}}function fe(o){return"string"==typeof o?o:null==o?"":String(o)}function Je(o,c){throw new pe(-201,!1)}function it(o,c,u,h){throw new Error(`ASSERTION ERROR: ${o}`+(null==h?"":` [Expected=> ${u} ${h} ${c} <=Actual]`))}function xt(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Jn(o){return{providers:o.providers||[],imports:o.imports||[]}}function Ci(o){return lr(o,Ai)||lr(o,_o)}function Vn(o){return null!==Ci(o)}function lr(o,c){return o.hasOwnProperty(c)?o[c]:null}function ss(o){return o&&(o.hasOwnProperty(zr)||o.hasOwnProperty(Ra))?o[zr]:null}const Ai=$({\u0275prov:$}),zr=$({\u0275inj:$}),_o=$({ngInjectableDef:$}),Ra=$({ngInjectorDef:$});var Gt=function(o){return o[o.Default=0]="Default",o[o.Host=1]="Host",o[o.Self=2]="Self",o[o.SkipSelf=4]="SkipSelf",o[o.Optional=8]="Optional",o}(Gt||{});let Yt;function Jt(o){const c=Yt;return Yt=o,c}function hi(o,c,u){const h=Ci(o);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:u&Gt.Optional?null:void 0!==c?c:void Je(le(o))}const Un=globalThis,et={},dt="__NG_DI_FLAG__",Ft="ngTempTokenPath",q=/\n/gm,ne="__source";let Le;function wt(o){const c=Le;return Le=o,c}function nn(o,c=Gt.Default){if(void 0===Le)throw new pe(-203,!1);return null===Le?hi(o,void 0,c):Le.get(o,c&Gt.Optional?null:void 0,c)}function Kt(o,c=Gt.Default){return(function Xt(){return Yt}()||nn)($e(o),c)}function sn(o,c=Gt.Default){return Kt(o,ji(c))}function ji(o){return typeof o>"u"||"number"==typeof o?o:0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)}function In(o){const c=[];for(let u=0;u<o.length;u++){const h=$e(o[u]);if(Array.isArray(h)){if(0===h.length)throw new pe(900,!1);let p,_=Gt.Default;for(let w=0;w<h.length;w++){const E=h[w],I=oa(E);"number"==typeof I?-1===I?p=E.token:_|=I:p=E}c.push(Kt(p,_))}else c.push(Kt(h))}return c}function br(o,c){return o[dt]=c,o.prototype[dt]=c,o}function oa(o){return o[dt]}function bo(o){return{toString:o}.toString()}var aa=function(o){return o[o.OnPush=0]="OnPush",o[o.Default=1]="Default",o}(aa||{}),Zs=function(o){return o[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",o}(Zs||{});const Ks={},vn=[],la=$({\u0275cmp:$}),Tl=$({\u0275dir:$}),mc=$({\u0275pipe:$}),Jf=$({\u0275mod:$}),Bs=$({\u0275fac:$}),Oa=$({__NG_ELEMENT_ID__:$}),Il=$({__NG_ENV_ID__:$});function oh(o,c,u){let h=o.length;for(;;){const p=o.indexOf(c,u);if(-1===p)return p;if(0===p||o.charCodeAt(p-1)<=32){const _=c.length;if(p+_===h||o.charCodeAt(p+_)<=32)return p}u=p+1}}function as(o,c,u){let h=0;for(;h<u.length;){const p=u[h];if("number"==typeof p){if(0!==p)break;h++;const _=u[h++],w=u[h++],E=u[h++];o.setAttribute(c,w,E,_)}else{const _=p,w=u[++h];Vs(_)?o.setProperty(c,_,w):o.setAttribute(c,_,w),h++}}return h}function ah(o){return 3===o||4===o||6===o}function Vs(o){return 64===o.charCodeAt(0)}function ka(o,c){if(null!==c&&0!==c.length)if(null===o||0===o.length)o=c.slice();else{let u=-1;for(let h=0;h<c.length;h++){const p=c[h];"number"==typeof p?u=p:0===u||Qi(o,u,p,null,-1===u||2===u?c[++h]:null)}}return o}function Qi(o,c,u,h,p){let _=0,w=o.length;if(-1===c)w=-1;else for(;_<o.length;){const E=o[_++];if("number"==typeof E){if(E===c){w=-1;break}if(E>c){w=_-1;break}}}for(;_<o.length;){const E=o[_];if("number"==typeof E)break;if(E===u){if(null===h)return void(null!==p&&(o[_+1]=p));if(h===o[_+1])return void(o[_+2]=p)}_++,null!==h&&_++,null!==p&&_++}-1!==w&&(o.splice(w,0,c),_=w+1),o.splice(_++,0,u),null!==h&&o.splice(_++,0,h),null!==p&&o.splice(_++,0,p)}const lh="ng-template";function Gi(o,c,u){let h=0,p=!0;for(;h<o.length;){let _=o[h++];if("string"==typeof _&&p){const w=o[h++];if(u&&"class"===_&&-1!==oh(w.toLowerCase(),c,0))return!0}else{if(1===_){for(;h<o.length&&"string"==typeof(_=o[h++]);)if(_.toLowerCase()===c)return!0;return!1}"number"==typeof _&&(p=!1)}}return!1}function Mi(o){return 4===o.type&&o.value!==lh}function Sy(o,c,u){return c===(4!==o.type||u?o.value:lh)}function Mm(o,c,u){let h=4;const p=o.attrs||[],_=function Ay(o){for(let c=0;c<o.length;c++)if(ah(o[c]))return c;return o.length}(p);let w=!1;for(let E=0;E<c.length;E++){const I=c[E];if("number"!=typeof I){if(!w)if(4&h){if(h=2|1&h,""!==I&&!Sy(o,I,u)||""===I&&1===c.length){if(ls(h))return!1;w=!0}}else{const N=8&h?I:c[++E];if(8&h&&null!==o.attrs){if(!Gi(o.attrs,N,u)){if(ls(h))return!1;w=!0}continue}const G=Pa(8&h?"class":I,p,Mi(o),u);if(-1===G){if(ls(h))return!1;w=!0;continue}if(""!==N){let K;K=G>_?"":p[G+1].toLowerCase();const ae=8&h?K:null;if(ae&&-1!==oh(ae,N,0)||2&h&&N!==K){if(ls(h))return!1;w=!0}}}}else{if(!w&&!ls(h)&&!ls(I))return!1;if(w&&ls(I))continue;w=!1,h=I|1&h}}return ls(h)||w}function ls(o){return 0==(1&o)}function Pa(o,c,u,h){if(null===c)return-1;let p=0;if(h||!u){let _=!1;for(;p<c.length;){const w=c[p];if(w===o)return p;if(3===w||6===w)_=!0;else{if(1===w||2===w){let E=c[++p];for(;"string"==typeof E;)E=c[++p];continue}if(4===w)break;if(0===w){p+=4;continue}}p+=_?1:2}return-1}return function Fa(o,c){let u=o.indexOf(4);if(u>-1)for(u++;u<o.length;){const h=o[u];if("number"==typeof h)return-1;if(h===c)return u;u++}return-1}(c,o)}function Su(o,c,u=!1){for(let h=0;h<c.length;h++)if(Mm(o,c[h],u))return!0;return!1}function ep(o,c){e:for(let u=0;u<c.length;u++){const h=c[u];if(o.length===h.length){for(let p=0;p<o.length;p++)if(o[p]!==h[p])continue e;return!0}}return!1}function Do(o,c){return o?":not("+c.trim()+")":c}function Ji(o){let c=o[0],u=1,h=2,p="",_=!1;for(;u<o.length;){let w=o[u];if("string"==typeof w)if(2&h){const E=o[++u];p+="["+w+(E.length>0?'="'+E+'"':"")+"]"}else 8&h?p+="."+w:4&h&&(p+=" "+w);else""!==p&&!ls(w)&&(c+=Do(_,p),p=""),h=w,_=_||!ls(h);u++}return""!==p&&(c+=Do(_,p)),c}function Au(o){return bo(()=>{const c=_c(o),u={...c,decls:o.decls,vars:o.vars,template:o.template,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,onPush:o.changeDetection===aa.OnPush,directiveDefs:null,pipeDefs:null,dependencies:c.standalone&&o.dependencies||null,getStandaloneInjector:null,signals:o.signals??!1,data:o.data||{},encapsulation:o.encapsulation||Zs.Emulated,styles:o.styles||vn,_:null,schemas:o.schemas||null,tView:null,id:""};Nm(u);const h=o.dependencies;return u.directiveDefs=vc(h,!1),u.pipeDefs=vc(h,!0),u.id=function Hs(o){let c=0;const u=[o.selectors,o.ngContentSelectors,o.hostVars,o.hostAttrs,o.consts,o.vars,o.decls,o.encapsulation,o.standalone,o.signals,o.exportAs,JSON.stringify(o.inputs),JSON.stringify(o.outputs),Object.getOwnPropertyNames(o.type.prototype),!!o.contentQueries,!!o.viewQuery].join("|");for(const p of u)c=Math.imul(31,c)+p.charCodeAt(0)<<0;return c+=2147483648,"c"+c}(u),u})}function ch(o){return yn(o)||Ni(o)}function Mu(o){return null!==o}function La(o){return bo(()=>({type:o.type,bootstrap:o.bootstrap||vn,declarations:o.declarations||vn,imports:o.imports||vn,exports:o.exports||vn,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function Nu(o,c){if(null==o)return Ks;const u={};for(const h in o)if(o.hasOwnProperty(h)){let p=o[h],_=p;Array.isArray(p)&&(_=p[1],p=p[0]),u[p]=h,c&&(c[p]=_)}return u}function Sl(o){return bo(()=>{const c=_c(o);return Nm(c),c})}function uh(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function yn(o){return o[la]||null}function Ni(o){return o[Tl]||null}function Wr(o){return o[mc]||null}function ca(o){const c=yn(o)||Ni(o)||Wr(o);return null!==c&&c.standalone}function qr(o,c){const u=o[Jf]||null;if(!u&&!0===c)throw new Error(`Type ${le(o)} does not have '\u0275mod' property.`);return u}function _c(o){const c={};return{type:o.type,providersResolver:null,factory:null,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:c,inputTransforms:null,inputConfig:o.inputs||Ks,exportAs:o.exportAs||null,standalone:!0===o.standalone,signals:!0===o.signals,selectors:o.selectors||vn,viewQuery:o.viewQuery||null,features:o.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Nu(o.inputs,c),outputs:Nu(o.outputs)}}function Nm(o){o.features?.forEach(c=>c(o))}function vc(o,c){if(!o)return null;const u=c?Wr:ch;return()=>("function"==typeof o?o():o).map(h=>u(h)).filter(Mu)}const fi=0,vt=1,zt=2,pi=3,Yr=4,Ba=5,Xi=6,yc=7,zn=8,Uo=9,Al=10,Wt=11,Dr=12,ip=13,Ho=14,gi=15,dh=16,Va=17,cr=18,jo=19,Go=20,ua=21,Ts=22,wc=23,da=24,ln=25,Ml=1,Ru=2,ur=7,dr=9,Er=11;function hr(o){return Array.isArray(o)&&"object"==typeof o[Ml]}function Ur(o){return Array.isArray(o)&&!0===o[Ml]}function Ou(o){return 0!=(4&o.flags)}function Ha(o){return o.componentOffset>-1}function Is(o){return 1==(1&o.flags)}function cs(o){return!!o.template}function Nl(o){return 0!=(512&o[zt])}function ja(o,c){return o.hasOwnProperty(Bs)?o[Bs]:null}let er=null,Ga=!1;function us(o){const c=er;return er=o,c}const $a={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Ec(o){if(!za(o)||o.dirty){if(!o.producerMustRecompute(o)&&!vh(o))return void(o.dirty=!1);o.producerRecomputeValue(o),o.dirty=!1}}function Cc(o){o.dirty=!0,function lp(o){if(void 0===o.liveConsumerNode)return;const c=Ga;Ga=!0;try{for(const u of o.liveConsumerNode)u.dirty||Cc(u)}finally{Ga=c}}(o),o.consumerMarkedDirty?.(o)}function cp(o){return o&&(o.nextProducerIndex=0),us(o)}function fr(o,c){if(us(c),o&&void 0!==o.producerNode&&void 0!==o.producerIndexOfThis&&void 0!==o.producerLastReadVersion){if(za(o))for(let u=o.nextProducerIndex;u<o.producerNode.length;u++)Tc(o.producerNode[u],o.producerIndexOfThis[u]);for(;o.producerNode.length>o.nextProducerIndex;)o.producerNode.pop(),o.producerLastReadVersion.pop(),o.producerIndexOfThis.pop()}}function vh(o){fa(o);for(let c=0;c<o.producerNode.length;c++){const u=o.producerNode[c],h=o.producerLastReadVersion[c];if(h!==u.version||(Ec(u),h!==u.version))return!0}return!1}function yh(o){if(fa(o),za(o))for(let c=0;c<o.producerNode.length;c++)Tc(o.producerNode[c],o.producerIndexOfThis[c]);o.producerNode.length=o.producerLastReadVersion.length=o.producerIndexOfThis.length=0,o.liveConsumerNode&&(o.liveConsumerNode.length=o.liveConsumerIndexOfThis.length=0)}function Tc(o,c){if(function Ic(o){o.liveConsumerNode??=[],o.liveConsumerIndexOfThis??=[]}(o),fa(o),1===o.liveConsumerNode.length)for(let h=0;h<o.producerNode.length;h++)Tc(o.producerNode[h],o.producerIndexOfThis[h]);const u=o.liveConsumerNode.length-1;if(o.liveConsumerNode[c]=o.liveConsumerNode[u],o.liveConsumerIndexOfThis[c]=o.liveConsumerIndexOfThis[u],o.liveConsumerNode.length--,o.liveConsumerIndexOfThis.length--,c<o.liveConsumerNode.length){const h=o.liveConsumerIndexOfThis[c],p=o.liveConsumerNode[c];fa(p),p.producerIndexOfThis[h]=c}}function za(o){return o.consumerIsAlwaysLive||(o?.liveConsumerNode?.length??0)>0}function fa(o){o.producerNode??=[],o.producerIndexOfThis??=[],o.producerLastReadVersion??=[]}let hp=null;function Eh(o){const c=us(null);try{return o()}finally{us(c)}}const Ch=()=>{},Fm=(()=>({...$a,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:o=>{o.schedule(o.ref)},hasRun:!1,cleanupFn:Ch}))();class Lm{constructor(c,u,h){this.previousValue=c,this.currentValue=u,this.firstChange=h}isFirstChange(){return this.firstChange}}function Bu(){return Mc}function Mc(o){return o.type.prototype.ngOnChanges&&(o.setInput=Wa),Bm}function Bm(){const o=qa(this),c=o?.current;if(c){const u=o.previous;if(u===Ks)o.previous=c;else for(let h in c)u[h]=c[h];o.current=null,this.ngOnChanges(c)}}function Wa(o,c,u,h){const p=this.declaredInputs[u],_=qa(o)||function pp(o,c){return o[Co]=c}(o,{previous:Ks,current:null}),w=_.current||(_.current={}),E=_.previous,I=E[p];w[p]=new Lm(I&&I.currentValue,c,E===Ks),o[h]=c}Bu.ngInherit=!0;const Co="__ngSimpleChanges__";function qa(o){return o[Co]||null}const Qs=function(o,c,u){};function Hn(o){for(;Array.isArray(o);)o=o[fi];return o}function Ya(o,c){return Hn(c[o])}function Cr(o,c){return Hn(c[o.index])}function Ih(o,c){return o.data[c]}function Za(o,c){return o[c]}function Tr(o,c){const u=c[o];return hr(u)?u:u[fi]}function ds(o,c){return null==c?null:o[c]}function Gm(o){o[Va]=0}function Sh(o){1024&o[zt]||(o[zt]|=1024,Ly(o,1))}function Vu(o){1024&o[zt]&&(o[zt]&=-1025,Ly(o,-1))}function Ly(o,c){let u=o[pi];if(null===u)return;u[Ba]+=c;let h=u;for(u=u[pi];null!==u&&(1===c&&1===h[Ba]||-1===c&&0===h[Ba]);)u[Ba]+=c,h=u,u=u[pi]}const qt={lFrame:At(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Ir(){return qt.bindingsEnabled}function To(){return null!==qt.skipHydrationRootTNode}function He(){return qt.lFrame.lView}function gn(){return qt.lFrame.tView}function Js(o){return qt.lFrame.contextLView=o,o[zn]}function $u(o){return qt.lFrame.contextLView=null,o}function gr(){let o=zu();for(;null!==o&&64===o.type;)o=o.parent;return o}function zu(){return qt.lFrame.currentTNode}function Ll(){const o=qt.lFrame,c=o.currentTNode;return o.isParent?c:c.parent}function ga(o,c){const u=qt.lFrame;u.currentTNode=o,u.isParent=c}function Ka(){return qt.lFrame.isParent}function Mh(){qt.lFrame.isParent=!1}function hs(){const o=qt.lFrame;let c=o.bindingRootIndex;return-1===c&&(c=o.bindingRootIndex=o.tView.bindingStartIndex),c}function Qa(){return qt.lFrame.bindingIndex++}function Io(o){const c=qt.lFrame,u=c.bindingIndex;return c.bindingIndex=c.bindingIndex+o,u}function Rh(o){qt.lFrame.inI18n=o}function Wu(o,c){const u=qt.lFrame;u.bindingIndex=u.bindingRootIndex=o,qu(c)}function qu(o){qt.lFrame.currentDirectiveIndex=o}function bp(o){const c=qt.lFrame.currentDirectiveIndex;return-1===c?null:o[c]}function Yu(){return qt.lFrame.currentQueryIndex}function Dp(o){qt.lFrame.currentQueryIndex=o}function Ep(o){const c=o[vt];return 2===c.type?c.declTNode:1===c.type?o[Xi]:null}function zm(o,c,u){if(u&Gt.SkipSelf){let p=c,_=o;for(;!(p=p.parent,null!==p||u&Gt.Host||(p=Ep(_),null===p||(_=_[Ho],10&p.type))););if(null===p)return!1;c=p,o=_}const h=qt.lFrame=Qt();return h.currentTNode=c,h.lView=o,!0}function si(o){const c=Qt(),u=o[vt];qt.lFrame=c,c.currentTNode=u.firstChild,c.lView=o,c.tView=u,c.contextLView=o,c.bindingIndex=u.bindingStartIndex,c.inI18n=!1}function Qt(){const o=qt.lFrame,c=null===o?null:o.child;return null===c?At(o):c}function At(o){const c={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=c),c}function bi(){const o=qt.lFrame;return qt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const Rn=bi;function Sr(){const o=bi();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function rt(){return qt.lFrame.selectedIndex}function zo(o){qt.lFrame.selectedIndex=o}function Xn(){const o=qt.lFrame;return Ih(o.tView,o.selectedIndex)}let _i=!0;function dn(){return _i}function tr(o){_i=o}function Wo(o,c){for(let u=c.directiveStart,h=c.directiveEnd;u<h;u++){const _=o.data[u].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:N,ngOnDestroy:k}=_;w&&(o.contentHooks??=[]).push(-u,w),E&&((o.contentHooks??=[]).push(u,E),(o.contentCheckHooks??=[]).push(u,E)),I&&(o.viewHooks??=[]).push(-u,I),N&&((o.viewHooks??=[]).push(u,N),(o.viewCheckHooks??=[]).push(u,N)),null!=k&&(o.destroyHooks??=[]).push(u,k)}}function Bl(o,c,u){_a(o,c,3,u)}function Zu(o,c,u,h){(3&o[zt])===u&&_a(o,c,u,h)}function qo(o,c){let u=o[zt];(3&u)===c&&(u&=8191,u+=1,o[zt]=u)}function _a(o,c,u,h){const _=h??-1,w=c.length-1;let E=0;for(let I=void 0!==h?65535&o[Va]:0;I<w;I++)if("number"==typeof c[I+1]){if(E=c[I],null!=h&&E>=h)break}else c[I]<0&&(o[Va]+=65536),(E<_||-1==_)&&(Rc(o,u,c,I),o[Va]=(4294901760&o[Va])+I+2),I++}function Zr(o,c){Qs(4,o,c);const u=us(null);try{c.call(o)}finally{us(u),Qs(5,o,c)}}function Rc(o,c,u,h){const p=u[h]<0,_=u[h+1],E=o[p?-u[h]:u[h]];p?o[zt]>>13<o[Va]>>16&&(3&o[zt])===c&&(o[zt]+=8192,Zr(E,_)):Zr(E,_)}const So=-1;class hn{constructor(c,u,h){this.factory=c,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=h}}function kc(o){return o!==So}function Vl(o){return 32767&o}function Ul(o,c){let u=function jy(o){return o>>16}(o),h=c;for(;u>0;)h=h[Ho],u--;return h}let Ip=!0;function Oh(o){const c=Ip;return Ip=o,c}const Zm=255,Gy=5;let Sp=0;const Ee={};function mr(o,c){const u=Hr(o,c);if(-1!==u)return u;const h=c[vt];h.firstCreatePass&&(o.injectorIndex=c.length,B(h.data,o),B(c,null),B(h.blueprint,null));const p=Ao(o,c),_=o.injectorIndex;if(kc(p)){const w=Vl(p),E=Ul(p,c),I=E[vt].data;for(let N=0;N<8;N++)c[_+N]=E[w+N]|I[w+N]}return c[_+8]=p,_}function B(o,c){o.push(0,0,0,0,0,0,0,0,c)}function Hr(o,c){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===c[o.injectorIndex+8]?-1:o.injectorIndex}function Ao(o,c){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let u=0,h=null,p=c;for(;null!==p;){if(h=jl(p),null===h)return So;if(u++,p=p[Ho],-1!==h.injectorIndex)return h.injectorIndex|u<<16}return So}function Hl(o,c,u){!function oi(o,c,u){let h;"string"==typeof u?h=u.charCodeAt(0)||0:u.hasOwnProperty(Oa)&&(h=u[Oa]),null==h&&(h=u[Oa]=Sp++);const p=h&Zm;c.data[o+(p>>Gy)]|=1<<p}(o,c,u)}function ei(o,c,u){if(u&Gt.Optional||void 0!==o)return o;Je()}function Pc(o,c,u,h){if(u&Gt.Optional&&void 0===h&&(h=null),!(u&(Gt.Self|Gt.Host))){const p=o[Uo],_=Jt(void 0);try{return p?p.get(c,h,u&Gt.Optional):hi(c,h,u&Gt.Optional)}finally{Jt(_)}}return ei(h,0,u)}function Xa(o,c,u,h=Gt.Default,p){if(null!==o){if(2048&c[zt]&&!(h&Gt.Self)){const w=function Fh(o,c,u,h,p){let _=o,w=c;for(;null!==_&&null!==w&&2048&w[zt]&&!(512&w[zt]);){const E=Ju(_,w,u,h|Gt.Self,Ee);if(E!==Ee)return E;let I=_.parent;if(!I){const N=w[Go];if(N){const k=N.get(u,Ee,h);if(k!==Ee)return k}I=jl(w),w=w[Ho]}_=I}return p}(o,c,u,h,Ee);if(w!==Ee)return w}const _=Ju(o,c,u,h,Ee);if(_!==Ee)return _}return Pc(c,u,h,p)}function Ju(o,c,u,h,p){const _=function Mp(o){if("string"==typeof o)return o.charCodeAt(0)||0;const c=o.hasOwnProperty(Oa)?o[Oa]:void 0;return"number"==typeof c?c>=0?c&Zm:tl:c}(u);if("function"==typeof _){if(!zm(c,o,h))return h&Gt.Host?ei(p,0,h):Pc(c,u,h,p);try{let w;if(w=_(h),null!=w||h&Gt.Optional)return w;Je()}finally{Rn()}}else if("number"==typeof _){let w=null,E=Hr(o,c),I=So,N=h&Gt.Host?c[gi][Xi]:null;for((-1===E||h&Gt.SkipSelf)&&(I=-1===E?Ao(o,c):c[E+8],I!==So&&Ph(h,!1)?(w=c[vt],E=Vl(I),c=Ul(I,c)):E=-1);-1!==E;){const k=c[vt];if(Yo(_,E,k.data)){const G=Ap(E,c,u,w,h,N);if(G!==Ee)return G}I=c[E+8],I!==So&&Ph(h,c[vt].data[E+8]===N)&&Yo(_,E,c)?(w=k,E=Vl(I),c=Ul(I,c)):E=-1}}return p}function Ap(o,c,u,h,p,_){const w=c[vt],E=w.data[o+8],k=kh(E,w,u,null==h?Ha(E)&&Ip:h!=w&&0!=(3&E.type),p&Gt.Host&&_===E);return null!==k?el(c,w,k,E):Ee}function kh(o,c,u,h,p){const _=o.providerIndexes,w=c.data,E=1048575&_,I=o.directiveStart,k=_>>20,K=p?E+k:o.directiveEnd;for(let ae=h?E:E+k;ae<K;ae++){const Oe=w[ae];if(ae<I&&u===Oe||ae>=I&&Oe.type===u)return ae}if(p){const ae=w[I];if(ae&&cs(ae)&&ae.type===u)return I}return null}function el(o,c,u,h){let p=o[u];const _=c.data;if(function Wm(o){return o instanceof hn}(p)){const w=p;w.resolving&&function We(o,c){const u=c?`. Dependency path: ${c.join(" > ")} > ${o}`:"";throw new pe(-200,`Circular dependency in DI detected for ${o}${u}`)}(function Pe(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():fe(o)}(_[u]));const E=Oh(w.canSeeViewProviders);w.resolving=!0;const N=w.injectImpl?Jt(w.injectImpl):null;zm(o,h,Gt.Default);try{p=o[u]=w.factory(void 0,_,o,h),c.firstCreatePass&&u>=h.directiveStart&&function jn(o,c,u){const{ngOnChanges:h,ngOnInit:p,ngDoCheck:_}=c.type.prototype;if(h){const w=Mc(c);(u.preOrderHooks??=[]).push(o,w),(u.preOrderCheckHooks??=[]).push(o,w)}p&&(u.preOrderHooks??=[]).push(0-o,p),_&&((u.preOrderHooks??=[]).push(o,_),(u.preOrderCheckHooks??=[]).push(o,_))}(u,_[u],c)}finally{null!==N&&Jt(N),Oh(E),w.resolving=!1,Rn()}}return p}function Yo(o,c,u){return!!(u[c+(o>>Gy)]&1<<o)}function Ph(o,c){return!(o&Gt.Self||o&Gt.Host&&c)}class mn{constructor(c,u){this._tNode=c,this._lView=u}get(c,u,h){return Xa(this._tNode,this._lView,c,ji(h),u)}}function tl(){return new mn(gr(),He())}function Mo(o){return bo(()=>{const c=o.prototype.constructor,u=c[Bs]||Lc(c),h=Object.prototype;let p=Object.getPrototypeOf(o.prototype).constructor;for(;p&&p!==h;){const _=p[Bs]||Lc(p);if(_&&_!==u)return _;p=Object.getPrototypeOf(p)}return _=>new _})}function Lc(o){return lt(o)?()=>{const c=Lc($e(o));return c&&c()}:ja(o)}function jl(o){const c=o[vt],u=c.type;return 2===u?c.declTNode:1===u?o[Xi]:null}function Bc(o){return function Qu(o,c){if("class"===c)return o.classes;if("style"===c)return o.styles;const u=o.attrs;if(u){const h=u.length;let p=0;for(;p<h;){const _=u[p];if(ah(_))break;if(0===_)p+=2;else if("number"==typeof _)for(p++;p<h&&"string"==typeof u[p];)p++;else{if(_===c)return u[p+1];p+=2}}}return null}(gr(),o)}const Vc="__parameters__";function H(o,c,u){return bo(()=>{const h=function R(o){return function(...u){if(o){const h=o(...u);for(const p in h)this[p]=h[p]}}}(c);function p(..._){if(this instanceof p)return h.apply(this,_),this;const w=new p(..._);return E.annotation=w,E;function E(I,N,k){const G=I.hasOwnProperty(Vc)?I[Vc]:Object.defineProperty(I,Vc,{value:[]})[Vc];for(;G.length<=k;)G.push(null);return(G[k]=G[k]||[]).push(w),I}}return u&&(p.prototype=Object.create(u.prototype)),p.prototype.ngMetadataName=o,p.annotationCls=p,p})}function $l(o,c){o.forEach(u=>Array.isArray(u)?$l(u,c):c(u))}function xp(o,c,u){c>=o.length?o.push(u):o.splice(c,0,u)}function Lh(o,c){return c>=o.length-1?o.pop():o.splice(c,1)[0]}function nl(o,c){const u=[];for(let h=0;h<o;h++)u.push(c);return u}function fs(o,c,u){let h=Uc(o,c);return h>=0?o[1|h]=u:(h=~h,function $y(o,c,u,h){let p=o.length;if(p==c)o.push(u,h);else if(1===p)o.push(h,o[0]),o[0]=u;else{for(p--,o.push(o[p-1],o[p]);p>c;)o[p]=o[p-2],p--;o[c]=u,o[c+1]=h}}(o,h,c,u)),h}function Bh(o,c){const u=Uc(o,c);if(u>=0)return o[1|u]}function Uc(o,c){return function Op(o,c,u){let h=0,p=o.length>>u;for(;p!==h;){const _=h+(p-h>>1),w=o[_<<u];if(c===w)return _<<u;w>c?p=_:h=_+1}return~(p<<u)}(o,c,1)}const Fp=br(H("Optional"),8),ed=br(H("SkipSelf"),4);function od(o){return 128==(128&o.flags)}var Gc=function(o){return o[o.Important=1]="Important",o[o.DashCase=2]="DashCase",o}(Gc||{});const o_=/^>|^->|<!--|-->|--!>|<!-$/g,ya=/(<|>)/g,Vp="\u200b$1\u200b";const zh=new Map;let ld=0;const Gp="__ngContext__";function Jr(o,c){hr(c)?(o[Gp]=c[jo],function Mr(o){zh.set(o[jo],o)}(c)):o[Gp]=c}let Y;function ue(o,c){return Y(o,c)}function Xe(o){const c=o[pi];return Ur(c)?c[pi]:c}function Si(o){return cd(o[Dr])}function no(o){return cd(o[Yr])}function cd(o){for(;null!==o&&!Ur(o);)o=o[Yr];return o}function Wc(o,c,u,h,p){if(null!=h){let _,w=!1;Ur(h)?_=h:hr(h)&&(w=!0,h=h[fi]);const E=Hn(h);0===o&&null!==u?null==p?UD(c,u,E):ql(c,u,E,p||null,!0):1===o&&null!==u?ql(c,u,E,p||null,!0):2===o?function u0(o,c,u){const h=d_(o,c);h&&function HD(o,c,u,h){o.removeChild(c,u,h)}(o,h,c,u)}(c,E,w):3===o&&c.destroyNode(E),null!=_&&function _1(o,c,u,h,p){const _=u[ur];_!==Hn(u)&&Wc(c,o,h,_,p);for(let E=Er;E<u.length;E++){const I=u[E];As(I[vt],I,o,c,h,_)}}(c,o,_,u,p)}}function ud(o,c){return o.createText(c)}function Wh(o,c){return o.createComment(function Up(o){return o.replace(o_,c=>c.replace(ya,Vp))}(c))}function dd(o,c,u){return o.createElement(c,u)}function hd(o,c){const u=o[dr],h=u.indexOf(c);Vu(c),u.splice(h,1)}function Xr(o,c){if(o.length<=Er)return;const u=Er+c,h=o[u];if(h){const p=h[dh];null!==p&&p!==o&&hd(p,h),c>0&&(o[u-1][Yr]=h[Yr]);const _=Lh(o,Er+c);!function s0(o,c){As(o,c,c[Wt],2,null,null),c[fi]=null,c[Xi]=null}(h[vt],h);const w=_[cr];null!==w&&w.detachView(_[vt]),h[pi]=null,h[Yr]=null,h[zt]&=-129}return h}function LD(o,c){if(!(256&c[zt])){const u=c[Wt];c[wc]&&yh(c[wc]),c[da]&&yh(c[da]),u.destroyNode&&As(o,c,u,3,null,null),function u_(o){let c=o[Dr];if(!c)return BD(o[vt],o);for(;c;){let u=null;if(hr(c))u=c[Dr];else{const h=c[Er];h&&(u=h)}if(!u){for(;c&&!c[Yr]&&c!==o;)hr(c)&&BD(c[vt],c),c=c[pi];null===c&&(c=o),hr(c)&&BD(c[vt],c),u=c&&c[Yr]}c=u}}(c)}}function BD(o,c){if(!(256&c[zt])){c[zt]&=-129,c[zt]|=256,function ZO(o,c){let u;if(null!=o&&null!=(u=o.destroyHooks))for(let h=0;h<u.length;h+=2){const p=c[u[h]];if(!(p instanceof hn)){const _=u[h+1];if(Array.isArray(_))for(let w=0;w<_.length;w+=2){const E=p[_[w]],I=_[w+1];Qs(4,E,I);try{I.call(E)}finally{Qs(5,E,I)}}else{Qs(4,p,_);try{_.call(p)}finally{Qs(5,p,_)}}}}}(o,c),function YO(o,c){const u=o.cleanup,h=c[yc];if(null!==u)for(let _=0;_<u.length-1;_+=2)if("string"==typeof u[_]){const w=u[_+3];w>=0?h[w]():h[-w].unsubscribe(),_+=2}else u[_].call(h[u[_+1]]);null!==h&&(c[yc]=null);const p=c[ua];if(null!==p){c[ua]=null;for(let _=0;_<p.length;_++)(0,p[_])()}}(o,c),1===c[vt].type&&c[Wt].destroy();const u=c[dh];if(null!==u&&Ur(c[pi])){u!==c[pi]&&hd(u,c);const h=c[cr];null!==h&&h.detachView(o)}!function a_(o){zh.delete(o[jo])}(c)}}function VD(o,c,u){return h1(o,c.parent,u)}function h1(o,c,u){let h=c;for(;null!==h&&40&h.type;)h=(c=h).parent;if(null===h)return u[fi];{const{componentOffset:p}=h;if(p>-1){const{encapsulation:_}=o.data[h.directiveStart+p];if(_===Zs.None||_===Zs.Emulated)return null}return Cr(h,u)}}function ql(o,c,u,h,p){o.insertBefore(c,u,h,p)}function UD(o,c,u){o.appendChild(c,u)}function l0(o,c,u,h,p){null!==h?ql(o,c,u,h,p):UD(o,c,u)}function d_(o,c){return o.parentNode(c)}function jD(o,c,u){return h_(o,c,u)}function f1(o,c,u){return 40&o.type?Cr(o,u):null}let GD,h0,KD,f0,h_=f1;function p1(o,c){h_=o,GD=c}function c0(o,c,u,h){const p=VD(o,h,c),_=c[Wt],E=jD(h.parent||c[Xi],h,c);if(null!=p)if(Array.isArray(u))for(let I=0;I<u.length;I++)l0(_,p,u[I],E,!1);else l0(_,p,u,E,!1);void 0!==GD&&GD(_,h,c,u,p)}function f_(o,c){if(null!==c){const u=c.type;if(3&u)return Cr(c,o);if(4&u)return $D(-1,o[c.index]);if(8&u){const h=c.child;if(null!==h)return f_(o,h);{const p=o[c.index];return Ur(p)?$D(-1,p):Hn(p)}}if(32&u)return ue(c,o)()||Hn(o[c.index]);{const h=g1(o,c);return null!==h?Array.isArray(h)?h[0]:f_(Xe(o[gi]),h):f_(o,c.next)}}return null}function g1(o,c){return null!==c?o[gi][Xi].projection[c.projection]:null}function $D(o,c){const u=Er+o+1;if(u<c.length){const h=c[u],p=h[vt].firstChild;if(null!==p)return f_(h,p)}return c[ur]}function zD(o,c,u,h,p,_,w){for(;null!=u;){const E=h[u.index],I=u.type;if(w&&0===c&&(E&&Jr(Hn(E),h),u.flags|=2),32!=(32&u.flags))if(8&I)zD(o,c,u.child,h,p,_,!1),Wc(c,o,p,E,_);else if(32&I){const N=ue(u,h);let k;for(;k=N();)Wc(c,o,p,k,_);Wc(c,o,p,E,_)}else 16&I?d0(o,c,h,u,p,_):Wc(c,o,p,E,_);u=w?u.projectionNext:u.next}}function As(o,c,u,h,p,_){zD(u,h,o.firstChild,c,p,_,!1)}function d0(o,c,u,h,p,_){const w=u[gi],I=w[Xi].projection[h.projection];if(Array.isArray(I))for(let N=0;N<I.length;N++)Wc(c,o,p,I[N],_);else{let N=I;const k=w[pi];od(h)&&(N.flags|=128),zD(o,c,N,k,p,_,!0)}}function qD(o,c,u){""===u?o.removeAttribute(c,"class"):o.setAttribute(c,"class",u)}function y1(o,c,u){const{mergedAttrs:h,classes:p,styles:_}=u;null!==h&&as(o,c,h),null!==p&&qD(o,c,p),null!==_&&function v1(o,c,u){o.setAttribute(c,"style",u)}(o,c,_)}function io(o){return function YD(){if(void 0===h0&&(h0=null,Un.trustedTypes))try{h0=Un.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return h0}()?.createHTML(o)||o}function ro(o){KD=o}function Yc(){if(void 0!==KD)return KD;if(typeof document<"u")return document;throw new pe(210,!1)}function qh(){if(void 0===f0&&(f0=null,Un.trustedTypes))try{f0=Un.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return f0}function b1(o){return qh()?.createHTML(o)||o}function QD(o){return qh()?.createScriptURL(o)||o}class Yh{constructor(c){this.changingThisBreaksApplicationSecurity=c}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Nt})`}}class JD extends Yh{getTypeName(){return"HTML"}}class E1 extends Yh{getTypeName(){return"Style"}}class C1 extends Yh{getTypeName(){return"Script"}}class JO extends Yh{getTypeName(){return"URL"}}class XO extends Yh{getTypeName(){return"ResourceURL"}}function ps(o){return o instanceof Yh?o.changingThisBreaksApplicationSecurity:o}function so(o,c){const u=function p0(o){return o instanceof Yh&&o.getTypeName()||null}(o);if(null!=u&&u!==c){if("ResourceURL"===u&&"URL"===c)return!0;throw new Error(`Required a safe ${c}, got a ${u} (see ${Nt})`)}return u===c}function ek(o){return new JD(o)}function tk(o){return new E1(o)}function zp(o){return new C1(o)}function p_(o){return new JO(o)}function T1(o){return new XO(o)}function I1(o){const c=new nk(o);return function ik(){try{return!!(new window.DOMParser).parseFromString(io(""),"text/html")}catch{return!1}}()?new S1(c):c}class S1{constructor(c){this.inertDocumentHelper=c}getInertBodyElement(c){c="<body><remove></remove>"+c;try{const u=(new window.DOMParser).parseFromString(io(c),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(c):(u.removeChild(u.firstChild),u)}catch{return null}}}class nk{constructor(c){this.defaultDoc=c,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(c){const u=this.inertDocument.createElement("template");return u.innerHTML=io(c),u}}const rk=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function g0(o){return(o=String(o)).match(rk)?o:"unsafe:"+o}function Yl(o){const c={};for(const u of o.split(","))c[u]=!0;return c}function Wp(...o){const c={};for(const u of o)for(const h in u)u.hasOwnProperty(h)&&(c[h]=!0);return c}const g_=Yl("area,br,col,hr,img,wbr"),m0=Yl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),A1=Yl("rp,rt"),XD=Wp(g_,Wp(m0,Yl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Wp(A1,Yl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Wp(A1,m0)),Ms=Yl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Zh=Wp(Ms,Yl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Yl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),N1=Yl("script,style,template");class ok{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(c){let u=c.firstChild,h=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?h=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,h&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let p=this.checkClobberedElement(u,u.nextSibling);if(p){u=p;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(c){const u=c.nodeName.toLowerCase();if(!XD.hasOwnProperty(u))return this.sanitizedSomething=!0,!N1.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const h=c.attributes;for(let p=0;p<h.length;p++){const _=h.item(p),w=_.name,E=w.toLowerCase();if(!Zh.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let I=_.value;Ms[E]&&(I=g0(I)),this.buf.push(" ",w,'="',x1(I),'"')}return this.buf.push(">"),!0}endElement(c){const u=c.nodeName.toLowerCase();XD.hasOwnProperty(u)&&!g_.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(c){this.buf.push(x1(c))}checkClobberedElement(c,u){if(u&&(c.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${c.outerHTML}`);return u}}const ak=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,il=/([^\#-~ |!])/g;function x1(o){return o.replace(/&/g,"&amp;").replace(ak,function(c){return"&#"+(1024*(c.charCodeAt(0)-55296)+(c.charCodeAt(1)-56320)+65536)+";"}).replace(il,function(c){return"&#"+c.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let _0;function R1(o,c){let u=null;try{_0=_0||I1(o);let h=c?String(c):"";u=_0.getInertBodyElement(h);let p=5,_=h;do{if(0===p)throw new Error("Failed to sanitize html because the input is unstable");p--,h=_,_=u.innerHTML,u=_0.getInertBodyElement(h)}while(h!==_);return io((new ok).sanitizeChildren(eE(u)||u))}finally{if(u){const h=eE(u)||u;for(;h.firstChild;)h.removeChild(h.firstChild)}}}function eE(o){return"content"in o&&function O1(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var Zo=function(o){return o[o.NONE=0]="NONE",o[o.HTML=1]="HTML",o[o.STYLE=2]="STYLE",o[o.SCRIPT=3]="SCRIPT",o[o.URL=4]="URL",o[o.RESOURCE_URL=5]="RESOURCE_URL",o}(Zo||{});function k1(o){const c=m_();return c?b1(c.sanitize(Zo.HTML,o)||""):so(o,"HTML")?b1(ps(o)):R1(Yc(),fe(o))}function tE(o){const c=m_();return c?c.sanitize(Zo.URL,o)||"":so(o,"URL")?ps(o):g0(fe(o))}function P1(o){const c=m_();if(c)return QD(c.sanitize(Zo.RESOURCE_URL,o)||"");if(so(o,"ResourceURL"))return QD(ps(o));throw new pe(904,!1)}function iE(o,c,u){return function nE(o,c){return"src"===c&&("embed"===o||"frame"===o||"iframe"===o||"media"===o||"script"===o)||"href"===c&&("base"===o||"link"===o)?P1:tE}(c,u)(o)}function m_(){const o=He();return o&&o[Al].sanitizer}class Yn{constructor(c,u){this._desc=c,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=xt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const qp=new Yn("ENVIRONMENT_INITIALIZER"),L1=new Yn("INJECTOR",-1),B1=new Yn("INJECTOR_DEF_TYPES");class v0{get(c,u=et){if(u===et){const h=new Error(`NullInjectorError: No provider for ${le(c)}!`);throw h.name="NullInjectorError",h}return u}}function rE(o){return{\u0275providers:o}}function V1(...o){return{\u0275providers:U1(0,o),\u0275fromNgModule:!0}}function U1(o,...c){const u=[],h=new Set;let p;const _=w=>{u.push(w)};return $l(c,w=>{const E=w;__(E,_,[],h)&&(p||=[],p.push(E))}),void 0!==p&&y0(p,_),u}function y0(o,c){for(let u=0;u<o.length;u++){const{ngModule:h,providers:p}=o[u];w0(p,_=>{c(_,h)})}}function __(o,c,u,h){if(!(o=$e(o)))return!1;let p=null,_=ss(o);const w=!_&&yn(o);if(_||w){if(w&&!w.standalone)return!1;p=o}else{const I=o.ngModule;if(_=ss(I),!_)return!1;p=I}const E=h.has(p);if(w){if(E)return!1;if(h.add(p),w.dependencies){const I="function"==typeof w.dependencies?w.dependencies():w.dependencies;for(const N of I)__(N,c,u,h)}}else{if(!_)return!1;{if(null!=_.imports&&!E){let N;h.add(p);try{$l(_.imports,k=>{__(k,c,u,h)&&(N||=[],N.push(k))})}finally{}void 0!==N&&y0(N,c)}if(!E){const N=ja(p)||(()=>new p);c({provide:p,useFactory:N,deps:vn},p),c({provide:B1,useValue:p,multi:!0},p),c({provide:qp,useValue:()=>Kt(p),multi:!0},p)}const I=_.providers;if(null!=I&&!E){const N=o;w0(I,k=>{c(k,N)})}}}return p!==o&&void 0!==o.providers}function w0(o,c){for(let u of o)ze(u)&&(u=u.\u0275providers),Array.isArray(u)?w0(u,c):c(u)}const vV=$({provide:String,useValue:$});function H1(o){return null!==o&&"object"==typeof o&&vV in o}function Kh(o){return"function"==typeof o}const sE=new Yn("Set Injector scope."),b0={},pk={};let oE;function v_(){return void 0===oE&&(oE=new v0),oE}class Zl{}class aE extends Zl{get destroyed(){return this._destroyed}constructor(c,u,h,p){super(),this.parent=u,this.source=h,this.scopes=p,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,rl(c,w=>this.processProvider(w)),this.records.set(L1,Yp(void 0,this)),p.has("environment")&&this.records.set(Zl,Yp(void 0,this));const _=this.records.get(sE);null!=_&&"string"==typeof _.value&&this.scopes.add(_.value),this.injectorDefTypes=new Set(this.get(B1.multi,vn,Gt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const u of this._ngOnDestroyHooks)u.ngOnDestroy();const c=this._onDestroyHooks;this._onDestroyHooks=[];for(const u of c)u()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(c){return this.assertNotDestroyed(),this._onDestroyHooks.push(c),()=>this.removeOnDestroy(c)}runInContext(c){this.assertNotDestroyed();const u=wt(this),h=Jt(void 0);try{return c()}finally{wt(u),Jt(h)}}get(c,u=et,h=Gt.Default){if(this.assertNotDestroyed(),c.hasOwnProperty(Il))return c[Il](this);h=ji(h);const _=wt(this),w=Jt(void 0);try{if(!(h&Gt.SkipSelf)){let I=this.records.get(c);if(void 0===I){const N=function z1(o){return"function"==typeof o||"object"==typeof o&&o instanceof Yn}(c)&&Ci(c);I=N&&this.injectableDefInScope(N)?Yp(D0(c),b0):null,this.records.set(c,I)}if(null!=I)return this.hydrate(c,I)}return(h&Gt.Self?v_():this.parent).get(c,u=h&Gt.Optional&&u===et?null:u)}catch(E){if("NullInjectorError"===E.name){if((E[Ft]=E[Ft]||[]).unshift(le(c)),_)throw E;return function Cl(o,c,u,h){const p=o[Ft];throw c[ne]&&p.unshift(c[ne]),o.message=function sh(o,c,u,h=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.slice(2):o;let p=le(c);if(Array.isArray(c))p=c.map(le).join(" -> ");else if("object"==typeof c){let _=[];for(let w in c)if(c.hasOwnProperty(w)){let E=c[w];_.push(w+":"+("string"==typeof E?JSON.stringify(E):le(E)))}p=`{${_.join(", ")}}`}return`${u}${h?"("+h+")":""}[${p}]: ${o.replace(q,"\n  ")}`}("\n"+o.message,p,u,h),o.ngTokenPath=p,o[Ft]=null,o}(E,c,"R3InjectorError",this.source)}throw E}finally{Jt(w),wt(_)}}resolveInjectorInitializers(){const c=wt(this),u=Jt(void 0);try{const p=this.get(qp.multi,vn,Gt.Self);for(const _ of p)_()}finally{wt(c),Jt(u)}}toString(){const c=[],u=this.records;for(const h of u.keys())c.push(le(h));return`R3Injector[${c.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new pe(205,!1)}processProvider(c){let u=Kh(c=$e(c))?c:$e(c&&c.provide);const h=function wV(o){return H1(o)?Yp(void 0,o.useValue):Yp(G1(o),b0)}(c);if(Kh(c)||!0!==c.multi)this.records.get(u);else{let p=this.records.get(u);p||(p=Yp(void 0,b0,!0),p.factory=()=>In(p.multi),this.records.set(u,p)),u=c,p.multi.push(c)}this.records.set(u,h)}hydrate(c,u){return u.value===b0&&(u.value=pk,u.value=u.factory()),"object"==typeof u.value&&u.value&&function $1(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(c){if(!c.providedIn)return!1;const u=$e(c.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}removeOnDestroy(c){const u=this._onDestroyHooks.indexOf(c);-1!==u&&this._onDestroyHooks.splice(u,1)}}function D0(o){const c=Ci(o),u=null!==c?c.factory:ja(o);if(null!==u)return u;if(o instanceof Yn)throw new pe(204,!1);if(o instanceof Function)return function yV(o){const c=o.length;if(c>0)throw nl(c,"?"),new pe(204,!1);const u=function $r(o){return o&&(o[Ai]||o[_o])||null}(o);return null!==u?()=>u.factory(o):()=>new o}(o);throw new pe(204,!1)}function G1(o,c,u){let h;if(Kh(o)){const p=$e(o);return ja(p)||D0(p)}if(H1(o))h=()=>$e(o.useValue);else if(function j1(o){return!(!o||!o.useFactory)}(o))h=()=>o.useFactory(...In(o.deps||[]));else if(function hk(o){return!(!o||!o.useExisting)}(o))h=()=>Kt($e(o.useExisting));else{const p=$e(o&&(o.useClass||o.provide));if(!function E0(o){return!!o.deps}(o))return ja(p)||D0(p);h=()=>new p(...In(o.deps))}return h}function Yp(o,c,u=!1){return{factory:o,value:c,multi:u?[]:void 0}}function rl(o,c){for(const u of o)Array.isArray(u)?rl(u,c):u&&ze(u)?rl(u.\u0275providers,c):c(u)}const lE=new Yn("AppId",{providedIn:"root",factory:()=>W1}),W1="ng",q1=new Yn("Platform Initializer"),cE=new Yn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),gk=new Yn("AnimationModuleType"),mk=new Yn("CSP nonce",{providedIn:"root",factory:()=>Yc().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let wk=(o,c,u)=>null;function pE(o,c,u=!1){return wk(o,c,u)}class $s{}class b_{}class Q1{resolveComponentFactory(c){throw function gs(o){const c=Error(`No component factory found for ${le(o)}.`);return c.ngComponent=o,c}(c)}}let Jh=(()=>{class o{static#e=this.NULL=new Q1}return o})();function J1(){return Nr(gr(),He())}function Nr(o,c){return new D_(Cr(o,c))}let D_=(()=>{class o{constructor(u){this.nativeElement=u}static#e=this.__NG_ELEMENT_ID__=J1}return o})();function E_(o){return o instanceof D_?o.nativeElement:o}class C_{}let Jl=(()=>{class o{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function yE(){const o=He(),u=Tr(gr().index,o);return(hr(u)?u:o)[Wt]}()}return o})(),bk=(()=>{class o{static#e=this.\u0275prov=xt({token:o,providedIn:"root",factory:()=>null})}return o})();class X1{constructor(c){this.full=c,this.major=c.split(".")[0],this.minor=c.split(".")[1],this.patch=c.split(".").slice(2).join(".")}}const Xh=new X1("16.2.8"),M0={};function Qp(o,c=null,u=null,h){const p=rA(o,c,u,h);return p.resolveInjectorInitializers(),p}function rA(o,c=null,u=null,h,p=new Set){const _=[u||vn,V1(o)];return h=h||("object"==typeof o?void 0:le(o)),new aE(_,c||v_(),h||null,p)}let oo=(()=>{class o{static#e=this.THROW_IF_NOT_FOUND=et;static#t=this.NULL=new v0;static create(u,h){if(Array.isArray(u))return Qp({name:""},h,u,"");{const p=u.name??"";return Qp({name:p},u.parent,u.providers,p)}}static#n=this.\u0275prov=xt({token:o,providedIn:"any",factory:()=>Kt(L1)});static#i=this.__NG_ELEMENT_ID__=-1}return o})();function Jp(o){return o.ngOriginalError}class Xl{constructor(){this._console=console}handleError(c){const u=this._findOriginalError(c);this._console.error("ERROR",c),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(c){let u=c&&Jp(c);for(;u&&Jp(u);)u=Jp(u);return u||null}}function Xp(o){return c=>{setTimeout(o,void 0,c)}}const ba=class aA extends a.x{constructor(c=!1){super(),this.__isAsync=c}emit(c){super.next(c)}subscribe(c,u,h){let p=c,_=u||(()=>null),w=h;if(c&&"object"==typeof c){const I=c;p=I.next?.bind(I),_=I.error?.bind(I),w=I.complete?.bind(I)}this.__isAsync&&(_=Xp(_),p&&(p=Xp(p)),w&&(w=Xp(w)));const E=super.subscribe({next:p,error:_,complete:w});return c instanceof ie.w0&&c.add(E),E}};function O0(...o){}class es{constructor({enableLongStackTrace:c=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ba(!1),this.onMicrotaskEmpty=new ba(!1),this.onStable=new ba(!1),this.onError=new ba(!1),typeof Zone>"u")throw new pe(908,!1);Zone.assertZonePatched();const p=this;p._nesting=0,p._outer=p._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),c&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!h&&u,p.shouldCoalesceRunChangeDetection=h,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function CE(){const o="function"==typeof Un.requestAnimationFrame;let c=Un[o?"requestAnimationFrame":"setTimeout"],u=Un[o?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&c&&u){const h=c[Zone.__symbol__("OriginalDelegate")];h&&(c=h);const p=u[Zone.__symbol__("OriginalDelegate")];p&&(u=p)}return{nativeRequestAnimationFrame:c,nativeCancelAnimationFrame:u}}().nativeRequestAnimationFrame,function dA(o){const c=()=>{!function uA(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(Un,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,T_(o),o.isCheckStableRunning=!0,TE(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),T_(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,h,p,_,w,E)=>{if(function ms(o){return!(!Array.isArray(o)||1!==o.length)&&!0===o[0].data?.__ignore_ng_zone__}(E))return u.invokeTask(p,_,w,E);try{return IE(o),u.invokeTask(p,_,w,E)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||o.shouldCoalesceRunChangeDetection)&&c(),hA(o)}},onInvoke:(u,h,p,_,w,E,I)=>{try{return IE(o),u.invoke(p,_,w,E,I)}finally{o.shouldCoalesceRunChangeDetection&&c(),hA(o)}},onHasTask:(u,h,p,_)=>{u.hasTask(p,_),h===p&&("microTask"==_.change?(o._hasPendingMicrotasks=_.microTask,T_(o),TE(o)):"macroTask"==_.change&&(o.hasPendingMacrotasks=_.macroTask))},onHandleError:(u,h,p,_)=>(u.handleError(p,_),o.runOutsideAngular(()=>o.onError.emit(_)),!1)})}(p)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!es.isInAngularZone())throw new pe(909,!1)}static assertNotInAngularZone(){if(es.isInAngularZone())throw new pe(909,!1)}run(c,u,h){return this._inner.run(c,u,h)}runTask(c,u,h,p){const _=this._inner,w=_.scheduleEventTask("NgZoneEvent: "+p,c,cA,O0,O0);try{return _.runTask(w,u,h)}finally{_.cancelTask(w)}}runGuarded(c,u,h){return this._inner.runGuarded(c,u,h)}runOutsideAngular(c){return this._outer.run(c)}}const cA={};function TE(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function T_(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function IE(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function hA(o){o._nesting--,TE(o)}class SE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ba,this.onMicrotaskEmpty=new ba,this.onStable=new ba,this.onError=new ba}run(c,u,h){return c.apply(u,h)}runGuarded(c,u,h){return c.apply(u,h)}runOutsideAngular(c){return c()}runTask(c,u,h,p){return c.apply(u,h)}}const k0=new Yn("",{providedIn:"root",factory:P0});function P0(){const o=sn(es);let c=!0;const u=new V.y(p=>{c=o.isStable&&!o.hasPendingMacrotasks&&!o.hasPendingMicrotasks,o.runOutsideAngular(()=>{p.next(c),p.complete()})}),h=new V.y(p=>{let _;o.runOutsideAngular(()=>{_=o.onStable.subscribe(()=>{es.assertNotInAngularZone(),queueMicrotask(()=>{!c&&!o.hasPendingMacrotasks&&!o.hasPendingMicrotasks&&(c=!0,p.next(!0))})})});const w=o.onUnstable.subscribe(()=>{es.assertInAngularZone(),c&&(c=!1,o.runOutsideAngular(()=>{p.next(!1)}))});return()=>{_.unsubscribe(),w.unsubscribe()}});return(0,re.T)(u,h.pipe((0,Ae.B)()))}function Qc(o){return o instanceof Function?o():o}let ef=(()=>{class o{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=xt({token:o,providedIn:"root",factory:()=>new o})}return o})();function Jc(o){for(;o;){o[zt]|=64;const c=Xe(o);if(Nl(o)&&!c)return o;o=c}return null}const mA=new Yn("",{providedIn:"root",factory:()=>!1});let Xc=null;function bA(o,c){return o[c]??xE()}function _d(o,c){const u=xE();u.producerNode?.length&&(o[c]=Xc,u.lView=o,Xc=S_())}const DA={...$a,consumerIsAlwaysLive:!0,consumerMarkedDirty:o=>{Jc(o.lView)},lView:null};function S_(){return Object.create(DA)}function xE(){return Xc??=S_(),Xc}const rn={};function RE(o){zs(gn(),He(),rt()+o,!1)}function zs(o,c,u,h){if(!h)if(3==(3&c[zt])){const _=o.preOrderCheckHooks;null!==_&&Bl(c,_,u)}else{const _=o.preOrderHooks;null!==_&&Zu(c,_,0,u)}zo(u)}function tf(o,c=Gt.Default){const u=He();return null===u?Kt(o,c):Xa(gr(),u,$e(o),c)}function ig(){throw new Error("invalid")}function A_(o,c,u,h,p,_,w,E,I,N,k){const G=c.blueprint.slice();return G[fi]=p,G[zt]=140|h,(null!==N||o&&2048&o[zt])&&(G[zt]|=2048),Gm(G),G[pi]=G[Ho]=o,G[zn]=u,G[Al]=w||o&&o[Al],G[Wt]=E||o&&o[Wt],G[Uo]=I||o&&o[Uo]||null,G[Xi]=_,G[jo]=function t0(){return ld++}(),G[Ts]=k,G[Go]=N,G[gi]=2==c.type?o[gi]:G,G}function vd(o,c,u,h,p){let _=o.data[c];if(null===_)_=H0(o,c,u,h,p),function xh(){return qt.lFrame.inI18n}()&&(_.flags|=32);else if(64&_.type){_.type=u,_.value=h,_.attrs=p;const w=Ll();_.injectorIndex=null===w?-1:w.injectorIndex}return ga(_,!0),_}function H0(o,c,u,h,p){const _=zu(),w=Ka(),I=o.data[c]=function IA(o,c,u,h,p,_){let w=c?c.injectorIndex:-1,E=0;return To()&&(E|=128),{type:u,index:h,insertBeforeIndex:null,injectorIndex:w,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:E,providerIndexes:0,value:p,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:c,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?_:_&&_.parent,u,c,h,p);return null===o.firstChild&&(o.firstChild=I),null!==_&&(w?null==_.child&&null!==I.parent&&(_.child=I):null===_.next&&(_.next=I,I.prev=_)),I}function rg(o,c,u,h){if(0===u)return-1;const p=c.length;for(let _=0;_<u;_++)c.push(h),o.blueprint.push(h),o.data.push(null);return p}function sg(o,c,u,h,p){const _=bA(c,wc),w=rt(),E=2&h;try{zo(-1),E&&c.length>ln&&zs(o,c,ln,!1),Qs(E?2:0,p);const N=E?_:null,k=cp(N);try{null!==N&&(N.dirty=!1),u(h,p)}finally{fr(N,k)}}finally{E&&null===c[wc]&&_d(c,wc),zo(w),Qs(E?3:1,p)}}function M_(o,c,u){if(Ou(c)){const h=us(null);try{const _=c.directiveEnd;for(let w=c.directiveStart;w<_;w++){const E=o.data[w];E.contentQueries&&E.contentQueries(1,u[w],w)}}finally{us(h)}}}function N_(o,c,u){Ir()&&(function sf(o,c,u,h){const p=u.directiveStart,_=u.directiveEnd;Ha(u)&&function Ak(o,c,u){const h=Cr(c,o),p=R_(u);let w=16;u.signals?w=4096:u.onPush&&(w=64);const E=F_(o,A_(o,p,null,w,h,c,null,o[Al].rendererFactory.createRenderer(h,u),null,null,null));o[c.index]=E}(c,u,o.data[p+u.componentOffset]),o.firstCreatePass||mr(u,c),Jr(h,c);const w=u.initialInputs;for(let E=p;E<_;E++){const I=o.data[E],N=el(c,o,E,u);Jr(N,c),null!==w&&Mk(0,E-p,N,I,0,w),cs(I)&&(Tr(u.index,c)[zn]=el(c,o,E,u))}}(o,c,u,Cr(u,c)),64==(64&u.flags)&&ec(o,c,u))}function x_(o,c,u=Cr){const h=c.localNames;if(null!==h){let p=c.index+1;for(let _=0;_<h.length;_+=2){const w=h[_+1],E=-1===w?u(c,o):o[w];o[p++]=E}}}function R_(o){const c=o.tView;return null===c||c.incompleteFirstPass?o.tView=nf(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts,o.id):c}function nf(o,c,u,h,p,_,w,E,I,N,k){const G=ln+h,K=G+p,ae=function EA(o,c){const u=[];for(let h=0;h<c;h++)u.push(h<o?null:rn);return u}(G,K),Oe="function"==typeof N?N():N;return ae[vt]={type:o,blueprint:ae,template:u,queries:null,viewQuery:E,declTNode:c,data:ae.slice().fill(null,G),bindingStartIndex:G,expandoStartIndex:K,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:I,consts:Oe,incompleteFirstPass:!1,ssrId:k}}let O_=o=>null;function SA(o,c,u,h){for(let p in o)if(o.hasOwnProperty(p)){u=null===u?{}:u;const _=o[p];null===h?og(u,c,p,_):h.hasOwnProperty(p)&&og(u,c,h[p],_)}return u}function og(o,c,u,h){o.hasOwnProperty(u)?o[u].push(c,h):o[u]=[c,h]}function xs(o,c,u,h,p,_,w,E){const I=Cr(c,u);let k,N=c.inputs;!E&&null!=N&&(k=N[h])?(UE(o,u,k,h,p),Ha(c)&&function rf(o,c){const u=Tr(c,o);16&u[zt]||(u[zt]|=64)}(u,c.index)):3&c.type&&(h=function j0(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(h),p=null!=w?w(p,c.value||"",h):p,_.setProperty(I,h,p))}function FE(o,c,u,h){if(Ir()){const p=null===h?null:{"":-1},_=function $0(o,c){const u=o.directiveRegistry;let h=null,p=null;if(u)for(let _=0;_<u.length;_++){const w=u[_];if(Su(c,w.selectors,!1))if(h||(h=[]),cs(w))if(null!==w.findHostDirectiveDefs){const E=[];p=p||new Map,w.findHostDirectiveDefs(w,E,p),h.unshift(...E,w),z0(o,c,E.length)}else h.unshift(w),z0(o,c,0);else p=p||new Map,w.findHostDirectiveDefs?.(w,h,p),h.push(w)}return null===h?null:[h,p]}(o,u);let w,E;null===_?w=E=null:[w,E]=_,null!==w&&LE(o,c,u,w,p,E),p&&function Ri(o,c,u){if(c){const h=o.localNames=[];for(let p=0;p<c.length;p+=2){const _=u[c[p+1]];if(null==_)throw new pe(-301,!1);h.push(c[p],_)}}}(u,h,p)}u.mergedAttrs=ka(u.mergedAttrs,u.attrs)}function LE(o,c,u,h,p,_){for(let N=0;N<h.length;N++)Hl(mr(u,c),o,h[N].type);!function k_(o,c,u){o.flags|=1,o.directiveStart=c,o.directiveEnd=c+u,o.providerIndexes=c}(u,o.data.length,h.length);for(let N=0;N<h.length;N++){const k=h[N];k.providersResolver&&k.providersResolver(k)}let w=!1,E=!1,I=rg(o,c,h.length,null);for(let N=0;N<h.length;N++){const k=h[N];u.mergedAttrs=ka(u.mergedAttrs,k.hostAttrs),P_(o,u,c,I,k),W0(I,k,p),null!==k.contentQueries&&(u.flags|=4),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(u.flags|=64);const G=k.type.prototype;!w&&(G.ngOnChanges||G.ngOnInit||G.ngDoCheck)&&((o.preOrderHooks??=[]).push(u.index),w=!0),!E&&(G.ngOnChanges||G.ngDoCheck)&&((o.preOrderCheckHooks??=[]).push(u.index),E=!0),I++}!function AA(o,c,u){const p=c.directiveEnd,_=o.data,w=c.attrs,E=[];let I=null,N=null;for(let k=c.directiveStart;k<p;k++){const G=_[k],K=u?u.get(G):null,Oe=K?K.outputs:null;I=SA(G.inputs,k,I,K?K.inputs:null),N=SA(G.outputs,k,N,Oe);const Qe=null===I||null===w||Mi(c)?null:Nk(I,k,w);E.push(Qe)}null!==I&&(I.hasOwnProperty("class")&&(c.flags|=8),I.hasOwnProperty("style")&&(c.flags|=16)),c.initialInputs=E,c.inputs=I,c.outputs=N}(o,u,_)}function ec(o,c,u){const h=u.directiveStart,p=u.directiveEnd,_=u.index,w=function Uy(){return qt.lFrame.currentDirectiveIndex}();try{zo(_);for(let E=h;E<p;E++){const I=o.data[E],N=c[E];qu(E),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&G0(I,N)}}finally{zo(-1),qu(w)}}function G0(o,c){null!==o.hostBindings&&o.hostBindings(1,c)}function z0(o,c,u){c.componentOffset=u,(o.components??=[]).push(c.index)}function W0(o,c,u){if(u){if(c.exportAs)for(let h=0;h<c.exportAs.length;h++)u[c.exportAs[h]]=o;cs(c)&&(u[""]=o)}}function P_(o,c,u,h,p){o.data[h]=p;const _=p.factory||(p.factory=ja(p.type)),w=new hn(_,cs(p),tf);o.blueprint[h]=w,u[h]=w,function MA(o,c,u,h,p){const _=p.hostBindings;if(_){let w=o.hostBindingOpCodes;null===w&&(w=o.hostBindingOpCodes=[]);const E=~c.index;(function Sk(o){let c=o.length;for(;c>0;){const u=o[--c];if("number"==typeof u&&u<0)return u}return 0})(w)!=E&&w.push(E),w.push(u,h,_)}}(o,c,h,rg(o,u,p.hostVars,rn),p)}function sl(o,c,u,h,p,_){const w=Cr(o,c);!function BE(o,c,u,h,p,_,w){if(null==_)o.removeAttribute(c,p,u);else{const E=null==w?fe(_):w(_,h||"",p);o.setAttribute(c,p,E,u)}}(c[Wt],w,_,o.value,u,h,p)}function Mk(o,c,u,h,p,_){const w=_[c];if(null!==w)for(let E=0;E<w.length;)NA(h,u,w[E++],w[E++],w[E++])}function NA(o,c,u,h,p){const _=us(null);try{const w=o.inputTransforms;null!==w&&w.hasOwnProperty(h)&&(p=w[h].call(c,p)),null!==o.setInput?o.setInput(c,p,u,h):c[h]=p}finally{us(_)}}function Nk(o,c,u){let h=null,p=0;for(;p<u.length;){const _=u[p];if(0!==_)if(5!==_){if("number"==typeof _)break;if(o.hasOwnProperty(_)){null===h&&(h=[]);const w=o[_];for(let E=0;E<w.length;E+=2)if(w[E]===c){h.push(_,w[E+1],u[p+1]);break}}p+=2}else p+=2;else p+=4}return h}function ag(o,c,u,h){return[o,!0,!1,c,null,0,h,u,null,null,null]}function eu(o,c){const u=o.contentQueries;if(null!==u)for(let h=0;h<u.length;h+=2){const _=u[h+1];if(-1!==_){const w=o.data[_];Dp(u[h]),w.contentQueries(2,c[_],_)}}}function F_(o,c){return o[Dr]?o[ip][Yr]=c:o[Dr]=c,o[ip]=c,c}function q0(o,c,u){Dp(0);const h=us(null);try{c(o,u)}finally{us(h)}}function af(o){return o[yc]||(o[yc]=[])}function xA(o){return o.cleanup||(o.cleanup=[])}function RA(o,c,u){return(null===o||cs(o))&&(u=function pa(o){for(;Array.isArray(o);){if("object"==typeof o[Ml])return o;o=o[fi]}return null}(u[c.index])),u[Wt]}function VE(o,c){const u=o[Uo],h=u?u.get(Xl,null):null;h&&h.handleError(c)}function UE(o,c,u,h,p){for(let _=0;_<u.length;){const w=u[_++],E=u[_++];NA(o.data[w],c[w],h,E,p)}}function OA(o,c){const u=Tr(c,o),h=u[vt];!function HE(o,c){for(let u=c.length;u<o.blueprint.length;u++)c.push(o.blueprint[u])}(h,u);const p=u[fi];null!==p&&null===u[Ts]&&(u[Ts]=pE(p,u[Uo])),L_(h,u,u[zn])}function L_(o,c,u){si(c);try{const h=o.viewQuery;null!==h&&q0(1,h,u);const p=o.template;null!==p&&sg(o,c,p,1,u),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&eu(o,c),o.staticViewQueries&&q0(2,o.viewQuery,u);const _=o.components;null!==_&&function kA(o,c){for(let u=0;u<c.length;u++)OA(o,c[u])}(c,_)}catch(h){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),h}finally{c[zt]&=-5,Sr()}}let jE=(()=>{class o{constructor(){this.all=new Set,this.queue=new Map}create(u,h,p){const _=typeof Zone>"u"?null:Zone.current,w=function Fy(o,c,u){const h=Object.create(Fm);u&&(h.consumerAllowSignalWrites=!0),h.fn=o,h.schedule=c;const p=w=>{h.cleanupFn=w};return h.ref={notify:()=>Cc(h),run:()=>{if(h.dirty=!1,h.hasRun&&!vh(h))return;h.hasRun=!0;const w=cp(h);try{h.cleanupFn(),h.cleanupFn=Ch,h.fn(p)}finally{fr(h,w)}},cleanup:()=>h.cleanupFn()},h.ref}(u,N=>{this.all.has(N)&&this.queue.set(N,_)},p);let E;this.all.add(w),w.notify();const I=()=>{w.cleanup(),E?.(),this.all.delete(w),this.queue.delete(w)};return E=h?.onDestroy(I),{destroy:I}}flush(){if(0!==this.queue.size)for(const[u,h]of this.queue)this.queue.delete(u),h?h.run(()=>u.run()):u.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=xt({token:o,providedIn:"root",factory:()=>new o})}return o})();function Y0(o,c,u){let h=u?o.styles:null,p=u?o.classes:null,_=0;if(null!==c)for(let w=0;w<c.length;w++){const E=c[w];"number"==typeof E?_=E:1==_?p=Ze(p,E):2==_&&(h=Ze(h,E+": "+c[++w]+";"))}u?o.styles=h:o.stylesWithoutHost=h,u?o.classes=p:o.classesWithoutHost=p}function B_(o,c,u,h,p=!1){for(;null!==u;){const _=c[u.index];null!==_&&h.push(Hn(_)),Ur(_)&&PA(_,h);const w=u.type;if(8&w)B_(o,c,u.child,h);else if(32&w){const E=ue(u,c);let I;for(;I=E();)h.push(I)}else if(16&w){const E=g1(c,u);if(Array.isArray(E))h.push(...E);else{const I=Xe(c[gi]);B_(I[vt],I,E,h,!0)}}u=p?u.projectionNext:u.next}return h}function PA(o,c){for(let u=Er;u<o.length;u++){const h=o[u],p=h[vt].firstChild;null!==p&&B_(h[vt],h,p,c)}o[ur]!==o[fi]&&c.push(o[ur])}function lf(o,c,u,h=!0){const p=c[Al],_=p.rendererFactory,w=p.afterRenderEventManager;_.begin?.(),w?.begin();try{Q0(o,c,o.template,u)}catch(I){throw h&&VE(c,I),I}finally{_.end?.(),p.effectManager?.flush(),w?.end()}}function Q0(o,c,u,h){const p=c[zt];if(256!=(256&p)){c[Al].effectManager?.flush(),si(c);try{Gm(c),function wp(o){return qt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==u&&sg(o,c,u,2,h);const w=3==(3&p);if(w){const N=o.preOrderCheckHooks;null!==N&&Bl(c,N,null)}else{const N=o.preOrderHooks;null!==N&&Zu(c,N,0,null),qo(c,0)}if(function V_(o){for(let c=Si(o);null!==c;c=no(c)){if(!c[Ru])continue;const u=c[dr];for(let h=0;h<u.length;h++){Sh(u[h])}}}(c),GE(c,2),null!==o.contentQueries&&eu(o,c),w){const N=o.contentCheckHooks;null!==N&&Bl(c,N)}else{const N=o.contentHooks;null!==N&&Zu(c,N,1),qo(c,1)}!function U0(o,c){const u=o.hostBindingOpCodes;if(null===u)return;const h=bA(c,da);try{for(let p=0;p<u.length;p++){const _=u[p];if(_<0)zo(~_);else{const w=_,E=u[++p],I=u[++p];Wu(E,w),h.dirty=!1;const N=cp(h);try{I(2,c[w])}finally{fr(h,N)}}}}finally{null===c[da]&&_d(c,da),zo(-1)}}(o,c);const E=o.components;null!==E&&ir(c,E,0);const I=o.viewQuery;if(null!==I&&q0(2,I,h),w){const N=o.viewCheckHooks;null!==N&&Bl(c,N)}else{const N=o.viewHooks;null!==N&&Zu(c,N,2),qo(c,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),c[zt]&=-73,Vu(c)}finally{Sr()}}}function GE(o,c){for(let u=Si(o);null!==u;u=no(u))for(let h=Er;h<u.length;h++)FA(u[h],c)}function U_(o,c,u){FA(Tr(c,o),u)}function FA(o,c){if(!function Fl(o){return 128==(128&o[zt])}(o))return;const u=o[vt],h=o[zt];if(80&h&&0===c||1024&h||2===c)Q0(u,o,u.template,o[zn]);else if(o[Ba]>0){GE(o,1);const p=u.components;null!==p&&ir(o,p,1)}}function ir(o,c,u){for(let h=0;h<c.length;h++)U_(o,c[h],u)}class lg{get rootNodes(){const c=this._lView,u=c[vt];return B_(u,c,u.firstChild,[])}constructor(c,u){this._lView=c,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[zn]}set context(c){this._lView[zn]=c}get destroyed(){return 256==(256&this._lView[zt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const c=this._lView[pi];if(Ur(c)){const u=c[8],h=u?u.indexOf(this):-1;h>-1&&(Xr(c,h),Lh(u,h))}this._attachedToViewContainer=!1}LD(this._lView[vt],this._lView)}onDestroy(c){!function ri(o,c){if(256==(256&o[zt]))throw new pe(911,!1);null===o[ua]&&(o[ua]=[]),o[ua].push(c)}(this._lView,c)}markForCheck(){Jc(this._cdRefInjectingView||this._lView)}detach(){this._lView[zt]&=-129}reattach(){this._lView[zt]|=128}detectChanges(){lf(this._lView[vt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new pe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Wl(o,c){As(o,c,c[Wt],2,null,null)}(this._lView[vt],this._lView)}attachToAppRef(c){if(this._attachedToViewContainer)throw new pe(902,!1);this._appRef=c}}class Ok extends lg{constructor(c){super(c),this._view=c}detectChanges(){const c=this._view;lf(c[vt],c,c[zn],!1)}checkNoChanges(){}get context(){return null}}class LA extends Jh{constructor(c){super(),this.ngModule=c}resolveComponentFactory(c){const u=yn(c);return new cg(u,this.ngModule)}}function BA(o){const c=[];for(let u in o)o.hasOwnProperty(u)&&c.push({propName:o[u],templateName:u});return c}class UA{constructor(c,u){this.injector=c,this.parentInjector=u}get(c,u,h){h=ji(h);const p=this.injector.get(c,M0,h);return p!==M0||u===M0?p:this.parentInjector.get(c,u,h)}}class cg extends b_{get inputs(){const c=this.componentDef,u=c.inputTransforms,h=BA(c.inputs);if(null!==u)for(const p of h)u.hasOwnProperty(p.propName)&&(p.transform=u[p.propName]);return h}get outputs(){return BA(this.componentDef.outputs)}constructor(c,u){super(),this.componentDef=c,this.ngModule=u,this.componentType=c.type,this.selector=function tp(o){return o.map(Ji).join(",")}(c.selectors),this.ngContentSelectors=c.ngContentSelectors?c.ngContentSelectors:[],this.isBoundToModule=!!u}create(c,u,h,p){let _=(p=p||this.ngModule)instanceof Zl?p:p?.injector;_&&null!==this.componentDef.getStandaloneInjector&&(_=this.componentDef.getStandaloneInjector(_)||_);const w=_?new UA(c,_):c,E=w.get(C_,null);if(null===E)throw new pe(407,!1);const G={rendererFactory:E,sanitizer:w.get(bk,null),effectManager:w.get(jE,null),afterRenderEventManager:w.get(ef,null)},K=E.createRenderer(null,this.componentDef),ae=this.componentDef.selectors[0][0]||"div",Oe=h?function Ik(o,c,u,h){const _=h.get(mA,!1)||u===Zs.ShadowDom,w=o.selectRootElement(c,_);return function OE(o){O_(o)}(w),w}(K,h,this.componentDef.encapsulation,w):dd(K,ae,function VA(o){const c=o.toLowerCase();return"svg"===c?"svg":"math"===c?"math":null}(ae)),Ut=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let qe=null;null!==Oe&&(qe=pE(Oe,w,!0));const an=nf(0,null,null,1,0,null,null,null,null,null,null),wn=A_(null,an,null,Ut,null,null,G,K,w,null,qe);let vi,Po;si(wn);try{const pu=this.componentDef;let Lf,Bf=null;pu.findHostDirectiveDefs?(Lf=[],Bf=new Map,pu.findHostDirectiveDefs(pu,Lf,Bf),Lf.push(pu)):Lf=[pu];const lF=function HA(o,c){const u=o[vt],h=ln;return o[h]=c,vd(u,h,2,"#host",null)}(wn,Oe),lc=function nc(o,c,u,h,p,_,w){const E=p[vt];!function jA(o,c,u,h){for(const p of o)c.mergedAttrs=ka(c.mergedAttrs,p.hostAttrs);null!==c.mergedAttrs&&(Y0(c,c.mergedAttrs,!0),null!==u&&y1(h,u,c))}(h,o,c,w);let I=null;null!==c&&(I=pE(c,p[Uo]));const N=_.rendererFactory.createRenderer(c,u);let k=16;u.signals?k=4096:u.onPush&&(k=64);const G=A_(p,R_(u),null,k,p[o.index],o,_,N,null,null,I);return E.firstCreatePass&&z0(E,o,h.length-1),F_(p,G),p[o.index]=G}(lF,Oe,pu,Lf,wn,G,K);Po=Ih(an,ln),Oe&&function GA(o,c,u,h){if(h)as(o,u,["ng-version",Xh.full]);else{const{attrs:p,classes:_}=function Us(o){const c=[],u=[];let h=1,p=2;for(;h<o.length;){let _=o[h];if("string"==typeof _)2===p?""!==_&&c.push(_,o[++h]):8===p&&u.push(_);else{if(!ls(p))break;p=_}h++}return{attrs:c,classes:u}}(c.selectors[0]);p&&as(o,u,p),_&&_.length>0&&qD(o,u,_.join(" "))}}(K,pu,Oe,h),void 0!==u&&function $E(o,c,u){const h=o.projection=[];for(let p=0;p<c.length;p++){const _=u[p];h.push(null!=_?Array.from(_):null)}}(Po,this.ngContentSelectors,u),vi=function kk(o,c,u,h,p,_){const w=gr(),E=p[vt],I=Cr(w,p);LE(E,p,w,u,null,h);for(let k=0;k<u.length;k++)Jr(el(p,E,w.directiveStart+k,w),p);ec(E,p,w),I&&Jr(I,p);const N=el(p,E,w.directiveStart+w.componentOffset,w);if(o[zn]=p[zn]=N,null!==_)for(const k of _)k(N,c);return M_(E,w,o),N}(lc,pu,Lf,Bf,wn,[H_]),L_(an,wn,null)}finally{Sr()}return new J0(this.componentType,vi,Nr(Po,wn),wn,Po)}}class J0 extends $s{constructor(c,u,h,p,_){super(),this.location=h,this._rootLView=p,this._tNode=_,this.previousInputValues=null,this.instance=u,this.hostView=this.changeDetectorRef=new Ok(p),this.componentType=c}setInput(c,u){const h=this._tNode.inputs;let p;if(null!==h&&(p=h[c])){if(this.previousInputValues??=new Map,this.previousInputValues.has(c)&&Object.is(this.previousInputValues.get(c),u))return;const _=this._rootLView;UE(_[vt],_,p,c,u),this.previousInputValues.set(c,u),Jc(Tr(this._tNode.index,_))}}get injector(){return new mn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(c){this.hostView.onDestroy(c)}}function H_(){const o=gr();Wo(He()[vt],o)}function j_(o){let c=function zE(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),u=!0;const h=[o];for(;c;){let p;if(cs(o))p=c.\u0275cmp||c.\u0275dir;else{if(c.\u0275cmp)throw new pe(903,!1);p=c.\u0275dir}if(p){if(u){h.push(p);const w=o;w.inputs=G_(o.inputs),w.inputTransforms=G_(o.inputTransforms),w.declaredInputs=G_(o.declaredInputs),w.outputs=G_(o.outputs);const E=p.hostBindings;E&&$A(o,E);const I=p.viewQuery,N=p.contentQueries;if(I&&ew(o,I),N&&Pk(o,N),Z(o.inputs,p.inputs),Z(o.declaredInputs,p.declaredInputs),Z(o.outputs,p.outputs),null!==p.inputTransforms&&(null===w.inputTransforms&&(w.inputTransforms={}),Z(w.inputTransforms,p.inputTransforms)),cs(p)&&p.data.animation){const k=o.data;k.animation=(k.animation||[]).concat(p.data.animation)}}const _=p.features;if(_)for(let w=0;w<_.length;w++){const E=_[w];E&&E.ngInherit&&E(o),E===j_&&(u=!1)}}c=Object.getPrototypeOf(c)}!function X0(o){let c=0,u=null;for(let h=o.length-1;h>=0;h--){const p=o[h];p.hostVars=c+=p.hostVars,p.hostAttrs=ka(p.hostAttrs,u=ka(u,p.hostAttrs))}}(h)}function G_(o){return o===Ks?{}:o===vn?[]:o}function ew(o,c){const u=o.viewQuery;o.viewQuery=u?(h,p)=>{c(h,p),u(h,p)}:c}function Pk(o,c){const u=o.contentQueries;o.contentQueries=u?(h,p,_)=>{c(h,p,_),u(h,p,_)}:c}function $A(o,c){const u=o.hostBindings;o.hostBindings=u?(h,p)=>{c(h,p),u(h,p)}:c}function tw(o){return c=>{c.findHostDirectiveDefs=nw,c.hostDirectives=(Array.isArray(o)?o:o()).map(u=>"function"==typeof u?{directive:$e(u),inputs:Ks,outputs:Ks}:{directive:$e(u.directive),inputs:WE(u.inputs),outputs:WE(u.outputs)})}}function nw(o,c,u){if(null!==o.hostDirectives)for(const h of o.hostDirectives){const p=Ni(h.directive);iw(p.declaredInputs,h.inputs),nw(p,c,u),u.set(p,h),c.push(p)}}function WE(o){if(void 0===o||0===o.length)return Ks;const c={};for(let u=0;u<o.length;u+=2)c[o[u]]=o[u+1];return c}function iw(o,c){for(const u in c)c.hasOwnProperty(u)&&(o[c[u]]=o[u])}function yd(o){const c=o.inputConfig,u={};for(const h in c)if(c.hasOwnProperty(h)){const p=c[h];Array.isArray(p)&&p[2]&&(u[h]=p[2])}o.inputTransforms=u}function z_(o){return!!ug(o)&&(Array.isArray(o)||!(o instanceof Map)&&Symbol.iterator in o)}function ug(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function ol(o,c,u){return o[c]=u}function dg(o,c){return o[c]}function xr(o,c,u){return!Object.is(o[c],u)&&(o[c]=u,!0)}function cf(o,c,u,h){const p=xr(o,c,u);return xr(o,c+1,h)||p}function No(o,c,u,h,p){const _=cf(o,c,u,h);return xr(o,c+2,p)||_}function xo(o,c,u,h,p,_){const w=cf(o,c,u,h);return cf(o,c+2,p,_)||w}function Zn(o,c,u,h){const p=He();return xr(p,Qa(),c)&&(gn(),sl(Xn(),p,o,c,u,h)),Zn}function wd(o,c,u,h){return xr(o,Qa(),u)?c+fe(u)+h:rn}function JA(o,c,u,h,p,_,w,E){const I=He(),N=gn(),k=o+ln,G=N.firstCreatePass?function RV(o,c,u,h,p,_,w,E,I){const N=c.consts,k=vd(c,o,4,w||null,ds(N,E));FE(c,u,k,ds(N,I)),Wo(c,k);const G=k.tView=nf(2,k,h,p,_,c.directiveRegistry,c.pipeRegistry,null,c.schemas,N,null);return null!==c.queries&&(c.queries.template(c,k),G.queries=c.queries.embeddedTView(k)),k}(k,N,I,c,u,h,p,_,w):N.data[k];ga(G,!1);const K=tC(N,I,G,o);dn()&&c0(N,I,K,G),Jr(K,I),F_(I,I[k]=ag(K,I,K,G)),Is(G)&&N_(N,I,G),null!=w&&x_(I,G,E)}let tC=function on(o,c,u,h){return tr(!0),c[Wt].createComment("")};function Bt(o){return Za(function $m(){return qt.lFrame.contextLView}(),ln+o)}function ff(o,c,u){const h=He();return xr(h,Qa(),c)&&xs(gn(),Xn(),h,o,c,h[Wt],u,!1),ff}function On(o,c,u,h,p){const w=p?"class":"style";UE(o,u,c.inputs[w],w,h)}function ki(o,c,u,h){const p=He(),_=gn(),w=ln+o,E=p[Wt],I=_.firstCreatePass?function zk(o,c,u,h,p,_){const w=c.consts,I=vd(c,o,2,h,ds(w,p));return FE(c,u,I,ds(w,_)),null!==I.attrs&&Y0(I,I.attrs,!1),null!==I.mergedAttrs&&Y0(I,I.mergedAttrs,!0),null!==c.queries&&c.queries.elementStart(c,I),I}(w,_,p,c,u,h):_.data[w],N=sw(_,p,I,E,c,o);p[w]=N;const k=Is(I);return ga(I,!0),y1(E,N,I),32!=(32&I.flags)&&dn()&&c0(_,p,N,I),0===function Uu(){return qt.lFrame.elementDepthCount}()&&Jr(N,p),function pr(){qt.lFrame.elementDepthCount++}(),k&&(N_(_,p,I),M_(_,I,p)),null!==h&&x_(p,I),ki}function ft(){let o=gr();Ka()?Mh():(o=o.parent,ga(o,!1));const c=o;(function Hu(o){return qt.skipHydrationRootTNode===o})(c)&&function Ah(){qt.skipHydrationRootTNode=null}(),function yp(){qt.lFrame.elementDepthCount--}();const u=gn();return u.firstCreatePass&&(Wo(u,o),Ou(o)&&u.queries.elementEnd(o)),null!=c.classesWithoutHost&&function Cp(o){return 0!=(8&o.flags)}(c)&&On(u,c,He(),c.classesWithoutHost,!0),null!=c.stylesWithoutHost&&function Tp(o){return 0!=(16&o.flags)}(c)&&On(u,c,He(),c.stylesWithoutHost,!1),ft}function mg(o,c,u,h){return ki(o,c,u,h),ft(),mg}let sw=(o,c,u,h,p,_)=>(tr(!0),dd(h,p,function $i(){return qt.lFrame.currentNamespace}()));function aw(o,c,u){const h=He(),p=gn(),_=o+ln,w=p.firstCreatePass?function ow(o,c,u,h,p){const _=c.consts,w=ds(_,h),E=vd(c,o,8,"ng-container",w);return null!==w&&Y0(E,w,!0),FE(c,u,E,ds(_,p)),null!==c.queries&&c.queries.elementStart(c,E),E}(_,p,h,c,u):p.data[_];ga(w,!0);const E=iC(p,h,w,o);return h[_]=E,dn()&&c0(p,h,E,w),Jr(E,h),Is(w)&&(N_(p,h,w),M_(p,w,h)),null!=u&&x_(h,w),aw}function Cd(){let o=gr();const c=gn();return Ka()?Mh():(o=o.parent,ga(o,!1)),c.firstCreatePass&&(Wo(c,o),Ou(o)&&c.queries.elementEnd(o)),Cd}let iC=(o,c,u,h)=>(tr(!0),Wh(c[Wt],""));function sC(){return He()}function lw(o){return!!o&&"function"==typeof o.then}function tu(o){return!!o&&"function"==typeof o.subscribe}function Q_(o,c,u,h){const p=He(),_=gn(),w=gr();return function Ea(o,c,u,h,p,_,w){const E=Is(h),N=o.firstCreatePass&&xA(o),k=c[zn],G=af(c);let K=!0;if(3&h.type||w){const Qe=Cr(h,c),mt=w?w(Qe):Qe,Ut=G.length,qe=w?wn=>w(Hn(wn[h.index])):h.index;let an=null;if(!w&&E&&(an=function cw(o,c,u,h){const p=o.cleanup;if(null!=p)for(let _=0;_<p.length-1;_+=2){const w=p[_];if(w===u&&p[_+1]===h){const E=c[yc],I=p[_+2];return E.length>I?E[I]:null}"string"==typeof w&&(_+=2)}return null}(o,c,p,h.index)),null!==an)(an.__ngLastListenerFn__||an).__ngNextListenerFn__=_,an.__ngLastListenerFn__=_,K=!1;else{_=_g(h,c,k,_,!1);const wn=u.listen(mt,p,_);G.push(_,wn),N&&N.push(p,qe,Ut,Ut+1)}}else _=_g(h,c,k,_,!1);const ae=h.outputs;let Oe;if(K&&null!==ae&&(Oe=ae[p])){const Qe=Oe.length;if(Qe)for(let mt=0;mt<Qe;mt+=2){const vi=c[Oe[mt]][Oe[mt+1]].subscribe(_),Po=G.length;G.push(_,vi),N&&N.push(p,h.index,Po,-(Po+1))}}}(_,p,p[Wt],w,o,c,h),Q_}function eM(o,c,u,h){try{return Qs(6,c,u),!1!==u(h)}catch(p){return VE(o,p),!1}finally{Qs(7,c,u)}}function _g(o,c,u,h,p){return function _(w){if(w===Function)return h;Jc(o.componentOffset>-1?Tr(o.index,c):c);let I=eM(c,u,h,w),N=_.__ngNextListenerFn__;for(;N;)I=eM(c,u,N,w)&&I,N=N.__ngNextListenerFn__;return p&&!1===I&&w.preventDefault(),I}}function nu(o=1){return function Ja(o){return(qt.lFrame.contextLView=function qn(o,c){for(;o>0;)c=c[Ho],o--;return c}(o,qt.lFrame.contextLView))[zn]}(o)}function qk(o,c){let u=null;const h=function Xf(o){const c=o.attrs;if(null!=c){const u=c.indexOf(5);if(!(1&u))return c[u+1]}return null}(o);for(let p=0;p<c.length;p++){const _=c[p];if("*"!==_){if(null===h?Su(o,_,!0):ep(h,_))return p}else u=p}return u}function Td(o){const c=He()[gi][Xi];if(!c.projection){const h=c.projection=nl(o?o.length:1,null),p=h.slice();let _=c.child;for(;null!==_;){const w=o?qk(_,o):0;null!==w&&(p[w]?p[w].projectionNext=_:h[w]=_,p[w]=_),_=_.next}}}function oC(o,c=0,u){const h=He(),p=gn(),_=vd(p,ln+o,16,null,u||null);null===_.projection&&(_.projection=c),Mh(),(!h[Ts]||To())&&32!=(32&_.flags)&&function WD(o,c,u){d0(c[Wt],0,c,u,VD(o,u,c),jD(u.parent||c[Xi],u,c))}(p,h,_)}function J_(o,c,u){return uw(o,"",c,"",u),J_}function uw(o,c,u,h,p){const _=He(),w=wd(_,c,u,h);return w!==rn&&xs(gn(),Xn(),_,o,w,_[Wt],p,!1),uw}function ea(o,c){return o<<17|c<<2}function iu(o){return o>>17&32767}function cC(o){return 2|o}function gf(o){return(131068&o)>>2}function uC(o,c){return-131069&o|c<<2}function dC(o){return 1|o}function rM(o,c,u,h,p){const _=o[u+1],w=null===c;let E=h?iu(_):gf(_),I=!1;for(;0!==E&&(!1===I||w);){const k=o[E+1];Qk(o[E],c)&&(I=!0,o[E+1]=h?dC(k):cC(k)),E=h?iu(k):gf(k)}I&&(o[u+1]=h?cC(_):dC(_))}function Qk(o,c){return null===o||null==c||(Array.isArray(o)?o[1]:o)===c||!(!Array.isArray(o)||"string"!=typeof c)&&Uc(o,c)>=0}const ts={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function sM(o){return o.substring(ts.key,ts.keyEnd)}function hC(o,c){const u=ts.textEnd;return u===c?-1:(c=ts.keyEnd=function gC(o,c,u){for(;c<u&&o.charCodeAt(c)>32;)c++;return c}(o,ts.key=c,u),wg(o,c,u))}function wg(o,c,u){for(;c<u&&o.charCodeAt(c)<=32;)c++;return c}function bg(o,c,u){return Ca(o,c,u,!1),bg}function ns(o,c){return Ca(o,c,null,!0),ns}function mf(o){!function ll(o,c,u,h){const p=gn(),_=Io(2);p.firstUpdatePass&&aM(p,null,_,h);const w=He();if(u!==rn&&xr(w,_,u)){const E=p.data[rt()];if(vC(E,h)&&!jr(p,_)){let I=h?E.classesWithoutHost:E.stylesWithoutHost;null!==I&&(u=Ze(I,u||"")),On(p,E,w,u,h)}else!function fw(o,c,u,h,p,_,w,E){p===rn&&(p=vn);let I=0,N=0,k=0<p.length?p[0]:null,G=0<_.length?_[0]:null;for(;null!==k||null!==G;){const K=I<p.length?p[I+1]:void 0,ae=N<_.length?_[N+1]:void 0;let Qe,Oe=null;k===G?(I+=2,N+=2,K!==ae&&(Oe=G,Qe=ae)):null===G||null!==k&&k<G?(I+=2,Oe=k):(N+=2,Oe=G,Qe=ae),null!==Oe&&au(o,c,u,h,Oe,Qe,w,E),k=I<p.length?p[I]:null,G=N<_.length?_[N]:null}}(p,E,w,w[Wt],w[_+1],w[_+1]=function tP(o,c,u){if(null==u||""===u)return vn;const h=[],p=ps(u);if(Array.isArray(p))for(let _=0;_<p.length;_++)o(h,p[_],!0);else if("object"==typeof p)for(const _ in p)p.hasOwnProperty(_)&&o(h,_,p[_]);else"string"==typeof p&&c(h,p);return h}(o,c,u),h,_)}}(Ad,rr,o,!0)}function rr(o,c){for(let u=function Xk(o){return function pC(o){ts.key=0,ts.keyEnd=0,ts.value=0,ts.valueEnd=0,ts.textEnd=o.length}(o),hC(o,wg(o,0,ts.textEnd))}(c);u>=0;u=hC(c,u))fs(o,sM(c),!0)}function Ca(o,c,u,h){const p=He(),_=gn(),w=Io(2);_.firstUpdatePass&&aM(_,o,w,h),c!==rn&&xr(p,w,c)&&au(_,_.data[rt()],p,p[Wt],o,p[w+1]=function Nd(o,c){return null==o||""===o||("string"==typeof c?o+=c:"object"==typeof o&&(o=le(ps(o)))),o}(c,u),h,w)}function jr(o,c){return c>=o.expandoStartIndex}function aM(o,c,u,h){const p=o.data;if(null===p[u+1]){const _=p[rt()],w=jr(o,u);vC(_,h)&&null===c&&!w&&(c=!1),c=function Sd(o,c,u,h){const p=bp(o);let _=h?c.residualClasses:c.residualStyles;if(null===p)0===(h?c.classBindings:c.styleBindings)&&(u=su(u=Dg(null,o,c,u,h),c.attrs,h),_=null);else{const w=c.directiveStylingLast;if(-1===w||o[w]!==p)if(u=Dg(p,o,c,u,h),null===_){let I=function vr(o,c,u){const h=u?c.classBindings:c.styleBindings;if(0!==gf(h))return o[iu(h)]}(o,c,h);void 0!==I&&Array.isArray(I)&&(I=Dg(null,o,c,I[1],h),I=su(I,c.attrs,h),function ru(o,c,u,h){o[iu(u?c.classBindings:c.styleBindings)]=h}(o,c,h,I))}else _=function hw(o,c,u){let h;const p=c.directiveEnd;for(let _=1+c.directiveStylingLast;_<p;_++)h=su(h,o[_].hostAttrs,u);return su(h,c.attrs,u)}(o,c,h)}return void 0!==_&&(h?c.residualClasses=_:c.residualStyles=_),u}(p,_,c,h),function Zk(o,c,u,h,p,_){let w=_?c.classBindings:c.styleBindings,E=iu(w),I=gf(w);o[h]=u;let k,N=!1;if(Array.isArray(u)?(k=u[1],(null===k||Uc(u,k)>0)&&(N=!0)):k=u,p)if(0!==I){const K=iu(o[E+1]);o[h+1]=ea(K,E),0!==K&&(o[K+1]=uC(o[K+1],h)),o[E+1]=function iM(o,c){return 131071&o|c<<17}(o[E+1],h)}else o[h+1]=ea(E,0),0!==E&&(o[E+1]=uC(o[E+1],h)),E=h;else o[h+1]=ea(I,0),0===E?E=h:o[I+1]=uC(o[I+1],h),I=h;N&&(o[h+1]=cC(o[h+1])),rM(o,k,h,!0),rM(o,k,h,!1),function Kk(o,c,u,h,p){const _=p?o.residualClasses:o.residualStyles;null!=_&&"string"==typeof c&&Uc(_,c)>=0&&(u[h+1]=dC(u[h+1]))}(c,k,o,h,_),w=ea(E,I),_?c.classBindings=w:c.styleBindings=w}(p,_,c,u,w,h)}}function Dg(o,c,u,h,p){let _=null;const w=u.directiveEnd;let E=u.directiveStylingLast;for(-1===E?E=u.directiveStart:E++;E<w&&(_=c[E],h=su(h,_.hostAttrs,p),_!==o);)E++;return null!==o&&(u.directiveStylingLast=E),h}function su(o,c,u){const h=u?1:2;let p=-1;if(null!==c)for(let _=0;_<c.length;_++){const w=c[_];"number"==typeof w?p=w:p===h&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),fs(o,w,!!u||c[++_]))}return void 0===o?null:o}function Ad(o,c,u){const h=String(c);""!==h&&!h.includes(" ")&&fs(o,h,u)}function au(o,c,u,h,p,_,w,E){if(!(3&c.type))return;const I=o.data,N=I[E+1],k=function Yk(o){return 1==(1&o)}(N)?cl(I,c,u,p,gf(N),w):void 0;Md(k)||(Md(_)||function dw(o){return 2==(2&o)}(N)&&(_=cl(I,null,u,p,E,w)),function KO(o,c,u,h,p){if(c)p?o.addClass(u,h):o.removeClass(u,h);else{let _=-1===h.indexOf("-")?void 0:Gc.DashCase;null==p?o.removeStyle(u,h,_):("string"==typeof p&&p.endsWith("!important")&&(p=p.slice(0,-10),_|=Gc.Important),o.setStyle(u,h,p,_))}}(h,w,Ya(rt(),u),p,_))}function cl(o,c,u,h,p,_){const w=null===c;let E;for(;p>0;){const I=o[p],N=Array.isArray(I),k=N?I[1]:I,G=null===k;let K=u[p+1];K===rn&&(K=G?vn:void 0);let ae=G?Bh(K,h):k===h?K:void 0;if(N&&!Md(ae)&&(ae=Bh(I,h)),Md(ae)&&(E=ae,w))return E;const Oe=o[p+1];p=w?iu(Oe):gf(Oe)}if(null!==c){let I=_?c.residualClasses:c.residualStyles;null!=I&&(E=Bh(I,h))}return E}function Md(o){return void 0!==o}function vC(o,c){return 0!=(o.flags&(c?8:16))}function _f(o,c=""){const u=He(),h=gn(),p=o+ln,_=h.firstCreatePass?vd(h,p,1,c,null):h.data[p],w=pw(h,u,_,c,o);u[p]=w,dn()&&c0(h,u,w,_),ga(_,!1)}let pw=(o,c,u,h,p)=>(tr(!0),ud(c[Wt],h));function X_(o){return xd("",o,""),X_}function xd(o,c,u){const h=He(),p=wd(h,o,c,u);return p!==rn&&function tc(o,c,u){const h=Ya(c,o);!function c_(o,c,u){o.setValue(c,u)}(o[Wt],h,u)}(h,rt(),p),xd}function NC(o,c,u){const h=He();return xr(h,Qa(),c)&&xs(gn(),Xn(),h,o,c,h[Wt],u,!0),NC}function xC(o,c,u){const h=He();if(xr(h,Qa(),c)){const _=gn(),w=Xn();xs(_,w,h,o,c,RA(bp(_.data),w,h),u,!0)}return xC}const lu=void 0;var tv=["en",[["a","p"],["AM","PM"],lu],[["AM","PM"],lu,lu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],lu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],lu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",lu,"{1} 'at' {0}",lu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function yf(o){const u=Math.floor(Math.abs(o)),h=o.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===h?1:5}];let cu={};function mw(o,c,u){"string"!=typeof c&&(u=c,c=o[wf.LocaleId]),c=c.toLowerCase().replace(/_/g,"-"),cu[c]=o,u&&(cu[c][wf.ExtraData]=u)}function _w(o){const c=function OC(o){return o.toLowerCase().replace(/_/g,"-")}(o);let u=RC(c);if(u)return u;const h=c.split("-")[0];if(u=RC(h),u)return u;if("en"===h)return tv;throw new pe(701,!1)}function ic(o){return _w(o)[wf.PluralCase]}function RC(o){return o in cu||(cu[o]=Un.ng&&Un.ng.common&&Un.ng.common.locales&&Un.ng.common.locales[o]),cu[o]}var wf=function(o){return o[o.LocaleId=0]="LocaleId",o[o.DayPeriodsFormat=1]="DayPeriodsFormat",o[o.DayPeriodsStandalone=2]="DayPeriodsStandalone",o[o.DaysFormat=3]="DaysFormat",o[o.DaysStandalone=4]="DaysStandalone",o[o.MonthsFormat=5]="MonthsFormat",o[o.MonthsStandalone=6]="MonthsStandalone",o[o.Eras=7]="Eras",o[o.FirstDayOfWeek=8]="FirstDayOfWeek",o[o.WeekendRange=9]="WeekendRange",o[o.DateFormat=10]="DateFormat",o[o.TimeFormat=11]="TimeFormat",o[o.DateTimeFormat=12]="DateTimeFormat",o[o.NumberSymbols=13]="NumberSymbols",o[o.NumberFormats=14]="NumberFormats",o[o.CurrencyCode=15]="CurrencyCode",o[o.CurrencySymbol=16]="CurrencySymbol",o[o.CurrencyName=17]="CurrencyName",o[o.Currencies=18]="Currencies",o[o.Directionality=19]="Directionality",o[o.PluralCase=20]="PluralCase",o[o.ExtraData=21]="ExtraData",o}(wf||{});const Ta="en-US",Ig={marker:"element"},bf={marker:"ICU"};var ws=function(o){return o[o.SHIFT=2]="SHIFT",o[o.APPEND_EAGERLY=1]="APPEND_EAGERLY",o[o.COMMENT=2]="COMMENT",o}(ws||{});let yw=Ta;function Sg(o){(function ut(o,c){null==o&&it(c,o,null,"!=")})(o,"Expected localeId to be defined"),"string"==typeof o&&(yw=o.toLowerCase().replace(/_/g,"-"))}function PC(o,c,u){const h=c.insertBeforeIndex,p=Array.isArray(h)?h[0]:h;return null===p?f1(o,0,u):Hn(u[p])}function EM(o,c,u,h,p){const _=c.insertBeforeIndex;if(Array.isArray(_)){let w=h,E=null;if(3&c.type||(E=w,w=p),null!==w&&-1===c.componentOffset)for(let I=1;I<_.length;I++)ql(o,w,u[_[I]],E,!1)}}function rc(o,c){if(o.push(c),o.length>1)for(let u=o.length-2;u>=0;u--){const h=o[u];CM(h)||ko(h,c)&&null===TM(h)&&iv(h,c.index)}}function CM(o){return!(64&o.type)}function ko(o,c){return CM(c)||o.index>c.index}function TM(o){const c=o.insertBeforeIndex;return Array.isArray(c)?c[0]:c}function iv(o,c){const u=o.insertBeforeIndex;Array.isArray(u)?u[0]=c:(p1(PC,EM),o.insertBeforeIndex=c)}function rv(o,c,u){const h=H0(o,u,64,null,null);return rc(c,h),h}function xM(){const o=[];let u,h,c=-1;function _(E,I){c=0;const N=function ww(o,c){const u=c[o.currentCaseLViewIndex];return null===u?u:u<0?~u:u}(E,I);h=null!==N?E.remove[N]:vn}function w(){if(c<h.length){const E=h[c++];return E>0?u[E]:(o.push(c,h),_(u[vt].data[~E],u),w())}return 0===o.length?null:(h=o.pop(),c=o.pop(),w())}return function p(E,I){for(u=I;o.length;)o.pop();return _(E.value,I),w}}const Ew=/\ufffd(\d+):?\d*\ufffd/gi,Cw=/\ufffd(\d+)\ufffd/,ov=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,xg="\ufffd",lP=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,av=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,cP=/\uE500/g;function VC(o,c,u,h,p,_,w){const E=rg(o,h,1,null);let I=E<<ws.SHIFT,N=Ll();c===N&&(N=null),null===N&&(I|=ws.APPEND_EAGERLY),w&&(I|=ws.COMMENT,function Ye(o){void 0===Y&&(Y=o())}(xM)),p.push(I,null===_?"":_);const k=H0(o,E,w?32:1,null===_?"":_,null);rc(u,k);const G=k.index;return ga(k,!1),null!==N&&c!==N&&function IM(o,c){let u=o.insertBeforeIndex;null===u?(p1(PC,EM),u=o.insertBeforeIndex=[null,c]):(function ci(o,c,u){o!=c&&it(u,o,c,"==")}(Array.isArray(u),!0,"Expecting array here"),u.push(c))}(N,G),k}function kM(o,c,u,h,p,_,w){const E=w.match(Ew),I=VC(o,c,u,_,h,E?null:w,!1);E&&oc(p,w,I.index,null,0,null)}function oc(o,c,u,h,p,_){const w=o.length,E=w+1;o.push(null,null);const I=w+2,N=c.split(Ew);let k=0;for(let G=0;G<N.length;G++){const K=N[G];if(1&G){const ae=p+parseInt(K,10);o.push(-1-ae),k|=Tw(ae)}else""!==K&&o.push(K)}return o.push(u<<2|(h?1:0)),h&&o.push(h,_),o[w]=k,o[E]=o.length-I,k}function Tw(o){return 1<<Math.min(o,31)}function Iw(o){let c,_,u="",h=0,p=!1;for(;null!==(c=lP.exec(o));)p?c[0]===`${xg}/*${_}${xg}`&&(h=c.index,p=!1):(u+=o.substring(h,c.index+c[0].length),_=c[1],p=!0);return u+=o.slice(h),u}function FM(o,c,u,h,p,_){let w=0;const E={type:p.type,currentCaseLViewIndex:rg(o,c,1,null),anchorIdx:_,cases:[],create:[],remove:[],update:[]};(function BM(o,c,u){o.push(Tw(c.mainBinding),2,-1-c.mainBinding,u<<2|2)})(u,p,_),function sc(o,c,u){const h=o.data[c];null===h?o.data[c]=u:h.value=u}(o,_,E);const I=p.values;for(let N=0;N<I.length;N++){const k=I[N],G=[];for(let K=0;K<k.length;K++){const ae=k[K];if("string"!=typeof ae){const Oe=G.push(ae)-1;k[K]=`\x3c!--\ufffd${Oe}\ufffd--\x3e`}}w=LM(o,E,c,u,h,p.cases[N],k.join(""),G)|w}w&&function dP(o,c,u){o.push(c,1,u<<2|3)}(u,w,_)}function Gr(o){const c=[],u=[];let h=1,p=0;const _=Pn(o=o.replace(ov,function(w,E,I){return h="select"===I?0:1,p=parseInt(E.slice(1),10),""}));for(let w=0;w<_.length;){let E=_[w++].trim();1===h&&(E=E.replace(/\s*(?:=)?(\w+)\s*/,"$1")),E.length&&c.push(E);const I=Pn(_[w++]);c.length>u.length&&u.push(I)}return{type:h,mainBinding:p,cases:c,values:u}}function Pn(o){if(!o)return[];let c=0;const u=[],h=[],p=/[{}]/g;let _;for(p.lastIndex=0;_=p.exec(o);){const E=_.index;if("}"==_[0]){if(u.pop(),0==u.length){const I=o.substring(c,E);ov.test(I)?h.push(Gr(I)):h.push(I),c=E+1}}else{if(0==u.length){const I=o.substring(c,E);h.push(I),c=E+1}u.push("{")}}const w=o.substring(c);return h.push(w),h}function LM(o,c,u,h,p,_,w,E){const I=[],N=[],k=[];c.cases.push(_),c.create.push(I),c.remove.push(N),c.update.push(k);const K=I1(Yc()).getInertBodyElement(w),ae=eE(K)||K;return ae?jC(o,c,u,h,I,N,k,ae,p,E,0):0}function jC(o,c,u,h,p,_,w,E,I,N,k){let G=0,K=E.firstChild;for(;K;){const ae=rg(o,u,1,null);switch(K.nodeType){case Node.ELEMENT_NODE:const Oe=K,Qe=Oe.tagName.toLowerCase();if(XD.hasOwnProperty(Qe)){Mw(p,Ig,Qe,I,ae),o.data[ae]=Qe;const an=Oe.attributes;for(let wn=0;wn<an.length;wn++){const vi=an.item(wn),Po=vi.name.toLowerCase();vi.value.match(Ew)?Zh.hasOwnProperty(Po)&&oc(w,vi.value,ae,vi.name,0,Ms[Po]?g0:null):VM(p,ae,vi)}G=jC(o,c,u,h,p,_,w,K,ae,N,k+1)|G,Sw(_,ae,k)}break;case Node.TEXT_NODE:const mt=K.textContent||"",Ut=mt.match(Ew);Mw(p,null,Ut?"":mt,I,ae),Sw(_,ae,k),Ut&&(G=oc(w,mt,ae,null,0,null)|G);break;case Node.COMMENT_NODE:const qe=Cw.exec(K.textContent||"");if(qe){const wn=N[parseInt(qe[1],10)];Mw(p,bf,"",I,ae),FM(o,u,h,I,wn,ae),Aw(_,ae,k)}}K=K.nextSibling}return G}function Sw(o,c,u){0===u&&o.push(c)}function Aw(o,c,u){0===u&&(o.push(~c),o.push(c))}function Mw(o,c,u,h,p){null!==c&&o.push(c),o.push(u,p,function FC(o,c,u){return o|c<<17|u<<1}(0,h,p))}function VM(o,c,u){o.push(c<<1|1,u.name,u.value)}function GC(o,c,u=-1){const h=gn(),p=He(),_=ln+o,w=ds(h.consts,c),E=Ll();h.firstCreatePass&&function uu(o,c,u,h,p,_){const w=Ll(),E=[],I=[],N=[[]];p=function uP(o,c){if(function HC(o){return-1===o}(c))return Iw(o);{const u=o.indexOf(`:${c}${xg}`)+2+c.toString().length,h=o.search(new RegExp(`${xg}\\/\\*\\d+:${c}${xg}`));return Iw(o.substring(u,h))}}(p,_);const k=function OM(o){return o.replace(cP," ")}(p).split(av);for(let G=0;G<k.length;G++){let K=k[G];if(1&G){const ae=47===K.charCodeAt(0),Qe=(K.charCodeAt(ae?1:0),ln+Number.parseInt(K.substring(ae?2:1)));if(ae)N.shift(),ga(Ll(),!1);else{const mt=rv(o,N[0],Qe);N.unshift([]),ga(mt,!0)}}else{const ae=Pn(K);for(let Oe=0;Oe<ae.length;Oe++){let Qe=ae[Oe];if(1&Oe){const mt=Qe;if("object"!=typeof mt)throw new Error(`Unable to parse ICU expression in "${p}" message.`);FM(o,u,I,c,mt,VC(o,w,N[0],u,E,"",!0).index)}else""!==Qe&&kM(o,w,N[0],E,I,u,Qe)}}}o.data[h]={create:E,update:I}}(h,null===E?0:E.index,p,_,w,u),2===h.type?p[gi][zt]|=32:p[zt]|=32;const I=h.data[_],k=h1(h,E===p[Xi]?null:E,p);(function sP(o,c,u,h){const p=o[Wt];for(let _=0;_<c.length;_++){const w=c[_++],E=c[_],N=(w&ws.APPEND_EAGERLY)===ws.APPEND_EAGERLY,k=w>>>ws.SHIFT;let G=o[k];null===G&&(G=o[k]=(w&ws.COMMENT)===ws.COMMENT?p.createComment(E):ud(p,E)),N&&null!==u&&ql(p,u,G,h,!1)}})(p,I.create,k,E&&8&E.type?p[E.index]:null),Rh(!0)}function GM(o,c,u){GC(o,c,u),function $C(){Rh(!1)}()}function WC(o,c,u,h,p){if(o=$e(o),Array.isArray(o))for(let _=0;_<o.length;_++)WC(o[_],c,u,h,p);else{const _=gn(),w=He(),E=gr();let I=Kh(o)?o:$e(o.provide);const N=G1(o),k=1048575&E.providerIndexes,G=E.directiveStart,K=E.providerIndexes>>20;if(Kh(o)||!o.multi){const ae=new hn(N,p,tf),Oe=Ow(I,c,p?k:k+K,G);-1===Oe?(Hl(mr(E,w),_,I),sr(_,o,c.length),c.push(I),E.directiveStart++,E.directiveEnd++,p&&(E.providerIndexes+=1048576),u.push(ae),w.push(ae)):(u[Oe]=ae,w[Oe]=ae)}else{const ae=Ow(I,c,k+K,G),Oe=Ow(I,c,k,k+K),mt=Oe>=0&&u[Oe];if(p&&!mt||!p&&!(ae>=0&&u[ae])){Hl(mr(E,w),_,I);const Ut=function WM(o,c,u,h,p){const _=new hn(o,u,tf);return _.multi=[],_.index=c,_.componentProviders=0,Rw(_,p,h&&!u),_}(p?ac:hv,u.length,p,h,N);!p&&mt&&(u[Oe].providerFactory=Ut),sr(_,o,c.length,0),c.push(I),E.directiveStart++,E.directiveEnd++,p&&(E.providerIndexes+=1048576),u.push(Ut),w.push(Ut)}else sr(_,o,ae>-1?ae:Oe,Rw(u[p?Oe:ae],N,!p&&h));!p&&h&&mt&&u[Oe].componentProviders++}}}function sr(o,c,u,h){const p=Kh(c),_=function fk(o){return!!o.useClass}(c);if(p||_){const I=(_?$e(c.useClass):c).prototype.ngOnDestroy;if(I){const N=o.destroyHooks||(o.destroyHooks=[]);if(!p&&c.multi){const k=N.indexOf(u);-1===k?N.push(u,[h,I]):N[k+1].push(h,I)}else N.push(u,I)}}}function Rw(o,c,u){return u&&o.componentProviders++,o.multi.push(c)-1}function Ow(o,c,u,h){for(let p=u;p<h;p++)if(c[p]===o)return p;return-1}function hv(o,c,u,h){return fv(this.multi,[])}function ac(o,c,u,h){const p=this.multi;let _;if(this.providerFactory){const w=this.providerFactory.componentProviders,E=el(u,u[vt],this.providerFactory.index,h);_=E.slice(0,w),fv(p,_);for(let I=w;I<E.length;I++)_.push(E[I])}else _=[],fv(p,_);return _}function fv(o,c){for(let u=0;u<o.length;u++)c.push((0,o[u])());return c}function Og(o,c=[]){return u=>{u.providersResolver=(h,p)=>function zM(o,c,u){const h=gn();if(h.firstCreatePass){const p=cs(o);WC(u,h.data,h.blueprint,p,!0),WC(c,h.data,h.blueprint,p,!1)}}(h,p?p(o):o,c)}}class Od{}class qC{}function qM(o,c){return new YC(o,c??null,[])}class YC extends Od{constructor(c,u,h){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new LA(this);const p=qr(c);this._bootstrapComponents=Qc(p.bootstrap),this._r3Injector=rA(c,u,[{provide:Od,useValue:this},{provide:Jh,useValue:this.componentFactoryResolver},...h],le(c),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(c)}get injector(){return this._r3Injector}destroy(){const c=this._r3Injector;!c.destroyed&&c.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(c){this.destroyCbs.push(c)}}class Tf extends qC{constructor(c){super(),this.moduleType=c}create(c){return new YC(this.moduleType,c,[])}}class YM extends Od{constructor(c){super(),this.componentFactoryResolver=new LA(this),this.instance=null;const u=new aE([...c.providers,{provide:Od,useValue:this},{provide:Jh,useValue:this.componentFactoryResolver}],c.parent||v_(),c.debugName,new Set(["environment"]));this.injector=u,c.runEnvironmentInitializers&&u.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(c){this.injector.onDestroy(c)}}function KC(o,c,u=null){return new YM({providers:o,parent:c,debugName:u,runEnvironmentInitializers:!0}).injector}let QC=(()=>{class o{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u)){const h=U1(0,u.type),p=h.length>0?KC([h],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u,p)}return this.cachedInjectors.get(u)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=xt({token:o,providedIn:"environment",factory:()=>new o(Kt(Zl))})}return o})();function JC(o){o.getStandaloneInjector=c=>c.get(QC).getOrCreateStandaloneInjector(o)}function Fd(o,c,u){const h=hs()+o,p=He();return p[h]===rn?ol(p,h,u?c.call(u):c()):dg(p,h)}function Pg(o,c,u,h){return Fg(He(),hs(),o,c,u,h)}function rT(o,c,u,h,p){return Bd(He(),hs(),o,c,u,h,p)}function kw(o,c,u,h,p,_){return nN(He(),hs(),o,c,u,h,p,_)}function Pw(o,c,u,h,p,_,w){return function lT(o,c,u,h,p,_,w,E,I){const N=c+u;return xo(o,N,p,_,w,E)?ol(o,N+4,I?h.call(I,p,_,w,E):h(p,_,w,E)):Ld(o,N+4)}(He(),hs(),o,c,u,h,p,_,w)}function sT(o,c,u,h,p,_,w,E){const I=hs()+o,N=He(),k=xo(N,I,u,h,p,_);return xr(N,I+4,w)||k?ol(N,I+5,E?c.call(E,u,h,p,_,w):c(u,h,p,_,w)):dg(N,I+5)}function oT(o,c,u,h,p,_,w,E,I){const N=hs()+o,k=He(),G=xo(k,N,u,h,p,_);return cf(k,N+4,w,E)||G?ol(k,N+6,I?c.call(I,u,h,p,_,w,E):c(u,h,p,_,w,E)):dg(k,N+6)}function eN(o,c,u,h,p,_,w,E,I,N){const k=hs()+o,G=He();let K=xo(G,k,u,h,p,_);return No(G,k+4,w,E,I)||K?ol(G,k+7,N?c.call(N,u,h,p,_,w,E,I):c(u,h,p,_,w,E,I)):dg(G,k+7)}function aT(o,c,u,h){return function iN(o,c,u,h,p,_){let w=c+u,E=!1;for(let I=0;I<p.length;I++)xr(o,w++,p[I])&&(E=!0);return E?ol(o,w,h.apply(_,p)):Ld(o,w)}(He(),hs(),o,c,u,h)}function Ld(o,c){const u=o[c];return u===rn?void 0:u}function Fg(o,c,u,h,p,_){const w=c+u;return xr(o,w,p)?ol(o,w+1,_?h.call(_,p):h(p)):Ld(o,w+1)}function Bd(o,c,u,h,p,_,w){const E=c+u;return cf(o,E,p,_)?ol(o,E+2,w?h.call(w,p,_):h(p,_)):Ld(o,E+2)}function nN(o,c,u,h,p,_,w,E){const I=c+u;return No(o,I,p,_,w)?ol(o,I+3,E?h.call(E,p,_,w):h(p,_,w)):Ld(o,I+3)}function rN(o,c){const u=gn();let h;const p=o+ln;u.firstCreatePass?(h=function _P(o,c){if(c)for(let u=c.length-1;u>=0;u--){const h=c[u];if(o===h.name)return h}}(c,u.pipeRegistry),u.data[p]=h,h.onDestroy&&(u.destroyHooks??=[]).push(p,h.onDestroy)):h=u.data[p];const _=h.factory||(h.factory=ja(h.type)),E=Jt(tf);try{const I=Oh(!1),N=_();return Oh(I),function Wi(o,c,u,h){u>=o.data.length&&(o.data[u]=null,o.blueprint[u]=null),c[u]=h}(u,He(),p,N),N}finally{Jt(E)}}function du(o,c,u){const h=o+ln,p=He(),_=Za(p,h);return Af(p,h)?Fg(p,hs(),c,_.transform,u,_):_.transform(u)}function cT(o,c,u,h){const p=o+ln,_=He(),w=Za(_,p);return Af(_,p)?Bd(_,hs(),c,w.transform,u,h,w):w.transform(u,h)}function sN(o,c,u,h,p){const _=o+ln,w=He(),E=Za(w,_);return Af(w,_)?nN(w,hs(),c,E.transform,u,h,p,E):E.transform(u,h,p)}function Af(o,c){return o[vt].data[c].pure}function uT(){return this._results[Symbol.iterator]()}class Lw{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new ba)}constructor(c=!1){this._emitDistinctChangesOnly=c,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Lw.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=uT)}get(c){return this._results[c]}map(c){return this._results.map(c)}filter(c){return this._results.filter(c)}find(c){return this._results.find(c)}reduce(c,u){return this._results.reduce(c,u)}forEach(c){this._results.forEach(c)}some(c){return this._results.some(c)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(c,u){const h=this;h.dirty=!1;const p=function Qr(o){return o.flat(Number.POSITIVE_INFINITY)}(c);(this._changesDetected=!function eo(o,c,u){if(o.length!==c.length)return!1;for(let h=0;h<o.length;h++){let p=o[h],_=c[h];if(u&&(p=u(p),_=u(_)),_!==p)return!1}return!0}(h._results,p,u))&&(h._results=p,h.length=p.length,h.last=p[this.length-1],h.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function lN(o,c,u,h=!0){const p=c[vt];if(function a0(o,c,u,h){const p=Er+h,_=u.length;h>0&&(u[p-1][Yr]=c),h<_-Er?(c[Yr]=u[p],xp(u,Er+h,c)):(u.push(c),c[Yr]=null),c[pi]=u;const w=c[dh];null!==w&&u!==w&&function qc(o,c){const u=o[dr];c[gi]!==c[pi][pi][gi]&&(o[Ru]=!0),null===u?o[dr]=[c]:u.push(c)}(w,c);const E=c[cr];null!==E&&E.insertView(o),c[zt]|=128}(p,c,o,u),h){const _=$D(u,o),w=c[Wt],E=d_(w,o[ur]);null!==E&&function o0(o,c,u,h,p,_){h[fi]=p,h[Xi]=c,As(o,h,u,1,p,_)}(p,o[Xi],w,c,E,_)}}let pv=(()=>{class o{static#e=this.__NG_ELEMENT_ID__=yP}return o})();const fT=pv,Bw=class extends fT{constructor(c,u,h){super(),this._declarationLView=c,this._declarationTContainer=u,this.elementRef=h}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(c,u){return this.createEmbeddedViewImpl(c,u)}createEmbeddedViewImpl(c,u,h){const p=function dT(o,c,u,h){const p=c.tView,E=A_(o,p,u,4096&o[zt]?4096:16,null,c,null,null,null,h?.injector??null,h?.hydrationInfo??null);E[dh]=o[c.index];const N=o[cr];return null!==N&&(E[cr]=N.createEmbeddedView(p)),L_(p,E,u),E}(this._declarationLView,this._declarationTContainer,c,{injector:u,hydrationInfo:h});return new lg(p)}};function yP(){return gv(gr(),He())}function gv(o,c){return 4&o.type?new Bw(c,o,Nr(o,c)):null}let ul=(()=>{class o{static#e=this.__NG_ELEMENT_ID__=Ug}return o})();function Ug(){return mT(gr(),He())}const uN=ul,Vd=class extends uN{constructor(c,u,h){super(),this._lContainer=c,this._hostTNode=u,this._hostLView=h}get element(){return Nr(this._hostTNode,this._hostLView)}get injector(){return new mn(this._hostTNode,this._hostLView)}get parentInjector(){const c=Ao(this._hostTNode,this._hostLView);if(kc(c)){const u=Ul(c,this._hostLView),h=Vl(c);return new mn(u[vt].data[h+8],u)}return new mn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(c){const u=dN(this._lContainer);return null!==u&&u[c]||null}get length(){return this._lContainer.length-Er}createEmbeddedView(c,u,h){let p,_;"number"==typeof h?p=h:null!=h&&(p=h.index,_=h.injector);const E=c.createEmbeddedViewImpl(u||{},_,null);return this.insertImpl(E,p,false),E}createComponent(c,u,h,p,_){const w=c&&!function Kr(o){return"function"==typeof o}(c);let E;if(w)E=u;else{const Qe=u||{};E=Qe.index,h=Qe.injector,p=Qe.projectableNodes,_=Qe.environmentInjector||Qe.ngModuleRef}const I=w?c:new cg(yn(c)),N=h||this.parentInjector;if(!_&&null==I.ngModule){const mt=(w?N:this.parentInjector).get(Zl,null);mt&&(_=mt)}yn(I.componentType??{});const ae=I.create(N,p,null,_);return this.insertImpl(ae.hostView,E,false),ae}insert(c,u){return this.insertImpl(c,u,!1)}insertImpl(c,u,h){const p=c._lView;if(function jm(o){return Ur(o[pi])}(p)){const I=this.indexOf(c);if(-1!==I)this.detach(I);else{const N=p[pi],k=new Vd(N,N[Xi],N[pi]);k.detach(k.indexOf(c))}}const w=this._adjustIndex(u),E=this._lContainer;return lN(E,p,w,!h),c.attachToViewContainerRef(),xp(Ud(E),w,c),c}move(c,u){return this.insert(c,u)}indexOf(c){const u=dN(this._lContainer);return null!==u?u.indexOf(c):-1}remove(c){const u=this._adjustIndex(c,-1),h=Xr(this._lContainer,u);h&&(Lh(Ud(this._lContainer),u),LD(h[vt],h))}detach(c){const u=this._adjustIndex(c,-1),h=Xr(this._lContainer,u);return h&&null!=Lh(Ud(this._lContainer),u)?new lg(h):null}_adjustIndex(c,u=0){return c??this.length+u}};function dN(o){return o[8]}function Ud(o){return o[8]||(o[8]=[])}function mT(o,c){let u;const h=c[o.index];return Ur(h)?u=h:(u=ag(h,c,null,o),c[o.index]=u,F_(c,u)),_T(u,c,o,h),new Vd(u,o,c)}let _T=function hN(o,c,u,h){if(o[ur])return;let p;p=8&u.type?Hn(h):function Hd(o,c){const u=o[Wt],h=u.createComment(""),p=Cr(c,o);return ql(u,d_(u,p),h,function $p(o,c){return o.nextSibling(c)}(u,p),!1),h}(c,u),o[ur]=p};class jw{constructor(c){this.queryList=c,this.matches=null}clone(){return new jw(this.queryList)}setDirty(){this.queryList.setDirty()}}class vT{constructor(c=[]){this.queries=c}createEmbeddedView(c){const u=c.queries;if(null!==u){const h=null!==c.contentQueries?c.contentQueries[0]:u.length,p=[];for(let _=0;_<h;_++){const w=u.getByIndex(_);p.push(this.queries[w.indexInDeclarationView].clone())}return new vT(p)}return null}insertView(c){this.dirtyQueriesWithMatches(c)}detachView(c){this.dirtyQueriesWithMatches(c)}dirtyQueriesWithMatches(c){for(let u=0;u<this.queries.length;u++)null!==vN(c,u).matches&&this.queries[u].setDirty()}}class _v{constructor(c,u,h=null){this.predicate=c,this.flags=u,this.read=h}}class Gw{constructor(c=[]){this.queries=c}elementStart(c,u){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(c,u)}elementEnd(c){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(c)}embeddedTView(c){let u=null;for(let h=0;h<this.length;h++){const p=null!==u?u.length:0,_=this.getByIndex(h).embeddedTView(c,p);_&&(_.indexInDeclarationView=h,null!==u?u.push(_):u=[_])}return null!==u?new Gw(u):null}template(c,u){for(let h=0;h<this.queries.length;h++)this.queries[h].template(c,u)}getByIndex(c){return this.queries[c]}get length(){return this.queries.length}track(c){this.queries.push(c)}}class yT{constructor(c,u=-1){this.metadata=c,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(c,u){this.isApplyingToNode(u)&&this.matchTNode(c,u)}elementEnd(c){this._declarationNodeIndex===c.index&&(this._appliesToNextNode=!1)}template(c,u){this.elementStart(c,u)}embeddedTView(c,u){return this.isApplyingToNode(c)?(this.crossesNgTemplate=!0,this.addMatch(-c.index,u),new yT(this.metadata)):null}isApplyingToNode(c){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let h=c.parent;for(;null!==h&&8&h.type&&h.index!==u;)h=h.parent;return u===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(c,u){const h=this.metadata.predicate;if(Array.isArray(h))for(let p=0;p<h.length;p++){const _=h[p];this.matchTNodeWithReadOption(c,u,pN(u,_)),this.matchTNodeWithReadOption(c,u,kh(u,c,_,!1,!1))}else h===pv?4&u.type&&this.matchTNodeWithReadOption(c,u,-1):this.matchTNodeWithReadOption(c,u,kh(u,c,h,!1,!1))}matchTNodeWithReadOption(c,u,h){if(null!==h){const p=this.metadata.read;if(null!==p)if(p===D_||p===ul||p===pv&&4&u.type)this.addMatch(u.index,-2);else{const _=kh(u,c,p,!1,!1);null!==_&&this.addMatch(u.index,_)}else this.addMatch(u.index,h)}}addMatch(c,u){null===this.matches?this.matches=[c,u]:this.matches.push(c,u)}}function pN(o,c){const u=o.localNames;if(null!==u)for(let h=0;h<u.length;h+=2)if(u[h]===c)return u[h+1];return null}function gN(o,c,u,h){return-1===u?function bP(o,c){return 11&o.type?Nr(o,c):4&o.type?gv(o,c):null}(c,o):-2===u?function Mf(o,c,u){return u===D_?Nr(c,o):u===pv?gv(c,o):u===ul?mT(c,o):void 0}(o,c,h):el(o,o[vt],u,c)}function Hg(o,c,u,h){const p=c[cr].queries[h];if(null===p.matches){const _=o.data,w=u.matches,E=[];for(let I=0;I<w.length;I+=2){const N=w[I];E.push(N<0?null:gN(c,_[N],w[I+1],u.metadata.read))}p.matches=E}return p.matches}function $w(o,c,u,h){const p=o.queries.getByIndex(u),_=p.matches;if(null!==_){const w=Hg(o,c,p,u);for(let E=0;E<_.length;E+=2){const I=_[E];if(I>0)h.push(w[E/2]);else{const N=_[E+1],k=c[-I];for(let G=Er;G<k.length;G++){const K=k[G];K[dh]===K[pi]&&$w(K[vt],K,N,h)}if(null!==k[dr]){const G=k[dr];for(let K=0;K<G.length;K++){const ae=G[K];$w(ae[vt],ae,N,h)}}}}}return h}function wT(o){const c=He(),u=gn(),h=Yu();Dp(h+1);const p=vN(u,h);if(o.dirty&&function Hm(o){return 4==(4&o[zt])}(c)===(2==(2&p.metadata.flags))){if(null===p.matches)o.reset([]);else{const _=p.crossesNgTemplate?$w(u,c,h,[]):Hg(u,c,p,h);o.reset(_,E_),o.notifyOnChanges()}return!0}return!1}function mN(o,c,u){const h=gn();h.firstCreatePass&&(is(h,new _v(o,c,u),-1),2==(2&c)&&(h.staticViewQueries=!0)),zw(h,He(),c)}function bT(o,c,u,h){const p=gn();if(p.firstCreatePass){const _=gr();is(p,new _v(c,u,h),_.index),function EP(o,c){const u=o.contentQueries||(o.contentQueries=[]);c!==(u.length?u[u.length-1]:-1)&&u.push(o.queries.length-1,c)}(p,o),2==(2&u)&&(p.staticContentQueries=!0)}zw(p,He(),u)}function _N(){return function DP(o,c){return o[cr].queries[c].queryList}(He(),Yu())}function zw(o,c,u){const h=new Lw(4==(4&u));(function TA(o,c,u,h){const p=af(c);p.push(u),o.firstCreatePass&&xA(o).push(h,p.length-1)})(o,c,h,h.destroy),null===c[cr]&&(c[cr]=new vT),c[cr].queries.push(new jw(h))}function is(o,c,u){null===o.queries&&(o.queries=new Gw),o.queries.track(new yT(c,u))}function vN(o,c){return o.queries.getByIndex(c)}function yN(o,c){return gv(o,c)}function vv(o){return!!qr(o)}const $g=new Yn("Application Initializer");let Dv=(()=>{class o{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,h)=>{this.resolve=u,this.reject=h}),this.appInits=sn($g,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const u=[];for(const p of this.appInits){const _=p();if(lw(_))u.push(_);else if(tu(_)){const w=new Promise((E,I)=>{_.subscribe({complete:E,error:I})});u.push(w)}}const h=()=>{this.done=!0,this.resolve()};Promise.all(u).then(()=>{h()}).catch(p=>{this.reject(p)}),0===u.length&&h(),this.initialized=!0}static#e=this.\u0275fac=function(h){return new(h||o)};static#t=this.\u0275prov=xt({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),Rf=(()=>{class o{log(u){console.log(u)}warn(u){console.warn(u)}static#e=this.\u0275fac=function(h){return new(h||o)};static#t=this.\u0275prov=xt({token:o,factory:o.\u0275fac,providedIn:"platform"})}return o})();const Of=new Yn("LocaleId",{providedIn:"root",factory:()=>sn(Of,Gt.Optional|Gt.SkipSelf)||function kT(){return typeof $localize<"u"&&$localize.locale||Ta}()}),Ev=new Yn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let rb=(()=>{class o{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new he.X(!1)}add(){this.hasPendingTasks.next(!0);const u=this.taskId++;return this.pendingTasks.add(u),u}remove(u){this.pendingTasks.delete(u),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(h){return new(h||o)};static#t=this.\u0275prov=xt({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();class $d{constructor(c,u){this.ngModuleFactory=c,this.componentFactories=u}}let kN=(()=>{class o{compileModuleSync(u){return new Tf(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const h=this.compileModuleSync(u),_=Qc(qr(u).declarations).reduce((w,E)=>{const I=yn(E);return I&&w.push(new cg(I)),w},[]);return new $d(h,_)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}static#e=this.\u0275fac=function(h){return new(h||o)};static#t=this.\u0275prov=xt({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();const cb=new Yn(""),Pf=new Yn("");let zT,Wg=(()=>{class o{constructor(u,h,p){this._ngZone=u,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,zT||(function qg(o){zT=o}(p),p.addToWindow(h)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{es.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(u)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,h,p){let _=-1;h&&h>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==_),u(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:u,timeoutId:_,updateCb:p})}whenStable(u,h,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,h,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,h,p){return[]}static#e=this.\u0275fac=function(h){return new(h||o)(Kt(es),Kt($T),Kt(Pf))};static#t=this.\u0275prov=xt({token:o,factory:o.\u0275fac})}return o})(),$T=(()=>{class o{constructor(){this._applications=new Map}registerApplication(u,h){this._applications.set(u,h)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,h=!0){return zT?.findTestabilityInTree(this,u,h)??null}static#e=this.\u0275fac=function(h){return new(h||o)};static#t=this.\u0275prov=xt({token:o,factory:o.\u0275fac,providedIn:"platform"})}return o})(),zd=null;const ub=new Yn("AllowMultipleToken"),Iv=new Yn("PlatformDestroyListeners"),Sv=new Yn("appBootstrapListener");class YT{constructor(c,u){this.name=c,this.token=u}}function ZT(o,c,u=[]){const h=`Platform: ${c}`,p=new Yn(h);return(_=[])=>{let w=QT();if(!w||w.injector.get(ub,!1)){const E=[...u,..._,{provide:p,useValue:!0}];o?o(E):function BP(o){if(zd&&!zd.get(ub,!1))throw new pe(400,!1);(function HN(){!function km(o){hp=o}(()=>{throw new pe(600,!1)})})(),zd=o;const c=o.get(zN);(function GN(o){o.get(q1,null)?.forEach(u=>u())})(o)}(function KT(o=[],c){return oo.create({name:c,providers:[{provide:sE,useValue:"platform"},{provide:Iv,useValue:new Set([()=>zd=null])},...o]})}(E,h))}return function $N(o){const c=QT();if(!c)throw new pe(401,!1);return c}()}}function QT(){return zd?.get(zN)??null}let zN=(()=>{class o{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,h){const p=function JT(o="zone.js",c){return"noop"===o?new SE:"zone.js"===o?new es(c):o}(h?.ngZone,function WN(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:o?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:o?.runCoalescing??!1}}({eventCoalescing:h?.ngZoneEventCoalescing,runCoalescing:h?.ngZoneRunCoalescing}));return p.run(()=>{const _=function ZC(o,c,u){return new YC(o,c,u)}(u.moduleType,this.injector,function ZN(o){return[{provide:es,useFactory:o},{provide:qp,multi:!0,useFactory:()=>{const c=sn(XT,{optional:!0});return()=>c.initialize()}},{provide:fb,useFactory:YN},{provide:k0,useFactory:P0}]}(()=>p)),w=_.injector.get(Xl,null);return p.runOutsideAngular(()=>{const E=p.onError.subscribe({next:I=>{w.handleError(I)}});_.onDestroy(()=>{Zg(this._modules,_),E.unsubscribe()})}),function db(o,c,u){try{const h=u();return lw(h)?h.catch(p=>{throw c.runOutsideAngular(()=>o.handleError(p)),p}):h}catch(h){throw c.runOutsideAngular(()=>o.handleError(h)),h}}(w,p,()=>{const E=_.injector.get(Dv);return E.runInitializers(),E.donePromise.then(()=>(Sg(_.injector.get(Of,Ta)||Ta),this._moduleDoBootstrap(_),_))})})}bootstrapModule(u,h=[]){const p=hb({},h);return function WT(o,c,u){const h=new Tf(u);return Promise.resolve(h)}(0,0,u).then(_=>this.bootstrapModuleFactory(_,p))}_moduleDoBootstrap(u){const h=u.injector.get(Yg);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(p=>h.bootstrap(p));else{if(!u.instance.ngDoBootstrap)throw new pe(-403,!1);u.instance.ngDoBootstrap(h)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new pe(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const u=this._injector.get(Iv,null);u&&(u.forEach(h=>h()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(h){return new(h||o)(Kt(oo))};static#t=this.\u0275prov=xt({token:o,factory:o.\u0275fac,providedIn:"platform"})}return o})();function hb(o,c){return Array.isArray(c)?c.reduce(hb,o):{...o,...c}}let Yg=(()=>{class o{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=sn(fb),this.zoneIsStable=sn(k0),this.componentTypes=[],this.components=[],this.isStable=sn(rb).hasPendingTasks.pipe((0,je.w)(u=>u?(0,_e.of)(!1):this.zoneIsStable),(0,we.x)(),(0,Ae.B)()),this._injector=sn(Zl)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,h){const p=u instanceof b_;if(!this._injector.get(Dv).done)throw!p&&ca(u),new pe(405,!1);let w;w=p?u:this._injector.get(Jh).resolveComponentFactory(u),this.componentTypes.push(w.componentType);const E=function qT(o){return o.isBoundToModule}(w)?void 0:this._injector.get(Od),N=w.create(oo.NULL,[],h||w.selector,E),k=N.location.nativeElement,G=N.injector.get(cb,null);return G?.registerApplication(k),N.onDestroy(()=>{this.detachView(N.hostView),Zg(this.components,N),G?.unregisterApplication(k)}),this._loadComponent(N),N}tick(){if(this._runningTick)throw new pe(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this.internalErrorHandler(u)}finally{this._runningTick=!1}}attachView(u){const h=u;this._views.push(h),h.attachToAppRef(this)}detachView(u){const h=u;Zg(this._views,h),h.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const h=this._injector.get(Sv,[]);h.push(...this._bootstrapListeners),h.forEach(p=>p(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Zg(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new pe(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(h){return new(h||o)};static#t=this.\u0275prov=xt({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function Zg(o,c){const u=o.indexOf(c);u>-1&&o.splice(u,1)}const fb=new Yn("",{providedIn:"root",factory:()=>sn(Xl).handleError.bind(void 0)});function YN(){const o=sn(es),c=sn(Xl);return u=>o.runOutsideAngular(()=>c.handleError(u))}let XT=(()=>{class o{constructor(){this.zone=sn(es),this.applicationRef=sn(Yg)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(h){return new(h||o)};static#t=this.\u0275prov=xt({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function HP(){return!1}let tI=(()=>{class o{static#e=this.__NG_ELEMENT_ID__=nI}return o})();function nI(o){return function iI(o,c,u){if(Ha(o)&&!u){const h=Tr(o.index,c);return new lg(h,h)}return 47&o.type?new lg(c[gi],c):null}(gr(),He(),16==(16&o))}class ix{constructor(){}supports(c){return z_(c)}create(c){return new aI(c)}}const qP=(o,c)=>c;class aI{constructor(c){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=c||qP}forEachItem(c){let u;for(u=this._itHead;null!==u;u=u._next)c(u)}forEachOperation(c){let u=this._itHead,h=this._removalsHead,p=0,_=null;for(;u||h;){const w=!h||u&&u.currentIndex<mb(h,p,_)?u:h,E=mb(w,p,_),I=w.currentIndex;if(w===h)p--,h=h._nextRemoved;else if(u=u._next,null==w.previousIndex)p++;else{_||(_=[]);const N=E-p,k=I-p;if(N!=k){for(let K=0;K<N;K++){const ae=K<_.length?_[K]:_[K]=0,Oe=ae+K;k<=Oe&&Oe<N&&(_[K]=ae+1)}_[w.previousIndex]=k-N}}E!==I&&c(w,E,I)}}forEachPreviousItem(c){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)c(u)}forEachAddedItem(c){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)c(u)}forEachMovedItem(c){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)c(u)}forEachRemovedItem(c){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)c(u)}forEachIdentityChange(c){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)c(u)}diff(c){if(null==c&&(c=[]),!z_(c))throw new pe(900,!1);return this.check(c)?this:null}onDestroy(){}check(c){this._reset();let p,_,w,u=this._itHead,h=!1;if(Array.isArray(c)){this.length=c.length;for(let E=0;E<this.length;E++)_=c[E],w=this._trackByFn(E,_),null!==u&&Object.is(u.trackById,w)?(h&&(u=this._verifyReinsertion(u,_,w,E)),Object.is(u.item,_)||this._addIdentityChange(u,_)):(u=this._mismatch(u,_,w,E),h=!0),u=u._next}else p=0,function YA(o,c){if(Array.isArray(o))for(let u=0;u<o.length;u++)c(o[u]);else{const u=o[Symbol.iterator]();let h;for(;!(h=u.next()).done;)c(h.value)}}(c,E=>{w=this._trackByFn(p,E),null!==u&&Object.is(u.trackById,w)?(h&&(u=this._verifyReinsertion(u,E,w,p)),Object.is(u.item,E)||this._addIdentityChange(u,E)):(u=this._mismatch(u,E,w,p),h=!0),u=u._next,p++}),this.length=p;return this._truncate(u),this.collection=c,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let c;for(c=this._previousItHead=this._itHead;null!==c;c=c._next)c._nextPrevious=c._next;for(c=this._additionsHead;null!==c;c=c._nextAdded)c.previousIndex=c.currentIndex;for(this._additionsHead=this._additionsTail=null,c=this._movesHead;null!==c;c=c._nextMoved)c.previousIndex=c.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(c,u,h,p){let _;return null===c?_=this._itTail:(_=c._prev,this._remove(c)),null!==(c=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(c.item,u)||this._addIdentityChange(c,u),this._reinsertAfter(c,_,p)):null!==(c=null===this._linkedRecords?null:this._linkedRecords.get(h,p))?(Object.is(c.item,u)||this._addIdentityChange(c,u),this._moveAfter(c,_,p)):c=this._addAfter(new YP(u,h),_,p),c}_verifyReinsertion(c,u,h,p){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==_?c=this._reinsertAfter(_,c._prev,p):c.currentIndex!=p&&(c.currentIndex=p,this._addToMoves(c,p)),c}_truncate(c){for(;null!==c;){const u=c._next;this._addToRemovals(this._unlink(c)),c=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(c,u,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(c);const p=c._prevRemoved,_=c._nextRemoved;return null===p?this._removalsHead=_:p._nextRemoved=_,null===_?this._removalsTail=p:_._prevRemoved=p,this._insertAfter(c,u,h),this._addToMoves(c,h),c}_moveAfter(c,u,h){return this._unlink(c),this._insertAfter(c,u,h),this._addToMoves(c,h),c}_addAfter(c,u,h){return this._insertAfter(c,u,h),this._additionsTail=null===this._additionsTail?this._additionsHead=c:this._additionsTail._nextAdded=c,c}_insertAfter(c,u,h){const p=null===u?this._itHead:u._next;return c._next=p,c._prev=u,null===p?this._itTail=c:p._prev=c,null===u?this._itHead=c:u._next=c,null===this._linkedRecords&&(this._linkedRecords=new gb),this._linkedRecords.put(c),c.currentIndex=h,c}_remove(c){return this._addToRemovals(this._unlink(c))}_unlink(c){null!==this._linkedRecords&&this._linkedRecords.remove(c);const u=c._prev,h=c._next;return null===u?this._itHead=h:u._next=h,null===h?this._itTail=u:h._prev=u,c}_addToMoves(c,u){return c.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=c:this._movesTail._nextMoved=c),c}_addToRemovals(c){return null===this._unlinkedRecords&&(this._unlinkedRecords=new gb),this._unlinkedRecords.put(c),c.currentIndex=null,c._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=c,c._prevRemoved=null):(c._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=c),c}_addIdentityChange(c,u){return c.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=c:this._identityChangesTail._nextIdentityChange=c,c}}class YP{constructor(c,u){this.item=c,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class lI{constructor(){this._head=null,this._tail=null}add(c){null===this._head?(this._head=this._tail=c,c._nextDup=null,c._prevDup=null):(this._tail._nextDup=c,c._prevDup=this._tail,c._nextDup=null,this._tail=c)}get(c,u){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===u||u<=h.currentIndex)&&Object.is(h.trackById,c))return h;return null}remove(c){const u=c._prevDup,h=c._nextDup;return null===u?this._head=h:u._nextDup=h,null===h?this._tail=u:h._prevDup=u,null===this._head}}class gb{constructor(){this.map=new Map}put(c){const u=c.trackById;let h=this.map.get(u);h||(h=new lI,this.map.set(u,h)),h.add(c)}get(c,u){const p=this.map.get(c);return p?p.get(c,u):null}remove(c){const u=c.trackById;return this.map.get(u).remove(c)&&this.map.delete(u),c}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function mb(o,c,u){const h=o.previousIndex;if(null===h)return h;let p=0;return u&&h<u.length&&(p=u[h]),h+c+p}class rx{constructor(){}supports(c){return c instanceof Map||ug(c)}create(){return new xv}}class xv{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(c){let u;for(u=this._mapHead;null!==u;u=u._next)c(u)}forEachPreviousItem(c){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)c(u)}forEachChangedItem(c){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)c(u)}forEachAddedItem(c){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)c(u)}forEachRemovedItem(c){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)c(u)}diff(c){if(c){if(!(c instanceof Map||ug(c)))throw new pe(900,!1)}else c=new Map;return this.check(c)?this:null}onDestroy(){}check(c){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(c,(h,p)=>{if(u&&u.key===p)this._maybeAddToChanges(u,h),this._appendAfter=u,u=u._next;else{const _=this._getOrCreateRecordForKey(p,h);u=this._insertBeforeOrAppend(u,_)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let h=u;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(c,u){if(c){const h=c._prev;return u._next=c,u._prev=h,c._prev=u,h&&(h._next=u),c===this._mapHead&&(this._mapHead=u),this._appendAfter=c,c}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(c,u){if(this._records.has(c)){const p=this._records.get(c);this._maybeAddToChanges(p,u);const _=p._prev,w=p._next;return _&&(_._next=w),w&&(w._prev=_),p._next=null,p._prev=null,p}const h=new ZP(c);return this._records.set(c,h),h.currentValue=u,this._addToAdditions(h),h}_reset(){if(this.isDirty){let c;for(this._previousMapHead=this._mapHead,c=this._previousMapHead;null!==c;c=c._next)c._nextPrevious=c._next;for(c=this._changesHead;null!==c;c=c._nextChanged)c.previousValue=c.currentValue;for(c=this._additionsHead;null!=c;c=c._nextAdded)c.previousValue=c.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(c,u){Object.is(u,c.currentValue)||(c.previousValue=c.currentValue,c.currentValue=u,this._addToChanges(c))}_addToAdditions(c){null===this._additionsHead?this._additionsHead=this._additionsTail=c:(this._additionsTail._nextAdded=c,this._additionsTail=c)}_addToChanges(c){null===this._changesHead?this._changesHead=this._changesTail=c:(this._changesTail._nextChanged=c,this._changesTail=c)}_forEach(c,u){c instanceof Map?c.forEach(u):Object.keys(c).forEach(h=>u(c[h],h))}}class ZP{constructor(c){this.key=c,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function _b(){return new vb([new ix])}let vb=(()=>{class o{static#e=this.\u0275prov=xt({token:o,providedIn:"root",factory:_b});constructor(u){this.factories=u}static create(u,h){if(null!=h){const p=h.factories.slice();u=u.concat(p)}return new o(u)}static extend(u){return{provide:o,useFactory:h=>o.create(u,h||_b()),deps:[[o,new ed,new Fp]]}}find(u){const h=this.factories.find(p=>p.supports(u));if(null!=h)return h;throw new pe(901,!1)}}return o})();function cI(){return new Jg([new rx])}let Jg=(()=>{class o{static#e=this.\u0275prov=xt({token:o,providedIn:"root",factory:cI});constructor(u){this.factories=u}static create(u,h){if(h){const p=h.factories.slice();u=u.concat(p)}return new o(u)}static extend(u){return{provide:o,useFactory:h=>o.create(u,h||cI()),deps:[[o,new ed,new Fp]]}}find(u){const h=this.factories.find(p=>p.supports(u));if(h)return h;throw new pe(901,!1)}}return o})();const yb=ZT(null,"core",[]);let uI=(()=>{class o{constructor(u){}static#e=this.\u0275fac=function(h){return new(h||o)(Kt(Yg))};static#t=this.\u0275mod=La({type:o});static#n=this.\u0275inj=Jn({})}return o})();function lx(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}function Li(o,c){const u=yn(o),h=c.elementInjector||v_();return new cg(u).create(h,c.projectableNodes,c.hostElement,c.environmentInjector)}function Ps(o){const c=yn(o);if(!c)return null;const u=new cg(c);return{get selector(){return u.selector},get type(){return u.componentType},get inputs(){return u.inputs},get outputs(){return u.outputs},get ngContentSelectors(){return u.ngContentSelectors},get isStandalone(){return c.standalone},get isSignal(){return c.signals}}}},3399:(Ct,xe,L)=>{L.d(xe,{Z:()=>at});var a=L(9058),ie=L(4537),V=L(7592),re=L(7879);class he{constructor(lt,ze){this._delegate=lt,this.firebase=ze,(0,V._addComponent)(lt,new ie.wA("app-compat",()=>this,"PUBLIC")),this.container=lt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(lt){this._delegate.automaticDataCollectionEnabled=lt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(lt=>{this._delegate.checkDestroyed(),lt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,V.deleteApp)(this._delegate)))}_getService(lt,ze=V._DEFAULT_ENTRY_NAME){var Rt;this._delegate.checkDestroyed();const Nt=this._delegate.container.getProvider(lt);return!Nt.isInitialized()&&"EXPLICIT"===(null===(Rt=Nt.getComponent())||void 0===Rt?void 0:Rt.instantiationMode)&&Nt.initialize(),Nt.getImmediate({identifier:ze})}_removeServiceInstance(lt,ze=V._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(lt).clearInstance(ze)}_addComponent(lt){(0,V._addComponent)(this._delegate,lt)}_addOrOverwriteComponent(lt){(0,V._addOrOverwriteComponent)(this._delegate,lt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ae=new a.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function we(){const $e=function je($e){const lt={},ze={__esModule:!0,initializeApp:function pe(We,ge={}){const X=V.initializeApp(We,ge);if((0,a.r3)(lt,X.name))return lt[X.name];const Je=new $e(X,ze);return lt[X.name]=Je,Je},app:Nt,registerVersion:V.registerVersion,setLogLevel:V.setLogLevel,onLog:V.onLog,apps:null,SDK_VERSION:V.SDK_VERSION,INTERNAL:{registerComponent:function fe(We){const ge=We.name,X=ge.replace("-compat","");if(V._registerComponent(We)&&"PUBLIC"===We.type){const Je=(kt=Nt())=>{if("function"!=typeof kt[X])throw Ae.create("invalid-app-argument",{appName:ge});return kt[X]()};void 0!==We.serviceProps&&(0,a.ZB)(Je,We.serviceProps),ze[X]=Je,$e.prototype[X]=function(...kt){return this._getService.bind(this,ge).apply(this,We.multipleInstances?kt:[])}}return"PUBLIC"===We.type?ze[X]:null},removeApp:function Rt(We){delete lt[We]},useAsService:function Pe(We,ge){return"serverAuth"===ge?null:ge},modularAPIs:V}};function Nt(We){if(!(0,a.r3)(lt,We=We||V._DEFAULT_ENTRY_NAME))throw Ae.create("no-app",{appName:We});return lt[We]}return ze.default=ze,Object.defineProperty(ze,"apps",{get:function Re(){return Object.keys(lt).map(We=>lt[We])}}),Nt.App=$e,ze}(he);return $e.INTERNAL=Object.assign(Object.assign({},$e.INTERNAL),{createFirebaseNamespace:we,extendNamespace:function lt(ze){(0,a.ZB)($e,ze)},createSubscribe:a.ne,ErrorFactory:a.LL,deepExtend:a.ZB}),$e}(),Z=new re.Yd("@firebase/app-compat");if((0,a.jU)()&&void 0!==self.firebase){Z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const $e=self.firebase.SDK_VERSION;$e&&$e.indexOf("LITE")>=0&&Z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const at=$;!function Ue($e){(0,V.registerVersion)("@firebase/app-compat","0.2.13",$e)}()},7592:(Ct,xe,L)=>{L.r(xe),L.d(xe,{FirebaseError:()=>re.ZR,SDK_VERSION:()=>Jn,_DEFAULT_ENTRY_NAME:()=>me,_addComponent:()=>Fe,_addOrOverwriteComponent:()=>Ve,_apps:()=>Ce,_clearComponents:()=>Pt,_components:()=>Se,_getProvider:()=>it,_registerComponent:()=>ut,_removeServiceInstance:()=>di,deleteApp:()=>$r,getApp:()=>Vn,getApps:()=>lr,initializeApp:()=>Ci,onLog:()=>zr,registerVersion:()=>Ai,setLogLevel:()=>_o});var a=L(5861),ie=L(4537),V=L(7879),re=L(9058),he=L(1878);class _e{constructor(Q){this.container=Q}getPlatformInfoString(){return this.container.getProviders().map(Ie=>{if(function Ae(Me){const Q=Me.getComponent();return"VERSION"===Q?.type}(Ie)){const et=Ie.getImmediate();return`${et.library}/${et.version}`}return null}).filter(Ie=>Ie).join(" ")}}const je="@firebase/app",$=new V.Yd("@firebase/app"),me="[DEFAULT]",De={[je]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ce=new Map,Se=new Map;function Fe(Me,Q){try{Me.container.addComponent(Q)}catch(Ie){$.debug(`Component ${Q.name} failed to register with FirebaseApp ${Me.name}`,Ie)}}function Ve(Me,Q){Me.container.addOrOverwriteComponent(Q)}function ut(Me){const Q=Me.name;if(Se.has(Q))return $.debug(`There were multiple attempts to register component ${Q}.`),!1;Se.set(Q,Me);for(const Ie of Ce.values())Fe(Ie,Me);return!0}function it(Me,Q){const Ie=Me.container.getProvider("heartbeat").getImmediate({optional:!0});return Ie&&Ie.triggerHeartbeat(),Me.container.getProvider(Q)}function di(Me,Q,Ie=me){it(Me,Q).clearInstance(Ie)}function Pt(){Se.clear()}const xt=new re.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Qn{constructor(Q,Ie,et){this._isDeleted=!1,this._options=Object.assign({},Q),this._config=Object.assign({},Ie),this._name=Ie.name,this._automaticDataCollectionEnabled=Ie.automaticDataCollectionEnabled,this._container=et,this.container.addComponent(new ie.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Q){this.checkDestroyed(),this._automaticDataCollectionEnabled=Q}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Q){this._isDeleted=Q}checkDestroyed(){if(this.isDeleted)throw xt.create("app-deleted",{appName:this._name})}}const Jn="9.23.0";function Ci(Me,Q={}){let Ie=Me;"object"!=typeof Q&&(Q={name:Q});const et=Object.assign({name:me,automaticDataCollectionEnabled:!1},Q),dt=et.name;if("string"!=typeof dt||!dt)throw xt.create("bad-app-name",{appName:String(dt)});if(Ie||(Ie=(0,re.aH)()),!Ie)throw xt.create("no-options");const Ft=Ce.get(dt);if(Ft){if((0,re.vZ)(Ie,Ft.options)&&(0,re.vZ)(et,Ft.config))return Ft;throw xt.create("duplicate-app",{appName:dt})}const xn=new ie.H0(dt);for(const W of Se.values())xn.addComponent(W);const q=new Qn(Ie,et,xn);return Ce.set(dt,q),q}function Vn(Me=me){const Q=Ce.get(Me);if(!Q&&Me===me&&(0,re.aH)())return Ci();if(!Q)throw xt.create("no-app",{appName:Me});return Q}function lr(){return Array.from(Ce.values())}function $r(Me){return ss.apply(this,arguments)}function ss(){return(ss=(0,a.Z)(function*(Me){const Q=Me.name;Ce.has(Q)&&(Ce.delete(Q),yield Promise.all(Me.container.getProviders().map(Ie=>Ie.delete())),Me.isDeleted=!0)})).apply(this,arguments)}function Ai(Me,Q,Ie){var et;let dt=null!==(et=De[Me])&&void 0!==et?et:Me;Ie&&(dt+=`-${Ie}`);const Ft=dt.match(/\s|\//),xn=Q.match(/\s|\//);if(Ft||xn){const q=[`Unable to register library "${dt}" with version "${Q}":`];return Ft&&q.push(`library name "${dt}" contains illegal characters (whitespace or "/")`),Ft&&xn&&q.push("and"),xn&&q.push(`version name "${Q}" contains illegal characters (whitespace or "/")`),void $.warn(q.join(" "))}ut(new ie.wA(`${dt}-version`,()=>({library:dt,version:Q}),"VERSION"))}function zr(Me,Q){if(null!==Me&&"function"!=typeof Me)throw xt.create("invalid-log-argument");(0,V.Am)(Me,Q)}function _o(Me){(0,V.Ub)(Me)}const Ra="firebase-heartbeat-database",Gt=1,Yt="firebase-heartbeat-store";let Xt=null;function Jt(){return Xt||(Xt=(0,he.X3)(Ra,Gt,{upgrade:(Me,Q)=>{0===Q&&Me.createObjectStore(Yt)}}).catch(Me=>{throw xt.create("idb-open",{originalErrorMessage:Me.message})})),Xt}function Hi(){return(Hi=(0,a.Z)(function*(Me){try{return yield(yield Jt()).transaction(Yt).objectStore(Yt).get(vo(Me))}catch(Q){if(Q instanceof re.ZR)$.warn(Q.message);else{const Ie=xt.create("idb-get",{originalErrorMessage:Q?.message});$.warn(Ie.message)}}})).apply(this,arguments)}function Un(Me,Q){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,a.Z)(function*(Me,Q){try{const et=(yield Jt()).transaction(Yt,"readwrite");yield et.objectStore(Yt).put(Q,vo(Me)),yield et.done}catch(Ie){if(Ie instanceof re.ZR)$.warn(Ie.message);else{const et=xt.create("idb-set",{originalErrorMessage:Ie?.message});$.warn(et.message)}}})).apply(this,arguments)}function vo(Me){return`${Me.name}!${Me.options.appId}`}class Tn{constructor(Q){this.container=Q,this._heartbeatsCache=null;const Ie=this.container.getProvider("app").getImmediate();this._storage=new Vo(Ie),this._heartbeatsCachePromise=this._storage.read().then(et=>(this._heartbeatsCache=et,et))}triggerHeartbeat(){var Q=this;return(0,a.Z)(function*(){const et=Q.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),dt=os();if(null===Q._heartbeatsCache&&(Q._heartbeatsCache=yield Q._heartbeatsCachePromise),Q._heartbeatsCache.lastSentHeartbeatDate!==dt&&!Q._heartbeatsCache.heartbeats.some(Ft=>Ft.date===dt))return Q._heartbeatsCache.heartbeats.push({date:dt,agent:et}),Q._heartbeatsCache.heartbeats=Q._heartbeatsCache.heartbeats.filter(Ft=>{const xn=new Date(Ft.date).valueOf();return Date.now()-xn<=2592e6}),Q._storage.overwrite(Q._heartbeatsCache)})()}getHeartbeatsHeader(){var Q=this;return(0,a.Z)(function*(){if(null===Q._heartbeatsCache&&(yield Q._heartbeatsCachePromise),null===Q._heartbeatsCache||0===Q._heartbeatsCache.heartbeats.length)return"";const Ie=os(),{heartbeatsToSend:et,unsentEntries:dt}=function yo(Me,Q=1024){const Ie=[];let et=Me.slice();for(const dt of Me){const Ft=Ie.find(xn=>xn.agent===dt.agent);if(Ft){if(Ft.dates.push(dt.date),Lr(Ie)>Q){Ft.dates.pop();break}}else if(Ie.push({agent:dt.agent,dates:[dt.date]}),Lr(Ie)>Q){Ie.pop();break}et=et.slice(1)}return{heartbeatsToSend:Ie,unsentEntries:et}}(Q._heartbeatsCache.heartbeats),Ft=(0,re.L)(JSON.stringify({version:2,heartbeats:et}));return Q._heartbeatsCache.lastSentHeartbeatDate=Ie,dt.length>0?(Q._heartbeatsCache.heartbeats=dt,yield Q._storage.overwrite(Q._heartbeatsCache)):(Q._heartbeatsCache.heartbeats=[],Q._storage.overwrite(Q._heartbeatsCache)),Ft})()}}function os(){return(new Date).toISOString().substring(0,10)}class Vo{constructor(Q){this.app=Q,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,a.Z)(function*(){return!!(0,re.hl)()&&(0,re.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Q=this;return(0,a.Z)(function*(){return(yield Q._canUseIndexedDBPromise)&&(yield function hi(Me){return Hi.apply(this,arguments)}(Q.app))||{heartbeats:[]}})()}overwrite(Q){var Ie=this;return(0,a.Z)(function*(){var et;if(yield Ie._canUseIndexedDBPromise){const Ft=yield Ie.read();return Un(Ie.app,{lastSentHeartbeatDate:null!==(et=Q.lastSentHeartbeatDate)&&void 0!==et?et:Ft.lastSentHeartbeatDate,heartbeats:Q.heartbeats})}})()}add(Q){var Ie=this;return(0,a.Z)(function*(){var et;if(yield Ie._canUseIndexedDBPromise){const Ft=yield Ie.read();return Un(Ie.app,{lastSentHeartbeatDate:null!==(et=Q.lastSentHeartbeatDate)&&void 0!==et?et:Ft.lastSentHeartbeatDate,heartbeats:[...Ft.heartbeats,...Q.heartbeats]})}})()}}function Lr(Me){return(0,re.L)(JSON.stringify({version:2,heartbeats:Me})).length}!function wo(Me){ut(new ie.wA("platform-logger",Q=>new _e(Q),"PRIVATE")),ut(new ie.wA("heartbeat",Q=>new Tn(Q),"PRIVATE")),Ai(je,"0.9.13",Me),Ai(je,"0.9.13","esm2017"),Ai("fire-js","")}("")},4097:(Ct,xe,L)=>{L.d(xe,{C6:()=>a.getApps,Mq:()=>a.getApp});var a=L(7592);(0,a.registerVersion)("firebase","9.23.0","app")},120:(Ct,xe,L)=>{L.d(xe,{Z:()=>a.Z});var a=L(3399);a.Z.registerVersion("firebase","9.23.0","app-compat")},8977:(Ct,xe,L)=>{L.r(xe);var a=L(5861),ie=L(3399),V=L(9058),re=L(7592),he=L(7582),_e=L(7879),Ae=L(4537);const we={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const at=function Ze(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},$e=function Ue(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},lt=new V.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Rt=new _e.Yd("@firebase/auth");function pe(b,...g){Rt.logLevel<=_e.in.ERROR&&Rt.error(`Auth (${re.SDK_VERSION}): ${b}`,...g)}function Re(b,...g){throw ge(b,...g)}function fe(b,...g){return ge(b,...g)}function Pe(b,g,v){const D=Object.assign(Object.assign({},$e()),{[g]:v});return new V.LL("auth","Firebase",D).create(g,{appName:b.name})}function We(b,g,v){if(!(g instanceof v))throw v.name!==g.constructor.name&&Re(b,"argument-error"),Pe(b,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ge(b,...g){if("string"!=typeof b){const v=g[0],D=[...g.slice(1)];return D[0]&&(D[0].appName=b.name),b._errorFactory.create(v,...D)}return lt.create(b,...g)}function X(b,g,...v){if(!b)throw ge(g,...v)}function Je(b){const g="INTERNAL ASSERTION FAILED: "+b;throw pe(g),new Error(g)}function kt(b,g){b||Je(g)}function Nn(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function Kn(){return"http:"===Wn()||"https:"===Wn()}function Wn(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class ar{constructor(g,v){this.shortDelay=g,this.longDelay=v,kt(v>g,"Short delay should be less than long delay!"),this.isMobile=(0,V.uI)()||(0,V.b$)()}get(){return function ci(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Kn()||(0,V.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function me(b,g){kt(b.emulator,"Emulator should always be set here");const{url:v}=b.emulator;return g?`${v}${g.startsWith("/")?g.slice(1):g}`:v}class De{static initialize(g,v,D){this.fetchImpl=g,v&&(this.headersImpl=v),D&&(this.responseImpl=D)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Je("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Je("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Je("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ce={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Se=new ar(3e4,6e4);function Fe(b,g){return b.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:b.tenantId}):g}function Ve(b,g,v,D){return ut.apply(this,arguments)}function ut(){return(ut=(0,a.Z)(function*(b,g,v,D,M={}){return it(b,M,(0,a.Z)(function*(){let O={},Y={};D&&("GET"===g?Y=D:O={body:JSON.stringify(D)});const ue=(0,V.xO)(Object.assign({key:b.config.apiKey},Y)).slice(1),Ye=yield b._getAdditionalHeaders();return Ye["Content-Type"]="application/json",b.languageCode&&(Ye["X-Firebase-Locale"]=b.languageCode),De.fetch()(xt(b,b.config.apiHost,v,ue),Object.assign({method:g,headers:Ye,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function it(b,g,v){return di.apply(this,arguments)}function di(){return(di=(0,a.Z)(function*(b,g,v){b._canInitEmulator=!1;const D=Object.assign(Object.assign({},Ce),g);try{const M=new Qn(b),O=yield Promise.race([v(),M.promise]);M.clearNetworkTimeout();const Y=yield O.json();if("needConfirmation"in Y)throw Jn(b,"account-exists-with-different-credential",Y);if(O.ok&&!("errorMessage"in Y))return Y;{const ue=O.ok?Y.errorMessage:Y.error.message,[Ye,Xe]=ue.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ye)throw Jn(b,"credential-already-in-use",Y);if("EMAIL_EXISTS"===Ye)throw Jn(b,"email-already-in-use",Y);if("USER_DISABLED"===Ye)throw Jn(b,"user-disabled",Y);const Et=D[Ye]||Ye.toLowerCase().replace(/[_\s]+/g,"-");if(Xe)throw Pe(b,Et,Xe);Re(b,Et)}}catch(M){if(M instanceof V.ZR)throw M;Re(b,"network-request-failed",{message:String(M)})}})).apply(this,arguments)}function Pt(b,g,v,D){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,a.Z)(function*(b,g,v,D,M={}){const O=yield Ve(b,g,v,D,M);return"mfaPendingCredential"in O&&Re(b,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function xt(b,g,v,D){const M=`${g}${v}?${D}`;return b.config.emulator?me(b.config,M):`${b.config.apiScheme}://${M}`}class Qn{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((v,D)=>{this.timer=setTimeout(()=>D(fe(this.auth,"network-request-failed")),Se.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Jn(b,g,v){const D={appName:b.name};v.email&&(D.email=v.email),v.phoneNumber&&(D.phoneNumber=v.phoneNumber);const M=fe(b,g,D);return M.customData._tokenResponse=v,M}function Vn(){return(Vn=(0,a.Z)(function*(b,g){return Ve(b,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function $r(){return($r=(0,a.Z)(function*(b,g){return Ve(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ai(){return(Ai=(0,a.Z)(function*(b,g){return Ve(b,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function zr(b){if(b)try{const g=new Date(Number(b));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function Gt(){return(Gt=(0,a.Z)(function*(b,g=!1){const v=(0,V.m9)(b),D=yield v.getIdToken(g),M=Xt(D);X(M&&M.exp&&M.auth_time&&M.iat,v.auth,"internal-error");const O="object"==typeof M.firebase?M.firebase:void 0,Y=O?.sign_in_provider;return{claims:M,token:D,authTime:zr(Yt(M.auth_time)),issuedAtTime:zr(Yt(M.iat)),expirationTime:zr(Yt(M.exp)),signInProvider:Y||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function Yt(b){return 1e3*Number(b)}function Xt(b){const[g,v,D]=b.split(".");if(void 0===g||void 0===v||void 0===D)return pe("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,V.tV)(v);return M?JSON.parse(M):(pe("Failed to decode base64 JWT payload"),null)}catch(M){return pe("Caught error parsing JWT payload as JSON",M?.toString()),null}}function hi(b,g){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,a.Z)(function*(b,g,v=!1){if(v)return g;try{return yield g}catch(D){throw D instanceof V.ZR&&function Un({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}(D)&&b.auth.currentUser===b&&(yield b.auth.signOut()),D}})).apply(this,arguments)}class Ti{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var v;if(g){const D=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),D}{this.errorBackoff=3e4;const M=(null!==(v=this.user.stsTokenManager.expirationTime)&&void 0!==v?v:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(g=!1){var v=this;if(!this.isRunning)return;const D=this.getInterval(g);this.timerId=setTimeout((0,a.Z)(function*(){yield v.iteration()}),D)}iteration(){var g=this;return(0,a.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(v){return void("auth/network-request-failed"===v?.code&&g.schedule(!0))}g.schedule()})()}}class vo{constructor(g,v){this.createdAt=g,this.lastLoginAt=v,this._initializeTime()}_initializeTime(){this.lastSignInTime=zr(this.lastLoginAt),this.creationTime=zr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function En(b){return Fr.apply(this,arguments)}function Fr(){return Fr=(0,a.Z)(function*(b){var g;const v=b.auth,D=yield b.getIdToken(),M=yield hi(b,function ss(b,g){return Ai.apply(this,arguments)}(v,{idToken:D}));X(M?.users.length,v,"internal-error");const O=M.users[0];b._notifyReloadListener(O);const Y=null!==(g=O.providerUserInfo)&&void 0!==g&&g.length?function Vo(b){return b.map(g=>{var{providerId:v}=g,D=(0,he._T)(g,["providerId"]);return{providerId:v,uid:D.rawId||"",displayName:D.displayName||null,email:D.email||null,phoneNumber:D.phoneNumber||null,photoURL:D.photoUrl||null}})}(O.providerUserInfo):[],ue=function yo(b,g){return[...b.filter(D=>!g.some(M=>M.providerId===D.providerId)),...g]}(b.providerData,Y),Et=!!b.isAnonymous&&!(b.email&&O.passwordHash||ue?.length),It={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:ue,metadata:new vo(O.createdAt,O.lastLoginAt),isAnonymous:Et};Object.assign(b,It)}),Fr.apply(this,arguments)}function os(){return(os=(0,a.Z)(function*(b){const g=(0,V.m9)(b);yield En(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function wo(){return(wo=(0,a.Z)(function*(b,g){const v=yield it(b,{},(0,a.Z)(function*(){const D=(0,V.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:M,apiKey:O}=b.config,Y=xt(b,M,"/v1/token",`key=${O}`),ue=yield b._getAdditionalHeaders();return ue["Content-Type"]="application/x-www-form-urlencoded",De.fetch()(Y,{method:"POST",headers:ue,body:D})}));return{accessToken:v.access_token,expiresIn:v.expires_in,refreshToken:v.refresh_token}})).apply(this,arguments)}class Me{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){X(g.idToken,"internal-error"),X(typeof g.idToken<"u","internal-error"),X(typeof g.refreshToken<"u","internal-error");const v="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function Jt(b){const g=Xt(b);return X(g,"internal-error"),X(typeof g.exp<"u","internal-error"),X(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,v)}getToken(g,v=!1){var D=this;return(0,a.Z)(function*(){return X(!D.accessToken||D.refreshToken,g,"user-token-expired"),v||!D.accessToken||D.isExpired?D.refreshToken?(yield D.refresh(g,D.refreshToken),D.accessToken):null:D.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,v){var D=this;return(0,a.Z)(function*(){const{accessToken:M,refreshToken:O,expiresIn:Y}=yield function Lr(b,g){return wo.apply(this,arguments)}(g,v);D.updateTokensAndExpiration(M,O,Number(Y))})()}updateTokensAndExpiration(g,v,D){this.refreshToken=v||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*D}static fromJSON(g,v){const{refreshToken:D,accessToken:M,expirationTime:O}=v,Y=new Me;return D&&(X("string"==typeof D,"internal-error",{appName:g}),Y.refreshToken=D),M&&(X("string"==typeof M,"internal-error",{appName:g}),Y.accessToken=M),O&&(X("number"==typeof O,"internal-error",{appName:g}),Y.expirationTime=O),Y}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Me,this.toJSON())}_performRefresh(){return Je("not implemented")}}function Q(b,g){X("string"==typeof b||typeof b>"u","internal-error",{appName:g})}class Ie{constructor(g){var{uid:v,auth:D,stsTokenManager:M}=g,O=(0,he._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ti(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=v,this.auth=D,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new vo(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(g){var v=this;return(0,a.Z)(function*(){const D=yield hi(v,v.stsTokenManager.getToken(v.auth,g));return X(D,v.auth,"internal-error"),v.accessToken!==D&&(v.accessToken=D,yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)),D})()}getIdTokenResult(g){return function Ra(b){return Gt.apply(this,arguments)}(this,g)}reload(){return function Tn(b){return os.apply(this,arguments)}(this)}_assign(g){this!==g&&(X(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(v=>Object.assign({},v)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){const v=new Ie(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}));return v.metadata._copy(this.metadata),v}_onReload(g){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,v=!1){var D=this;return(0,a.Z)(function*(){let M=!1;g.idToken&&g.idToken!==D.stsTokenManager.accessToken&&(D.stsTokenManager.updateFromServerResponse(g),M=!0),v&&(yield En(D)),yield D.auth._persistUserIfCurrent(D),M&&D.auth._notifyListenersIfCurrent(D)})()}delete(){var g=this;return(0,a.Z)(function*(){const v=yield g.getIdToken();return yield hi(g,function Ci(b,g){return Vn.apply(this,arguments)}(g.auth,{idToken:v})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,v){var D,M,O,Y,ue,Ye,Xe,Et;const It=null!==(D=v.displayName)&&void 0!==D?D:void 0,Si=null!==(M=v.email)&&void 0!==M?M:void 0,no=null!==(O=v.phoneNumber)&&void 0!==O?O:void 0,cd=null!==(Y=v.photoURL)&&void 0!==Y?Y:void 0,Wc=null!==(ue=v.tenantId)&&void 0!==ue?ue:void 0,ud=null!==(Ye=v._redirectEventId)&&void 0!==Ye?Ye:void 0,c_=null!==(Xe=v.createdAt)&&void 0!==Xe?Xe:void 0,Wh=null!==(Et=v.lastLoginAt)&&void 0!==Et?Et:void 0,{uid:dd,emailVerified:s0,isAnonymous:o0,providerData:Wl,stsTokenManager:u_}=v;X(dd&&u_,g,"internal-error");const a0=Me.fromJSON(this.name,u_);X("string"==typeof dd,g,"internal-error"),Q(It,g.name),Q(Si,g.name),X("boolean"==typeof s0,g,"internal-error"),X("boolean"==typeof o0,g,"internal-error"),Q(no,g.name),Q(cd,g.name),Q(Wc,g.name),Q(ud,g.name),Q(c_,g.name),Q(Wh,g.name);const qc=new Ie({uid:dd,auth:g,email:Si,emailVerified:s0,displayName:It,isAnonymous:o0,photoURL:cd,phoneNumber:no,tenantId:Wc,stsTokenManager:a0,createdAt:c_,lastLoginAt:Wh});return Wl&&Array.isArray(Wl)&&(qc.providerData=Wl.map(hd=>Object.assign({},hd))),ud&&(qc._redirectEventId=ud),qc}static _fromIdTokenResponse(g,v,D=!1){return(0,a.Z)(function*(){const M=new Me;M.updateFromServerResponse(v);const O=new Ie({uid:v.localId,auth:g,stsTokenManager:M,isAnonymous:D});return yield En(O),O})()}}const et=new Map;function dt(b){kt(b instanceof Function,"Expected a class definition");let g=et.get(b);return g?(kt(g instanceof b,"Instance stored in cache mismatched with class"),g):(g=new b,et.set(b,g),g)}const xn=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,a.Z)(function*(){return!0})()}_set(v,D){var M=this;return(0,a.Z)(function*(){M.storage[v]=D})()}_get(v){var D=this;return(0,a.Z)(function*(){const M=D.storage[v];return void 0===M?null:M})()}_remove(v){var D=this;return(0,a.Z)(function*(){delete D.storage[v]})()}_addListener(v,D){}_removeListener(v,D){}}return b.type="NONE",b})();function q(b,g,v){return`firebase:${b}:${g}:${v}`}class W{constructor(g,v,D){this.persistence=g,this.auth=v,this.userKey=D;const{config:M,name:O}=this.auth;this.fullUserKey=q(this.userKey,M.apiKey,O),this.fullPersistenceKey=q("persistence",M.apiKey,O),this.boundEventHandler=v._onStorageEvent.bind(v),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,a.Z)(function*(){const v=yield g.persistence._get(g.fullUserKey);return v?Ie._fromJSON(g.auth,v):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var v=this;return(0,a.Z)(function*(){if(v.persistence===g)return;const D=yield v.getCurrentUser();return yield v.removeCurrentUser(),v.persistence=g,D?v.setCurrentUser(D):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,v,D="authUser"){return(0,a.Z)(function*(){if(!v.length)return new W(dt(xn),g,D);const M=(yield Promise.all(v.map(function(){var Xe=(0,a.Z)(function*(Et){if(yield Et._isAvailable())return Et});return function(Et){return Xe.apply(this,arguments)}}()))).filter(Xe=>Xe);let O=M[0]||dt(xn);const Y=q(D,g.config.apiKey,g.name);let ue=null;for(const Xe of v)try{const Et=yield Xe._get(Y);if(Et){const It=Ie._fromJSON(g,Et);Xe!==O&&(ue=It),O=Xe;break}}catch{}const Ye=M.filter(Xe=>Xe._shouldAllowMigration);return O._shouldAllowMigration&&Ye.length?(O=Ye[0],ue&&(yield O._set(Y,ue.toJSON())),yield Promise.all(v.map(function(){var Xe=(0,a.Z)(function*(Et){if(Et!==O)try{yield Et._remove(Y)}catch{}});return function(Et){return Xe.apply(this,arguments)}}())),new W(O,g,D)):new W(O,g,D)})()}}function ne(b){const g=b.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(nn(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Le(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Br(g))return"Blackberry";if(sn(g))return"Webos";if(ye(g))return"Safari";if((g.includes("chrome/")||wt(g))&&!g.includes("edge/"))return"Chrome";if(Kt(g))return"Android";{const D=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===D?.length)return D[1]}return"Other"}function Le(b=(0,V.z$)()){return/firefox\//i.test(b)}function ye(b=(0,V.z$)()){const g=b.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function wt(b=(0,V.z$)()){return/crios\//i.test(b)}function nn(b=(0,V.z$)()){return/iemobile/i.test(b)}function Kt(b=(0,V.z$)()){return/android/i.test(b)}function Br(b=(0,V.z$)()){return/blackberry/i.test(b)}function sn(b=(0,V.z$)()){return/webos/i.test(b)}function ji(b=(0,V.z$)()){return/iphone|ipad|ipod/i.test(b)||/macintosh/i.test(b)&&/mobile/i.test(b)}function Cl(b=(0,V.z$)()){return ji(b)||Kt(b)||sn(b)||Br(b)||/windows phone/i.test(b)||nn(b)}function bo(b,g=[]){let v;switch(b){case"Browser":v=ne((0,V.z$)());break;case"Worker":v=`${ne((0,V.z$)())}-${b}`;break;default:v=b}const D=g.length?g.join(","):"FirebaseCore-web";return`${v}/JsCore/${re.SDK_VERSION}/${D}`}function Zs(){return(Zs=(0,a.Z)(function*(b){return(yield Ve(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ks(b,g){return vn.apply(this,arguments)}function vn(){return(vn=(0,a.Z)(function*(b,g){return Ve(b,"GET","/v2/recaptchaConfig",Fe(b,g))})).apply(this,arguments)}function la(b){return void 0!==b&&void 0!==b.getResponse}function Tl(b){return void 0!==b&&void 0!==b.enterprise}class mc{constructor(g){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===g.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=g.recaptchaKey.split("/")[3],this.emailPasswordEnabled=g.recaptchaEnforcementState.some(v=>"EMAIL_PASSWORD_PROVIDER"===v.provider&&"OFF"!==v.enforcementState)}}function Bs(b){return new Promise((g,v)=>{const D=document.createElement("script");D.setAttribute("src",b),D.onload=g,D.onerror=M=>{const O=fe("internal-error");O.customData=M,v(O)},D.type="text/javascript",D.charset="UTF-8",function Jf(){var b,g;return null!==(g=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==g?g:document}().appendChild(D)})}function Oa(b){return`__${b}${Math.floor(1e6*Math.random())}`}class ah{constructor(g){this.type="recaptcha-enterprise",this.auth=Gi(g)}verify(g="verify",v=!1){var D=this;return(0,a.Z)(function*(){function O(){return O=(0,a.Z)(function*(ue){if(!v){if(null==ue.tenantId&&null!=ue._agentRecaptchaConfig)return ue._agentRecaptchaConfig.siteKey;if(null!=ue.tenantId&&void 0!==ue._tenantRecaptchaConfigs[ue.tenantId])return ue._tenantRecaptchaConfigs[ue.tenantId].siteKey}return new Promise(function(){var Ye=(0,a.Z)(function*(Xe,Et){Ks(ue,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(It=>{if(void 0!==It.recaptchaKey){const Si=new mc(It);return null==ue.tenantId?ue._agentRecaptchaConfig=Si:ue._tenantRecaptchaConfigs[ue.tenantId]=Si,Xe(Si.siteKey)}Et(new Error("recaptcha Enterprise site key undefined"))}).catch(It=>{Et(It)})});return function(Xe,Et){return Ye.apply(this,arguments)}}())}),O.apply(this,arguments)}function Y(ue,Ye,Xe){const Et=window.grecaptcha;Tl(Et)?Et.enterprise.ready(()=>{Et.enterprise.execute(ue,{action:g}).then(It=>{Ye(It)}).catch(()=>{Ye("NO_RECAPTCHA")})}):Xe(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ue,Ye)=>{(function M(ue){return O.apply(this,arguments)})(D.auth).then(Xe=>{if(!v&&Tl(window.grecaptcha))Y(Xe,ue,Ye);else{if(typeof window>"u")return void Ye(new Error("RecaptchaVerifier is only supported in browser"));Bs("https://www.google.com/recaptcha/enterprise.js?render="+Xe).then(()=>{Y(Xe,ue,Ye)}).catch(Et=>{Ye(Et)})}}).catch(Xe=>{Ye(Xe)})})})()}}function Vs(b,g,v){return ka.apply(this,arguments)}function ka(){return(ka=(0,a.Z)(function*(b,g,v,D=!1){const M=new ah(b);let O;try{O=yield M.verify(v)}catch{O=yield M.verify(v,!0)}const Y=Object.assign({},g);return Object.assign(Y,D?{captchaResp:O}:{captchaResponse:O}),Object.assign(Y,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Y,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Y})).apply(this,arguments)}class Qi{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,v){const D=O=>new Promise((Y,ue)=>{try{Y(g(O))}catch(Ye){ue(Ye)}});D.onAbort=v,this.queue.push(D);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(g){var v=this;return(0,a.Z)(function*(){if(v.auth.currentUser===g)return;const D=[];try{for(const M of v.queue)yield M(g),M.onAbort&&D.push(M.onAbort)}catch(M){D.reverse();for(const O of D)try{O()}catch{}throw v.auth._errorFactory.create("login-blocked",{originalMessage:M?.message})}})()}}class lh{constructor(g,v,D,M){this.app=g,this.heartbeatServiceProvider=v,this.appCheckServiceProvider=D,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Mi(this),this.idTokenSubscription=new Mi(this),this.beforeStateQueue=new Qi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(g,v){var D=this;return v&&(this._popupRedirectResolver=dt(v)),this._initializationPromise=this.queue((0,a.Z)(function*(){var M,O;if(!D._deleted&&(D.persistenceManager=yield W.create(D,g),!D._deleted)){if(null!==(M=D._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield D._popupRedirectResolver._initialize(D)}catch{}yield D.initializeCurrentUser(v),D.lastNotifiedUid=(null===(O=D.currentUser)||void 0===O?void 0:O.uid)||null,!D._deleted&&(D._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,a.Z)(function*(){if(g._deleted)return;const v=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||v){if(g.currentUser&&v&&g.currentUser.uid===v.uid)return g._currentUser._assign(v),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(v,!0)}})()}initializeCurrentUser(g){var v=this;return(0,a.Z)(function*(){var D;const M=yield v.assertedPersistence.getCurrentUser();let O=M,Y=!1;if(g&&v.config.authDomain){yield v.getOrInitRedirectPersistenceManager();const ue=null===(D=v.redirectUser)||void 0===D?void 0:D._redirectEventId,Ye=O?._redirectEventId,Xe=yield v.tryRedirectSignIn(g);(!ue||ue===Ye)&&Xe?.user&&(O=Xe.user,Y=!0)}if(!O)return v.directlySetCurrentUser(null);if(!O._redirectEventId){if(Y)try{yield v.beforeStateQueue.runMiddleware(O)}catch(ue){O=M,v._popupRedirectResolver._overrideRedirectResult(v,()=>Promise.reject(ue))}return O?v.reloadAndSetCurrentUserOrClear(O):v.directlySetCurrentUser(null)}return X(v._popupRedirectResolver,v,"argument-error"),yield v.getOrInitRedirectPersistenceManager(),v.redirectUser&&v.redirectUser._redirectEventId===O._redirectEventId?v.directlySetCurrentUser(O):v.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(g){var v=this;return(0,a.Z)(function*(){let D=null;try{D=yield v._popupRedirectResolver._completeRedirectFn(v,g,!0)}catch{yield v._setRedirectUser(null)}return D})()}reloadAndSetCurrentUserOrClear(g){var v=this;return(0,a.Z)(function*(){try{yield En(g)}catch(D){if("auth/network-request-failed"!==D?.code)return v.directlySetCurrentUser(null)}return v.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function ui(){if(typeof navigator>"u")return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var g=this;return(0,a.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var v=this;return(0,a.Z)(function*(){const D=g?(0,V.m9)(g):null;return D&&X(D.auth.config.apiKey===v.config.apiKey,v,"invalid-user-token"),v._updateCurrentUser(D&&D._clone(v))})()}_updateCurrentUser(g,v=!1){var D=this;return(0,a.Z)(function*(){if(!D._deleted)return g&&X(D.tenantId===g.tenantId,D,"tenant-id-mismatch"),v||(yield D.beforeStateQueue.runMiddleware(g)),D.queue((0,a.Z)(function*(){yield D.directlySetCurrentUser(g),D.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,a.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var v=this;return this.queue((0,a.Z)(function*(){yield v.assertedPersistence.setPersistence(dt(g))}))}initializeRecaptchaConfig(){var g=this;return(0,a.Z)(function*(){const v=yield Ks(g,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),D=new mc(v);null==g.tenantId?g._agentRecaptchaConfig=D:g._tenantRecaptchaConfigs[g.tenantId]=D,D.emailPasswordEnabled&&new ah(g).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new V.LL("auth","Firebase",g())}onAuthStateChanged(g,v,D){return this.registerStateListener(this.authStateSubscription,g,v,D)}beforeAuthStateChanged(g,v){return this.beforeStateQueue.pushCallback(g,v)}onIdTokenChanged(g,v,D){return this.registerStateListener(this.idTokenSubscription,g,v,D)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,v){var D=this;return(0,a.Z)(function*(){const M=yield D.getOrInitRedirectPersistenceManager(v);return null===g?M.removeCurrentUser():M.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var v=this;return(0,a.Z)(function*(){if(!v.redirectPersistenceManager){const D=g&&dt(g)||v._popupRedirectResolver;X(D,v,"argument-error"),v.redirectPersistenceManager=yield W.create(v,[dt(D._redirectPersistence)],"redirectUser"),v.redirectUser=yield v.redirectPersistenceManager.getCurrentUser()}return v.redirectPersistenceManager})()}_redirectUserForId(g){var v=this;return(0,a.Z)(function*(){var D,M;return v._isInitialized&&(yield v.queue((0,a.Z)(function*(){}))),(null===(D=v._currentUser)||void 0===D?void 0:D._redirectEventId)===g?v._currentUser:(null===(M=v.redirectUser)||void 0===M?void 0:M._redirectEventId)===g?v.redirectUser:null})()}_persistUserIfCurrent(g){var v=this;return(0,a.Z)(function*(){if(g===v.currentUser)return v.queue((0,a.Z)(function*(){return v.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,v;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const D=null!==(v=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==v?v:null;this.lastNotifiedUid!==D&&(this.lastNotifiedUid=D,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,v,D,M){if(this._deleted)return()=>{};const O="function"==typeof v?v:v.next.bind(v),Y=this._isInitialized?Promise.resolve():this._initializationPromise;return X(Y,this,"internal-error"),Y.then(()=>O(this.currentUser)),"function"==typeof v?g.addObserver(v,D,M):g.addObserver(v)}directlySetCurrentUser(g){var v=this;return(0,a.Z)(function*(){v.currentUser&&v.currentUser!==g&&v._currentUser._stopProactiveRefresh(),g&&v.isProactiveRefreshEnabled&&g._startProactiveRefresh(),v.currentUser=g,g?yield v.assertedPersistence.setCurrentUser(g):yield v.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=bo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,a.Z)(function*(){var v;const D={"X-Client-Version":g.clientVersion};g.app.options.appId&&(D["X-Firebase-gmpid"]=g.app.options.appId);const M=yield null===(v=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getHeartbeatsHeader();M&&(D["X-Firebase-Client"]=M);const O=yield g._getAppCheckToken();return O&&(D["X-Firebase-AppCheck"]=O),D})()}_getAppCheckToken(){var g=this;return(0,a.Z)(function*(){var v;const D=yield null===(v=g.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getToken();return D?.error&&function Nt(b,...g){Rt.logLevel<=_e.in.WARN&&Rt.warn(`Auth (${re.SDK_VERSION}): ${b}`,...g)}(`Error while retrieving App Check token: ${D.error}`),D?.token})()}}function Gi(b){return(0,V.m9)(b)}class Mi{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,V.ne)(v=>this.observer=v)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Pa(b){const g=b.indexOf(":");return g<0?"":b.substr(0,g+1)}function Xf(b){if(!b)return null;const g=Number(b);return isNaN(g)?null:g}class Fa{constructor(g,v){this.providerId=g,this.signInMethod=v}toJSON(){return Je("not implemented")}_getIdTokenResponse(g){return Je("not implemented")}_linkToIdToken(g,v){return Je("not implemented")}_getReauthenticationResolver(g){return Je("not implemented")}}function ep(b,g){return Do.apply(this,arguments)}function Do(){return(Do=(0,a.Z)(function*(b,g){return Ve(b,"POST","/v1/accounts:resetPassword",Fe(b,g))})).apply(this,arguments)}function Ji(b,g){return tp.apply(this,arguments)}function tp(){return(tp=(0,a.Z)(function*(b,g){return Ve(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Au(){return(Au=(0,a.Z)(function*(b,g){return Ve(b,"POST","/v1/accounts:update",Fe(b,g))})).apply(this,arguments)}function Vr(b,g){return ch.apply(this,arguments)}function ch(){return(ch=(0,a.Z)(function*(b,g){return Pt(b,"POST","/v1/accounts:signInWithPassword",Fe(b,g))})).apply(this,arguments)}function Mu(b,g){return La.apply(this,arguments)}function La(){return(La=(0,a.Z)(function*(b,g){return Ve(b,"POST","/v1/accounts:sendOobCode",Fe(b,g))})).apply(this,arguments)}function Nu(){return(Nu=(0,a.Z)(function*(b,g){return Mu(b,g)})).apply(this,arguments)}function Sl(b,g){return uh.apply(this,arguments)}function uh(){return(uh=(0,a.Z)(function*(b,g){return Mu(b,g)})).apply(this,arguments)}function yn(b,g){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,a.Z)(function*(b,g){return Mu(b,g)})).apply(this,arguments)}function ca(){return(ca=(0,a.Z)(function*(b,g){return Mu(b,g)})).apply(this,arguments)}function _c(){return(_c=(0,a.Z)(function*(b,g){return Pt(b,"POST","/v1/accounts:signInWithEmailLink",Fe(b,g))})).apply(this,arguments)}function vc(){return(vc=(0,a.Z)(function*(b,g){return Pt(b,"POST","/v1/accounts:signInWithEmailLink",Fe(b,g))})).apply(this,arguments)}class xu extends Fa{constructor(g,v,D,M=null){super("password",D),this._email=g,this._password=v,this._tenantId=M}static _fromEmailAndPassword(g,v){return new xu(g,v,"password")}static _fromEmailAndCode(g,v,D=null){return new xu(g,v,"emailLink",D)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g;if(v?.email&&v?.password){if("password"===v.signInMethod)return this._fromEmailAndPassword(v.email,v.password);if("emailLink"===v.signInMethod)return this._fromEmailAndCode(v.email,v.password,v.tenantId)}return null}_getIdTokenResponse(g){var v=this;return(0,a.Z)(function*(){var D;switch(v.signInMethod){case"password":const M={returnSecureToken:!0,email:v._email,password:v._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(D=g._getRecaptchaConfig())&&void 0!==D&&D.emailPasswordEnabled){const O=yield Vs(g,M,"signInWithPassword");return Vr(g,O)}return Vr(g,M).catch(function(){var O=(0,a.Z)(function*(Y){if("auth/missing-recaptcha-token"===Y.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const ue=yield Vs(g,M,"signInWithPassword");return Vr(g,ue)}return Promise.reject(Y)});return function(Y){return O.apply(this,arguments)}}());case"emailLink":return function qr(b,g){return _c.apply(this,arguments)}(g,{email:v._email,oobCode:v._password});default:Re(g,"internal-error")}})()}_linkToIdToken(g,v){var D=this;return(0,a.Z)(function*(){switch(D.signInMethod){case"password":return Ji(g,{idToken:v,returnSecureToken:!0,email:D._email,password:D._password});case"emailLink":return function Nm(b,g){return vc.apply(this,arguments)}(g,{idToken:v,email:D._email,oobCode:D._password});default:Re(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Hs(b,g){return fi.apply(this,arguments)}function fi(){return(fi=(0,a.Z)(function*(b,g){return Pt(b,"POST","/v1/accounts:signInWithIdp",Fe(b,g))})).apply(this,arguments)}class zt extends Fa{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const v=new zt(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(v.idToken=g.idToken),g.accessToken&&(v.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(v.nonce=g.nonce),g.pendingToken&&(v.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(v.accessToken=g.oauthToken,v.secret=g.oauthTokenSecret):Re("argument-error"),v}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g,{providerId:D,signInMethod:M}=v,O=(0,he._T)(v,["providerId","signInMethod"]);if(!D||!M)return null;const Y=new zt(D,M);return Y.idToken=O.idToken||void 0,Y.accessToken=O.accessToken||void 0,Y.secret=O.secret,Y.nonce=O.nonce,Y.pendingToken=O.pendingToken||null,Y}_getIdTokenResponse(g){return Hs(g,this.buildRequest())}_linkToIdToken(g,v){const D=this.buildRequest();return D.idToken=v,Hs(g,D)}_getReauthenticationResolver(g){const v=this.buildRequest();return v.autoCreate=!1,Hs(g,v)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const v={};this.idToken&&(v.id_token=this.idToken),this.accessToken&&(v.access_token=this.accessToken),this.secret&&(v.oauth_token_secret=this.secret),v.providerId=this.providerId,this.nonce&&!this.pendingToken&&(v.nonce=this.nonce),g.postBody=(0,V.xO)(v)}return g}}function Yr(){return(Yr=(0,a.Z)(function*(b,g){return Ve(b,"POST","/v1/accounts:sendVerificationCode",Fe(b,g))})).apply(this,arguments)}function Xi(){return(Xi=(0,a.Z)(function*(b,g){return Pt(b,"POST","/v1/accounts:signInWithPhoneNumber",Fe(b,g))})).apply(this,arguments)}function zn(){return(zn=(0,a.Z)(function*(b,g){const v=yield Pt(b,"POST","/v1/accounts:signInWithPhoneNumber",Fe(b,g));if(v.temporaryProof)throw Jn(b,"account-exists-with-different-credential",v);return v})).apply(this,arguments)}const Uo={USER_NOT_FOUND:"user-not-found"};function Wt(){return(Wt=(0,a.Z)(function*(b,g){return Pt(b,"POST","/v1/accounts:signInWithPhoneNumber",Fe(b,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Uo)})).apply(this,arguments)}class Dr extends Fa{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,v){return new Dr({verificationId:g,verificationCode:v})}static _fromTokenResponse(g,v){return new Dr({phoneNumber:g,temporaryProof:v})}_getIdTokenResponse(g){return function Ba(b,g){return Xi.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,v){return function yc(b,g){return zn.apply(this,arguments)}(g,Object.assign({idToken:v},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Al(b,g){return Wt.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:v,verificationId:D,verificationCode:M}=this.params;return g&&v?{temporaryProof:g,phoneNumber:v}:{sessionInfo:D,code:M}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:v,verificationCode:D,phoneNumber:M,temporaryProof:O}=g;return D||v||M||O?new Dr({verificationId:v,verificationCode:D,phoneNumber:M,temporaryProof:O}):null}}class gi{constructor(g){var v,D,M,O,Y,ue;const Ye=(0,V.zd)((0,V.pd)(g)),Xe=null!==(v=Ye.apiKey)&&void 0!==v?v:null,Et=null!==(D=Ye.oobCode)&&void 0!==D?D:null,It=function ip(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=Ye.mode)&&void 0!==M?M:null);X(Xe&&Et&&It,"argument-error"),this.apiKey=Xe,this.operation=It,this.code=Et,this.continueUrl=null!==(O=Ye.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(Y=Ye.languageCode)&&void 0!==Y?Y:null,this.tenantId=null!==(ue=Ye.tenantId)&&void 0!==ue?ue:null}static parseLink(g){const v=function Ho(b){const g=(0,V.zd)((0,V.pd)(b)).link,v=g?(0,V.zd)((0,V.pd)(g)).deep_link_id:null,D=(0,V.zd)((0,V.pd)(b)).deep_link_id;return(D?(0,V.zd)((0,V.pd)(D)).link:null)||D||v||g||b}(g);try{return new gi(v)}catch{return null}}}let Va=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(v,D){return xu._fromEmailAndPassword(v,D)}static credentialWithLink(v,D){const M=gi.parseLink(D);return X(M,"argument-error"),xu._fromEmailAndCode(v,M.code,M.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class cr{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class jo extends cr{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Go extends jo{static credentialFromJSON(g){const v="string"==typeof g?JSON.parse(g):g;return X("providerId"in v&&"signInMethod"in v,"argument-error"),zt._fromParams(v)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return X(g.idToken||g.accessToken,"argument-error"),zt._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Go.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Go.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:D,oauthTokenSecret:M,pendingToken:O,nonce:Y,providerId:ue}=g;if(!D&&!M&&!v&&!O||!ue)return null;try{return new Go(ue)._credential({idToken:v,accessToken:D,nonce:Y,pendingToken:O})}catch{return null}}}let ua=(()=>{class b extends jo{constructor(){super("facebook.com")}static credential(v){return zt._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return b.credentialFromTaggedObject(v)}static credentialFromError(v){return b.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return b.credential(v.oauthAccessToken)}catch{return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),Ts=(()=>{class b extends jo{constructor(){super("google.com"),this.addScope("profile")}static credential(v,D){return zt._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:v,accessToken:D})}static credentialFromResult(v){return b.credentialFromTaggedObject(v)}static credentialFromError(v){return b.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:D,oauthAccessToken:M}=v;if(!D&&!M)return null;try{return b.credential(D,M)}catch{return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),wc=(()=>{class b extends jo{constructor(){super("github.com")}static credential(v){return zt._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return b.credentialFromTaggedObject(v)}static credentialFromError(v){return b.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return b.credential(v.oauthAccessToken)}catch{return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class ln extends Fa{constructor(g,v){super(g,g),this.pendingToken=v}_getIdTokenResponse(g){return Hs(g,this.buildRequest())}_linkToIdToken(g,v){const D=this.buildRequest();return D.idToken=v,Hs(g,D)}_getReauthenticationResolver(g){const v=this.buildRequest();return v.autoCreate=!1,Hs(g,v)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g,{providerId:D,signInMethod:M,pendingToken:O}=v;return D&&M&&O&&D===M?new ln(D,O):null}static _create(g,v){return new ln(g,v)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ml extends cr{constructor(g){X(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Ml.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Ml.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const v=ln.fromJSON(g);return X(v,"argument-error"),v}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:v,providerId:D}=g;if(!v||!D)return null;try{return ln._create(D,v)}catch{return null}}}let Ru=(()=>{class b extends jo{constructor(){super("twitter.com")}static credential(v,D){return zt._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:v,oauthTokenSecret:D})}static credentialFromResult(v){return b.credentialFromTaggedObject(v)}static credentialFromError(v){return b.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthAccessToken:D,oauthTokenSecret:M}=v;if(!D||!M)return null;try{return b.credential(D,M)}catch{return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function ur(b,g){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,a.Z)(function*(b,g){return Pt(b,"POST","/v1/accounts:signUp",Fe(b,g))})).apply(this,arguments)}class dr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,v,D,M=!1){return(0,a.Z)(function*(){const O=yield Ie._fromIdTokenResponse(g,D,M),Y=ha(D);return new dr({user:O,providerId:Y,_tokenResponse:D,operationType:v})})()}static _forOperation(g,v,D){return(0,a.Z)(function*(){yield g._updateTokensIfNecessary(D,!0);const M=ha(D);return new dr({user:g,providerId:M,_tokenResponse:D,operationType:v})})()}}function ha(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function xm(){return(xm=(0,a.Z)(function*(b){var g;const v=Gi(b);if(yield v._initializationPromise,null!==(g=v.currentUser)&&void 0!==g&&g.isAnonymous)return new dr({user:v.currentUser,providerId:null,operationType:"signIn"});const D=yield ur(v,{returnSecureToken:!0}),M=yield dr._fromIdTokenResponse(v,"signIn",D,!0);return yield v._updateCurrentUser(M.user),M})).apply(this,arguments)}class hr extends V.ZR{constructor(g,v,D,M){var O;super(v.code,v.message),this.operationType=D,this.user=M,Object.setPrototypeOf(this,hr.prototype),this.customData={appName:g.name,tenantId:null!==(O=g.tenantId)&&void 0!==O?O:void 0,_serverResponse:v.customData._serverResponse,operationType:D}}static _fromErrorAndOperation(g,v,D,M){return new hr(g,v,D,M)}}function Ur(b,g,v,D){return("reauthenticate"===g?v._getReauthenticationResolver(b):v._getIdTokenResponse(b)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?hr._fromErrorAndOperation(b,O,g,D):O})}function Ou(b){return new Set(b.map(({providerId:g})=>g).filter(g=>!!g))}function Is(){return Is=(0,a.Z)(function*(b,g){const v=(0,V.m9)(b);yield xl(!0,v,g);const{providerUserInfo:D}=yield function lr(b,g){return $r.apply(this,arguments)}(v.auth,{idToken:yield v.getIdToken(),deleteProvider:[g]}),M=Ou(D||[]);return v.providerData=v.providerData.filter(O=>M.has(O.providerId)),M.has("phone")||(v.phoneNumber=null),yield v.auth._persistUserIfCurrent(v),v}),Is.apply(this,arguments)}function cs(b,g){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,a.Z)(function*(b,g,v=!1){const D=yield hi(b,g._linkToIdToken(b.auth,yield b.getIdToken()),v);return dr._forOperation(b,"link",D)})).apply(this,arguments)}function xl(b,g,v){return hh.apply(this,arguments)}function hh(){return(hh=(0,a.Z)(function*(b,g,v){yield En(g);const M=!1===b?"provider-already-linked":"no-such-provider";X(Ou(g.providerData).has(v)===b,g.auth,M)})).apply(this,arguments)}function Ny(b,g){return ku.apply(this,arguments)}function ku(){return(ku=(0,a.Z)(function*(b,g,v=!1){const{auth:D}=b,M="reauthenticate";try{const O=yield hi(b,Ur(D,M,g,b),v);X(O.idToken,D,"internal-error");const Y=Xt(O.idToken);X(Y,D,"internal-error");const{sub:ue}=Y;return X(b.uid===ue,D,"user-mismatch"),dr._forOperation(b,M,O)}catch(O){throw"auth/user-not-found"===O?.code&&Re(D,"user-mismatch"),O}})).apply(this,arguments)}function fh(b,g){return rp.apply(this,arguments)}function rp(){return(rp=(0,a.Z)(function*(b,g,v=!1){const D="signIn",M=yield Ur(b,D,g),O=yield dr._fromIdTokenResponse(b,D,M);return v||(yield b._updateCurrentUser(O.user)),O})).apply(this,arguments)}function ph(b,g){return sp.apply(this,arguments)}function sp(){return(sp=(0,a.Z)(function*(b,g){return fh(Gi(b),g)})).apply(this,arguments)}function xy(b,g){return mi.apply(this,arguments)}function mi(){return(mi=(0,a.Z)(function*(b,g){const v=(0,V.m9)(b);return yield xl(!1,v,g.providerId),cs(v,g)})).apply(this,arguments)}function Ry(b,g){return Rm.apply(this,arguments)}function Rm(){return(Rm=(0,a.Z)(function*(b,g){return Ny((0,V.m9)(b),g)})).apply(this,arguments)}function Om(){return(Om=(0,a.Z)(function*(b,g){return Pt(b,"POST","/v1/accounts:signInWithCustomToken",Fe(b,g))})).apply(this,arguments)}function $o(){return $o=(0,a.Z)(function*(b,g){const v=Gi(b),D=yield function bD(b,g){return Om.apply(this,arguments)}(v,{token:g,returnSecureToken:!0}),M=yield dr._fromIdTokenResponse(v,"signIn",D);return yield v._updateCurrentUser(M.user),M}),$o.apply(this,arguments)}class gh{constructor(g,v){this.factorId=g,this.uid=v.mfaEnrollmentId,this.enrollmentTime=new Date(v.enrolledAt).toUTCString(),this.displayName=v.displayName}static _fromServerResponse(g,v){return"phoneInfo"in v?Rl._fromServerResponse(g,v):"totpInfo"in v?mh._fromServerResponse(g,v):Re(g,"internal-error")}}class Rl extends gh{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,v){return new Rl(v)}}class mh extends gh{constructor(g){super("totp",g)}static _fromServerResponse(g,v){return new mh(v)}}function bc(b,g,v){var D;X((null===(D=v.url)||void 0===D?void 0:D.length)>0,b,"invalid-continue-uri"),X(typeof v.dynamicLinkDomain>"u"||v.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),g.continueUrl=v.url,g.dynamicLinkDomain=v.dynamicLinkDomain,g.canHandleCodeInApp=v.handleCodeInApp,v.iOS&&(X(v.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),g.iOSBundleId=v.iOS.bundleId),v.android&&(X(v.android.packageName.length>0,b,"missing-android-pkg-name"),g.androidInstallApp=v.android.installApp,g.androidMinimumVersionCode=v.android.minimumVersion,g.androidPackageName=v.android.packageName)}function Dc(){return Dc=(0,a.Z)(function*(b,g,v){var D;const M=Gi(b),O={requestType:"PASSWORD_RESET",email:g,clientType:"CLIENT_TYPE_WEB"};if(null!==(D=M._getRecaptchaConfig())&&void 0!==D&&D.emailPasswordEnabled){const Y=yield Vs(M,O,"getOobCode",!0);v&&bc(M,Y,v),yield Sl(M,Y)}else v&&bc(M,O,v),yield Sl(M,O).catch(function(){var Y=(0,a.Z)(function*(ue){if("auth/missing-recaptcha-token"!==ue.code)return Promise.reject(ue);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Ye=yield Vs(M,O,"getOobCode",!0);v&&bc(M,Ye,v),yield Sl(M,Ye)}});return function(ue){return Y.apply(this,arguments)}}())}),Dc.apply(this,arguments)}function Eo(){return(Eo=(0,a.Z)(function*(b,g,v){yield ep((0,V.m9)(b),{oobCode:g,newPassword:v})})).apply(this,arguments)}function js(){return js=(0,a.Z)(function*(b,g){yield function Us(b,g){return Au.apply(this,arguments)}((0,V.m9)(b),{oobCode:g})}),js.apply(this,arguments)}function er(b,g){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,a.Z)(function*(b,g){const v=(0,V.m9)(b),D=yield ep(v,{oobCode:g}),M=D.requestType;switch(X(M,v,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":X(D.newEmail,v,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":X(D.mfaInfo,v,"internal-error");default:X(D.email,v,"internal-error")}let O=null;return D.mfaInfo&&(O=gh._fromServerResponse(Gi(v),D.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.newEmail:D.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.email:D.newEmail)||null,multiFactorInfo:O},operation:M}})).apply(this,arguments)}function $a(){return($a=(0,a.Z)(function*(b,g){const{data:v}=yield er((0,V.m9)(b),g);return v.email})).apply(this,arguments)}function Ec(){return Ec=(0,a.Z)(function*(b,g,v){var D;const M=Gi(b),O={returnSecureToken:!0,email:g,password:v,clientType:"CLIENT_TYPE_WEB"};let Y;if(null!==(D=M._getRecaptchaConfig())&&void 0!==D&&D.emailPasswordEnabled){const Xe=yield Vs(M,O,"signUpPassword");Y=ur(M,Xe)}else Y=ur(M,O).catch(function(){var Xe=(0,a.Z)(function*(Et){if("auth/missing-recaptcha-token"===Et.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const It=yield Vs(M,O,"signUpPassword");return ur(M,It)}return Promise.reject(Et)});return function(Et){return Xe.apply(this,arguments)}}());const ue=yield Y.catch(Xe=>Promise.reject(Xe)),Ye=yield dr._fromIdTokenResponse(M,"signIn",ue);return yield M._updateCurrentUser(Ye.user),Ye}),Ec.apply(this,arguments)}function Cc(){return Cc=(0,a.Z)(function*(b,g,v){var D;const M=Gi(b),O={requestType:"EMAIL_SIGNIN",email:g,clientType:"CLIENT_TYPE_WEB"};function Y(ue,Ye){X(Ye.handleCodeInApp,M,"argument-error"),Ye&&bc(M,ue,Ye)}if(null!==(D=M._getRecaptchaConfig())&&void 0!==D&&D.emailPasswordEnabled){const ue=yield Vs(M,O,"getOobCode",!0);Y(ue,v),yield yn(M,ue)}else Y(O,v),yield yn(M,O).catch(function(){var ue=(0,a.Z)(function*(Ye){if("auth/missing-recaptcha-token"!==Ye.code)return Promise.reject(Ye);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Xe=yield Vs(M,O,"getOobCode",!0);Y(Xe,v),yield yn(M,Xe)}});return function(Ye){return ue.apply(this,arguments)}}())}),Cc.apply(this,arguments)}function vh(){return(vh=(0,a.Z)(function*(b,g,v){const D=(0,V.m9)(b),M=Va.credentialWithLink(g,v||Nn());return X(M._tenantId===(D.tenantId||null),D,"tenant-id-mismatch"),ph(D,M)})).apply(this,arguments)}function wh(){return(wh=(0,a.Z)(function*(b,g){return Ve(b,"POST","/v1/accounts:createAuthUri",Fe(b,g))})).apply(this,arguments)}function za(){return za=(0,a.Z)(function*(b,g){const D={identifier:g,continueUri:Kn()?Nn():"http://localhost"},{signinMethods:M}=yield function yh(b,g){return wh.apply(this,arguments)}((0,V.m9)(b),D);return M||[]}),za.apply(this,arguments)}function Ic(){return Ic=(0,a.Z)(function*(b,g){const v=(0,V.m9)(b),M={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};g&&bc(v.auth,M,g);const{email:O}=yield function np(b,g){return Nu.apply(this,arguments)}(v.auth,M);O!==b.email&&(yield b.reload())}),Ic.apply(this,arguments)}function Pu(){return Pu=(0,a.Z)(function*(b,g,v){const D=(0,V.m9)(b),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:g};v&&bc(D.auth,O,v);const{email:Y}=yield function Wr(b,g){return ca.apply(this,arguments)}(D.auth,O);Y!==b.email&&(yield b.reload())}),Pu.apply(this,arguments)}function dp(){return(dp=(0,a.Z)(function*(b,g){return Ve(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function bh(){return bh=(0,a.Z)(function*(b,{displayName:g,photoURL:v}){if(void 0===g&&void 0===v)return;const D=(0,V.m9)(b),O={idToken:yield D.getIdToken(),displayName:g,photoUrl:v,returnSecureToken:!0},Y=yield hi(D,function Oy(b,g){return dp.apply(this,arguments)}(D.auth,O));D.displayName=Y.displayName||null,D.photoURL=Y.photoUrl||null;const ue=D.providerData.find(({providerId:Ye})=>"password"===Ye);ue&&(ue.displayName=D.displayName,ue.photoURL=D.photoURL),yield D._updateTokensIfNecessary(Y)}),bh.apply(this,arguments)}function km(b,g,v){return kl.apply(this,arguments)}function kl(){return(kl=(0,a.Z)(function*(b,g,v){const{auth:D}=b,O={idToken:yield b.getIdToken(),returnSecureToken:!0};g&&(O.email=g),v&&(O.password=v);const Y=yield hi(b,Ji(D,O));yield b._updateTokensIfNecessary(Y,!0)})).apply(this,arguments)}class Pl{constructor(g,v,D={}){this.isNewUser=g,this.providerId=v,this.profile=D}}class Sc extends Pl{constructor(g,v,D,M){super(g,v,D),this.username=M}}class Dh extends Pl{constructor(g,v){super(g,"facebook.com",v)}}class fp extends Sc{constructor(g,v){super(g,"github.com",v,"string"==typeof v?.login?v?.login:null)}}class Lu extends Pl{constructor(g,v){super(g,"google.com",v)}}class Ac extends Sc{constructor(g,v,D){super(g,"twitter.com",v,D)}}function Pm(b){const{user:g,_tokenResponse:v}=b;return g.isAnonymous&&!v?{providerId:null,isNewUser:!1,profile:null}:function Py(b){var g,v;if(!b)return null;const{providerId:D}=b,M=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},O=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!D&&b?.idToken){const Y=null===(v=null===(g=Xt(b.idToken))||void 0===g?void 0:g.firebase)||void 0===v?void 0:v.sign_in_provider;if(Y)return new Pl(O,"anonymous"!==Y&&"custom"!==Y?Y:null)}if(!D)return null;switch(D){case"facebook.com":return new Dh(O,M);case"github.com":return new fp(O,M);case"google.com":return new Lu(O,M);case"twitter.com":return new Ac(O,M,b.screenName||null);case"custom":case"anonymous":return new Pl(O,null);default:return new Pl(O,D,M)}}(v)}class Co{constructor(g,v,D){this.type=g,this.credential=v,this.auth=D}static _fromIdtoken(g,v){return new Co("enroll",g,v)}static _fromMfaPendingCredential(g){return new Co("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var v,D;if(g?.multiFactorSession){if(null!==(v=g.multiFactorSession)&&void 0!==v&&v.pendingCredential)return Co._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(D=g.multiFactorSession)&&void 0!==D&&D.idToken)return Co._fromIdtoken(g.multiFactorSession.idToken)}return null}}class qa{constructor(g,v,D){this.session=g,this.hints=v,this.signInResolver=D}static _fromError(g,v){const D=Gi(g),M=v.customData._serverResponse,O=(M.mfaInfo||[]).map(ue=>gh._fromServerResponse(D,ue));X(M.mfaPendingCredential,D,"internal-error");const Y=Co._fromMfaPendingCredential(M.mfaPendingCredential);return new qa(Y,O,function(){var ue=(0,a.Z)(function*(Ye){const Xe=yield Ye._process(D,Y);delete M.mfaInfo,delete M.mfaPendingCredential;const Et=Object.assign(Object.assign({},M),{idToken:Xe.idToken,refreshToken:Xe.refreshToken});switch(v.operationType){case"signIn":const It=yield dr._fromIdTokenResponse(D,v.operationType,Et);return yield D._updateCurrentUser(It.user),It;case"reauthenticate":return X(v.user,D,"internal-error"),dr._forOperation(v.user,v.operationType,Et);default:Re(D,"internal-error")}});return function(Ye){return ue.apply(this,arguments)}}())}resolveSignIn(g){var v=this;return(0,a.Z)(function*(){return v.signInResolver(g)})()}}class Hn{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(v=>{v.mfaInfo&&(this.enrolledFactors=v.mfaInfo.map(D=>gh._fromServerResponse(g.auth,D)))})}static _fromUser(g){return new Hn(g)}getSession(){var g=this;return(0,a.Z)(function*(){return Co._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,v){var D=this;return(0,a.Z)(function*(){const M=g,O=yield D.getSession(),Y=yield hi(D.user,M._process(D.user.auth,O,v));return yield D.user._updateTokensIfNecessary(Y),D.user.reload()})()}unenroll(g){var v=this;return(0,a.Z)(function*(){const D="string"==typeof g?g:g.uid,M=yield v.user.getIdToken();try{const O=yield hi(v.user,function mp(b,g){return Ve(b,"POST","/v2/accounts/mfaEnrollment:withdraw",Fe(b,g))}(v.user.auth,{idToken:M,mfaEnrollmentId:D}));v.enrolledFactors=v.enrolledFactors.filter(({uid:Y})=>Y!==D),yield v.user._updateTokensIfNecessary(O),yield v.user.reload()}catch(O){throw O}})()}}const pa=new WeakMap,Cr="__sak";class Um{constructor(g,v){this.storageRetriever=g,this.type=v}_isAvailable(){try{return this.storage?(this.storage.setItem(Cr,"1"),this.storage.removeItem(Cr),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,v){return this.storage.setItem(g,JSON.stringify(v)),Promise.resolve()}_get(g){const v=this.storage.getItem(g);return Promise.resolve(v?JSON.parse(v):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Fl=(()=>{class b extends Um{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(v,D)=>this.onStorageEvent(v,D),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ih(){const b=(0,V.z$)();return ye(b)||ji(b)}()&&function sh(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Cl(),this._shouldAllowMigration=!0}forAllChangedKeys(v){for(const D of Object.keys(this.listeners)){const M=this.storage.getItem(D),O=this.localCache[D];M!==O&&v(D,O,M)}}onStorageEvent(v,D=!1){if(!v.key)return void this.forAllChangedKeys((ue,Ye,Xe)=>{this.notifyListeners(ue,Xe)});const M=v.key;if(D?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ue=this.storage.getItem(M);if(v.newValue!==ue)null!==v.newValue?this.storage.setItem(M,v.newValue):this.storage.removeItem(M);else if(this.localCache[M]===v.newValue&&!D)return}const O=()=>{const ue=this.storage.getItem(M);!D&&this.localCache[M]===ue||this.notifyListeners(M,ue)},Y=this.storage.getItem(M);!function oa(){return(0,V.w1)()&&10===document.documentMode}()||Y===v.newValue||v.newValue===v.oldValue?O():setTimeout(O,10)}notifyListeners(v,D){this.localCache[v]=D;const M=this.listeners[v];if(M)for(const O of Array.from(M))O(D&&JSON.parse(D))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((v,D,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:v,oldValue:D,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(v,D){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[v]||(this.listeners[v]=new Set,this.localCache[v]=this.storage.getItem(v)),this.listeners[v].add(D)}_removeListener(v,D){this.listeners[v]&&(this.listeners[v].delete(D),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(v,D){var M=()=>super._set,O=this;return(0,a.Z)(function*(){yield M().call(O,v,D),O.localCache[v]=JSON.stringify(D)})()}_get(v){var D=()=>super._get,M=this;return(0,a.Z)(function*(){const O=yield D().call(M,v);return M.localCache[v]=JSON.stringify(O),O})()}_remove(v){var D=()=>super._remove,M=this;return(0,a.Z)(function*(){yield D().call(M,v),delete M.localCache[v]})()}}return b.type="LOCAL",b})(),ds=(()=>{class b extends Um{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(v,D){}_removeListener(v,D){}}return b.type="SESSION",b})();let Sh=(()=>{class b{constructor(v){this.eventTarget=v,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(v){const D=this.receivers.find(O=>O.isListeningto(v));if(D)return D;const M=new b(v);return this.receivers.push(M),M}isListeningto(v){return this.eventTarget===v}handleEvent(v){var D=this;return(0,a.Z)(function*(){const M=v,{eventId:O,eventType:Y,data:ue}=M.data,Ye=D.handlersMap[Y];if(!Ye?.size)return;M.ports[0].postMessage({status:"ack",eventId:O,eventType:Y});const Xe=Array.from(Ye).map(function(){var It=(0,a.Z)(function*(Si){return Si(M.origin,ue)});return function(Si){return It.apply(this,arguments)}}()),Et=yield function Gm(b){return Promise.all(b.map(function(){var g=(0,a.Z)(function*(v){try{return{fulfilled:!0,value:yield v}}catch(D){return{fulfilled:!1,reason:D}}});return function(v){return g.apply(this,arguments)}}()))}(Xe);M.ports[0].postMessage({status:"done",eventId:O,eventType:Y,response:Et})})()}_subscribe(v,D){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[v]||(this.handlersMap[v]=new Set),this.handlersMap[v].add(D)}_unsubscribe(v,D){this.handlersMap[v]&&D&&this.handlersMap[v].delete(D),(!D||0===this.handlersMap[v].size)&&delete this.handlersMap[v],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function Vu(b="",g=10){let v="";for(let D=0;D<g;D++)v+=Math.floor(10*Math.random());return b+v}class Ly{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,v,D=50){var M=this;return(0,a.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let Y,ue;return new Promise((Ye,Xe)=>{const Et=Vu("",20);O.port1.start();const It=setTimeout(()=>{Xe(new Error("unsupported_event"))},D);ue={messageChannel:O,onMessage(Si){const no=Si;if(no.data.eventId===Et)switch(no.data.status){case"ack":clearTimeout(It),Y=setTimeout(()=>{Xe(new Error("timeout"))},3e3);break;case"done":clearTimeout(Y),Ye(no.data.response);break;default:clearTimeout(It),clearTimeout(Y),Xe(new Error("invalid_response"))}}},M.handlers.add(ue),O.port1.addEventListener("message",ue.onMessage),M.target.postMessage({eventType:g,eventId:Et,data:v},[O.port2])}).finally(()=>{ue&&M.removeMessageHandler(ue)})})()}}function ri(){return window}function qt(){return typeof ri().WorkerGlobalScope<"u"&&"function"==typeof ri().importScripts}function vp(){return(vp=(0,a.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const yp="firebaseLocalStorageDb",To="firebaseLocalStorage",Hu="fbase_key";class ju{constructor(g){this.request=g}toPromise(){return new Promise((g,v)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{v(this.request.error)})})}}function Gu(b,g){return b.transaction([To],g?"readwrite":"readonly").objectStore(To)}function Ah(){const b=indexedDB.open(yp,1);return new Promise((g,v)=>{b.addEventListener("error",()=>{v(b.error)}),b.addEventListener("upgradeneeded",()=>{const D=b.result;try{D.createObjectStore(To,{keyPath:Hu})}catch(M){v(M)}}),b.addEventListener("success",(0,a.Z)(function*(){const D=b.result;D.objectStoreNames.contains(To)?g(D):(D.close(),yield function Vy(){const b=indexedDB.deleteDatabase(yp);return new ju(b).toPromise()}(),g(yield Ah()))}))})}function He(b,g,v){return gn.apply(this,arguments)}function gn(){return(gn=(0,a.Z)(function*(b,g,v){const D=Gu(b,!0).put({[Hu]:g,value:v});return new ju(D).toPromise()})).apply(this,arguments)}function $u(){return($u=(0,a.Z)(function*(b,g){const v=Gu(b,!1).get(g),D=yield new ju(v).toPromise();return void 0===D?null:D.value})).apply(this,arguments)}function gr(b,g){const v=Gu(b,!0).delete(g);return new ju(v).toPromise()}const Ka=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var v=this;return(0,a.Z)(function*(){return v.db||(v.db=yield Ah()),v.db})()}_withRetries(v){var D=this;return(0,a.Z)(function*(){let M=0;for(;;)try{const O=yield D._openDb();return yield v(O)}catch(O){if(M++>3)throw O;D.db&&(D.db.close(),D.db=void 0)}})()}initializeServiceWorkerMessaging(){var v=this;return(0,a.Z)(function*(){return qt()?v.initializeReceiver():v.initializeSender()})()}initializeReceiver(){var v=this;return(0,a.Z)(function*(){v.receiver=Sh._getInstance(function pr(){return qt()?self:null}()),v.receiver._subscribe("keyChanged",function(){var D=(0,a.Z)(function*(M,O){return{keyProcessed:(yield v._poll()).includes(O.key)}});return function(M,O){return D.apply(this,arguments)}}()),v.receiver._subscribe("ping",function(){var D=(0,a.Z)(function*(M,O){return["keyChanged"]});return function(M,O){return D.apply(this,arguments)}}())})()}initializeSender(){var v=this;return(0,a.Z)(function*(){var D,M;if(v.activeServiceWorker=yield function _p(){return vp.apply(this,arguments)}(),!v.activeServiceWorker)return;v.sender=new Ly(v.activeServiceWorker);const O=yield v.sender._send("ping",{},800);O&&null!==(D=O[0])&&void 0!==D&&D.fulfilled&&null!==(M=O[0])&&void 0!==M&&M.value.includes("keyChanged")&&(v.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(v){var D=this;return(0,a.Z)(function*(){if(D.sender&&D.activeServiceWorker&&function Uu(){var b;return(null===(b=navigator?.serviceWorker)||void 0===b?void 0:b.controller)||null}()===D.activeServiceWorker)try{yield D.sender._send("keyChanged",{key:v},D.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,a.Z)(function*(){try{if(!indexedDB)return!1;const v=yield Ah();return yield He(v,Cr,"1"),yield gr(v,Cr),!0}catch{}return!1})()}_withPendingWrite(v){var D=this;return(0,a.Z)(function*(){D.pendingWrites++;try{yield v()}finally{D.pendingWrites--}})()}_set(v,D){var M=this;return(0,a.Z)(function*(){return M._withPendingWrite((0,a.Z)(function*(){return yield M._withRetries(O=>He(O,v,D)),M.localCache[v]=D,M.notifyServiceWorker(v)}))})()}_get(v){var D=this;return(0,a.Z)(function*(){const M=yield D._withRetries(O=>function Js(b,g){return $u.apply(this,arguments)}(O,v));return D.localCache[v]=M,M})()}_remove(v){var D=this;return(0,a.Z)(function*(){return D._withPendingWrite((0,a.Z)(function*(){return yield D._withRetries(M=>gr(M,v)),delete D.localCache[v],D.notifyServiceWorker(v)}))})()}_poll(){var v=this;return(0,a.Z)(function*(){const D=yield v._withRetries(Y=>{const ue=Gu(Y,!1).getAll();return new ju(ue).toPromise()});if(!D)return[];if(0!==v.pendingWrites)return[];const M=[],O=new Set;for(const{fbase_key:Y,value:ue}of D)O.add(Y),JSON.stringify(v.localCache[Y])!==JSON.stringify(ue)&&(v.notifyListeners(Y,ue),M.push(Y));for(const Y of Object.keys(v.localCache))v.localCache[Y]&&!O.has(Y)&&(v.notifyListeners(Y,null),M.push(Y));return M})()}notifyListeners(v,D){this.localCache[v]=D;const M=this.listeners[v];if(M)for(const O of Array.from(M))O(D)}startPolling(){var v=this;this.stopPolling(),this.pollTimer=setInterval((0,a.Z)(function*(){return v._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(v,D){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[v]||(this.listeners[v]=new Set,this._get(v)),this.listeners[v].add(D)}_removeListener(v,D){this.listeners[v]&&(this.listeners[v].delete(D),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})(),Ss=1e12;class wp{constructor(g){this.auth=g,this.counter=Ss,this._widgets=new Map}render(g,v){const D=this.counter;return this._widgets.set(D,new Qa(g,this.auth.name,v||{})),this.counter++,D}reset(g){var v;const D=g||Ss;null===(v=this._widgets.get(D))||void 0===v||v.delete(),this._widgets.delete(D)}getResponse(g){var v;return(null===(v=this._widgets.get(g||Ss))||void 0===v?void 0:v.getResponse())||""}execute(g){var v=this;return(0,a.Z)(function*(){var D;return null===(D=v._widgets.get(g||Ss))||void 0===D||D.execute(),""})()}}class Qa{constructor(g,v,D){this.params=D,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof g?document.getElementById(g):g;X(M,"argument-error",{appName:v}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Io(b){const g=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let D=0;D<b;D++)g.push(v.charAt(Math.floor(62*Math.random())));return g.join("")}(50);const{callback:g,"expired-callback":v}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,v)try{v()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const xh=Oa("rcb"),Rh=new ar(3e4,6e4);class Uy{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=ri().grecaptcha)||void 0===g||!g.render)}load(g,v=""){return X(function qu(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}(v),g,"argument-error"),this.shouldResolveImmediately(v)&&la(ri().grecaptcha)?Promise.resolve(ri().grecaptcha):new Promise((D,M)=>{const O=ri().setTimeout(()=>{M(fe(g,"network-request-failed"))},Rh.get());ri()[xh]=()=>{ri().clearTimeout(O),delete ri()[xh];const ue=ri().grecaptcha;if(!ue||!la(ue))return void M(fe(g,"internal-error"));const Ye=ue.render;ue.render=(Xe,Et)=>{const It=Ye(Xe,Et);return this.counter++,It},this.hostLanguage=v,D(ue)},Bs(`https://www.google.com/recaptcha/api.js??${(0,V.xO)({onload:xh,render:"explicit",hl:v})}`).catch(()=>{clearTimeout(O),M(fe(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var v;return!(null===(v=ri().grecaptcha)||void 0===v||!v.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class bp{load(g){return(0,a.Z)(function*(){return new wp(g)})()}clearedOneInstance(){}}const Yu="recaptcha",Dp={theme:"light",type:"image"};class Ep{constructor(g,v=Object.assign({},Dp),D){this.parameters=v,this.type=Yu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Gi(D),this.isInvisible="invisible"===this.parameters.size,X(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof g?document.getElementById(g):g;X(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new bp:new Uy,this.validateStartingState()}verify(){var g=this;return(0,a.Z)(function*(){g.assertNotDestroyed();const v=yield g.render(),D=g.getAssertedRecaptcha();return D.getResponse(v)||new Promise(O=>{const Y=ue=>{ue&&(g.tokenChangeListeners.delete(Y),O(ue))};g.tokenChangeListeners.add(Y),g.isInvisible&&D.execute(v)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){X(!this.parameters.sitekey,this.auth,"argument-error"),X(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),X(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return v=>{if(this.tokenChangeListeners.forEach(D=>D(v)),"function"==typeof g)g(v);else if("string"==typeof g){const D=ri()[g];"function"==typeof D&&D(v)}}}assertNotDestroyed(){X(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,a.Z)(function*(){if(yield g.init(),!g.widgetId){let v=g.container;if(!g.isInvisible){const D=document.createElement("div");v.appendChild(D),v=D}g.widgetId=g.getAssertedRecaptcha().render(v,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,a.Z)(function*(){X(Kn()&&!qt(),g.auth,"internal-error"),yield function zm(){let b=null;return new Promise(g=>{"complete"!==document.readyState?(b=()=>g(),window.addEventListener("load",b)):g()}).catch(g=>{throw b&&window.removeEventListener("load",b),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const v=yield function aa(b){return Zs.apply(this,arguments)}(g.auth);X(v,g.auth,"internal-error"),g.parameters.sitekey=v})()}getAssertedRecaptcha(){return X(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class si{constructor(g,v){this.verificationId=g,this.onConfirmation=v}confirm(g){const v=Dr._fromVerification(this.verificationId,g);return this.onConfirmation(v)}}function At(){return(At=(0,a.Z)(function*(b,g,v){const D=Gi(b),M=yield qn(D,g,(0,V.m9)(v));return new si(M,O=>ph(D,O))})).apply(this,arguments)}function Rn(){return(Rn=(0,a.Z)(function*(b,g,v){const D=(0,V.m9)(b);yield xl(!1,D,"phone");const M=yield qn(D.auth,g,(0,V.m9)(v));return new si(M,O=>xy(D,O))})).apply(this,arguments)}function Ja(){return(Ja=(0,a.Z)(function*(b,g,v){const D=(0,V.m9)(b),M=yield qn(D.auth,g,(0,V.m9)(v));return new si(M,O=>Ry(D,O))})).apply(this,arguments)}function qn(b,g,v){return rt.apply(this,arguments)}function rt(){return rt=(0,a.Z)(function*(b,g,v){var D;const M=yield v.verify();try{let O;if(X("string"==typeof M,b,"argument-error"),X(v.type===Yu,b,"argument-error"),O="string"==typeof g?{phoneNumber:g}:g,"session"in O){const Y=O.session;if("phoneNumber"in O)return X("enroll"===Y.type,b,"internal-error"),(yield function Nc(b,g){return Ve(b,"POST","/v2/accounts/mfaEnrollment:start",Fe(b,g))}(b,{idToken:Y.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{X("signin"===Y.type,b,"internal-error");const ue=(null===(D=O.multiFactorHint)||void 0===D?void 0:D.uid)||O.multiFactorUid;return X(ue,b,"missing-multi-factor-info"),(yield function Mh(b,g){return Ve(b,"POST","/v2/accounts/mfaSignIn:start",Fe(b,g))}(b,{mfaPendingCredential:Y.credential,mfaEnrollmentId:ue,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Y}=yield function pi(b,g){return Yr.apply(this,arguments)}(b,{phoneNumber:O.phoneNumber,recaptchaToken:M});return Y}}finally{v._reset()}}),rt.apply(this,arguments)}function Xn(){return(Xn=(0,a.Z)(function*(b,g){yield cs((0,V.m9)(b),g)})).apply(this,arguments)}let Ar=(()=>{class b{constructor(v){this.providerId=b.PROVIDER_ID,this.auth=Gi(v)}verifyPhoneNumber(v,D){return qn(this.auth,v,(0,V.m9)(D))}static credential(v,D){return Dr._fromVerification(v,D)}static credentialFromResult(v){return b.credentialFromTaggedObject(v)}static credentialFromError(v){return b.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{phoneNumber:D,temporaryProof:M}=v;return D&&M?Dr._fromTokenResponse(D,M):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function ma(b,g){return g?dt(g):(X(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class Gs extends Fa{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Hs(g,this._buildIdpRequest())}_linkToIdToken(g,v){return Hs(g,this._buildIdpRequest(v))}_getReauthenticationResolver(g){return Hs(g,this._buildIdpRequest())}_buildIdpRequest(g){const v={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(v.idToken=g),v}}function xc(b){return fh(b.auth,new Gs(b),b.bypassAuthState)}function $i(b){const{auth:g,user:v}=b;return X(v,g,"internal-error"),Ny(v,new Gs(b),b.bypassAuthState)}function _i(b){return dn.apply(this,arguments)}function dn(){return(dn=(0,a.Z)(function*(b){const{auth:g,user:v}=b;return X(v,g,"internal-error"),cs(v,new Gs(b),b.bypassAuthState)})).apply(this,arguments)}class tr{constructor(g,v,D,M,O=!1){this.auth=g,this.resolver=D,this.user=M,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(v)?v:[v]}execute(){var g=this;return new Promise(function(){var v=(0,a.Z)(function*(D,M){g.pendingPromise={resolve:D,reject:M};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(O){g.reject(O)}});return function(D,M){return v.apply(this,arguments)}}())}onAuthEvent(g){var v=this;return(0,a.Z)(function*(){const{urlResponse:D,sessionId:M,postBody:O,tenantId:Y,error:ue,type:Ye}=g;if(ue)return void v.reject(ue);const Xe={auth:v.auth,requestUri:D,sessionId:M,tenantId:Y||void 0,postBody:O||void 0,user:v.user,bypassAuthState:v.bypassAuthState};try{v.resolve(yield v.getIdpTask(Ye)(Xe))}catch(Et){v.reject(Et)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return xc;case"linkViaPopup":case"linkViaRedirect":return _i;case"reauthViaPopup":case"reauthViaRedirect":return $i;default:Re(this.auth,"internal-error")}}resolve(g){kt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){kt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const jn=new ar(2e3,1e4);function Bl(){return(Bl=(0,a.Z)(function*(b,g,v){const D=Gi(b);We(b,g,cr);const M=ma(D,v);return new Rc(D,"signInViaPopup",g,M).executeNotNull()})).apply(this,arguments)}function qo(){return(qo=(0,a.Z)(function*(b,g,v){const D=(0,V.m9)(b);We(D.auth,g,cr);const M=ma(D.auth,v);return new Rc(D.auth,"reauthViaPopup",g,M,D).executeNotNull()})).apply(this,arguments)}function Zr(){return(Zr=(0,a.Z)(function*(b,g,v){const D=(0,V.m9)(b);We(D.auth,g,cr);const M=ma(D.auth,v);return new Rc(D.auth,"linkViaPopup",g,M,D).executeNotNull()})).apply(this,arguments)}let Rc=(()=>{class b extends tr{constructor(v,D,M,O,Y){super(v,D,O,Y),this.provider=M,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var v=this;return(0,a.Z)(function*(){const D=yield v.execute();return X(D,v.auth,"internal-error"),D})()}onExecution(){var v=this;return(0,a.Z)(function*(){kt(1===v.filter.length,"Popup operations only handle one event");const D=Vu();v.authWindow=yield v.resolver._openPopup(v.auth,v.provider,v.filter[0],D),v.authWindow.associatedEvent=D,v.resolver._originValidation(v.auth).catch(M=>{v.reject(M)}),v.resolver._isIframeWebStorageSupported(v.auth,M=>{M||v.reject(fe(v.auth,"web-storage-unsupported"))}),v.pollUserCancellation()})()}get eventId(){var v;return(null===(v=this.authWindow)||void 0===v?void 0:v.associatedEvent)||null}cancel(){this.reject(fe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const v=()=>{var D,M;this.pollId=null!==(M=null===(D=this.authWindow)||void 0===D?void 0:D.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(fe(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(v,jn.get())};v()}}return b.currentPopupAction=null,b})();const So="pendingRedirect",hn=new Map;class Wm extends tr{constructor(g,v,D=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],v,void 0,D),this.eventId=null}execute(){var g=()=>super.execute,v=this;return(0,a.Z)(function*(){let D=hn.get(v.auth._key());if(!D){try{const O=(yield function Oc(b,g){return Ku.apply(this,arguments)}(v.resolver,v.auth))?yield g().call(v):null;D=()=>Promise.resolve(O)}catch(M){D=()=>Promise.reject(M)}hn.set(v.auth._key(),D)}return v.bypassAuthState||hn.set(v.auth._key(),()=>Promise.resolve(null)),D()})()}onAuthEvent(g){var v=()=>super.onAuthEvent,D=this;return(0,a.Z)(function*(){if("signInViaRedirect"===g.type)return v().call(D,g);if("unknown"!==g.type){if(g.eventId){const M=yield D.auth._redirectUserForId(g.eventId);if(M)return D.user=M,v().call(D,g);D.resolve(null)}}else D.resolve(null)})()}onExecution(){return(0,a.Z)(function*(){})()}cleanUp(){}}function Ku(){return(Ku=(0,a.Z)(function*(b,g){const v=kc(g),D=CD(b);if(!(yield D._isAvailable()))return!1;const M="true"===(yield D._get(v));return yield D._remove(v),M})).apply(this,arguments)}function Hy(b,g){return Cp.apply(this,arguments)}function Cp(){return(Cp=(0,a.Z)(function*(b,g){return CD(b)._set(kc(g),"true")})).apply(this,arguments)}function qm(b,g){hn.set(b._key(),g)}function CD(b){return dt(b._redirectPersistence)}function kc(b){return q(So,b.config.apiKey,b.name)}function Vl(b,g,v){return function jy(b,g,v){return Ul.apply(this,arguments)}(b,g,v)}function Ul(){return(Ul=(0,a.Z)(function*(b,g,v){const D=Gi(b);We(b,g,cr),yield D._initializationPromise;const M=ma(D,v);return yield Hy(M,D),M._openRedirect(D,g,"signInViaRedirect")})).apply(this,arguments)}function Ip(b,g,v){return function Oh(b,g,v){return Ym.apply(this,arguments)}(b,g,v)}function Ym(){return(Ym=(0,a.Z)(function*(b,g,v){const D=(0,V.m9)(b);We(D.auth,g,cr),yield D.auth._initializationPromise;const M=ma(D.auth,v);yield Hy(M,D.auth);const O=yield Hr(D);return M._openRedirect(D.auth,g,"reauthViaRedirect",O)})).apply(this,arguments)}function Zm(b,g,v){return function Gy(b,g,v){return Sp.apply(this,arguments)}(b,g,v)}function Sp(){return(Sp=(0,a.Z)(function*(b,g,v){const D=(0,V.m9)(b);We(D.auth,g,cr),yield D.auth._initializationPromise;const M=ma(D.auth,v);yield xl(!1,D,g.providerId),yield Hy(M,D.auth);const O=yield Hr(D);return M._openRedirect(D.auth,g,"linkViaRedirect",O)})).apply(this,arguments)}function oi(){return(oi=(0,a.Z)(function*(b,g){return yield Gi(b)._initializationPromise,mr(b,g,!1)})).apply(this,arguments)}function mr(b,g){return B.apply(this,arguments)}function B(){return(B=(0,a.Z)(function*(b,g,v=!1){const D=Gi(b),M=ma(D,g),Y=yield new Wm(D,M,v).execute();return Y&&!v&&(delete Y.user._redirectEventId,yield D._persistUserIfCurrent(Y.user),yield D._setRedirectUser(null,g)),Y})).apply(this,arguments)}function Hr(b){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,a.Z)(function*(b){const g=Vu(`${b.uid}:::`);return b._redirectEventId=g,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),g})).apply(this,arguments)}class Qu{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let v=!1;return this.consumers.forEach(D=>{this.isEventForConsumer(g,D)&&(v=!0,this.sendToConsumer(g,D),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Xa(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Pc(b);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,v||(this.queuedRedirectEvent=g,v=!0)),v}sendToConsumer(g,v){var D;if(g.error&&!Pc(g)){const M=(null===(D=g.error.code)||void 0===D?void 0:D.split("auth/")[1])||"internal-error";v.onError(fe(this.auth,M))}else v.onAuthEvent(g)}isEventForConsumer(g,v){const D=null===v.eventId||!!g.eventId&&g.eventId===v.eventId;return v.filter.includes(g.type)&&D}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ei(g))}saveEventToCache(g){this.cachedEventUids.add(ei(g)),this.lastProcessedEventTime=Date.now()}}function ei(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(g=>g).join("-")}function Pc({type:b,error:g}){return"unknown"===b&&"auth/no-auth-event"===g?.code}function Ju(b){return Ap.apply(this,arguments)}function Ap(){return(Ap=(0,a.Z)(function*(b,g={}){return Ve(b,"GET","/v1/projects",g)})).apply(this,arguments)}const kh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,el=/^https?/;function Yo(){return(Yo=(0,a.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:g}=yield Ju(b);for(const v of g)try{if(Ph(v))return}catch{}Re(b,"unauthorized-domain")})).apply(this,arguments)}function Ph(b){const g=Nn(),{protocol:v,hostname:D}=new URL(g);if(b.startsWith("chrome-extension://")){const Y=new URL(b);return""===Y.hostname&&""===D?"chrome-extension:"===v&&b.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===v&&Y.hostname===D}if(!el.test(v))return!1;if(kh.test(b))return D===b;const M=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(D)}const Fc=new ar(3e4,6e4);function Np(){const b=ri().___jsl;if(b?.H)for(const g of Object.keys(b.H))if(b.H[g].r=b.H[g].r||[],b.H[g].L=b.H[g].L||[],b.H[g].r=[...b.H[g].L],b.CP)for(let v=0;v<b.CP.length;v++)b.CP[v]=null}let tl=null;const Lc=new ar(5e3,15e3),Fh="__/auth/iframe",jl="emulator/auth/iframe",Bc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Gl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Vc(b){const g=b.config;X(g.authDomain,b,"auth-domain-config-required");const v=g.emulator?me(g,jl):`https://${b.config.authDomain}/${Fh}`,D={apiKey:g.apiKey,appName:b.name,v:re.SDK_VERSION},M=Gl.get(b.config.apiHost);M&&(D.eid=M);const O=b._getFrameworks();return O.length&&(D.fw=O.join(",")),`${v}?${(0,V.xO)(D).slice(1)}`}function S(){return S=(0,a.Z)(function*(b){const g=yield function Mo(b){return tl=tl||function mn(b){return new Promise((g,v)=>{var D,M,O;function Y(){Np(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Np(),v(fe(b,"network-request-failed"))},timeout:Fc.get()})}if(null!==(M=null===(D=ri().gapi)||void 0===D?void 0:D.iframes)&&void 0!==M&&M.Iframe)g(gapi.iframes.getContext());else{if(null===(O=ri().gapi)||void 0===O||!O.load){const ue=Oa("iframefcb");return ri()[ue]=()=>{gapi.load?Y():v(fe(b,"network-request-failed"))},Bs(`https://apis.google.com/js/api.js?onload=${ue}`).catch(Ye=>v(Ye))}Y()}}).catch(g=>{throw tl=null,g})}(b),tl}(b),v=ri().gapi;return X(v,b,"internal-error"),g.open({where:document.body,url:Vc(b),messageHandlersFilter:v.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Bc,dontclear:!0},D=>new Promise(function(){var M=(0,a.Z)(function*(O,Y){yield D.restyle({setHideOnLeave:!1});const ue=fe(b,"network-request-failed"),Ye=ri().setTimeout(()=>{Y(ue)},Lc.get());function Xe(){ri().clearTimeout(Ye),O(D)}D.ping(Xe).then(Xe,()=>{Y(ue)})});return function(O,Y){return M.apply(this,arguments)}}()))}),S.apply(this,arguments)}const R={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ht{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const en="__/auth/handler",tn="emulator/auth/handler",nr=encodeURIComponent("fac");function zi(b,g,v,D,M,O){return va.apply(this,arguments)}function va(){return(va=(0,a.Z)(function*(b,g,v,D,M,O){X(b.config.authDomain,b,"auth-domain-config-required"),X(b.config.apiKey,b,"invalid-api-key");const Y={apiKey:b.config.apiKey,appName:b.name,authType:v,redirectUrl:D,v:re.SDK_VERSION,eventId:M};if(g instanceof cr){g.setDefaultLanguage(b.languageCode),Y.providerId=g.providerId||"",(0,V.xb)(g.getCustomParameters())||(Y.customParameters=JSON.stringify(g.getCustomParameters()));for(const[Et,It]of Object.entries(O||{}))Y[Et]=It}if(g instanceof jo){const Et=g.getScopes().filter(It=>""!==It);Et.length>0&&(Y.scopes=Et.join(","))}b.tenantId&&(Y.tid=b.tenantId);const ue=Y;for(const Et of Object.keys(ue))void 0===ue[Et]&&delete ue[Et];const Ye=yield b._getAppCheckToken(),Xe=Ye?`#${nr}=${encodeURIComponent(Ye)}`:"";return`${function Ii({config:b}){return b.emulator?me(b,tn):`https://${b.authDomain}/${en}`}(b)}?${(0,V.xO)(ue).slice(1)}${Xe}`})).apply(this,arguments)}const Xs="webStorageSupport",eo=class Kr{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ds,this._completeRedirectFn=mr,this._overrideRedirectResult=qm}_openPopup(g,v,D,M){var O=this;return(0,a.Z)(function*(){var Y;kt(null===(Y=O.eventManagers[g._key()])||void 0===Y?void 0:Y.manager,"_initialize() not called before _openPopup()");const ue=yield zi(g,v,D,Nn(),M);return function ct(b,g,v,D=500,M=600){const O=Math.max((window.screen.availHeight-M)/2,0).toString(),Y=Math.max((window.screen.availWidth-D)/2,0).toString();let ue="";const Ye=Object.assign(Object.assign({},R),{width:D.toString(),height:M.toString(),top:O,left:Y}),Xe=(0,V.z$)().toLowerCase();v&&(ue=wt(Xe)?"_blank":v),Le(Xe)&&(g=g||"http://localhost",Ye.scrollbars="yes");const Et=Object.entries(Ye).reduce((Si,[no,cd])=>`${Si}${no}=${cd},`,"");if(function br(b=(0,V.z$)()){var g;return ji(b)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(Xe)&&"_self"!==ue)return function Ot(b,g){const v=document.createElement("a");v.href=b,v.target=g;const D=document.createEvent("MouseEvent");D.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),v.dispatchEvent(D)}(g||"",ue),new ht(null);const It=window.open(g||"",ue,Et);X(It,b,"popup-blocked");try{It.focus()}catch{}return new ht(It)}(g,ue,Vu())})()}_openRedirect(g,v,D,M){var O=this;return(0,a.Z)(function*(){return yield O._originValidation(g),function By(b){ri().location.href=b}(yield zi(g,v,D,Nn(),M)),new Promise(()=>{})})()}_initialize(g){const v=g._key();if(this.eventManagers[v]){const{manager:M,promise:O}=this.eventManagers[v];return M?Promise.resolve(M):(kt(O,"If manager is not set, promise should be"),O)}const D=this.initAndGetManager(g);return this.eventManagers[v]={promise:D},D.catch(()=>{delete this.eventManagers[v]}),D}initAndGetManager(g){var v=this;return(0,a.Z)(function*(){const D=yield function T(b){return S.apply(this,arguments)}(g),M=new Qu(g);return D.register("authEvent",O=>(X(O?.authEvent,g,"invalid-auth-event"),{status:M.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),v.eventManagers[g._key()]={manager:M},v.iframes[g._key()]=D,M})()}_isIframeWebStorageSupported(g,v){this.iframes[g._key()].send(Xs,{type:Xs},M=>{var O;const Y=null===(O=M?.[0])||void 0===O?void 0:O[Xs];void 0!==Y&&v(!!Y),Re(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const v=g._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function Mp(b){return Yo.apply(this,arguments)}(g)),this.originValidationPromises[v]}get _shouldInitProactively(){return Cl()||ye()||ji()}};class Qr{constructor(g){this.factorId=g}_process(g,v,D){switch(v.type){case"enroll":return this._finalizeEnroll(g,v.credential,D);case"signin":return this._finalizeSignIn(g,v.credential);default:return Je("unexpected MultiFactorSessionType")}}}class $l extends Qr{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new $l(g)}_finalizeEnroll(g,v,D){return function Vm(b,g){return Ve(b,"POST","/v2/accounts/mfaEnrollment:finalize",Fe(b,g))}(g,{idToken:v,displayName:D,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,v){return function $m(b,g){return Ve(b,"POST","/v2/accounts/mfaSignIn:finalize",Fe(b,g))}(g,{mfaPendingCredential:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let xp=(()=>{class b{constructor(){}static assertion(v){return $l._fromCredential(v)}}return b.FACTOR_ID="phone",b})();var $y="@firebase/auth";class fs{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var v=this;return(0,a.Z)(function*(){return v.assertAuthConfigured(),yield v.auth._initializationPromise,v.auth.currentUser?{accessToken:yield v.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const v=this.auth.onIdTokenChanged(D=>{g(D?.stsTokenManager.accessToken||null)});this.internalListeners.set(g,v),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const v=this.internalListeners.get(g);v&&(this.internalListeners.delete(g),v(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function zl(){return window}(0,V.Pz)("authIdTokenMaxAge"),function Uc(b){(0,re._registerComponent)(new Ae.wA("auth",(g,{options:v})=>{const D=g.getProvider("app").getImmediate(),M=g.getProvider("heartbeat"),O=g.getProvider("app-check-internal"),{apiKey:Y,authDomain:ue}=D.options;X(Y&&!Y.includes(":"),"invalid-api-key",{appName:D.name});const Ye={apiKey:Y,authDomain:ue,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bo(b)},Xe=new lh(D,M,O,Ye);return function Mm(b,g){const v=g?.persistence||[],D=(Array.isArray(v)?v:[v]).map(dt);g?.errorMap&&b._updateErrorMap(g.errorMap),b._initializeWithPersistence(D,g?.popupRedirectResolver)}(Xe,v),Xe},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,v,D)=>{g.getProvider("auth-internal").initialize()})),(0,re._registerComponent)(new Ae.wA("auth-internal",g=>{const v=Gi(g.getProvider("auth").getImmediate());return new fs(v)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,re.registerVersion)($y,"0.23.2",function Bh(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(b)),(0,re.registerVersion)($y,"0.23.2","esm2017")}("Browser");function Vh(){return Vh=(0,a.Z)(function*(b,g,v){var D;const{BuildInfo:M}=zl();kt(g.sessionId,"AuthEvent did not contain a session ID");const O=yield function Yy(b){return Uh.apply(this,arguments)}(g.sessionId),Y={};return ji()?Y.ibi=M.packageName:Kt()?Y.apn=M.packageName:Re(b,"operation-not-supported-in-this-environment"),M.displayName&&(Y.appDisplayName=M.displayName),Y.sessionId=O,zi(b,v,g.type,void 0,null!==(D=g.eventId)&&void 0!==D?D:void 0,Y)}),Vh.apply(this,arguments)}function Qm(){return(Qm=(0,a.Z)(function*(b){const{BuildInfo:g}=zl(),v={};ji()?v.iosBundleId=g.packageName:Kt()?v.androidPackageName=g.packageName:Re(b,"operation-not-supported-in-this-environment"),yield Ju(b,v)})).apply(this,arguments)}function ed(){return(ed=(0,a.Z)(function*(b,g,v){const{cordova:D}=zl();let M=()=>{};try{yield new Promise((O,Y)=>{let ue=null;function Ye(){var It;O();const Si=null===(It=D.plugins.browsertab)||void 0===It?void 0:It.close;"function"==typeof Si&&Si(),"function"==typeof v?.close&&v.close()}function Xe(){ue||(ue=window.setTimeout(()=>{Y(fe(b,"redirect-cancelled-by-user"))},2e3))}function Et(){"visible"===document?.visibilityState&&Xe()}g.addPassiveListener(Ye),document.addEventListener("resume",Xe,!1),Kt()&&document.addEventListener("visibilitychange",Et,!1),M=()=>{g.removePassiveListener(Ye),document.removeEventListener("resume",Xe,!1),document.removeEventListener("visibilitychange",Et,!1),ue&&window.clearTimeout(ue)}})}finally{M()}})).apply(this,arguments)}function Uh(){return(Uh=(0,a.Z)(function*(b){const g=function Hc(b){if(kt(/[0-9a-zA-Z]+/.test(b),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(b);const g=new ArrayBuffer(b.length),v=new Uint8Array(g);for(let D=0;D<b.length;D++)v[D]=b.charCodeAt(D);return v}(b),v=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(v)).map(M=>M.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Zy extends Qu{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(v=>v(g)),super.onEvent(g)}initialized(){var g=this;return(0,a.Z)(function*(){yield g.initPromise})()}}function nd(b){return e_.apply(this,arguments)}function e_(){return(e_=(0,a.Z)(function*(b){const g=yield Lp()._get(n_(b));return g&&(yield Lp()._remove(n_(b))),g})).apply(this,arguments)}function t_(){const b=[];for(let v=0;v<20;v++){const D=Math.floor(62*Math.random());b.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(D))}return b.join("")}function Lp(){return dt(Fl)}function n_(b){return q("authEvent",b.config.apiKey,b.name)}function Bp(b){if(!b?.includes("?"))return{};const[g,...v]=b.split("?");return(0,V.zd)(v.join("?"))}const r_=class MD{constructor(){this._redirectPersistence=ds,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=mr,this._overrideRedirectResult=qm}_initialize(g){var v=this;return(0,a.Z)(function*(){const D=g._key();let M=v.eventManagers.get(D);return M||(M=new Zy(g),v.eventManagers.set(D,M),v.attachCallbackListeners(g,M)),M})()}_openPopup(g){Re(g,"operation-not-supported-in-this-environment")}_openRedirect(g,v,D,M){var O=this;return(0,a.Z)(function*(){!function SD(b){var g,v,D,M,O,Y,ue,Ye,Xe,Et;const It=zl();X("function"==typeof(null===(g=It?.universalLinks)||void 0===g?void 0:g.subscribe),b,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),X(typeof(null===(v=It?.BuildInfo)||void 0===v?void 0:v.packageName)<"u",b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),X("function"==typeof(null===(O=null===(M=null===(D=It?.cordova)||void 0===D?void 0:D.plugins)||void 0===M?void 0:M.browsertab)||void 0===O?void 0:O.openUrl),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),X("function"==typeof(null===(Ye=null===(ue=null===(Y=It?.cordova)||void 0===Y?void 0:Y.plugins)||void 0===ue?void 0:ue.browsertab)||void 0===Ye?void 0:Ye.isAvailable),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),X("function"==typeof(null===(Et=null===(Xe=It?.cordova)||void 0===Xe?void 0:Xe.InAppBrowser)||void 0===Et?void 0:Et.open),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const Y=yield O._initialize(g);yield Y.initialized(),Y.resetRedirect(),function Tp(){hn.clear()}(),yield O._originValidation(g);const ue=function Xm(b,g,v=null){return{type:g,eventId:v,urlResponse:null,sessionId:t_(),postBody:null,tenantId:b.tenantId,error:fe(b,"no-auth-event")}}(g,D,M);yield function td(b,g){return Lp()._set(n_(b),g)}(g,ue);const Ye=yield function qy(b,g,v){return Vh.apply(this,arguments)}(g,ue,v),Xe=yield function Fp(b){const{cordova:g}=zl();return new Promise(v=>{g.plugins.browsertab.isAvailable(D=>{let M=null;D?g.plugins.browsertab.openUrl(b):M=g.InAppBrowser.open(b,function In(b=(0,V.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}()?"_blank":"_system","location=yes"),v(M)})})}(Ye);return function ID(b,g,v){return ed.apply(this,arguments)}(g,Y,Xe)})()}_isIframeWebStorageSupported(g,v){throw new Error("Method not implemented.")}_originValidation(g){const v=g._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function Pp(b){return Qm.apply(this,arguments)}(g)),this.originValidationPromises[v]}attachCallbackListeners(g,v){const{universalLinks:D,handleOpenURL:M,BuildInfo:O}=zl(),Y=setTimeout((0,a.Z)(function*(){yield nd(g),v.onEvent(Qy())}),500),ue=function(){var Et=(0,a.Z)(function*(It){clearTimeout(Y);const Si=yield nd(g);let no=null;Si&&It?.url&&(no=function AD(b,g){var v,D;const M=function c1(b){const g=Bp(b),v=g.link?decodeURIComponent(g.link):void 0,D=Bp(v).link,M=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return Bp(M).link||M||D||v||b}(g);if(M.includes("/__/auth/callback")){const O=Bp(M),Y=O.firebaseError?function Ky(b){try{return JSON.parse(b)}catch{return null}}(decodeURIComponent(O.firebaseError)):null,ue=null===(D=null===(v=Y?.code)||void 0===v?void 0:v.split("auth/"))||void 0===D?void 0:D[1],Ye=ue?fe(ue):null;return Ye?{type:b.type,eventId:b.eventId,tenantId:b.tenantId,error:Ye,urlResponse:null,sessionId:null,postBody:null}:{type:b.type,eventId:b.eventId,tenantId:b.tenantId,sessionId:b.sessionId,urlResponse:M,postBody:null}}return null}(Si,It.url)),v.onEvent(no||Qy())});return function(Si){return Et.apply(this,arguments)}}();typeof D<"u"&&"function"==typeof D.subscribe&&D.subscribe(null,ue);const Ye=M,Xe=`${O.packageName.toLowerCase()}://`;zl().handleOpenURL=function(){var Et=(0,a.Z)(function*(It){if(It.toLowerCase().startsWith(Xe)&&ue({url:It}),"function"==typeof Ye)try{Ye(It)}catch(Si){console.error(Si)}});return function(It){return Et.apply(this,arguments)}}()}};function Qy(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:fe("no-auth-event")}}function id(){var b;return(null===(b=self?.location)||void 0===b?void 0:b.protocol)||null}function jh(b=(0,V.z$)()){return!("file:"!==id()&&"ionic:"!==id()&&"capacitor:"!==id()||!b.toLowerCase().match(/iphone|ipad|ipod|android/))}function d1(){try{const b=self.localStorage,g=Vu();if(b)return b.setItem(g,"1"),b.removeItem(g),!function u1(b=(0,V.z$)()){return function Gh(){return(0,V.w1)()&&11===document?.documentMode}()||function qO(b=(0,V.z$)()){return/Edge\/\d+/.test(b)}(b)}()||(0,V.hl)()}catch{return Xy()&&(0,V.hl)()}return!1}function Xy(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function e0(){return(function Hh(){return"http:"===id()||"https:"===id()}()||(0,V.ru)()||jh())&&!function WO(){return(0,V.b$)()||(0,V.UG)()}()&&d1()&&!Xy()}function RD(){return jh()&&typeof document<"u"}function rd(){return(rd=(0,a.Z)(function*(){return!!RD()&&new Promise(b=>{const g=setTimeout(()=>{b(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),b(!0)})})})).apply(this,arguments)}const to={LOCAL:"local",NONE:"none",SESSION:"session"},$h=X,sd="persistence";function jc(b){return od.apply(this,arguments)}function od(){return(od=(0,a.Z)(function*(b){yield b._initializationPromise;const g=Gc(),v=q(sd,b.config.apiKey,b.name);g&&g.setItem(v,b._getPersistence())})).apply(this,arguments)}function Gc(){var b;try{return(null===(b=function OD(){return typeof window<"u"?window:null}())||void 0===b?void 0:b.sessionStorage)||null}catch{return null}}const o_=X;class ya{constructor(){this.browserResolver=dt(eo),this.cordovaResolver=dt(r_),this.underlyingResolver=null,this._redirectPersistence=ds,this._completeRedirectFn=mr,this._overrideRedirectResult=qm}_initialize(g){var v=this;return(0,a.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,v,D,M){var O=this;return(0,a.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openPopup(g,v,D,M)})()}_openRedirect(g,v,D,M){var O=this;return(0,a.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openRedirect(g,v,D,M)})()}_isIframeWebStorageSupported(g,v){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,v)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return RD()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return o_(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,a.Z)(function*(){if(g.underlyingResolver)return;const v=yield function s_(){return rd.apply(this,arguments)}();g.underlyingResolver=v?g.cordovaResolver:g.browserResolver})()}}function Vp(b){return b.unwrap()}function zh(b){return t0(b)}function t0(b){const{_tokenResponse:g}=b instanceof V.ZR?b.customData:b;if(!g)return null;if(!(b instanceof V.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return Ar.credentialFromResult(b);const v=g.providerId;if(!v||v===we.PASSWORD)return null;let D;switch(v){case we.GOOGLE:D=Ts;break;case we.FACEBOOK:D=ua;break;case we.GITHUB:D=wc;break;case we.TWITTER:D=Ru;break;default:const{oauthIdToken:M,oauthAccessToken:O,oauthTokenSecret:Y,pendingToken:ue,nonce:Ye}=g;return O||Y||M||ue?ue?v.startsWith("saml.")?ln._create(v,ue):zt._fromParams({providerId:v,signInMethod:v,pendingToken:ue,idToken:M,accessToken:O}):new Go(v).credential({idToken:M,accessToken:O,rawNonce:Ye}):null}return b instanceof V.ZR?D.credentialFromError(b):D.credentialFromResult(b)}function Mr(b,g){return g.catch(v=>{throw v instanceof V.ZR&&function ld(b,g){var v;const D=null===(v=g.customData)||void 0===v?void 0:v._tokenResponse;if("auth/multi-factor-auth-required"===g?.code)g.resolver=new PD(b,function pp(b,g){var v;const D=(0,V.m9)(b),M=g;return X(g.customData.operationType,D,"argument-error"),X(null===(v=M.customData._serverResponse)||void 0===v?void 0:v.mfaPendingCredential,D,"argument-error"),qa._fromError(D,M)}(b,g));else if(D){const M=t0(g),O=g;M&&(O.credential=M,O.tenantId=D.tenantId||void 0,O.email=D.email||void 0,O.phoneNumber=D.phoneNumber||void 0)}}(b,v),v}).then(v=>{const M=v.user;return{operationType:v.operationType,credential:zh(v),additionalUserInfo:Pm(v),user:xi.getOrCreate(M)}})}function Hp(b,g){return a_.apply(this,arguments)}function a_(){return(a_=(0,a.Z)(function*(b,g){const v=yield g;return{verificationId:v.verificationId,confirm:D=>Mr(b,v.confirm(D))}})).apply(this,arguments)}class PD{constructor(g,v){this.resolver=v,this.auth=function Up(b){return b.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return Mr(Vp(this.auth),this.resolver.resolveSignIn(g))}}class xi{constructor(g){this._delegate=g,this.multiFactor=function Ya(b){const g=(0,V.m9)(b);return pa.has(g)||pa.set(g,Hn._fromUser(g)),pa.get(g)}(g)}static getOrCreate(g){return xi.USER_MAP.has(g)||xi.USER_MAP.set(g,new xi(g)),xi.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var v=this;return(0,a.Z)(function*(){return Mr(v.auth,xy(v._delegate,g))})()}linkWithPhoneNumber(g,v){var D=this;return(0,a.Z)(function*(){return Hp(D.auth,function bi(b,g,v){return Rn.apply(this,arguments)}(D._delegate,g,v))})()}linkWithPopup(g){var v=this;return(0,a.Z)(function*(){return Mr(v.auth,function _a(b,g,v){return Zr.apply(this,arguments)}(v._delegate,g,ya))})()}linkWithRedirect(g){var v=this;return(0,a.Z)(function*(){return yield jc(Gi(v.auth)),Zm(v._delegate,g,ya)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var v=this;return(0,a.Z)(function*(){return Mr(v.auth,Ry(v._delegate,g))})()}reauthenticateWithPhoneNumber(g,v){return Hp(this.auth,function Sr(b,g,v){return Ja.apply(this,arguments)}(this._delegate,g,v))}reauthenticateWithPopup(g){return Mr(this.auth,function Zu(b,g,v){return qo.apply(this,arguments)}(this._delegate,g,ya))}reauthenticateWithRedirect(g){var v=this;return(0,a.Z)(function*(){return yield jc(Gi(v.auth)),Ip(v._delegate,g,ya)})()}sendEmailVerification(g){return function fa(b,g){return Ic.apply(this,arguments)}(this._delegate,g)}unlink(g){var v=this;return(0,a.Z)(function*(){return yield function Ha(b,g){return Is.apply(this,arguments)}(v._delegate,g),v})()}updateEmail(g){return function hp(b,g){return km((0,V.m9)(b),g,null)}(this._delegate,g)}updatePassword(g){return function Fu(b,g){return km((0,V.m9)(b),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function zo(b,g){return Xn.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function ky(b,g){return bh.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,v){return function up(b,g,v){return Pu.apply(this,arguments)}(this._delegate,g,v)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}xi.USER_MAP=new WeakMap;const $c=X;let jp=(()=>{class b{constructor(v,D){if(this.app=v,D.isInitialized())return this._delegate=D.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:M}=v.options;$c(M,"invalid-api-key",{appName:v.name}),$c(M,"invalid-api-key",{appName:v.name});const O=typeof window<"u"?ya:void 0;this._delegate=D.initialize({options:{persistence:Jr(M,v.name),popupRedirectResolver:O}}),this._delegate._updateErrorMap(at),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?xi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(v){this._delegate.languageCode=v}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(v){this._delegate.tenantId=v}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(v,D){!function ls(b,g,v){const D=Gi(b);X(D._canInitEmulator,D,"emulator-config-failed"),X(/^https?:\/\//.test(g),D,"invalid-emulator-scheme");const M=!!v?.disableWarnings,O=Pa(g),{host:Y,port:ue}=function Su(b){const g=Pa(b),v=/(\/\/)?([^?#/]+)/.exec(b.substr(g.length));if(!v)return{host:"",port:null};const D=v[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(D);if(M){const O=M[1];return{host:O,port:Xf(D.substr(O.length+1))}}{const[O,Y]=D.split(":");return{host:O,port:Xf(Y)}}}(g);D.config.emulator={url:`${O}//${Y}${null===ue?"":`:${ue}`}/`},D.settings.appVerificationDisabledForTesting=!0,D.emulatorConfig=Object.freeze({host:Y,port:ue,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function Ay(){function b(){const g=document.createElement("p"),v=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",v.position="fixed",v.width="100%",v.backgroundColor="#ffffff",v.border=".1em solid #000000",v.color="#b50000",v.bottom="0px",v.left="0px",v.margin="0px",v.zIndex="10000",v.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}(this._delegate,v,D)}applyActionCode(v){return function ap(b,g){return js.apply(this,arguments)}(this._delegate,v)}checkActionCode(v){return er(this._delegate,v)}confirmPasswordReset(v,D){return function ja(b,g,v){return Eo.apply(this,arguments)}(this._delegate,v,D)}createUserWithEmailAndPassword(v,D){var M=this;return(0,a.Z)(function*(){return Mr(M._delegate,function _h(b,g,v){return Ec.apply(this,arguments)}(M._delegate,v,D))})()}fetchProvidersForEmail(v){return this.fetchSignInMethodsForEmail(v)}fetchSignInMethodsForEmail(v){return function Tc(b,g){return za.apply(this,arguments)}(this._delegate,v)}isSignInWithEmailLink(v){return function cp(b,g){const v=gi.parseLink(g);return"EMAIL_SIGNIN"===v?.operation}(0,v)}getRedirectResult(){var v=this;return(0,a.Z)(function*(){$c(e0(),v._delegate,"operation-not-supported-in-this-environment");const D=yield function Ee(b,g){return oi.apply(this,arguments)}(v._delegate,ya);return D?Mr(v._delegate,Promise.resolve(D)):{credential:null,user:null}})()}addFrameworkForLogging(v){!function zO(b,g){Gi(b)._logFramework(g)}(this._delegate,v)}onAuthStateChanged(v,D,M){const{next:O,error:Y,complete:ue}=Gp(v,D,M);return this._delegate.onAuthStateChanged(O,Y,ue)}onIdTokenChanged(v,D,M){const{next:O,error:Y,complete:ue}=Gp(v,D,M);return this._delegate.onIdTokenChanged(O,Y,ue)}sendSignInLinkToEmail(v,D){return function Ol(b,g,v){return Cc.apply(this,arguments)}(this._delegate,v,D)}sendPasswordResetEmail(v,D){return function DD(b,g,v){return Dc.apply(this,arguments)}(this._delegate,v,D||void 0)}setPersistence(v){var D=this;return(0,a.Z)(function*(){let M;switch(function kD(b,g){$h(Object.values(to).includes(g),b,"invalid-persistence-type"),(0,V.b$)()?$h(g!==to.SESSION,b,"unsupported-persistence-type"):(0,V.UG)()?$h(g===to.NONE,b,"unsupported-persistence-type"):Xy()?$h(g===to.NONE||g===to.LOCAL&&(0,V.hl)(),b,"unsupported-persistence-type"):$h(g===to.NONE||d1(),b,"unsupported-persistence-type")}(D._delegate,v),v){case to.SESSION:M=ds;break;case to.LOCAL:M=(yield dt(Ka)._isAvailable())?Ka:Fl;break;case to.NONE:M=xn;break;default:return Re("argument-error",{appName:D._delegate.name})}return D._delegate.setPersistence(M)})()}signInAndRetrieveDataWithCredential(v){return this.signInWithCredential(v)}signInAnonymously(){return Mr(this._delegate,function Er(b){return xm.apply(this,arguments)}(this._delegate))}signInWithCredential(v){return Mr(this._delegate,ph(this._delegate,v))}signInWithCustomToken(v){return Mr(this._delegate,function op(b,g){return $o.apply(this,arguments)}(this._delegate,v))}signInWithEmailAndPassword(v,D){return Mr(this._delegate,function lp(b,g,v){return ph((0,V.m9)(b),Va.credential(g,v))}(this._delegate,v,D))}signInWithEmailLink(v,D){return Mr(this._delegate,function fr(b,g,v){return vh.apply(this,arguments)}(this._delegate,v,D))}signInWithPhoneNumber(v,D){return Hp(this._delegate,function Qt(b,g,v){return At.apply(this,arguments)}(this._delegate,v,D))}signInWithPopup(v){var D=this;return(0,a.Z)(function*(){return $c(e0(),D._delegate,"operation-not-supported-in-this-environment"),Mr(D._delegate,function Wo(b,g,v){return Bl.apply(this,arguments)}(D._delegate,v,ya))})()}signInWithRedirect(v){var D=this;return(0,a.Z)(function*(){return $c(e0(),D._delegate,"operation-not-supported-in-this-environment"),yield jc(D._delegate),Vl(D._delegate,v,ya)})()}updateCurrentUser(v){return this._delegate.updateCurrentUser(v)}verifyPasswordResetCode(v){return function us(b,g){return $a.apply(this,arguments)}(this._delegate,v)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return b.Persistence=to,b})();function Gp(b,g,v){let D=b;"function"!=typeof b&&({next:D,error:g,complete:v}=b);const M=D;return{next:Y=>M(Y&&xi.getOrCreate(Y)),error:g,complete:v}}function Jr(b,g){const v=function ad(b,g){const v=Gc();if(!v)return[];const D=q(sd,b,g);switch(v.getItem(D)){case to.NONE:return[xn];case to.LOCAL:return[Ka,ds];case to.SESSION:return[ds];default:return[]}}(b,g);if(typeof self<"u"&&!v.includes(Ka)&&v.push(Ka),typeof window<"u")for(const D of[Fl,ds])v.includes(D)||v.push(D);return v.includes(xn)||v.push(xn),v}class zc{constructor(){this.providerId="phone",this._delegate=new Ar(Vp(ie.Z.auth()))}static credential(g,v){return Ar.credential(g,v)}verifyPhoneNumber(g,v){return this._delegate.verifyPhoneNumber(g,v)}unwrap(){return this._delegate}}zc.PHONE_SIGN_IN_METHOD=Ar.PHONE_SIGN_IN_METHOD,zc.PROVIDER_ID=Ar.PROVIDER_ID;const n0=X;class r0{constructor(g,v,D=ie.Z.app()){var M;n0(null===(M=D.options)||void 0===M?void 0:M.apiKey,"invalid-api-key",{appName:D.name}),this._delegate=new Ep(g,v,D.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function l_(b){b.INTERNAL.registerComponent(new Ae.wA("auth-compat",g=>{const v=g.getProvider("app-compat").getImmediate(),D=g.getProvider("auth");return new jp(v,D)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Va,FacebookAuthProvider:ua,GithubAuthProvider:wc,GoogleAuthProvider:Ts,OAuthProvider:Go,SAMLAuthProvider:Ml,PhoneAuthProvider:zc,PhoneMultiFactorGenerator:xp,RecaptchaVerifier:r0,TwitterAuthProvider:Ru,Auth:jp,AuthCredential:Fa,Error:V.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),b.registerVersion("@firebase/auth-compat","0.4.2")}(ie.Z)},4303:(Ct,xe,L)=>{L.r(xe),L.d(xe,{FirebaseError:()=>re.ZR,SDK_VERSION:()=>Jn,_DEFAULT_ENTRY_NAME:()=>me,_addComponent:()=>Fe,_addOrOverwriteComponent:()=>Ve,_apps:()=>Ce,_clearComponents:()=>Pt,_components:()=>Se,_getProvider:()=>it,_registerComponent:()=>ut,_removeServiceInstance:()=>di,deleteApp:()=>$r,getApp:()=>Vn,getApps:()=>lr,initializeApp:()=>Ci,onLog:()=>zr,registerVersion:()=>Ai,setLogLevel:()=>_o});var a=L(5861),ie=L(4537),V=L(7879),re=L(9058),he=L(1878);class _e{constructor(Q){this.container=Q}getPlatformInfoString(){return this.container.getProviders().map(Ie=>{if(function Ae(Me){const Q=Me.getComponent();return"VERSION"===Q?.type}(Ie)){const et=Ie.getImmediate();return`${et.library}/${et.version}`}return null}).filter(Ie=>Ie).join(" ")}}const je="@firebase/app",$=new V.Yd("@firebase/app"),me="[DEFAULT]",De={[je]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ce=new Map,Se=new Map;function Fe(Me,Q){try{Me.container.addComponent(Q)}catch(Ie){$.debug(`Component ${Q.name} failed to register with FirebaseApp ${Me.name}`,Ie)}}function Ve(Me,Q){Me.container.addOrOverwriteComponent(Q)}function ut(Me){const Q=Me.name;if(Se.has(Q))return $.debug(`There were multiple attempts to register component ${Q}.`),!1;Se.set(Q,Me);for(const Ie of Ce.values())Fe(Ie,Me);return!0}function it(Me,Q){const Ie=Me.container.getProvider("heartbeat").getImmediate({optional:!0});return Ie&&Ie.triggerHeartbeat(),Me.container.getProvider(Q)}function di(Me,Q,Ie=me){it(Me,Q).clearInstance(Ie)}function Pt(){Se.clear()}const xt=new re.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Qn{constructor(Q,Ie,et){this._isDeleted=!1,this._options=Object.assign({},Q),this._config=Object.assign({},Ie),this._name=Ie.name,this._automaticDataCollectionEnabled=Ie.automaticDataCollectionEnabled,this._container=et,this.container.addComponent(new ie.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Q){this.checkDestroyed(),this._automaticDataCollectionEnabled=Q}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Q){this._isDeleted=Q}checkDestroyed(){if(this.isDeleted)throw xt.create("app-deleted",{appName:this._name})}}const Jn="10.4.0";function Ci(Me,Q={}){let Ie=Me;"object"!=typeof Q&&(Q={name:Q});const et=Object.assign({name:me,automaticDataCollectionEnabled:!1},Q),dt=et.name;if("string"!=typeof dt||!dt)throw xt.create("bad-app-name",{appName:String(dt)});if(Ie||(Ie=(0,re.aH)()),!Ie)throw xt.create("no-options");const Ft=Ce.get(dt);if(Ft){if((0,re.vZ)(Ie,Ft.options)&&(0,re.vZ)(et,Ft.config))return Ft;throw xt.create("duplicate-app",{appName:dt})}const xn=new ie.H0(dt);for(const W of Se.values())xn.addComponent(W);const q=new Qn(Ie,et,xn);return Ce.set(dt,q),q}function Vn(Me=me){const Q=Ce.get(Me);if(!Q&&Me===me&&(0,re.aH)())return Ci();if(!Q)throw xt.create("no-app",{appName:Me});return Q}function lr(){return Array.from(Ce.values())}function $r(Me){return ss.apply(this,arguments)}function ss(){return(ss=(0,a.Z)(function*(Me){const Q=Me.name;Ce.has(Q)&&(Ce.delete(Q),yield Promise.all(Me.container.getProviders().map(Ie=>Ie.delete())),Me.isDeleted=!0)})).apply(this,arguments)}function Ai(Me,Q,Ie){var et;let dt=null!==(et=De[Me])&&void 0!==et?et:Me;Ie&&(dt+=`-${Ie}`);const Ft=dt.match(/\s|\//),xn=Q.match(/\s|\//);if(Ft||xn){const q=[`Unable to register library "${dt}" with version "${Q}":`];return Ft&&q.push(`library name "${dt}" contains illegal characters (whitespace or "/")`),Ft&&xn&&q.push("and"),xn&&q.push(`version name "${Q}" contains illegal characters (whitespace or "/")`),void $.warn(q.join(" "))}ut(new ie.wA(`${dt}-version`,()=>({library:dt,version:Q}),"VERSION"))}function zr(Me,Q){if(null!==Me&&"function"!=typeof Me)throw xt.create("invalid-log-argument");(0,V.Am)(Me,Q)}function _o(Me){(0,V.Ub)(Me)}const Ra="firebase-heartbeat-database",Gt=1,Yt="firebase-heartbeat-store";let Xt=null;function Jt(){return Xt||(Xt=(0,he.X3)(Ra,Gt,{upgrade:(Me,Q)=>{0===Q&&Me.createObjectStore(Yt)}}).catch(Me=>{throw xt.create("idb-open",{originalErrorMessage:Me.message})})),Xt}function Hi(){return(Hi=(0,a.Z)(function*(Me){try{return yield(yield Jt()).transaction(Yt).objectStore(Yt).get(vo(Me))}catch(Q){if(Q instanceof re.ZR)$.warn(Q.message);else{const Ie=xt.create("idb-get",{originalErrorMessage:Q?.message});$.warn(Ie.message)}}})).apply(this,arguments)}function Un(Me,Q){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,a.Z)(function*(Me,Q){try{const et=(yield Jt()).transaction(Yt,"readwrite");yield et.objectStore(Yt).put(Q,vo(Me)),yield et.done}catch(Ie){if(Ie instanceof re.ZR)$.warn(Ie.message);else{const et=xt.create("idb-set",{originalErrorMessage:Ie?.message});$.warn(et.message)}}})).apply(this,arguments)}function vo(Me){return`${Me.name}!${Me.options.appId}`}class Tn{constructor(Q){this.container=Q,this._heartbeatsCache=null;const Ie=this.container.getProvider("app").getImmediate();this._storage=new Vo(Ie),this._heartbeatsCachePromise=this._storage.read().then(et=>(this._heartbeatsCache=et,et))}triggerHeartbeat(){var Q=this;return(0,a.Z)(function*(){const et=Q.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),dt=os();if(null===Q._heartbeatsCache&&(Q._heartbeatsCache=yield Q._heartbeatsCachePromise),Q._heartbeatsCache.lastSentHeartbeatDate!==dt&&!Q._heartbeatsCache.heartbeats.some(Ft=>Ft.date===dt))return Q._heartbeatsCache.heartbeats.push({date:dt,agent:et}),Q._heartbeatsCache.heartbeats=Q._heartbeatsCache.heartbeats.filter(Ft=>{const xn=new Date(Ft.date).valueOf();return Date.now()-xn<=2592e6}),Q._storage.overwrite(Q._heartbeatsCache)})()}getHeartbeatsHeader(){var Q=this;return(0,a.Z)(function*(){if(null===Q._heartbeatsCache&&(yield Q._heartbeatsCachePromise),null===Q._heartbeatsCache||0===Q._heartbeatsCache.heartbeats.length)return"";const Ie=os(),{heartbeatsToSend:et,unsentEntries:dt}=function yo(Me,Q=1024){const Ie=[];let et=Me.slice();for(const dt of Me){const Ft=Ie.find(xn=>xn.agent===dt.agent);if(Ft){if(Ft.dates.push(dt.date),Lr(Ie)>Q){Ft.dates.pop();break}}else if(Ie.push({agent:dt.agent,dates:[dt.date]}),Lr(Ie)>Q){Ie.pop();break}et=et.slice(1)}return{heartbeatsToSend:Ie,unsentEntries:et}}(Q._heartbeatsCache.heartbeats),Ft=(0,re.L)(JSON.stringify({version:2,heartbeats:et}));return Q._heartbeatsCache.lastSentHeartbeatDate=Ie,dt.length>0?(Q._heartbeatsCache.heartbeats=dt,yield Q._storage.overwrite(Q._heartbeatsCache)):(Q._heartbeatsCache.heartbeats=[],Q._storage.overwrite(Q._heartbeatsCache)),Ft})()}}function os(){return(new Date).toISOString().substring(0,10)}class Vo{constructor(Q){this.app=Q,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,a.Z)(function*(){return!!(0,re.hl)()&&(0,re.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Q=this;return(0,a.Z)(function*(){return(yield Q._canUseIndexedDBPromise)&&(yield function hi(Me){return Hi.apply(this,arguments)}(Q.app))||{heartbeats:[]}})()}overwrite(Q){var Ie=this;return(0,a.Z)(function*(){var et;if(yield Ie._canUseIndexedDBPromise){const Ft=yield Ie.read();return Un(Ie.app,{lastSentHeartbeatDate:null!==(et=Q.lastSentHeartbeatDate)&&void 0!==et?et:Ft.lastSentHeartbeatDate,heartbeats:Q.heartbeats})}})()}add(Q){var Ie=this;return(0,a.Z)(function*(){var et;if(yield Ie._canUseIndexedDBPromise){const Ft=yield Ie.read();return Un(Ie.app,{lastSentHeartbeatDate:null!==(et=Q.lastSentHeartbeatDate)&&void 0!==et?et:Ft.lastSentHeartbeatDate,heartbeats:[...Ft.heartbeats,...Q.heartbeats]})}})()}}function Lr(Me){return(0,re.L)(JSON.stringify({version:2,heartbeats:Me})).length}!function wo(Me){ut(new ie.wA("platform-logger",Q=>new _e(Q),"PRIVATE")),ut(new ie.wA("heartbeat",Q=>new Tn(Q),"PRIVATE")),Ai(je,"0.9.19",Me),Ai(je,"0.9.19","esm2017"),Ai("fire-js","")}("")},4537:(Ct,xe,L)=>{L.d(xe,{H0:()=>je,wA:()=>V,zt:()=>he});var a=L(5861),ie=L(9058);class V{constructor($,Z,le){this.name=$,this.instanceFactory=Z,this.type=le,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const re="[DEFAULT]";class he{constructor($,Z){this.name=$,this.container=Z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const Z=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(Z)){const le=new ie.BH;if(this.instancesDeferred.set(Z,le),this.isInitialized(Z)||this.shouldAutoInitialize())try{const Ze=this.getOrInitializeService({instanceIdentifier:Z});Ze&&le.resolve(Ze)}catch{}}return this.instancesDeferred.get(Z).promise}getImmediate($){var Z;const le=this.normalizeInstanceIdentifier($?.identifier),Ze=null!==(Z=$?.optional)&&void 0!==Z&&Z;if(!this.isInitialized(le)&&!this.shouldAutoInitialize()){if(Ze)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:le})}catch(Ue){if(Ze)return null;throw Ue}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function Ae(we){return"EAGER"===we.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:re})}catch{}for(const[Z,le]of this.instancesDeferred.entries()){const Ze=this.normalizeInstanceIdentifier(Z);try{const Ue=this.getOrInitializeService({instanceIdentifier:Ze});le.resolve(Ue)}catch{}}}}clearInstance($=re){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,a.Z)(function*(){const Z=Array.from($.instances.values());yield Promise.all([...Z.filter(le=>"INTERNAL"in le).map(le=>le.INTERNAL.delete()),...Z.filter(le=>"_delete"in le).map(le=>le._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=re){return this.instances.has($)}getOptions($=re){return this.instancesOptions.get($)||{}}initialize($={}){const{options:Z={}}=$,le=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(le))throw Error(`${this.name}(${le}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ze=this.getOrInitializeService({instanceIdentifier:le,options:Z});for(const[Ue,at]of this.instancesDeferred.entries())le===this.normalizeInstanceIdentifier(Ue)&&at.resolve(Ze);return Ze}onInit($,Z){var le;const Ze=this.normalizeInstanceIdentifier(Z),Ue=null!==(le=this.onInitCallbacks.get(Ze))&&void 0!==le?le:new Set;Ue.add($),this.onInitCallbacks.set(Ze,Ue);const at=this.instances.get(Ze);return at&&$(at,Ze),()=>{Ue.delete($)}}invokeOnInitCallbacks($,Z){const le=this.onInitCallbacks.get(Z);if(le)for(const Ze of le)try{Ze($,Z)}catch{}}getOrInitializeService({instanceIdentifier:$,options:Z={}}){let le=this.instances.get($);if(!le&&this.component&&(le=this.component.instanceFactory(this.container,{instanceIdentifier:(we=$,we===re?void 0:we),options:Z}),this.instances.set($,le),this.instancesOptions.set($,Z),this.invokeOnInitCallbacks(le,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,le)}catch{}var we;return le||null}normalizeInstanceIdentifier($=re){return this.component?this.component.multipleInstances?$:re:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class je{constructor($){this.name=$,this.providers=new Map}addComponent($){const Z=this.getProvider($.name);if(Z.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);Z.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const Z=new he($,this);return this.providers.set($,Z),Z}getProviders(){return Array.from(this.providers.values())}}},7879:(Ct,xe,L)=>{L.d(xe,{Am:()=>we,Ub:()=>je,Yd:()=>Ae,in:()=>ie});const a=[];var ie=function($){return $[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",$}(ie||{});const V={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},re=ie.INFO,he={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},_e=($,Z,...le)=>{if(Z<$.logLevel)return;const Ze=(new Date).toISOString(),Ue=he[Z];if(!Ue)throw new Error(`Attempted to log a message with an invalid logType (value: ${Z})`);console[Ue](`[${Ze}]  ${$.name}:`,...le)};class Ae{constructor(Z){this.name=Z,this._logLevel=re,this._logHandler=_e,this._userLogHandler=null,a.push(this)}get logLevel(){return this._logLevel}set logLevel(Z){if(!(Z in ie))throw new TypeError(`Invalid value "${Z}" assigned to \`logLevel\``);this._logLevel=Z}setLogLevel(Z){this._logLevel="string"==typeof Z?V[Z]:Z}get logHandler(){return this._logHandler}set logHandler(Z){if("function"!=typeof Z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Z}get userLogHandler(){return this._userLogHandler}set userLogHandler(Z){this._userLogHandler=Z}debug(...Z){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...Z),this._logHandler(this,ie.DEBUG,...Z)}log(...Z){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...Z),this._logHandler(this,ie.VERBOSE,...Z)}info(...Z){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...Z),this._logHandler(this,ie.INFO,...Z)}warn(...Z){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...Z),this._logHandler(this,ie.WARN,...Z)}error(...Z){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...Z),this._logHandler(this,ie.ERROR,...Z)}}function je($){a.forEach(Z=>{Z.setLogLevel($)})}function we($,Z){for(const le of a){let Ze=null;Z&&Z.level&&(Ze=V[Z.level]),le.userLogHandler=null===$?null:(Ue,at,...$e)=>{const lt=$e.map(ze=>{if(null==ze)return null;if("string"==typeof ze)return ze;if("number"==typeof ze||"boolean"==typeof ze)return ze.toString();if(ze instanceof Error)return ze.message;try{return JSON.stringify(ze)}catch{return null}}).filter(ze=>ze).join(" ");at>=(Ze??Ue.logLevel)&&$({level:ie[at].toLowerCase(),message:lt,args:$e,type:Ue.name})}}}},1878:(Ct,xe,L)=>{L.d(xe,{X3:()=>Nt});var a=L(5861);const ie=(ge,X)=>X.some(Je=>ge instanceof Je);let V,re;const Ae=new WeakMap,je=new WeakMap,we=new WeakMap,$=new WeakMap,Z=new WeakMap;let Ue={get(ge,X,Je){if(ge instanceof IDBTransaction){if("done"===X)return je.get(ge);if("objectStoreNames"===X)return ge.objectStoreNames||we.get(ge);if("store"===X)return Je.objectStoreNames[1]?void 0:Je.objectStore(Je.objectStoreNames[0])}return ze(ge[X])},set:(ge,X,Je)=>(ge[X]=Je,!0),has:(ge,X)=>ge instanceof IDBTransaction&&("done"===X||"store"===X)||X in ge};function lt(ge){return"function"==typeof ge?function $e(ge){return ge!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function _e(){return re||(re=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ge)?function(...X){return ge.apply(Rt(this),X),ze(Ae.get(this))}:function(...X){return ze(ge.apply(Rt(this),X))}:function(X,...Je){const kt=ge.call(Rt(this),X,...Je);return we.set(kt,X.sort?X.sort():[X]),ze(kt)}}(ge):(ge instanceof IDBTransaction&&function Ze(ge){if(je.has(ge))return;const X=new Promise((Je,kt)=>{const Nn=()=>{ge.removeEventListener("complete",Kn),ge.removeEventListener("error",Wn),ge.removeEventListener("abort",Wn)},Kn=()=>{Je(),Nn()},Wn=()=>{kt(ge.error||new DOMException("AbortError","AbortError")),Nn()};ge.addEventListener("complete",Kn),ge.addEventListener("error",Wn),ge.addEventListener("abort",Wn)});je.set(ge,X)}(ge),ie(ge,function he(){return V||(V=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ge,Ue):ge)}function ze(ge){if(ge instanceof IDBRequest)return function le(ge){const X=new Promise((Je,kt)=>{const Nn=()=>{ge.removeEventListener("success",Kn),ge.removeEventListener("error",Wn)},Kn=()=>{Je(ze(ge.result)),Nn()},Wn=()=>{kt(ge.error),Nn()};ge.addEventListener("success",Kn),ge.addEventListener("error",Wn)});return X.then(Je=>{Je instanceof IDBCursor&&Ae.set(Je,ge)}).catch(()=>{}),Z.set(X,ge),X}(ge);if($.has(ge))return $.get(ge);const X=lt(ge);return X!==ge&&($.set(ge,X),Z.set(X,ge)),X}const Rt=ge=>Z.get(ge);function Nt(ge,X,{blocked:Je,upgrade:kt,blocking:Nn,terminated:Kn}={}){const Wn=indexedDB.open(ge,X),ci=ze(Wn);return kt&&Wn.addEventListener("upgradeneeded",ui=>{kt(ze(Wn.result),ui.oldVersion,ui.newVersion,ze(Wn.transaction),ui)}),Je&&Wn.addEventListener("blocked",ui=>Je(ui.oldVersion,ui.newVersion,ui)),ci.then(ui=>{Kn&&ui.addEventListener("close",()=>Kn()),Nn&&ui.addEventListener("versionchange",ar=>Nn(ar.oldVersion,ar.newVersion,ar))}).catch(()=>{}),ci}const Re=["get","getKey","getAll","getAllKeys","count"],fe=["put","add","delete","clear"],Pe=new Map;function We(ge,X){if(!(ge instanceof IDBDatabase)||X in ge||"string"!=typeof X)return;if(Pe.get(X))return Pe.get(X);const Je=X.replace(/FromIndex$/,""),kt=X!==Je,Nn=fe.includes(Je);if(!(Je in(kt?IDBIndex:IDBObjectStore).prototype)||!Nn&&!Re.includes(Je))return;const Kn=function(){var Wn=(0,a.Z)(function*(ci,...ui){const ar=this.transaction(ci,Nn?"readwrite":"readonly");let me=ar.store;return kt&&(me=me.index(ui.shift())),(yield Promise.all([me[Je](...ui),Nn&&ar.done]))[0]});return function(ui){return Wn.apply(this,arguments)}}();return Pe.set(X,Kn),Kn}!function at(ge){Ue=ge(Ue)}(ge=>({...ge,get:(X,Je,kt)=>We(X,Je)||ge.get(X,Je,kt),has:(X,Je)=>!!We(X,Je)||ge.has(X,Je)}))},5861:(Ct,xe,L)=>{function a(V,re,he,_e,Ae,je,we){try{var $=V[je](we),Z=$.value}catch(le){return void he(le)}$.done?re(Z):Promise.resolve(Z).then(_e,Ae)}function ie(V){return function(){var re=this,he=arguments;return new Promise(function(_e,Ae){var je=V.apply(re,he);function we(Z){a(je,_e,Ae,we,$,"next",Z)}function $(Z){a(je,_e,Ae,we,$,"throw",Z)}we(void 0)})}}L.d(xe,{Z:()=>ie})},7582:(Ct,xe,L)=>{L.d(xe,{FC:()=>Re,KL:()=>Pe,_T:()=>re,mG:()=>le,pi:()=>V,qq:()=>pe});var V=function(){return V=Object.assign||function(De){for(var Ce,Se=1,Fe=arguments.length;Se<Fe;Se++)for(var Ve in Ce=arguments[Se])Object.prototype.hasOwnProperty.call(Ce,Ve)&&(De[Ve]=Ce[Ve]);return De},V.apply(this,arguments)};function re(me,De){var Ce={};for(var Se in me)Object.prototype.hasOwnProperty.call(me,Se)&&De.indexOf(Se)<0&&(Ce[Se]=me[Se]);if(null!=me&&"function"==typeof Object.getOwnPropertySymbols){var Fe=0;for(Se=Object.getOwnPropertySymbols(me);Fe<Se.length;Fe++)De.indexOf(Se[Fe])<0&&Object.prototype.propertyIsEnumerable.call(me,Se[Fe])&&(Ce[Se[Fe]]=me[Se[Fe]])}return Ce}function le(me,De,Ce,Se){return new(Ce||(Ce=Promise))(function(Ve,ut){function it(Dn){try{Pt(Se.next(Dn))}catch(xt){ut(xt)}}function di(Dn){try{Pt(Se.throw(Dn))}catch(xt){ut(xt)}}function Pt(Dn){Dn.done?Ve(Dn.value):function Fe(Ve){return Ve instanceof Ce?Ve:new Ce(function(ut){ut(Ve)})}(Dn.value).then(it,di)}Pt((Se=Se.apply(me,De||[])).next())})}function pe(me){return this instanceof pe?(this.v=me,this):new pe(me)}function Re(me,De,Ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Fe,Se=Ce.apply(me,De||[]),Ve=[];return Fe={},ut("next"),ut("throw"),ut("return"),Fe[Symbol.asyncIterator]=function(){return this},Fe;function ut(Qn){Se[Qn]&&(Fe[Qn]=function(Jn){return new Promise(function(Ci,Vn){Ve.push([Qn,Jn,Ci,Vn])>1||it(Qn,Jn)})})}function it(Qn,Jn){try{!function di(Qn){Qn.value instanceof pe?Promise.resolve(Qn.value.v).then(Pt,Dn):xt(Ve[0][2],Qn)}(Se[Qn](Jn))}catch(Ci){xt(Ve[0][3],Ci)}}function Pt(Qn){it("next",Qn)}function Dn(Qn){it("throw",Qn)}function xt(Qn,Jn){Qn(Jn),Ve.shift(),Ve.length&&it(Ve[0][0],Ve[0][1])}}function Pe(me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ce,De=me[Symbol.asyncIterator];return De?De.call(me):(me=function $e(me){var De="function"==typeof Symbol&&Symbol.iterator,Ce=De&&me[De],Se=0;if(Ce)return Ce.call(me);if(me&&"number"==typeof me.length)return{next:function(){return me&&Se>=me.length&&(me=void 0),{value:me&&me[Se++],done:!me}}};throw new TypeError(De?"Object is not iterable.":"Symbol.iterator is not defined.")}(me),Ce={},Se("next"),Se("throw"),Se("return"),Ce[Symbol.asyncIterator]=function(){return this},Ce);function Se(Ve){Ce[Ve]=me[Ve]&&function(ut){return new Promise(function(it,di){!function Fe(Ve,ut,it,di){Promise.resolve(di).then(function(Pt){Ve({value:Pt,done:it})},ut)}(it,di,(ut=me[Ve](ut)).done,ut.value)})}}}"function"==typeof SuppressedError&&SuppressedError}},Ct=>{Ct(Ct.s=4989)}]);